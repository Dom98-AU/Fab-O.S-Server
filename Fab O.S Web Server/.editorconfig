# EditorConfig is awesome: https://EditorConfig.org

# Fab.OS Platform - Code Style Standards
# Enforces multi-tenant URL architecture and coding conventions

root = true

# All files
[*]
charset = utf-8
insert_final_newline = true
trim_trailing_whitespace = true

# Code files
[*.{cs,razor}]
indent_style = space
indent_size = 4
end_of_line = lf

# Blazor Razor files
[*.razor]
indent_style = space
indent_size = 4

# JSON files
[*.json]
indent_style = space
indent_size = 2

# YAML files
[*.{yml,yaml}]
indent_style = space
indent_size = 2

# Markdown files
[*.md]
trim_trailing_whitespace = false

# C# files
[*.cs]

# New line preferences
csharp_new_line_before_open_brace = all
csharp_new_line_before_else = true
csharp_new_line_before_catch = true
csharp_new_line_before_finally = true

# Indentation preferences
csharp_indent_case_contents = true
csharp_indent_switch_labels = true

# Space preferences
csharp_space_after_cast = false
csharp_space_after_keywords_in_control_flow_statements = true
csharp_space_between_method_declaration_parameter_list_parentheses = false
csharp_space_between_method_call_parameter_list_parentheses = false

# Prefer "var" everywhere
csharp_style_var_for_built_in_types = true:suggestion
csharp_style_var_when_type_is_apparent = true:suggestion
csharp_style_var_elsewhere = true:suggestion

# Prefer expression-bodied members
csharp_style_expression_bodied_methods = when_on_single_line:suggestion
csharp_style_expression_bodied_properties = when_on_single_line:suggestion
csharp_style_expression_bodied_accessors = when_on_single_line:suggestion

# Pattern matching
csharp_style_pattern_matching_over_is_with_cast_check = true:suggestion
csharp_style_pattern_matching_over_as_with_null_check = true:suggestion

# Null checking
csharp_style_throw_expression = true:suggestion
csharp_style_conditional_delegate_call = true:suggestion

# Code quality
dotnet_code_quality_unused_parameters = all:suggestion

# Naming conventions
dotnet_naming_rule.interfaces_should_be_prefixed_with_i.severity = warning
dotnet_naming_rule.interfaces_should_be_prefixed_with_i.symbols = interface
dotnet_naming_rule.interfaces_should_be_prefixed_with_i.style = begins_with_i

dotnet_naming_symbols.interface.applicable_kinds = interface
dotnet_naming_symbols.interface.applicable_accessibilities = public, internal, private, protected, protected_internal, private_protected

dotnet_naming_style.begins_with_i.required_prefix = I
dotnet_naming_style.begins_with_i.capitalization = pascal_case

# Async methods should have "Async" suffix
dotnet_naming_rule.async_methods_should_end_with_async.severity = warning
dotnet_naming_rule.async_methods_should_end_with_async.symbols = async_method
dotnet_naming_rule.async_methods_should_end_with_async.style = end_with_async

dotnet_naming_symbols.async_method.applicable_kinds = method
dotnet_naming_symbols.async_method.applicable_accessibilities = *
dotnet_naming_symbols.async_method.required_modifiers = async

dotnet_naming_style.end_with_async.required_suffix = Async
dotnet_naming_style.end_with_async.capitalization = pascal_case

# Private fields should start with underscore
dotnet_naming_rule.private_fields_should_start_with_underscore.severity = suggestion
dotnet_naming_rule.private_fields_should_start_with_underscore.symbols = private_field
dotnet_naming_rule.private_fields_should_start_with_underscore.style = starts_with_underscore

dotnet_naming_symbols.private_field.applicable_kinds = field
dotnet_naming_symbols.private_field.applicable_accessibilities = private

dotnet_naming_style.starts_with_underscore.required_prefix = _
dotnet_naming_style.starts_with_underscore.capitalization = camel_case

# CA1054: URI parameters should not be strings
dotnet_diagnostic.CA1054.severity = suggestion

# CA1055: URI return values should not be strings
dotnet_diagnostic.CA1055.severity = suggestion

# CA1062: Validate arguments of public methods
dotnet_diagnostic.CA1062.severity = suggestion

# Suppress nullable reference warnings (can be enabled later)
dotnet_diagnostic.CS8600.severity = none
dotnet_diagnostic.CS8601.severity = none
dotnet_diagnostic.CS8602.severity = none
dotnet_diagnostic.CS8603.severity = none
dotnet_diagnostic.CS8604.severity = none

# Custom Fab.OS Rules (via comments for documentation)
# These will be enforced by code review and RouteValidator tool

# URL-001: All @page directives must start with /{tenantSlug}
# Example: @page "/{tenantSlug}/trace/takeoffs"
# Invalid: @page "/trace/takeoffs"

# URL-002: Resource names in routes must be plural and lowercase
# Example: /takeoffs, /customers, /packages
# Invalid: /takeoff, /Takeoffs, /Takeoff

# URL-003: Multi-word resources must use kebab-case (hyphens)
# Example: /work-orders, /purchase-orders
# Invalid: /work_orders, /workOrders, /WorkOrders

# URL-004: ID parameters must have route constraints
# Example: {id:int}, {takeoffId:int}
# Invalid: {id}, {takeoffId}

# URL-005: Maximum URL depth is 5 levels
# Example: /{tenantSlug}/{module}/{resource}/{id}/{subResource}
# Invalid: /{tenantSlug}/{module}/{resource}/{id}/{subResource}/{subSubResource}

# URL-006: Module names must be lowercase: trace, estimate, fabmate, qdocs, settings
# Example: /{tenantSlug}/trace/takeoffs
# Invalid: /{tenantSlug}/Trace/takeoffs, /{tenantSlug}/TRACE/takeoffs
