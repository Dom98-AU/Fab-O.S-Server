!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("UIExtension")):"function"==typeof define&&define.amd?define(["UIExtension"],t):"object"==typeof exports?exports.HiddenDataUIXAddon=t(require("UIExtension")):e.HiddenDataUIXAddon=t(e.UIExtension)}(self,e=>(()=>{var t={421:(e,t,n)=>{n(779);e.exports=function(e){"use strict";e=e||{};return'<ribbon-button\n  separate="false"\n  @tooltip\n  tooltip-title="hidden-data:button-tooltip.title"\n  text="hidden-data:button-tooltip.tooltip"\n  icon-class="fv__icon-hidden-data__hidden-data"\n  not-immediately="true"\n  @controller="hidden-data:HiddenDataController"\n>\n  <dropdown\npopup-class="fv__ui-hidden-data-dropdown"\nclass="fv__ui-file-dropdown width_110"\n  >\n<dropdown-button\n  name="hidden-data-sanitize-document"\n  class="convert-item"\n  @tooltip\n  tooltip-title="hidden-data:sanitizeDocument.tooltip"\n  icon-class="fv__icon-hidden-data__sanitize-document"\n  @controller="hidden-data:ShowSanitizeDocumentController"\n  @cannotBeDisabled\n>\n  hidden-data:sanitizeDocument.title\n</dropdown-button>\n<dropdown-button\n  name="hidden-data-remove-hidden-information"\n  class="convert-item"\n  @tooltip\n  tooltip-title="hidden-data:removeHiddenInformation.tooltip"\n  icon-class="fv__icon-hidden-data__remove-hidden-info"\n  @controller="hidden-data:ShowRemoveHiddenInformationController"\n  @cannotBeDisabled\n>\n  hidden-data:removeHiddenInformation.title\n</dropdown-button>\n  </dropdown>\n</ribbon-button>\n'}},458:(e,t,n)=>{n(779);e.exports=function(e){"use strict";e=e||{};return'<layer class="center remove-hidden-information-dialog websdk-modal" append-to="body" @draggable backdrop @var.c="$component">\n<layer-header title="hidden-data:removeHiddenInformation.title" @draggable="{type:\'parent\'}"></layer-header>\n\n<div class="remove-hidden-information">\n<div class="remove-hidden-information-title">hidden-data:removeHiddenInformation.dialog.title</div>\n<layer-view class="remove-hidden-information-main" @stop-drag>\n<form class="remove-hidden-information-form" name="removeHiddenInformationForm">\n<checkbox name="metadata" @model="c.options.metadata" text="hidden-data:removeHiddenInformation.dialog.checkboxes.metadata" ></checkbox>\n<checkbox name="fileAttachments" @model="c.options.fileAttachments" text="hidden-data:removeHiddenInformation.dialog.checkboxes.fileAttachments" ></checkbox>\n<checkbox name="bookmarks"  @model="c.options.bookmarks" text="hidden-data:removeHiddenInformation.dialog.checkboxes.bookmarks" ></checkbox>\n<checkbox name="embeddedSearchIndexes"  @model="c.options.embeddedSearchIndexes" text="hidden-data:removeHiddenInformation.dialog.checkboxes.embeddedSearchIndexes" ></checkbox>\n<checkbox name="commentsAndMarkups"  @model="c.options.commentsAndMarkups" text="hidden-data:removeHiddenInformation.dialog.checkboxes.commentsAndMarkups" ></checkbox>\n<checkbox name="formFields"  @model="c.options.formFields" text="hidden-data:removeHiddenInformation.dialog.checkboxes.formFields" ></checkbox>\n<checkbox name="hiddenText"  @model="c.options.hiddenText" text="hidden-data:removeHiddenInformation.dialog.checkboxes.hiddenText" ></checkbox>\n<checkbox name="hiddenLayers"  @model="c.options.hiddenLayers" text="hidden-data:removeHiddenInformation.dialog.checkboxes.hiddenLayers" ></checkbox>\n<checkbox name="deletedOrCroppedContent"  @model="c.options.deletedOrCroppedContent" text="hidden-data:removeHiddenInformation.dialog.checkboxes.deletedOrCroppedContent" ></checkbox>\n<checkbox name="linksActionsJavascripts"  @model="c.options.linksActionsJavascripts" text="hidden-data:removeHiddenInformation.dialog.checkboxes.linksActionsJavascripts" ></checkbox>\n<checkbox name="overlappingObjects"  @model="c.options.overlappingObjects" text="hidden-data:removeHiddenInformation.dialog.checkboxes.overlappingObjects" ></checkbox>\n</form>\n</layer-view>\n</div>\n<div class="container hidden-data-footer">\n<div class="row">\n<div class="col-12 justify-content-end align-items-center">\n<xbutton class="fv__ui-dialog-ok-button" @on.click="c.ok()"> dialog.ok </xbutton>\n<xbutton class="fv__ui-dialog-cancel-button" @on.click="c.cancel()"> dialog.cancel </xbutton>\n</div>\n</div>\n</div>\n</layer>'}},131:(e,t,n)=>{n(779);e.exports=function(e){"use strict";e=e||{};return'<layer class="center sanitize-document-dialog websdk-modal" append-to="body" @draggable backdrop @var.c="$component">\n<layer-header title="hidden-data:sanitizeDocument.title" @draggable="{type:\'parent\'}"></layer-header>\n<layer-view @stop-drag class="sanitize-document-layer-view">\n<div class="sanitize-document-title">\n<i class="sanitize-document-title__prefix-icon"></i>\n<span class="sanitize-document-title__text">hidden-data:sanitizeDocument.dialog.title</span>\n</div>\n<ul class="sanitize-document-list">\n<li class="sanitize-document-item">hidden-data:sanitizeDocument.dialog.content.metadata</li>\n<li class="sanitize-document-item">hidden-data:sanitizeDocument.dialog.content.embeddedAttached</li>\n<li class="sanitize-document-item">hidden-data:sanitizeDocument.dialog.content.scripts</li>\n<li class="sanitize-document-item">hidden-data:sanitizeDocument.dialog.content.hiddenLayers</li>\n<li class="sanitize-document-item">hidden-data:sanitizeDocument.dialog.content.embeddedSearchIndexes</li>\n<li class="sanitize-document-item">hidden-data:sanitizeDocument.dialog.content.storedFormData</li>\n<li class="sanitize-document-item">hidden-data:sanitizeDocument.dialog.content.reviewComment</li>\n<li class="sanitize-document-item">hidden-data:sanitizeDocument.dialog.content.hiddenDataPreDocSave</li>\n<li class="sanitize-document-item">hidden-data:sanitizeDocument.dialog.content.obscuredTextAndImage</li>\n<li class="sanitize-document-item">hidden-data:sanitizeDocument.dialog.content.commentsHidden</li>\n<li class="sanitize-document-item">hidden-data:sanitizeDocument.dialog.content.unreferencedData</li>\n<li class="sanitize-document-item">hidden-data:sanitizeDocument.dialog.content.linksActionsJavascripts</li>\n<li class="sanitize-document-item">hidden-data:sanitizeDocument.dialog.content.overlappingObjects</li>\n</ul>\n</layer-view>\n<checkbox name="notShowAgain" class="sanitize-document-not-show-again" text="hidden-data:sanitizeDocument.dialog.notShowAgain"></checkbox>\n<div class="container hidden-data-footer">\n<div class="row">\n<div class="justify-content-end align-items-center">\n<xbutton class="fv__ui-dialog-ok-button" @on.click="c.ok()"> dialog.ok </xbutton>\n<xbutton class="fv__ui-dialog-cancel-button" @on.click="c.cancel()"> dialog.cancel </xbutton>\n</div>\n</div>\n</div>\n</layer>'}},553:e=>{e.exports=null},585:(e,t,n)=>{"use strict";
/*! art-template@runtime | https://github.com/aui/art-template */var o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{},i=Object.create(o),a=/["&'<>]/;function r(e){return"string"!=typeof e&&(e=null==e?"":"function"==typeof e?r(e.call(e)):JSON.stringify(e)),e}i.$escape=function(e){return function(e){var t=""+e,n=a.exec(t);if(!n)return e;var o="",i=void 0,r=void 0,s=void 0;for(i=n.index,r=0;i<t.length;i++){switch(t.charCodeAt(i)){case 34:s="&#34;";break;case 38:s="&#38;";break;case 39:s="&#39;";break;case 60:s="&#60;";break;case 62:s="&#62;";break;default:continue}r!==i&&(o+=t.substring(r,i)),r=i+1,o+=s}return r!==i?o+t.substring(r,i):o}(r(e))},i.$each=function(e,t){if(Array.isArray(e))for(var n=0,o=e.length;n<o;n++)t(e[n],n);else for(var i in e)t(e[i],i)},e.exports=i},779:(e,t,n)=>{"use strict";e.exports=n(585)},616:t=>{"use strict";t.exports=e}},n={};function o(e){var i=n[e];if(void 0!==i)return i.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,o),a.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var i={};return(()=>{"use strict";function e(t){return e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e(t)}function t(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(t=function(){return!!e})()}function n(e,t){return!t||"object"!=((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t;var n}function a(o,i,a){return i=e(i),n(o,t()?Reflect.construct(i,a||[],e(o).constructor):i.apply(o,a))}function r(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):r(e,t)}function s(e,t){if(!r(e,t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}o.d(i,{default:()=>B});var h=o(616),m=o(553),f=o.n(m),p=o(421),b=o.n(p);function v(e,t,n,o,i,a,r){try{var s=e[a](r),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(o,i)}function g(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var a=e.apply(t,n);function r(e){v(a,o,i,r,s,"next",e)}function s(e){v(a,o,i,r,s,"throw",e)}r(void 0)})}}function y(e,t){var n,o,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},r=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return r.next=s(0),r.throw=s(1),r.return=s(2),"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(d){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,d])}}}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;var k=h.PDFViewCtrl.shared.download;function x(e){var t=e.root,n=e.template,o=e.query,i=e.appendTo,a=void 0===i?document.body:i;t.append(n),t.querySelector(o).show(a)}function w(e){return g(function(){var t,n,o,i,a,r,s,d;return y(this,function(c){switch(c.label){case 0:return[4,e.getPDFViewer()];case 1:return(t=c.sent()).activeElement(null),n=t.getCurrentPDFDoc(),o=h.PDFViewCtrl.PDF.constant.Saving_Flag,i=o.normal,a=o.incremental,r=o.removeRedundantObjects,s=(n.hasSignature()?a:i)|r,[4,n.getFile({flags:s})];case 2:return d=c.sent(),[4,k(d,d.name||"download.pdf")];case 3:return c.sent(),e.openPDFByFile(d),[2]}})})()}var D="HiddenDataSanitizeDocument_NotShowAgain";var I=function(e){function t(){return s(this,t),a(this,t,arguments)}return u(t,e),c(t,[{key:"handle",value:function(){return g(function(){var e,t,n,o,i;return y(this,function(a){switch(a.label){case 0:return localStorage.getItem(D)?[4,this.pdfUI.loading()]:[3,10];case 1:return e=a.sent(),[4,this.getPDFUI()];case 2:return t=a.sent(),[4,null==(n=t.customs.startOtelSpan)?void 0:n("sanitize-document")];case 3:o=a.sent(),a.label=4;case 4:return a.trys.push([4,8,,9]),[4,this.pdfUI.getCurrentPDFDoc()];case 5:return[4,a.sent().hiddenDataSanitizeDocument()];case 6:return a.sent(),[4,w(this.pdfUI)];case 7:return a.sent(),[3,9];case 8:return i=a.sent(),null==o||o.setSpanException(i),[3,9];case 9:return null==o||o.end(),e.hide(),[2];case 10:return x({root:this.component.getRoot(),template:"<hidden-data:sanitize-document-dialog></hidden-data:sanitize-document-dialog>",query:"@hidden-data:sanitize-document-dialog"}),[2]}})}).call(this)}}],[{key:"getName",value:function(){return"ShowSanitizeDocumentController"}}]),t}(h.Controller),C=function(e){function t(){return s(this,t),a(this,t,arguments)}return u(t,e),c(t,[{key:"handle",value:function(){x({root:this.component.getRoot(),template:"<hidden-data:remove-hidden-information-dialog></hidden-data:remove-hidden-information-dialog>",query:"@hidden-data:remove-hidden-information-dialog"})}}],[{key:"getName",value:function(){return"ShowRemoveHiddenInformationController"}}]),t}(h.Controller);function S(t,n,o){return S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,n,o){var i=function(t,n){for(;!Object.prototype.hasOwnProperty.call(t,n)&&null!==(t=e(t)););return t}(t,n);if(i){var a=Object.getOwnPropertyDescriptor(i,n);return a.get?a.get.call(o||t):a.value}},S(t,n,o||t)}var z=o(131),P=o.n(z),_=function(t){function n(){return s(this,n),a(this,n,arguments)}return u(n,t),c(n,[{key:"mounted",value:function(){S(e(n.prototype),"mounted",this).call(this),this.notShowAgain=this.getComponentByName("notShowAgain")}},{key:"ok",value:function(){return g(function(){var e;return y(this,function(t){switch(t.label){case 0:return[4,this.pdfUI.loading()];case 1:return e=t.sent(),this.notShowAgain.getValue()&&localStorage.setItem(D,!0),[4,this.pdfUI.getCurrentPDFDoc()];case 2:return[4,t.sent().hiddenDataSanitizeDocument()];case 3:return t.sent(),[4,w(this.pdfUI)];case 4:return t.sent(),e.hide(),this.close(),[2]}})}).call(this)}},{key:"cancel",value:function(){this.close()}},{key:"close",value:function(){S(e(n.prototype),"close",this).call(this)}}],[{key:"getName",value:function(){return"sanitize-document-dialog"}}]),n}(h.SeniorComponentFactory.createSuperClass({template:P()()})),O=o(458),A=o.n(O),F="HiddenDataRemoveHiddenInformation_LastNotCheckedOpts";var j={metadata:"bRemoveMetadata",fileAttachments:"bRemoveFileattachment",bookmarks:"bRemoveBookmark",embeddedSearchIndexes:"bRemoveSearchIndex",commentsAndMarkups:"bRemoveComment",formFields:"bRemoveForm",hiddenText:"bRemoveHideText",hiddenLayers:"bRemoveHideLayer",deletedOrCroppedContent:"bRemoveContent",linksActionsJavascripts:"bRemoveLink",overlappingObjects:"bRemoveOverlaping"},H=function(t){function n(){return s(this,n),a(this,n,arguments)}return u(n,t),c(n,[{key:"init",value:function(){S(e(n.prototype),"init",this).call(this),this.options=Object.keys(j).reduce(function(e,t){return e[t]=!0,e},{})}},{key:"mounted",value:function(){var t=this;S(e(n.prototype),"mounted",this).call(this),Object.keys(j).forEach(function(e){t[e]=t.getComponentByName(e)}),this.setCheckBoxStatusByLastList()}},{key:"setCheckBoxStatusByLastList",value:function(){var e,t=this,n=(e=localStorage.getItem(F),JSON.parse(e));n&&n.length&&(n.forEach(function(e){t.options[e]=!1}),this.digest())}},{key:"saveLastNotCheckedList",value:function(){var e=this,t=[];Object.keys(this.options).forEach(function(n){e.options[n]||t.push(n)}),function(e){localStorage.setItem(F,JSON.stringify(e))}(t)}},{key:"ok",value:function(){return g(function(){var e,t,n;return y(this,function(o){switch(o.label){case 0:return e=this,t={},Object.keys(this.options).forEach(function(n){e.options[n]&&(t[j[n]]=!0)}),Object.keys(t).length?[4,this.pdfUI.loading()]:(this.pdfUI.alert({message:"hidden-data:removeHiddenInformation.dialog.noCheckedAlert",level:"warning"}).then(function(){e._showParams.failAfter&&showParams.failAfter()}),[2]);case 1:return n=o.sent(),[4,this.pdfUI.getCurrentPDFDoc()];case 2:return[4,o.sent().hiddenDataRemoveHiddenInfo(t)];case 3:return o.sent(),[4,w(this.pdfUI)];case 4:return o.sent(),this.saveLastNotCheckedList(),this._showParams.successAfter&&this._showParams.successAfter(),n.hide(),this.close(),[2]}})}).call(this)}},{key:"show",value:function(t,o){this._showParams=o||{},S(e(n.prototype),"show",this).call(this,t)}},{key:"cancel",value:function(){this.close()}},{key:"close",value:function(){this._showParams.cancelAfter&&this._showParams.cancelAfter(),this._showParams={},S(e(n.prototype),"close",this).call(this)}}],[{key:"getName",value:function(){return"remove-hidden-information-dialog"}}]),n}(h.SeniorComponentFactory.createSuperClass({template:A()()}));function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U=h.PDFViewCtrl.ViewerEvents,L=h.PDFViewCtrl.Consts.PDFDocPermission.ModifyDocument,E=L+h.PDFViewCtrl.Consts.PDFDocPermission.Assemble,N=function(e){function t(){return s(this,t),a(this,t,arguments)}return u(t,e),c(t,[{key:"btnPermission",value:function(e){return g(function(){var t,n;return y(this,function(o){switch(o.label){case 0:return[4,this.getPDFUI().getPDFDocRender()];case 1:return(t=o.sent())?(n=t.getUserPermission().getValue())&L&&n&E?e.isPortfolio()?(this.component.disable(),[2]):[4,t.doc.isXFA()]:(this.component.disable(),[2]):[2];case 2:return o.sent()?(this.component.disable(),[2]):[4,e.isStaticXFA()];case 3:return o.sent()?(this.component.disable(),[2]):[4,e.readonly()];case 4:return o.sent()?(this.component.disable(),[2]):(8&t.doc.getPermissionsSync()&&this.component.enable(),[2])}})}).call(this)}},{key:"mounted",value:function(){var e,t=this;this.addDestroyHook(this.getPDFUI().addViewerEventListener((R(e={},U.renderFileSuccess,this.btnPermission.bind(this)),R(e,U.permissionChanged,this.btnPermission.bind(this)),e))),this.pdfUI.getCurrentPDFDoc().then(function(e){return e&&t.btnPermission(e)})}}],[{key:"getName",value:function(){return"HiddenDataController"}}]),t}(h.Controller),B=function(e){function t(){return s(this,t),a(this,t,arguments)}return u(t,e),c(t,null,[{key:"getName",value:function(){return"HiddenData"}},{key:"getLoader",value:function(){return f()}},{key:"initOnLoad",value:function(){var e=h.modular.module("hidden-data",[]);e.registerController(N),e.registerController(I),e.registerController(C),e.registerPreConfiguredComponent("hidden-data-button",{template:b()()}),e.registerComponent(_),e.registerComponent(H)}}]),t}(h.UIXAddon)})(),i=i.default})());