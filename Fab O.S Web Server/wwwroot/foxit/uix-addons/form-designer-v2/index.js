!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("UIExtension"),require("UIExtension").PDFViewCtrl.PDF.actions,require("UIExtension").PDFViewCtrl.PDF.annots,require("UIExtension").PDFViewCtrl.commons,require("UIExtension").PDFViewCtrl.form,require("UIExtension").__ui_lib__):"function"==typeof define&&define.amd?define(["UIExtension",["UIExtension","PDFViewCtrl","PDF","actions"],["UIExtension","PDFViewCtrl","PDF","annots"],["UIExtension","PDFViewCtrl","commons"],["UIExtension","PDFViewCtrl","form"],["UIExtension","__ui_lib__"]],t):"object"==typeof exports?exports.FormDesigner=t(require("UIExtension"),require("UIExtension").PDFViewCtrl.PDF.actions,require("UIExtension").PDFViewCtrl.PDF.annots,require("UIExtension").PDFViewCtrl.commons,require("UIExtension").PDFViewCtrl.form,require("UIExtension").__ui_lib__):e.FormDesigner=t(e.UIExtension,e.UIExtension.PDFViewCtrl.PDF.actions,e.UIExtension.PDFViewCtrl.PDF.annots,e.UIExtension.PDFViewCtrl.commons,e.UIExtension.PDFViewCtrl.form,e.UIExtension.__ui_lib__)}(self,(e,t,n,i,r,o)=>(()=>{var a={6504:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<contextmenu name="fv--ui-form-designer-widget-contextmenu">\n<form-designer-v2:contextmenu-item-copy-widget></form-designer-v2:contextmenu-item-copy-widget>\n\n<contextmenu-separator></contextmenu-separator>\n\n<form-designer-v2:contextmenu-item-delete-widget></form-designer-v2:contextmenu-item-delete-widget>\n\n<contextmenu-separator></contextmenu-separator>\n\n<form-designer-v2:contextmenu-item-show-properties></form-designer-v2:contextmenu-item-show-properties>\n\n<contextmenu-separator></contextmenu-separator>\n\n<form-designer-v2:contextmenu-item-widget-create-multi-copies></form-designer-v2:contextmenu-item-widget-create-multi-copies>\n<form-designer-v2:contextmenu-item-duplicate-widget></form-designer-v2:contextmenu-item-duplicate-widget>\n<form-designer-v2:contextmenu-item-set-tab-order></form-designer-v2:contextmenu-item-set-tab-order>\n\n<contextmenu-separator></contextmenu-separator>\n\n<contextmenu-item-align-annot></contextmenu-item-align-annot>\n<contextmenu-item-center-annot></contextmenu-item-center-annot>\n<contextmenu-item-distribute-annot></contextmenu-item-distribute-annot>\n<contextmenu-item-size-annot></contextmenu-item-size-annot>\n</contextmenu>'}},9963:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<ribbon-button \nname="fv--form-designer-create-check-box-btn"\nicon-class="fv__icon-toolbar-form-create-check-box"\n@tooltip\ntooltip-title="form-designer:tips.CreateCheckBox"\n@controller="form-designer-v2:CreateCheckBoxFieldController">\nform-designer:tips.CreateCheckBox\n</ribbon-button>'}},8974:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<ribbon-button\nname="fv--form-designer-create-combo-box-btn"\nicon-class="fv__icon-toolbar-form-create-combo-box"\n@tooltip\ntooltip-title="form-designer:tips.CreateComboBox"\n@controller="form-designer-v2:CreateComboBoxFieldController">\nform-designer:tips.CreateComboBox\n</ribbon-button>'}},387:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<ribbon-button\nname="fv--form-designer-create-date-btn"\nicon-class="fv__icon-toolbar-form-create-date"\n@tooltip\ntooltip-title="form-designer:tips.CreateDate"\n@controller="form-designer-v2:CreateDateFieldController">\nform-designer:tips.CreateDate\n</ribbon-button>'}},3728:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<ribbon-button\nname="fv--form-designer-create-image-btn"\nicon-class="fv__icon-toolbar-form-create-image"\n@tooltip\ntooltip-title="form-designer:tips.CreateImage"\n@controller="form-designer-v2:CreateImageFieldController">\nform-designer:tips.CreateImage\n</ribbon-button>'}},2451:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<ribbon-button\nname="fv--form-designer-create-list-box-btn"\nicon-class="fv__icon-toolbar-form-create-list-box"\n@tooltip\ntooltip-title="form-designer:tips.CreateListBox"\n@controller="form-designer-v2:CreateListBoxFieldController">\nform-designer:tips.CreateListBox\n</ribbon-button>'}},5925:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<ribbon-button \nname="fv--form-designer-create-push-button-btn"\nicon-class="fv__icon-toolbar-form-create-push-button"\n@tooltip\ntooltip-title="form-designer:tips.CreatePushButton"\n@controller="form-designer-v2:CreatePushButtonFieldController">\nform-designer:tips.CreatePushButton\n</ribbon-button>'}},4323:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<ribbon-button \nname="fv--form-designer-create-radio-button-btn"\nicon-class="fv__icon-toolbar-form-create-radio-button"\n@tooltip\ntooltip-title="form-designer:tips.CreateRadioButton"\n@controller="form-designer-v2:CreateRadioButtonFieldController">\nform-designer:tips.CreateRadioButton\n</ribbon-button>'}},5410:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<ribbon-button\nname="fv--form-designer-create-sign-btn"\nicon-class="fv__icon-toolbar-form-create-signature"\n@tooltip\ntooltip-title="form-designer:tips.CreateSignature"\n@controller="form-designer-v2:CreateSignatureFieldController">\nform-designer:tips.CreateSignature\n</ribbon-button>'}},9989:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<ribbon-button \nname="fv--form-designer-create-text-btn"\nicon-class="fv__icon-toolbar-form-create-text"\n@tooltip\ntooltip-title="form-designer:tips.CreateText"\n@controller="form-designer-v2:CreateTextFieldController">\nform-designer:tips.CreateText\n</ribbon-button>'}},9194:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<ribbon-button\nname="fv--add-tooltip-btn"\n@controller="form-designer-v2:AddTooltipController"\n@tooltip\ntooltip-title="form-designer:tips.AddTooltip"\nicon-class="fv__icon-toolbar-add-tooltip"\n>form-designer:tips.AddTooltip</ribbon-button>\n'}},5224:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<ribbon-button\n@bem-class.root="fv__ui-calculation-order-button"\nicon-class="fv__icon-toolbar-form-calculation-order"\n@tooltip\ntooltip-title="form-designer:tips.showCO"\ntext="form-designer:tips.showCO"\nname="fv--showCO-btn"\n@on.click="$component.onUserClick()"\n></ribbon-button>\n'}},6955:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<layer\n@bem-class.root="fv__ui-calculation-order-dialog"\nclass="center"\n@isolate\n@var.self="$component"\nname="fv--form-designer-calculation-order-dialog"\n>\n<layer-header\ntitle="form-designer:dialog.calculateOrder.title"\n@draggable="{type: \'parent\'}"\n></layer-header>\n<fieldset @bem-class="fieldset">\n<legend>form-designer:dialog.calculateOrder.subtitle</legend>\n<div @bem-class="body">\n<ul @bem-class="field-list" name="fv--form-designer-calculation-order-fields-list" tabindex="0">\n<li\n@foreach="item in self.fields track by $self"\n@class="{\'fv__ui-active\': self.selectedField === item}"\n@on.click="self.selectField(item)"\n@attr.title="item"\n@aria:attr.selected=""\n>\n@{item}\n</li>\n</ul>\n<div @bem-class="controls">\n<xbutton\nclass="fv__ui-dialog-button"\n@on.click="self.changeFieldCalculationOrder(\'up\')"\n@disable="self.isSelectFirst || self.fields.length === 0"\ntext="form-designer:dialog.options.comboListBox.up"\nname="fv--form-designer-calculation-order-move-field-up"\n></xbutton>\n<xbutton\nclass="fv__ui-dialog-button"\n@on.click="self.changeFieldCalculationOrder(\'down\')"\n@disable="self.isSelectLast || self.fields.length === 0"\ntext="form-designer:dialog.options.comboListBox.down"\nname="fv--form-designer-calculation-order-move-field-down"\n></xbutton>\n</div>\n</div>\n</fieldset>\n<div @bem-class="footer">\n<xbutton\nclass="fv__ui-dialog-button fv__ui-dialog-ok-button"\ntext="dialog.ok"\n@on.click="self.onUserClickOK()"\n@disable="!self.isChanged"\n></xbutton>\n<xbutton\nclass="fv__ui-dialog-button fv__ui-dialog-cancel-button"\ntext="dialog.cancel"\n@on.click="self.onUserClickCancel()"\n></xbutton>\n</div>\n</layer>\n'}},4595:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<layer @bem-class.root="fv__ui-create-multiple-copies-dialog" class="center" modal="true" @isolate @var.self="$component">\n<layer-header @draggable="{type:\'parent\'}" title="form-designer:dialog.multipleCopyTitle" ></layer-header>\n<div @bem-class="body">\n<fieldset @bem-class="body-fieldset">\n<legend @bem-class="body-catalog">form-designer:dialog.multipleCopy.number</legend>\n<div @bem-class="body-content-wrap">\n<form-group @bem-class="body-widget" label="form-designer:dialog.multipleCopy.column">\n\x3c!-- 纵向复制即行数 --\x3e\n<pdf-unit-number-input @model="self.copyNumber.row" @on.change="self.updateRect(\'row\', $args[0])"></pdf-unit-number-input>\n</form-group>\n<form-group @bem-class="body-widget" label="form-designer:dialog.multipleCopy.row">\n\x3c!-- 横向复制即列数 --\x3e\n<pdf-unit-number-input @model="self.copyNumber.column" @on.change="self.updateRect(\'column\', $args[0])"></pdf-unit-number-input>\n</form-group>\n</div>\n</fieldset>\n\n<fieldset @bem-class="body-fieldset">\n<legend @bem-class="body-catalog">form-designer:dialog.multipleCopy.size</legend>\n<div @bem-class="body-content-wrap">\n<form-group @bem-class="body-widget" label="form-designer:dialog.multipleCopy.width">\n<pdf-unit-number-input @model="self.overallSize.width" @on.change="self.updateRect(\'width\', $args[0])"></pdf-unit-number-input>\n</form-group>\n<form-group @bem-class="body-widget" label="form-designer:dialog.multipleCopy.height">\n<pdf-unit-number-input @model="self.overallSize.height" @on.change="self.updateRect(\'height\', $args[0])"></pdf-unit-number-input>\n</form-group>\n</div>\n</fieldset>\n\n<fieldset @bem-class="body-fieldset">\n<legend @bem-class="body-position-catalog">form-designer:dialog.multipleCopy.position</legend>\n<div @bem-class="body-position-content-wrap" @aria:role="application" @aria:labelledby="::previousSiblings()">\n<xbutton class="left fv__ui-dialog-button" text="form-designer:dialog.multipleCopy.left" @on.click="self.move(\'Left\')"></xbutton>\n<xbutton class="up fv__ui-dialog-button" text="form-designer:dialog.multipleCopy.up" @on.click="self.move(\'Up\')"></xbutton>\n<xbutton class="right fv__ui-dialog-button" text="form-designer:dialog.multipleCopy.right" @on.click="self.move(\'Right\')"></xbutton>\n<xbutton class="down fv__ui-dialog-button" text="form-designer:dialog.multipleCopy.down" @on.click="self.move(\'Down\')"></xbutton>\n</div>\n</fieldset>\n</div>\n<div @bem-class="footer">\n<div @bem-class="footer-left">\n<label>\n<checkbox text="form-designer:dialog.footer.preview" @model="self.isPreview" @on.change="self.isPreviewVisisble()"></checkbox>\n</label>\n<label class="fv__hidden">\n<checkbox text="form-designer:dialog.footer.sameName" name="sameName"/>></checkbox>\n</label>\n</div>\n<div @bem-class="footer-right">\n<xbutton class="fv__ui-dialog-button fv__ui-dialog-ok-button" @on.click="self.confirm()">dialog.ok</xbutton>\n<xbutton class="fv__ui-dialog-button fv__ui-dialog-cancel-button" @on.click="self.hide()">dialog.cancel</xbutton>\n</div>\n</div>\n</layer>\n'}},477:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<layer\n@bem-class.root="fv__ui-duplicate-dialog"\nclass="center"\nmodal="true"\n@isolate\n@var.self="$component"\n>\n<layer-header\ntitle="form-designer:dialog.duplicateTitle"\n@draggable="{type: \'parent\'}"\n></layer-header>\n<fieldset @bem-class="body" @aria:role="radiogroup" @aria:labelledby="::childAt(0)">\n<legend>form-designer:dialog.duplicate.question</legend>\n<div @bem-class="body-options">\n<label @bem-class="body-options-label">\n<input type="radio" name="duplicateType" value="all" @bem-class="body-options-label-choice" @on.change="self.changeType(\'all\')" @prop.checked="self.type === \'all\'" @aria:labelledby="::nextSiblings()"/>\n<span data-i18n="form-designer:dialog.duplicate.all"></span>\n</label>\n<label @bem-class="body-options-label">\n<input type="radio" name="duplicateType" value="odd" @bem-class="body-options-label-choice" @on.change="self.changeType(\'odd\')" @prop.checked="self.type === \'odd\'" @aria:labelledby="::nextSiblings()"/>\n<span data-i18n="form-designer:dialog.duplicate.odd"></span>\n</label>\n<label @bem-class="body-options-label">\n<input type="radio" name="duplicateType" value="even" @bem-class="body-options-label-choice" @on.change="self.changeType(\'even\')" @prop.checked="self.type === \'even\'" @aria:labelledby="::nextSiblings()"/>\n<span data-i18n="form-designer:dialog.duplicate.even"></span>\n</label>\n<div @bem-class="body-options-label">\n<input type="radio" name="duplicateType" value="range" @bem-class="body-options-label-choice" @on.change="self.changeType(\'range\')" @prop.checked="self.type === \'range\'" @aria:labelledby="::nextSiblings()"/>\n<span data-i18n="dialog.printDialog.from"></span>\n<pdf-unit-number-input @bem-class="body-options-label-range" @class="{\'error\': self.startPage.isError}" name="numberInput" @model="self.startPage.unit" @on.change="self.changePageNumber(\'startPage\', $args[0])"></pdf-unit-number-input>\n<span data-i18n="dialog.printDialog.to"></span>\n<pdf-unit-number-input @bem-class="body-options-label-range" @class="{\'error\': self.endPage.isError}" name="numberInput" @model="self.endPage.unit" @on.change="self.changePageNumber(\'endPage\', $args[0])"></pdf-unit-number-input>\n<span>/</span>\n<span @bem-class="body-options-label-range-count">@{self.rangeCount}</span>\n</div>\n<div @bem-class="body-options-msg" @class="{\'fv__ui-hide\': !self.errorMsg}">@{self.errorMsg}</div>\n</div>\n</fieldset>\n<div @bem-class="footer">\n<xbutton\nclass="fv__ui-dialog-button fv__ui-dialog-ok-button"\ntext="dialog.ok"\n@on.click="self.confirm()"\n></xbutton>\n<xbutton\nclass="fv__ui-dialog-button fv__ui-dialog-cancel-button"\ntext="dialog.cancel"\n@on.click="self.hide()"\n></xbutton>\n</div>\n</layer>'}},9898:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<dropdown\nseparate="false"\nselectable="false"\nalign="out-right"\nvalign="top"\ntext="contextmenu.fieldPanel.addNewField.title"\nclass="fv--ui-form-field-sidebar-create-field-contextmenu"\n>\n<xbutton\nname="fv--contextmenu-item-create-push-button"\nicon-class="fv__push-button"\n@controller="form-designer-v2:CreatePushButtonFieldController"\n>contextmenu.fieldPanel.addNewField.pushButton</xbutton\n>\n<xbutton\nname="fv--contextmenu-item-create-check-box"\nicon-class="fv__check-box"\n@controller="form-designer-v2:CreateCheckBoxFieldController"\n>contextmenu.fieldPanel.addNewField.checkBox</xbutton\n>\n<xbutton\nname="fv--contextmenu-item-create-radio-button"\nicon-class="fv__radio-button"\n@controller="form-designer-v2:CreateRadioButtonFieldController"\n>contextmenu.fieldPanel.addNewField.radioButton</xbutton\n>\n<xbutton\nname="fv--contextmenu-item-create-combo-box"\nicon-class="fv__combo-box"\n@controller="form-designer-v2:CreateComboBoxFieldController"\n>contextmenu.fieldPanel.addNewField.comboButton</xbutton\n>\n<xbutton\nname="fv--contextmenu-item-create-list-box"\nicon-class="fv__list-box"\n@controller="form-designer-v2:CreateListBoxFieldController"\n>contextmenu.fieldPanel.addNewField.listButton</xbutton\n>\n<xbutton\nname="fv--contextmenu-item-create-text"\nicon-class="fv__text"\n@controller="form-designer-v2:CreateTextFieldController"\n>contextmenu.fieldPanel.addNewField.textField</xbutton\n>\n<xbutton\nname="fv--contextmenu-item-create-sign"\nicon-class="fv__sign"\n@controller="form-designer-v2:CreateSignatureFieldController"\n>contextmenu.fieldPanel.addNewField.signatureField</xbutton\n>\n<xbutton\nname="fv--contextmenu-item-create-image"\nicon-class="fv__image"\n@controller="form-designer-v2:CreateImageFieldController"\n>contextmenu.fieldPanel.addNewField.imageField</xbutton\n>\n<xbutton\nname="fv--contextmenu-item-create-date"\nicon-class="fv__date"\n@controller="form-designer-v2:CreateDateFieldController"\n>contextmenu.fieldPanel.addNewField.dateField</xbutton\n>\n</dropdown>\n'}},2491:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<contextmenu name="fv--form-field-tree-node-contextmenu" @var.self="$component">\n<form-designer-v2:contextmenu-item-show-properties></form-designer-v2:contextmenu-item-show-properties>\n\n<form-designer-v2:rename-field-contextmenu-item></form-designer-v2:rename-field-contextmenu-item>\n\n<form-designer-v2:create-field-contextmenu @on.native.pointerup="self.onUserClickCreateFieldButton($event)"></form-designer-v2:create-field-contextmenu>\n\n<form-designer-v2:contextmenu-item-delete-widget></form-designer-v2:contextmenu-item-delete-widget>\n<form-designer-v2:contextmenu-item-widget-create-multi-copies></form-designer-v2:contextmenu-item-widget-create-multi-copies>\n<form-designer-v2:contextmenu-item-set-tab-order></form-designer-v2:contextmenu-item-set-tab-order>\n<form-designer-v2:contextmenu-item-duplicate-widget></form-designer-v2:contextmenu-item-duplicate-widget>\n</contextmenu>'}},8141:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<contextmenu-item\n@bem-class.root="fv__ui-rename-field-contextmenu-item"\ntext="contextmenu.fieldPanel.rename"\n@controller="form-designer-v2:EditFormFieldNodeTitleController"\n></contextmenu-item>\n'}},3167:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<dropdown\n@bem-class.root="fv__ui-field-display-order-type-dropdown"\nclass="fv__ui-dropdown-icon-only"\n@tooltip\ntooltip-title="sidebar.field.display-order"\n@aria:title\nicon-class="fv__ui-icon-orderaz"\nseparate="false"\nchangeIconCls="false"\nname="fv--field-display-order-type-dropdown"\n@var.self="$component"\n>\n<xbutton\n@setter.iconCls="self.displayType === \'alphabetic\' ? \'fv__icon-tick\' : \'fv__icon-none\'"\nname="fv--field-display-alphabetic-order"\n@on.click="self.setDisplayOrderType(\'alphabetic\')"\ntext="sidebar.field.order.alphabetic"\n></xbutton>\n<xbutton\n@setter.iconCls="self.displayType === \'tab\' ? \'fv__icon-tick\' : \'fv__icon-none\'"\nname="fv--field-display-tab-order"\n@on.click="self.setDisplayOrderType(\'tab\')"\ntext="sidebar.field.order.tab"\n></xbutton>\n</dropdown>\n'}},7155:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<dropdown\n@bem-class.root="fv__ui-field-tab-order-type-dropdown"\n@tooltip\ntooltip-title="sidebar.field.set-order"\n@aria:title\nclass="fv__ui-dropdown-icon-only"\nicon-class="fv__ui-icon-tab-order-type"\nchangeIconCls="false"\nseparate="false"\nname="fv--field-tab-order-type-dropdown"\n@var.self="$component"\n>\n<xbutton\n@setter.iconCls="self.tabOrderType === \'row\' ? \'fv__icon-tick\' : \'fv__icon-none\'"\n@on.click="self.setTabOrderType(\'row\')"\nname="fv--field-tab-order-type-option-row"\ntext="sidebar.field.order.row"\n></xbutton>\n<xbutton\n@setter.iconCls="self.tabOrderType === \'column\' ? \'fv__icon-tick\' : \'fv__icon-none\'"\n@on.click="self.setTabOrderType(\'column\')"\nname="fv--field-tab-order-type-option-column"\ntext="sidebar.field.order.column"\n></xbutton>\n<xbutton\n@setter.iconCls="self.tabOrderType === \'structure\' ? \'fv__icon-tick\' : \'fv__icon-none\'"\n@on.click="self.setTabOrderType(\'structure\')"\nname="fv--field-tab-order-type-option-structure"\ntext="sidebar.field.order.structure"\n></xbutton>\n<xbutton\n@setter.iconCls="self.isOrderNumberVisible ? \'fv__icon-tick\' : \'fv__icon-none\'"\n@on.click="self.toggleOrderNumberVisibility()"\nname="fv--field-toggle-order-number-visibility"\ntext="sidebar.field.order.numbers"\n></xbutton>\n</dropdown>\n'}},3300:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};var t="";return t+='<sidebar-panel\nname="sidebar-field"\n@bem-class.root="fv__ui-form-field-sidebar-panel"\n@tooltip\ntooltip-placement="right"\ntooltip-title="sidebar.field.tooltip"\ntitle="sidebar.field.title"\nicon-class="fv__icon-sidebar-field"\n',t+='\n@lazy-content="active"\n',t+='\n@var.sidebar="$component"\n@isolate\n>\n<form-designer-v2:form-field-tree\n@setter.displayType="sidebar.displayOrderType"\n></form-designer-v2:form-field-tree>\n<form-designer-v2:load-all-fields-button></form-designer-v2:load-all-fields-button>\n\n<slot for="header">\n<div @bem-class="toolbar" class="444">\n<form-designer-v2:field-tab-order-type-dropdown></form-designer-v2:field-tab-order-type-dropdown>\n<form-designer-v2:field-display-order-type-dropdown></form-designer-v2:field-display-order-type-dropdown>\n</div>\n</slot>\n</sidebar-panel>\n'}},1554:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<xbutton\nclass="fv__ui-load-all-fields-button"\n@on.click="$component.onClick()"\ntext="sidebar.field.loadall"\n></xbutton>\n'}},5549:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div\n@bem-class.root="fv__ui-form-field-tree"\n@var.form_tree="$component"\n>\n<tree\n@init="form_tree.tree=$component"\ndraggable="false"\neditable="false"\nselectable="true"\ncheckable="false"\nlazy-mode="passive"\n@on.select="form_tree.onUserSelectTreeNode($args[0])"\n@on.click-node="form_tree.onUserClickTreeNode($args[0])"\n@on.aria-select="form_tree.onUserClickTreeNode($args[0])"\n@on.expand="$args[0].isExpand && form_tree.onExpandTreeNode($args[0].targetNodeId)"\n@on.confirm-edit="form_tree.onUserConfirmEditTreeNode($args[0])"\n@contextmenu="fv--form-field-tree-node-contextmenu"\ncontextmenu@on-shown="form_tree.onContextMenuShown($target, $contextmenu)"\ncontextmenu@before="form_tree.beforeShowNodeContextMenu($event, $target)"\ncontextmenu@options="{uixSelector: \'@tree-node\'}"\n></tree>\n</div>\n'}},8185:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<checkbox\n@bem-class.root="fv__ui-highlight-fields-checkbox"\ntext="form-designer:tips.HighlightFields"\ntooltip-title="form-designer:tips.HighlightFields" text="form-designer:tips.HighlightFields"\n@on.change="$component.onUserChangeHighlightFields($args[0])"\n></checkbox>\n'}},3272:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<checkbox\n@bem-class.root="fv__ui-keep-tool-selected-checkbox"\n@on.change="$component.onUserCheck($args[0])"\ntext="form-designer:tips.KeepToolSelected"\n@tooltip\ntooltip-title="form-designer:tips.KeepToolSelected"\n></checkbox>\n'}},1864:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<checkbox\nclass="fv__ui-checked-by-default-checkbox"\ntext="form-designer:dialog.options.choice.checkedByDefault"\n@on.change="$component.onUserChange($args[0])"\n></checkbox>\n'}},7909:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<input\nclass="fv__ui-widget-properties-export-value-editor fv__ui-input-primary"\n@on.change="$component.onUserChangeExportValue($args[0])"\n></input>\n'}},1914:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<dropdown-select\nclass="fv__ui-normal-caption-selector"\n@on.change="$component.onUserSelectNormalCaption($args[0])"\n></dropdown-select>\n'}},8753:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<checkbox\nclass="fv__ui-combo-box-edit-checkbox"\ntext="form-designer:dialog.options.comboListBox.allowUserEnter"\n@on.change="$component.userUpdateComboEdit($args[0])"\n></checkbox>\n'}},4014:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<xbutton\nclass="fv__ui-combo-list-box-add-item-button fv__ui-dialog-button fv__ui-form-designer-dialog-button"\ntext="form-designer:dialog.options.comboListBox.add"\n@on.click="$component.onUserAddNewItem()"\n></xbutton>\n'}},1261:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<xbutton\nclass="fv__ui-combo-list-box-delete-item-button fv__ui-dialog-button fv__ui-form-designer-dialog-button"\ntext="form-designer:dialog.options.comboListBox.delete"\n@on.click="$component.onUserClickButton()"\n></xbutton>\n'}},5813:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<input\nclass="fv__ui-combo-list-box-export-value-editor fv__ui-input-primary"\n@on.change="$component.onUserChangeExportValue($args[0])"\n></input>\n'}},8013:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<input\nclass="fv__ui-combo-list-box-item-editor fv__ui-input-primary"\n@on.input="$component.onUserChangeItemValue($args[0])"\n></input>\n'}},9458:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<select-list\nclass="fv__ui-combo-list-box-item-list-selector"\n@var.list="$component"\n@on.change="list.onUserSelectItem($args[0])"\nlimit="1"\n>\n<sel-option @foreach="item in list.items" @setter.value="item.value">@{item.label}</sel-option>\n</select-list>\n'}},5975:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<xbutton\nclass="fv__ui-combo-list-box-move-item-down-button fv__ui-dialog-button fv__ui-form-designer-dialog-button"\ntext="form-designer:dialog.options.comboListBox.down"\n@on.click="$component.onUserClickButton()"\n></xbutton>\n'}},9381:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<xbutton\nclass="fv__ui-combo-list-box-move-item-up-button fv__ui-dialog-button fv__ui-form-designer-dialog-button"\ntext="form-designer:dialog.options.comboListBox.up"\n@on.click="$component.onUserClickButton()"\n></xbutton>\n'}},9781:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<layer\nclass="center fv__ui-form-designer-icon-fit-dialog"\n@aria:describedby="fv--form-designer-pushbutton-advance-tip"\n@var.dialog="$component"\n>\n<layer-header\n@draggable="{type:\'parent\'}"\ntitle="form-designer:dialog.options.pushButton.advancedDialog.title"\n></layer-header>\n\n<form\nonsubmit="return false"\nclass="fv__ui-form-designer-icon-fit-dialog-body"\n>\n<form-group\nlabel="form-designer:dialog.options.pushButton.advancedDialog.labelScaleType"\n>\n<dropdown-select\nname="fv--form-designer-icon-fit-scale-way-type"\n@setter.options="dialog.scaleWayTypeOptions"\n@model="dialog.scaleWayType"\n></dropdown-select>\n</form-group>\n<form-group\nlabel="form-designer:dialog.options.pushButton.advancedDialog.labelScale"\n>\n<dropdown-select\nname="fv--form-designer-icon-fit-proportionally-scaling-type"\n@setter.options="dialog.proportionallyScalingOptions"\n@model="dialog.isProportionalScaling"\n></dropdown-select>\n</form-group>\n<checkbox\nname="fv--form-designer-icon-fit-fit-bounds"\n@model="dialog.fitBounds"\ntext="form-designer:dialog.options.pushButton.advancedDialog.checkFit"\n@disable="!dialog.isProportionalScaling"\n></checkbox>\n<div class="fv__ui-form-designer-icon-fit-fraction-container">\n<form-designer-v2:icon-fit-fraction\n@model="dialog.fraction"\n@disable="!dialog.isProportionalScaling"\n></form-designer-v2:icon-fit-fraction>\n</div>\n</form>\n<div\nclass="fv__ui-form-designer-icon-fit-dialog-tip"\nname="fv--form-designer-pushbutton-advance-tip"\ndata-i18n="form-designer:dialog.options.pushButton.advancedDialog.tip"\n></div>\n<div class="fv__ui-form-designer-icon-fit-dialog-footer">\n<xbutton\n@on.click="dialog.reset()"\nclass="fv__ui-dialog-button fv__ui-dialog-cancel-button"\n>form-designer:dialog.options.pushButton.advancedDialog.buttonReset</xbutton\n>\n<xbutton\n@on.click="dialog.onClickOK()"\nclass="fv__ui-dialog-button fv__ui-dialog-ok-button"\n>form-designer:dialog.options.pushButton.advancedDialog.buttonOk</xbutton\n>\n<xbutton\n@on.click="dialog.onClickCancel()"\nclass="fv__ui-dialog-button fv__ui-dialog-cancel-button"\n>form-designer:dialog.options.pushButton.advancedDialog.buttonCancel</xbutton\n>\n</div>\n</layer>\n'}},670:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div\nclass="fv__ui-form-designer-icon-fit-fraction"\n@var.self="$component"\n>\n<div\nclass="fv__ui-form-designer-icon-fit-label"\ndata-i18n="form-designer:dialog.options.pushButton.advancedDialog.labelButton"\n></div>\n<div class="fv__ui-form-designer-icon-fit-controls">\n<div class="fv__ui-form-designer-icon-fit-previewer">\n<div\nclass="fv__ui-form-designer-icon-fit-previewer-icon"\n@attr.style="[\'left:\',self.positionX, \'px;top:\', self.positionY, \'px;\'].join(\'\')"\n></div>\n</div>\n<input\ntype="range"\nmin="0"\nmax="100"\nstep="1"\nclass="fv__ui-form-designer-icon-fit-slider-y"\n@model="self.value.y|number(0)"\n@on.change="self.onUserChanged(\'y\', $args[0], $args[1])"\n@aria:label="aria:labels.form.push-button.icon-position.y"\n/>\n<input\ntype="range"\nmin="0"\nmax="100"\nstep="1"\nclass="fv__ui-form-designer-icon-fit-slider-x"\n@model="self.value.x|number(0)"\n@on.change="self.onUserChanged(\'x\', $args[0], $args[1])"\n@aria:label="aria:labels.form.push-button.icon-position.x"\n/>\n<div class="fv__ui-form-designer-icon-fit-fraction-number">\n(@{self.value.x + \',\' + self.value.y})\n</div>\n</div>\n</div>\n'}},2073:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<checkbox\nclass="fv__ui-list-box-multille-selection-checkbox"\ntext="form-designer:dialog.options.comboListBox.multipleSelection"\n@on.change="$component.onUserChange($args[0])"\n></checkbox>\n'}},4106:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<checkbox\n@bem-class.root="fv__ui-lock-widget-checkbox"\ntext="form-designer:dialog.footer.locked"\n@on.change="$component.onChange($args[0])"\n></checkbox>\n'}},3431:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<select-list\nclass="fv__ui-push-button-icon-caption-position-selector"\nlimit="1"\n@var.self="$component"\n@on.change="$component.onUserSelected($args[0])"\n@model="self.selectedPositions"\n>\n<sel-option\n@foreach="item in self.options track by id"\n@setter.value="item.id"\n>@{item.text}</sel-option\n>\n</select-list>\n'}},3157:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<dropdown-select\n@on.change="$component.onUserChangeBehavior($args[0])"\n></dropdown-select>\n'}},6390:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<input class="fv__ui-push-button-caption-editor fv__ui-input-primary" type="text" autocomplete="new-password" @on.change="$component.onUserChangeCaption($args[0])">'}},1678:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div class="fv__ui-push-button-icon-editor" @var.editor="$component" >\n<div class="fv__ui-push-button-icon-editor-previewer-wrapper">\n<img class="fv__ui-push-button-icon-editor-previewer" @imagesrc="editor.selectedImageURL|default(editor.blankImageSrc)" @aria:alt="aria:labels.form.push-button.icon-previewer"></img>\n</div>\n<div class="fv__ui-push-button-icon-editor-controls">\n<file-selector \nclass="fv__ui-form-designer-dialog-button"\naccept=".jpeg,.jpg,.png,.gif,.bmp"\ntext="form-designer:dialog.options.pushButton.chooseIcon"\n@disable="editor.disableSelectButton"\n@on.change="editor.onUserSelectImage($args[0])"\n></file-selector>\n<xbutton\nclass="fv__ui-form-designer-dialog-button fv__ui-dialog-button"\ntext="form-designer:dialog.options.pushButton.clear"\n@disable="editor.disableClearButton"\n@on.click="editor.onUserClickClearButton()"\n></xbutton>\n</div>\n</div>'}},8204:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<dropdown-select\n@on.change="$component.onUserChangedLayout($args[0])"\n></dropdown-select>\n'}},1896:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<xbutton\nclass="fv__ui-form-designer-dialog-button fv__ui-form-designer-show-icon-fit-dialog-button"\ntext="form-designer:dialog.options.pushButton.advanced"\n@on.click="$component.onClick()"\n></xbutton>\n'}},1808:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<checkbox\nclass="fv__ui-radio-button-unison-checkbox"\ntext="form-designer:dialog.options.choice.radioSameNameValueUnison"\n@on.change="$component.onUserChange($args[0])"\n></checkbox>\n'}},202:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<dropdown-select\n@on.change="$component.onUserChangeAlignment($args[0])"\n></dropdown-select>'}},787:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<checkbox\nclass="fv__ui-text-field-check-spelling"\ntext="form-designer:dialog.options.textField.checkSpelling"\n@on.change="$component.onUserChange($args[0])"\n@form-designer-v2:form-property="$component.property"\n></checkbox>\n'}},825:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div class="fv__ui-text-field-combo-of-editor" @var.editor="$component">\n<checkbox\ntext="form-designer:dialog.options.textField.combOf"\n@model="editor.isTextCombo"\n@disable="!editor.available"\n@on.change="editor.onUserChangeTextComb($args[0])"\n></checkbox>\n<label @disable.late="!editor.isTextCombo">\n<number\n@model="editor.maxLength"\nmin="1"\nstep="1"\n@on.change="editor.onUserChangeMaxLength($args[0])"\nclass="fv__ui-input-primary"\n></number>\n<span\ndata-i18n="form-designer:dialog.options.textField.characters"\n></span>\n</label>\n</div>\n'}},6378:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<textarea\nclass="fv__ui-text-field-default-value-editor fv__ui-textarea-primary"\n@on.change="$component.userChangedDefaultValue($args[0])"\n@form-designer-v2:form-property="$component.property"\n></textarea>'}},3885:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div\nclass="fv__ui-text-field-max-length-editor"\n@var.editor="$component"\n@form-designer-v2:form-property="$component.property"\n>\n<checkbox\ntext="form-designer:dialog.options.textField.limitOf"\n@model="editor.isTextLengthLimited"\n@disable="!editor.available"\n@on.change="editor.onUserChangeIsTextLengthLimited($args[0])"\n></checkbox>\n<label @disable.late="!editor.isTextLengthLimited">\n<number\n@model="editor.maxLength"\nmin="1"\nstep="1"\n@on.change="editor.onUserChangeMaxLength($args[0])"\nclass="fv__ui-input-primary"\n></number>\n<span\ndata-i18n="form-designer:dialog.options.textField.characters"\n></span>\n</label>\n</div>\n'}},2601:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<checkbox\nclass="fv__ui-text-field-multiline-checkbox"\ntext="form-designer:dialog.options.textField.multiLine"\n@form-designer-v2:form-property="$component.property"\n@on.change="$component.onUserChangeTextMultiline($args[0])"\n></checkbox>\n'}},524:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<checkbox\nclass="fv__ui-text-field-password-checkbox"\ntext="form-designer:dialog.options.textField.password"\n@form-designer-v2:form-property="$component.property"\n@on.change="$component.onUserChange($args[0])"\n></checkbox>\n'}},5715:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<checkbox\ntext="form-designer:dialog.options.textField.scrollLongText"\n@on.change="$component.onUserChangeScrollLongText($args[0])"\n@form-designer-v2:form-property="$component.property"\n></checkbox>'}},5060:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<scenario-option-group\ngroup="validate-options"\n@var.editor="$component"\nclass="fv__ui-calculate-action-editor-panel"\n@on.change="$component.onUserChangeCalculationType($args[0])"\n@model="$component.calculationType"\n>\n<scenario-option\ntext="form-designer:dialog.calculate.valueIsNotCalculated"\n@on.select="editor.onUserSelectNotCalculated()"\n>\n</scenario-option>\n<scenario-option text="">\n<slot for="label">\n<div class="fv__ui-calculate-action-editor-label">\n<span\ndata-i18n="form-designer:dialog.calculate.valueIsThe"\n></span>\n<dropdown-select\n@setter.options="editor.calculateRelationTypes"\n@model="editor.calculateRelationType"\nclass="fv__ui-calculate-action-editor-releation-type-select fv__ui-dropdown-select-inline"\n@on.change="editor.onUserSelectCalculateRelationType($args[0])"\n></dropdown-select>\n<span\ndata-i18n="form-designer:dialog.calculate.ofTheFollowFields"\n></span>\n</div>\n</slot>\n<div class="fv__ui-calculate-action-editor-relate-to-fields-container">\n<div class="fv__ui-form-designer-script-previewer">\n@{editor.selectedRelateFields.join(\', \')}\n</div>\n<xbutton\nclass="fv__ui-dialog-button fv__ui-form-designer-dialog-button"\ntext="form-designer:dialog.calculate.pick"\n@on.click="editor.onUserClickPickFieldsButton()"\n></xbutton>\n</div>\n</scenario-option>\n<scenario-option\ntext="form-designer:dialog.calculate.simplifiedFieldNotation"\n>\n<div class="fv__ui-calculate-action-editor-notation-container">\n<div class="fv__ui-form-designer-script-previewer">\n@{editor.notationScript}\n</div>\n<xbutton\nclass="fv__ui-dialog-button fv__ui-form-designer-dialog-button"\ntext="form-designer:dialog.calculate.edit"\n@on.click="editor.onUserClickEditNotationScriptButton()"\n></xbutton>\n</div>\n</scenario-option>\n<scenario-option\ntext="form-designer:dialog.calculate.customCalculateScript"\n>\n<div class="fv__ui-calculate-action-editor-custom-script-container">\n<div class="fv__ui-form-designer-script-previewer">\n@{editor.customScript}\n</div>\n<xbutton\nclass="fv__ui-dialog-button fv__ui-form-designer-dialog-button"\ntext="form-designer:dialog.calculate.edit"\n@on.click="editor.onUserClickEditCustomScriptButton()"\n></xbutton>\n</div>\n</scenario-option>\n</scenario-option-group>\n'}},6972:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<scenario-option-group\ngroup="listbox-selection-change-action-option"\n@var.editor="$component"\nclass="fv__ui-listbox-selection-change-action-editor-panel"\n@on.change="$component.onUserChangeSelectionChangeActionType($args[0])"\n@model="$component.selectionChangeActionType"\n@disable="!$component.currentfield"\n>\n<scenario-option\ntext="form-designer:dialog.selection.noSelection"\nvalue="none"\n></scenario-option>\n<scenario-option text="form-designer:dialog.selection.selectAction" value="custom">\n<div class="fv__ui-listbox-selection-change-action-custom-script-editor">\n<div class="fv__ui-form-designer-script-previewer">\n@{editor.customScript}\n</div>\n<xbutton\nclass="fv__ui-dialog-button fv__ui-form-designer-dialog-button"\ntext="form-designer:dialog.selection.edit"\n@on.click="editor.onUserClickEditCustomScriptButton()"\n></xbutton>\n</div>\n</scenario-option>\n</scenario-option-group>\n'}},9764:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<scenario-option-group\ngroup="signature-action-option"\n@var.editor="$component"\nclass="fv__ui-signature-action-editor-panel"\n@on.change="$component.onUserChangeSignActionType($args[0])"\n@model="$component.signatureActionType"\n>\n<scenario-option\ntext="form-designer:dialog.signed.nothing"\nvalue="none"\n></scenario-option>\n<scenario-option text="" value="MDP">\n<slot for="label">\n<span data-i18n="form-designer:dialog.signed.mark"></span>\n<dropdown-select\n@setter.options="editor.mdpActionTypes"\n@model="editor.mdpActionType"\n@on.change="editor.onUserChangeMDPActionType($args[0])"\nclass="fv__ui-signed-action-editor-readonly-fields-select fv__ui-dropdown-select-inline"\n></dropdown-select>\n</slot>\n<div class="fv__ui-signed-action-editor-mark-readonly-fields">\n<input type="text" readonly @model="editor.selectedFields"/>\n<xbutton\nclass="fv__ui-dialog-button fv__ui-form-designer-dialog-button"\ntext="form-designer:dialog.signed.pick"\n@on.click="editor.onUserClickPickFieldButton()"\n@lock="editor.mdpActionType === \'all\'"\n></xbutton>\n</div>\n</scenario-option>\n<scenario-option text="form-designer:dialog.signed.custom" value="custom">\n<div class="fv__ui-validation-action-custom-script-editor">\n<div class="fv__ui-form-designer-script-previewer">\n@{editor.customScript}\n</div>\n<xbutton\nclass="fv__ui-dialog-button fv__ui-form-designer-dialog-button"\ntext="form-designer:dialog.signed.edit"\n@on.click="editor.onUserClickEditCustomScriptButton()"\n></xbutton>\n</div>\n</scenario-option>\n</scenario-option-group>\n'}},9479:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<scenario-option-group\ngroup="validate-options"\n@var.editor="$component"\nclass="fv__ui-validation-editor-panel"\n@on.change="$component.onUserChangeValidationType($args[0])"\n@model="$component.validationType"\n>\n<scenario-option\ntext="form-designer:dialog.validate.fieldValueIsNotValidated"\nvalue="none"\n></scenario-option>\n<scenario-option\ntext="form-designer:dialog.validate.fieldValueIsInRange"\nvalue="range"\n@disable="editor.disableRangeOption"\n>\n<div class="fv__ui-validation-action-inrange-editor">\n<form-group label="form-designer:dialog.validate.from">\n<number\nallow-empty\n@model="editor.inRangeFrom"\nstep="0"\n@on.change="editor.onUserChangeRange($args[0], editor.inRangeTo, $args[1], editor.inRangeTo)"\nclass="fv__ui-input-primary"\n></number>\n</form-group>\n<form-group label="form-designer:dialog.validate.to">\n<number\nallow-empty\n@model="editor.inRangeTo"\nstep="0"\n@on.change="editor.onUserChangeRange(editor.inRangeFrom, $args[0], editor.inRangeFrom, $args[1])"\nclass="fv__ui-input-primary"\n></number>\n</form-group>\n</div>\n</scenario-option>\n<scenario-option\ntext="form-designer:dialog.validate.runCustomValidationScript"\nvalue="custom"\n>\n<div class="fv__ui-validation-action-custom-script-editor">\n<div class="fv__ui-form-designer-script-previewer">\n@{editor.customScript}\n</div>\n<xbutton\nclass="fv__ui-dialog-button fv__ui-form-designer-dialog-button"\ntext="form-designer:dialog.validate.edit"\n@on.click="editor.onUserClickEditCustomScriptButton()"\n></xbutton>\n</div>\n</scenario-option>\n</scenario-option-group>\n'}},8006:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div class="fv__ui-widget-action-creator" @var.creator="$component">\n<div class="fv__ui-layout-row">\n<div class="fv__ui-layout-col-8">\n<form-group label="editActions.trigger">\n<dropdown-select\n@setter.options="creator.triggersList"\n@model="creator.actionTrigger"\n></dropdown-select>\n</form-group>\n</div>\n<div class="fv__ui-layout-col-2"></div>\n</div>\n<div class="fv__ui-layout-row">\n<div class="fv__ui-layout-col-8">\n<form-group label="editActions.action">\n<dropdown-select\n@setter.options="creator.actionTypesList"\n@model="creator.actionType"\n></dropdown-select>\n</form-group>\n</div>\n<div class="fv__ui-layout-col-2">\n<xbutton\nclass="fv__ui-dialog-button fv__ui-form-designer-dialog-button fv__ui-widget-action-creator-add-action-button"\ntext="ui_:stamp.dialog.add"\n@on.click="creator.showCreateActionDialog(creator.actionTrigger, creator.actionType)"\n></xbutton>\n</div>\n</div>\n</div>\n'}},1133:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div class="fv__ui-widget-action-tree" @var.action_tree="$component">\n<div class="fv__ui-widget-action-tree-container">\n<tree\ndraggable="false"\neditable="false"\nselectable="true"\ncheckable="false"\nlazy-mode="none"\n@setter.data="action_tree.actionsTreeData"\n@on.select="action_tree.onUserSelectTreeNode($args[0])"\n></tree>\n</div>\n<div class="fv__ui-widget-action-tree-controls">\n<xbutton\nclass="fv__ui-dialog-button fv__ui-form-designer-dialog-button"\ntext="editActions.buttonUP"\n@disable="!action_tree.isActionSelected || !action_tree.isActionCanMoveUp"\n@on.click="action_tree.onUserMoveActionUp()"\n></xbutton>\n<xbutton\nclass="fv__ui-dialog-button fv__ui-form-designer-dialog-button"\ntext="editActions.buttonDown"\n@disable="!action_tree.isActionSelected || !action_tree.isActionCanMoveDown"\n@on.click="action_tree.onUserMoveActionDown()"\n></xbutton>\n<xbutton\nclass="fv__ui-dialog-button fv__ui-form-designer-dialog-button"\ntext="ui_:toolbar.tabs.edit.title"\n@disable="!action_tree.isActionSelected"\n@on.click="action_tree.onUserEditAction()"\n></xbutton>\n<xbutton\nclass="fv__ui-dialog-button fv__ui-form-designer-dialog-button"\ntext="ui_:stamp.dialog.delete"\n@disable="!action_tree.isActionSelected && !action_tree.isTriggerSelected"\n@on.click="action_tree.onUserDeleteAction()"\n></xbutton>\n</div>\n</div>\n'}},947:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div class="fv__ui-custom-format-options" @var.customopt="$component">\n<fieldset\nclass="fv__ui-widget-properties-dialog-fieldset fv__ui-widget-properties-fieldset-custom-format-script"\n>\n<legend>form-designer:dialog.format.customFormatScript</legend>\n<div class="fv__ui-widget-properties-dialog-fieldset-body">\n<div class="fv__ui-form-designer-script-previewer">\n@{customopt.customFormatScript}\n</div>\n<xbutton\nclass="fv__ui-dialog-button fv__ui-custom-format-options-edit-script-btn"\ntext="form-designer:dialog.format.edit"\n@on.click="customopt.showEditCustomFormatScriptDialog()"\n></xbutton>\n</div>\n</fieldset>\n<fieldset\nclass="fv__ui-widget-properties-dialog-fieldset fv__ui-widget-properties-fieldset-custom-keystroke-script"\n>\n<legend>form-designer:dialog.format.customKeystrokeScript</legend>\n<div class="fv__ui-widget-properties-dialog-fieldset-body">\n<div class="fv__ui-form-designer-script-previewer">\n@{customopt.customKeyStrokeScript}\n</div>\n<xbutton\nclass="fv__ui-dialog-button fv__ui-custom-format-options-edit-script-btn"\ntext="form-designer:dialog.format.edit"\n@on.click="customopt.showEditCustomKeyStrokeScriptDialog()"\n></xbutton>\n</div>\n</fieldset>\n</div>\n'}},680:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div\nclass="fv__ui-date-format-options fv__ui-widget-format-options-panel"\n@var.dateopt="$component"\n>\n<select-list\nlimit="1"\n@on.change="dateopt.onUserSelectDateFormat($args[0])"\nclass="fv__ui-widget-format-options-select-list"\n@model="dateopt.selectedDateFormats"\n>\n<sel-option\n@foreach="item in dateopt.dateFormatOptions track by id"\n@setter.value="item.id"\n>@{item.text}</sel-option\n>\n</select-list>\n<input\nclass="fv__ui-widget-format-custom-format-editor"\ntype="text"\n@if="dateopt.selectedDateFormats[0] === \'Custom\'"\n@model="dateopt.customDateFormat"\n@on.input="dateopt.onUserInputCustomFormat()"\n@on.change="dateopt.onUserChangeCustomFormat($args[0])"\n/>\n\n<div class="fv__ui-widget-format-example">\n<span\ndata-i18n="form-designer:dialog.format.exampleOfCurrentFormat"\nclass="fv__ui-widget-format-example-label"\n></span>\n<span class="fv__ui-widget-format-example-content"\n>@{dateopt.example}</span\n>\n</div>\n</div>\n'}},8470:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div class="fv__ui-number-format-options fv__ui-widget-format-options-panel" @var.numopt="$component">\n<form-group\nlabel="form-designer:dialog.format.decimalPlaces"\nclass="fv__ui-widget-properties-form-group-decimal-places"\n>\n<dropdown-select\n@setter.options="numopt.decimalPlacesOptions"\n@model="numopt.selectedDecimalPlaces"\n@on.change="numopt.onUserUpdateFormatOptions()"\n></dropdown-select>\n</form-group>\n<form-group\nlabel="form-designer:dialog.format.separatorStyle"\nclass="fv__ui-widget-properties-form-group-separator-style"\n>\n<dropdown-select\n@setter.options="numopt.separatorStyleOptions"\n@model="numopt.selectedSeparatorStyle"\n@on.change="numopt.onUserUpdateFormatOptions()"\n></dropdown-select>\n</form-group>\n<form-group\nlabel="form-designer:dialog.format.currencySymbol"\nclass="fv__ui-widget-properties-form-group-currency-symbol"\n>\n<dropdown-select\n@setter.options="numopt.currencySymbolOptions"\n@model="numopt.selectedCurrencySymbol"\n@on.change="numopt.onUserUpdateFormatOptions()"\n></dropdown-select>\n</form-group>\n<form-group\nlabel="form-designer:dialog.format.negativeNumberStyle"\nclass="fv__ui-widget-properties-form-group-negative-number-style"\n>\n<checkbox\ntext="form-designer:dialog.format.showParentheses"\n@model="numopt.showParentheses"\n@on.change="numopt.onUserUpdateFormatOptions()"\n></checkbox>\n<checkbox\ntext="form-designer:dialog.format.useRedText"\n@model="numopt.useRedText"\n@on.change="numopt.onUserUpdateFormatOptions()"\n></checkbox>\n</form-group>\n\n<div class="fv__ui-widget-format-example">\n<span\ndata-i18n="form-designer:dialog.format.exampleOfCurrentFormat"\nclass="fv__ui-widget-format-example-label"\n></span>\n<span\nclass="fv__ui-widget-format-example-content"\n@style="numopt.exampleColor"\n>@{numopt.example}</span\n>\n</div>\n</div>\n'}},4297:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div class="fv__ui-percentage-format-options fv__ui-widget-format-options-panel" @var.percopt="$component">\n<form-group\nlabel="form-designer:dialog.format.decimalPlaces"\nclass="fv__ui-widget-properties-form-group-decimal-places"\n>\n<dropdown-select\n@setter.options="percopt.decimalPlacesOptions"\n@model="percopt.selectedDecimalPlaces"\n@on.change="percopt.onUserChangeDecimalPlaces($args[0])"\n></dropdown-select>\n</form-group>\n<form-group\nlabel="form-designer:dialog.format.separatorStyle"\nclass="fv__ui-widget-properties-form-group-separator-style"\n>\n<dropdown-select\n@setter.options="percopt.separatorStyleOptions"\n@model="percopt.selectedSeparatorStyle"\n@on.change="percopt.onUserChangeSeparatorStyle($args[0])"\n></dropdown-select>\n</form-group>\n<div class="fv__ui-widget-format-example">\n<span\ndata-i18n="form-designer:dialog.format.exampleOfCurrentFormat"\nclass="fv__ui-widget-format-example-label"\n></span>\n<span\nclass="fv__ui-widget-format-example-content"\n>@{percopt.example}</span\n>\n</div>\n</div>\n'}},3374:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div\nclass="fv__ui-special-format-options fv__ui-widget-format-options-panel"\n@var.specialopt="$component"\n>\n<select-list\nlimit="1"\nclass="fv__ui-widget-format-options-select-list"\n@model="specialopt.selectedFormats"\n@on.change="specialopt.onUserSelectFormat($args[0])"\n>\n<sel-option\n@foreach="item in specialopt.formatOptions track by id"\n@setter.value="item.id"\n>@{item.text}</sel-option\n>\n</select-list>\n<input\n@show="specialopt.showArbitraryMaskEditor"\nclass="fv__ui-widget-format-custom-format-editor"\n@model="specialopt.arbitraryMask"\n@on.change="specialopt.onUserChangeArbitraryMask($args[0])"\n/>\n</div>\n'}},8989:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div\nclass="fv__ui-time-format-options fv__ui-widget-format-options-panel"\n@var.timeopt="$component"\n>\n<select-list\nlimit="1"\n@on.change="timeopt.onUserSelectTimeFormat($args[0])"\nclass="fv__ui-widget-format-options-select-list"\n@model="timeopt.selectedTimeFormats"\n>\n<sel-option\n@foreach="item in timeopt.timeFormatOptions track by id"\n@setter.value="item.id"\n>@{item.text}</sel-option\n>\n</select-list>\n<input\nclass="fv__ui-widget-format-custom-format-editor"\ntype="text"\n@if="timeopt.selectedTimeFormats[0] === \'Custom\'"\n@model="timeopt.customTimeFormat"\n@on.input="timeopt.onUserInputCustomFormat()"\n@on.change="timeopt.onUserChangeCustomFormat($args[0])"\n/>\n<div class="fv__ui-widget-format-example">\n<span\ndata-i18n="form-designer:dialog.format.exampleOfCurrentFormat"\nclass="fv__ui-widget-format-example-label"\n></span>\n<span class="fv__ui-widget-format-example-content"\n>@{timeopt.example}</span\n>\n</div>\n</div>\n'}},9463:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<dropdown-select\nclass="fv__ui-widget-format-category-selector"\n@on.change="$component.onUserChangeCategory($args[0])"\n></dropdown-select>\n'}},6535:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div\nclass="fv__ui-widget-format-category-tip"\n></div>\n'}},8376:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div name="fv--form-designer-properties-tab-body-actions" @lazy-content="shown">\n<fieldset class="fv__ui-widget-properties-dialog-fieldset">\n<legend>\neditActions.add\n</legend>\n<div class="fv__ui-widget-properties-dialog-fieldset-body">\n<form-designer-v2:widget-action-creator></form-designer-v2:widget-action-creator>\n</div>\n</fieldset>\n<fieldset class="fv__ui-widget-properties-dialog-fieldset">\n<legend>\nui_:contextmenu.annot.actions\n</legend>\n<form-designer-v2:widget-action-tree class="fv__ui-widget-properties-dialog-fieldset-body"></form-designer-v2:widget-action-tree>\n</fieldset>\n</div>'}},3554:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div name="fv--form-designer-properties-tab-body-appearance" @lazy-content="shown">\n<fieldset class="fv__ui-widget-properties-dialog-fieldset">\n<legend>\nform-designer:dialog.appearance.bordersAndColors\n</legend>\n<div class="fv__ui-widget-properties-dialog-fieldset-body">\n<div class="fv__ui-layout-row">\n<div class="fv__ui-layout-col-2">\n<form-group\nlabel="form-designer:dialog.appearance.borderColor"\nclass="fv__ui-widget-properties-form-group-field-border-color"\n>\n<form-designer-v2:widget-border-color-picker data-i18n="[title]form-designer:dialog.appearance.borderColor"></form-designer-v2:widget-border-color-picker>\n</form-group>\n</div>\n<div class="fv__ui-layout-col-3">\n<form-group\nlabel="form-designer:dialog.appearance.lineStyle"\nclass="fv__ui-widget-properties-form-group-widget-line-style"\n>\n<form-designer-v2:widget-line-style-selector></form-designer-v2:widget-line-style-selector>\n</form-group>\n</div>\n</div>\n<div class="fv__ui-layout-row">\n<div class="fv__ui-layout-col-2">\n<form-group\nlabel="form-designer:dialog.appearance.fillColor"\nclass="fv__ui-widget-properties-form-group-field-fill-color"\n>\n<form-designer-v2:widget-fill-color-picker data-i18n="[title]form-designer:dialog.appearance.fillColor"></form-designer-v2:widget-fill-color-picker>\n</form-group>\n</div>\n<div class="fv__ui-layout-col-3">\n<form-group\nlabel="form-designer:dialog.appearance.thickness"\nclass="fv__ui-widget-properties-form-group-field-line-thickness"\n>\n<form-designer-v2:widget-line-thickness-selector @aria:title="form-designer:dialog.appearance.thickness"></form-designer-v2:widget-line-thickness-selector>\n</form-group>\n</div>\n</div>\n</div>\n</fieldset>\n<fieldset class="fv__ui-widget-properties-dialog-fieldset">\n<legend>form-designer:dialog.appearance.text</legend>\n<div class="fv__ui-widget-properties-dialog-fieldset-body">\n<div class="fv__ui-layout-row">\n<div class="fv__ui-layout-col-2">\n<form-group\nlabel="form-designer:dialog.appearance.fontSize"\n>\n<form-designer-v2:widget-text-size-selector @aria:title="form-designer:dialog.appearance.fontSize"></form-designer-v2:widget-text-size-selector>\n</form-group>\n</div>\n<div class="fv__ui-layout-col-1">\n<form-group\nlabel="form-designer:dialog.appearance.textColor"\n>\n<form-designer-v2:widget-text-color-picker data-i18n="[title]form-designer:dialog.appearance.textColor"></form-designer-v2:widget-text-color-picker>\n</form-group>\n</div>\n</div>\n<form-group\nlabel="form-designer:dialog.appearance.font"\n>\n<form-designer-v2:widget-font-selector></form-designer-v2:widget-font-selector>\n</form-group>\n<form-group\nlabel="form-designer:dialog.appearance.direction"\n>\n<form-designer-v2:field-text-direction></form-designer-v2:field-text-direction>\n</form-group>\n</div>\n</fieldset>\n</div>'}},1929:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div name="fv--form-designer-properties-tab-body-calculate" @lazy-content="shown">\n<form-designer-v2:calculate-action-editor></form-designer-v2:calculate-action-editor>\n</div>\n'}},4476:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div\nname="fv--form-designer-properties-tab-body-format"\n@controller.alias="formatTab"\n@init="formatTab.selectedCategory = \'none\'"\n@lazy-content="shown"\n>\n<form-group\nlabel="form-designer:dialog.format.selectFormatCategory"\nclass="fv__ui-widget-properties-form-group-format-category"\n>\n<form-designer-v2:widget-format-category-selector\n@model="formatTab.selectedCategory"\n></form-designer-v2:widget-format-category-selector>\n</form-group>\n<fieldset class="fv__ui-widget-properties-dialog-fieldset">\n<legend>\n@{\'form-designer:dialog.optionTitle.\' +\nformatTab.selectedCategory|i18n()}\n</legend>\n<div\nclass="fv__ui-widget-properties-dialog-fieldset-body fv__ui-widget-properties-format-tab-fieldset-body"\n>\n<form-designer-v2:custom-format-options\n@if="formatTab.selectedCategory === \'custom\'"\n></form-designer-v2:custom-format-options>\n<form-designer-v2:number-format-options\n@if="formatTab.selectedCategory === \'number\'"\n></form-designer-v2:number-format-options>\n<form-designer-v2:date-format-options\n@if="formatTab.selectedCategory === \'date\'"\n></form-designer-v2:date-format-options>\n<form-designer-v2:percentage-format-options\n@if="formatTab.selectedCategory === \'percentage\'"\n></form-designer-v2:percentage-format-options>\n<form-designer-v2:special-format-options\n@if="formatTab.selectedCategory === \'special\'"\n></form-designer-v2:special-format-options>\n<form-designer-v2:time-format-options\n@if="formatTab.selectedCategory === \'time\'"\n></form-designer-v2:time-format-options>\n</div>\n</fieldset>\n<form-designer-v2:widget-format-category-tip></form-designer-v2:widget-format-category-tip>\n</div>\n'}},7798:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div name="fv--form-designer-properties-tab-body-general" @lazy-content="shown">\n<form-group\nname="fv--form-designer-properties-name"\nlabel="form-designer:dialog.general.name"\nclass="fv__ui-widget-properties-form-group-field-name"\n>\n<form-designer-v2:field-name-editor></form-designer-v2:field-name-editor>\n</form-group>\n<form-group\nname="fv--form-designer-properties-alternate-name"\nlabel="form-designer:dialog.general.tooltip"\nclass="fv__ui-widget-properties-form-group-field-alternate-name"\n>\n<form-designer-v2:field-alternate-name-editor></form-designer-v2:field-alternate-name-editor>\n</form-group>\n<fieldset class="fv__ui-widget-properties-dialog-fieldset">\n<legend>form-designer:dialog.general.commonProperties</legend>\n<div class="fv__ui-widget-properties-dialog-fieldset-body">\n<form-group\nlabel="form-designer:dialog.general.formField"\nclass="fv__ui-widget-properties-form-group-widget-visible-type"\n>\n<form-designer-v2:widget-visible-type-selector></form-designer-v2:widget-visible-type-selector>\n</form-group>\n<form-group\nlabel="form-designer:dialog.general.orientation"\nclass="fv__ui-widget-properties-form-group-field-orientation"\n>\n<form-designer-v2:field-orientation-selector></form-designer-v2:field-orientation-selector>\n<span class="fv__ui-widget-properties-field-orientation-unit"\n>form-designer:dialog.general.degrees</span\n>\n</form-group>\n<div class="fv__ui-layout-row">\n<div class="fv__ui-layout-col-1">\n<form-designer-v2:field-readonly-checkbox></form-designer-v2:field-readonly-checkbox>\n</div>\n<div class="fv__ui-layout-col-3">\n<form-designer-v2:field-required-checkbox></form-designer-v2:field-required-checkbox>\n</div>\n</div>\n</div>\n</fieldset>\n</div>\n'}},1254:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};var t="",i=function(e){return t+=e};return t+='<div name="fv--form-designer-properties-tab-body-options" @lazy-content="shown">\n',i(n(5528)(e)),t+="\n",i(n(2469)(e)),t+="\n",i(n(6459)(e)),t+="\n",i(n(5477)(e)),t+="\n",i(n(326)(e)),t+="\n",i(n(4753)(e)),t+="\n</div>\n"}},4753:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div class="fv__ui-widget-properties-checkbox-options" @form-designer-v2:accept-field-types="CheckBox">\n<form-group\nlabel="form-designer:dialog.options.choice.checkboxStyle"\n>\n<form-designer-v2:normal-caption-selector></form-designer-v2:normal-caption-selector>\n</form-group>\n<form-group\nlabel="form-designer:dialog.options.choice.exportValue"\n>\n<form-designer-v2:export-value-editor></form-designer-v2:export-value-editor>\n</form-group>\n<form-group\ntag="div"\ndelimiter=""\n>\n<form-designer-v2:checked-by-default-checkbox></form-designer-v2:checked-by-default-checkbox>\n</form-group>\n</div>'}},6459:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div class="fv__ui-widget-properties-combo-list-box-options" @form-designer-v2:accept-field-types="ComboBox">\n<div class="fv__ui-layout-row">\n<form-group\nlabel="form-designer:dialog.options.comboListBox.item"\nclass="fv__ui-layout-col-7"\n>\n<form-designer-v2:combo-list-box-item-editor></form-designer-v2:combo-list-box-item-editor>\n</form-group>\n<div class="fv__ui-layout-col-2">\n<form-designer-v2:combo-list-box-add-item-button></form-designer-v2:combo-list-box-add-item-button>\n</div>\n</div>\n<div class="fv__ui-layout-row">\n<form-group\nlabel="form-designer:dialog.options.comboListBox.exportValue"\nclass="fv__ui-layout-col-7"\n>\n<form-designer-v2:combo-list-box-export-value-editor></form-designer-v2:combo-list-box-export-value-editor>\n</form-group>\n<div class="fv__ui-layout-col-2"></div>\n</div>\n<div class="fv__ui-layout-row fv__ui-widget-properties-combo-list-box-options-item-list-container">\n<form-group\nlabel="form-designer:dialog.options.comboListBox.itemList"\nclass="fv__ui-layout-col-7 fv__ui-widget-properties-form-group-combo-list-box-item-list"\n>\n<form-designer-v2:combo-list-box-item-list-selector></form-designer-v2:combo-list-box-item-list-selector>\n</form-group>\n<div class="fv__ui-layout-col-2 fv__ui-combo-list-box-list-controls">\n<form-designer-v2:combo-list-box-delete-item-button></form-designer-v2:combo-list-box-delete-item-button>\n<form-designer-v2:combo-list-box-move-item-up-button></form-designer-v2:combo-list-box-move-item-up-button>\n<form-designer-v2:combo-list-box-move-item-down-button></form-designer-v2:combo-list-box-move-item-down-button>\n</div>\n</div>\n<form-group\ntag="div"\ndelimiter=""\n>\n<form-designer-v2:combo-box-edit-checkbox></form-designer-v2:combo-box-edit-checkbox>\n</form-group>\n</div>'}},5477:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div class="fv__ui-widget-properties-combo-list-box-options" @form-designer-v2:accept-field-types="ListBox">\n<div class="fv__ui-layout-row">\n<form-group\nlabel="form-designer:dialog.options.comboListBox.item"\nclass="fv__ui-layout-col-7"\n>\n<form-designer-v2:combo-list-box-item-editor></form-designer-v2:combo-list-box-item-editor>\n</form-group>\n<div class="fv__ui-layout-col-2">\n<form-designer-v2:combo-list-box-add-item-button></form-designer-v2:combo-list-box-add-item-button>\n</div>\n</div>\n<div class="fv__ui-layout-row">\n<form-group\nlabel="form-designer:dialog.options.comboListBox.exportValue"\nclass="fv__ui-layout-col-7"\n>\n<form-designer-v2:combo-list-box-export-value-editor></form-designer-v2:combo-list-box-export-value-editor>\n</form-group>\n<div class="fv__ui-layout-col-2"></div>\n</div>\n<div class="fv__ui-layout-row fv__ui-widget-properties-combo-list-box-options-item-list-container">\n<form-group\nlabel="form-designer:dialog.options.comboListBox.itemList"\nclass="fv__ui-layout-col-7 fv__ui-widget-properties-form-group-combo-list-box-item-list"\n>\n<form-designer-v2:combo-list-box-item-list-selector></form-designer-v2:combo-list-box-item-list-selector>\n</form-group>\n<div class="fv__ui-layout-col-2 fv__ui-combo-list-box-list-controls">\n<form-designer-v2:combo-list-box-delete-item-button></form-designer-v2:combo-list-box-delete-item-button>\n<form-designer-v2:combo-list-box-move-item-up-button></form-designer-v2:combo-list-box-move-item-up-button>\n<form-designer-v2:combo-list-box-move-item-down-button></form-designer-v2:combo-list-box-move-item-down-button>\n</div>\n</div>\n<form-group\ntag="div"\ndelimiter=""\n>\n<form-designer-v2:list-box-multille-selection-checkbox></form-designer-v2:list-box-multille-selection-checkbox>\n</form-group>\n</div>'}},5528:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};var t="";return t+='<div\nclass="fv__ui-widget-properties-push-button-options"\n@form-designer-v2:accept-field-types="PushButton"\n>\n<div class="fv__ui-layout-row">\n<div class="fv__ui-layout-col-7">\n<form-group\nname="fv--form-designer-properties-push-button-layout"\nlabel="form-designer:dialog.options.pushButton.layout"\nclass="fv__ui-widget-properties-form-group-push-button-layout"\n>\n<form-designer-v2:push-button-layout-selector></form-designer-v2:push-button-layout-selector>\n</form-group>\n</div>\n<div class="fv__ui-layout-col-2">\n<form-designer-v2:push-button-show-icon-fit-dialog-button\nname="fv--form-designer-show-icon-fit-dialog-button"\ntarget-dialog="fv--form-designer-properties-icon-fit-dialog"\n></form-designer-v2:push-button-show-icon-fit-dialog-button>\n<form-designer-v2:icon-fit-dialog\nappend-to="body"\nname="fv--form-designer-properties-icon-fit-dialog"\n',t+="\n@lazy\n",t+='\n></form-designer-v2:icon-fit-dialog>\n</div>\n</div>\n<div class="fv__ui-layout-row">\n<div class="fv__ui-layout-col-7">\n<form-group\nname="fv--form-designer-properties-push-button-behavior"\nlabel="form-designer:dialog.options.pushButton.behavior"\nclass="fv__ui-widget-properties-form-group-push-button-behavior"\n>\n<form-designer-v2:push-button-behavior-selector></form-designer-v2:push-button-behavior-selector>\n</form-group>\n</div>\n<div class="fv__ui-layout-col-2"></div>\n</div>\n<fieldset class="fv__ui-widget-properties-dialog-fieldset">\n<legend\ndata-i18n="form-designer:dialog.options.pushButton.iconAndLabel"\n></legend>\n\n<div class="fv__ui-widget-properties-dialog-fieldset-body">\n<div class="fv__ui-layout-row">\n<div class="fv__ui-layout-col-3">\n<label>form-designer:dialog.options.pushButton.state</label>\n<span class="fv__ui-form-group-delimiter">:</span>\n</div>\n<div class="fv__ui-layout-col-8">\n<form-group\nlabel="form-designer:dialog.options.pushButton.label"\nclass="fv__ui-widget-properties-form-group-push-button-caption"\n>\n<form-designer-v2:push-button-caption-editor></form-designer-v2:push-button-caption-editor>\n</form-group>\n</div>\n</div>\n<div class="fv__ui-layout-row">\n<div class="fv__ui-layout-col-3">\n<form-designer-v2:push-button-icon-caption-position-selector></form-designer-v2:push-button-icon-caption-position-selector>\n</div>\n<div class="fv__ui-layout-col-8">\n<form-group\ntag="div"\nlabel="form-designer:dialog.options.pushButton.icon"\nclass="fv__ui-widget-properties-form-group-push-button-icon"\n>\n<form-designer-v2:push-button-icon-editor></form-designer-v2:push-button-icon-editor>\n</form-group>\n</div>\n</div>\n</div>\n</fieldset>\n</div>\n'}},326:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div\nclass="fv__ui-widget-properties-radio-button-options"\n@form-designer-v2:accept-field-types="RadioButton"\n>\n<form-group label="form-designer:dialog.options.choice.buttonStyle">\n<form-designer-v2:normal-caption-selector></form-designer-v2:normal-caption-selector>\n</form-group>\n<form-group label="form-designer:dialog.options.choice.exportValue">\n<form-designer-v2:export-value-editor></form-designer-v2:export-value-editor>\n</form-group>\n<form-group tag="div" delimiter="">\n<form-designer-v2:checked-by-default-checkbox></form-designer-v2:checked-by-default-checkbox>\n</form-group>\n\n<form-group tag="div" delimiter="">\n<form-designer-v2:radio-button-unison-checkbox></form-designer-v2:radio-button-unison-checkbox>\n</form-group>\n</div>\n'}},2469:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div class="fv__ui-widget-properties-text-field-options" @form-designer-v2:accept-field-types="Text">\n<form-group\nlabel="form-designer:dialog.options.textField.alignment"\nclass="fv__ui-widget-properties-form-group-text-field-alignment"\nname="fv--widget-form-group-text-field-alignment"\n>\n<form-designer-v2:text-field-alignment-selector></form-designer-v2:text-field-alignment-selector>\n</form-group>\n<form-group\nlabel="form-designer:dialog.options.textField.defaultValue"\nclass="fv__ui-widget-properties-form-group-text-field-default-value"\nname="fv--widget-form-group-text-field-default-value"\n>\n<form-designer-v2:text-field-default-value-editor></form-designer-v2:text-field-default-value-editor>\n</form-group>\n<form-group\nname="fv--widget-form-group-text-field-scroll-long-text"\ndelimiter=""\ntag="div"\n>\n<form-designer-v2:text-field-scroll-long-text-checkbox></form-designer-v2:text-field-scroll-long-text-checkbox>\n</form-group>\n<form-group\nname="fv--widget-form-group-text-field-max-length"\ndelimiter=""\ntag="div"\n>\n<form-designer-v2:text-field-max-length-editor></form-designer-v2:text-field-max-length-editor>\n</form-group>\n<form-group\nname="fv--widget-form-group-text-field-password"\ndelimiter=""\ntag="div"\n>\n<form-designer-v2:text-field-password-checkbox></form-designer-v2:text-field-password-checkbox>\n</form-group>\n<form-group\nname="fv--widget-form-group-text-field-check-spelling"\ndelimiter=""\ntag="div"\n>\n<form-designer-v2:text-field-check-spelling></form-designer-v2:text-field-check-spelling>\n</form-group>\n<form-group\nname="fv--widget-form-group-text-field-combo-of"\ndelimiter=""\ntag="div"\n>\n<form-designer-v2:text-field-comb-of-editor></form-designer-v2:text-field-comb-of-editor>\n</form-group>\n<form-group\nname="fv--widget-form-group-text-field-multiline"\ndelimiter=""\ntag="div"\n>\n<form-designer-v2:text-field-multiline-checkbox></form-designer-v2:text-field-multiline-checkbox>\n</form-group>\n</div>'}},8397:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div name="fv--form-designer-properties-tab-body-position" @lazy-content="shown">\n<form-designer-v2:widget-position-properties></form-designer-v2:widget-position-properties>\n</div>'}},1586:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div name="fv--form-designer-properties-tab-body-selection-change" @lazy-content="shown">\n<fieldset class="fv__ui-widget-properties-dialog-fieldset fv__form-designer-properties-listbox-selection-change-editor-fieldset">\n<legend>\nform-designer:dialog.selection.title\n</legend>\n<div class="fv__ui-widget-properties-dialog-fieldset-body">\n<form-designer-v2:listbox-selection-change-action-editor></form-designer-v2:listbox-selection-change-action-editor>\n</div>\n</fieldset>\n</div>\n'}},5581:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div name="fv--form-designer-properties-tab-body-signed" @lazy-content="shown">\n<form-designer-v2:signed-action-editor></form-designer-v2:signed-action-editor>\n</div>\n'}},3938:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div name="fv--form-designer-properties-tab-body-validate" @lazy-content="shown">\n<form-designer-v2:validation-action-editor></form-designer-v2:validation-action-editor>\n</div>\n'}},7322:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};var t="",i=function(e){return t+=e};return t+='<layer class="fv__ui-widget-properties-dialog center" @var.dialog="$component">\n<layer-header\n@draggable="{type:\'parent\'}"\n@setter.title="dialog.dialogTitle"\n></layer-header>\n<div class="fv__ui-layer-body" name="fv--ui-widget-properties-dialog-body">\n<div class="fv__ui-widget-properties-dialog-nav" @aria:toolbar.tablist>\n<gtab\nname="fv--form-designer-properties-tab-general"\ngroup="widget-properties"\nbody="fv--form-designer-properties-tab-body-general"\ntext="form-designer:dialog.tabNav.general"\n@form-designer-v2:accept-field-types.multiple="all"\ndefault-active="true"\n></gtab>\n<gtab\nname="fv--form-designer-properties-tab-appearance"\ngroup="widget-properties"\nbody="fv--form-designer-properties-tab-body-appearance"\ntext="form-designer:dialog.tabNav.appearance"\n@form-designer-v2:accept-field-types.multiple="all"\n></gtab>\n<gtab\nname="fv--form-designer-properties-tab-position"\ngroup="widget-properties"\nbody="fv--form-designer-properties-tab-body-position"\ntext="form-designer:dialog.tabNav.position"\n@form-designer-v2:accept-field-types.multiple="all"\n></gtab>\n<gtab\nname="fv--form-designer-properties-tab-options"\ngroup="widget-properties"\nbody="fv--form-designer-properties-tab-body-options"\ntext="form-designer:dialog.tabNav.options"\n@form-designer-v2:accept-field-types="PushButton,Text,ComboBox,ListBox,RadioButton,CheckBox"\n></gtab>\n<gtab\nname="fv--form-designer-properties-tab-format"\ngroup="widget-properties"\nbody="fv--form-designer-properties-tab-body-format"\ntext="form-designer:dialog.tabNav.format"\n@form-designer-v2:accept-field-types="Text,ComboBox"\n></gtab>\n<gtab\nname="fv--form-designer-properties-tab-validate"\ngroup="widget-properties"\nbody="fv--form-designer-properties-tab-body-validate"\ntext="form-designer:dialog.tabNav.validate"\n@form-designer-v2:accept-field-types="Text,ComboBox"\n></gtab>\n<gtab\nname="fv--form-designer-properties-tab-calculate"\ngroup="widget-properties"\nbody="fv--form-designer-properties-tab-body-calculate"\ntext="form-designer:dialog.tabNav.calculate"\n@form-designer-v2:accept-field-types="Text,ComboBox"\n></gtab>\n<gtab\nname="fv--form-designer-properties-tab-selection-change"\ngroup="widget-properties"\nbody="fv--form-designer-properties-tab-body-selection-change"\ntext="form-designer:dialog.tabNav.selectionChange"\n@form-designer-v2:accept-field-types="ListBox"\n></gtab>\n<gtab\nname="fv--form-designer-properties-tab-actions"\ngroup="widget-properties"\nbody="fv--form-designer-properties-tab-body-actions"\ntext="form-designer:dialog.tabNav.action"\n@form-designer-v2:accept-field-types="all"\n></gtab>\n<gtab\nname="fv--form-designer-properties-tab-signed"\ngroup="widget-properties"\nbody="fv--form-designer-properties-tab-body-signed"\ntext="form-designer:dialog.tabNav.signed"\n@form-designer-v2:accept-field-types="Sign"\n></gtab>\n</div>\n<form class="fv__ui-widget-properties-dialog-body" onsubmit="return false;">\n',i(n(7798)(e)),t+="\n",i(n(3554)(e)),t+="\n",i(n(8397)(e)),t+="\n",i(n(1254)(e)),t+="\n",i(n(4476)(e)),t+="\n",i(n(3938)(e)),t+="\n",i(n(1929)(e)),t+="\n",i(n(1586)(e)),t+="\n",i(n(8376)(e)),t+="\n",i(n(5581)(e)),t+='\n<div class="fv__ui-widget-properties-dialog-lock-mask" @show="dialog.locked || dialog.noFieldsSelected"></div>\n</form>\n</div>\n<footer class="fv__ui-widget-properties-dialog-footer footer" name="fv--ui-widget-properties-dialog-footer">\n<form-designer-v2:lock-widget-checkbox @model="dialog.locked"></form-designer-v2:lock-widget-checkbox>\n<xbutton class="fv__ui-dialog-ok-button" @on.click="dialog.hide()">dialog.close</xbutton>\n</footer>\n</layer>\n'}},7389:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<input\ntype="text"\nautocomplete="off"\nclass="fv__ui-widget-properties-field-alternate-name-editor fv__ui-input-primary"\n@prop.value="$component.property.value|default(\'\')"\n@form-designer-v2:form-property="$component.property"\n@on.change="$component.handleUserInputChange($args[0])"\n/>\n'}},4801:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<input\ntype="text"\nautocomplete="new-password"\nclass="fv__ui-widget-properties-field-name-editor fv__ui-input-primary"\n@prop.value="$component.property.value|default(\'\')"\n@form-designer-v2:form-property="$component.property"\n@on.change="$component.handleUserInputChange($args[0])"\n/>\n'}},2227:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<checkbox\ntext="form-designer:dialog.general.readOnly"\n@form-designer-v2:form-property="$component.property"\n@on.change="$component.onUserChangeReadonlyState($args[0])"\n></checkbox>\n'}},8409:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<checkbox\ntext="form-designer:dialog.general.required"\n@form-designer-v2:form-property="$component.property"\n@on.change="$component.onUserChangeRequiredState($args[0])"\n></checkbox>\n'}},6861:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<dropdown-select\nclass="fv__ui-widget-properties-field-line-style-selector"\n@on.change="$component.onUseSelectLineStyle($args[0])"\n@form-designer-v2:form-property="$component.property"\n></dropdown-select>\n'}},7214:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<dropdown-select\nclass="fv__ui-widget-properties-field-line-thickness-selector"\n@form-designer-v2:form-property="$component.property"\n@on.change="$component.onUserSelectLineThickness($args[0])"\n></dropdown-select>\n'}},5710:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<dropdown-select\nclass="fv__ui-widget-properties-field-orientation-selector"\n@form-designer-v2:form-property="$component.property"\n@on.change="$component.onUserSelectOrientation($args[0])"\n></dropdown-select>\n'}},1985:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div @var.panel="$component" class="fv__ui-widget-position-properties-panel">\n<form-group\nlabel="form-designer:dialog.position.units"\nclass="fv__ui-widget-properties-form-group-unit-option-list"\n>\n<dropdown-select\n@setter.options="panel.unitOptionList"\n@model="panel.selectedUnit"\n@on.change="panel.onChangeUnit($args[0])"\nclass="fv__ui-widget-properties-unit-option-list"\n></dropdown-select>\n</form-group>\n<fieldset class="fv__ui-widget-properties-dialog-fieldset">\n<legend>form-designer:dialog.position.name</legend>\n<div class="fv__ui-widget-properties-dialog-fieldset-body">\n<div class="fv__ui-layout-row">\n<div class="fv__ui-layout-col-1">\n<form-group\nlabel="form-designer:dialog.position.left"\ndelimiter=""\nclass="fv__ui-widget-properties-form-group-postion-left"\n>\n<pdf-unit-number-input\nclass="fv__ui-widget-properties-position-left"\n@model="panel.position.left"\n@on.change="panel.onUserChangeRect(\'left\', $args[0])"\n@form-designer-v2:form-property="panel.property"\n></pdf-unit-number-input>\n<span class="fv__ui-form-group-extra"\n>@{panel.selectedUnit}</span\n>\n</form-group>\n</div>\n<div class="fv__ui-layout-col-1">\n<form-group\nlabel="form-designer:dialog.position.bottom"\ndelimiter=""\nclass="fv__ui-widget-properties-form-group-postion-bottom"\n>\n<pdf-unit-number-input\nclass="fv__ui-widget-properties-position-bottom"\n@model="panel.position.bottom"\n@on.change="panel.onUserChangeRect(\'bottom\', $args[0])"\n@form-designer-v2:form-property="panel.property"\n></pdf-unit-number-input>\n<span class="fv__ui-form-group-extra"\n>@{panel.selectedUnit}</span\n>\n</form-group>\n</div>\n</div>\n<div class="fv__ui-layout-row">\n<div class="fv__ui-layout-col-1">\n<form-group\nlabel="form-designer:dialog.position.right"\ndelimiter=""\nclass="fv__ui-widget-properties-form-group-postion-right"\n>\n<pdf-unit-number-input\nclass="fv__ui-widget-properties-position-right"\n@model="panel.position.right"\n@on.change="panel.onUserChangeRect(\'right\', $args[0])"\n@form-designer-v2:form-property="panel.property"\n></pdf-unit-number-input>\n<span class="fv__ui-form-group-extra"\n>@{panel.selectedUnit}</span\n>\n</form-group>\n</div>\n<div class="fv__ui-layout-col-1">\n<form-group\nlabel="form-designer:dialog.position.top"\ndelimiter=""\nclass="fv__ui-widget-properties-form-group-postion-top"\n>\n<pdf-unit-number-input\nclass="fv__ui-widget-properties-position-top"\n@model="panel.position.top"\n@on.change="panel.onUserChangeRect(\'top\', $args[0])"\n@form-designer-v2:form-property="panel.property"\n></pdf-unit-number-input>\n<span class="fv__ui-form-group-extra"\n>@{panel.selectedUnit}</span\n>\n</form-group>\n</div>\n</div>\n<div class="fv__ui-layout-row">\n<div class="fv__ui-layout-col-1">\n<form-group\nlabel="form-designer:dialog.position.width"\ndelimiter=""\nclass="fv__ui-widget-properties-form-group-postion-width"\n>\n<pdf-unit-number-input\nclass="fv__ui-widget-properties-position-width"\n@model="panel.position.width"\n@on.change="panel.onUserChangeRect(\'width\', $args[0])"\n@form-designer-v2:form-property="panel.property"\n></pdf-unit-number-input>\n<span class="fv__ui-form-group-extra"\n>@{panel.selectedUnit}</span\n>\n</form-group>\n</div>\n<div class="fv__ui-layout-col-1">\n<form-group\nlabel="form-designer:dialog.position.height"\ndelimiter=""\nclass="fv__ui-widget-properties-form-group-postion-height"\n>\n<pdf-unit-number-input\nclass="fv__ui-widget-properties-position-height"\n@model="panel.position.height"\n@on.change="panel.onUserChangeRect(\'height\', $args[0])"\n@form-designer-v2:form-property="panel.property"\n></pdf-unit-number-input>\n<span class="fv__ui-form-group-extra"\n>@{panel.selectedUnit}</span\n>\n</form-group>\n</div>\n</div>\n</div>\n</fieldset>\n<checkbox\n@model="panel.fixedSize"\ndirection="rtl"\ntext="form-designer:dialog.position.required"\n></checkbox>\n</div>\n'}},989:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div\nclass="fv__ui-widget-properties-field-text-direction"\n@var.self="$component"\n@form-designer-v2:form-property="$component.property"\n>\n<label>\n<input\ntype="radio"\nname="text-direction"\nvalue="ltr"\n@prop.checked="self.textDirection === 0"\n@on.change="self.userChangeDirection(0)"\n/>\n<span> form-designer:dialog.appearance.leftToRight </span>\n</label>\n<label>\n<input\ntype="radio"\nname="text-direction"\nvalue="rtl"\n@prop.checked="self.textDirection === 1"\n@on.change="self.userChangeDirection(1)"\n/>\n<span> form-designer:dialog.appearance.rightToLeft </span>\n</label>\n</div>\n'}},44:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<dropdown-select\nclass="fv__ui-widget-properties-widget-font-selector"\n@form-designer-v2:form-property="$component.property"\n@on.change="$component.onUserSelectFont($args[0])"\nlazy-mode="passive"\n></dropdown-select>\n'}},6588:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<dropdown-select\nclass="fv__ui-widget-properties-widget-text-size-selector"\neditable\n@form-designer-v2:form-property="$component.property"\n@on.change="$component.onUserSelectTextSize($args[0])"\n></dropdown-select>\n'}},4538:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<dropdown-select\nclass="fv__ui-widget-properties-widget-visible-type-selector"\n@form-designer-v2:form-property="$component.property"\n@on.change="$component.onUserChangeVisibleType($args[0])"\n></dropdown-select>\n'}},9388:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};var t="";return t+='<ribbon-button\nname="form-reset-field"\nicon-class="fv__icon-toolbar-reset-field"\n@bem-class.root="fv__ui-reset-fields-value-button"\n',t+='\n@on.click="$component.handleResetForm()"\n',t+='\ntext="form-designer:tips.ResetForm"\ntooltip-title="form-designer:tips.ResetForm"\n@tooltip\n></ribbon-button>\n'}},4897:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<layer\n@bem-class.root="fv__ui-simple-form-properties-dialog"\n@var.self="$component"\nfocus="false"\ndisable-shortcuts\n>\n<layer-header\n@bem-class="header"\ntitle="form-designer:simpleDialog.title"\n></layer-header>\n\n<form onsubmit="return false;" method="dialog" @bem-class="body">\n<form-group\ndirection="ttb"\nlabel="form-designer:simpleDialog.name"\ndelimiter=""\nname="fv--simple-form-properties-field-name"\n>\n<form-designer-v2:field-name-editor></form-designer-v2:field-name-editor>\n</form-group>\n\x3c!-- For PushButton --\x3e\n<form-group\n@if="self.properties.type === 1"\ndirection="ttb"\nlabel="form-designer:simpleDialog.label"\ndelimiter=""\nname="fv--simple-form-properties-field-label"\n>\n<form-designer-v2:push-button-caption-editor gesture-state="up"></form-designer-v2:push-button-caption-editor>\n</form-group>\n\x3c!-- For RadioButton --\x3e\n<form-group\n@if="self.properties.type === 3"\ndirection="ttb"\nlabel="form-designer:simpleDialog.exportValue"\ndelimiter=""\nname="fv--simple-form-properties-field-export-value"\n>\n\x3c!-- <input\nname="fv--simple-form-properties-field-export-value-input"\n@model="self.properties.exportValue|default(\'\')"\nclass="fv__ui-input-default"\n/> --\x3e\n<form-designer-v2:export-value-editor></form-designer-v2:export-value-editor>\n</form-group>\n</form>\n<div @bem-class="footer">\n<form-designer-v2:field-required-checkbox text="form-designer:simpleDialog.footer.required"></form-designer-v2:field-required-checkbox>\n<a\n@bem-class="show-all-properties-button"\nhref="javascript:void(0)"\ndata-i18n="form-designer:simpleDialog.footer.allProperties"\n@aria:button\n@on.click="self.showAllPropertiesDialog()"\n></a>\n</div>\n</layer>\n'}},4636:e=>{e.exports=null},5585:(e,t,n)=>{"use strict";
/*! art-template@runtime | https://github.com/aui/art-template */var i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{},r=Object.create(i),o=/["&'<>]/;function a(e){return"string"!=typeof e&&(e=null==e?"":"function"==typeof e?a(e.call(e)):JSON.stringify(e)),e}r.$escape=function(e){return function(e){var t=""+e,n=o.exec(t);if(!n)return e;var i="",r=void 0,a=void 0,s=void 0;for(r=n.index,a=0;r<t.length;r++){switch(t.charCodeAt(r)){case 34:s="&#34;";break;case 38:s="&#38;";break;case 39:s="&#39;";break;case 60:s="&#60;";break;case 62:s="&#62;";break;default:continue}a!==r&&(i+=t.substring(a,r)),a=r+1,i+=s}return a!==r?i+t.substring(a,r):i}(a(e))},r.$each=function(e,t){if(Array.isArray(e))for(var n=0,i=e.length;n<i;n++)t(e[n],n);else for(var r in e)t(e[r],r)},e.exports=r},5779:(e,t,n)=>{"use strict";e.exports=n(5585)},2493:e=>{e.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAAJ0AAAB9CAMAAACPvJFmAAAA8FBMVEUAAACenp7////X19e9vb2qqqrY2Njy8vKrq6ugoKChoaGtra309PTr6+uioqLZ2dm+vr7Ozs6wsLDW1takpKT9/f3f39+jo6Po6Ojp6emfn5/T09O4uLiurq78/Pz19fXs7Ozt7e2np6fg4OCvr6/IyMi3t7fBwcHLy8vU1NSoqKjz8/P6+vr7+/vl5eW1tbXAwMDd3d3KysrFxcWsrKze3t74+Pjq6urw8PDc3Ny6urqmpqbV1dX39/e7u7vS0tLi4uK2tra/v7+xsbHm5ubHx8fExMTv7+/a2trn5+ezs7PR0dHGxsa8vLzk5OS0tLQ/H+8ZAAAAAXRSTlMAQObYZgAAAsJJREFUeNrt221T00AQB3BCm7Z3CUcr1y4Gq6ViShUEqpYnBRRF6+P3/zbSCjQJSZqkt3Rn3P/bm8z8CLnb4/ZYWuJwOBwOh8PhcDgcDidXrIdMft3yw4V1rGMd66jpSmXbtssVkrpqTUwWdum49HQr6q7wyBVquqoK1EXlEtPVQmXboaUriZBOrJLSlSN7njopnR3R2QUhjUeEdWvaapLVtbQF61S/u8dgWd4Ggq5iYM66cvzoE4z1zgnp2gVwT73JoxpD5wZrhXxWQCcTnzVQZztyitssgOvePAzPUfYorvPv24N2kTe3dfezvUDa363Wr/d39UJFzJ/Oqi1ye+Ne4Kv1qOm2ITClYJOWrg+htbJESnddv9LrzCJ16xCpgi8J6V6p6HmY2CGj2/XundbBazI6GXOY2KCi68Ydde4R0bVjD2IVDZ0v4nVVCrp9FX+IrQ4I6AYq6Yz9zeJ1fUjsALxduO6dTmlQoOuGa6nDh2k4OETWHSndShmuqrTejujj6prjv66O89SvUE5wdZPfm048pBUzGmOnqLqbGqDf56hfwcgPiLqz23ejz+OGnZlNRbjA0w2mGw9o3B/+KGb3PAdoukpwsYDt6PAnmaEje4ml+xyuAfAla/0KrSlIOjf6auAqOLwBmbrZ8BVHF7Pl6E1HD3S2Xrv6hqKLWyxk+XZ0pLNeBehh6L7HL18nWepX4tGuKd1+wnyU/nh0x8t+jcLbNa5rJL4bsZehfoWmxci07jhlPorL5dM8V1C8H4Z1ndTFQtj5bsj4ZnVDYZkMmNVJo7hgF9WArmb47hO0DOp8YVhn/TSnu5KmcYGOzLy6jLU9X0zpLjBw0DGjO1IIuMDp9ly6JtKNxV9GdBpJ1zWha2Pd9hTD+XVnAksHv+fWjRCvyv7h+3esYx3rKOhI/48Ah8PhcDgcDofD4XD+8/wFbcRT1tF8op4AAAAASUVORK5CYII="},4616:t=>{"use strict";t.exports=e},2459:e=>{"use strict";e.exports=t},8548:e=>{"use strict";e.exports=n},732:e=>{"use strict";e.exports=i},515:e=>{"use strict";e.exports=r},6399:e=>{"use strict";e.exports=o}},s={};function c(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={exports:{}};return a[e](n,n.exports,c),n.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var l={};return(()=>{"use strict";c.d(l,{default:()=>ys});var e={};function t(e,t,n,i,r,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(i,r)}function n(e){return function(){var n=this,i=arguments;return new Promise(function(r,o){var a=e.apply(n,i);function s(e){t(a,r,o,s,c,"next",e)}function c(e){t(a,r,o,s,c,"throw",e)}s(void 0)})}}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function r(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(r=function(){return!!e})()}function o(e,t){return!t||"object"!=((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t;var n}function a(e,t,n){return t=i(t),o(e,r()?Reflect.construct(t,n||[],i(e).constructor):t.apply(e,n))}function s(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):s(e,t)}function u(e,t){if(!s(e,t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function f(e,t,n){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n||e):o.value}},f(e,t,n||e)}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function v(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}c.r(e),c.d(e,{CreateCheckboxStateHandler:()=>ae,CreateComboBoxStateHandler:()=>ce,CreateDateFieldStateHandler:()=>oe,CreateImageButtonStateHandler:()=>ie,CreateListBoxStateHandler:()=>le,CreatePushButtonStateHandler:()=>ne,CreateRadioButtonStateHandler:()=>se,CreateSignatureStateHandler:()=>ue,CreateTextFieldStateHandler:()=>re});function b(e,t){var n,i,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}Object.create;function S(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}Object.create;"function"==typeof SuppressedError&&SuppressedError;var C=c(4616),_=(C.PDFUI,C.UIXAddon),w=C.SeniorComponentFactory,x=C.modular,k=(C.ServiceScope,C.Directive,C.Controller,C.Component,C.ContainerComponent,C.UIEvents,C.ScriptInputDialog,C.vendors),A=C.services.AlignmentService,T=C.controllers.StatefulController,E=C.PDFViewCtrl,F=(E.PDFViewer,E.ViewerEvents),D=(E.DeviceInfo,E.BrowserInfo,E.IStateHandler),P=E.ShapeControl,N=(E.AnnotComponent,E.keyboard),I=E.Consts,O=E.STATE_HANDLER_NAMES,U=E.shared,R=(U.Disposable,U.Store,U.ValueStore),L=(U.debounce,U.observeResize,U.throttle,U.Draggable,U.browser,U.DebounceAsyncTaskExecutor,U.ThrottleAsyncTaskExecutor),V=(U.QueuedAsyncTaskExecutor,U.BuiltinIntersectionObserver,U.download,E.form.FormDesignMode),M=E.PDF.form.FieldType,B=(E.PDF.form.constant.Field_Flag,E.PDF.constant.User_Permissions),H=E.PDF.annots.constant,W=H.Annot_Flags,j=H.Annot_Type,$=(E.Log.LoggerFactory,C.vendors.EventEmitter),z="form-designer-v2",G=c(4636),X=c.n(G),K=x.module("form-designer-v2",[]);function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}x.module("form-designer",[K]);var Y=c(732),Z=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"isAssistantEnabled",!1),q(e,"executor",new L(20,!0)),q(e,"eDesignerRect",document.createElement("div")),q(e,"suggestRectStore",new R),q(e,"available",new R(!1)),e}return m(t,e),p(t,[{key:"allInjected",value:function(){var e,t,i,r,o=this;this.eDesignerRect.classList.add("fv__form-designer-suggested-designer-rect");var a=this.pdfViewer.getFormFillerService(),s=-1,c=!1,l=function(){c=!0},u=function(){c=!1},d=function(){s=-1,o.removeDesignerRect()},p=function(e){var t=o.pdfViewer.getPDFDocRender().pagesRender.pageRenders;s=t.map(function(e){return e.$handler[0]}).indexOf(e.currentTarget)},f=function(e){c||o.executor.exec(function(){return n(function(){var t,n,i,r,o,c,l,u,d,p;return b(this,function(f){switch(f.label){case 0:return this.suggestRectStore.dispatch(void 0),this.isAssistantEnabled?-1===s?[2]:(n=e.offsetX,i=e.offsetY,r=this.pdfViewer.getPDFDocRender(),o=r.getPDFPageRender(s),(c=o.page).isDestroyed?[2]:(l=c.reverseDevicePoint([n,i],o.scale,o.rotate),[4,null===(t=a.formAPI)||void 0===t?void 0:t.getFieldAtPosition(s,{x:l[0],y:l[1]})])):[2];case 1:if(f.sent())return this.removeDesignerRect(),[2];f.label=2;case 2:return f.trys.push([2,4,,5]),[4,c.getSuggestedFormDesignerRect(l)];case 3:return u=f.sent(),-1===s?[2]:c.isDestroyed?[2]:(u?(this.suggestRectStore.dispatch(u),d=c.getDeviceRect(u,o.scale,o.rotate),this.renderSuggestdFormDesignerRect(o.$handler[0],d)):this.removeDesignerRect(),[3,5]);case 4:throw p=f.sent(),this.removeDesignerRect(),p;case 5:return[2]}})}).call(o)})};null===(e=this.pdfViewer.$ui)||void 0===e||e.on("mouseout",".fv__pdf-page-handler-container",d),null===(t=this.pdfViewer.$ui)||void 0===t||t.on("mousedown",".fv__pdf-page-handler-container",l),document.body.addEventListener("mouseup",u,{capture:!0}),null===(i=this.pdfViewer.$ui)||void 0===i||i.on("mousemove",".fv__pdf-page-handler-container",f),null===(r=this.pdfViewer.$ui)||void 0===r||r.on("mouseover",".fv__pdf-page-handler-container",p),this.addDestroyHook(this.onAssistantStatusChange(function(e){o.isAssistantEnabled=e}),function(){var e,t,n,i;null===(e=o.pdfViewer.$ui)||void 0===e||e.off("mouseout",".fv__pdf-page-handler-container",d),null===(t=o.pdfViewer.$ui)||void 0===t||t.off("mousemove",".fv__pdf-page-handler-container",f),null===(n=o.pdfViewer.$ui)||void 0===n||n.off("mouseover",".fv__pdf-page-handler-container",p),null===(i=o.pdfViewer.$ui)||void 0===i||i.off("mousedown",".fv__pdf-page-handler-container",l),document.body.removeEventListener("mouseup",u,{capture:!0})},a.onDesignModeChange(function(e){switch(e){case V.NONE:case V.ALL_WIDGET_TYPES:o.pdfViewer.stopFormDesginerAssist(),o.available.dispatch(!1);break;default:o.pdfViewer.startFormDesginerAssist(),o.available.dispatch(!0)}}))}},{key:"onAvailableChange",value:function(e){return this.available.subscribe(e)}},{key:"onAssistantStatusChange",value:function(e){return this.pdfViewer.addEventListener(F.designerAssistantStatusChanged,function(t){e(t)})}},{key:"renderSuggestdFormDesignerRect",value:function(e,t){this.eDesignerRect.style.cssText+="\n            left: ".concat(t.left,"px;\n            top: ").concat(t.top,"px;\n            width: ").concat(t.right-t.left,"px;\n            height: ").concat(t.bottom-t.top,"px;\n        "),this.eDesignerRect.parentElement!==e&&e.append(this.eDesignerRect)}},{key:"removeDesignerRect",value:function(){this.eDesignerRect.remove()}},{key:"onSuggestRectChange",value:function(e){return this.suggestRectStore.subscribe(e)}},{key:"getCurrentSuggestRect",value:function(){return n(function(){return b(this,function(e){switch(e.label){case 0:return[4,this.executor.waitForLastTask(null)];case 1:return e.sent(),[2,this.suggestRectStore.getCurrentValue()]}})}).call(this)}}],[{key:"inject",value:function(){return{pdfViewer:"PDFViewer"}}}]),t}(Y.Disposable),J=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"init",value:function(){f(i(t.prototype),"init",this).call(this),this.taskExecutor=new C.PDFViewCtrl.shared.QueuedAsyncTaskExecutor,this.isAssistantEnabled=!1}},{key:"onclick",value:function(){var e=this,t=this.getPDFUI();this.taskExecutor.exec(function(){return e.isAssistantEnabled?t.stopFormDesginerAssist():t.startFormDesginerAssist()})}},{key:"mounted",value:function(){var e=this,r=this,o=function(){return f(i(t.prototype),"mounted",e)};return n(function(){var e;return b(this,function(t){return e=this,o().call(r),this.lock(),this.addDestroyHook(this.service.onAssistantStatusChange(function(t){e.isAssistantEnabled=t,t?e.active():e.deactive()}),this.service.onAvailableChange(function(t){t?e.unlock():e.lock()})),[2]})}).call(this)}}],[{key:"getName",value:function(){return"assistant-button"}},{key:"inject",value:function(){return{service:Z}}}]),t}(C.SeniorComponentFactory.createSuperClass({template:'\n        <ribbon-button\n            text="form-designer:assistant.button-text" \n            icon-class="fv__icon-toolbar-designer-assistant"\n            name="form-assistant-button"\n            @tooltip \n            tooltip-title="form-designer:assistant.button-tooltip"\n            @on.click="$component.onclick()"\n        ></ribbon-button>\n    '}));K.registerComponent(J);var Q=c(6399),ee=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"currentWidgetStore",new R),q(e,"isCreated",!1),e}return m(t,e),p(t,[{key:"allInjected",value:function(){var e=this,t=this.pdfViewer.getFormFillerService();this.addDestroyHook(this.pdfViewer.addEventListener(F.activeElementChanged,function(){var t=e.currentWidgetStore.getCurrentValue();t&&(e.pdfViewer.getAllActivatedElements().find(function(e){return e.annot===t})||e.cleanup())}),this.pdfViewer.addEventListener(F.unActiveAnnotation,function(t){e.getCurrentNewlyWidget()===t.annot&&e.cleanup()}),t.onDesignModeChange(function(t){e.isCreated=!1}))}},{key:"beforeCreating",value:function(){this.isCreated=!0}},{key:"setCurrentNewlyWidget",value:function(e){return n(function(){return b(this,function(t){switch(t.label){case 0:return this.currentWidgetStore.dispatch(e),[4,this.pdfui.getRootComponent()];case 1:return t.sent().querySelector("fv--simple-form-properties-dialog"),[2]}})}).call(this)}},{key:"cleanup",value:function(){this.setCurrentNewlyWidget()}},{key:"onCreateWidget",value:function(e){var t=function(t){return t&&e(t)};return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.currentWidgetStore.subscribeOnce(t):this.currentWidgetStore.subscribe(t)}},{key:"onCleanupNewlyWidget",value:function(e){return this.currentWidgetStore.subscribe(function(t){return!t&&e()})}},{key:"getCurrentNewlyWidget",value:function(){return this.currentWidgetStore.getCurrentValue()}},{key:"checkCreateWidgetContinuously",value:function(){if(this.isDestroyed)return!1;if(!this.isCreated)return!0;var e=this.pdfViewer.isFormCreationContinuously();return e||this.pdfViewer.getStateHandlerManager().switchToDefault(),e}}],[{key:"inject",value:function(){return{pdfui:"PDFUI",pdfViewer:"PDFViewer"}}}]),t}(Y.Disposable),te=function(e){function t(e){var n;return u(this,t),q(n=a(this,t,[e]),"pdfViewer",void 0),q(n,"cursorStyle",void 0),q(n,"assistantService",void 0),q(n,"delegateEventService",void 0),q(n,"createFormWidgetService",void 0),q(n,"startPoint",void 0),q(n,"lastMoveToPoint",void 0),q(n,"shapeControl",void 0),q(n,"disposor",void 0),q(n,"form",void 0),n.pdfViewer=e,n.cursorStyle="fv__cursor-crosshair",n.disposor=new Y.Disposable,n.assistantService=e.ioc.getInstanceByClass(Z),n.delegateEventService=e.ioc.getInstanceByClass(Q.DelegateEventService),n.createFormWidgetService=n.pdfViewer.getIoC().getInstanceByClass(ee),n}return m(t,e),p(t,[{key:"pageHandler",value:function(e){var t=this;this.pageRender=e;var i=e.$handler.get(0);i.classList.add(this.cursorStyle);var r=new Hammer.Manager(i);this.hammer=r,this.form=e.getPDFDoc().getPDFForm();var o=!1;this.disposor.addDestroyHook(this.delegateEventService.delegate(e.$ui[0],"pointermove",function(e){o||(t.isMouseOverEditableWidget(e.clientX,e.clientY)?i.style.pointerEvents="none":i.style.pointerEvents="")}),this.delegateEventService.delegate(document.body,"pointerup",function(e){o=!1}),this.delegateEventService.delegate(i,"pointerdown",function(e){o=!0,t.isMouseOverEditableWidget(e.clientX,e.clientY)||t.checkCreateWidgetContinuously()})),r.add(new Hammer.Pan({direction:Hammer.DIRECTION_ALL})),r.add(new Hammer.Tap),r.on("tap",function(e){return n(function(){var t,n,i;return b(this,function(r){switch(r.label){case 0:return this.isMouseOverEditableWidget(e.center.x,e.center.y)?[2]:this.checkCreateWidgetContinuously()?[4,this.assistantService.getCurrentSuggestRect()]:[2];case 1:return(t=r.sent())?(n=t.right-t.left,i=t.top-t.bottom,n*i===0||(this.assistantService.removeDesignerRect(),this.create(t)),[2]):[2]}})}).call(t)}),r.on("panstart",function(n){if(!t.isMouseOverEditableWidget(n.center.x,n.center.y)&&t.checkCreateWidgetContinuously()){var i=(0,Y.getClientX)(n.srcEvent)-n.deltaX,r=(0,Y.getClientY)(n.srcEvent)-n.deltaY,o=e.$ui[0].getBoundingClientRect(),a=i-o.left,s=r-o.top;t.startPoint={x:a,y:s};var c,l=y(e.page.reverseDevicePoint([a,s],e.scale,e.rotate),2),u=l[0],d=l[1],p=t.pdfViewer.getSnapGrid();p&&(c=e.formatGridOptions(p)),t.start({x:u,y:d},c)}}),r.on("panmove",function(e){var n=t.startPoint;if(n){var i=t.correctPosition({x:(n.x||0)+e.deltaX,y:(n.y||0)+e.deltaY}),r=t.lastMoveToPoint||{x:0,y:0},o=r.x,a=r.y;if(!(Math.abs(o-i.x)<Number.EPSILON&&Math.abs(a-i.y)<Number.EPSILON))return t.lastMoveToPoint=i,t.adjust(n,t.lastMoveToPoint,e.srcEvent.shiftKey)}}),r.on("panend",function(n){var i,r,o=null===(r=t.shapeControl)||void 0===r||null===(i=r.shape)||void 0===i?void 0:i.boundary;if(o){var a=e.page.reverseDeviceRect(o,e.scale,e.rotate);t.create(a)}}),r.on("pancancel",function(){var e;null===(e=t.shapeControl)||void 0===e||e.destroy(),t.shapeControl=void 0}),this.disposor.addDestroyHook(function(){return r.destroy()})}},{key:"correctPosition",value:function(e){var t=this.pageRender.getShowWidth(),n=this.pageRender.getShowHeight();return{x:Math.max(0,Math.min(t,e.x)),y:Math.max(0,Math.min(n,e.y))}}},{key:"start",value:function(e,t){this.shapeControl||(this.shapeControl=new E.ShapeControl({resizable:!1,enableDiagonally:!0}),this.shapeControl.active(this.pageRender.$handler,this.pageRender.$handler,{left:e.x,top:e.y,width:0,height:0})),this.shapeControl.setSnapGrid(t),this.shapeControl.ownsTo(this.disposor)}},{key:"adjust",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.shapeControl){var i=this.shapeControl,r=Math.min(e.x,t.x),o=Math.min(e.y,t.y),a=Math.abs(e.x-t.x),s=Math.abs(e.y-t.y);n&&(a=s=Math.min(a,s),t.x<e.x&&(r=e.x-a),t.y<e.y&&(o=e.y-s));var c={left:r,top:o,width:a=Math.max(a,1),height:s=Math.max(s,1)},l={left:r,top:o,right:r+a,bottom:o+s};l=i.getSnapMaxRect(l),c.width=l.right-l.left+2,c.height=l.bottom-l.top+2,c.top=l.top,c.left=l.left,i._applyAnnotBoundary(c),i.shape&&(i.shape.boundary=l,i.shape.shape=c),i._updatePreviewer()}}},{key:"docHandler",value:function(e){f(i(t.prototype),"docHandler",this).call(this,e),this.pdfViewer.getFormFillerService().setDesignMode(this.getDesignMode())}},{key:"create",value:function(e){var t=this;return this.createFormWidgetService.beforeCreating(),this.form?this.doCreate(e,this.pageRender.index,this.pageRender.rotate/90||0).then(function(e){var n=t.pageRender.getAnnotRender(e.getObjectNumber());n.component.toggleDesignMode(!0),t.pdfViewer.activateElement(n.component),t.createFormWidgetService.setCurrentNewlyWidget(e)}).finally(function(){var e;null===(e=t.shapeControl)||void 0===e||e.destroy(),t.shapeControl=void 0}):Promise.reject(new Error("Incorrect state, form is not defined!"))}},{key:"destroyPageHandler",value:function(){this.pageRender.$handler.removeClass(this.cursorStyle),this.disposor.destroy()}},{key:"destroyDocHandler",value:function(){this.pdfViewer.getFormFillerService().setDesignMode(V.NONE)}},{key:"out",value:function(){f(i(t.prototype),"out",this).call(this),this.destroyPageHandler()}},{key:"isMouseOverEditableWidget",value:function(e,t){return document.elementsFromPoint(e,t).some(function(e){return e.classList.contains("fv__ui-form-designer-editting-widget")})}},{key:"checkCreateWidgetContinuously",value:function(){return!this.disposor.isDestroyed&&this.createFormWidgetService.checkCreateWidgetContinuously()}}]),t}(D),ne=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"doCreate",value:function(e,t,i){return n(function(){return b(this,function(n){switch(n.label){case 0:return[4,this.form.createPushButton({pageIndex:t,pdfRect:e,rotate:i})];case 1:return[2,n.sent()]}})}).call(this)}},{key:"getDesignMode",value:function(){return V.PUSH_BUTTON_AND_IMAGE}}],[{key:"getStateName",value:function(){return O.STATE_HANDLER_CREATE_FIELD_PUSH_BUTTON}}]),t}(te),ie=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"doCreate",value:function(e,t,n){return this.form.createImageButton({pageIndex:t,pdfRect:e,imagePath:c(2493),rotate:n})}},{key:"getDesignMode",value:function(){return V.PUSH_BUTTON_AND_IMAGE}}],[{key:"getStateName",value:function(){return O.STATE_HANDLER_CREATE_FIELD_IMAGE}}]),t}(te),re=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"doCreate",value:function(e,t,n){return this.form.createTextField({pageIndex:t,pdfRect:e,rotate:n})}},{key:"getDesignMode",value:function(){return V.TEXT_AND_DATE}}],[{key:"getStateName",value:function(){return O.STATE_HANDLER_CREATE_FIELD_TEXT}}]),t}(te),oe=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"doCreate",value:function(e,t,i){return n(function(){return b(this,function(n){return[2,this.form.createDatetime({pageIndex:t,pdfRect:e,timeformat:"m/d/yyyy",rotate:i})]})}).call(this)}},{key:"getDesignMode",value:function(){return V.TEXT_AND_DATE}}],[{key:"getStateName",value:function(){return O.STATE_HANDLER_CREATE_FIELD_DATE}}]),t}(te),ae=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"doCreate",value:function(e,t,n){return this.form.createCheckbox({pageIndex:t,pdfRect:e,rotate:n,extra:{normalCaption:"4"}})}},{key:"getDesignMode",value:function(){return V.CHECK_BOX}}],[{key:"getStateName",value:function(){return O.STATE_HANDLER_CREATE_FIELD_CHECK_BOX}}]),t}(te),se=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"doCreate",value:function(e,t,n){return this.form.createRadioButton({pageIndex:t,pdfRect:e,rotate:n,extra:{normalCaption:"l"}})}},{key:"getDesignMode",value:function(){return V.RADIO_BUTTON}}],[{key:"getStateName",value:function(){return O.STATE_HANDLER_CREATE_RADIO_BUTTON}}]),t}(te),ce=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"doCreate",value:function(e,t,n){return this.form.createComboBox({pageIndex:t,pdfRect:e,rotate:n})}},{key:"getDesignMode",value:function(){return V.COMBO_BOX}}],[{key:"getStateName",value:function(){return O.STATE_HANDLER_CREATE_FIELD_COMBO_BOX}}]),t}(te),le=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"doCreate",value:function(e,t,n){return this.form.createListBox({pageIndex:t,pdfRect:e,rotate:n})}},{key:"getDesignMode",value:function(){return V.LIST_BOX}}],[{key:"getStateName",value:function(){return O.STATE_HANDLER_CREATE_FIELD_LIST_BOX}}]),t}(te),ue=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"doCreate",value:function(e,t,n){return this.form.createSignature({pageIndex:t,pdfRect:e,rotate:n})}},{key:"getDesignMode",value:function(){return V.SIGNATURE}}],[{key:"getStateName",value:function(){return O.STATE_HANDLER_CREATE_FIELD_SIGNATURE}}]),t}(te);function de(e,t){return function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"changePermission",value:function(e){var t=this;this.getPDFUI().getPDFDocRender().then(function(e){return e&&e.getUserPermission().getValue()}).then(function(n){var i=!e||e.isDestroyed,r=!i&&e.checkPermission(B.annotForm)&&e.checkPermission(B.modify),o=t.constructor.permission,a=e.canEditPdfa();!i&&n&o&&r&&!e.isStaticXFA()&&!e.isDynamicXFA()&&!a?t.component.unlock&&t.component.unlock():t.component.lock&&t.component.lock()})}}]),t}(T.ext(e,t))}var pe="CreateCheckBoxFieldController",fe=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,null,[{key:"getName",value:function(){return pe}}]),t}(de(ae,pe)),ge="CreateComboBoxFieldController",me=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,null,[{key:"getName",value:function(){return ge}}]),t}(de(ce,ge)),he="CreateDateFieldController",ve=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,null,[{key:"getName",value:function(){return he}}]),t}(de(oe,he)),ye="CreateImageFieldController",be=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,null,[{key:"getName",value:function(){return ye}}]),t}(de(ie,ye)),Se="CreateListBoxFieldController",Ce=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,null,[{key:"getName",value:function(){return Se}}]),t}(de(le,Se)),_e="CreatePushButtonFieldController",we=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,null,[{key:"getName",value:function(){return _e}}]),t}(de(ne,_e)),xe="CreateRadioButtonFieldController",ke=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,null,[{key:"getName",value:function(){return xe}}]),t}(de(se,xe)),Ae="CreateSignatureFieldController",Te=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,null,[{key:"getName",value:function(){return Ae}}]),t}(de(ue,Ae)),Ee="CreateTextFieldController";[fe,me,ve,be,Ce,we,ke,Te,function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,null,[{key:"getName",value:function(){return Ee}}]),t}(de(re,Ee))].forEach(function(e){return K.registerController(e)});var Fe=c(9963),De=c.n(Fe),Pe=c(8974),Ne=c.n(Pe),Ie=c(387),Oe=c.n(Ie),Ue=c(3728),Re=c.n(Ue),Le=c(2451),Ve=c.n(Le),Me=c(5925),Be=c.n(Me),He=c(4323),We=c.n(He),je=c(5410),$e=c.n(je),ze=c(9989),Ge=c.n(ze);K.registerPreConfiguredComponent("create-check-box-ribbon",{template:De()()}),K.registerPreConfiguredComponent("create-combo-box-ribbon",{template:Ne()()}),K.registerPreConfiguredComponent("create-date-ribbon",{template:Oe()()}),K.registerPreConfiguredComponent("create-image-ribbon",{template:Re()()}),K.registerPreConfiguredComponent("create-list-box-ribbon",{template:Ve()()}),K.registerPreConfiguredComponent("create-push-button-ribbon",{template:Be()()}),K.registerPreConfiguredComponent("create-radio-button-ribbon",{template:We()()}),K.registerPreConfiguredComponent("create-signature-ribbon",{template:$e()()}),K.registerPreConfiguredComponent("create-text-ribbon",{template:Ge()()});var Xe=c(6504),Ke=c.n(Xe);K.registerFragment("widget-contextmenu",{template:Ke()()});var qe=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this,r=this,o=function(){return f(i(t.prototype),"mounted",e)};return n(function(){var e,t;return b(this,function(n){return e=this,o().call(r),t=this.component.parent,this.addDestroyHook(this.getPDFUI().addViewerEventListener(F.activeElementChanged,function(){t.isVisible&&e.updateStatus()}),t.on("beforeshow",function(){e.updateStatus()})),[2]})}).call(this)}},{key:"updateStatus",value:function(){return n(function(){var e,t;return b(this,function(n){switch(n.label){case 0:return[4,this.containsNonWidget()];case 1:return e=n.sent(),[4,this.getSelectedWidgets()];case 2:return t=n.sent(),[4,this.visible(t,e)];case 3:return n.sent()?(this.component.show(),[4,this.available(t,e)]):(this.component.hide(),[2]);case 4:return n.sent()?this.component.enable():this.component.disable(),[2]}})}).call(this)}},{key:"getSelectedWidgets",value:function(){return n(function(){return b(this,function(e){switch(e.label){case 0:return[4,this.getPDFUI().getAllActivatedElements()];case 1:return[2,e.sent().filter(function(e){return!!e.annot&&"widget"===e.annot.getType()})]}})}).call(this)}},{key:"containsNonWidget",value:function(){return n(function(){return b(this,function(e){switch(e.label){case 0:return[4,this.getPDFUI().getAllActivatedElements()];case 1:return[2,e.sent().some(function(e){return!e.annot||e.annot.getType()!==j.widget})]}})}).call(this)}},{key:"visible",value:function(e,t){return n(function(){return b(this,function(n){return t?[2,!1]:[2,e.length>0]})})()}},{key:"available",value:function(e,t){return n(function(){var e;return b(this,function(t){switch(t.label){case 0:return[4,this.getPDFUI().getCurrentPDFDoc()];case 1:return(e=t.sent())?[2,e.checkPermission(32)]:[2,!1]}})}).call(this)}}]),t}(Q.Controller),Ye=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"handle",value:function(){return n(function(){var e;return b(this,function(t){switch(t.label){case 0:return[4,this.getSelectedWidgets()];case 1:return e=t.sent(),[2,Promise.all(e.map(function(e){return e.removeAnnot()}))]}})}).call(this)}},{key:"available",value:function(e,r){var o=this,a=this;return n(function(){return b(this,function(n){switch(n.label){case 0:return[4,f(i(t.prototype),"available",o).call(a,e,r)];case 1:return[2,n.sent()&&!e.some(function(e){return e.getAnnotFlag().checkLocked()})]}})})()}},{key:"visible",value:function(e){return n(function(){return b(this,function(e){return[2,!0]})})()}}],[{key:"getName",value:function(){return"DeleteWidgetController"}}]),t}(qe),Ze="contextmenu-item-delete-widget",Je={template:'<contextmenu-item @controller="form-designer-v2:DeleteWidgetController" name="fv--ui-contextmenu-item-delete-widget">contextmenu.annot.delete</contextmenu-item>'};K.registerFragment(Ze,Je),K.registerController(Ye);const Qe={contentUpdated:"content-updated",borderInfoUpdated:"borderInfo-updated",borderStyleUpdated:"borderStyle-updated",borderWidthUpdated:"borderWidth-updated",borderColorUpdated:"borderColor-updated",captionColorUpdated:"captionColor-updated",modifiedDateTimeUpdated:"modifiedDateTime-updated",uniqueIDUpdated:"uniqueID-updated",flagsUpdated:"flags-updated",rectUpdated:"rect-updated",innerRectUpdated:"innerRect-updated",iconNameUpdated:"iconName-updated",rotationUpdated:"rotation-updated",defaultAppearanceUpdated:"defaultAppearance-updated",calloutLineEndingStyleUpdated:"calloutLineEndingStyle-updated",calloutLinePointsUpdated:"calloutLinePoints-updated",fillColorUpdated:"fillColor-updated",textColorUpdated:"textColor-updated",alignmentUpdated:"alignment-updated",inkListUpdated:"inkList-updated",PointsUpdated:"points-updated",endPointUpdated:"endPoint-updated",startPointUpdated:"startPoint-updated",endingStyleUpdated:"endingStyle-updated",enableCaptionUpdated:"enableCaption-updated",leaderCaptionOffsetUpdated:"leaderCaptionOffset-updated",styleFillColorUpdated:"styleFillColor-updated",leaderLineLengthUpdated:"leaderLineLength-updated",leaderLineExtendUpdated:"leaderLineExtend-updated",leaderLineOffsetUpdated:"leaderLineOffset-updated",measureRatioUpdated:"measureRatio-updated",measureUnitUpdated:"measureUnit-updated",measureConversionFactorUpdated:"measureConversionFactor-updated",removeAction:"remove-action",actionDataUpdated:"actionData-updated",addAction:"add-action",moveAction:"move-action",actionOrderChanged:"action-order-changed",highlightingModeUpdated:"highlightingMode-updated",subjectUpdated:"subject-updated",titleUpdated:"title-updated",createDateTimeUpdated:"createDateTime-updated",opacityUpdated:"opacity-updated",borderOpacityUpdated:"borderOpacity-updated",fillOpacityUpdated:"fillOpacity-updated",intentUpdated:"intent-updated",vertexesUpdated:"vertexes-updated",applyFillColorUpdated:"applyFillColor-updated",overlayTextUpdated:"overlayText-updated",overlayTexAlignmentUpdated:"overlayTextAlignment-updated",repeatUpdated:"repeat-updated",autoFontSizeUpdated:"autoFontSize-updated",redactDefaultAppearanceUpdated:"redactDefaultAppearance-update",redactOpacityUpdated:"redactOpacity-updated",quadPointsUpdated:"quadPoints-updated",reviewStateUpdated:"review-state-updated",markedStateUpdated:"marked-state-updated",statesCleared:"state-cleared",replyAdded:"add-replies",richTextUpdated:"rich-text-updated",richTextRemoved:"rich-text-removed",addDictionary:"add-dictionary",imageUpdated:"image-updated",formFieldValueUpdated:"form-field-value",formFieldsMaxLengthUpdated:"maxLength",formFieldItemsUpdated:"setItems",formFieldIconUpdated:"icon",formFieldInsertedItem:"insertItemAt",formFieldExportValueUpdated:"form-field-export-value",formFieldMKPropertyUpdated:"form-field-mk-property",formFieldAlternateName:"form-field-alternate-name",formFieldMappingName:"form-field-mapping-name",formFieldActionUpdated:"form-field-action",formWidgetNormalCaptionUpdated:"form-widget-normal-caption-updated",formWidgetMKFillColorUpdated:"form-widget-mk-fill-color-updated",formWidgetMKBorderColorUpdated:"form-widget-mk-border-color-updated",formWidgetAlignmentUpdated:"form-widget-alignment-updated",formWidgetDirectionRTLUpdated:"form-widget-directionRTL-updated",formWidgetRotationUpdated:"form-widget-rotation-updated",formWidgetIconCaptionRelationUpdated:"form-widget-icon-caption-relation-updated",formWidgetHighlightingModeUpdated:"form-widget-highlighting-mode-updated",formWidgetCaptionUpdated:"form-widget-caption-updated",formWidgetIconUpdated:"form-widget-icon-updated",formWidgetIconFitUpdated:"form-widget-icon-fit-updated",formWidgetExportValueUpdated:"form-widget-export-value-updated",pathUpdated:"annot-path-updated",cloudyApUpdated:"set-to-cemicircle-cloudy"};var et=c(515),tt=function(){function e(){u(this,e),q(this,"store",new Y.Store)}return p(e,[{key:"getOptions",value:function(e,t){return this.store.has(e)?this.store.getCurrentValue(e,t):_.getAddonInfoByName(z).options[e]||t}},{key:"subscribeOptions",value:function(e,t){if(!this.store.has(e)){var n=_.getAddonInfoByName(z).options[e];this.store.dispatch(e,n)}return this.store.subscribe(e,t)}},{key:"updateOptions",value:function(e,t){this.store.dispatch(e,t)}}]),e}(),nt=function(){function e(){u(this,e),q(this,"eventEmitter",new $)}return p(e,[{key:"refresh",value:function(){this.eventEmitter.emit("refresh")}},{key:"onRefresh",value:function(e){var t=this;return this.eventEmitter.on("refresh",e),function(){t.eventEmitter.off("refresh",e)}}}]),e}(),it=Symbol("no-value-or-conflict"),rt=function(e){function t(e,n){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t){return e===t};return u(this,t),q(i=a(this,t),"propertyName",void 0),q(i,"mergerStratey",void 0),q(i,"comparator",void 0),q(i,"subProperties",void 0),q(i,"values",void 0),q(i,"normalValue",void 0),q(i,"_isVisible",void 0),q(i,"_isAvailable",void 0),q(i,"changeStore",void 0),q(i,"currentWaitingDefers",void 0),i.propertyName=e,i.mergerStratey=n,i.comparator=r,i.subProperties=new Set,i.normalValue=it,i._isVisible=!0,i._isAvailable=!1,i.changeStore=new Y.ValueStore,i.currentWaitingDefers=new Set,i.addDestroyHook(function(){i.subProperties.clear(),i.changeStore.destroy()}),i}return m(t,e),p(t,[{key:"hasValue",get:function(){return this.normalValue!=it}},{key:"value",get:function(){return this.normalValue===it?void 0:this.normalValue}},{key:"visible",get:function(){return this._isVisible}},{key:"available",get:function(){return this._isAvailable}},{key:"appendSubProperty",value:function(e){var t=this;this.subProperties.has(e)||(this.subProperties.add(e),e.addDestroyHook(function(){t.subProperties.delete(e)}),this.currentWaitingDefers.size>0&&this.currentWaitingDefers.forEach(function(t){e.defer.promise.then(t.resolve,t.reject)}))}},{key:"waitUntilSomeSubPropertyNotified",value:function(){var e=this;if(0===this.subProperties.size)return Promise.resolve();var t=new Y.Defer;return this.currentWaitingDefers.add(t),Promise.race(Array.from(this.subProperties).map(function(e){return e.defer.promise}).concat(t.promise)).finally(function(){e.currentWaitingDefers.delete(t)})}},{key:"update",value:function(e,t){return n(function(){var n,i,r,o,a,s,c,l,u,d,p,f,g,m,h,v,y,S,C,_,w,x;return b(this,function(b){if(this.values=e,n=0===e.length,e.length>1){if(i=this.mergerStratey.multiple,r=i.available,o=i.supports,a=i.visible,!o)return this.normalValue=it,this._isAvailable=r,this._isVisible=a,this.dispatchChanges(),[2]}else if(n)return s=this.mergerStratey.empty,c=s.available,l=s.visible,this.normalValue=it,this._isAvailable=c,this._isVisible=l,this.dispatchChanges(),[2];if(u=t.map(function(e){return e.getType()}),(d=this.mergerStratey.unsupportFieldTypes.map(function(e){return M[e]}).filter(Boolean)).length>0&&u.findIndex(function(e){return d.indexOf(e)>-1})>-1)return this.normalValue=e.length>0?e[0]:it,this._isAvailable=!1,this._isVisible=!0,this.dispatchChanges(),[2];for(p=0,f=0;f<e.length;f++)for(g=e[f],m=f+1;m<e.length;m++)h=e[m],this.comparator(g,h)||p++;return p>0?(v=this.mergerStratey.conflict,y=v.available,S=v.visible,C=v.value,this._isAvailable=y,this._isVisible=S,"empty"===C&&(this.normalValue=it)):(_=this.mergerStratey.normal,w=_.available,x=_.visible,this._isAvailable=w,this._isVisible=x,this.normalValue=e.length>0?e[0]:it),this.dispatchChanges(),[2]})}).call(this)}},{key:"dispatchChanges",value:function(){this.changeStore.dispatch(this.normalValue)}},{key:"onChange",value:function(e){var t=this;return this.changeStore.subscribe(function(){e(t.hasValue,t.value)})}}],[{key:"default",value:function(){return new t("default",{conflict:{available:!1,visible:!0,value:"empty"},empty:{available:!1,visible:!0},multiple:{available:!1,visible:!0,supports:!1},normal:{available:!1,visible:!0},unsupported:{available:!1,visible:!0},unsupportFieldTypes:[]})}},{key:"observeProperties",value:function(e,t){var n=e.map(function(e){return e.onChange(function(){return t(e)})});return function(){n.forEach(function(e){return e()})}}}]),t}(Y.Disposable),ot=new Y.BuiltinIntersectionObserver(document.body),at=function(e){function t(e){var n;return u(this,t),q(n=a(this,t,[e.propertyName,e.mergerStratey,e.comparator]),"parent",void 0),q(n,"defer",void 0),n.parent=e,n.defer=new Y.Defer,e.appendSubProperty(n),n}return m(t,e),p(t,[{key:"hasValue",get:function(){return this.parent.hasValue}},{key:"value",get:function(){return this.parent.value}},{key:"visible",get:function(){return this.parent.visible}},{key:"available",get:function(){return this.parent.available}},{key:"update",value:function(e,t){return n(function(e,t){var n=arguments;return b(this,function(i){switch(i.label){case 0:return[4,(n.length>2&&void 0!==n[2]?n[2]:this.defer).promise];case 1:return i.sent(),[2,this.parent.update(e,t)]}})}).apply(this,arguments)}},{key:"onChange",value:function(e){var t=this.parent.onChange(e),n=this.addDestroyHook(t);return function(){n(),t()}}},{key:"awaitThat",value:function(e){this.defer=e}},{key:"notify",value:function(){this.defer.resolve()}},{key:"ownsTo",value:function(e){var n=this;if(s(e,Q.Component)){var r=!0;this.addDestroyHook(ot.observe(e.element,function(e,t){if(t)n.notify();else{if(r&&!n.defer.isSettled)return;n.awaitThat(new Y.Defer)}r=!1}))}return f(i(t.prototype),"ownsTo",this).call(this,e)}}]),t}(rt),st=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"intersectionObserver",new Y.BuiltinIntersectionObserver(document.body)),q(e,"activeWidgetsStore",new Y.ValueStore),q(e,"propertiesMap",new Map),q(e,"updators",new Map),e}return m(t,e),p(t,[{key:"allInjected",value:function(){var e=this;this.addDestroyHook(this.pdfViewer.addEventListener(F.activeElementChanged,(0,Y.debounce)(function(){e.updateActiveWidgets()})),this.configService.subscribeOptions("property-merger-resolutions",function(t){e.resolutions=t}),this.helperService.onRefresh(function(){e.updateActiveWidgets()})),this.resolutions=this.configService.getOptions("property-merger-resolutions"),this.updateActiveWidgets()}},{key:"updateActiveWidgets",value:function(){var e=this.pdfViewer.getAllActivatedElements().filter(function(e){if("isFormControl"in e)return e.isFormControl()});this.activeWidgetsStore.dispatch(e)}},{key:"observeWidgetSelectionChange",value:function(e){return this.activeWidgetsStore.subscribe(e)}},{key:"getSelectedWidgets",value:function(){return(this.activeWidgetsStore.getCurrentValue()||[]).map(function(e){return e.annot}).filter(Boolean)}},{key:"getSelectedFields",value:function(){var e=this.getSelectedWidgets();return Array.from(new Set(e.map(function(e){return e.getField()}).filter(Boolean)))}},{key:"forEachSelectedFields",value:function(e){return this.getSelectedFields().reduce(function(t,n){return t.finally(function(){return e(n)})},Promise.resolve())}},{key:"forEachSelectedWidgets",value:function(e){return this.getSelectedWidgets().reduce(function(t,n){return t.finally(function(){return e(n)})},Promise.resolve())}},{key:"observeWidgetPropertyChange",value:function(e,t){var n=this,i=this.activeWidgetsStore.subscribe(function(){t(n.getSelectedWidgets())}),r=Array.isArray(e),o=this.pdfViewer.addEventListener(F.annotationUpdated,function(i,o,a){if(a===e);else if(!(r&&e.indexOf(a)>-1))return;var s=n.getSelectedWidgets();-1!==s.indexOf(i[0])&&t(s)});return function(){i(),o()}}},{key:"getWidgetProperty",value:function(e,t,i,r){var o=this;if(!this.propertiesMap.has(e)){var a=this;this.createBaseProperty(e,function(){return n(function(){var e,t,n;return b(this,function(r){switch(r.label){case 0:return e=a.getSelectedWidgets(),t=a.getSelectedFields(),[4,Promise.all(e.map(function(e){return i(e)}))];case 1:return n=r.sent(),this.update(n,t),[2]}})}).call(this)},function(e){return o.observeWidgetPropertyChange(t,e)},r)}var s=this.propertiesMap.get(e);return this.createSubProperty(s)}},{key:"updateProperty",value:function(e){var t=this.updators.get(e);return t?t.call(e):Promise.resolve()}},{key:"observeFieldPropertyChange",value:function(e,t){var n=this,i=this.activeWidgetsStore.subscribe(function(){var e=n.getSelectedFields();t(e)}),r=this.pdfViewer.addEventListener(F.formFieldPropertyUpdated,function(i){var r=i.doc,o=i.fieldName;if(i.propertyName===e){var a=n.getSelectedFields();if(0!==a.length)a.some(function(e){return e.doc===r&&e.getName()===o})&&t(a);else t([])}});return function(){i(),r()}}},{key:"getFieldProperty",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;if(!this.propertiesMap.has(i)){var a=this;this.createBaseProperty(i,function(){return n(function(){var e,t;return b(this,function(n){switch(n.label){case 0:return e=a.getSelectedFields(),[4,Promise.all(e.map(function(e){return r(e)}))];case 1:return t=n.sent(),this.update(t,e),[2]}})}).call(this)},function(n){return t.observeFieldPropertyChange(e,n)},o)}var s=this.propertiesMap.get(i);return this.createSubProperty(s)}},{key:"isPropertyExists",value:function(e){return this.propertiesMap.has(e)}},{key:"getExistingProperty",value:function(e){return this.propertiesMap.get(e)}},{key:"createBaseProperty",value:function(e,t,i,r){var o=this,a=this.getMergerStrategy(e),s=new rt(e,a,r);return this.updators.set(s,t),s.addDestroyHook(i(function(){return n(function(){return b(this,function(e){switch(e.label){case 0:return[4,s.waitUntilSomeSubPropertyNotified()];case 1:return e.sent(),[2,t.call(s)]}})})()}),function(){o.updators.delete(s),o.propertiesMap.delete(e)}),this.propertiesMap.set(e,s),s}},{key:"createSubProperty",value:function(e){var t=this,n=new at(e),i=this.updators.get(e);return i&&(this.updators.set(n,i),n.addDestroyHook(function(){t.updators.delete(n)})),n}},{key:"getMergerStrategy",value:function(e){var t=this.resolutions.properties[e]||this.resolutions.default;return(0,Y.extendOptions)({},this.resolutions.default,t)}}],[{key:"inject",value:function(){return{pdfViewer:"PDFViewer",configService:tt,helperService:nt}}}]),t}(Y.Disposable),ct=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"observeFieldSelectionChange",value:function(e){var t=this;return this.activeWidgetsStore.subscribe(function(){return e(t.getSelectedFields())})}},{key:"getFieldName",value:function(){return this.getFieldProperty(et.FormFieldPropertyName.NAME,et.FormFieldPropertyName.NAME,function(e){return e.getName()})}},{key:"getAlternateName",value:function(){return this.getFieldProperty(et.FormFieldPropertyName.ALTERNATE_NAME,et.FormFieldPropertyName.ALTERNATE_NAME,function(e){return e.getAlternateName()})}},{key:"getVisibleType",value:function(){return this.getWidgetProperty("visibleType",Qe.flagsUpdated,function(e){var t=e.getFlags(),n=0!==(t&W.hidden),i=0!==(t&W.noView),r=0!==(t&W.print);return{hidden:n,noView:i,print:!(!n||r)||r}},function(e,t){return e===t||!!e&&!!t&&e.print===t.print&&e.noView===t.noView&&e.hidden===t.hidden})}},{key:"getWidgetOrientation",value:function(){return this.getWidgetProperty("widgetOrientation",Qe.formWidgetRotationUpdated,function(e){return n(function(){var t;return b(this,function(n){switch(n.label){case 0:return[4,e.getRotation()];case 1:return(t=n.sent())===et.FormWidgetRotation.UNKNOWN?[2,0]:[2,90*t]}})})()})}},{key:"getFieldRequiredProperty",value:function(){return this.getFieldProperty(et.FormFieldPropertyName.FLAGS,"fieldRequired",function(e){return e.isRequired()})}},{key:"getFieldReadonlyProperty",value:function(){return this.getFieldProperty(et.FormFieldPropertyName.FLAGS,"fieldReadonly",function(e){return e.isReadonly()})}},{key:"getWidgetBorderColor",value:function(){return this.getWidgetProperty("widgetMKBorderColor",Qe.formWidgetMKBorderColorUpdated,function(e){return e.getMKBorderColor()})}},{key:"getWidgetFillColor",value:function(){return this.getWidgetProperty("widgetMKFillColor",Qe.formWidgetMKFillColorUpdated,function(e){return e.getMKFillColor()})}},{key:"getWidgetBorderStyle",value:function(){return this.getWidgetProperty("widgetLineStyle",Qe.borderStyleUpdated,function(e){return e.getBorderStyle()})}},{key:"getWidgetBorderWidth",value:function(){return this.getWidgetProperty("widgetLineThickness",Qe.borderWidthUpdated,function(e){return e.getBorderWidth()})}},{key:"getWidgetFontName",value:function(){return this.getWidgetProperty("widgetFontName",Qe.defaultAppearanceUpdated,function(e){return e.getFontName()})}},{key:"getWidgetFont",value:function(){return this.getWidgetProperty("widgetFont",Qe.defaultAppearanceUpdated,function(e){return e.getFont()})}},{key:"getWidgetTextSize",value:function(){return this.getWidgetProperty("widgetTextSize",Qe.defaultAppearanceUpdated,function(e){return e.getTextSize()})}},{key:"getWidgetTextColor",value:function(){return this.getWidgetProperty("widgetTextColor",Qe.defaultAppearanceUpdated,function(e){return e.getTextColor()})}},{key:"getDirectionRTL",value:function(){return this.getWidgetProperty("widgetDirectionRTL",Qe.defaultAppearanceUpdated,function(e){return e.getDirectionRTL()})}},{key:"getRect",value:function(){return this.getWidgetProperty("widgetRect",Qe.rectUpdated,function(e){return e.getRect()})}},{key:"getFieldFlagOptions",value:function(){return this.getFieldProperty(et.FormFieldPropertyName.FLAGS,"fieldFlags",function(e){return e.describeFieldFlags()})}},{key:"getWidgetFlag",value:function(){return this.getWidgetProperty("widgetFlag",Qe.flagsUpdated,function(e){return e.getFlags()})}}]),t}(st),lt=c(7322),ut=c.n(lt),dt=w.createSuperClass({template:ut()()}),pt=new Map([[M.PushButton,"form-designer:dialog.pushButtonTitle"],[M.CheckBox,"form-designer:dialog.checkBoxTitle"],[M.RadioButton,"form-designer:dialog.radioButtonTitle"],[M.Text,"form-designer:dialog.textFieldTitle"],[M.ListBox,"form-designer:dialog.listBoxTitle"],[M.ComboBox,"form-designer:dialog.comboBoxTitle"],[M.Sign,"form-designer:dialog.signatureTitle"]]),ft=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"locked",!1),q(e,"noFieldsSelected",!0),q(e,"dialogTitle","form-designer:dialog.multipleSelectedTitle"),q(e,"_applied",!1),e}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.addDestroyHook(this.pdfViewer.addEventListener(F.willCloseDocument,function(){e.hide()}),this.pdfViewer.addEventListener(F.switchStateHandler,function(t){var n=PDFViewCtrl.STATE_HANDLER_NAMES;["SelectAnnotationStateHandler",n.STATE_HANDLER_CREATE_FIELD_TEXT,n.STATE_HANDLER_CREATE_FIELD_SIGNATURE,n.STATE_HANDLER_CREATE_FIELD_PUSH_BUTTON,n.STATE_HANDLER_CREATE_FIELD_CHECK_BOX,n.STATE_HANDLER_CREATE_RADIO_BUTTON,n.STATE_HANDLER_CREATE_FIELD_COMBO_BOX,n.STATE_HANDLER_CREATE_FIELD_LIST_BOX,n.STATE_HANDLER_CREATE_FIELD_DATE,n.STATE_HANDLER_CREATE_FIELD_IMAGE].includes(t.name)||e.hide()}),this.formPropertiesService.observeFieldSelectionChange(function(t){e.noFieldsSelected=0===t.length,e.dialogTitle="form-designer:dialog.multipleSelectedTitle";var n=new Set(t.map(function(e){return e.getType()}));if(1===n.size){var i=n.values().next().value;e.dialogTitle=pt.get(i)||"form-designer:dialog.multipleSelectedTitle"}if(t.length>0){var r=e.querySelectorAll("@gtab");r.length>0&&!r.find(function(e){return e.isActive})&&r[0].active()}e.isVisible?e.digest():e._applied=!1}))}},{key:"doShown",value:function(){f(i(t.prototype),"doShown",this).call(this),this.helperService.refresh(),this._applied||this.digest()}},{key:"digest",value:function(e){return this._applied=!0,f(i(t.prototype),"digest",this).call(this,e)}}],[{key:"getName",value:function(){return"widget-properties-dialog"}},{key:"inject",value:function(){return{formPropertiesService:ct,helperService:nt,pdfViewer:"PDFViewer"}}}]),t}(dt);function gt(e){return function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"property",rt.default()),e}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.property=this.getProperty(),this.property.ownsTo(this),this.onPropertyChange(this.property),this.property.onChange(function(){e.onPropertyChange(e.property),e.digest()})}},{key:"getProperty",value:function(){return rt.default()}},{key:"onPropertyChange",value:function(e){}}],[{key:"inject",value:function(){return{formPropertiesService:ct,configService:tt}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:e}))}K.registerComponent(ft);var mt=c(7389),ht=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"getProperty",value:function(){return this.formPropertiesService.getAlternateName()}},{key:"handleUserInputChange",value:function(e){this.formPropertiesService.getSelectedFields().forEach(function(t){return t.setAlternateName(e)})}}],[{key:"getName",value:function(){return"field-alternate-name-editor"}}]),t}(gt(c.n(mt)()())),vt=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"getProperty",value:function(){return this.formPropertiesService.getWidgetBorderColor()}},{key:"onUserChangedColor",value:function(e){return this.formPropertiesService.getSelectedWidgets().reduce(function(t,i){return n(function(){var n;return b(this,function(r){switch(r.label){case 0:return[4,t];case 1:return r.sent(),0===e?[2,i.setMKBorderColor(void 0)]:(n=(0,Y.colorConvertor)(e,"int"),[2,i.setMKBorderColor(n)])}})})()},Promise.resolve())}},{key:"onPropertyChange",value:function(e){e.hasValue&&void 0!==e.value?this.setValue((0,Y.colorConvertor)(e.value||0,"#")):this.setValue(void 0)}}],[{key:"getName",value:function(){return"widget-border-color-picker"}}]),t}(gt('\n    <color-picker-button \n        @on.change="$component.onUserChangedColor($args[0])"\n        @form-designer-v2:form-property="$component.property"\n    ></color-picker-button>\n')),yt=c(4538),bt=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){if(f(i(t.prototype),"mounted",this).call(this),!this.options||!this.options.length){var e=_.getAddonInfoByName(z).options["widget-visible-type-options"];this.setOptions(e),this.setValue(e[0])}}},{key:"getProperty",value:function(){return this.formPropertiesService.getVisibleType()}},{key:"onUserChangeVisibleType",value:function(e){return this.formPropertiesService.getSelectedWidgets().reduce(function(t,i){return n(function(){var n;return b(this,function(r){switch(r.label){case 0:return[4,t];case 1:return r.sent(),n=i.getFlags(),n&=~W.hidden,n&=~W.print,n&=~W.noView,e.hidden&&(n|=W.hidden),e.print&&(n|=W.print),e.noView&&(n|=W.noView),[4,i.setFlags(n,!1)];case 2:return r.sent(),[2]}})})()},Promise.resolve())}},{key:"onPropertyChange",value:function(e){if(e.hasValue&&e.value){var t=e.value,n=t.hidden,i=t.print,r=t.noView,o=this.options.find(function(e){var t=e.id;return t.print===i&&t.hidden===n&&t.noView===r});this.setValue(o)}else this.setValue(null)}}],[{key:"getName",value:function(){return"widget-visible-type-selector"}}]),t}(gt(c.n(yt)()()));function St(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){q(e,t,n[t])})}return e}function Ct(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function _t(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var wt=c(44),xt=c.n(wt),kt=C.vendors,At=(C.PDFUI,C.UIXAddon,C.SeniorComponentFactory,C.modular,C.Controller,kt.jQuery,kt.Hammer,C.services.StampStorageService,C.PDFViewCtrl),Tt=(At.storage.StorageFeature,At.shared),Et=At.PDF,Ft=At._internal,Dt=(At.PDFViewer,Tt.extendOptions,Tt.colorConvertor,At.commons.createDeferred,At.FontUtil.FontFamilies,At.Consts.CUSTOM_STAMPS_LOCALKEY,Et.constant.STAMP_TEXT_TYPE,Ft.consts.ADD_FONT_MAP_LIST),Pt=(At.DeviceInfo.isDesktop,At.keyboard.KeyboardUtils),Nt=(Pt.isMatch,Pt.matchers.Enter,gt(xt()())),It=C.shared.StandardFonts,Ot=C.shared.AdditionalFamilies,Ut=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"stdFontOption",It.map(function(e){return{id:e.value,text:e.name}})),q(e,"externalFontOption",Ot.map(function(e){return{id:e.name,text:e.name}})),q(e,"customFontOption",[]),q(e,"localFontOption",[]),q(e,"_localFamilies",[]),e}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.updateFontLocalFamily(),this.updateOptions(),this.addDestroyHook(this.pdfViewer.addEventListener(F.localFontLoaded,function(){e.updateFontLocalFamily(),e.updateOptions()}),this.pdfViewer.getStore().subscribe(Dt,function(t){var n,i,r=null!==(i=null==t||null===(n=t.all)||void 0===n?void 0:n.map(function(e){return{id:e.name,text:e.name}}))&&void 0!==i?i:[];e.customFontOption=r,e.updateOptions()}))}},{key:"updateFontLocalFamily",value:function(){var e=this.getLocalFamilies();this.localFontOption=e.map(function(e){return{id:e.name,text:e.name}})}},{key:"getLocalFamilies",value:function(){var e=this.pdfViewer._localFontDatas||[];return this._localFamilies&&this._localFamilies.length?this._localFamilies:this._localFamilies=e.map(function(e){return{family:e.family,name:e.fullName}}).filter(function(e){return!It.find(function(t){return t.value===e.family})})}},{key:"updateOptions",value:function(){var e=_t(this.stdFontOption).concat(_t(_t(this.externalFontOption).concat(_t(this.localFontOption),_t(this.customFontOption)).sort(function(e,t){return e.text>t.text?1:-1}))),t=new Map;e.forEach(function(e){t.has(e.id)&&t.delete(e.id),t.set(e.id,e)}),this.setOptions(Array.from(t.values()))}},{key:"getProperty",value:function(){return this.formPropertiesService.getWidgetFont()}},{key:"onPropertyChange",value:function(e){if(e.hasValue){this.enable();var t=e.value,n=this.options.find(function(e){var n,i,r,o;return(null===(n=e.id)||void 0===n?void 0:n.toLowerCase())===(null==t||null===(i=t.baseName)||void 0===i?void 0:i.toLowerCase())||(null===(r=e.id)||void 0===r?void 0:r.toLowerCase())===(null==t||null===(o=t.fullName)||void 0===o?void 0:o.toLowerCase())});this.setValue(n||"Helvetica")}else this.disable(),this.setValue(void 0)}},{key:"onUserSelectFont",value:function(e){return this.formPropertiesService.forEachSelectedWidgets(function(t){return t.setDefaultAppearance({fontName:e})})}}],[{key:"getName",value:function(){return"widget-font-selector"}},{key:"inject",value:function(){return Ct(St({},Nt.inject()),{pdfViewer:"PDFViewer"})}}]),t}(Nt),Rt=c(4801),Lt=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"getProperty",value:function(){return this.formPropertiesService.getFieldName()}},{key:"handleUserInputChange",value:function(e){return n(function(){var t,n,i,r,o,a,s,c,l,u;return b(this,function(d){switch(d.label){case 0:t=this.formPropertiesService.getSelectedWidgets(),n=!0,i=!1,r=void 0,d.label=1;case 1:d.trys.push([1,7,8,9]),o=t[Symbol.iterator](),d.label=2;case 2:return(n=(a=o.next()).done)?[3,6]:[4,a.value.getField()];case 3:return(s=d.sent())?(c=s.getName(),[4,s.setName(e)]):[3,5];case 4:if(-1===(l=d.sent()))return this.setValue(c),this.pdfUI.alert("dialog.error.validateFieldNameError"),[3,6];if(-2===l)return this.setValue(c),this.pdfUI.alert("dialog.error.renameFieldError"),[3,6];d.label=5;case 5:return n=!0,[3,2];case 6:return[3,9];case 7:return u=d.sent(),i=!0,r=u,[3,9];case 8:try{n||null==o.return||o.return()}finally{if(i)throw r}return[7];case 9:return[2]}})}).call(this)}},{key:"onPropertyChange",value:function(e){var t=e.value||"";this.setValue(t)}}],[{key:"getName",value:function(){return"field-name-editor"}}]),t}(gt(c.n(Rt)()())),Vt=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"getProperty",value:function(){return this.formPropertiesService.getWidgetFillColor()}},{key:"onUserChangedColor",value:function(e){return this.formPropertiesService.getSelectedWidgets().reduce(function(t,i){return n(function(){return b(this,function(n){switch(n.label){case 0:return[4,t];case 1:return n.sent(),0===e?[2,i.setMKFillColor(void 0)]:[2,i.setMKFillColor((0,Y.colorConvertor)(e,"int"))]}})})()},Promise.resolve())}},{key:"onPropertyChange",value:function(e){e.hasValue&&e.value?this.setValue((0,Y.colorConvertor)(e.value,"#")):this.setValue(void 0)}}],[{key:"getName",value:function(){return"widget-fill-color-picker"}}]),t}(gt('\n    <color-picker-button\n        @on.change="$component.onUserChangedColor($args[0])"\n        @form-designer-v2:form-property="$component.property"\n    ></color-picker-button>\n')),Mt=c(6588),Bt=gt(c.n(Mt)()()),Ht=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.addDestroyHook(this.configService.subscribeOptions("widget-font-size-options",function(t){e.setOptions(t)}),this.delegateEventService.delegate(this.editElement,"beforeinput",function(e){"insertText"===e.inputType&&e.data&&/\D$/.test(e.data)&&e.preventDefault()}))}},{key:"getProperty",value:function(){return this.formPropertiesService.getWidgetTextSize()}},{key:"onPropertyChange",value:function(e){if(e.hasValue){var t=this.options.find(function(t){return t.id===e.value})||this.options[0];this.setValue(t),this.editElement.value=null==t?void 0:t.text}else this.setValue(void 0),this.editElement.value="auto"}},{key:"onUserSelectTextSize",value:function(e){var t=0;return t="auto"===e?0:"string"==typeof e?parseFloat(e):e,isFinite(t)?this.formPropertiesService.forEachSelectedWidgets(function(e){return e.setDefaultAppearance({textSize:t})}):(this.setValue(this.options[0]),void(this.editElement.value="auto"))}}],[{key:"getName",value:function(){return"widget-text-size-selector"}},{key:"inject",value:function(){return Ct(St({},Bt.inject()),{delegateEventService:Q.DelegateEventService})}}]),t}(Bt),Wt=c(6861),jt=c.n(Wt);var $t=0,zt=1,Gt=2,Xt=3,Kt=4,qt={0:"None",1:"Square",2:"Circle",3:"Diamond",4:"OpenArrow",5:"ClosedArrow",6:"Butt",7:"ROpenArrow",8:"RClosedArrow",9:"Slash"},Yt=(Object.keys(qt).reduce(function(e,t){return e[qt[t]]=Number(t),e},{}),Promise.resolve(),gt(jt()())),Zt=new Map([[$t,"solid"],[zt,"dashed"],[Gt,"underline"],[Xt,"beveled"],[Kt,"inset"]]),Jt=new Map;Zt.forEach(function(e,t){Jt.set(e,t)});var Qt=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.addDestroyHook(this.configService.subscribeOptions("widget-line-style-options",function(t){e.setOptions(t)}))}},{key:"getProperty",value:function(){return this.formPropertiesService.getWidgetBorderStyle()}},{key:"onPropertyChange",value:function(e){e.hasValue&&void 0!==e.value&&Zt.has(e.value)?this.setValue(Zt.get(e.value)):this.setValue(void 0)}},{key:"onUseSelectLineStyle",value:function(e){var t=this.options.find(function(t){return t.id===e});if(t)return this.formPropertiesService.forEachSelectedWidgets(function(n){if(Jt.has(e)){var i=Jt.get(e);return n.setBorderStyle(i,t.params)}})}}],[{key:"getName",value:function(){return"widget-line-style-selector"}}]),t}(Yt),en=c(7214),tn=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.addDestroyHook(this.configService.subscribeOptions("widget-line-thickness-options",function(t){e.setOptions(t)}))}},{key:"getProperty",value:function(){return this.formPropertiesService.getWidgetBorderWidth()}},{key:"onPropertyChange",value:function(e){if(e.hasValue&&void 0!==e.value){var t=this.options.find(function(t){return t.borderWidth===e.value});this.setValue(t)}else this.setValue(void 0)}},{key:"onUserSelectLineThickness",value:function(e){var t=this.options.find(function(t){return t.id===e});if(t)return this.formPropertiesService.forEachSelectedWidgets(function(e){return e.setBorderWidth(t.borderWidth)})}}],[{key:"getName",value:function(){return"widget-line-thickness-selector"}}]),t}(gt(c.n(en)()())),nn=c(5710),rn=gt(c.n(nn)()()),on=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.configService.subscribeOptions("field-orientation-options",function(t){e.setOptions(t),e.setValue(e.property.hasValue?e.property.value:0)})}},{key:"getProperty",value:function(){return this.formPropertiesService.getWidgetOrientation()}},{key:"onPropertyChange",value:function(e){this.setValue(e.value)}},{key:"onUserSelectOrientation",value:function(e){var t=0;switch(e){case 90:t=1;break;case 180:t=2;break;case 270:t=3}return this.formPropertiesService.forEachSelectedWidgets(function(e){return e.setRotation(t)})}}],[{key:"getName",value:function(){return"field-orientation-selector"}},{key:"inject",value:function(){return Ct(St({},rn.inject()),{configService:tt})}}]),t}(rn),an=c(1985),sn=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"unitOptionList",[]),q(e,"selectedUnit",void 0),q(e,"fixedSize",!1),q(e,"position",{}),e}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.addDestroyHook(this.configService.subscribeOptions("unit-list",function(t){e.unitOptionList=t,e.selectedUnit=t[0].id,e.digest()}))}},{key:"getProperty",value:function(){return this.formPropertiesService.getRect()}},{key:"onPropertyChange",value:function(e){var t=this,n=this.selectedUnit||Y.PDFUnit.Point;if(e.hasValue&&e.value){var i=e.value,r=i.left,o=i.top,a=i.right,s=i.bottom,c=new Y.PDFUnitNumber(r,Y.PDFUnit.Point).convert(n),l=new Y.PDFUnitNumber(o,Y.PDFUnit.Point).convert(n),u=new Y.PDFUnitNumber(a,Y.PDFUnit.Point).convert(n),d=new Y.PDFUnitNumber(s,Y.PDFUnit.Point).convert(n),p=u.minus(c),f=l.minus(d);this.position={left:c,top:l,right:u,bottom:d,width:p,height:f}}else{var g;this.position={};var m=null===(g=e.values)||void 0===g?void 0:g.filter(function(e){return e});if(null==m?void 0:m.length){var h=m.map(function(e){return Ct(St({},e),{width:e.right-e.left,height:e.top-e.bottom})}),v=function(e){var n=new Set(h.map(function(t){return t[e]}));1===n.size?t.position[e]=_t(n)[0]:delete t.position[e]};v("width"),v("height"),v("left"),v("right"),v("top"),v("bottom")}}this.digest()}},{key:"onUserChangeRect",value:function(e,t){var n=this,i=t.valueOfUnit(Y.PDFUnit.Point);return this.formPropertiesService.forEachSelectedWidgets(function(t){var r=t.getRect(),o=r.left,a=r.top,s=r.right,c=r.bottom;if("width"===e||"height"===e)switch(e){case"width":r.right=o+i;break;case"height":r.top=c+i}else if(r[e]=i,n.fixedSize){var l=s-o,u=a-c;switch(e){case"left":r.right=l+i;break;case"top":r.bottom=i-u;break;case"right":r.left=i-l;break;case"bottom":r.top=i+u}}return t.setRect(r)})}},{key:"onChangeUnit",value:function(e){for(var t in this.position){var n=this.position[t];s(n,Y.PDFUnitNumber)&&(this.position[t]=n.convert(e))}}}],[{key:"getName",value:function(){return"widget-position-properties"}}]),t}(gt(c.n(an)()())),cn=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"getProperty",value:function(){return this.formPropertiesService.getWidgetTextColor()}},{key:"onPropertyChange",value:function(e){e.hasValue&&void 0!==e.value?this.setValue((0,Y.colorConvertor)(e.value,"#")):this.setValue(void 0)}},{key:"onUserChangeTextColor",value:function(e){return this.formPropertiesService.forEachSelectedWidgets(function(t){return 0===e?t.setDefaultAppearance({textColor:0}):t.setDefaultAppearance({textColor:(0,Y.colorConvertor)(e,"int")})})}}],[{key:"getName",value:function(){return"widget-text-color-picker"}}]),t}(gt('\n    <color-picker-button\n        show-transparent="false"\n        @on.change="$component.onUserChangeTextColor($args[0])"\n        @form-designer-v2:form-property="$component.property"\n    ></color-picker-button>\n')),ln=c(989),un=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"textDirection",void 0),e}return m(t,e),p(t,[{key:"getProperty",value:function(){return this.formPropertiesService.getDirectionRTL()}},{key:"onPropertyChange",value:function(e){e.hasValue?this.textDirection=e.value:this.textDirection=void 0,this.digest()}},{key:"userChangeDirection",value:function(e){return this.formPropertiesService.forEachSelectedWidgets(function(t){return t.setDirectionRTL(e)})}}],[{key:"getName",value:function(){return"field-text-direction"}}]),t}(gt(c.n(ln)()())),dn=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"init",value:function(e){f(i(t.prototype),"init",this).call(this,e);var n=function(){};this.addDestroyHook(this.controller.watchImm(this.attrValue||"$component.property",function(t){if(t&&s(t,rt)){n();var i=e.getClosestComponentByType("form-group"),r=t.onChange(function(){var n=i||e;t.visible?n.removeCSSClass("fv__ui-force-hide"):n.addCSSClass("fv__ui-force-hide"),t.available?e.unlock():e.lock()});n=function(){r()}}}))}}],[{key:"getName",value:function(){return"form-property"}}]),t}(Q.Directive),pn=c(2227),fn=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"getProperty",value:function(){return this.formPropertiesService.getFieldReadonlyProperty()}},{key:"onPropertyChange",value:function(e){e.hasValue?this.setValue(e.value):this.setValue(!1)}},{key:"onUserChangeReadonlyState",value:function(e){return this.formPropertiesService.getSelectedFields().reduce(function(t,i){return n(function(){return b(this,function(n){switch(n.label){case 0:return[4,t];case 1:return n.sent(),[4,i.setReadonly(e)];case 2:return n.sent(),[2]}})})()},Promise.resolve())}}],[{key:"getName",value:function(){return"field-readonly-checkbox"}}]),t}(gt(c.n(pn)()())),gn=c(8409),mn=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"getProperty",value:function(){return this.formPropertiesService.getFieldRequiredProperty()}},{key:"onPropertyChange",value:function(e){e.hasValue?this.setValue(e.value):this.setValue(!1)}},{key:"onUserChangeRequiredState",value:function(e){return this.formPropertiesService.getSelectedFields().reduce(function(t,i){return n(function(){return b(this,function(n){switch(n.label){case 0:return[4,t];case 1:return n.sent(),[4,i.setRequired(e)];case 2:return n.sent(),[2]}})})()},Promise.resolve())}}],[{key:"getName",value:function(){return"field-required-checkbox"}}]),t}(gt(c.n(gn)()())),hn=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"init",value:function(e){f(i(t.prototype),"init",this).call(this,e);var n=this.modifiers.multiple,r=this.attrValue.split(/[,;\s]+/),o=0===r.length||r.indexOf("all")>-1,a=this.commonPropertiesService.observeFieldSelectionChange(function(t){if(0!==t.length){var i=!0;if(o)i=n?t.length>=1:1===t.length;else{var a=t.map(function(e){return et.FieldType[e.getType()]});i=n?a.some(function(e){return r.indexOf(e)>-1}):1===a.length&&r.indexOf(a[0])>-1}i?e.show():e.hide()}});this.addDestroyHook(a)}}],[{key:"getName",value:function(){return"accept-field-types"}},{key:"inject",value:function(){return{commonPropertiesService:ct}}}]),t}(Q.Directive);K.registerComponent(Lt),K.registerComponent(ht),K.registerComponent(bt),K.registerComponent(on),K.registerComponent(Qt),K.registerComponent(tn),K.registerComponent(Vt),K.registerComponent(vt),K.registerComponent(cn),K.registerComponent(un),K.registerComponent(Ut),K.registerComponent(Ht),K.registerComponent(sn),K.registerComponent(fn),K.registerComponent(mn),K.registerDirective(dn),K.registerDirective(hn);var vn=c(3431),yn=c.n(vn),bn=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"userSelectedGestureStateStore",new Y.ValueStore(et.WidgetGestureState.UP)),e}return m(t,e),p(t,[{key:"setUserSelectedWidgetGestureState",value:function(e){return this.userSelectedGestureStateStore.dispatch(e)}},{key:"getUserSelectedWidgetGestureState",value:function(){return this.userSelectedGestureStateStore.getCurrentValue()||et.WidgetGestureState.UP}},{key:"onUserSelectedWidgetGestureStateChange",value:function(e){return this.userSelectedGestureStateStore.subscribe(e)}},{key:"getIconCaptionRelation",value:function(){return this.getWidgetProperty("iconCaptionRelation",Qe.formWidgetIconCaptionRelationUpdated,function(e){return e.getIconCaptionRelation()})}},{key:"getHighlightingMode",value:function(){return this.getWidgetProperty("highlightingMode",Qe.formWidgetHighlightingModeUpdated,function(e){return e.getHighlightingMode()})}},{key:"getMKIconProperty",value:function(){var e=this,t=this.getWidgetProperty("MKIconOptions",Qe.formWidgetIconUpdated,function(t){return t.getMKIcon(e.getUserSelectedWidgetGestureState())});return t.addDestroyHook(this.onUserSelectedWidgetGestureStateChange(function(){return e.updateProperty(t)})),t}},{key:"getMKCaptionOptions",value:function(){return this.getWidgetProperty("MKCaptionOptions",Qe.formWidgetCaptionUpdated,function(e){return e.getMKCaptionOptions()})}},{key:"getIconFitOptions",value:function(){return this.getWidgetProperty("IconFitOptions",Qe.formWidgetIconFitUpdated,function(e){return e.getIconFitOptions()})}}]),t}(st),Sn=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"selectedPositions",[et.WidgetGestureState.UP]),q(e,"upStateOptions",[{id:et.WidgetGestureState.UP,text:"form-designer:dialog.options.pushButton.up"}]),q(e,"allOptions",[{id:et.WidgetGestureState.UP,text:"form-designer:dialog.options.pushButton.up"},{id:et.WidgetGestureState.DOWN,text:"form-designer:dialog.options.pushButton.down"},{id:et.WidgetGestureState.ROLLOVER,text:"form-designer:dialog.options.pushButton.rollover"}]),q(e,"options",e.allOptions),e}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this);var n=this.pushButtonPropertiesService.getHighlightingMode();n.ownsTo(this),n.onChange(function(t,n){if(t)if(n===et.HighlightingMode.PUSH)e.setOptions(e.allOptions);else e.setOptions(e.upStateOptions)})}},{key:"onUserSelected",value:function(e){this.pushButtonPropertiesService.setUserSelectedWidgetGestureState(e[0])}},{key:"setOptions",value:function(e){this.options=e,this.digest()}}],[{key:"getName",value:function(){return"push-button-icon-caption-position-selector"}},{key:"inject",value:function(){return{pushButtonPropertiesService:bn}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:yn()()})),Cn=c(3157),_n=c.n(Cn),wn=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"property",rt.default()),q(e,"options",[]),e}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.addDestroyHook(this.configService.subscribeOptions("highlighting-mode",function(t){e.options=t})),this.property=this.service.getHighlightingMode(),this.property.ownsTo(this),this.onPropertyChange(),this.property.onChange(function(){e.onPropertyChange(),e.digest()})}},{key:"onPropertyChange",value:function(){if(this.property.hasValue){this.enable();var e=this.property.value;this.setValue(e)}else this.setValue(void 0),this.disable()}},{key:"onUserChangeBehavior",value:function(e){return this.service.forEachSelectedWidgets(function(t){return t.setHighlightingMode(e)})}}],[{key:"getName",value:function(){return"push-button-behavior-selector"}},{key:"inject",value:function(){return{service:bn,configService:tt}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:_n()()})),xn=c(6390),kn=c.n(xn),An=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this);var r=this.service.getIconCaptionRelation();r.ownsTo(this),r.onChange(function(){r.value===et.WidgetIconCaptionRelation.NO_CAPTION?e.disable():e.enable()});var o=this.service.getMKCaptionOptions();o.ownsTo(this),this.captionOptionsChanged(o),o.onChange(function(){e.captionOptionsChanged(o)}),this.addDestroyHook(this.service.onUserSelectedWidgetGestureStateChange(function(){return n(function(){return b(this,function(e){switch(e.label){case 0:return this.gestureState?[2]:[4,this.service.updateProperty(o)];case 1:return e.sent(),this.captionOptionsChanged(o),[2]}})}).call(e)}))}},{key:"captionOptionsChanged",value:function(e){if(e.hasValue&&e.value){var t=this.gestureState||this.service.getUserSelectedWidgetGestureState(),n=e.value[t];this.setValue(n||"")}else this.setValue("")}},{key:"onUserChangeCaption",value:function(e){var t=this;return this.service.forEachSelectedWidgets(function(n){var i=t.gestureState||t.service.getUserSelectedWidgetGestureState();return n.setMKCaption(i,e)})}}],[{key:"getName",value:function(){return"push-button-caption-editor"}},{key:"inject",value:function(){return{service:bn}}},{key:"getMetadata",value:function(){return{options:{"gesture-state":{field:"gestureState",type:"enum",enums:[et.WidgetGestureState.UP,et.WidgetGestureState.DOWN,et.WidgetGestureState.ROLLOVER,void 0,"",null],defaultValue:void 0}}}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:kn()()})),Tn=c(1678),En=c.n(Tn),Fn=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"blankImageSrc","data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48L3N2Zz4="),q(e,"selectedImageURL",void 0),q(e,"iconCaptionRelationProperty",rt.default()),e}return m(t,e),p(t,[{key:"disableSelectButton",get:function(){return this.iconCaptionRelationProperty.value===et.WidgetIconCaptionRelation.NO_ICON}},{key:"disableClearButton",get:function(){return this.disableSelectButton||!this.selectedImageURL}},{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this);var r=this.iconCaptionRelationProperty=this.service.getIconCaptionRelation();r.ownsTo(this);var o=this.service.getMKIconProperty();o.ownsTo(this),r.onChange(function(){return n(function(){return b(this,function(e){switch(e.label){case 0:return r.value!==et.WidgetIconCaptionRelation.NO_ICON?[3,2]:[4,this.service.updateProperty(o)];case 1:e.sent(),e.label=2;case 2:return[2]}})}).call(e)}),this.addDestroyHook(function(){e.selectedImageURL&&URL.revokeObjectURL(e.selectedImageURL)}),o.onChange(function(){e.onPropertyChange(o)})}},{key:"onPropertyChange",value:function(e){var t=this,n=e.value;if(n){var i=n.data,r=window.Uint8ClampedArray?new Uint8ClampedArray(i):new Uint8Array(i),o=document.createElement("canvas");o.width=n.width,o.height=n.height;var a=o.getContext("2d"),s=a.createImageData(n.width,n.height);s.data.set(r,0),a.putImageData(s,0,0);var c=this.service.getUserSelectedWidgetGestureState();o.toBlob(function(e){var n=t.service.getUserSelectedWidgetGestureState();c===n&&t.setPreviewImageURL(e?URL.createObjectURL(e):void 0)},"image/png")}else this.selectedImageURL=void 0,this.digest()}},{key:"setPreviewImageURL",value:function(e){this.selectedImageURL&&URL.revokeObjectURL(this.selectedImageURL),this.selectedImageURL=e,this.digest()}},{key:"onUserSelectImage",value:function(e){var t=this;return this.setPreviewImageURL(URL.createObjectURL(e)),e.arrayBuffer().then(function(e){var n=t.service.getUserSelectedWidgetGestureState();return t.service.forEachSelectedWidgets(function(t){return t.setMKIcon(n,e)})})}},{key:"onUserClickClearButton",value:function(){if(this.selectedImageURL){this.setPreviewImageURL(void 0);var e=this.service.getUserSelectedWidgetGestureState();return this.service.forEachSelectedWidgets(function(t){return t.removeMKIcon(e)})}}}],[{key:"getName",value:function(){return"push-button-icon-editor"}},{key:"inject",value:function(){return{service:bn}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:En()()})),Dn=c(8204),Pn=c.n(Dn),Nn=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"property",rt.default()),q(e,"options",[]),e}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this,r=this,o=function(){return f(i(t.prototype),"mounted",e)};return n(function(){var e,t;return b(this,function(i){switch(i.label){case 0:return e=this,o().call(r),t=new Y.CountDownLatch(1),this.addDestroyHook(this.configService.subscribeOptions("icon-caption-relation",function(i){return n(function(){return b(this,function(e){switch(e.label){case 0:return this.options=i,[4,this.digest(!0)];case 1:return e.sent(),t.countDown(),[2]}})}).call(e)})),[4,t.await()];case 1:return i.sent(),this.property=this.service.getIconCaptionRelation(),this.property.ownsTo(this),this.onPropertyChange(),this.property.onChange(function(){e.onPropertyChange(),e.digest()}),[2]}})}).call(this)}},{key:"onPropertyChange",value:function(){if(this.property.hasValue){this.enable();var e=this.property.value;this.setValue(e)}else this.setValue(void 0),this.disable()}},{key:"onUserChangedLayout",value:function(e){return this.service.forEachSelectedWidgets(function(t){return t.setIconCaptionRelation(e)})}}],[{key:"getName",value:function(){return"push-button-layout-selector"}},{key:"inject",value:function(){return{service:bn,configService:tt}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:Pn()()})),In=c(1896),On=c.n(In),Un=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"targetDialogSelector","@form-designer-v2:icon-fit-dialog"),e}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this);var n=this.service.getIconCaptionRelation();n.ownsTo(this),n.onChange(function(){n.hasValue?n.value===et.WidgetIconCaptionRelation.NO_ICON?e.disable():e.enable():e.disable()})}},{key:"onClick",value:function(){return n(function(){var e,t,n,i,r;return b(this,function(o){switch(o.label){case 0:if(e=this.getRoot(),!(t=e.querySelector(this.targetDialogSelector)))throw new Error('Cannot open icon-fit dialog, the dialog is not found for this selector: "'.concat(this.targetDialogSelector,'"'));return 1!==(n=this.service.getSelectedWidgets()).length?[2]:[4,(i=n[0]).getIconFitOptions()];case 1:return r=o.sent(),t.setIconFitOptions(r),t.open(void 0,{ok:function(e){return i.setIconFitOptions(e)}}),[2]}})}).call(this)}}],[{key:"getName",value:function(){return"push-button-show-icon-fit-dialog-button"}},{key:"inject",value:function(){return{service:bn}}},{key:"getMetadata",value:function(){return{options:{"target-dialog":{field:"targetDialogSelector",type:"string"}}}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:On()()}));K.registerComponent(Nn),K.registerComponent(Un),K.registerComponent(wn),K.registerComponent(An),K.registerComponent(Sn),K.registerComponent(Fn);var Rn=c(202),Ln=c.n(Rn),Vn=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"getAlignment",value:function(){return this.getWidgetProperty("textFieldAlignment",Qe.formWidgetAlignmentUpdated,function(e){return e.getAlignment()})}},{key:"getDefaultValue",value:function(){return this.getFieldProperty(et.FormFieldPropertyName.DEFAULT_VALUE,"fieldDefaultValue",function(e){return e.getDefaultValue()})}},{key:"getFieldFlagOptions",value:function(){return this.commonPropertiesService.getFieldFlagOptions()}},{key:"getMaxLengthProperty",value:function(){return this.getFieldProperty(et.FormFieldPropertyName.MAX_LENGTH,"fieldMaxLength",function(e){return e.getMaxLength()})}}],[{key:"inject",value:function(){return Ct(St({},st.inject()),{commonPropertiesService:ct})}}]),t}(st),Mn=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"property",rt.default()),q(e,"options",[]),e}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.addDestroyHook(this.configService.subscribeOptions("alignment-list",function(t){e.options=t})),this.property=this.textFieldPropertiesService.getAlignment(),this.property.ownsTo(this),this.onPropertyChange(),this.property.onChange(function(){e.onPropertyChange(),e.digest()})}},{key:"onPropertyChange",value:function(){var e=this.property;e.hasValue&&void 0!==e.value?(this.enable(),this.setValue(e.value)):(this.setValue(void 0),this.disable())}},{key:"onUserChangeAlignment",value:function(e){return this.textFieldPropertiesService.forEachSelectedWidgets(function(t){return t.setAlignment(e)})}}],[{key:"getName",value:function(){return"text-field-alignment-selector"}},{key:"inject",value:function(){return{textFieldPropertiesService:Vn,configService:tt}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:Ln()()})),Bn=c(6378),Hn=c.n(Bn),Wn=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"property",rt.default()),e}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.property=this.service.getDefaultValue(),this.property.ownsTo(this),this.property.onChange(function(t,n){e.element.textContent=n||"",e.element.value=n||""})}},{key:"userChangedDefaultValue",value:function(e){return this.service.forEachSelectedFields(function(t){return n(function(){var i;return b(this,function(r){switch(r.label){case 0:return[4,t.getDefaultValue()];case 1:return i=r.sent()||"",[2,t.setDefaultValue(e).then(function(r){return n(function(){var n;return b(this,function(r){switch(r.label){case 0:return[4,t.getValue()];case 1:return(n=r.sent()||"")&&n!==i?[2]:[2,t.setValue(e,!1)]}})})()})]}})})()})}}],[{key:"getName",value:function(){return"text-field-default-value-editor"}},{key:"inject",value:function(){return{service:Vn}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:Hn()()})),jn=c(5715),$n=c.n(jn),zn=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"property",rt.default()),e}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.property=this.service.getFieldFlagOptions(),this.property.ownsTo(this),this.property.onChange(function(t,n){t&&n&&!n.textComb?(e.enable(),e.setValue(!n.textDoNotScroll)):(e.disable(),e.setValue(!1))})}},{key:"onUserChangeScrollLongText",value:function(e){return this.service.forEachSelectedFields(function(t){return t.updateFlagByOptions({textDoNotScroll:!e})})}}],[{key:"getName",value:function(){return"text-field-scroll-long-text-checkbox"}},{key:"inject",value:function(){return{service:Vn}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:$n()()})),Gn=c(3885),Xn=c.n(Gn),Kn=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"isTextLengthLimited",!1),q(e,"available",!1),q(e,"defaultMaxLength",10),q(e,"maxLength",1),q(e,"property",rt.default()),e}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.property=this.service.getMaxLengthProperty(),this.property.ownsTo(this);var n=this.service.getFieldFlagOptions();n.ownsTo(this),rt.observeProperties([this.property,n],function(){var t=e.property,i=t.hasValue,r=t.value;!i||void 0===r||n.value&&n.value.textComb?(e.available=!1,e.isTextLengthLimited=!1,e.maxLength=1):(e.available=!0,e.isTextLengthLimited=r>0,e.maxLength=r||1),e.digest()})}},{key:"onUserChangeIsTextLengthLimited",value:function(e){var t=this;return this.service.forEachSelectedFields(function(n){return e?n.setMaxLength(t.defaultMaxLength):n.setMaxLength(0)})}},{key:"onUserChangeMaxLength",value:function(e){if(this.isTextLengthLimited)return this.service.forEachSelectedFields(function(t){return t.setMaxLength(e)})}}],[{key:"getName",value:function(){return"text-field-max-length-editor"}},{key:"inject",value:function(){return{service:Vn}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:Xn()()})),qn=c(825),Yn=c.n(qn),Zn=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"isTextCombo",!1),q(e,"available",!1),q(e,"defaultMaxLength",10),q(e,"maxLength",e.defaultMaxLength),q(e,"property",rt.default()),e}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.property=this.service.getFieldFlagOptions(),this.property.ownsTo(this);var n=this.service.getMaxLengthProperty();n.ownsTo(this),rt.observeProperties([this.property,n],function(){var t=e.property,i=t.hasValue,r=t.value;i&&r&&r.textDoNotScroll&&!r.textPassword&&r.textDoNotSpellCheck&&!r.textMultiline?(e.available=!0,e.isTextCombo=r.textComb):(e.available=!1,e.isTextCombo=!1),!e.isTextCombo&&(n.value||0)>0&&(e.available=!1),e.digest()}),n.onChange(function(t,n){e.property.hasValue&&e.property.value&&(e.maxLength=t&&void 0!==n?n:e.defaultMaxLength,e.digest())})}},{key:"onUserChangeTextComb",value:function(e){var t=this;return this.service.forEachSelectedFields(function(n){return n.updateFlagByOptions({textComb:e}).then(function(){return t.service.forEachSelectedFields(function(n){return n.setMaxLength(e?t.defaultMaxLength:0)})})})}},{key:"onUserChangeMaxLength",value:function(e){return this.service.forEachSelectedFields(function(t){return t.setMaxLength(e)})}}],[{key:"getName",value:function(){return"text-field-comb-of-editor"}},{key:"inject",value:function(){return{service:Vn}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:Yn()()})),Jn=c(2601),Qn=c.n(Jn),ei=c(2459),ti=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"normalActionObjNumbers",[]),e}return m(t,e),p(t,[{key:"getCalculateProperty",value:function(){return this.getFieldProperty(et.FormFieldPropertyName.CALCULATE_ACTION,"fieldCalculateAction",function(e){return e.getCalculateActionInfo()})}},{key:"getFormatProperty",value:function(){return this.getFieldProperty(et.FormFieldPropertyName.FORMAT_ACTION,"fieldFormatAction",function(e){return e.getFormatActionInfo()})}},{key:"getValidateProperty",value:function(){return this.getFieldProperty(et.FormFieldPropertyName.VALIDATE_ACTION,"fieldValidateAction",function(e){return e.getValidateActionInfo()})}},{key:"getMDPActionInfo",value:function(){return this.getFieldProperty(et.FormFieldPropertyName.SIGNATURE_MDP_ACTION,"signatureMDPAction",function(e){return n(function(){var t;return b(this,function(n){return"function"!=typeof(t=e).getMDPAction?[2,{type:et.MDPActionType.NONE}]:[2,t.getMDPAction()]})})()})}},{key:"getAdditionalActions",value:function(){var e=[Qe.additionalActionDataAdded,Qe.additionalActionDataRemoved,Qe.additionalActionDataUpdated];return this.getWidgetProperty("widgetAdditionalAction",e,function(e){return e.getAdditionalActions([et.WidgetActionTriggerEvents.ANNOT_MOUSE_BUTTON_RELEASED,et.WidgetActionTriggerEvents.ANNOT_MOUSE_BUTTON_PRESSED,et.WidgetActionTriggerEvents.ANNOT_CURSOR_ENTER,et.WidgetActionTriggerEvents.ANNOT_CURSOR_EXIT,et.WidgetActionTriggerEvents.ANNOT_RECEIVE_INPUT_FOCUS,et.WidgetActionTriggerEvents.ANNOT_LOSE_INPUT_FOCUS])})}},{key:"getListboxSelectionChangeActions",value:function(){return this.getFieldProperty(et.FormFieldPropertyName.SELECTION_CHANGE_ACTION,"listboxSelectionChangeAction",function(e){return e.getSelectionChangeActionInfo()})}},{key:"getActions",value:function(){var e=this;return this.getWidgetProperty("widgetAction",Qe.actionDataUpdated,function(t){return t.getActionData().then(function(t){if(t)return e.normalActionObjNumbers=[t.objNumber].concat(t.subAction.reduce(function e(t,n){var i;return(i=t).push.apply(i,[n].concat(_t(n.subAction.reduce(e,t)))),t},[]).map(function(e){return e.objNumber})),t})})}},{key:"getAllActions",value:function(){var e=[Qe.additionalActionDataAdded,Qe.additionalActionDataRemoved,Qe.additionalActionDataUpdated,Qe.actionDataUpdated,Qe.removeAction,Qe.addAction,Qe.actionOrderChanged];return this.getWidgetProperty("widgetAllAction",e,function(e){return e.getAllActionData()})}},{key:"appendAdditionalAction",value:function(e,t){var n=this,i=t.trigger,r=t.actionData;return e.appendAdditionalAction(i,r).then(function(t){return n.addUndoredoAction("appendAction",{widget:e,appendActionData:{trigger:i,actionData:r}})})}},{key:"removeAction",value:function(e,t){return n(function(e,t){var n,i;return b(this,function(r){return n=t.trigger,"number"==typeof(i=t.actionObjNumber)?this.isPrimaryAction(i)?[2,this.removePrimaryAction(e,i)]:[2,this.removeAdditionalAction(e,n,i)]:[2,this.removeActionByTrigger(e,n)]})}).apply(this,arguments)}},{key:"removeActionByTrigger",value:function(e,t){return n(function(){return b(this,function(n){switch(n.label){case 0:return[4,this.removeAdditionalAction(e,t)];case 1:return n.sent(),t!=et.WidgetActionTriggerEvents.ANNOT_RECEIVE_INPUT_FOCUS?[3,3]:[4,e.removeAction(void 0)];case 2:n.sent(),n.label=3;case 3:return[2,!0]}})}).call(this)}},{key:"removeAdditionalAction",value:function(e,t,i){return n(function(){var n,r,o,a,s,c,l,u,d,p;return b(this,function(f){switch(f.label){case 0:return[4,e.getAdditionalActions([t])];case 1:return n=y.apply(void 0,[f.sent(),1]),r=n[0],(o=null==r?void 0:r.data)?[4,e.removeAdditionalAction(t,i)]:[2,!1];case 2:if(!f.sent())return[2,!1];if("number"==typeof i){s=!0,c=!1,l=void 0;try{for(u=(0,ei.iterateActionHierarchy)(o)[Symbol.iterator]();!(s=(d=u.next()).done);s=!0)if((p=d.value.hierarchy).objNumber===i){a={type:p.type,data:p.data};break}}catch(e){c=!0,l=e}finally{try{s||null==u.return||u.return()}finally{if(c)throw l}}if(!a)return[2,!1];this.addUndoredoAction("removeSpecAdditionalAction",{widget:e,trigger:t,actionObjNumber:i,actionSpec:a})}else this.addUndoredoAction("removeAdditionalActionByTrigger",{widget:e,trigger:t,hierarchy:o});return[2,!0]}})}).call(this)}},{key:"moveAction",value:function(e,t){var n=this;return e.moveActionOrder(t).then(function(){var t=e.getPage().getPDFDoc();return n.addUndoredoAction("moveActionAcross",{doc:t})})}},{key:"updateAdditionalAction",value:function(e,t){var n=this,i=t.trigger,r=t.actionObjNumber,o=t.oldActionData,a=t.newActionData;return e.updateAdditionalAction(i,r,a).then(function(t){return n.addUndoredoAction("updateAction",{widget:e,trigger:i,actionObjNumber:r,oldActionData:o,newActionData:a})})}},{key:"updateAction",value:function(e,t,n,i){var r=this;return e.updateAction(t,i).then(function(){return r.addUndoredoAction("updateNormalAction",{widget:e,actionObjNumber:t,oldActionData:n,newActionData:i})})}},{key:"removePrimaryAction",value:function(e,t){return n(function(){var n,i,r,o,a,s,c;return b(this,function(l){switch(l.label){case 0:return[4,e.getActionData()];case 1:if(!(n=l.sent()))return[2,!1];i=!0,r=!1,o=void 0;try{for(a=(0,ei.iterateActionHierarchy)(n)[Symbol.iterator]();!(i=(s=a.next()).done);i=!0)if((c=s.value).hierarchy.objNumber===t)return{type:c.hierarchy.type,data:c.hierarchy.data},[2,e.removeAction(t)]}catch(e){r=!0,o=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return[2,!1]}})})()}},{key:"isPrimaryAction",value:function(e){return this.normalActionObjNumbers.includes(e)}},{key:"addUndoredoAction",value:function(e,t){return n(function(){var n;return b(this,function(i){switch(i.label){case 0:return[4,this.pdfViewer.ioc.getInstanceByClass("PDFUI").getAddonInstance("UndoRedoAddon")];case 1:return(n=i.sent())&&n.pushUndoStack("formDesigner",e,t),[2]}})}).call(this)}}]),t}(st),ni=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"property",rt.default()),e}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.property=this.service.getFieldFlagOptions(),this.property.ownsTo(this);var n=this.actionPropertyService.getFormatProperty();n.ownsTo(this),rt.observeProperties([this.property,n],function(){var t=e.property,i=t.hasValue,r=t.value,o=!!n.value&&[et.FormatCategory.NUMBER,et.FormatCategory.PERCENTAGE,et.FormatCategory.DATE,et.FormatCategory.TIME,et.FormatCategory.SPECIAL].includes(n.value.category);!i||!r||r.textComb||r.textPassword||o?(e.disable(),e.setValue(!1)):(e.enable(),e.setValue(r.textMultiline))})}},{key:"onUserChangeTextMultiline",value:function(e){return this.service.forEachSelectedFields(function(t){return t.updateFlagByOptions({textMultiline:e})})}}],[{key:"getName",value:function(){return"text-field-multiline-checkbox"}},{key:"inject",value:function(){return{service:Vn,actionPropertyService:ti}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:Qn()()})),ii=c(524),ri=c.n(ii),oi=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"property",rt.default()),e}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.property=this.service.getFieldFlagOptions(),this.property.ownsTo(this),this.property.onChange(function(t,n){t&&n&&n.textDoNotSpellCheck&&!n.textMultiline&&!n.textComb?(e.enable(),e.setValue(n.textPassword)):(e.disable(),e.setValue(!1))})}},{key:"onUserChange",value:function(e){return this.service.forEachSelectedFields(function(t){return t.updateFlagByOptions({textPassword:e})})}}],[{key:"getName",value:function(){return"text-field-password-checkbox"}},{key:"inject",value:function(){return{service:Vn}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:ri()()})),ai=c(787),si=c.n(ai),ci=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"property",rt.default()),e}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.property=this.service.getFieldFlagOptions(),this.property.ownsTo(this),this.property.onChange(function(t,n){!t||!n||n.textComb||n.textPassword?(e.disable(),e.setValue(!1)):(e.enable(),e.setValue(!n.textDoNotSpellCheck))})}},{key:"onUserChange",value:function(e){return this.service.forEachSelectedFields(function(t){return t.updateFlagByOptions({textDoNotSpellCheck:!e})})}}],[{key:"getName",value:function(){return"text-field-check-spelling"}},{key:"inject",value:function(){return{service:Vn}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:si()()}));K.registerComponent(Mn),K.registerComponent(Wn),K.registerComponent(zn),K.registerComponent(Kn),K.registerComponent(Zn),K.registerComponent(ni),K.registerComponent(oi),K.registerComponent(ci);var li=c(947),ui=c.n(li),di=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"selectedCategoryStore",new Y.ValueStore(et.FormatCategory.NONE)),q(e,"widgetCategoryStore",new Y.ValueStore(et.FormatCategory.NONE)),e}return m(t,e),p(t,[{key:"allInjected",value:function(){var e=this;f(i(t.prototype),"allInjected",this).call(this);var n=this.actionPropertiesService.getFormatProperty();n.ownsTo(this),n.onChange(function(){var t,i=null===(t=n.value)||void 0===t?void 0:t.category;e.selectedCategoryStore.remove(),e.widgetCategoryStore.dispatch(i||et.FormatCategory.NONE)})}},{key:"setSelectedCategory",value:function(e){return n(function(){return b(this,function(t){switch(t.label){case 0:return[4,this.selectedCategoryStore.dispatch(e)];case 1:return t.sent(),[2]}})}).call(this)}},{key:"getSelectedCategory",value:function(){return this.selectedCategoryStore.getCurrentValue()}},{key:"getFormatProperty",value:function(){return this.actionPropertiesService.getFormatProperty()}},{key:"onActiveWidgetCategoryChange",value:function(e){return this.widgetCategoryStore.subscribe(e)}},{key:"onUserChangeCategory",value:function(e){return this.selectedCategoryStore.subscribe(function(t){return e(t)})}},{key:"getTip",value:function(e){var t;return null===(t=this.configService.getOptions("format-category-list").find(function(t){return t.id===e}))||void 0===t?void 0:t.tip}}],[{key:"inject",value:function(){return Ct(St({},st.inject()),{actionPropertiesService:ti})}}]),t}(st),pi=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"defaultFormatScript",""),q(e,"defaultKeyStrokeScript",""),q(e,"customFormatScript",""),q(e,"customKeyStrokeScript",""),e}return m(t,e),p(t,[{key:"allInjected",value:function(){return n(function(){var e;return b(this,function(t){switch(t.label){case 0:return e=this,[4,this.pdfViewer.getViewerUI().getActionEditorUI()];case 1:return e.actionUIService=t.sent(),[2]}})}).call(this)}},{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this);var n=this.optionService.getFormatProperty();n.ownsTo(this),n.onChange(function(t,n){n&&t?(e.customFormatScript=n.formatScript||"",e.customKeyStrokeScript=n.keystrokeScript||""):(e.customKeyStrokeScript="",e.customFormatScript=""),e.digest()}),this.addDestroyHook(this.optionService.onUserChangeCategory(function(t){t===et.FormatCategory.CUSTOM&&(e.customKeyStrokeScript="",e.customFormatScript="",e.digest())}))}},{key:"updateFormatAction",value:function(){var e=this;this.optionService.forEachSelectedFields(function(t){return n(function(){return b(this,function(e){return this.customFormatScript||this.customKeyStrokeScript?[2,t.setFormatAction({category:et.FormatCategory.CUSTOM,formatScript:this.customFormatScript,keystrokeScript:this.customKeyStrokeScript})]:[2,t.setFormatAction({category:et.FormatCategory.NONE})]})}).call(e)})}},{key:"showEditCustomFormatScriptDialog",value:function(){var e=this;this.actionUIService.getJavaScriptActionEditorUI().open(void 0,{initData:{javascript:this.customFormatScript||this.defaultFormatScript},ok:function(t){e.customFormatScript=t.javascript||"",e.updateFormatAction(),e.digest()}})}},{key:"showEditCustomKeyStrokeScriptDialog",value:function(){var e=this;this.actionUIService.getJavaScriptActionEditorUI().open(void 0,{initData:{javascript:this.customKeyStrokeScript||this.defaultKeyStrokeScript},ok:function(t){e.customKeyStrokeScript=t.javascript,e.updateFormatAction(),e.digest()}})}}],[{key:"getName",value:function(){return"custom-format-options"}},{key:"inject",value:function(){return{optionService:di,pdfViewer:"PDFViewer"}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:ui()()})),fi=c(680),gi=c.n(fi),mi=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"dateFormatOptions",[]),q(e,"selectedDateFormats",[]),q(e,"customDateFormat",""),e}return m(t,e),p(t,[{key:"init",value:function(){var e=this;f(i(t.prototype),"init",this).call(this),Y.Lazy.property(this,"example",function(){var t=e.selectedDateFormats[0];return"Custom"===t&&(t=e.customDateFormat),t?Y.PDFDate.now().format(t||""):""})}},{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this);var n=this.optionsService.getFormatProperty();n.ownsTo(this);var r=new Y.CountDownLatch(1);r.await().then(function(){n.onChange(function(){if(n.hasValue&&n.value){var t=n.value;t.category===et.FormatCategory.DATE&&(e.dateFormatOptions.find(function(e){return e.id===t.format})?(e.customDateFormat="",e.selectedDateFormats=[t.format]):(e.selectedDateFormats=["Custom"],e.customDateFormat=t.format),Y.Lazy.reset(e,"example"),e.digest())}})}),this.addDestroyHook(this.optionsService.onUserChangeCategory(function(t){if(t===et.FormatCategory.DATE)return e.optionsService.forEachSelectedFields(function(t){return t.setFormatAction({category:et.FormatCategory.DATE,format:e.dateFormatOptions[0].id})})}),this.configService.subscribeOptions("date-format-list",function(t){e.dateFormatOptions=t.map(function(e){return{id:e,text:"Custom"===e?"form-designer:dialog.format.custom":e}}),e.selectedDateFormats=[t[0]],Y.Lazy.reset(e,"example"),e.digest(),r.countDown()}))}},{key:"doLocalize",value:function(e){var r=this,o=this;return n(function(){return b(this,function(n){switch(n.label){case 0:return[4,f(i(t.prototype),"doLocalize",r).call(o,e)];case 1:return n.sent(),Y.Lazy.reset(this,"example"),this.digest(),[2]}})}).call(this)}},{key:"onUserSelectDateFormat",value:function(e){this.selectedDateFormats=e,Y.Lazy.reset(this,"example");var t=e[0];if("Custom"!==t)return this.optionsService.forEachSelectedFields(function(e){return e.setFormatAction({category:et.FormatCategory.DATE,format:t})})}},{key:"onUserInputCustomFormat",value:function(){Y.Lazy.reset(this,"example")}},{key:"onUserChangeCustomFormat",value:function(e){return Y.Lazy.reset(this,"example"),this.optionsService.forEachSelectedFields(function(t){return t.setFormatAction({category:et.FormatCategory.DATE,format:e})})}}],[{key:"getName",value:function(){return"date-format-options"}},{key:"inject",value:function(){return{configService:tt,optionsService:di}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:gi()()})),hi=c(8470),vi=c.n(hi);function yi(e,t){var n=t.decimalPlaces,i=t.separatorStyle,r=t.prefix,o=t.suffix,a=t.showParentheses,s=e.toFixed(n||0).split("").filter(function(e){return"."!==e});i&&i.split("").some(function(e,t){return t>=s.length||(/\d/.test(e)||s.splice(t,0,e),!1)});var c=s.join("");return r&&(c=r+c),o&&(c+=o),a?"(".concat(c,")"):c}var bi=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"decimalPlacesOptions",[]),q(e,"separatorStyleOptions",[]),q(e,"currencySymbolOptions",[]),q(e,"selectedDecimalPlaces",2),q(e,"selectedSeparatorStyle",0),q(e,"selectedCurrencySymbol",""),q(e,"showParentheses",!1),q(e,"useRedText",!1),q(e,"sampleNumber",4123.0345),e}return m(t,e),p(t,[{key:"exampleColor",get:function(){return this.useRedText?"color: red":"color: inherit"}},{key:"init",value:function(){var e=this;f(i(t.prototype),"init",this).call(this),Y.Lazy.property(this,"example",function(){var t,n;return e.selectedCurrencySymbol&&(n=e.currencySymbolOptions.find(function(t){return t.id===e.selectedCurrencySymbol})),yi(e.sampleNumber,{decimalPlaces:e.selectedDecimalPlaces,separatorStyle:(null===(t=e.separatorStyleOptions[e.selectedSeparatorStyle])||void 0===t?void 0:t.text)||"1,234.56",prefix:(null==n?void 0:n.isPrepend)?n.id:"",suffix:(null==n?void 0:n.isPrepend)?"":(null==n?void 0:n.id)||"",showParentheses:e.showParentheses})})}},{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this);var r=new Y.CountDownLatch(3);r.ownsTo(this),r.await().then(function(){var t=e.optionsService.getFormatProperty();t.ownsTo(e),t.onChange(function(){if(t.hasValue&&t.value){var n=t.value;n.category===et.FormatCategory.NUMBER&&(e.selectedDecimalPlaces=n.decimalPlaces,e.selectedSeparatorStyle=n.separatorStyle,e.selectedCurrencySymbol=n.currencySymbol,e.showParentheses=n.showParentheses,e.useRedText=n.useRedText,e.digest())}})}),this.addDestroyHook(this.optionsService.onUserChangeCategory(function(t){return n(function(){var e;return b(this,function(n){switch(n.label){case 0:return e=this,t!==et.FormatCategory.NUMBER?[2]:[4,r.await()];case 1:return n.sent(),[2,this.optionsService.forEachSelectedFields(function(t){var n;return t.setNumberFormatAction({category:et.FormatCategory.NUMBER,decimalPlaces:e.selectedDecimalPlaces,separatorStyle:e.selectedSeparatorStyle,currencySymbol:e.selectedCurrencySymbol||"",showParentheses:!1,useRedText:!1,isPrepend:(null===(n=e.currencySymbolOptions.find(function(t){return t.id===e.selectedCurrencySymbol}))||void 0===n?void 0:n.isPrepend)||!1})})]}})}).call(e)}),this.configService.subscribeOptions("dicemal-places-list",function(t){e.decimalPlacesOptions=t.map(function(e){return{id:e,text:e+""}}),e.selectedDecimalPlaces=t.find(function(t){return t===e.selectedDecimalPlaces})||t[0]||0,e.updateExample(),e.digest(),r.countDown()}),this.configService.subscribeOptions("number-separator-list",function(t){var n;e.separatorStyleOptions=t,e.selectedSeparatorStyle=(null===(n=t.find(function(t){return t.id===e.selectedSeparatorStyle}))||void 0===n?void 0:n.id)||t[0].id,e.updateExample(),e.digest(),r.countDown()}),this.configService.subscribeOptions("currency-symbol-list",function(t){var n;e.currencySymbolOptions=t,e.selectedCurrencySymbol=(null===(n=t.find(function(t){return t.id===e.selectedCurrencySymbol}))||void 0===n?void 0:n.id)||"",e.updateExample(),e.digest(),r.countDown()}))}},{key:"onUserUpdateFormatOptions",value:function(){var e=this;return this.updateExample(),this.optionsService.forEachSelectedFields(function(t){var n;return t.setNumberFormatAction({category:et.FormatCategory.NUMBER,decimalPlaces:e.selectedDecimalPlaces,separatorStyle:e.selectedSeparatorStyle,currencySymbol:e.selectedCurrencySymbol,showParentheses:e.showParentheses,useRedText:e.useRedText,isPrepend:(null===(n=e.currencySymbolOptions.find(function(t){return t.id===e.selectedCurrencySymbol}))||void 0===n?void 0:n.isPrepend)||!1})})}},{key:"updateExample",value:function(){Y.Lazy.reset(this,"example")}}],[{key:"getName",value:function(){return"number-format-options"}},{key:"inject",value:function(){return{configService:tt,optionsService:di}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:vi()()})),Si=c(4297),Ci=c.n(Si),_i=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"decimalPlacesOptions",[]),q(e,"separatorStyleOptions",[]),q(e,"selectedDecimalPlaces",2),q(e,"selectedSeparatorStyle",0),q(e,"sampleNumber",4123.0345),e}return m(t,e),p(t,[{key:"init",value:function(){var e=this;f(i(t.prototype),"init",this).call(this),Y.Lazy.property(this,"example",function(){var t;return yi(e.sampleNumber,{decimalPlaces:e.selectedDecimalPlaces,separatorStyle:(null===(t=e.separatorStyleOptions[e.selectedSeparatorStyle])||void 0===t?void 0:t.text)||"1,234.56",suffix:"%",showParentheses:!1})})}},{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this);var n=this.optionsService.getFormatProperty();n.ownsTo(this);var r=new Y.CountDownLatch(2);r.ownsTo(this),r.await().then(function(){n.onChange(function(){n.hasValue&&n.value&&n.value.category===et.FormatCategory.PERCENTAGE&&(e.selectedDecimalPlaces=n.value.decimalPlaces,e.selectedSeparatorStyle=n.value.separatorStyle,e.updateExample(),e.digest())})}),this.addDestroyHook(this.optionsService.onUserChangeCategory(function(t){if(t===et.FormatCategory.PERCENTAGE)return e.optionsService.forEachSelectedFields(function(t){return t.setFormatAction({category:et.FormatCategory.PERCENTAGE,decimalPlaces:e.selectedDecimalPlaces,separatorStyle:e.selectedSeparatorStyle})})}),this.configService.subscribeOptions("dicemal-places-list",function(t){e.decimalPlacesOptions=t.map(function(e){return{id:e,text:e+""}}),e.selectedDecimalPlaces=t.find(function(t){return t===e.selectedDecimalPlaces})||t[0]||0,r.isDone()&&e.updateExample(),e.digest(),r.countDown()}),this.configService.subscribeOptions("number-separator-list",function(t){var n;e.separatorStyleOptions=t,e.selectedSeparatorStyle=(null===(n=t.find(function(t){return t.id===e.selectedSeparatorStyle}))||void 0===n?void 0:n.id)||t[0].id,r.isDone()&&e.updateExample(),e.digest(),r.countDown()}))}},{key:"updateExample",value:function(){Y.Lazy.reset(this,"example")}},{key:"onUserChangeDecimalPlaces",value:function(e){var t=this;return this.updateExample(),this.optionsService.forEachSelectedFields(function(n){return n.setFormatAction({category:et.FormatCategory.PERCENTAGE,decimalPlaces:e,separatorStyle:t.selectedSeparatorStyle})})}},{key:"onUserChangeSeparatorStyle",value:function(e){var t=this;return this.updateExample(),this.optionsService.forEachSelectedFields(function(n){return n.setFormatAction({category:et.FormatCategory.PERCENTAGE,decimalPlaces:t.selectedDecimalPlaces,separatorStyle:e})})}}],[{key:"getName",value:function(){return"percentage-format-options"}},{key:"inject",value:function(){return{configService:tt,optionsService:di}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:Ci()()})),wi=c(3374),xi=c.n(wi),ki=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"selectedFormats",[]),q(e,"formatOptions",[]),q(e,"showArbitraryMaskEditor",!1),q(e,"arbitraryMask",""),e}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this);var n=this.optionsService.getFormatProperty();n.ownsTo(this);var r=new Y.CountDownLatch(1);r.ownsTo(this),r.await().then(function(){n.onChange(function(){if(n.hasValue&&n.value&&n.value.category===et.FormatCategory.SPECIAL){var t=n.value.content;e.selectedFormats="number"==typeof t?[e.formatOptions[t].id]:["arbitraryMask"],"arbitraryMask"===e.selectedFormats[0]?(e.showArbitraryMaskEditor=!0,e.arbitraryMask=t+""):(e.showArbitraryMaskEditor=!1,e.arbitraryMask=""),e.digest()}})}),this.addDestroyHook(this.optionsService.onUserChangeCategory(function(t){if(t===et.FormatCategory.SPECIAL)return e.optionsService.forEachSelectedFields(function(e){return e.setFormatAction({category:t,content:0})})}),this.configService.subscribeOptions("special-format-list",function(t){e.formatOptions=t,e.selectedFormats=[t[0].id],e.digest(),r.countDown()}))}},{key:"onUserChangeArbitraryMask",value:function(e){return this.arbitraryMask=e,this.optionsService.forEachSelectedFields(function(t){return t.setFormatAction({category:et.FormatCategory.SPECIAL,content:e})})}},{key:"onUserSelectFormat",value:function(e){var t=this,n=y(e,1)[0],i=0;switch(this.showArbitraryMaskEditor=!1,n){case"zipCode":i=0;break;case"zipCode4":i=1;break;case"phoneNumber":i=2;break;case"socialSecurityNumber":i=3;break;case"arbitraryMask":this.arbitraryMask="",this.showArbitraryMaskEditor=!0}return this.optionsService.forEachSelectedFields(function(e){return e.setFormatAction({category:et.FormatCategory.SPECIAL,content:t.showArbitraryMaskEditor?t.arbitraryMask:i})})}}],[{key:"getName",value:function(){return"special-format-options"}},{key:"inject",value:function(){return{configService:tt,optionsService:di}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:xi()()})),Ai=c(8989),Ti=c.n(Ai),Ei=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"timeFormatOptions",[]),q(e,"selectedTimeFormats",[]),q(e,"customTimeFormat",""),e}return m(t,e),p(t,[{key:"init",value:function(){var e=this;f(i(t.prototype),"init",this).call(this),Y.Lazy.property(this,"example",function(){var t=e.selectedTimeFormats[0];return"Custom"===t&&(t=e.customTimeFormat),t?Y.PDFDate.now().format(t||""):""})}},{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this);var n=this.optionsService.getFormatProperty();n.ownsTo(this);var r=new Y.CountDownLatch(1);r.ownsTo(this),r.await().then(function(){n.onChange(function(){if(n.hasValue&&n.value){var t=n.value;t.category===et.FormatCategory.TIME&&(e.timeFormatOptions.find(function(e){return e.id===t.format})?(e.customTimeFormat="",e.selectedTimeFormats=[t.format]):(e.selectedTimeFormats=["Custom"],e.customTimeFormat=t.format),Y.Lazy.reset(e,"example"),e.digest())}})}),this.addDestroyHook(this.optionsService.onUserChangeCategory(function(t){t===et.FormatCategory.TIME&&e.optionsService.forEachSelectedFields(function(n){return n.setFormatAction({category:t,format:e.timeFormatOptions[0].id})})}),this.configService.subscribeOptions("time-format-list",function(t){e.timeFormatOptions=t.map(function(e){return{id:e,text:"Custom"===e?"form-designer:dialog.format.custom":e}}),e.selectedTimeFormats=[t[0]],Y.Lazy.reset(e,"example"),e.digest(),r.countDown()}))}},{key:"doLocalize",value:function(e){var r=this,o=this;return n(function(){return b(this,function(n){switch(n.label){case 0:return[4,f(i(t.prototype),"doLocalize",r).call(o,e)];case 1:return n.sent(),Y.Lazy.reset(this,"example"),this.digest(),[2]}})}).call(this)}},{key:"onUserSelectTimeFormat",value:function(e){this.selectedTimeFormats=e,Y.Lazy.reset(this,"example");var t=e[0];if("Custom"!==t)return this.optionsService.forEachSelectedFields(function(e){return e.setFormatAction({category:et.FormatCategory.TIME,format:t})})}},{key:"onUserInputCustomFormat",value:function(){Y.Lazy.reset(this,"example")}},{key:"onUserChangeCustomFormat",value:function(e){return Y.Lazy.reset(this,"example"),this.optionsService.forEachSelectedFields(function(t){return t.setFormatAction({category:et.FormatCategory.TIME,format:e})})}}],[{key:"getName",value:function(){return"time-format-options"}},{key:"inject",value:function(){return{configService:tt,optionsService:di}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:Ti()()})),Fi=c(9463),Di=c.n(Fi),Pi=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"options",[]),q(e,"isUserSelectedCustom",!1),e}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this);var n=this.formatOptionService.getFormatProperty();n.ownsTo(this),n.onChange(function(){if(e.isUserSelectedCustom)return!1;n.hasValue&&void 0!==n.value?e.setValue(n.value.category):e.setValue(e.options[0].id)}),this.addDestroyHook(this.configService.subscribeOptions("format-category-list",function(t){var n=e.getValue();e.setOptions(t).then(function(){n!==e.getValue()&&e.trigger("change",e.getValue())})}),this.formatOptionService.observeWidgetSelectionChange(function(){e.isUserSelectedCustom=!1})),this.setOptions(this.configService.getOptions("format-category-list")),this.setValue("none")}},{key:"onUserChangeCategory",value:function(e){if(this.isUserSelectedCustom=e===et.FormatCategory.CUSTOM,this.formatOptionService.setSelectedCategory(e),e===et.FormatCategory.NONE)return this.formatOptionService.forEachSelectedFields(function(e){return e.removeFormatAction()})}}],[{key:"getName",value:function(){return"widget-format-category-selector"}},{key:"inject",value:function(){return{configService:tt,formatOptionService:di}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:Di()()})),Ni=c(6535),Ii=c.n(Ni),Oi=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.addDestroyHook(this.widgetFormatOptionsService.onActiveWidgetCategoryChange(function(t){e.setText(e.widgetFormatOptionsService.getTip(t))}),this.widgetFormatOptionsService.onUserChangeCategory(function(t){e.setText(e.widgetFormatOptionsService.getTip(t))}))}},{key:"setText",value:function(e){this.text=e,this.element.setAttribute("data-i18n",e||""),this.localize()}},{key:"acceptText",value:function(){return!1}}],[{key:"getName",value:function(){return"widget-format-category-tip"}},{key:"inject",value:function(){return{widgetFormatOptionsService:di}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:Ii()()}));K.registerComponent(pi),K.registerComponent(mi),K.registerComponent(bi),K.registerComponent(_i),K.registerComponent(ki),K.registerComponent(Ei),K.registerComponent(Pi),K.registerComponent(Oi);var Ui=c(8013),Ri=c.n(Ui),Li=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"selectedOptionItem",new Y.ValueStore),q(e,"userInputOptionItem",new Y.ValueStore(void 0)),e}return m(t,e),p(t,[{key:"updateUserInputOptionItem",value:function(e){if(e){var t=Object.assign({label:"",exportValue:""},this.userInputOptionItem.getCurrentValue()||{},e);this.userInputOptionItem.dispatch(t)}else this.userInputOptionItem.dispatch(void 0)}},{key:"onChangeUserInputOption",value:function(e){return this.userInputOptionItem.subscribe(e)}},{key:"getUserInputOptionItem",value:function(){return this.userInputOptionItem.getCurrentValue()}},{key:"getChoiceOptionsProperty",value:function(){return this.getFieldProperty(et.FormFieldPropertyName.CHOICE_OPTION_ITEMS,"fieldChoiceOptions",function(e){return e.getOptions()})}},{key:"moveItemUp",value:function(e){var t=y(this.getSelectedFields(),1)[0];if(t&&0!==e)return t.moveOption(e,e-1)}},{key:"moveItemDown",value:function(e){return n(function(){var t,n,i;return b(this,function(r){switch(r.label){case 0:return t=y(this.getSelectedFields(),1),(n=t[0])?[4,n.getOptionsSize()]:[2];case 1:return i=r.sent(),e+1>=i?[2]:[2,n.moveOption(e,e+1)]}})}).call(this)}},{key:"getOptionCount",value:function(){return n(function(){var e,t;return b(this,function(n){switch(n.label){case 0:return e=y(this.getSelectedFields(),1),(t=e[0])?[4,t.getOptionsSize()]:[2,0];case 1:return[2,n.sent()]}})}).call(this)}},{key:"deleteItem",value:function(e){var t=y(this.getSelectedFields(),1)[0];if(t)return t.deleteOption(e)}},{key:"selectItem",value:function(e,t){e&&-1!==t?this.selectedOptionItem.dispatch({item:e,index:t}):this.selectedOptionItem.dispatch(void 0)}},{key:"onSelectItem",value:function(e){return this.selectedOptionItem.subscribe(function(t){return e(null==t?void 0:t.item,(null==t?void 0:t.index)||-1)})}},{key:"getSelectedItemIndex",value:function(){var e,t=null===(e=this.selectedOptionItem.getCurrentValue())||void 0===e?void 0:e.index;return void 0===t?-1:t}}]),t}(st),Vi=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.addDestroyHook(this.comboListBoxOptionsService.onSelectItem(function(t){e.setValue((null==t?void 0:t.label)||"")}))}},{key:"onUserChangeItemValue",value:function(e){this.comboListBoxOptionsService.updateUserInputOptionItem({label:e})}}],[{key:"getName",value:function(){return"combo-list-box-item-editor"}},{key:"inject",value:function(){return{comboListBoxOptionsService:Li}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:Ri()()})),Mi=c(4014),Bi=c.n(Mi),Hi=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.addDestroyHook(this.comboListBoxOptionsService.onChangeUserInputOption(function(t){return n(function(){var e,n,i;return b(this,function(r){switch(r.label){case 0:return e=y(this.comboListBoxOptionsService.getSelectedFields(),1),(n=e[0])?[4,n.getOptions()]:(this.disable(),[2]);case 1:return i=r.sent(),!t||""===t.label||i&&i.some(function(e){return e.label===t.label})?this.disable():this.enable(),[2]}})}).call(e)}))}},{key:"onUserAddNewItem",value:function(){this.disable();var e=this.comboListBoxOptionsService.getUserInputOptionItem();if(null==e?void 0:e.label){var t=e.label,n=e.exportValue||t,i=y(this.comboListBoxOptionsService.getSelectedFields(),1)[0];if(i)return i.addOption({value:n,label:t,selected:!1,defaultSelected:!1})}}}],[{key:"getName",value:function(){return"combo-list-box-add-item-button"}},{key:"inject",value:function(){return{comboListBoxOptionsService:Li}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:Bi()()})),Wi=c(5813),ji=c.n(Wi),$i=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.addDestroyHook(this.comboListBoxOptionsService.onSelectItem(function(t){e.setValue((null==t?void 0:t.value)||"")}),this.comboListBoxOptionsService.onChangeUserInputOption(function(t){t&&t.label&&!t.exportValue&&e.setValue("")}))}},{key:"onUserChangeExportValue",value:function(e){if(this.comboListBoxOptionsService.getUserInputOptionItem())this.comboListBoxOptionsService.updateUserInputOptionItem({exportValue:e});else{var t=this.comboListBoxOptionsService.getSelectedItemIndex();this.comboListBoxOptionsService.forEachSelectedFields(function(n){return n.updateOption(t,{value:e})})}}}],[{key:"getName",value:function(){return"combo-list-box-export-value-editor"}},{key:"inject",value:function(){return{comboListBoxOptionsService:Li}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:ji()()})),zi=c(9458),Gi=c.n(zi),Xi=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"items",[]),e}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this);var n=this.comboListBoxOptionsService.getChoiceOptionsProperty();n.ownsTo(this),this.addDestroyHook(n.onChange(function(){n.hasValue&&n.value?e.items=n.value:e.items=[];var t=e.items.findIndex(function(e){return e.selected}),i=e.items[t];e.comboListBoxOptionsService.selectItem(i,t),e.digest()}),this.comboListBoxOptionsService.onSelectItem(function(t){e.setValue(t?[t.value]:[])}))}},{key:"onUserSelectItem",value:function(e){var t=y(e,1)[0],n=this.items.findIndex(function(e){return e.value===t}),i=this.items[n];this.comboListBoxOptionsService.selectItem(i,n),this.comboListBoxOptionsService.updateUserInputOptionItem(void 0);var r=y(this.comboListBoxOptionsService.getSelectedFields(),1)[0];if(r)return r.selectOption(n)}}],[{key:"getName",value:function(){return"combo-list-box-item-list-selector"}},{key:"inject",value:function(){return{comboListBoxOptionsService:Li}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:Gi()()})),Ki=c(1261),qi=c.n(Ki),Yi=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.addDestroyHook(this.comboListBoxOptionsService.onSelectItem(function(t){t?e.enable():e.disable()}))}},{key:"onUserClickButton",value:function(){var e=this.comboListBoxOptionsService.getSelectedItemIndex();-1!==e&&this.comboListBoxOptionsService.deleteItem(e)}}],[{key:"getName",value:function(){return"combo-list-box-delete-item-button"}},{key:"inject",value:function(){return{comboListBoxOptionsService:Li}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:qi()()})),Zi=c(9381),Ji=c.n(Zi),Qi=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.addDestroyHook(this.comboListBoxOptionsService.onSelectItem(function(t,n){t&&0!==n&&-1!==n?e.enable():e.disable()}))}},{key:"onUserClickButton",value:function(){var e=this.comboListBoxOptionsService.getSelectedItemIndex();-1!==e&&this.comboListBoxOptionsService.moveItemUp(e)}}],[{key:"getName",value:function(){return"combo-list-box-move-item-up-button"}},{key:"inject",value:function(){return{comboListBoxOptionsService:Li}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:Ji()()})),er=c(5975),tr=c.n(er),nr=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.addDestroyHook(this.comboListBoxOptionsService.onSelectItem(function(t,i){return n(function(){var e;return b(this,function(n){switch(n.label){case 0:return[4,this.comboListBoxOptionsService.getOptionCount()];case 1:return e=n.sent(),t&&i!==e-1&&1!==e?this.enable():this.disable(),[2]}})}).call(e)}))}},{key:"onUserClickButton",value:function(){var e=this.comboListBoxOptionsService.getSelectedItemIndex();-1!==e&&this.comboListBoxOptionsService.moveItemDown(e)}}],[{key:"getName",value:function(){return"combo-list-box-move-item-down-button"}},{key:"inject",value:function(){return{comboListBoxOptionsService:Li}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:tr()()}));K.registerComponent(Vi),K.registerComponent(Hi),K.registerComponent($i),K.registerComponent(Xi),K.registerComponent(Yi),K.registerComponent(Qi),K.registerComponent(nr);var ir=c(8753),rr=c.n(ir),or=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this);var n=this.commonPropertiesService.getFieldFlagOptions();n.ownsTo(this),n.onChange(function(){if(n.hasValue){var t;e.enable();var i=(null===(t=n.value)||void 0===t?void 0:t.comboEdit)||!1;e.setValue(i)}else e.disable()})}},{key:"userUpdateComboEdit",value:function(e){var t=y(this.commonPropertiesService.getSelectedFields(),1)[0];if(t)return t.setComboEdit(e)}}],[{key:"getName",value:function(){return"combo-box-edit-checkbox"}},{key:"inject",value:function(){return{commonPropertiesService:ct}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:rr()()}));K.registerComponent(or);var ar=c(2073),sr=c.n(ar),cr=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this);var n=this.commonPropertiesService.getFieldFlagOptions();n.ownsTo(this),n.onChange(function(){var t,i=!!(null===(t=n.value)||void 0===t?void 0:t.choiceMultiSelect);e.setValue(i)})}},{key:"onUserChange",value:function(e){var t=y(this.commonPropertiesService.getSelectedFields(),1)[0];if(t)return t.setChoiceMultiSelect(e)}}],[{key:"getName",value:function(){return"list-box-multille-selection-checkbox"}},{key:"inject",value:function(){return{commonPropertiesService:ct}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:sr()()}));K.registerComponent(cr);var lr=c(1864),ur=c.n(lr),dr=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"getNormalCaptionProperty",value:function(){return this.getWidgetProperty("widgetMKNormalCaption",Qe.formWidgetNormalCaptionUpdated,function(e){return e.getNormalCaption()})}},{key:"getExportValueProperty",value:function(){return this.getWidgetProperty("widgetExportValue",Qe.formWidgetExportValueUpdated,function(e){return e.getExportValue()})}},{key:"getCheckedByDefualtProperty",value:function(){return this.getFieldProperty(et.FormFieldPropertyName.CHECKED_BY_DEFAULT,"fieldIsCheckedByDefault",function(e){return e.isCheckedByDefault()})}}]),t}(st),pr=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this);var n=this.propertyService.getCheckedByDefualtProperty();n.ownsTo(this),n.onChange(function(){n.hasValue?(e.enable(),e.setValue(!!n.value)):e.disable()})}},{key:"onUserChange",value:function(e){return this.propertyService.forEachSelectedFields(function(t){return t.setCheckedByDefault(e)})}}],[{key:"getName",value:function(){return"checked-by-default-checkbox"}},{key:"inject",value:function(){return{propertyService:dr}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:ur()()})),fr=c(7909),gr=c.n(fr),mr=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this);var n=this.propertyService.getExportValueProperty();n.ownsTo(this),n.onChange(function(){n.hasValue?(e.enable(),e.setValue(n.value||"")):(e.setValue(""),e.disable())})}},{key:"onUserChangeExportValue",value:function(e){if(e)return this.propertyService.forEachSelectedWidgets(function(t){return t.setExportValue(e)})}}],[{key:"getName",value:function(){return"export-value-editor"}},{key:"inject",value:function(){return{configService:tt,propertyService:dr}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:gr()()})),hr=c(1914),vr=c.n(hr),yr=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this);var n=this.propertyService.getNormalCaptionProperty();n.ownsTo(this),n.onChange(function(){if(n.hasValue){e.enable();var t=e.options.find(function(e){return e.id===n.value});e.setValue(t)}else e.disable()}),this.addDestroyHook(this.configService.subscribeOptions("mk-normal-caption-list",function(t){e.setOptions(t),e.setValue(t[0])}))}},{key:"onUserSelectNormalCaption",value:function(e){return this.propertyService.forEachSelectedWidgets(function(t){return t.setNormalCaption(e)})}}],[{key:"getName",value:function(){return"normal-caption-selector"}},{key:"inject",value:function(){return{configService:tt,propertyService:dr}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:vr()()}));K.registerComponent(yr),K.registerComponent(mr),K.registerComponent(pr);var br=c(1808),Sr=c.n(br),Cr=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"getFieldFlagOptions",value:function(){return this.commonPropertiesService.getFieldFlagOptions()}}],[{key:"inject",value:function(){return Ct(St({},dr.inject()),{commonPropertiesService:ct})}}]),t}(st),_r=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this);var n=this.propertyService.getFieldFlagOptions();n.ownsTo(this),n.onChange(function(){var t;n.hasValue?(e.enable(),e.setValue(!!(null===(t=n.value)||void 0===t?void 0:t.buttonRadiosInUnison))):e.disable()})}},{key:"onUserChange",value:function(e){return this.propertyService.forEachSelectedFields(function(t){return t.setButtonRadiosInUnison(e)})}}],[{key:"getName",value:function(){return"radio-button-unison-checkbox"}},{key:"inject",value:function(){return{propertyService:Cr}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:Sr()()}));K.registerComponent(_r);var wr=c(5060),xr=c.n(wr),kr=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"calculateRelationTypes",[]),q(e,"calculateRelationType",void 0),q(e,"selectedRelateFields",[]),q(e,"calculationType",0),q(e,"notationScript",""),q(e,"customScript",""),e}return m(t,e),p(t,[{key:"allInjected",value:function(){return n(function(){var e;return b(this,function(t){switch(t.label){case 0:return e=this,[4,this.pdfViewer.viewerUI.getActionEditorUI()];case 1:return e.actionUIService=t.sent(),[2]}})}).call(this)}},{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.addDestroyHook(this.configService.subscribeOptions("calculate-relation-types",function(t){var n;e.calculateRelationTypes=t,e.calculateRelationType=null===(n=t[0])||void 0===n?void 0:n.id,e.digest()}));var n=this.property=this.propertyService.getCalculateProperty();n.ownsTo(this),n.onChange(function(){n.hasValue&&n.value?e.updateCalculateInfo(n.value):e.updateCalculateInfo({type:et.FieldCalculateType.NOT_CALCULATED})})}},{key:"resetInfo",value:function(e){this.selectedRelateFields=[],this.customScript="",this.notationScript="",this.calculationType=e,this.digest()}},{key:"updateCalculateInfo",value:function(e){switch(this.resetInfo(e.type),e.type){case et.FieldCalculateType.CALCULATE_WITH_FIELDS:this.calculateRelationType=e.relation,this.selectedRelateFields=e.fieldNames;break;case et.FieldCalculateType.CUSTOM_CALCULATE_SCRIPT:this.customScript=e.javascript;break;case et.FieldCalculateType.FIMPLIFIED_FIELD_NOTATION:this.notationScript=e.javascript}this.digest()}},{key:"onUserChangeCalculationType",value:function(e){if(this.property.hasValue&&this.property.value){var t=this.property.value;t.type===e?this.updateCalculateInfo(t):this.resetInfo(e)}}},{key:"onUserSelectNotCalculated",value:function(){this.propertyService.forEachSelectedFields(function(e){e.setCalculateAction({type:et.FieldCalculateType.NOT_CALCULATED})}),this.digest()}},{key:"onUserClickPickFieldsButton",value:function(){return n(function(){var e,t,n;return b(this,function(i){switch(i.label){case 0:return e=this,[4,this.pdfViewer.viewerUI.getActionEditorUI()];case 1:if(t=i.sent(),!(n=t.getFieldSelectorDialog()))throw new Error("");return n.open(void 0,{title:"editActions.calculateTitle",subTitle:"editActions.calculateSubTitle",ok:function(t){e.selectedRelateFields=t,e.propertyService.forEachSelectedFields(function(n){n.setCalculateAction({type:et.FieldCalculateType.CALCULATE_WITH_FIELDS,relation:e.calculateRelationType,fieldNames:t})}),e.digest()},initData:{fieldNames:this.selectedRelateFields}}),[2]}})}).call(this)}},{key:"onUserClickEditNotationScriptButton",value:function(){return n(function(){var e;return b(this,function(t){return e=this,this.actionUIService.getJavaScriptActionEditorUI().open(void 0,{initData:{javascript:this.notationScript},ok:function(t){var n=t.javascript;e.notationScript=n,e.propertyService.forEachSelectedFields(function(e){return e.setCalculateAction({type:et.FieldCalculateType.FIMPLIFIED_FIELD_NOTATION,javascript:n})}),e.digest()}}),[2]})}).call(this)}},{key:"onUserClickEditCustomScriptButton",value:function(){return n(function(){var e;return b(this,function(t){return e=this,this.actionUIService.getJavaScriptActionEditorUI().open(void 0,{initData:{javascript:this.customScript},ok:function(t){var n=t.javascript;e.customScript=n,e.propertyService.forEachSelectedFields(function(e){return e.setCalculateAction({type:et.FieldCalculateType.CUSTOM_CALCULATE_SCRIPT,javascript:n})}),e.digest()}}),[2]})}).call(this)}},{key:"onUserSelectCalculateRelationType",value:function(){var e=this;this.calculationType===et.FieldCalculateType.CALCULATE_WITH_FIELDS&&(this.selectedRelateFields.length<=0||this.propertyService.forEachSelectedFields(function(t){t.setCalculateAction({type:et.FieldCalculateType.CALCULATE_WITH_FIELDS,relation:e.calculateRelationType,fieldNames:e.selectedRelateFields})}))}}],[{key:"getName",value:function(){return"calculate-action-editor"}},{key:"inject",value:function(){return{configService:tt,propertyService:ti,pdfViewer:"PDFViewer"}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:xr()()})),Ar=c(6972),Tr=c.n(Ar),Er=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"currentfield",void 0),q(e,"selectionChangeActionType",et.ListboxSelectionChangeType.NONE),q(e,"customScript",""),e}return m(t,e),p(t,[{key:"allInjected",value:function(){return n(function(){var e;return b(this,function(t){switch(t.label){case 0:return e=this,[4,this.pdfViewer.viewerUI.getActionEditorUI()];case 1:return e.actionUIService=t.sent(),[2]}})}).call(this)}},{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.addDestroyHook(this.formActionPropertiesService.observeWidgetSelectionChange(function(){var t=e.formActionPropertiesService.getSelectedFields();if(1===t.length){var n=t[0];n.getType()===M.ListBox?e.currentfield=n:e.currentfield=void 0}else e.currentfield=void 0}));var n=this.property=this.formActionPropertiesService.getListboxSelectionChangeActions();n.ownsTo(this),n.onChange(function(){n.hasValue&&n.value?e.updateSelectionChangeAction(n.value):e.updateSelectionChangeAction({type:et.ListboxSelectionChangeType.NONE})})}},{key:"updateSelectionChangeAction",value:function(e){switch(e.type){case et.ListboxSelectionChangeType.NONE:this.selectionChangeActionType=et.ListboxSelectionChangeType.NONE,this.customScript="";break;case et.ListboxSelectionChangeType.CUSTOM:this.selectionChangeActionType=et.ListboxSelectionChangeType.CUSTOM,this.customScript=e.javascript}this.digest()}},{key:"onUserChangeSelectionChangeActionType",value:function(){var e=this;this.formActionPropertiesService.forEachSelectedFields(function(t){t.setSelectionChangeAction({type:e.selectionChangeActionType,javascript:e.customScript})}),this.digest()}},{key:"onUserClickEditCustomScriptButton",value:function(){var e=this;this.actionUIService.getJavaScriptActionEditorUI().open(void 0,{initData:{javascript:this.customScript},ok:function(t){var n=t.javascript;e.customScript=n,e.formActionPropertiesService.forEachSelectedFields(function(e){e.setSelectionChangeAction({type:et.ListboxSelectionChangeType.CUSTOM,javascript:n})}),e.digest()}})}}],[{key:"getName",value:function(){return"listbox-selection-change-action-editor"}},{key:"inject",value:function(){return{formActionPropertiesService:ti,pdfViewer:"PDFViewer"}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:Tr()()})),Fr=c(9764),Dr=c.n(Fr),Pr=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"mdpActionTypes",[{id:et.MDPActionType.ALL,text:"form-designer:dialog.signed.all"},{id:et.MDPActionType.EXCLUDE,text:"form-designer:dialog.signed.exclude"},{id:et.MDPActionType.INCLUDE,text:"form-designer:dialog.signed.include"}]),q(e,"mdpActionType",et.MDPActionType.ALL),q(e,"selectedFields",[]),q(e,"customScript",""),q(e,"currentSignatureField",void 0),q(e,"signatureActionType","none"),e}return m(t,e),p(t,[{key:"allInjected",value:function(){return n(function(){var e;return b(this,function(t){switch(t.label){case 0:return e=this,[4,this.pdfViewer.viewerUI.getActionEditorUI()];case 1:return e.actionUIService=t.sent(),[2]}})}).call(this)}},{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.mdpActionType=this.mdpActionTypes[0].id,this.addDestroyHook(this.formActionPropertiesService.observeWidgetSelectionChange(function(){var t=e.formActionPropertiesService.getSelectedFields();if(1===t.length){var n=t[0];n.getType()!==et.FieldType.Sign?e.currentSignatureField=void 0:e.currentSignatureField=n}else e.currentSignatureField=void 0}));var n=this.formActionPropertiesService.getMDPActionInfo();n.ownsTo(this),n.onChange(function(t,n){if(e.selectedFields=[],e.customScript="",e.signatureActionType="none",t&&n){switch(n.type){case et.MDPActionType.NONE:e.signatureActionType="none";break;case et.MDPActionType.ALL:case et.MDPActionType.EXCLUDE:case et.MDPActionType.INCLUDE:e.signatureActionType="MDP",e.mdpActionType=n.type,e.selectedFields=n.fieldNames;break;case et.MDPActionType.CUSTOM:e.signatureActionType="custom",e.customScript=n.javascript}e.digest()}else e.digest()})}},{key:"onUserChangeSignActionType",value:function(e){return n(function(){return b(this,function(t){return this.selectedFields=[],this.customScript="",this.digest(),"none"===e?[2,this.onUserChangeMDPActionType(et.MDPActionType.NONE)]:"MDP"===e?[2,this.onUserChangeMDPActionType(et.MDPActionType.ALL)]:[2]})}).call(this)}},{key:"onUserChangeMDPActionType",value:function(e){return n(function(){var t,n,i;return b(this,function(r){switch(r.label){case 0:return this.currentSignatureField?e===et.MDPActionType.NONE||e===et.MDPActionType.CUSTOM?(this.selectedFields=[],this.customScript="",this.digest(),[2]):e!==et.MDPActionType.ALL?(this.selectedFields=[],this.digest(),this.onUserClickPickFieldButton(),[2]):[4,this.pdfUI.getCurrentPDFDoc()]:[2];case 1:return(t=r.sent())?[4,t.formAPI.getFields()]:[2];case 2:return n=r.sent(),i=n.map(function(e){return e.name}),this.selectedFields=i,this.digest(),[2,this.currentSignatureField.setMDPAction({type:et.MDPActionType.ALL,fieldNames:i})]}})}).call(this)}},{key:"onUserClickPickFieldButton",value:function(){return n(function(){var e,t,n,i;return b(this,function(r){switch(r.label){case 0:return e=this,[4,this.pdfViewer.viewerUI.getActionEditorUI()];case 1:if(t=r.sent(),!(n=t.getFieldSelectorDialog()))throw new Error('Cannot found component named "fv--field-selector-dialog"');switch(i=this.mdpActionType){case et.MDPActionType.NONE:case et.MDPActionType.CUSTOM:return[2]}return n.open(void 0,{initData:{fieldNames:this.selectedFields},title:"editActions.SignatureSelection",subTitle:"editActions.markFields",ok:function(t){var n;null===(n=e.currentSignatureField)||void 0===n||n.setMDPAction({type:i,fieldNames:t})},cancel:function(){var t;null===(t=e.currentSignatureField)||void 0===t||t.setMDPAction({type:i,fieldNames:e.selectedFields})}}),[2]}})}).call(this)}},{key:"onUserClickEditCustomScriptButton",value:function(){var e=this;this.actionUIService.getJavaScriptActionEditorUI().open(void 0,{initData:{javascript:this.customScript},ok:function(t){var n,i=t.javascript;null===(n=e.currentSignatureField)||void 0===n||n.setMDPAction({type:et.MDPActionType.CUSTOM,javascript:i})}})}}],[{key:"getName",value:function(){return"signed-action-editor"}},{key:"inject",value:function(){return{formActionPropertiesService:ti,pdfViewer:"PDFViewer"}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:Dr()()})),Nr=c(9479),Ir=c.n(Nr),Or=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"validationType",et.ValidateTypeEnum.NONE),q(e,"inRangeFrom",""),q(e,"inRangeTo",""),q(e,"customScript",""),q(e,"disableRangeOption",!1),e}return m(t,e),p(t,[{key:"allInjected",value:function(){return n(function(){var e;return b(this,function(t){switch(t.label){case 0:return e=this,[4,this.viewer.viewerUI.getActionEditorUI()];case 1:return e.actionUIService=t.sent(),[2]}})}).call(this)}},{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this);var n=this.propertyService.getFormatProperty();n.ownsTo(this),n.onChange(function(t,n){var i=(null==n?void 0:n.category)||et.FormatCategory.NONE;e.disableRangeOption=i!==et.FormatCategory.NUMBER&&i!==et.FormatCategory.PERCENTAGE,e.digest()});var r=this.propertyService.getValidateProperty();r.ownsTo(this),r.onChange(function(t,n){e.inRangeFrom="",e.inRangeTo="",e.customScript="",t&&n?(e.validationType=n.type,n.type===et.ValidateTypeEnum.RANGE?(e.inRangeFrom=n.range.lowerLimit,e.inRangeTo=n.range.upperLimit):n.type===et.ValidateTypeEnum.CUSTOM&&(e.customScript=n.javascript)):e.validationType=et.ValidateTypeEnum.NONE,e.digest()})}},{key:"onUserChangeRange",value:function(e,t,n,i){return""!==e&&""!==t&&isFinite(e)&&isFinite(t)?e>t?(this.inRangeFrom=n,this.inRangeTo=i,this.digest(),this.viewer.viewerUI.alert({message:"dialog.error.validateRange",level:"error"})):this.propertyService.forEachSelectedFields(function(n){return n.setValidateAction({type:et.ValidateTypeEnum.RANGE,range:{lowerCheck:!0,lowerLimit:e,upperCheck:!0,upperLimit:t}})}):Promise.resolve()}},{key:"onUserChangeValidationType",value:function(e){e===et.ValidateTypeEnum.NONE?this.propertyService.forEachSelectedFields(function(e){return e.setValidateAction({type:et.ValidateTypeEnum.NONE})}):(this.inRangeFrom="",this.inRangeTo="",this.customScript="",this.digest())}},{key:"onUserClickEditCustomScriptButton",value:function(){var e=this;this.actionUIService.getJavaScriptActionEditorUI().open(void 0,{initData:{javascript:this.customScript},ok:function(t){var n=t.javascript;return e.customScript=n,e.digest(),e.propertyService.forEachSelectedFields(function(e){return e.setValidateAction({type:et.ValidateTypeEnum.CUSTOM,javascript:n})})}})}}],[{key:"getName",value:function(){return"validation-action-editor"}},{key:"inject",value:function(){return{propertyService:ti,viewer:"PDFViewer"}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:Ir()()})),Ur=c(8006),Rr=c.n(Ur),Lr=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"triggersList",[]),q(e,"actionTypesList",[]),q(e,"actionTrigger",void 0),q(e,"actionType",void 0),e}return m(t,e),p(t,[{key:"allInjected",value:function(){return n(function(){var e;return b(this,function(t){switch(t.label){case 0:return e=this,[4,this.pdfViewer.viewerUI.getActionEditorUI()];case 1:return e.actionUIService=t.sent(),[2]}})}).call(this)}},{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.addDestroyHook(this.configService.subscribeOptions("action-trigger-list",function(t){var n;(e.triggersList=t,e.actionTrigger)||(e.actionTrigger=null===(n=t[0])||void 0===n?void 0:n.id);e.digest()}),this.configService.subscribeOptions("action-type-list",function(t){var n;(e.actionTypesList=t,e.actionTypesList.push({id:et.ActionType.gotoR,text:"ui_:dialog.actionDialog.selectAction.gotoR"}),e.actionType)||(e.actionType=null===(n=t[0])||void 0===n?void 0:n.id);e.digest()}))}},{key:"showCreateActionDialog",value:function(e,t){var i=this;if("number"==typeof e){var r=y(this.formActionPropertiesService.getSelectedWidgets(),1)[0],o=y(this.formActionPropertiesService.getSelectedFields(),1)[0];if(r&&o)switch(t){case et.ActionType.submitForm:this.actionUIService.getSubmitFormActionDialogComponent().open(void 0,{ok:function(t){i.formActionPropertiesService.appendAdditionalAction(r,{trigger:e,actionData:{type:et.ActionType.submitForm,data:t}})}});break;case et.ActionType.javaScript:this.actionUIService.getJavaScriptActionEditorUI().open(void 0,{initData:{javascript:""},ok:function(t){i.formActionPropertiesService.appendAdditionalAction(r,{trigger:e,actionData:{type:et.ActionType.javaScript,data:t}})}});break;case et.ActionType.resetForm:this.actionUIService.getResetFormActionEditorUI().open(void 0,{ok:function(t){i.formActionPropertiesService.appendAdditionalAction(r,{trigger:e,actionData:{type:et.ActionType.resetForm,data:t}})}});break;case et.ActionType.goto:case et.ActionType.gotoR:case et.ActionType.uri:case et.ActionType.launch:case et.ActionType.importData:this.actionUIService.getGeneralActionEditorUI().open(void 0,{lockActionType:!0,initData:{type:t},ok:function(t){switch(t.type){case et.ActionType.uri:case et.ActionType.goto:case et.ActionType.gotoR:case et.ActionType.launch:case et.ActionType.importData:i.formActionPropertiesService.appendAdditionalAction(r,{trigger:e,actionData:t})}}});break;case et.ActionType.hide:this.actionUIService.getHideFieldActionEditorUI().open(void 0,{ok:function(t){i.formActionPropertiesService.appendAdditionalAction(r,{trigger:e,actionData:{type:et.ActionType.hide,data:t}})}});break;case et.ActionType.named:this.actionUIService.getNamedActionEditorUI().then(function(t){t.show(function(t){var n=t.menuName;i.formActionPropertiesService.appendAdditionalAction(r,{trigger:e,actionData:{type:et.ActionType.named,data:{name:n}}})})});break;case et.ActionType.setOCGState:this.pdfViewer.viewerUI.confirm({message:"alert.setLayerVisibleTips",level:"warning"}).then(function(){return n(function(){return b(this,function(t){return this.formActionPropertiesService.appendAdditionalAction(r,{trigger:e,actionData:{type:et.ActionType.setOCGState,data:{visibleLayerNodeObjNums:[],hiddenLayerNodeObjNums:[]}}}),[2]})}).call(i)}).catch(function(){});break;case et.ActionType.thread:this.actionUIService.getThreadActionEditorUI().then(function(t){var n;null===(n=i.pdfViewer.currentPDFDoc)||void 0===n||n.getPdfArticle().getArticleList(),new Promise(function(e){var t=i.pdfViewer.currentPDFDoc;e(t?t.getPdfArticle().getArticleList():[])}).then(function(n){t.show(n,-1,function(t){i.formActionPropertiesService.appendAdditionalAction(r,{trigger:e,actionData:{type:et.ActionType.thread,data:{isDestThreadInCurrentDoc:!0,destThread:t.objNum,destThreadIndex:t.index,destThreadTitle:t.title}}})})})})}}}}],[{key:"getName",value:function(){return"widget-action-creator"}},{key:"inject",value:function(){return{configService:tt,formActionPropertiesService:ti,pdfViewer:"PDFViewer"}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:Rr()()})),Vr=c(1133),Mr=c.n(Vr),Br={HandMenuItem:"home.hand",Print:"home.print",FirstPage:"home.firstPage",PrevPage:"home.previousPage",NextPage:"home.nextPage",LastPage:"home.lastPage",PrevView:"home.prevView",NextView:"home.nextView",ZoomViewIn:"home.zoomIn",ZoomViewOut:"home.zoomOut",ActualSize:"home.actualSize",FitPage:"home.fitPage",FitVisible:"home.fitVisible",FitWidth:"home.fitWidth",SinglePage:"home.singlePage",OneColumn:"home.continuous",TwoPages:"home.facing",TwoColumns:"home.continuousFacing",GeneralInfo:"file.properties",GeneralPrefs:"file.preferences",AddFileAttachment:"edit.fileAttachment",ExtractPages:"pageOrganization.extract",ReplacePages:"pageOrganization.replace",DeletePages:"pageOrganization.delete",CropPages:"pageOrganization.cropPage",RotatePages:"pageOrganization.multiPageRotate","Annots:Tool:InkMenuItem":"comment.pencil",SaveAs:"saveAs.index",FullScreen:"fullScreen.index",ShowHideBookmarks:"view.bookmark",ShowHideAnnotManager:"view.comments",ShowHideThumbnailss:"view.pages",ShowHideOptCont:"view.layers",Find:"view.search",ShowHideFileAttachment:"view.attachment",GoToPage:"home.page",ZoomViewTo:"home.zoomTo"};function Hr(e,t){var n=Br[e]||"";if(!n)return n;t=t||{t:function(e){return e}};var i="";if(!n){var r=e,o=t.t("ui_:dialog.actionDialog.selectAction.menu");return e.includes(":")&&(r=e.split(":")[1]),"".concat(o,": ").concat(r)}var a=n.split(".");if("index"===a[1])i=t.t("ui_:menuItemTree.".concat(n));else{var s=t.t("ui_:menuItemTree.".concat(a[0],".index")),c=t.t("ui_:menuItemTree.".concat(n));i="".concat(s," > ").concat(c)}return i}var Wr,jr,$r=Q.SeniorComponentFactory.createSuperClass({template:Mr()()}),zr=(q(Wr={},et.ActionTriggerEvents.ANNOT_MOUSE_BUTTON_RELEASED,"editActions.mouseUp"),q(Wr,et.ActionTriggerEvents.ANNOT_MOUSE_BUTTON_PRESSED,"editActions.mouseDown"),q(Wr,et.ActionTriggerEvents.ANNOT_CURSOR_ENTER,"editActions.mouseEnter"),q(Wr,et.ActionTriggerEvents.ANNOT_CURSOR_EXIT,"editActions.mouseExit"),q(Wr,et.ActionTriggerEvents.ANNOT_RECEIVE_INPUT_FOCUS,"editActions.focus"),q(Wr,et.ActionTriggerEvents.ANNOT_LOSE_INPUT_FOCUS,"editActions.blur"),q(Wr,et.ActionTriggerEvents.ANNOT_PAGE_OPENED,"editActions.pageOpen"),q(Wr,et.ActionTriggerEvents.ANNOT_PAGE_CLOSED,"editActions.pageClose"),q(Wr,et.ActionTriggerEvents.ANNOT_PAGE_VISIBLE,"editActions.pageVisible"),q(Wr,et.ActionTriggerEvents.ANNOT_PAGE_INVISIBLE,"editActions.pageInvisible"),Wr),Gr=(q(jr={},et.ActionType.thread,"ui_:dialog.actionDialog.selectAction.thread"),q(jr,et.ActionType.goto,"ui_:dialog.actionDialog.selectAction.goto"),q(jr,et.ActionType.gotoR,"ui_:dialog.actionDialog.selectAction.gotoR"),q(jr,et.ActionType.gotoE,"ui_:dialog.actionDialog.selectAction.gotoE"),q(jr,et.ActionType.uri,"ui_:dialog.actionDialog.selectAction.webLink"),q(jr,et.ActionType.submitForm,"ui_:dialog.actionDialog.selectAction.submit"),q(jr,et.ActionType.importData,"ui_:dialog.actionDialog.selectAction.import"),q(jr,et.ActionType.javaScript,"ui_:dialog.actionDialog.selectAction.run"),q(jr,et.ActionType.resetForm,"ui_:dialog.actionDialog.selectAction.reset"),q(jr,et.ActionType.hide,"ui_:dialog.actionDialog.selectAction.field"),q(jr,et.ActionType.launch,"ui_:dialog.actionDialog.selectAction.file"),q(jr,et.ActionType.setOCGState,"ui_:dialog.actionDialog.selectAction.layerVisible"),q(jr,et.ActionType.named,"ui_:dialog.actionDialog.selectAction.menuItem"),jr),Xr=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"actionsTreeData",[]),q(e,"selectedData",void 0),q(e,"isTriggerSelected",!1),q(e,"isActionSelected",!1),q(e,"isActionCanMoveUp",!1),q(e,"isActionCanMoveDown",!1),q(e,"nextSelectedNodeId",void 0),q(e,"allActions",[]),q(e,"normalActionObjNumbers",[]),e}return m(t,e),p(t,[{key:"allInjected",value:function(){return n(function(){var e;return b(this,function(t){switch(t.label){case 0:return e=this,[4,this.pdfViewer.viewerUI.getActionEditorUI()];case 1:return e.actionUIService=t.sent(),[2]}})}).call(this)}},{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this);var n=this.formActionPropertiesService.getAllActions(),r=this.formActionPropertiesService.getActions();r.ownsTo(this),n.ownsTo(this),n.onChange(function(t,n){if(!t||!n)return e.actionsTreeData=[],void(e.allActions=[]);var i;(e.actionsTreeData=e.convertActionDataToTreeData(n),e.allActions=n.map(function(e){return e.data}).reduce(function(e,t){var n;return(n=e).push.apply(n,[t].concat(_t(t.subAction))),e},[]),e.nextSelectedNodeId)?(e.selectActionNode(e.nextSelectedNodeId),e.nextSelectedNodeId=void 0):e.selectActionNode(null===(i=e.selectedData)||void 0===i?void 0:i.id)}),r.onChange(function(){var t=r.value;e.normalActionObjNumbers=t?[t.objNumber].concat(t.subAction.reduce(function e(t,n){var i;return(i=t).push.apply(i,[n].concat(_t(n.subAction.reduce(e,t)))),t},[]).map(function(e){return e.objNumber})):[]})}},{key:"isNormalAction",value:function(e){return this.normalActionObjNumbers.includes(e)}},{key:"onUserSelectTreeNode",value:function(e){this.selectActionNode(e)}},{key:"onUserMoveActionUp",value:function(){return n(function(){return b(this,function(e){switch(e.label){case 0:return[4,this.moveAction("up")];case 1:return e.sent(),[2]}})}).call(this)}},{key:"onUserMoveActionDown",value:function(){return n(function(){return b(this,function(e){switch(e.label){case 0:return[4,this.moveAction("down")];case 1:return e.sent(),[2]}})}).call(this)}},{key:"onUserEditAction",value:function(){return n(function(){var e,t,n,i,r,o,a,s,c,l,u,d,p,f;return b(this,function(g){switch(g.label){case 0:if(e=this,void 0===(i=null===(t=this.selectedData)||void 0===t?void 0:t.id))return[2];if(r=this.allActions,!(o=r.find(function(e){return e.objNumber===Number(i)})))return[2];if(a=y(this.formActionPropertiesService.getSelectedWidgets(),1),!(s=a[0]))return[2];switch(c=null===(n=this.selectedData)||void 0===n?void 0:n.trigger,l=o.objNumber,u=this.formActionPropertiesService,d=o.data,p=function(t){e.isNormalAction(l)?u.updateAction(s,l,d,t):u.updateAdditionalAction(s,{trigger:c,actionObjNumber:l,oldActionData:d,newActionData:t})},o.type){case et.ActionType.goto:case et.ActionType.gotoR:case et.ActionType.uri:case et.ActionType.importData:case et.ActionType.launch:return[3,1]}return[3,3];case 1:return f={lockActionType:!0,initData:o,ok:function(e){p(e.data)}},[4,this.actionUIService.getGeneralActionEditorUI()];case 2:return g.sent().open(void 0,f),[2];case 3:switch(o.type){case et.ActionType.javaScript:return[3,4];case et.ActionType.hide:return[3,6];case et.ActionType.resetForm:return[3,8];case et.ActionType.submitForm:return[3,10];case et.ActionType.named:return[3,12]}return[3,14];case 4:return[4,this.actionUIService.getJavaScriptActionEditorUI()];case 5:return g.sent().open(void 0,{initData:o.data,ok:function(e){p(e)}}),[3,14];case 6:return[4,this.actionUIService.getHideFieldActionEditorUI()];case 7:return g.sent().open(void 0,{initData:o.data,ok:function(e){p(e)}}),[3,14];case 8:return[4,this.actionUIService.getResetFormActionEditorUI()];case 9:return g.sent().open(void 0,{initData:o.data,ok:function(e){p(e)}}),[3,14];case 10:return[4,this.actionUIService.getSubmitFormActionDialogComponent()];case 11:return g.sent().open(void 0,{initData:o.data,ok:function(e){p(e)}}),[3,14];case 12:return[4,this.actionUIService.getNamedActionEditorUI()];case 13:return g.sent().show(function(e){var t=e.menuName;p({name:t})}),[3,14];case 14:return[2]}})}).call(this)}},{key:"onUserDeleteAction",value:function(){return n(function(){var e,t,n,i,r,o,a,s,c;return b(this,function(l){switch(l.label){case 0:switch(e=this,null===(t=this.selectedData)||void 0===t?void 0:t.type){case"trigger":i=Number(null===(r=this.selectedData)||void 0===r?void 0:r.id);break;case"action":if(n=Number(null===(o=this.selectedData)||void 0===o?void 0:o.id),isNaN(n))return[2];i=null===(a=this.selectedData)||void 0===a?void 0:a.trigger;break;default:return[2]}return null==i?[2]:(s=y(this.formActionPropertiesService.getSelectedWidgets(),1),(c=s[0])?(this.nextSelectedNodeId=function(){var t,i;if("number"==typeof n){var r=null===(i=e.selectedData)||void 0===i||null===(t=i.parent)||void 0===t?void 0:t.children;if(r){var o,a,s=r.indexOf(e.selectedData);return s===r.length-1?null===(o=r[s-1])||void 0===o?void 0:o.id:null===(a=r[s+1])||void 0===a?void 0:a.id}}}(),[4,this.formActionPropertiesService.removeAction(c,{trigger:i,actionObjNumber:n})]):[2]);case 1:return l.sent(),[2]}})}).call(this)}},{key:"selectActionNode",value:function(e){var t=e?this.findActionTreeData(e):void 0;this.selectedData=t,this.isTriggerSelected="trigger"===(null==t?void 0:t.type),this.isActionSelected="action"===(null==t?void 0:t.type),this.isActionCanMoveUp=!0!==(null==t?void 0:t.isFirst),this.isActionCanMoveDown=!0!==(null==t?void 0:t.isLast),this.digest()}},{key:"moveAction",value:function(e){return n(function(){var t,n,i,r,o,a;return b(this,function(s){switch(s.label){case 0:return i=Number(null===(t=this.selectedData)||void 0===t?void 0:t.id),isNaN(i)?[2]:null==(r=null===(n=this.selectedData)||void 0===n?void 0:n.trigger)?[2]:(o=y(this.formActionPropertiesService.getSelectedWidgets(),1),(a=o[0])?[4,this.formActionPropertiesService.moveAction(a,{targetActionObjNumber:i,direction:e,trigger:r})]:[2]);case 1:return s.sent(),[2]}})}).call(this)}},{key:"findActionTreeData",value:function(e){return function t(n){for(var i=0;i<n.length;i++){var r=n[i];if(r.id===e)return r;if(r.children){var o=t(r.children);if(o)return o}}}(this.actionsTreeData)}},{key:"convertActionDataToTreeData",value:function(e){var t=this,n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.push(e),e.subAction.forEach(function(e){n(e,t)}),t};return e.reduce(function(e,i,r,o){var a,s=i.data,c=i.trigger,l=e.find(function(e){return e.id===c+""}),u=l||{id:c+"",type:"trigger",selectable:!0,activated:!0,title:zr[c],children:[],isFirst:0==r,isLast:r===o.length-1};return(a=u.children).push.apply(a,_t(n(s).map(function(e,n,i){var r=t.convertActionData(e);if(r)return Ct(St({},r),{trigger:c,isFirst:0===n,isLast:n===i.length-1,parent:u})}).filter(Boolean))),!l&&u.children.length>0&&e.push(u),e},[])}},{key:"convertActionData",value:function(e){var t=[],n={id:e.objNumber+"_summary",selectable:!1,type:"summary",children:[],title:""};switch(e.type){case et.ActionType.javaScript:case et.ActionType.resetForm:case et.ActionType.submitForm:break;case et.ActionType.gotoR:var i=e.data.destination;t.push(Ct(St({},n),{id:e.objNumber+"summary_file",title:"[html]form-designer:action-summary.label.file",i18nOptions:{path:e.data.fileSpec.fileName}})),i&&t.push(Ct(St({},n),{id:e.objNumber+"_summary_page_no",title:"form-designer:action-summary.label.pageNo",i18nOptions:{pageNumber:i.pageIndex+1}}),Ct(St({},n),{id:e.objNumber+"_summary_zoom_level",title:"form-designer:action-summary.label.zoomLevel",i18nOptions:{scale:Kr(i.zoomMode,i.zoomFactor)}}));break;case et.ActionType.goto:var r=e.data.destination;t.push(Ct(St({},n),{id:e.objNumber+"summary_file",title:"[html]form-designer:action-summary.label.thisDocument"}),Ct(St({},n),{id:e.objNumber+"_summary_page_no",title:"form-designer:action-summary.label.pageNo",i18nOptions:{pageNumber:r.pageIndex+1}}),Ct(St({},n),{id:e.objNumber+"_summary_zoom_level",title:"form-designer:action-summary.label.zoomLevel",i18nOptions:{scale:Kr(r.zoomMode,r.zoomFactor)}}));break;case et.ActionType.gotoE:return;case et.ActionType.hide:var o=e.data,a=o.hideState;t.push(Ct(St({},n),{id:e.objNumber+"_summary_show_hide_field",title:"form-designer:action-summary.label."+(a?"hideField":"showField"),i18nOptions:{fieldName:o.fieldNames.join(",")}}));break;case et.ActionType.launch:t.push(Ct(St({},n),{id:e.objNumber+"_summary_file_name",title:"[html]form-designer:action-summary.label.file",i18nOptions:{path:e.data.fileSpec.fileName}}));break;case et.ActionType.uri:t.push(Ct(St({},n),{id:e.objNumber+"_summary_uri",title:"[html]form-designer:action-summary.label.uri",i18nOptions:{uri:e.data.uri}}));break;case et.ActionType.importData:t.push(Ct(St({},n),{id:e.objNumber+"_summary_file_name",title:"[html]form-designer:action-summary.label.file",i18nOptions:{path:e.data.fileSpec.fileName}}));break;case et.ActionType.named:t.push(Ct(St({},n),{id:e.objNumber+"_summary_named",title:Hr(e.data.name,this.pdfViewer.i18n)}))}return{id:e.objNumber+"",title:Gr[e.type],type:"action",selectable:!0,activated:!0,children:t}}}],[{key:"getName",value:function(){return"widget-action-tree"}},{key:"inject",value:function(){return{formActionPropertiesService:ti,pdfViewer:"PDFViewer"}}}]),t}($r);function Kr(e,t){switch(e){case ei.ZoomMode.ZoomFitHorz:return"fitWidth";case ei.ZoomMode.ZoomFitBHorz:return"fitVisible";case ei.ZoomMode.ZoomFitPage:return"fitHeight";case ei.ZoomMode.ZoomFitVert:return"fitVisible"}return t||" "}K.registerComponent(Or),K.registerComponent(kr),K.registerComponent(Lr),K.registerComponent(Xr),K.registerComponent(Pr),K.registerComponent(Er);var qr=c(4106),Yr=c.n(qr),Zr=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this);var n=this.commonPropertiesService.getWidgetFlag();n.ownsTo(this),n.onChange(function(t,n){t&&void 0!==n?(e.unlock(),e.setValue(!!(n&W.locked))):e.lock()})}},{key:"onChange",value:function(e){this.commonPropertiesService.forEachSelectedWidgets(function(t){var n=t.getFlags(),i=e?n|W.locked:n^W.locked;if(i!==n)return t.setFlags(i,!1)})}}],[{key:"getName",value:function(){return"lock-widget-checkbox"}},{key:"inject",value:function(){return{commonPropertiesService:ct}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:Yr()()}));K.registerComponent(Zr);var Jr=c(670),Qr=c.n(Jr),eo=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"value",{x:0,y:0}),q(e,"lastValue",St({},e.value)),e}return m(t,e),p(t,[{key:"positionX",get:function(){return this.value.x/100*40}},{key:"positionY",get:function(){return(100-this.value.y)/100*40}},{key:"getValue",value:function(){return this.value}},{key:"setValue",value:function(e){Object.assign(this.value,e),this.digest()}},{key:"onUserChanged",value:function(){this.trigger("change",this.format(this.value),this.format(this.lastValue)),this.lastValue=St({},this.value)}},{key:"format",value:function(e){return{x:parseFloat(e.x+"")/100,y:parseFloat(e.y+"")/100}}}],[{key:"getName",value:function(){return"icon-fit-fraction"}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:Qr()()})),to=c(9781),no=c.n(to),io=[{id:"always",text:"form-designer:dialog.options.pushButton.advancedDialog.optionAlways"},{id:"never",text:"form-designer:dialog.options.pushButton.advancedDialog.optionNever"},{id:"bigger",text:"form-designer:dialog.options.pushButton.advancedDialog.optionBig"},{id:"smaller",text:"form-designer:dialog.options.pushButton.advancedDialog.optionSmall"}],ro=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"scaleWayTypeOptions",io),q(e,"scaleWayType",e.scaleWayTypeOptions[0].id),q(e,"proportionallyScalingOptions",[{id:!0,text:"form-designer:dialog.options.pushButton.advancedDialog.optionProportionally"},{id:!1,text:"form-designer:dialog.options.pushButton.advancedDialog.optionNonProportionally"}]),q(e,"isProportionalScaling",e.proportionallyScalingOptions[0].id),q(e,"fitBounds",!1),q(e,"fraction",{x:0,y:0}),e}return m(t,e),p(t,[{key:"mounted",value:function(){f(i(t.prototype),"mounted",this).call(this),this.reset()}},{key:"setIconFitOptions",value:function(e){this.scaleWayType=function(){switch(e.scaleWayType){case et.ScaleWayType.NONE:case et.ScaleWayType.NEVER:return"never";case et.ScaleWayType.ALWAYS:return"always";case et.ScaleWayType.BIGGER:return"bigger";case et.ScaleWayType.SMALLER:return"smaller"}}(),this.isProportionalScaling=e.isProportionalScaling,this.fitBounds=e.fitBounds,this.fraction={x:Math.round(100*e.horizontalFraction),y:Math.round(100*e.verticalFraction)},this.digest()}},{key:"reset",value:function(){this.setIconFitOptions({scaleWayType:et.ScaleWayType.NEVER,isProportionalScaling:!0,fitBounds:!1,verticalFraction:0,horizontalFraction:0})}},{key:"onClickOK",value:function(){var e=this,t={scaleWayType:function(){switch(e.scaleWayType){case"never":return et.ScaleWayType.NEVER;case"always":return et.ScaleWayType.ALWAYS;case"bigger":return et.ScaleWayType.BIGGER;case"smaller":return et.ScaleWayType.SMALLER}return et.ScaleWayType.NONE}(),isProportionalScaling:this.isProportionalScaling,fitBounds:this.fitBounds,horizontalFraction:this.fraction.x/100,verticalFraction:this.fraction.y/100};this.trigger("ok",t),this.hide()}},{key:"onClickCancel",value:function(){this.reset(),this.trigger("cancel"),this.hide()}},{key:"open",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(i(t.prototype),"open",this).call(this,e,n)}},{key:"doShown",value:function(e){if(null==e?void 0:e.ok){var n=this.once("ok",e.ok);this.once("hidden",n)}if(null==e?void 0:e.cancel){var r=this.once("cancel",e.cancel);this.once("hidden",r)}f(i(t.prototype),"doShown",this).call(this)}}],[{key:"getName",value:function(){return"icon-fit-dialog"}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:no()()}));K.registerComponent(eo),K.registerComponent(ro);var oo=c(8548),ao=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this);var r=this.component.parent,o=this.component.getPDFUI(),a=r.on("beforeshow",function(){return n(function(){var e,t;return b(this,function(n){switch(n.label){case 0:return[4,o.getAllActivatedElements()];case 1:return e=n.sent(),t=e.filter(function(e){return e.annot&&e.annot.getType()===oo.AnnotType.widget}),t.length===e.length?this.component.enable():this.component.disable(),[2]}})}).call(e)});this.addDestroyHook(a)}},{key:"handle",value:function(){this.component.getRoot().querySelector("fv--form-designer-widget-properties-dialog").show()}}],[{key:"getName",value:function(){return"ShowWidgetPropertiesController"}}]),t}(Q.Controller),so="contextmenu-item-show-properties",co={template:'<contextmenu-item @controller="form-designer-v2:ShowWidgetPropertiesController" name="fv--ui-show-widget-properties-contextmenu-item" @alias-name="propertiesMenu">contextmenu.annot.properties</contextmenu-item>'};K.registerFragment(so,co),K.registerController(ao);var lo,uo="contextmenu-item-set-tab-order",po={template:'\n            <contextmenu-item\n                @controller="form-designer-v2:SetWidgetTabOrderController"\n                name="fv--ui-contextmenu-item-set-tab-order"\n            >form-designer:contextMenu.setTabOrder</contextmenu-item>'},fo=function(e){return e.STATE_HANDLER_HAND="hand",e.STATE_HANDLER_CHECK_THE_SEARCH="checkTheSearch",e.STATE_HANDLER_CREATE_CARET="createCaret",e.STATE_HANDLER_CREATE_ARROW="createArrow",e.STATE_HANDLER_CREATE_AREA_HIGHLIGHT="createAreaHighlight",e.STATE_HANDLER_CREATE_CREATE_AREA_HIGHLIGHT="createAreaHighlight",e.STATE_HANDLER_CREATE_CIRCLE="createCircle",e.STATE_HANDLER_CREATE_FILE_ATTACHMENT="createFileAttachment",e.STATE_HANDLER_CREATE_HIGHLIGHT="createHighlight",e.STATE_HANDLER_CREATE_IMAGE="createImage",e.STATE_HANDLER_CREATE_LINK="createLink",e.STATE_HANDLER_CREATE_LINE="createLine",e.STATE_HANDLER_CREATE_DISTANCE="createDistance",e.STATE_HANDLER_CREATE_PERIMETER="createPerimeter",e.STATE_HANDLER_CREATE_AREA="createArea",e.STATE_HANDLER_CREATE_CIRCLE_AREA="createCircleArea",e.STATE_HANDLER_CREATE_PENCIL="createPencil",e.STATE_HANDLER_CREATE_POLYGON_CLOUD="createPolygonCloud",e.STATE_HANDLER_CREATE_POLYGON="createPolygon",e.STATE_HANDLER_CREATE_POLYLINE="createPolyline",e.STATE_HANDLER_CREATE_REPLACE="createReplace",e.STATE_HANDLER_CREATE_SQUARE="createSquare",e.STATE_HANDLER_CREATE_SQUIGGLY="createSquiggly",e.STATE_HANDLER_CREATE_STAMP="createStamp",e.STATE_HANDLER_CREATE_STRIKE_OUT="createStrikeOut",e.STATE_HANDLER_CREATE_TEXT="createText",e.STATE_HANDLER_CREATE_UNDERLINE="createUnderline",e.STATE_HANDLER_MARQUEE="marquee",e.STATE_HANDLER_ERASER="eraser",e.STATE_HANDLER_LOUPE="loupe",e.STATE_HANDLER_SELECT_TEXT_ANNOTATION="select-text-annotation",e.STATE_HANDLER_SELECT_TEXT_IMAGE="select-text-image",e.STATE_HANDLER_SELECT_ANNOTATION="select-annotation",e.STATE_HANDLER_CREATE_FREETEXT_BOX="createFreeTextBox",e.STATE_HANDLER_CREATE_FREETEXT_CALLOUT="createFreeTextCallout",e.STATE_HANDLER_CREATE_FREETEXT_TYPEWRITER="createFreeTextTypewriter",e.STATE_HANDLER_CREATE_FIELD_TEXT="CreateTextStateHandler",e.STATE_HANDLER_CREATE_FIELD_SIGNATURE="CreateSignStateHandler",e.STATE_HANDLER_CREATE_FIELD_PUSH_BUTTON="CreatePushButtonStateHandler",e.STATE_HANDLER_CREATE_FIELD_CHECK_BOX="CreateCheckBoxStateHandler",e.STATE_HANDLER_CREATE_RADIO_BUTTON="CreateRadioButtonStateHandler",e.STATE_HANDLER_CREATE_FIELD_COMBO_BOX="CreateComboBoxStateHandler",e.STATE_HANDLER_CREATE_FIELD_LIST_BOX="CreateListBoxStateHandler",e.STATE_HANDLER_CREATE_FIELD_DATE="CreateDateStateHandler",e.STATE_HANDLER_CREATE_FIELD_IMAGE="CreateImageStateHandler",e.STATE_HANDLER_SNAPSHOT_TOOL="snapshot-tool",e.STATE_HANDLER_CREATE_DOCUMENT_ATTACHMENT="createDocumentAttachment",e}({}),go=(fo.STATE_HANDLER_HAND,fo.STATE_HANDLER_CHECK_THE_SEARCH,fo.STATE_HANDLER_CREATE_CARET),mo=fo.STATE_HANDLER_CREATE_ARROW,ho=fo.STATE_HANDLER_CREATE_AREA_HIGHLIGHT,vo=(fo.STATE_HANDLER_CREATE_AREA_HIGHLIGHT,fo.STATE_HANDLER_CREATE_CIRCLE),yo=fo.STATE_HANDLER_CREATE_FILE_ATTACHMENT,bo=fo.STATE_HANDLER_CREATE_HIGHLIGHT,So=fo.STATE_HANDLER_CREATE_IMAGE,Co=fo.STATE_HANDLER_CREATE_LINK,_o=fo.STATE_HANDLER_CREATE_LINE,wo=fo.STATE_HANDLER_CREATE_DISTANCE,xo=fo.STATE_HANDLER_CREATE_PERIMETER,ko=fo.STATE_HANDLER_CREATE_AREA,Ao=fo.STATE_HANDLER_CREATE_CIRCLE_AREA,To=fo.STATE_HANDLER_CREATE_PENCIL,Eo=fo.STATE_HANDLER_CREATE_POLYGON_CLOUD,Fo=fo.STATE_HANDLER_CREATE_POLYGON,Do=fo.STATE_HANDLER_CREATE_POLYLINE,Po=fo.STATE_HANDLER_CREATE_REPLACE,No=fo.STATE_HANDLER_CREATE_SQUARE,Io=fo.STATE_HANDLER_CREATE_SQUIGGLY,Oo=fo.STATE_HANDLER_CREATE_STAMP,Uo=fo.STATE_HANDLER_CREATE_STRIKE_OUT,Ro=fo.STATE_HANDLER_CREATE_TEXT,Lo=fo.STATE_HANDLER_CREATE_UNDERLINE,Vo=(fo.STATE_HANDLER_MARQUEE,fo.STATE_HANDLER_ERASER,fo.STATE_HANDLER_LOUPE,fo.STATE_HANDLER_SELECT_TEXT_ANNOTATION,fo.STATE_HANDLER_SELECT_TEXT_IMAGE,fo.STATE_HANDLER_SELECT_ANNOTATION),Mo=fo.STATE_HANDLER_CREATE_FREETEXT_TYPEWRITER,Bo=fo.STATE_HANDLER_CREATE_FREETEXT_CALLOUT,Ho=fo.STATE_HANDLER_CREATE_FREETEXT_BOX;fo.STATE_HANDLER_SNAPSHOT_TOOL,fo.STATE_HANDLER_CREATE_DOCUMENT_ATTACHMENT,fo.STATE_HANDLER_CREATE_FIELD_TEXT,fo.STATE_HANDLER_CREATE_FIELD_SIGNATURE,fo.STATE_HANDLER_CREATE_FIELD_PUSH_BUTTON,fo.STATE_HANDLER_CREATE_FIELD_CHECK_BOX,fo.STATE_HANDLER_CREATE_RADIO_BUTTON,fo.STATE_HANDLER_CREATE_FIELD_COMBO_BOX,fo.STATE_HANDLER_CREATE_FIELD_LIST_BOX,fo.STATE_HANDLER_CREATE_FIELD_DATE,fo.STATE_HANDLER_CREATE_FIELD_IMAGE,fo.STATE_HANDLER_CREATE_RADIO_BUTTON,q(lo={},Ro,"text"),q(lo,bo,"highlight"),q(lo,Uo,"strikeout"),q(lo,Lo,"underline"),q(lo,Io,"squiggly"),q(lo,Po,"strikeout"),q(lo,go,"caret"),q(lo,Mo,"freetext"),q(lo,Bo,"freetext"),q(lo,Ho,"freetext"),q(lo,No,"square"),q(lo,vo,"circle"),q(lo,_o,"line"),q(lo,mo,"line"),q(lo,Fo,"polygon"),q(lo,Do,"polyline"),q(lo,Eo,"polygon"),q(lo,ho,"highlight"),q(lo,To,"ink"),q(lo,Oo,"stamp"),q(lo,wo,"line"),q(lo,xo,"polyline"),q(lo,ko,"polygon"),q(lo,Ao,"circle"),q(lo,yo,"fileattachment"),q(lo,So,"screen"),q(lo,Co,"link"),q(lo,"create-multi-media-state","screen"),q(lo,"create-redaction-text-image-state","redact"),q(lo,"create-redaction-state","redact");const Wo={unKnownType:"unknowntype",text:"text",link:"link",freeText:"freetext",line:"line",square:"square",circle:"circle",polygon:"polygon",polyLine:"polyline",polyline:"polyline",highlight:"highlight",underline:"underline",squiggly:"squiggly",strikeOut:"strikeout",stamp:"stamp",caret:"caret",ink:"ink",psInk:"psink",fileAttachment:"fileattachment",sound:"sound",movie:"movie",widget:"widget",screen:"screen",printerMark:"printermark",trapNet:"trapnet",watermark:"watermark",threeD:"3d",popup:"popup",redact:"redact"};var jo=C.vendors.EventEmitter,$o="widget-tab-order-changed",zo=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"controlPageIndex",-1),q(e,"orderNumber",0),q(e,"showOrderNumber",new Y.ValueStore(!1)),q(e,"tabOrderTypeStore",new Y.ValueStore("none")),q(e,"enableManager",new Y.ValueStore(!1)),q(e,"pageWidgetsMap",new Map),q(e,"eventEmitter",new jo),e}return m(t,e),p(t,[{key:"allInjected",value:function(){var e,t=this;this.addDestroyHook(this.pdfViewer.addEventListener((q(e={},F.tabOrderTypeUpdated,function(e){t.pageWidgetsMap.clear(),t.tabOrderTypeStore.dispatch(e)}),q(e,F.switchStateHandler,function(e){e.getStateName()===Vo||t.toggleShowOrderNumber(!1)}),e)),this.pdfViewer.addEventListener(F.tapPage,function(){t.toggleTabOrderManager(!1)}),this.pdfViewer.addEventListener(F.switchStateHandler,function(){t.toggleTabOrderManager(!1)}),this.pdfViewer.addEventListener(F.annotationRemoved,function(e,n){var i=n.getIndex();if(t.isManagerEnabled(i)){var r=t.pageWidgetsMap.get(i);if(r){var o=e.map(function(e){return r.indexOf(e.getObjectNumber())}).filter(function(e){return e>-1});if(0!==o.length){o.sort(function(e,t){return e>t?-1:0}),o.forEach(function(e){r.splice(e,1)});var a=o.pop(),s=r.slice(a);t.eventEmitter.emit($o,s)}}}}))}},{key:"onTabOrderTypeChanged",value:function(e){return this.tabOrderTypeStore.subscribe(e)}},{key:"onTabOrderEnabled",value:function(e){return this.enableManager.subscribe(e)}},{key:"onShowOrderNumber",value:function(e){return this.showOrderNumber.subscribe(e)}},{key:"onWidgetTabOrderChanged",value:function(e){var t=this;return this.eventEmitter.on($o,e),function(){t.eventEmitter.off($o,e)}}},{key:"toggleShowOrderNumber",value:function(e){this.showOrderNumber.getCurrentValue()!==e&&(this.pageWidgetsMap.clear(),this.controlPageIndex=-1,this.orderNumber=0,!1!==this.enableManager.getCurrentValue()&&this.enableManager.dispatch(!1),this.showOrderNumber.dispatch(e))}},{key:"toggleTabOrderManager",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(this.enableManager.getCurrentValue()!==e){if(this.pageWidgetsMap.clear(),e){if(!(t>=0))throw new Error("Invalid page index: ".concat(t));this.controlPageIndex=t}else this.controlPageIndex=-1;this.orderNumber=0,this.showOrderNumber.dispatch(!1),this.enableManager.dispatch(e)}}},{key:"tapWidget",value:function(e){if(this.isManagerEnabled(e.pageIndex)){var t=this.pdfViewer.getCurrentPDFDoc();if(t){var n,i=this.pageWidgetsMap.get(this.controlPageIndex),r=i.slice(0,this.orderNumber);r.includes(e.objNumber)?n=r.pop():(n=i[this.orderNumber],this.orderNumber++);var o=i.indexOf(e.objNumber),a=i.indexOf(n);i[o]=n,i[a]=e.objNumber,this.eventEmitter.emit($o,[e.objNumber,n]),t.setStructureOrder(this.controlPageIndex,i)}}}},{key:"getOrderNumber",value:function(e){return n(function(){var t;return b(this,function(i){switch(i.label){case 0:return t=this,this.isOrderNumberVisibleAt(e.pageIndex)?[4,n(function(){var t,n,i,r,o;return b(this,function(a){switch(a.label){case 0:return this.pageWidgetsMap.has(e.pageIndex)?[2,this.pageWidgetsMap.get(e.pageIndex)]:[3,1];case 1:return(t=this.pdfViewer.getCurrentPDFDoc())?[4,t.getPageByIndex(e.pageIndex)]:[2,[]];case 2:return(n=a.sent())?[4,n.getAnnotIdArrayByOrder()]:[2,[]];case 3:return i=a.sent(),[4,n.getAnnotsByObjectNumArray(i)];case 4:return r=a.sent(),o=r.filter(function(e){return e.getType()===Wo.widget}).map(function(e){return e.getObjectNumber()}),this.pageWidgetsMap.set(e.pageIndex,o),[2,o];case 5:return[2]}})}).call(t)]:[2,0];case 1:return[2,i.sent().indexOf(e.objNumber)+1]}})}).call(this)}},{key:"isOrderNumberVisibleAt",value:function(e){return this.enableManager.getCurrentValue()?this.controlPageIndex===e:this.showOrderNumber.getCurrentValue()}},{key:"isManagerEnabled",value:function(e){return this.enableManager.getCurrentValue()&&this.controlPageIndex===e}}],[{key:"inject",value:function(){return{pdfViewer:"PDFViewer"}}}]),t}(Y.Disposable),Go=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"handle",value:function(){return n(function(){var e,t;return b(this,function(n){switch(n.label){case 0:return[4,this.getSelectedWidgets()];case 1:return e=y.apply(void 0,[n.sent(),1]),t=e[0],this.tabOrderManagerService.toggleTabOrderManager(!0,t.pageRender.index),[2]}})}).call(this)}},{key:"visible",value:function(e,t){return n(function(){return b(this,function(n){return[2,!t&&1===e.length]})})()}}],[{key:"getName",value:function(){return"SetWidgetTabOrderController"}},{key:"inject",value:function(){return{tabOrderManagerService:zo}}}]),t}(qe);K.registerController(Go),K.registerFragment(uo,po);var Xo=c(3272),Ko=c.n(Xo),qo=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this);var r,o=this.formFillerService=this.pdfViewer.getFormFillerService();this.addDestroyHook(this.pdfViewer.addEventListener((q(r={},F.openFileSuccess,function(){e.updateAvailableStatus()}),q(r,F.switchStateHandler,function(){return n(function(){var e;return b(this,function(t){switch(t.label){case 0:return e=this,[4,this.checkAvailable()];case 1:return t.sent()?(o.onDesignModeChange(function(t){e[t!==et.FormDesignMode.NONE?"enable":"disable"]()}),[2]):[2]}})}).call(e)}),r)))}},{key:"updateAvailableStatus",value:function(){var e=this;this.checkAvailable().then(function(t){e[t?"enable":"disable"]()})}},{key:"checkAvailable",value:function(){return n(function(){var e,t,n;return b(this,function(i){return e=this.pdfViewer.getPDFDocRender(),t=null==e?void 0:e.getPDFDoc(),e&&t?(n=e.getUserPermission().getValue(),n&(B.modify|B.annotForm|B.fillForm)?[2,!0]:[2,!1]):[2,!1]})}).call(this)}},{key:"onUserCheck",value:function(e){this.pdfViewer.setFormCreationContinuously(!!e)}}],[{key:"getName",value:function(){return"keep-tool-selected-checkbox"}},{key:"inject",value:function(){return{pdfViewer:"PDFViewer"}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:Ko()()}));K.registerComponent(qo);var Yo,Zo=c(5549),Jo=c.n(Zo),Qo=E.shared.pageRangeTwoDimensionToOne,ea=function(e){return e.AlphabeticOrder="alphabetic",e.TabOrder="tab",e}({}),ta=(q(Yo={},et.FieldType.Barcode,"barcode"),q(Yo,et.FieldType.CheckBox,"check-box"),q(Yo,et.FieldType.ComboBox,"combo-box"),q(Yo,et.FieldType.ListBox,"list-box"),q(Yo,et.FieldType.PushButton,"push-button"),q(Yo,et.FieldType.RadioButton,"radio-button"),q(Yo,et.FieldType.Sign,"sign"),q(Yo,et.FieldType.Text,"text"),Yo),na=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"loadedPages",[]),q(e,"widgetListsStore",new Y.ValueStore([])),q(e,"isAllPageLoadedStore",new Y.ValueStore(!1)),q(e,"isFreeze",!1),e}return m(t,e),p(t,[{key:"allInjected",value:function(){var e=this;this.addDestroyHook(this.pdfViewer.addEventListener(q({},F.openFileSuccess,function(){e.reset()})),this.pdfViewer.addEventListener(F.pageAdded,function(t){e.isFreeze||e.addOrUpdatePages([t])}),this.pdfViewer.addEventListener(F.insertPages,function(t){e.isFreeze||e.addOrUpdatePages(t)}),this.pdfViewer.addEventListener(F.pageRemoved,function(t){e.isFreeze||e.removePages([t])}),this.pdfViewer.addEventListener(F.pagesRemoved,function(t){if(!e.isFreeze){var n=Qo(t);e.removePages(n)}}),this.pdfViewer.addEventListener(F.pageMoved,function(t,n){e.isFreeze||e.updatePagesAfterMovePages([t],n)}),this.pdfViewer.addEventListener(F.pagesMoved,function(t,n,i){if(!e.isFreeze){var r=Qo(t).sort(function(e,t){return e-t});e.updatePagesAfterMovePages(r,n)}}),this.pdfViewer.addEventListener(F.annotationAdded,function(t){e.isFreeze||e.addAnnots(t)}),this.pdfViewer.addEventListener(F.annotationRemoved,function(t){e.isFreeze||e.removeAnnots(t)}),this.pdfViewer.addEventListener(F.renderPageSuccess,function(t){e.isFreeze||e.addOrUpdatePages([t.page])}),this.pdfViewer.addEventListener(F.formFieldRenamed,function(t){e.renameAnnot(t.widgetId,t.newName)}),this.pdfViewer.addEventListener(F.flattenAnnotation,function(t,n){e.isFreeze||e.removeAnnots(n)}),this.pdfViewer.addEventListener(F.flattened,function(t,n,i){e.isFreeze||e.removeAnnots(i)}))}},{key:"reset",value:function(){this.loadedPages.length=0,this.isAllPageLoadedStore.dispatch(!1),this.widgetListsStore.dispatch([])}},{key:"toggleFreeze",value:function(e){this.isFreeze=e,e||this.loadAvailablePages()}},{key:"loadAvailablePages",value:function(){var e=this.pdfViewer.getPDFDocRender();if(e){var t=e.getPDFDoc();if(t){var n=t.getPageCount(),i=Array.from({length:n},function(t,n){return e.getPDFPageRender(n)}).filter(function(e){return e.isRendered&&e.page}).map(function(e){return e.page});this.addOrUpdatePages(i)}}}},{key:"loadAllFields",value:function(){return n(function(){var e,t,n;return b(this,function(i){switch(i.label){case 0:return(e=this.pdfViewer.getPDFDocRender())&&(t=e.getPDFDoc())?[4,t.formAPI.getAllWidgets()]:[2];case 1:return n=i.sent(),this.widgetListsStore.dispatch(n),[2]}})}).call(this)}},{key:"renameAnnot",value:function(e,t){var n=this.widgetListsStore.getCurrentValue(),i=n.findIndex(function(t){return(0,et.isSameWidgetId)(t.widgetId,e)});if(-1!==i){var r=n[i];r&&r.field&&(r.field.name=t,this.widgetListsStore.dispatch(n))}}},{key:"addAnnots",value:function(e){var t=this.loadedPages.map(function(e){return e.getIndex()}),n=this.extractWidgetInfo(e).filter(function(e){return t.includes(e.widgetId.pageIndex)});if(0!==n.length){var i=this.widgetListsStore.getCurrentValue().concat(n);this.widgetListsStore.dispatch(i)}}},{key:"removeAnnots",value:function(e){var t=this.extractWidgetInfo(e);if(0!==t.length){var n=this.widgetListsStore.getCurrentValue().filter(function(e){return!t.some(function(t){return(0,et.isSameWidgetId)(t.widgetId,e.widgetId)})});this.widgetListsStore.dispatch(n)}}},{key:"updatePagesAfterMovePages",value:function(e,t){return n(function(){var n,i,r,o,a,s,c,l,u,d,p;return b(this,function(f){return o=(n=Math).min.apply(n,_t(e).concat([t])),a=(i=Math).max.apply(i,_t(e).concat([t])),s=Array.from({length:a},function(e,t){return t}),c=s.filter(function(t){return!e.includes(t)}),-1===(l=c.findIndex(function(e){return e>=t}))&&(l=c.length),(r=c).splice.apply(r,[l,0].concat(_t(e))),u=function(e){return e<o||e>a?e:c.indexOf(e)},d=this.widgetListsStore.getCurrentValue()||[],p=d.map(function(e){var t=e.widgetId.pageIndex;return Ct(St({},e),{widgetId:Ct(St({},e.widgetId),{pageIndex:u(t)})})}),this.widgetListsStore.dispatch(p),[2]})}).call(this)}},{key:"addOrUpdatePages",value:function(e){return n(function(){var t,n,i,r,o,a,s,c,l,u,d,p;return b(this,function(f){switch(f.label){case 0:t=this.widgetListsStore.getCurrentValue()||[],n=!1,i=function(e){return"".concat(e.pageIndex,"-").concat(e.objNumber)},r=t.reduce(function(e,t){var n=i(t.widgetId);return e.set(n,t),e},new Map),o=!0,a=!1,s=void 0,f.label=1;case 1:f.trys.push([1,6,7,8]),l=function(){var e,o,a,s,l,u,p,f;return b(this,function(g){switch(g.label){case 0:return e=d.value,a=e.getIndex(),s=c.loadedPages.indexOf(e),s>-1||(n=!0,c.loadedPages.push(e)),[4,e.getAnnots()];case 1:return l=g.sent(),u=c.extractWidgetInfo(l),p=u.filter(function(e){var t=i(e.widgetId);return!r.has(t)}),f=t.filter(function(e){return e.widgetId.pageIndex===a}),f.filter(function(e){return-1===u.findIndex(function(t){return t.widgetId.objNumber===e.widgetId.objNumber})}).forEach(function(e){var i=t.indexOf(e);t.splice(i,1),n=!0}),0===p.length?[2,"continue"]:(n=!0,(o=t).push.apply(o,_t(p)),[2])}})},u=e[Symbol.iterator](),f.label=2;case 2:return(o=(d=u.next()).done)?[3,5]:(c=this,[5,S(l())]);case 3:f.sent(),f.label=4;case 4:return o=!0,[3,2];case 5:return[3,8];case 6:return p=f.sent(),a=!0,s=p,[3,8];case 7:try{o||null==u.return||u.return()}finally{if(a)throw s}return[7];case 8:return n&&(this.widgetListsStore.dispatch(t),this.updateIsAllPageLoadedState()),[2]}})}).call(this)}},{key:"removePages",value:function(e){var t=this.loadedPages.filter(function(t){return!e.includes(t.getIndex())});if(t.length!==this.loadedPages.length){this.loadedPages=t;var n=(this.widgetListsStore.getCurrentValue()||[]).filter(function(t){return!e.includes(t.widgetId.pageIndex)});this.widgetListsStore.dispatch(n),this.updateIsAllPageLoadedState()}}},{key:"extractWidgetInfo",value:function(e){return e.filter(function(e){return e.getType()===j.widget}).map(function(e){var t=e,n=t.getField();return{widgetId:St({},t.getWidgetId()),field:n?{name:n.getName(),type:n.getExtType()}:void 0}})}},{key:"onWidgetListChanged",value:function(e){return this.widgetListsStore.subscribe(e)}},{key:"onIsAllPageLoadedChange",value:function(e){return this.isAllPageLoadedStore.subscribe(e)}},{key:"updateIsAllPageLoadedState",value:function(){var e=this.pdfViewer.getCurrentPDFDoc();if(!e)return this.isAllPageLoadedStore.dispatch(!1),!1;var t=e.getPageCount(),n=this.loadedPages.length>=t;return this.isAllPageLoadedStore.dispatch(n),n}},{key:"getTreeData",value:function(e){return n(function(){var t,n,i,r,o,a,s,c,l,u,d,p,f,g,m;return b(this,function(h){switch(t=this,e){case"alphabetic":return n=this.widgetListsStore.getCurrentValue()||[],(i=n.map(function(e){return t.transformToWidgetNodeData(e)}).filter(Boolean)).sort(function(e,t){return e.title.localeCompare(t.title)}),[2,i];case"tab":r=this.groupWidgetIdsByPage(),o=[],a=!0,s=!1,c=void 0;try{for(l=r[Symbol.iterator]();!(a=(u=l.next()).done);a=!0)d=y(u.value,2),p=d[0],f=d[1],g=this.getPageNodeData(p),m=f.map(function(e){return t.transformToWidgetNodeData(e)}).filter(Boolean),g.children=m,o.push(g)}catch(e){s=!0,c=e}finally{try{a||null==l.return||l.return()}finally{if(s)throw c}}return o.sort(function(e,t){return e.pageIndex>t.pageIndex?1:e.pageIndex<t.pageIndex?-1:0}),[2,o]}return[2]})}).call(this)}},{key:"groupWidgetIdsByPage",value:function(){var e=this.widgetListsStore.getCurrentValue()||[],t=new Map;return e.forEach(function(e){var n=t.get(e.widgetId.pageIndex)||[];n.push(e),t.set(e.widgetId.pageIndex,n)}),t}},{key:"getPageNodeData",value:function(e){return{type:"page",id:"page_"+e,pageIndex:e,title:"sidebar.field.page-title",i18nOptions:{pageNumber:e+1},icon:"fv__icon-field-page",selectable:!1,children:[],isLeaf:!1}}},{key:"transformToWidgetNodeData",value:function(e){var t=e.widgetId,n=t.pageIndex,i=t.objNumber,r=e.field;if(r){var o=r.type,a=r.name,s=function(e){switch(e.type){case et.FieldType.PushButton:if(e.isImage)return"image";break;case et.FieldType.Text:if(e.isDateOrTime)return"date"}return ta[e.type]}(o);return{id:"widget_".concat(n,"_").concat(i),icon:"fv__icon-field-"+s,title:a,widgetId:e.widgetId,type:"widget",isLeaf:!0}}}}],[{key:"inject",value:function(){return{pdfViewer:"PDFViewer"}}}]),t}(Y.Disposable);var ia=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"displayType",ea.TabOrder),q(e,"treeData",[]),q(e,"originData",[]),q(e,"preventSelectEvents",!1),e}return m(t,e),p(t,[{key:"setDisplayType",value:function(e){return n(function(){return b(this,function(t){switch(t.label){case 0:return e===this.displayType?[2]:(this.displayType=e,[4,this.reloadData()]);case 1:return t.sent(),[2]}})}).call(this)}},{key:"reloadData",value:function(){return n(function(){var e;return b(this,function(t){switch(t.label){case 0:return this.service.isFreeze?[2]:[4,this.service.getTreeData(this.displayType)];case 1:return e=t.sent(),this.setData(e),[2]}})}).call(this)}},{key:"setData",value:function(e){var t=this;this.originData=e;var n=e.map(function(e){return t.resolveTreeNodeData(e)});this.treeData=n,this.tree.setData(n)}},{key:"resolveTreeNodeData",value:function(e){var t,n=this,i=null===(t=this.tree)||void 0===t?void 0:t.getNodeById(e.id),r=null==i?void 0:i.getData();return e.isLeaf?Ct(St({},e),{selected:(null==r?void 0:r.selected)||!1}):Ct(St({},e),{activated:(null==r?void 0:r.activated)||!1,children:(null==r?void 0:r.activated)?e.children.map(function(e){return n.resolveTreeNodeData(e)}):[]})}},{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.addDestroyHook(this.service.onWidgetListChanged(function(){e.reloadData()}),this.pdfViewer.addEventListener(F.willCloseDocument,function(){e.setData([])}),this.pdfViewer.addEventListener(F.activeElementChanged,function(){if(!e.preventSelectEvents){var t=e.pdfViewer.getAllActivatedElements(),n=t?t[t.length-1]:void 0;if(n&&n.annot){var i=n.annot;if(i.getType()===j.widget){var r,o=i.getWidgetId(),a=!0,s=!1,c=void 0;try{e:for(var l,u=e.treeData[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var d=l.value;if("page"===d.type&&d.children){var p=!0,f=!1,g=void 0;try{for(var m,h=d.children[Symbol.iterator]();!(p=(m=h.next()).done);p=!0){var v=m.value;if((0,et.isSameWidgetId)(v.widgetId,o)){r=v;break e}}}catch(e){f=!0,g=e}finally{try{p||null==h.return||h.return()}finally{if(f)throw g}}}else if("widget"===d.type&&(0,et.isSameWidgetId)(d.widgetId,o)){r=d;break}}}catch(e){s=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(s)throw c}}if(r){var y,b=e.tree.getSelectedNode();if((null==b||null===(y=b.nodeData)||void 0===y?void 0:y.id)===r.id)return;var S=e.tree.getNodeById(r.id);if(S){e.preventSelectEvents=!0;try{e.tree.select(S)}finally{e.preventSelectEvents=!1}}}}}}}))}},{key:"onUserSelectTreeNode",value:function(e){var t=this.tree.getNodeById(e);t&&t.element.scrollIntoViewIfNeeded()}},{key:"onUserClickTreeNode",value:function(e){return n(function(){var t,n,i,r,o,a,s,c,l,u,d,p,f,g,m;return b(this,function(h){switch(h.label){case 0:if(this.preventSelectEvents)return[2];if(!(t=this.tree.getNodeById(e)))return[2];switch(n=t.getData(),n.type){case"page":return[3,1];case"widget":return[3,2]}return[3,8];case 1:return this.pdfViewer.goToPage(n.pageIndex),[2];case 2:return(i=this.pdfViewer.getPDFDocRender())?(r=n.widgetId,o=r.pageIndex,a=r.objNumber,[4,i.doc.query({type:"annot",annotId:n.widgetId})]):[2];case 3:return(s=h.sent())?(c=s.getRect(),l=c.top,u=c.left,[4,this.pdfViewer.goToPage(o,l,u,!0)]):[2];case 4:if(h.sent(),!this.hasPermission())return[2];if(!(d=i.getPDFPageRender(o)))return[2];p=d.getAnnotRender(a),f=0,h.label=5;case 5:return p?[3,7]:f>1e3?[2]:[4,new Promise(function(e){return setTimeout(e,100)})];case 6:return h.sent(),p=d.getAnnotRender(a),f++,[3,5];case 7:"select-annotation"!==(g=this.pdfViewer.getStateHandlerManager()).getCurrentStates().getStateName()&&g.switchTo("select-annotation",void 0),m=p.component,this.preventSelectEvents=!0;try{this.pdfViewer.activateElement(m)}finally{this.preventSelectEvents=!1}return[3,8];case 8:return[2]}})}).call(this)}},{key:"onExpandTreeNode",value:function(e){var t,n=this,i=this.treeData.find(function(t){return t.id===e}),r=this.originData.find(function(t){return t.id===e});i&&(i.children=null==r||null===(t=r.children)||void 0===t?void 0:t.map(function(e){return n.resolveTreeNodeData(e)}),this.digest(!1))}},{key:"onUserConfirmEditTreeNode",value:function(e){return n(function(e){var t,n,i,r,o,a,s;return b(this,function(c){switch(c.label){case 0:return t=e.nodeId,n=e.newTitle,(i=this.tree.getNodeById(t))?"widget"!==(r=i.getData()).type?[2]:(o=this.pdfViewer.getPDFDocRender())?[4,(a=o.doc).query({type:"annot",annotId:r.widgetId})]:[2]:[2];case 1:return(s=c.sent())?[2,a.getPDFForm().renameField(s.getAnnotId(),n)]:[2]}})}).apply(this,arguments)}},{key:"checkPermissions",value:function(){var e=this.pdfViewer.getPDFDocRender().getUserPermission().getValue();return!!(e&B.modify&&e&B.annotForm)}},{key:"hasPermission",value:function(){if(!this.checkPermissions())return!1;var e=this.pdfViewer.currentPDFDoc,t=e.canEditPdfa();return!(e.isStaticXFA()&&!e.isXFARemoved()||t)}},{key:"beforeShowNodeContextMenu",value:function(e,t){return this.hasPermission()?"page"!==t.getData().type&&(this.tree.select(t),this.onUserClickTreeNode(t.getNodeId()),!0):(e.preventDefault(),!1)}},{key:"onContextMenuShown",value:function(){}}],[{key:"getName",value:function(){return"form-field-tree"}},{key:"inject",value:function(){return{pdfViewer:"PDFViewer",service:na}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:Jo()()}));K.registerComponent(ia);var ra=c(3300),oa=c.n(ra),aa=function(){function e(){u(this,e),q(this,"displayTypeStore",new Y.ValueStore(ea.TabOrder))}return p(e,[{key:"onDisplayTypeChange",value:function(e){return this.displayTypeStore.subscribe(e)}},{key:"setDisplayType",value:function(e){this.displayTypeStore.dispatch(e)}},{key:"getDisplayType",value:function(){return this.displayTypeStore.getCurrentValue()}}]),e}(),sa=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"displayOrderType",ea.TabOrder),e}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.formFieldTreeService.toggleFreeze(!0),this.addDestroyHook(this.formFieldSidebarService.onDisplayTypeChange(function(t){e.displayOrderType=t,e.digest()}))}},{key:"doActive",value:function(){f(i(t.prototype),"doActive",this).call(this),this.formFieldTreeService.toggleFreeze(!1)}},{key:"doDeactive",value:function(){f(i(t.prototype),"doDeactive",this).call(this),this.formFieldTreeService.toggleFreeze(!0)}}],[{key:"getName",value:function(){return"form-field-sidebar-panel"}},{key:"inject",value:function(){return{formFieldTreeService:na,formFieldSidebarService:aa}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:oa()()}));K.registerComponent(sa);var ca=c(3167),la=c.n(ca),ua=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"displayType",get:function(){return this.formFieldSidebarService.getDisplayType()}},{key:"setDisplayOrderType",value:function(e){this.formFieldSidebarService.setDisplayType(e)}}],[{key:"getName",value:function(){return"field-display-order-type-dropdown"}},{key:"inject",value:function(){return{formFieldSidebarService:aa}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:la()()}));K.registerComponent(ua);var da=c(7155),pa=c.n(da),fa=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"tabOrderType","structure"),q(e,"isOrderNumberVisible",!1),e}return m(t,e),p(t,[{key:"mounted",value:function(){var e,n=this;f(i(t.prototype),"mounted",this).call(this),this.addDestroyHook(this.pdfViewer.addEventListener((q(e={},F.tabOrderTypeUpdated,function(e){n.tabOrderType=e,n.digest()}),q(e,F.openFileSuccess,function(){delete n.readTabOrderType,delete n.checkPermission}),e)),this.tabOrderManagerService.onShowOrderNumber(function(e){n.isOrderNumberVisible=e,n.digest()}),this.formFieldSidebarService.onDisplayTypeChange(function(e){e===ea.AlphabeticOrder?n.hide():n.show()}))}},{key:"doActive",value:function(){var e=this,r=this;return n(function(){return b(this,function(n){switch(n.label){case 0:return[4,this.readTabOrderType()];case 1:return n.sent(),f(i(t.prototype),"doActive",e).call(r),[2]}})}).call(this)}},{key:"checkPermission",value:function(){return n(function(){var e;return b(this,function(t){return this.checkPermission=Y.noop,(e=this.pdfViewer.getCurrentPDFDoc())?this.pdfUI.checkAppSignIn({isShowDlg:!1})&&e.checkPermission(B.modify)?e.isStaticXFA()||e.isDynamicXFA()?(this.lock(),[2]):(this.unlock(),[2]):(this.lock(),[2]):[2]})}).call(this)}},{key:"readTabOrderType",value:function(){return n(function(){var e,t;return b(this,function(n){switch(n.label){case 0:return this.readTabOrderType=Y.noop,(e=this.pdfViewer.getCurrentPDFDoc())?(t=this,[4,e.getTabOrderType()]):[2];case 1:return t.tabOrderType=n.sent(),this.digest(),[2]}})}).call(this)}},{key:"setTabOrderType",value:function(e){var t=this.pdfViewer.getCurrentPDFDoc();if(t)return this.tabOrderType=e,t.setTabOrderType(e)}},{key:"toggleOrderNumberVisibility",value:function(){this.isOrderNumberVisible=!this.isOrderNumberVisible;var e=this.pdfViewer.getStateHandlerManager();this.isOrderNumberVisible?e.switchTo(Vo,void 0):e.switchToDefault(),this.tabOrderManagerService.toggleShowOrderNumber(this.isOrderNumberVisible)}}],[{key:"getName",value:function(){return"field-tab-order-type-dropdown"}},{key:"inject",value:function(){return{tabOrderManagerService:zo,formFieldSidebarService:aa,pdfViewer:"PDFViewer"}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:pa()()}));K.registerComponent(fa);var ga=c(1554),ma=c.n(ga),ha=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.addDestroyHook(this.pdfViewer.addEventListener(q({},F.openFileSuccess,function(t){t.isDynamicXFA()&&e.hide()})),this.formFieldTreeService.onIsAllPageLoadedChange(function(t){var n;(null===(n=e.pdfViewer.getCurrentPDFDoc())||void 0===n?void 0:n.isDynamicXFA())||t?e.hide():e.show()}))}},{key:"onClick",value:function(){return n(function(){return b(this,function(e){switch(e.label){case 0:return this.disable(),[4,this.formFieldTreeService.loadAllFields()];case 1:return e.sent(),this.enable(),this.hide(),[2]}})}).call(this)}}],[{key:"getName",value:function(){return"load-all-fields-button"}},{key:"inject",value:function(){return{formFieldTreeService:na,pdfViewer:"PDFViewer"}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:ma()()}));K.registerComponent(ha);var va=c(2491),ya=c.n(va),ba=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){f(i(t.prototype),"mounted",this).call(this)}},{key:"onUserClickCreateFieldButton",value:function(e){var t=this;if(s(e.target,HTMLElement)){var n=e.target.closest("[name^=fv--contextmenu-item-create]");(null==n?void 0:n.getAttribute("name"))&&setTimeout(function(){t.hide()})}}}],[{key:"getName",value:function(){return"form-field-tree-contextmenu"}},{key:"inject",value:function(){return{}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:ya()()}));K.registerComponent(ba);var Sa=c(8141),Ca=c.n(Sa),_a=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"handle",value:function(){this.component.parent.getCurrentTarget().toggleEdit(!0)}}],[{key:"getName",value:function(){return"EditFormFieldNodeTitleController"}}]),t}(Q.Controller);K.registerController(_a),K.registerFragment("rename-field-contextmenu-item",{template:Ca()()});var wa=c(9898),xa=c.n(wa);K.registerFragment("create-field-contextmenu",{template:xa()()});var ka=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.addDestroyHook(this.pdfViewer.addEventListener(F.openFileSuccess,function(t){e.changePermission(t)}))}},{key:"handle",value:function(){return n(function(){var e,t,n,i,r;return b(this,function(o){switch(o.label){case 0:return(e=this.pdfViewer.getCurrentPDFDoc())?[4,e.formAPI.addTooltipsForAllFormFields()]:[2];case 1:return o.sent(),[3,3];case 2:t=o.sent(),i="".concat(n="form-designer:dialog.addTooltip.").concat(t?"addSuccess":"noFormField"),r=t?"success":"warning",this.getPDFUI().alert({message:i,level:r,title:"".concat(n,"title")}),o.label=3;case 3:return[2]}})}).call(this)}},{key:"changePermission",value:function(e){var t=this.pdfViewer.getPDFDocRender();if(t){var n=t.getUserPermission().getValue(),i=e.canEditPdfa();n&B.fillForm&&n&B.annotForm&&!i?this.component.unlock&&this.component.unlock():this.component.lock&&this.component.lock()}}}],[{key:"getName",value:function(){return"AddTooltipController"}},{key:"inject",value:function(){return{pdfViewer:"PDFViewer"}}},{key:"permission",get:function(){return B.fillForm}}]),t}(Q.Controller);K.registerController(ka);var Aa=c(9194),Ta=c.n(Aa);K.registerFragment("add-tooltip-ribbon-button",{template:Ta()()});var Ea=c(5224),Fa=c.n(Ea),Da=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.addDestroyHook(this.pdfViewer.addEventListener(F.openFileSuccess,function(){return n(function(){var e,t,n;return b(this,function(i){switch(i.label){case 0:return e=!1,(t=this.pdfViewer.getCurrentPDFDoc())?t.isDynamicXFA()?[3,3]:[4,t.hasForm()]:[3,3];case 1:return i.sent()?[4,t.form.hasFieldsInCalculationOrder()]:[3,3];case 2:if(!i.sent())return[3,3];if(!(n=this.pdfViewer.getPDFDocRender()))return[3,3];n.getUserPermission().getValue()&(B.modify|B.fillForm)&&(e=!0),i.label=3;case 3:return e?this.unlock():this.lock(),[2]}})}).call(e)}),this.pdfViewer.addEventListener(F.formFieldPropertyUpdated,function(t){return n(function(){return b(this,function(e){switch(e.label){case 0:return t.propertyName!==et.FormFieldPropertyName.CALCULATE_ACTION?[3,2]:[4,t.doc.form.hasFieldsInCalculationOrder()];case 1:e.sent()?this.unlock():this.lock(),e.label=2;case 2:return[2]}})}).call(e)}))}},{key:"onUserClick",value:function(){var e=this.getRoot().querySelector("fv--form-designer-calculation-order-dialog");if(!e)throw new Error("Cannot open calculation order dialog, a component with name 'fv--form-designer-calculation-order-dialog' is not found in templateUnable to open the Calculation Order dialog. The component named 'fv--form-designer-calculation-order-dialog' is missing in the template!");e.show()}}],[{key:"getName",value:function(){return"calculation-order-button"}},{key:"inject",value:function(){return{pdfViewer:"PDFViewer"}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:Fa()()}));K.registerComponent(Da);var Pa=c(6955),Na=c.n(Pa),Ia=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"originalFields",[]),q(e,"fields",[]),q(e,"selectedField",void 0),q(e,"isChanged",!1),e}return m(t,e),p(t,[{key:"isSelectFirst",get:function(){return this.fields[0]===this.selectedField}},{key:"isSelectLast",get:function(){return this.fields[this.fields.length-1]===this.selectedField}},{key:"mounted",value:function(){f(i(t.prototype),"mounted",this).call(this)}},{key:"doShown",value:function(){f(i(t.prototype),"doShown",this).call(this),this.updateFieldList()}},{key:"doHidden",value:function(){f(i(t.prototype),"doHidden",this).call(this),this.fields=[],this.selectedField=void 0,this.isChanged=!1,this.digest()}},{key:"updateFieldList",value:function(){return n(function(){var e,t;return b(this,function(n){switch(n.label){case 0:return this.originalFields=[],(e=this.pdfViewer.getCurrentPDFDoc())?[3,1]:(this.fields=[],[3,3]);case 1:return t=this,[4,e.form.getFieldsInCalculationOrder()];case 2:t.fields=n.sent(),n.label=3;case 3:return this.originalFields=this.fields.slice(0),this.selectedField=this.fields[0],this.digest(),[2]}})}).call(this)}},{key:"selectField",value:function(e){this.selectedField=e,this.digest()}},{key:"changeFieldCalculationOrder",value:function(e){return n(function(){var t,n,i,r;return b(this,function(o){return t=this,this.fields.length&&void 0!==this.selectedField&&this.pdfViewer.getCurrentPDFDoc()?(n=this.selectedField,i=this.fields.indexOf(n),r="up"===e?Math.max(0,i-1):Math.min(this.fields.length-1,i+1),i===r||(this.fields.splice(i,1),this.fields.splice(r,0,n),this.isChanged=this.fields.some(function(e,n){return e!==t.originalFields[n]}),this.digest()),[2]):[2]})}).call(this)}},{key:"onUserClickOK",value:function(){return n(function(){var e;return b(this,function(t){switch(t.label){case 0:return(e=this.pdfViewer.getCurrentPDFDoc())?[4,e.form.setFieldsInCalculationOrder(this.fields)]:[2];case 1:return t.sent(),this.hide(),[2]}})}).call(this)}},{key:"onUserClickCancel",value:function(){this.hide()}}],[{key:"getName",value:function(){return"calculation-order-dialog"}},{key:"inject",value:function(){return{pdfViewer:"PDFViewer"}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:Na()()}));K.registerComponent(Ia);var Oa=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"handle",value:function(){return n(function(){var e;return b(this,function(t){switch(t.label){case 0:return[4,this.getSelectedWidgets()];case 1:return e=t.sent(),[4,e[0].annot.getField().getWidgetsCount()];case 2:return t.sent()>1?[2,this.getPDFUI().alert({message:"form-designer:dialog.numberError",level:"warning"})]:(this.component.getRoot().querySelector("fv--form-designer-create-multiple-copies-dialog").show(),[2])}})}).call(this)}},{key:"visible",value:function(e,t){return n(function(){var n;return b(this,function(i){return t?[2,!1]:1===e.length&&(n=e[0].annot.getField())?[2,n.getType()!==M.Sign]:[2,!1]})})()}}],[{key:"getName",value:function(){return"CreateMultipleCopiesController"}}]),t}(qe),Ua="contextmenu-item-widget-create-multi-copies",Ra={template:'<contextmenu-item @controller="form-designer-v2:CreateMultipleCopiesController" name="fv--ui-contextmenu-item-widget-create-multi-copies" @alias-name="multipleCopy">form-designer:contextMenu.multipleCopy</contextmenu-item>'},La=c(4595),Va=c.n(La),Ma=k.jQuery;const Ba=function(){function e(t){u(this,e),q(this,"pdfViewer",void 0),q(this,"$ui",void 0),q(this,"targetPage",void 0),q(this,"target",void 0),q(this,"rects",void 0),q(this,"columns",void 0),q(this,"rows",void 0),q(this,"marginLeft",void 0),q(this,"marginTop",void 0),this.pdfViewer=t,this.$ui=Ma('<canvas class="fv_shapes_ui"></canvas>')}return p(e,[{key:"initPageShapes",value:function(e){if(!this.targetPage||this.targetPage.index!=e)return(this.targetPage=this.pdfViewer.getPDFDocRender().getPDFPageRender(e)).$ui.append(this.$ui.show()),this}},{key:"setTarget",value:function(e){return this.target=e,this}},{key:"getPositions",value:function(){var e=this.$ui.offset(),t=this.$ui.parent().offset(),n=this.pdfViewer.getPDFDocRender(),i=this.target.getPage(),r=n.getPDFPageRender(i.getIndex()),o=e.left+1-t.left,a=e.top+1-t.top;return this.rects.map(function(e){return i.reverseDeviceRect({left:e.left+o,top:e.top+a,right:e.right+o,bottom:e.bottom+a},r.scale,r.rotate)})}},{key:"drawShape",value:function(e){var t=e.columns,n=void 0===t?this.columns:t,i=e.rows,r=void 0===i?this.rows:i,o=e.marginLeft,a=void 0===o?this.marginLeft:o,s=e.marginTop,c=void 0===s?this.marginTop:s;this.$ui.show();var l=this.target.getPage().getIndex();this.initPageShapes(l),this.columns=n,this.rows=r,this.marginLeft=a,this.marginTop=c;var u=this.calculateRects(l,this.target,n,r,a,c);this.$ui.attr(u).css(u);var d=this.$ui[0],p=d.getContext("2d");p.clearRect(0,0,d.offsetWidth,d.offsetHeight),p.save(),p.beginPath(),p.strokeStyle="blue",p.lineWidth=2,this.rects.forEach(function(e){p.rect(e.left+1,e.top+1,e.width,e.height)}),p.stroke(),p.restore()}},{key:"move",value:function(e){var t=this.$ui.offset(),n=this.$ui.width(),i=this.$ui.height(),r=this.$ui.parent().width(),o=this.$ui.parent().height(),a=this.$ui.parent().offset(),s=t.left-a.left,c=t.top-a.top;switch(e){case"Left":s-2<0?s=1:s-=2;break;case"Right":s+n+2>r?s=r-n-1:s+=2;break;case"Up":c-2<0?c=1:c-=2;break;case"Down":c+2+i>o?c=o-i-1:c+=2}this.$ui.css({left:s,top:c})}},{key:"getMaxSize",value:function(e,t,n,i){var r=this.pdfViewer.getPDFDocRender().getPDFPageRender(e),o=(t=r.page.getDeviceRect(t,r.scale,r.rotate)).right-t.left,a=t.bottom-t.top;return[1+Math.floor((r.getShowWidth()-t.left-o)/(n+o)),1+Math.floor((r.getShowHeight()-t.top-a)/(i+a))]}},{key:"calculateRects",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,a=this.pdfViewer.getPDFDocRender().getAnnotRender(e,t.getId()).component.getRect(),s=a.right-a.left,c=a.bottom-a.top,l=[];this.rects=l;for(var u=0;u<n;u++)for(var d=a.left+(r+s)*u,p=0;p<i;p++){var f=a.top+(o+c)*p;l.push({left:d-a.left,right:d+s-a.left,width:s,top:f-a.top,bottom:f+c-a.top,height:c})}return{left:a.left-1,top:a.top-1,width:s+(s+r)*(n-1)+2,height:c+(c+o)*(i-1)+2}}},{key:"show",value:function(){this.$ui.css("opacity",1).show()}},{key:"hide",value:function(){this.targetPage=null,this.$ui.hide()}},{key:"invisible",value:function(){return this.$ui.css("opacity",0),!1}},{key:"destroy",value:function(){delete this.pdfViewer,this.$ui.remove(),delete this.$ui}}]),e}();var Ha=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"previewer",void 0),q(e,"defaultCopyNumber",2),q(e,"defaultWidth",10),q(e,"defaultHeight",5),q(e,"copyNumber",{column:e.defaultCopyNumber,row:e.defaultCopyNumber,maxColumn:e.defaultCopyNumber,maxRow:e.defaultCopyNumber}),q(e,"overallSize",{width:e.defaultWidth,height:e.defaultHeight}),q(e,"isPreview",!0),e}return m(t,e),p(t,[{key:"mounted",value:function(){f(i(t.prototype),"mounted",this).call(this),this.previewer=new Ba(this.pdfViewer)}},{key:"doShown",value:function(){f(i(t.prototype),"doShown",this).call(this),this.initData()}},{key:"initData",value:function(){return n(function(){var e,t,n,i,r,o;return b(this,function(a){switch(a.label){case 0:return e=this,[4,this.getSelectedWidget()];case 1:return e.annot=a.sent(),this.updateSize(this.annot),t=this.copyNumber,n=t.maxColumn,i=t.maxRow,r=t.row,o=t.column,n=n||this.defaultCopyNumber,i=i||this.defaultCopyNumber,n<this.defaultCopyNumber&&(this.copyNumber.row=1),i<this.defaultCopyNumber&&(this.copyNumber.column=1),this.previewer.setTarget(this.annot).drawShape({columns:o,rows:r,marginLeft:this.overallSize.width,marginTop:this.overallSize.height}),this.digest(),[2]}})}).call(this)}},{key:"doHidden",value:function(){f(i(t.prototype),"doHidden",this).call(this),this.resetData(),this.previewer&&this.previewer.hide(),this.digest()}},{key:"resetData",value:function(){this.copyNumber={column:this.defaultCopyNumber,row:this.defaultCopyNumber,maxColumn:this.defaultCopyNumber,maxRow:this.defaultCopyNumber},this.overallSize={width:this.defaultWidth,height:this.defaultHeight},this.isPreview=!0}},{key:"getSelectedWidget",value:function(){return n(function(){var e,t;return b(this,function(n){switch(n.label){case 0:return[4,this.pdfViewer.getAllActivatedElements()];case 1:return e=n.sent(),[2,(t=e.filter(function(e){return!!e.annot&&"widget"===e.annot.getType()}))[0]&&t[0].annot]}})}).call(this)}},{key:"updateSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultWidth,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.defaultHeight,i=e.getRect(),r=y(this.previewer.getMaxSize(e.getPage().getIndex(),i,t,n),2),o=r[0],a=r[1];this.copyNumber=Object.assign({},this.copyNumber,{maxColumn:o,maxRow:a})}},{key:"updateRect",value:function(e,t){var n="string"==typeof t?Number(t):t.value;switch(e){case"column":case"row":var i=this.copyNumber,r=i.maxColumn,o=i.maxRow,a="column"===e?r:o;a=a||1,isNaN(n)&&(n=a<this.defaultCopyNumber?1:0),(n=+n)<=0&&(n=1),n>a&&(n=a),this.copyNumber[e]=n;break;case"width":case"height":if(isNaN(n)&&(n="width"===e?this.defaultWidth:this.defaultHeight),(n=+n)<0&&(n=0),n){var s=this.overallSize,c=s.width,l=s.height;"width"===e?c=n:l=n,n=this.getMaxSpace(!0,c,l)[e]}this.overallSize[e]=n,this.updateSize(this.annot,this.overallSize.width,this.overallSize.height)}var u=this.copyNumber,d=u.column,p=u.row,f=this.overallSize,g=f.width,m=f.height;this.previewer.drawShape({columns:d,rows:p,marginLeft:g,marginTop:m})}},{key:"move",value:function(e){this.previewer.move(e)}},{key:"isPreviewVisisble",value:function(){this.previewer[this.isPreview?"show":"invisible"]()}},{key:"confirm",value:function(){return n(function(){var e,t;return b(this,function(i){switch(i.label){case 0:return e=this,(t=this.pdfViewer.getCurrentPDFDoc())?[4,t.form.duplicateField(this.annot,this.previewer.getPositions())]:[2];case 1:return i.sent().forEach(function(t){return n(function(){var e,n;return b(this,function(i){return e=this.pdfViewer.getPDFPageRender(t.getAnnotId().pageIndex),n=e.getAnnotRender(t.getAnnotId().objNumber),n.component.toggleDesignMode(!0),[2]})}).call(e)}),this.hide(),[2]}})}).call(this)}},{key:"getMaxSpace",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultWidth,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.defaultHeight,i=this.annot,r=i.getPage().getIndex(),o=this.pdfViewer.getPDFDocRender(),a=o.getPDFPageRender(r),s=o.getAnnotRender(r,i.getId()).component.getRect(),c=s.right-s.left,l=s.bottom-s.top,u=this.copyNumber,d=u.row,p=u.column;if(d=d||this.defaultCopyNumber,p=p||this.defaultCopyNumber,e){var f=a.getShowWidth();s.left+c+(c+t)*(p-1)>f&&(t=Math.floor((f-c*p-s.left)/(p-1)))}else{var g=a.getShowHeight();s.top+n*(d-1)+l*d>g&&(n=Math.floor((g-l*d-s.top)/(d-1)))}return{width:t,height:n}}}],[{key:"getName",value:function(){return"create-multiple-copies-dialog"}},{key:"inject",value:function(){return{pdfViewer:"PDFViewer"}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:Va()()}));K.registerComponent(Ha),K.registerFragment(Ua,Ra),K.registerController(Oa);var Wa=c(8185),ja=c.n(Wa),$a=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"availableStatusStore",new R(!1)),q(e,"isHighlightFieldsStore",new R(!0)),e}return m(t,e),p(t,[{key:"allInjected",value:function(){var e=this;this.fillerService=this.pdfViewer.getFormFillerService(),this.addDestroyHook(this.pdfViewer.addEventListener(q({},F.openFileSuccess,function(t){return n(function(){var e;return b(this,function(n){switch(n.label){case 0:return this.updateAvailableStatus(),t.isDynamicXFA()?(e=t.isHighlightXFAFields(),[3,3]):[3,1];case 1:return[4,this.fillerService.isHighlightFormFields()];case 2:e=n.sent(),n.label=3;case 3:return this.isHighlightFieldsStore.dispatch(e),[2]}})}).call(e)})),this.pdfViewer.addEventListener([F.annotationAdded,F.annotationRemoved,F.flattenAnnotation],function(){e.updateAvailableStatus()}))}},{key:"updateAvailableStatus",value:function(){var e=this;this.checkAvailable().then(function(t){e.availableStatusStore.dispatch(t)})}},{key:"checkAvailable",value:function(){return n(function(){var e,t,n;return b(this,function(i){switch(i.label){case 0:return e=this.pdfViewer.getPDFDocRender(),t=null==e?void 0:e.getPDFDoc(),e&&t?t.isDynamicXFA()?[2,!0]:[4,t.hasForm()]:[2,!1];case 1:return i.sent()?(n=e.getUserPermission().getValue(),n&(B.modify|B.annotForm|B.fillForm)?[2,!0]:[2,!1]):[2,!1]}})}).call(this)}},{key:"onAvailableChanged",value:function(e){return this.availableStatusStore.subscribe(e)}},{key:"onIsHighlightFieldsChanged",value:function(e){return this.isHighlightFieldsStore.subscribe(e)}}],[{key:"inject",value:function(){return{pdfViewer:"PDFViewer"}}}]),t}(Y.Disposable),za=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.addDestroyHook(this.service.onAvailableChanged(function(t){t?e.unlock():e.lock()}),this.service.onIsHighlightFieldsChanged(function(t){e.setValue(t)}))}},{key:"onUserChangeHighlightFields",value:function(e){this.pdfViewer.getCurrentPDFDoc().isDynamicXFA()?this.setHighlightXFAFields(e):this.pdfViewer.getFormFillerService().setHighlightFields(e)}},{key:"setHighlightXFAFields",value:function(e){return n(function(){return b(this,function(t){switch(t.label){case 0:return[4,this.pdfViewer.getCurrentPDFDoc().setHighlightXFAFields(e)];case 1:return t.sent(),[4,this.pdfViewer.redraw(1,0)];case 2:return t.sent(),[2]}})}).call(this)}}],[{key:"getName",value:function(){return"highlight-fields-checkbox"}},{key:"inject",value:function(){return{service:$a,pdfViewer:"PDFViewer"}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:ja()()}));K.registerComponent(za);var Ga=c(9388),Xa=c.n(Ga),Ka=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"availableStore",new Y.ValueStore(!1)),e}return m(t,e),p(t,[{key:"allInjected",value:function(){var e=this;this.fillerService=this.pdfViewer.getFormFillerService(),this.addDestroyHook(this.pdfViewer.addEventListener([F.openFileSuccess,F.annotationAdded,F.annotationRemoved,F.flattenAnnotation],function(){e.updateAvailableStatus()}))}},{key:"onAvailableChanged",value:function(e){return this.availableStore.subscribe(e)}},{key:"updateAvailableStatus",value:function(){var e=this;this.checkAvailable().then(function(t){e.availableStore.dispatch(t)})}},{key:"checkAvailable",value:function(){return n(function(){var e,t,n;return b(this,function(i){switch(i.label){case 0:return e=this.pdfViewer.getPDFDocRender(),t=null==e?void 0:e.getPDFDoc(),e&&t?t.isDynamicXFA()?[2,!0]:[4,t.hasForm()]:[2,!1];case 1:return i.sent()?(n=e.getUserPermission().getValue(),n&B.fillForm?[2,!0]:[2,!1]):[2,!1]}})}).call(this)}}],[{key:"inject",value:function(){return{pdfViewer:"PDFViewer"}}}]),t}(Y.Disposable),qa=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.addDestroyHook(this.service.onAvailableChanged(function(t){t?e.unlock():e.lock()}))}},{key:"handleResetForm",value:function(){var e=this.pdfViewer.getCurrentPDFDoc();e&&this.pdfViewer.viewerUI.confirm({message:"form-designer:resetFieldsConfirm",level:"warning"}).then(function(){return e.isDynamicXFA()?e.resetXFAForm():e.getPDFForm().resetForm()},Y.noop)}}],[{key:"getName",value:function(){return"reset-fields-value-button"}},{key:"inject",value:function(){return{service:Ka,pdfViewer:"PDFViewer"}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:Xa()()}));K.registerComponent(qa);var Ya=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"handle",value:function(){return n(function(){return b(this,function(e){return[2,this.getPDFUI().getPDFViewer().then(function(e){return e.copy()})]})}).call(this)}},{key:"visible",value:function(e,t){return n(function(){var n,i,r;return b(this,function(o){if(t)return[2,!1];for(n=!1,i=0;i<e.length;i++)if((null===(r=e[i].annot.getField())||void 0===r?void 0:r.getType())===M.Sign){n=!0;break}return[2,e.length>0&&!n]})})()}}],[{key:"getName",value:function(){return"CopyWidgetController"}}]),t}(qe),Za="contextmenu-item-copy-widget",Ja={template:'<contextmenu-item @controller="form-designer-v2:CopyWidgetController" name="fv--ui-contextmenu-item-copy-widget" @alias-name="copyTarget">contextmenu.annot.copyAnnot</contextmenu-item>'};K.registerFragment(Za,Ja),K.registerController(Ya);var Qa=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"handle",value:function(){return n(function(){return b(this,function(e){return this.component.getRoot().querySelector("fv--form-designer-duplicate-dialog").show(),[2]})}).call(this)}},{key:"visible",value:function(e,t){return n(function(){var n;return b(this,function(i){return t?[2,!1]:1===e.length?[2,(null===(n=e[0].annot.getField())||void 0===n?void 0:n.getType())!==M.Sign]:[2,!1]})})()}},{key:"available",value:function(e,r){var o=this,a=this;return n(function(){var n;return b(this,function(s){switch(s.label){case 0:return n=1===e[0].annot.page.doc.getPageCount(),[4,f(i(t.prototype),"available",o).call(a,e,r)];case 1:return[2,s.sent()||n]}})})()}}],[{key:"getName",value:function(){return"DuplicateWidgetController"}}]),t}(qe),es="contextmenu-item-duplicate-widget",ts={template:'<contextmenu-item @controller="form-designer-v2:DuplicateWidgetController" name="fv--ui-contextmenu-item-duplicate-widget" @alias-name="copyToPage">form-designer:contextMenu.copyToPage</contextmenu-item>'};K.registerFragment(es,ts),K.registerController(Qa);var ns=c(477),is=c.n(ns),rs=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"type","all"),q(e,"startPage",{unit:new Y.PDFUnitNumber(1,Y.PDFUnit.Point),max:1,isError:!1}),q(e,"endPage",{unit:new Y.PDFUnitNumber(1,Y.PDFUnit.Point),max:1,isError:!1}),q(e,"rangeCount",1),q(e,"errorMsg",""),q(e,"defaultStartPageUnit",new Y.PDFUnitNumber(1,Y.PDFUnit.Point)),q(e,"defaultEndPageUnit",new Y.PDFUnitNumber(1,Y.PDFUnit.Point)),e}return m(t,e),p(t,[{key:"doShown",value:function(){f(i(t.prototype),"doShown",this).call(this),this.initData(),this.digest()}},{key:"initData",value:function(){this.changeType("all");var e=this.pdfViewer.getCurrentPDFDoc();this.rangeCount=e?e.getPageCount():1,this.defaultStartPageUnit=new Y.PDFUnitNumber(1,Y.PDFUnit.Point),this.startPage=Object.assign({},this.startPage,{unit:new Y.PDFUnitNumber(1,Y.PDFUnit.Point),max:this.rangeCount}),this.defaultEndPageUnit=new Y.PDFUnitNumber(this.rangeCount,Y.PDFUnit.Point),this.endPage=Object.assign({},this.endPage,{unit:new Y.PDFUnitNumber(this.rangeCount,Y.PDFUnit.Point),max:this.rangeCount})}},{key:"changeType",value:function(e){this.type=e;var t="range"===e;this.getAllComponentsByName("numberInput").forEach(function(e){return e[t?"enable":"disable"]()}),this.startPage.isError=!1,this.endPage.isError=!1,this.errorMsg="",t||(this.startPage.unit=this.defaultStartPageUnit,this.endPage.unit=this.defaultEndPageUnit)}},{key:"changePageNumber",value:function(e,t){"number"==typeof t&&(t=new Y.PDFUnitNumber(t,Y.PDFUnit.Point)),"startPage"===e?this.startPage.unit=t:this.endPage.unit=t}},{key:"checkRange",value:function(){var e=this.startPage.unit.value,t=this.endPage.unit.value,n=this.pdfViewer.ioc.getInstanceByClass("PDFUI");return e>t?(this.errorMsg=n.i18n.t("form-designer:dialog.duplicate.errRange"),this.startPage.isError=!0,this.endPage.isError=!0,!1):e<1?(this.errorMsg=n.i18n.t("form-designer:dialog.duplicate.errRangeStart"),this.startPage.isError=!0,this.endPage.isError=!1,!1):t>this.rangeCount?(this.errorMsg=n.i18n.t("form-designer:dialog.duplicate.errRangeEnd").replace("{max}",this.rangeCount),this.endPage.isError=!0,this.startPage.isError=!1,!1):(this.startPage.isError=!1,this.endPage.isError=!1,this.errorMsg="",!0)}},{key:"getSelectedWidget",value:function(){return n(function(){var e,t;return b(this,function(n){switch(n.label){case 0:return[4,this.pdfViewer.getAllActivatedElements()];case 1:return e=n.sent(),[2,(t=e.filter(function(e){return!!e.annot&&"widget"===e.annot.getType()}))[0]&&t[0].annot]}})}).call(this)}},{key:"confirm",value:function(){return n(function(){var e,t,n,i,r,o,a,s,c,l;return b(this,function(u){switch(u.label){case 0:switch(e=this,t=[],this.type){case"all":t=Array.from({length:this.rangeCount},function(e,t){return t});break;case"odd":t=Array.from({length:this.rangeCount},function(e,t){return t}).filter(function(e){return e%2==0});break;case"even":t=Array.from({length:this.rangeCount},function(e,t){return t}).filter(function(e){return e%2==1});break;case"range":if(!this.checkRange())return[2];n=this.startPage.unit.value,i=this.endPage.unit.value,t=Array.from({length:i-n+1},function(e,t){return t+(n-1)})}return(r=this.pdfViewer.getCurrentPDFDoc())?[4,this.getSelectedWidget()]:[2];case 1:return o=u.sent(),a=null==o?void 0:o.getPage(),o&&a?(s=a.getIndex(),t=t.filter(function(e){return e!==s}),[4,r.form.duplicateWidget(o,t)]):[2];case 2:return c=u.sent(),l=this.pdfViewer.getPDFDocRender(),c.forEach(function(t){var n=t.pageIndex,i=t.objNumber;l.getPDFPageRender(n).isRendered&&e.pdfViewer.getAnnotRender(n,i).getComponent().toggleDesignMode(!0)}),this.hide(),[2]}})}).call(this)}}],[{key:"getName",value:function(){return"duplicate-dialog"}},{key:"inject",value:function(){return{pdfViewer:"PDFViewer"}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:is()()}));K.registerComponent(rs);var os=c(4897),as=c.n(os),ss=function(e){return e.viewport="viewport",e.page="offset-page",e.scroll="scroll",e.pdf="pdf",e}({}),cs=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"tapEvents",new ls),q(e,"doubleTapEvents",new ls),q(e,"contextmenuEvents",new ls),q(e,"globalContextMenuEvents",new Set),q(e,"removePointerdownEvent",Y.noop),q(e,"removeContextmenuEvent",Y.noop),q(e,"removeDoubleTapEvent",Y.noop),q(e,"pointerdownEventHandler",function(t){if(0===t.button){var n=e.getTargetWidgetId(t);if(void 0!==n){var i=e.tapEvents.get(n);i&&i(t)}}}),q(e,"onDoubleTapListener",function(t){var n=e.getTargetWidgetId(t);if(void 0!==n){var i=e.doubleTapEvents.get(n);i&&i(t)}}),q(e,"contextmenuEventHandler",function(t){var n=e.getTargetWidgetId(t);if(void 0!==n){e.globalContextMenuEvents.forEach(function(e){e(n)});var i=e.contextmenuEvents.get(n);if(i)i(t,(0,Y.getClientX)(t),(0,Y.getClientY)(t))}}),e}return m(t,e),p(t,[{key:"getTargetWidgetId",value:function(e){var t="center"in e?e.center.x:(0,Y.getClientX)(e),n="center"in e?e.center.y:(0,Y.getClientY)(e),i=document.elementsFromPoint(t,n).find(function(e){return e.classList.contains("fv__ui-form-designer-editting-widget")});if(i){var r=parseInt(i.getAttribute("data-widget-obj-number")||"");if(!isNaN(r)){var o=i.closest(".fv__pdf-page-layout[data-index]");if(o){var a=parseInt(o.getAttribute("data-index")||"");if(!isNaN(a))return{objNumber:r,pageIndex:a}}}}}},{key:"allInjected",value:function(){var e=this;this.fillerService=this.pdfViewer.getFormFillerService(),this.addDestroyHook(this.pdfViewer.addEventListener(F.openFileSuccess,function(t){e.switchDoc(t)}),this.pdfViewer.addEventListener(F.willCloseDocument,function(){e.cleanup()}));var t=this.pdfViewer.getCurrentPDFDoc();t&&this.switchDoc(t);var n=this.pdfViewer.getScrollWrap().getScrollHost();this.intersectionObserver=new Y.BuiltinIntersectionObserver(n),this.addDestroyHook(function(){e.intersectionObserver.destroy()})}},{key:"switchDoc",value:function(e){var t=this,n=this.pdfViewer.getPDFDocRender().$container[0];n.addEventListener("pointerdown",this.pointerdownEventHandler,{capture:!0}),this.removeContextmenuEvent=(0,Y.attachContextMenuEvent2)(n,{match:function(e){var t=(0,Y.getClientX)(e),n=(0,Y.getClientY)(e);return!!document.elementsFromPoint(t,n).find(function(e){return e.classList.contains("fv__ui-form-designer-editting-widget")})},handler:this.contextmenuEventHandler,eventOptions:{capture:!0}}),this.removePointerdownEvent=function(){n.removeEventListener("pointerdown",t.pointerdownEventHandler)},this.removeDoubleTapEvent=(0,Y.onTap)({target:n,onDoubleTap:this.onDoubleTapListener,onSingleTap:function(e){}})}},{key:"cleanup",value:function(){this.tapEvents.clear(),this.contextmenuEvents.clear(),this.removePointerdownEvent(),this.removeContextmenuEvent(),this.removeDoubleTapEvent()}},{key:"onWidgetVisiblilityChange",value:function(e,t){return this.intersectionObserver.observe(e.edittingUI,function(e,n){t(n)})}},{key:"isWidgetVisible",value:function(e){return this.intersectionObserver.isVisible(e.edittingUI)}},{key:"onTap",value:function(e,t){var n=this;return this.tapEvents.set(e,t),function(){n.tapEvents.get(e)===t&&n.tapEvents.delete(e)}}},{key:"onDoubleTap",value:function(e,t){var n=this;return this.doubleTapEvents.set(e,t),function(){n.doubleTapEvents.get(e)===t&&n.doubleTapEvents.delete(e)}}},{key:"onContextmenu",value:function(e,t){var n=this;return this.contextmenuEvents.set(e,t),function(){n.contextmenuEvents.delete(e)}}},{key:"onGlobalContextmenu",value:function(e){var t=this,n=function(t){e(t)};return this.globalContextMenuEvents.add(n),function(){t.globalContextMenuEvents.delete(n)}}}],[{key:"inject",value:function(){return{pdfViewer:"PDFViewer"}}}]),t}(Y.Disposable),ls=function(){function e(){u(this,e),q(this,"store",new Map)}return p(e,[{key:"set",value:function(e,t){this.store.set(e,t)}},{key:"get",value:function(e){var t=this.findKey(e);return t?this.store.get(t):void 0}},{key:"delete",value:function(e){var t=this.findKey(e);return!!t&&this.store.delete(t)}},{key:"clear",value:function(){this.store.clear()}},{key:"findKey",value:function(e){if(this.store.has(e))return e;var t=!0,n=!1,i=void 0;try{for(var r,o=this.store.keys()[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;if(a.pageIndex===e.pageIndex&&a.objNumber===e.objNumber)return a}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}}]),e}(),us=function(e){function t(){var e;return u(this,t),q(e=a(this,t,arguments),"properties",{}),e}return m(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(i(t.prototype),"mounted",this).call(this),this.addDestroyHook(this.pdfViewer.addEventListener(F.willCloseDocument,function(){e.hide()}),this.edittingService.onGlobalContextmenu(function(){e.hide()}),this.attachEventToElement(this.element,"keydown,keyup",function(t){(0,Y.match)(t).when(Y.matchers.Escape,function(){"keyup"===t.type&&e.hide(),t.stopPropagation()})},!1),this.createWidgetService.onCleanupNewlyWidget(function(){e.hide(),e.properties={},e.digest()}),this.createWidgetService.onCreateWidget(function(t){return n(function(){var e,n,i,r;return b(this,function(o){switch(o.label){case 0:return!1===this.pdfViewer.getStore().getCurrentValue(I.HIDE_FORM_FIELD_PROPERTY_BOX)?[2]:[4,this.setPosition(t)];case 1:return o.sent(),e=t.getPage().getIndex(),(n=this.pdfViewer.getPDFPageRender(e))?(i=n.$ui[0],r=t.getField(),this.properties={type:r.getType(),name:r.getName()},this.digest(),this.show(i),[2]):[2]}})}).call(e)}),this.attachEventToElement(this.element,"blur",function(){return n(function(){return b(this,function(e){switch(e.label){case 0:return[4,new Promise(function(e){return setTimeout(e)})];case 1:return e.sent(),this.hasFocus()||this.createWidgetService.cleanup(),[2]}})}).call(e)},{capture:!0}),this.attachEventToElement(document,"pointerdown",function(t){return n(function(){return b(this,function(e){return this.element.contains(t.target)||this.hide(),[2]})}).call(e)},{capture:!0}),this.attachEventToElement(window,"resize",function(){e.hide()},{capture:!0}),this.pdfViewer.addEventListener(F.zoomToSuccess,function(){return n(function(){var e;return b(this,function(t){switch(t.label){case 0:return(e=this.createWidgetService.getCurrentNewlyWidget())?[4,this.setPosition(e)]:[2];case 1:return t.sent(),[2]}})}).call(e)}))}},{key:"setPosition",value:function(e){return n(function(){var t,n,i,r,o;return b(this,function(a){switch(a.label){case 0:return t=e.getPage().getIndex(),(n=this.pdfViewer.getPDFPageRender(t))?(i=n.$ui[0].getBoundingClientRect(),r=e.getRect(),[4,n.transformPoint({point:{x:r.left,y:r.bottom},srcType:ss.pdf,destType:ss.page})]):[2];case 1:return o=a.sent(),this.element.style.cssText+="\n            left: ".concat(o.x/i.width*100,"%;\n            top: ").concat(o.y/i.height*100,"%;\n        "),[2]}})}).call(this)}},{key:"doShown",value:function(){f(i(t.prototype),"doShown",this).call(this);var e=this.querySelector("fv--simple-form-properties-field-name-input");e&&e.focus()}},{key:"showAllPropertiesDialog",value:function(){var e=this.getRoot().querySelector("fv--form-designer-widget-properties-dialog");e&&(e.show(),this.hide())}}],[{key:"getName",value:function(){return"simple-form-properties-dialog"}},{key:"inject",value:function(){return{createWidgetService:ee,edittingService:cs,pdfViewer:"PDFViewer"}}}]),t}(Q.SeniorComponentFactory.createSuperClass({template:as()()}));K.registerComponent(us);var ds=(0,Y.createDOM)("div",{class:"fv__ui-form-designer-editting-widget"},[(0,Y.createDOM)("div",{class:"fv__ui-form-designer-editting-widget-title"},[]),(0,Y.createDOM)("div",{class:"fv__ui-form-designer-editting-widget-order fv__ui-force-hide"},[])]);var ps=N.BuiltinCommand,fs=N.BuiltinShortcutContext,gs=function(e){function t(){return u(this,t),a(this,t)}return m(t,e),p(t,[{key:"serviceInjected",value:function(){this.bindShortcut()}},{key:"setWidgetDeviceWidthHeight",value:function(e){var t=this,n=e.offsetWidth,i=e.offsetHeight,r=this.pdfViewer.getAllActivatedElements();r&&0!==r.length&&r.forEach(function(e){t.alignmentService.setWidgetDeviceWidthHeight(e,{offsetWidth:n,offsetHeight:i},!0)})}},{key:"bindShortcut",value:function(){var e=this,t=function(t,n){var i=e.pdfViewer.getAllActivatedElements();i&&0!==i.length&&n(t)},n=function(t,n){var i=e.pdfViewer.getCurrentPDFDoc();if(i){var r=i.isStaticXFA(),o=i.isXFARemoved();(r?o:r)||n(t)}};this.pdfViewer.getKeyboard().withContext(fs.ACTIVATION_WIDGET,function(i){e.addDestroyHook(i.keydown(ps.ALIGNMENT_REDUCE_HEIGHT,function(){e.setWidgetDeviceWidthHeight({offsetHeight:-1})},{interceptors:[n,t,(0,Y.preventDefaultInterceptor)()]}),i.keydown(ps.ALIGNMENT_RAISE_HEIGHT,function(){e.setWidgetDeviceWidthHeight({offsetHeight:1})},{interceptors:[n,t,(0,Y.preventDefaultInterceptor)()]}),i.keydown(ps.ALIGNMENT_REDUCE_WIDTH,function(){e.setWidgetDeviceWidthHeight({offsetWidth:-1})},{interceptors:[n,t,(0,Y.preventDefaultInterceptor)()]}),i.keydown(ps.ALIGNMENT_RAISE_WIDTH,function(){e.setWidgetDeviceWidthHeight({offsetWidth:1})},{interceptors:[n,t,(0,Y.preventDefaultInterceptor)()]}),i.keydown(ps.ALIGNMENT_REDUCE_STEP_HEIGHT,function(){e.setWidgetDeviceWidthHeight({offsetHeight:-10})},{interceptors:[n,t,(0,Y.preventDefaultInterceptor)()]}),i.keydown(ps.ALIGNMENT_RAISE_STEP_HEIGHT,function(){e.setWidgetDeviceWidthHeight({offsetHeight:10})},{interceptors:[n,t,(0,Y.preventDefaultInterceptor)()]}),i.keydown(ps.ALIGNMENT_REDUCE_STEP_WIDTH,function(){e.setWidgetDeviceWidthHeight({offsetWidth:-10})},{interceptors:[n,t,(0,Y.preventDefaultInterceptor)()]}),i.keydown(ps.ALIGNMENT_RAISE_STEP_WIDTH,function(){e.setWidgetDeviceWidthHeight({offsetWidth:10})},{interceptors:[n,t,(0,Y.preventDefaultInterceptor)()]}))})}}],[{key:"scope",value:function(){return Q.ServiceScope.SINGLETON}},{key:"inject",value:function(){return{pdfViewer:"PDFViewer",alignmentService:A}}},{key:"isLazy",value:function(){return!1}}]),t}(Y.Disposable),ms=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),t}(st),hs=function(e){function t(){return u(this,t),a(this,t,arguments)}return m(t,e),p(t,[{key:"destroy",value:function(){f(i(t.prototype),"destroy",this).call(this)}}],[{key:"inject",value:function(){return{_commonPropertiesService:ct,_checkboxRadioButtonOptionsService:dr,_comboBoxOptionsService:ms,_comboListBoxOptionsService:Li,_pushButtonPropertiesService:bn,_radioButtonOptionsService:Cr,_textFieldPropertiesService:Vn,_actionPropertiesService:ti,_widgetFormatOptionsService:di}}},{key:"decorate",value:function(e){var t=[e._commonPropertiesService,e._checkboxRadioButtonOptionsService,e._comboBoxOptionsService,e._comboListBoxOptionsService,e._pushButtonPropertiesService,e._radioButtonOptionsService,e._textFieldPropertiesService,e._actionPropertiesService,e._widgetFormatOptionsService],n=new WeakMap;return new Proxy(e,{has:function(e,n){return!!Reflect.has(e,n)||t.some(function(e){return Reflect.has(e,n)})},get:function(e,i,r){if(Reflect.has(e,i))return Reflect.get(e,i,r);var o=t.find(function(e){return Reflect.has(e,i)});if(o){var a=Reflect.get(o,i,o);if("function"!=typeof a)return a;if(n.has(a))return n.get(a);var s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a.apply(o,t)};return n.set(a,s),s}},getOwnPropertyDescriptor:function(e,n){if(Reflect.has(e,n))return Reflect.getOwnPropertyDescriptor(e,n);var i=t.find(function(e){return Reflect.has(e,n)});return i?Reflect.getOwnPropertyDescriptor(i,n):void 0},ownKeys:function(e){var n=new Set;return Reflect.ownKeys(e).forEach(function(e){return n.add(e)}),t.forEach(function(e){Reflect.ownKeys(e).forEach(function(e){return n.add(e)})}),Array.from(n)}})}}]),t}(Y.Disposable),vs=function(){function e(){u(this,e),q(this,"callbacks",{}),q(this,"defaultFormFieldProps",{}),q(this,"hideFormFieldProperty",void 0)}return p(e,[{key:"allInjected",value:function(){return n(function(){var e,t;return b(this,function(n){switch(n.label){case 0:return e=this,[4,this.pdfui.getStore()];case 1:return(t=n.sent()).subscribe("update-form-field-default-props",function(t){e.defaultFormFieldProps=St({},t)}),t.subscribe("get-form-field-default-props",function(t){var n=St({},e.defaultFormFieldProps);n[t.fieldType]=t.value,e.callbacks&&e.callbacks.onFormFieldPropsChanged&&e.callbacks.onFormFieldPropsChanged(n)}),t.subscribe("hideFormFieldPropertyBox",function(t){e.hideFormFieldProperty=t}),[2]}})}).call(this)}},{key:"activeWidget",value:function(e){return n(function(e){var t,n,i,r,o,a,s,c,l,u;return b(this,function(d){switch(d.label){case 0:return t=e.id,n=e.pageIndex,[4,(i=this.pdfui).getCurrentPDFDoc()];case 1:return(r=d.sent())?[4,r.query({type:"annot",annotId:{objNumber:t,pageIndex:n}})]:[2];case 2:return(o=d.sent())?[4,i.getPDFPageRender(n)]:[2];case 3:return(a=d.sent()).isRendered?[3,5]:[4,i.goToPage(n,0,0,!1)];case 4:d.sent(),d.label=5;case 5:return[4,i.getStateHandlerManager()];case 6:return s=d.sent(),[4,i.getComponentByName(Vo).then(function(e){var t=i.customs.isAccountExpired;!!t&&t(!1)||e.isLocked||s.switchTo(Vo,void 0)})];case 7:return d.sent(),c=o.getDeviceRect(a.getScale(),a.getRotation()),l=c.left,u=c.top,[4,i.goToPage(n,u,l,!1).then(function(){var e=a.getAnnotRender(t);e&&i.activateElement(e.component)})];case 8:return d.sent(),[2]}})}).apply(this,arguments)}},{key:"showPropertiesDialog",value:function(e){var t=e.id,n=e.pageIndex,i=this.pdfui;return i.getPDFPageRender(n).then(function(e){var n=e.getAnnotRender(t);return i.activateElement(n.component),i.getComponentByName("fv--form-designer-widget-properties-dialog")}).then(function(e){e&&e.show()})}},{key:"removeWidget",value:function(e){var t=e.id,n=e.pageIndex;return this.pdfui.getPDFPageRender(n).then(function(e){var n,i=e.getAnnotRender(t);return null==i||null===(n=i.component)||void 0===n?void 0:n.removeAnnot()})}},{key:"multipleCopy",value:function(e){var t=e.id,n=e.pageIndex,i=this.pdfui;return i.getPDFPageRender(n).then(function(e){var n=e.getAnnotRender(t);return i.activateElement(n.component),i.getComponentByName("fv--form-designer-create-multiple-copies-dialog")}).then(function(e){e&&e.show()})}},{key:"duplicate",value:function(e){var t=e.id,n=e.pageIndex,i=this.pdfui;return i.getPDFPageRender(n).then(function(e){var n=e.getAnnotRender(t);return i.activateElement(n.component),i.getComponentByName("fv--form-designer-duplicate-dialog")}).then(function(e){e&&e.show()})}},{key:"ev-receive-form-field-default-props",value:function(e){var t=function(){};"function"==typeof e?t=e:e&&e.length>0&&"function"==typeof e[0]&&(t=e[0]),this.callbacks.onFormFieldPropsChanged=t}},{key:"ev-update-form-field-default-props",value:function(e){return n(function(){return b(this,function(t){return this.pdfui.getStore().dispatch("update-form-field-default-props",St({},e)),[2]})}).call(this)}},{key:"getAnnotRenderById",value:function(e,t){return this.pdfui.getPDFPageRender(t).then(function(t){return t?{annot:t.page.annotIdMap[e],pageRender:t}:Promise.reject(new Error("cannot found widget by id:"+e))})}}],[{key:"inject",value:function(){return{pdfui:"PDFUI"}}}]),e}(),ys=function(t){function r(){return u(this,r),a(this,r,arguments)}return m(r,t),p(r,[{key:"init",value:function(t){this.pdfUI=t,t.getStateHandlerManager().then(function(t){Object.values(e).forEach(function(e){t.register(e)})}),t.getAnnotManager().then(function(e){e.registerMatchRule(function(e,r){if("widget"===e.getType())return function(e){function i(){return u(this,i),a(this,i,arguments)}return m(i,e),p(i,[{key:"showPropertiesDialog",value:function(){return n(function(){var e;return b(this,function(n){switch(n.label){case 0:return[4,t.querySelectorAll("fv--form-designer-widget-properties-dialog")];case 1:return e=y.apply(void 0,[n.sent(),1]),e[0].show(),[2]}})})()}}]),i}(function(e){function t(e,n,i,r){var o;u(this,t),q(o=a(this,t,[e,n,i,r]),"annot",void 0),q(o,"eUi",void 0),q(o,"eHandler",void 0),q(o,"annotRender",void 0),q(o,"edittingUI",void 0),q(o,"showFieldNameElement",void 0),q(o,"showOrderElement",void 0),q(o,"isCreatingDesignerContextMenu",void 0),o.annot=e,o.eUi=n,o.eHandler=i,o.annotRender=r,o.edittingUI=ds.cloneNode(!0),o.showFieldNameElement=o.edittingUI.firstElementChild,o.showOrderElement=o.showFieldNameElement.nextElementSibling,o.isCreatingDesignerContextMenu=!1,o.edittingUI.setAttribute("data-widget-obj-number",e.getObjectNumber()),o.edittingUI.setAttribute("tabindex","-1"),o.isDesignable()&&n.appendChild(o.edittingUI),o.fillerService=o.pdfViewer.getFormFillerService();var s=o.pdfViewer.getIoC();return o.edittingService=s.getInstanceByClass(cs),o.createWidgetService=s.getInstanceByClass(ee),o.tabOrderMgrService=s.getInstanceByClass(zo),o.pageRender=o.annotsRender.pageRender,Y.Lazy.property(o,"shapeControl",function(){var e={moveable:!0,resizable:!0,enableDiagonally:!0,moveDirection:E.constants.DIRECTION.All},t=o.pdfViewer.customs.getAnnotComponentConfig(o,Object.keys(e)),n=new P(Ct(St({},e,t),{emitter:o.pdfViewer.eventEmitter,prestart:function(){o.createWidgetService.cleanup()},moving:function(){},end:function(e){o.shapeControlOnEnd(e)},afterEnd:function(){},auxiliaryLine:void 0})),i=o.annot.getObjectNumber();return n.ui.setAttribute("data-widget-obj-number",i),n.ui.addEventListener("click",function(e){o.isActive&&e.isTrusted&&0===e.button&&!e.shiftKey&&e.ctrlKey&&o.pdfViewer.deactivateElement(o)}),n}),s.getInstanceByClass("PDFUI"),o.addDestroyHook(Y.Lazy.onInitialized(o,"shapeControl",function(){o.applyPermissionsChange()}),o.pdfViewer.addEventListener(F.formFieldPropertyUpdated,function(e){e.propertyName===et.FormFieldPropertyName.FLAGS&&o.applyPermissionsChange()}),o.pdfViewer.addEventListener(F.annotationUpdated,function(e,t,n){if(o.isDesignMode&&-1!==e.indexOf(o.annot))if(n===Qe.flagsUpdated)o.applyPermissionsChange();else if(n===Qe.rectUpdated){if(!o.isActive)return;o.doActive(),o.updateEdittingUI()}}),o.pdfViewer.addEventListener(F.xfaFormRemoved,function(e){e===o.annot.getPage().doc&&o.isDesignMode&&o.toggleDesignMode(!0)}),function(){Y.Lazy.isPropertyIntialized(o,"shapeControl")?o.shapeControl.destroy():Y.Lazy.release(o,"shapeControl")},o.fillerService.onDesignModeChange(function(){var e=o.fillerService.isMatchCurrentEditType(o.annot);o.toggleDesignMode(e),e&&o.updateTabOrderNumber()}),o.edittingService.onTap(o.annot.getAnnotId(),function(e){if(o.isDesignMode){o.isActive||o.pdfViewer.activateElement(o);var t=o.annot.getWidgetId();o.tabOrderMgrService.isManagerEnabled(t.pageIndex)&&o.tabOrderMgrService.tapWidget(t)}}),o.pdfViewer.addEventListener(F.formFieldRenamed,function(e){var t,n=e.doc,i=(e.widgetId,e.oldName,e.newName);o.annot.getPage().doc===n&&(null===(t=o.annot.getField())||void 0===t?void 0:t.getName())===i&&(o.showFieldNameElement.innerText=i)}),o.tabOrderMgrService.onTabOrderTypeChanged(function(){o.updateTabOrderNumber()}),o.tabOrderMgrService.onShowOrderNumber(function(){o.updateTabOrderNumber()}),o.tabOrderMgrService.onTabOrderEnabled(function(){o.updateTabOrderNumber()}),o.edittingService.onWidgetVisiblilityChange(o,function(){o.updateTabOrderNumber()}),o.tabOrderMgrService.onWidgetTabOrderChanged(function(e){var t=o.annot.getObjectNumber();e.includes(t)&&o.updateTabOrderNumber()})),o.addDestroyHook(o.edittingService.onContextmenu(o.annot.getAnnotId(),function(e,t,n){o.isActive||o.pdfViewer.activateElement(o),o.showContextMenu(t,n)&&(e.stopPropagation(),e.preventDefault())}),o.edittingService.onDoubleTap(o.annot.getAnnotId(),function(e){o.isDesignMode&&o.showPropertiesDialog()})),o}return m(t,e),p(t,[{key:"applyPermissionsChange",value:function(){return n(function(){var e;return b(this,function(t){switch(t.label){case 0:return[4,this.getAppPermission()];case 1:return e=t.sent(),[4,this.updateOnPermissionChange(e)];case 2:return t.sent(),[2]}})}).call(this)}},{key:"updateOnPermissionChange",value:function(e){var r=this,o=this;return n(function(){return b(this,function(n){return this.isDesignMode?(this.shapeControl.enable(),[2,f(i(t.prototype),"updateOnPermissionChange",r).call(o,e)]):(this.shapeControl.disable(),[2])})}).call(this)}},{key:"createDesignModeContextMenu",value:function(){this.isCreatingDesignerContextMenu=!0;try{return this.pdfViewer.viewerUI.createContextMenu(this,this.edittingUI,this.getContextMenuConfig())}finally{this.isCreatingDesignerContextMenu=!1}}},{key:"getContextMenuComponentName",value:function(){var e;return this.isCreatingDesignerContextMenu?"fv--ui-form-designer-widget-contextmenu":(null===(e=this.annot.getField())||void 0===e?void 0:e.getType())===M.Sign?"fv--field-signature-contextmenu":void 0}},{key:"updateTabOrderNumber",value:function(){return n(function(){var e,t,n;return b(this,function(i){switch(i.label){case 0:return this.isDesignMode&&this.edittingService.isWidgetVisible(this)?[4,this.tabOrderMgrService.getOrderNumber(this.annot.getWidgetId())]:[2];case 1:return e=i.sent(),t=e>0,this.showOrderElement.classList.toggle("fv__ui-force-hide",!t),n=t?e+"":"",this.showOrderElement.innerText!==n&&(this.showOrderElement.innerText=n),[2]}})}).call(this)}},{key:"shapeControlOnEnd",value:function(e){return n(function(){var t,n;return b(this,function(i){switch(i.label){case 0:return t={left:e.left,top:e.top,right:e.left+e.width,bottom:e.top+e.height},[4,this.pageRender.reverseDeviceRect(t)];case 1:return n=i.sent(),[4,this.annot.setRect(n)];case 2:return i.sent(),this.updateEdittingUI(),[2]}})}).call(this)}},{key:"isDesignable",value:function(){var e=this.annot.getPage().doc;return!(e.isStaticXFA()&&!e.isXFARemoved())}},{key:"toggleDesignMode",value:function(e){var r=this,o=this;return n(function(){var n,a;return b(this,function(s){switch(s.label){case 0:return[4,f(i(t.prototype),"toggleDesignMode",r).call(o,e)];case 1:if(s.sent(),e){if(!this.isDesignable())return[2];this.edittingUI.parentElement||this.$ui.get(0).appendChild(this.edittingUI),this.updateEdittingUI(),n=this.annot.getField(),a=null==n?void 0:n.getName(),this.showFieldNameElement.innerText=a||""}return this.applyPermissionsChange(),this.edittingUI.classList.toggle("fv__ui-force-hide",!e),[2]}})}).call(this)}},{key:"updateSize",value:function(e,n){f(i(t.prototype),"updateSize",this).call(this,e,n),this.updateUI()}},{key:"render",value:function(e,r){var o=this,a=this;return n(function(){return b(this,function(n){switch(n.label){case 0:return this.scale=e,this.rotate=r,[4,f(i(t.prototype),"render",o).call(a,e,r)];case 1:return n.sent(),this.isDesignMode&&this.updateEdittingUI(),[2]}})}).call(this)}},{key:"active",value:function(){if(this.isDesignMode&&this.isDesignable()){f(i(t.prototype),"active",this).call(this);var e=this.annotRender;this.pdfViewer.eventEmitter.emit(F.activeAnnotation,e,this.getId(),e.parent())}}},{key:"doActive",value:function(){f(i(t.prototype),"doActive",this).call(this),this.updateShapeControl()}},{key:"unActive",value:function(){f(i(t.prototype),"unActive",this).call(this),this.shapeControl.deactive()}},{key:"updateUI",value:function(){this.isDesignMode&&this.updateEdittingUI(),this.isActive&&this.updateShapeControl()}},{key:"updateShapeControl",value:function(){if(this.isDesignMode){var e=this.getShapeControlBoundary(),t=this.getShapeControlBoundaryBox();this.shapeControl.active(this.$ui,e,t)}}},{key:"updateEdittingUI",value:function(){var e=this.getShapeControlBoundary();this.edittingUI.style.cssText+="\n                left: ".concat(e.left,"px;\n                top: ").concat(e.top,"px;\n                width: ").concat(e.width,"px;\n                height: ").concat(e.height,"px;\n            ")}},{key:"getShapeControlBoundary",value:function(){var e=this.getPDFPage(),t=this.annot.getRect(),n=e.getDeviceRect(t,this.scale,this.rotate);return{left:n.left,top:n.top,width:n.right-n.left,height:n.bottom-n.top}}},{key:"getShapeControlBoundaryBox",value:function(){var e=this.annotsRender.pageRender;return{left:0,top:0,right:e.getShowWidth(),bottom:e.getShowHeight()}}},{key:"moved",value:function(){this.active()}},{key:"_applyShapeChange",value:function(){this.updateShapeControl()}},{key:"showContextMenu",value:function(e,n){return!this.isDestroyed&&(!!this.tabOrderMgrService.isOrderNumberVisibleAt(this.pageRender.index)||f(i(t.prototype),"showContextMenu",this).call(this,e,n))}},{key:"destroy",value:function(){f(i(t.prototype),"destroy",this).call(this)}},{key:"showPropertiesDialog",value:function(){}},{key:"requestFocus",value:function(){return this.isDesignMode?(this.edittingUI.focus(),this.active(),Promise.resolve()):f(i(t.prototype),"requestFocus",this).call(this)}}]),t}(r))})}),t.getIoC().getInstanceByClass(gs)}},{key:"getCommonPropertiesService",value:function(){return this.pdfUI.getIoC().getInstanceByClass(ct)}},{key:"getTextFieldPropertiesService",value:function(){return this.pdfUI.getIoC().getInstanceByClass(Vn)}},{key:"getPushButtonPropertiesService",value:function(){return this.pdfUI.getIoC().getInstanceByClass(bn)}},{key:"getComboListBoxOptionsServiceService",value:function(){return this.pdfUI.getIoC().getInstanceByClass(Li)}},{key:"getRadioButtonOptionsService",value:function(){return this.pdfUI.getIoC().getInstanceByClass(Cr)}},{key:"getCheckboxRadioButtonPropertiesService",value:function(){return this.pdfUI.getIoC().getInstanceByClass(dr)}},{key:"getWidgetFormatOptionsService",value:function(){return this.pdfUI.getIoC().getInstanceByClass(di)}},{key:"getPDFFormActionPropertiesService",value:function(){return this.pdfUI.getIoC().getInstanceByClass(ti)}},{key:"getPDFFormPropertiesService",value:function(){return this.pdfUI.getIoC().getInstanceByClass(hs)}},{key:"getPropertiesConfigService",value:function(){return this.pdfUI.getIoC().getInstanceByClass(tt)}},{key:"getDialog",value:function(e){return new{PickField:UIExtension.FieldsPickDialog,JSInput:UIExtension.ScriptInputDialog}[e](this.pdfUI)}},{key:"getAnnotRenderById",value:function(e,t){return this.pdfUI.getPDFPageRender(t).then(function(t){return t?{annot:t.page.annotIdMap[e],pageRender:t}:Promise.reject(new Error("cannot found widget by id:"+e))})}},{key:"receiveAction",value:function(e,t){var n=this.pdfUI.getIoC().getInstanceByClass(vs);return"function"==typeof n[e]?n[e](t):f(i(r.prototype),"receiveAction",this).call(this,e,t)}}],[{key:"getName",value:function(){return z}},{key:"getLoader",value:function(){return X()}}]),r}(_)})(),l=l.default})());