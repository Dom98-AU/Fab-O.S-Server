!function(t,o){"object"==typeof exports&&"object"==typeof module?module.exports=o(require("UIExtension")):"function"==typeof define&&define.amd?define(["UIExtension"],o):"object"==typeof exports?exports.ExportFormUIXAddon=o(require("UIExtension")):t.ExportFormUIXAddon=o(t.UIExtension)}(self,t=>(()=>{var o={922:t=>{t.exports=null},616:o=>{"use strict";o.exports=t}},e={};function n(t){var r=e[t];if(void 0!==r)return r.exports;var i=e[t]={exports:{}};return o[t](i,i.exports,n),i.exports}n.n=t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return n.d(o,{a:o}),o},n.d=(t,o)=>{for(var e in o)n.o(o,e)&&!n.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:o[e]})},n.o=(t,o)=>Object.prototype.hasOwnProperty.call(t,o);var r={};return(()=>{"use strict";function t(o){return t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t(o)}function o(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(o=function(){return!!t})()}function e(t,o){return!o||"object"!=((e=o)&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)&&"function"!=typeof o?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):o;var e}function i(n,r,i){return r=t(r),e(n,o()?Reflect.construct(r,i||[],t(n).constructor):r.apply(n,i))}function l(t,o){return null!=o&&"undefined"!=typeof Symbol&&o[Symbol.hasInstance]?!!o[Symbol.hasInstance](t):l(t,o)}function u(t,o){if(!l(t,o))throw new TypeError("Cannot call a class as a function")}function c(t,o){for(var e=0;e<o.length;e++){var n=o[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,o,e){return o&&c(t.prototype,o),e&&c(t,e),t}function f(t,o){return f=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t},f(t,o)}function p(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),o&&f(t,o)}n.d(r,{default:()=>A});var s=n(616),d=n(922),x=n.n(d);function m(t,o){var e=t.lastIndexOf(".");return-1!==e&&(t=t.substring(0,e)),t+=o}var b=s.PDFViewCtrl.shared.download,h=function(t){function o(){return u(this,o),i(this,o,arguments)}return p(o,t),a(o,[{key:"handle",value:function(){this.getPDFUI().getPDFViewer().then(function(t){t.activeElement(null);var o=t.currentPDFDoc,e=o.getFileName();e=m(e||"download.pdf",".xml"),(o.isStaticXFA()||o.isDynamicXFA()?o.exportXFAToFile("xml"):o.exportFormToFile(2)).then(function(t){"blob"in t&&(t=t.blob),b(t,e,"application/xml")})})}}],[{key:"getName",value:function(){return"ExportToXMLController"}}]),o}(s.Controller),v=s.PDFViewCtrl.shared.download,y=function(t){function o(){return u(this,o),i(this,o,arguments)}return p(o,t),a(o,[{key:"handle",value:function(){this.getPDFUI().getPDFViewer().then(function(t){t.activeElement(null);var o=t.currentPDFDoc,e=o.getFileName();e=m(e||"download.pdf",".fdf"),o.exportFormToFile(0).then(function(t){v(t,e,"application/vnd.fdf")})})}}],[{key:"getName",value:function(){return"ExportToFDFController"}}]),o}(s.Controller),F=s.PDFViewCtrl.shared.download,g=function(t){function o(){return u(this,o),i(this,o,arguments)}return p(o,t),a(o,[{key:"handle",value:function(){this.getPDFUI().getPDFViewer().then(function(t){t.activeElement(null);var o=t.currentPDFDoc,e=o.getFileName();e=m(e||"download.pdf",".xfdf"),o.exportFormToFile(1).then(function(t){F(t,e,"application/vnd.adobe.xfdf")})})}}],[{key:"getName",value:function(){return"ExportToXFDFController"}}]),o}(s.Controller),w=s.PDFViewCtrl.shared.download,D=function(t){function o(){return u(this,o),i(this,o,arguments)}return p(o,t),a(o,[{key:"handle",value:function(){this.getPDFUI().getPDFViewer().then(function(t){t.activeElement(null);var o=t.currentPDFDoc,e=o.getFileName();e=m(e||"download.pdf",".csv"),o.exportFormToFile(3).then(function(t){w(t,e,"application/csv")})})}}],[{key:"getName",value:function(){return"ExportToCSVController"}}]),o}(s.Controller),P=s.PDFViewCtrl.shared.download,C=function(t){function o(){return u(this,o),i(this,o,arguments)}return p(o,t),a(o,[{key:"handle",value:function(){this.getPDFUI().getPDFViewer().then(function(t){t.activeElement(null);var o=t.currentPDFDoc,e=o.getFileName();e=m(e||"download.pdf",".txt"),o.exportFormToFile(4).then(function(t){P(t,e,"application/txt")})})}}],[{key:"getName",value:function(){return"ExportToTXTController"}}]),o}(s.Controller),E=s.PDFViewCtrl.shared.download,_=(s.PDFViewCtrl.Consts.PDFDocPermission,function(t){function o(){return u(this,o),i(this,o,arguments)}return p(o,t),a(o,[{key:"handle",value:function(){this.getPDFUI().getPDFViewer().then(function(t){t.activeElement(null);var o=t.currentPDFDoc,e=o.getFileName();e=m(e||"download.pdf",".xdp"),o.exportXFAToFile("xdp").then(function(t){E(t.blob,e,"application/vnd.adobe.xdp")})})}}],[{key:"getName",value:function(){return"ExportToXDPController"}}]),o}(s.Controller));function T(t,o,e,n,r,i,l){try{var u=t[i](l),c=u.value}catch(t){return void e(t)}u.done?o(c):Promise.resolve(c).then(n,r)}function k(o,e,n){return k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(o,e,n){var r=function(o,e){for(;!Object.prototype.hasOwnProperty.call(o,e)&&null!==(o=t(o)););return o}(o,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n||o):i.value}},k(o,e,n||o)}function I(t,o){(null==o||o>t.length)&&(o=t.length);for(var e=0,n=new Array(o);e<o;e++)n[e]=t[e];return n}function O(t,o){return function(t){if(Array.isArray(t))return t}(t)||function(t,o){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,i=[],l=!0,u=!1;try{for(e=e.call(t);!(l=(n=e.next()).done)&&(i.push(n.value),!o||i.length!==o);l=!0);}catch(t){u=!0,r=t}finally{try{l||null==e.return||e.return()}finally{if(u)throw r}}return i}}(t,o)||function(t,o){if(t){if("string"==typeof t)return I(t,o);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?I(t,o):void 0}}(t,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(t,o){var e,n,r,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},l=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return l.next=u(0),l.throw=u(1),l.return=u(2),"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function u(u){return function(c){return function(u){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,u[0]&&(i=0)),i;)try{if(e=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,n=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(r=i.trys,(r=r.length>0&&r[r.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!r||u[1]>r[0]&&u[1]<r[3])){i.label=u[1];break}if(6===u[0]&&i.label<r[1]){i.label=r[1],r=u;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(u);break}r[2]&&i.ops.pop(),i.trys.pop();continue}u=o.call(t,i)}catch(t){u=[6,t],n=0}finally{e=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;var V=s.PDFViewCtrl.Events,S=s.PDFViewCtrl.Consts.PDFDocPermission,j=function(o){function e(){return u(this,e),i(this,e,arguments)}return p(e,o),a(e,[{key:"changePermission",value:function(t){var o=this,e=this.getPDFUI().getPDFDocRender().then(function(t){return t&&t.getUserPermission().getValue()});Promise.all([t&&!t.isDestroyed&&t.hasForm(),e]).then(function(e){var n,r=O(e,2),i=r[0],l=r[1];return(n=function(){var o,e,n,r;return U(this,function(u){switch(u.label){case 0:return o=this,(n=t)?[4,t.isXFA()]:[3,2];case 1:n=u.sent(),u.label=2;case 2:return e=n,t&&(l&S.Extract&&(i||e)||t.isDynamicXFA())?this.component.unlock&&this.component.unlock():this.component.lock&&this.component.lock(),["export-to-fdf","export-to-xfdf","export-to-csv","export-to-txt"].map(function(n){var r=o.component.getComponentByName(n);t&&e?r.hide():r.show()}),r=this.component.getComponentByName("export-to-xdp"),t&&e?r.show():r.hide(),[2]}})},function(){var t=this,o=arguments;return new Promise(function(e,r){var i=n.apply(t,o);function l(t){T(i,e,r,l,u,"next",t)}function u(t){T(i,e,r,l,u,"throw",t)}l(void 0)})}).call(o)})}},{key:"mounted",value:function(){var o=this;k(t(e.prototype),"mounted",this).call(this),this.addDestroyHook(this.getPDFUI().addViewerEventListener(V.recognitionForm,function(t){o.changePermission(t)}),this.getPDFUI().addViewerEventListener(V.formReloaded,function(t){o.changePermission(t)}),this.getPDFUI().addViewerEventListener(V.annotationAdd,function(t){o.getPDFUI().getPDFDocRender().then(function(t){o.changePermission(t.getPDFDoc())})})),this.addDestroyHook(this.getPDFUI().addViewerEventListener(V.annotationRemoved,function(t){o.getPDFUI().getPDFDocRender().then(function(t){o.changePermission(t.getPDFDoc())})}),this.getPDFUI().addViewerEventListener(V.flattenAnnotation,function(t,e){o.getPDFUI().getPDFDocRender().then(function(t){o.changePermission(t.getPDFDoc())})}))}}],[{key:"getName",value:function(){return"ExportFormController"}}]),e}(s.Controller),X=function(t){function o(){return u(this,o),i(this,o,arguments)}return p(o,t),a(o,null,[{key:"getName",value:function(){return"export-form-ribbon-dropdown"}}]),o}(s.SeniorComponentFactory.createSuperClass({template:'\n    <ribbon-button icon-class="fx-icon-ribbon_form_export-32" @tooltip tooltip-title="export:button-tooltip.title" text="export:ribbon.text" name="export-form" @controller="export-form-module:ExportFormController">\n        <dropdown separate="false">\n            <dropdown-button ribbon-icon="" text="export:export.xml" name="export-to-xml"  @controller="export-form-module:ExportToXMLController" icon-class="fv__icon-toolbar-to-xml-file">\n                export:export.xml\n            </dropdown-button>\n            <dropdown-button ribbon-icon="" text="export:export.fdf" name="export-to-fdf"  @controller="export-form-module:ExportToFDFController" icon-class="fv__icon-toolbar-to-fdf-file">\n                export:export.fdf\n            </dropdown-button>\n            <dropdown-button ribbon-icon="" text="export:export.xfdf" name="export-to-xfdf" @controller="export-form-module:ExportToXFDFController"  icon-class="fv__icon-toolbar-to-xfdf-file">\n                export:export.xfdf\n            </dropdown-button>\n            <dropdown-button ribbon-icon="" text="export:export.csv" name="export-to-csv" @controller="export-form-module:ExportToCSVController"  icon-class="fv__icon-toolbar-to-csv-file">\n                export:export.csv\n            </dropdown-button>\n            <dropdown-button ribbon-icon="" text="export:export.txt" name="export-to-txt" @controller="export-form-module:ExportToTXTController"  icon-class="fv__icon-toolbar-to-txt-file">\n                export:export.txt\n            </dropdown-button>\n            <dropdown-button ribbon-icon="" text="export:export.xdp" name="export-to-xdp" @controller="export-form-module:ExportToXDPController"  icon-class="fv__icon-toolbar-to-xdp-file">\n                export:export.xdp\n            </dropdown-button>\n        </dropdown>\n    </ribbon-button>\n    '})),N=function(t){function o(){return u(this,o),i(this,o,arguments)}return p(o,t),a(o,null,[{key:"getName",value:function(){return"export-form-dropdown"}}]),o}(s.SeniorComponentFactory.createSuperClass({template:'\n        <dropdown @tooltip @controller="export-form-module:ExportFormController"  icon-class="fv__icon-toolbar-export-form" tooltip-title="export:button-tooltip.title" name="export-form" separate="false" selectable="false">\n            <dropdown-button name="export-to-xml"  @controller="export-form-module:ExportToXMLController" icon-class="fv__icon-toolbar-to-xml-file" tabindex="0">\n                export:export.xml\n            </dropdown-button>\n            <dropdown-button name="export-to-fdf"  @controller="export-form-module:ExportToFDFController" icon-class="fv__icon-toolbar-to-fdf-file" tabindex="0">\n                export:export.fdf\n            </dropdown-button>\n            <dropdown-button name="export-to-xfdf" @controller="export-form-module:ExportToXFDFController"  icon-class="fv__icon-toolbar-to-xfdf-file" tabindex="0">\n                export:export.xfdf\n            </dropdown-button>\n            <dropdown-button name="export-to-csv" @controller="export-form-module:ExportToCSVController"  icon-class="fv__icon-toolbar-to-csv-file" tabindex="0">\n                export:export.csv\n            </dropdown-button>\n            <dropdown-button name="export-to-txt" @controller="export-form-module:ExportToTXTController"  icon-class="fv__icon-toolbar-to-txt-file" tabindex="0">\n                export:export.txt\n            </dropdown-button>\n        </dropdown>\n    '})),A=function(t){function o(){return u(this,o),i(this,o,arguments)}return p(o,t),a(o,[{key:"fragments",value:function(){return[]}}],[{key:"getName",value:function(){return"exportForm"}},{key:"getLoader",value:function(){return x()}},{key:"initOnLoad",value:function(){var t=s.modular.module("export-form-module",[]);t.registerComponent(N),t.registerComponent(X),t.registerController(j),t.registerController(h),t.registerController(y),t.registerController(g),t.registerController(D),t.registerController(C),t.registerController(_)}}]),o}(s.UIXAddon)})(),r=r.default})());