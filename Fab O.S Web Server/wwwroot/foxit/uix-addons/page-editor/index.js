!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("UIExtension"),require("UIExtension").PDFViewCtrl.commons):"function"==typeof define&&define.amd?define(["UIExtension",["UIExtension","PDFViewCtrl","commons"]],t):"object"==typeof exports?exports.PageEditor=t(require("UIExtension"),require("UIExtension").PDFViewCtrl.commons):e.PageEditor=t(e.UIExtension,e.UIExtension.PDFViewCtrl.commons)}(self,(e,t)=>(()=>{var n={4395:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};var t="";return t+='<layer \nclass="fv__ui-PE-props-dialog center websdk-modal"\n@draggable \n@controller="page-editor:PropsDialogController as ctrl"\nname="pageEditorProps"\n>\n<layer-header></layer-header>\n<layer-view @stop-drag>\n<div class="fv__ui-PE-props-nav" name="PE-props-tabs" @alt.menu=">::activated()">\n<gtab name="general-tab" group="PE-props-tab" body="PE-props-general" text="page-editor:general.title" active></gtab>\n<gtab name="text-ap-tab" @show="ctrl.getActiveType()==1" group="PE-props-tab" body="PE-props-text-ap" text="page-editor:textAp.title"></gtab>\n<gtab name="path-ap-tab" @show="ctrl.getActiveType()==2" group="PE-props-tab" body="PE-props-path-ap" text="page-editor:textAp.title"></gtab>\n<gtab name="image-ap-tab" @show="ctrl.getActiveType()==3" group="PE-props-tab" body="PE-props-image-ap" text="page-editor:textAp.title"></gtab>\n</div>\n<div class="fv__ui-PE-props-bodies" name="PE-props-bodies">\n<div class="PE-props-general" name="PE-props-general">\n<div class="d_f fv__ui-PE-props-item">\n<div class="PE-general-input inchesPostfix">\n<label>page-editor:general.posx</label>\n<input \n@on.blur="ctrl.blurInput" \n@on.focus="ctrl.focusInput" \n@model="ctrl.positionX|page-editor:format_number($component)"\n@stop-propagation="keydown,keyup"\n></input>\n</div>\n<div class="PE-general-input inchesPostfix">\n<label>page-editor:general.posy</label>\n<input \n@on.blur="ctrl.blurInput" \n@on.focus="ctrl.focusInput" \n@model="ctrl.positionY|page-editor:format_number($component)" \n@stop-propagation="keydown,keyup"\n></input>\n</div>\n</div>\n<div class="d_f fv__ui-PE-props-item">\n<div class="PE-general-input inchesPostfix">\n<label>page-editor:general.width</label>\n<input\nname="width"\nclass="rangeLimit"\nmin=0\n@on.blur="ctrl.blurInput"\n@on.focus="ctrl.focusInput"\n@model="ctrl.width|page-editor:format_number($component)"\n@stop-propagation="keydown,keyup"\n></input>\n</div>\n<div class="PE-general-input inchesPostfix">\n<label>page-editor:general.height</label>\n<input\nname="height"\nclass="rangeLimit"\nmin=0\n@on.blur="ctrl.blurInput"\n@on.focus="ctrl.focusInput"\n@model="ctrl.height|page-editor:format_number($component)"\n@stop-propagation="keydown,keyup"\n></input>\n</div>\n',t+='\n</div>\n<div class="d_f fv__ui-PE-props-item">\n<div class="PE-general-input PE-noMargin">\n<label>page-editor:general.scalex</label>\n<input \n@on.blur="ctrl.blurInput"\nclass="rangeLimit"\nmin=0 \nmax=10000 \ndata-dir=\'horizon\'\n@on.focus="ctrl.focusInput"\n@model="ctrl.scaleX|page-editor:format_number($component)"\n@stop-propagation="keydown,keyup"\n></input>\n</div>\n<div class="PE-general-input">\n<label>page-editor:general.scaley</label>\n<input\n@on.blur="ctrl.blurInput"\nclass="rangeLimit"\nmin=0\nmax=10000\n@on.focus="ctrl.focusInput"\n@model="ctrl.scaleY|page-editor:format_number($component)"\n@stop-propagation="keydown,keyup"\n></input>\n</div>\n</div>\n</div>\n<div name="PE-props-text-ap" style="cursor: initial;">\n<div class="PE-general-input fullWidth">\n<label>page-editor:textAp.fontName</label>\n<dropdown class="PE-fillInput fv__ui-dropdown-limit-options" name="PE-fontName">\n<xbutton @foreach="item in ctrl.baseFontFamilies" @setter.text="item.name" @on.click="ctrl.selectFontName(item.name)" tabindex=\'0\' @class="{\'active\':ctrl.fontName === item.name}"></xbutton>\n<xbutton @foreach="item in ctrl.fontFamilies" @setter.text="item.name" @on.click="ctrl.selectFontName(item.name)" tabindex=\'0\' @class="{\'active\':ctrl.fontName === item.name}"></xbutton>\n</dropdown>\n</div>\n<div class="PE-general-input">\n<label>page-editor:textAp.fontSize</label>\n<input @on.blur="ctrl.fontSizeBlur" type="number" class="rangeLimit" min=1 max=9999 @model="ctrl.fontSize" data-i18n="[title]page-editor:textAp.fontSizeRangeLimit" name="PE-fontSize"></input>\n</div>\n<div class="PE-general-input PE-horizonScale">\n<label>page-editor:textAp.HScale</label>\n<input type="number" class="rangeLimit" min=1 max=1000 @model="ctrl.horizonScale" data-i18n="[title]page-editor:textAp.HScaleRangeLimit" name="PE-horizonScale"></input>\n<span>%</span>\n</div>\n<div class="PE-general-input">\n<label>page-editor:textAp.charSpace</label>\n<input type="number" class="rangeLimit" min=0 max=32 @model="ctrl.charSpace" data-i18n="[title]page-editor:textAp.charSpaceRangeLimit" name="PE-charSpace"></input>\n</div>\n<div class="PE-general-input">\n<label>page-editor:textAp.wordSpace</label>\n<input type="number" class="rangeLimit" min=0 max=32 @model="ctrl.wordSpace" class="PE-w100px" data-i18n="[title]page-editor:textAp.wordSpaceRangeLimit" name="PE-wordSpace"></input>\n</div>\n\n<div class="PE-general-input fullWidth">\n<label>page-editor:textAp.textMode</label>\n<dropdown class="PE-fillInput" name="PE-textMode">\n<xbutton @foreach="item in ctrl.textModes" @setter.text="\'page-editor:textAp.\'+ item.text" @on.click="ctrl.selectTextMode(item.value)" tabindex=\'0\' @class="{\'active\':ctrl.textMode === item.value}"></xbutton>\n</dropdown>\n</div>\n\n<div class="PE-general-input fullWidth" name="PE-textStrokeColor">\n<label>page-editor:textAp.strokeColor</label>\n<dropdown class="PE-general-input fullWidth" name="textStrokeColor">\n<xbutton @foreach="item in ctrl.colorTypes" @setter.text="item.text" @on.click="ctrl.selectColor(\'strokeColor\',item.value)" tabindex=\'0\' @class="{\'active\':ctrl.textStrokeColor === item.value}"></xbutton>\n</dropdown>\n<div class="color-picker" @on.click="ctrl.showCP(\'PE-textStrokeColor\')"><div class="color"></div></div>\n<slider class="PE-slider"\n@model="ctrl.strokeGray" max="1" min="0" step="0.1" value="1" name="PE-stroke-slider" @stop-drag hideinput="true"></slider>\n</div>\n\n<div class="PE-general-input fullWidth"  name="PE-textFillColor">\n<label>page-editor:textAp.fillColor</label>\n<dropdown class="PE-general-input fullWidth" name="textFillColor">\n<xbutton @foreach="item in ctrl.colorTypes" @setter.text="item.text" @on.click="ctrl.selectColor(\'fillColor\',item.value)" tabindex=\'0\' @class="{\'active\':ctrl.textFillColor === item.value}"></xbutton>\n</dropdown>\n<div class="color-picker" @on.click="ctrl.showCP(\'PE-textFillColor\')"><div class="color"></div></div>\n<slider class="PE-slider"\n@model="ctrl.fillGray" max="1" min="0" step="0.1" value="1" name="PE-fill-slider" @stop-drag hideinput="true"></slider>\n</div>\n\n<div class="PE-general-input fullWidth"  name="opacity">\n<label>page-editor:textAp.opacity</label>\n<input min="0" value="100" max="100" type="number" @model="ctrl.opacity" name="PE-opacity"></input>\n<span>%</span>\n<slider class="PE-slider"\n@model="ctrl.opacity"\nmax="100" min="0" step="1" value="100" name="PE-opacity-slider" @stop-drag hideinput="true"></slider>\n</div>\n</div>\n<div name="PE-props-path-ap" style="cursor: initial;">\n<div class="PE-general-input fullWidth" name="PE-pathStrokeColor">\n<label>page-editor:textAp.lineColor</label>\n<dropdown class="PE-general-input fullWidth" name="pathStrokeColor">\n<xbutton @foreach="item in ctrl.lineColorTypes" @setter.text="item.text" @on.click="ctrl.selectColor(\'strokeColor\',item.value)" tabindex=\'0\' @class="{\'active\':ctrl.pathStrokeColor === item.value}"></xbutton>\n</dropdown>\n<div class="color-picker" @aria:role="button" tabindex="0" @on.click="ctrl.showCP(\'PE-pathStrokeColor\')" @on.native.keydown="ctrl.keyBoardHandler($event,\'PE-pathStrokeColor\')"><div class="color"></div></div>\n<slider class="PE-slider"\n@model="ctrl.strokeGray" max="1" min="0" step="0.1" value="1" name="PE-stroke-slider" @stop-drag hideinput="true"></slider>\n</div>\n\n<div class="PE-general-input fullWidth" name="PE-pathFillColor">\n<label>page-editor:textAp.fillColor</label>\n<dropdown class="PE-general-input fullWidth" name="pathFillColor">\n<xbutton @foreach="item in ctrl.lineColorTypes" @setter.text="item.text" @on.click="ctrl.selectColor(\'fillColor\',item.value)" tabindex=\'0\' @class="{\'active\':ctrl.pathFillColor === item.value}"></xbutton>\n</dropdown>\n<div class="color-picker" @aria:role="button" tabindex="0" @on.click="ctrl.showCP(\'PE-pathFillColor\')" @on.native.keydown="ctrl.keyBoardHandler($event,\'PE-pathFillColor\')"><div class="color"></div></div>\n<slider class="PE-slider"\n@model="ctrl.fillGray" max="1" min="0" step="0.1" value="1" name="PE-fill-slider" @stop-drag hideinput="true"></slider>\n</div>\n\n<div class="PE-general-input">\n<label>page-editor:textAp.lineWidth</label>\n<number type="number" min=0.1 max=1000 step=0  @model="ctrl.lineWidth"></number>\n</div>\n<div class="PE-general-input">\n<label>page-editor:textAp.Dashed</label>\n<choice class="fv__property-component PE-lineStyle" name="PE-lineStyle" @aria:labelledby="::previousSiblings()"></choice>\n</div>\n\n<div class="PE-general-input">\n<label>page-editor:textAp.miterLimit</label>\n<number type="number" min=0 max=1000 @model="ctrl.miterLimit"></number>\n</div>\n<div class="PE-general-input">\n<label>page-editor:textAp.capStyle</label>\n<dropdown name="PE-lineCap" class="PE-w100px">\n<xbutton @foreach="item in ctrl.lineCaps" @setter.text="\'page-editor:textAp.\' + item.text" @on.click="ctrl.selectLineCap(item.value)" tabindex=\'0\' @class="{\'active\':ctrl.lineCap === item.value}"></xbutton>\n</dropdown>\n</div>\n\n<div class="PE-general-input PE-fillInput">\n<label>page-editor:textAp.joinStyle</label>\n<dropdown name="PE-lineJoin">\n<xbutton @foreach="item in ctrl.lineJoins" @setter.text="\'page-editor:textAp.\' + item.text" @on.click="ctrl.selectLineJoin(item.value)" tabindex=\'0\' @class="{\'active\': ctrl.lineJoin === item.value}"></xbutton>\n</dropdown>\n</div>\n\n<div class="PE-general-input fullWidth" name="opacity">\n<label>page-editor:textAp.opacity</label>\n<input  min="0" max="100" value="100" type="number" \n@model="ctrl.opacity"></input>\n<span>%</span>\n<slider class="PE-slider" \n@model="ctrl.opacity" max="100" min="0" step="1" value="100" name="PE-opacity-slider" @stop-drag hideinput="true"></slider>\n</div>\n</div>\n<div name="PE-props-image-ap" style="cursor: initial;">\n<div class="PE-general-input fullWidth" name="opacity">\n<label>page-editor:textAp.opacity</label>\n<input\ntype="number"\nmin=0 \nmax=100\n@model="ctrl.opacity"></input>\n<span>%</span>\n<slider class="PE-slider"\n@model="ctrl.opacity"\n max="100" min="0" step="1" value="100" name="PE-opacity-slider" @stop-drag hideinput="true"></slider>\n</div>\n</div>\n</div>\n</layer-view>\n<layer-toolbar>\n<xbutton class="fv__ui-dialog-button fv__ui-dialog-ok-button" @on.click="ctrl.hideDialog()">dialog.close</xbutton>\n</layer-toolbar>\n</layer>'}},9848:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'\n<ribbon-button @tooltip tooltip-title="page-editor:addShape.title"  name="create-shapeObject-dropdown" icon-class="fv__icon-menu-add-shapes" text="page-editor:addShape.title" @controller="page-editor:AddShapesController as asc" not-immediately="true">\n<dropdown name="shape-drop-down-ui" popup-class="fv__ui-shapes-dropdown" separate="false">\n<div class="fv__ui-shape-type-title">page-editor:addShape.addPath</div>\n<dropdown-item name="path">\n<xbutton data-i18n="[title]page-editor:addShape.buttons.line" icon-class=\'fv__icon-path-line\' @on.click="asc.addPath(\'Line\')" name="Line" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShape.buttons.rect" icon-class=\'fv__icon-path-rect\' @on.click="asc.addPath(\'Rectangle\')" name="Rectangle" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShape.buttons.roundedRect" icon-class=\'fv__icon-path-roundedRect\' @on.click="asc.addPath(\'RoundRect\')" name="RoundRect" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShape.buttons.circle" icon-class=\'fv__icon-path-circle\' @on.click="asc.addPath(\'Ellipse\')" name="Ellipse" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShape.buttons.brokenLine" icon-class=\'fv__icon-path-brokenLine\' @on.click="asc.addPath(\'Polyline\')" name="Polyline" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShape.buttons.pentagonal" icon-class=\'fv__icon-path-pentagonal\' @on.click="asc.addPath(\'Polygon\')" name="Polygon" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShape.buttons.curve" icon-class=\'fv__icon-path-curve\' @on.click="asc.addPath(\'Polybezier\')" name="Polybezier" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShape.buttons.closedCurve" icon-class=\'fv__icon-path-closedCurve\' @on.click="asc.addPath(\'Curve\')" name="Curve" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShape.buttons.closedIrregularFigure" icon-class=\'fv__icon-path-closedIrregularFigure\' @on.click="asc.addPath(\'Freedom\')" name="Freedom" tabindex=\'0\'></xbutton>\n</dropdown-item>\n<div class="fv__ui-shape-type-title">page-editor:addShape.addShading</div>\n<dropdown-item name="shading">\n<xbutton data-i18n="[title]page-editor:addShading.buttons.rect" icon-class=\'fv__icon-shading-rect\' @on.click="asc.addShading(\'Rectangle\')" name="Rectangle" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShading.buttons.roundedRect" icon-class=\'fv__icon-shading-roundedRect\' @on.click="asc.addShading(\'RoundRect\')" name="RoundRect" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShading.buttons.circle" icon-class=\'fv__icon-shading-circle\' @on.click="asc.addShading(\'Ellipse\')" name="Ellipse" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShading.buttons.brokenLine" icon-class=\'fv__icon-shading-brokenLine\' @on.click="asc.addShading(\'Polyline\')" name="Polyline" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShading.buttons.Pentagonal" icon-class=\'fv__icon-shading-Pentagonal\' @on.click="asc.addShading(\'Polygon\')" name="Polygon" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShading.buttons.curve" icon-class=\'fv__icon-shading-curve\' @on.click="asc.addShading(\'Polybezier\')" name="Polybezier" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShading.buttons.closedCurve" icon-class=\'fv__icon-shading-closedCurve\' @on.click="asc.addShading(\'Curve\')" name="Curve" tabindex=\'0\'></xbutton>\n<xbutton data-i18n="[title]page-editor:addShading.buttons.closedIrregularFigure" icon-class=\'fv__icon-shading-closedIrregularFigure\' @on.click="asc.addShading(\'Freedom\')" name="Freedom" tabindex=\'0\'></xbutton>\n</dropdown-item>\n</dropdown>\n</ribbon-button>'}},5442:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<ribbon-button name="edit-object-ribbon-dropdown" @tooltip tooltip-title="page-editor:editObject.title" text="page-editor:editObject.title" icon-class="fv__icon-menu-edit" not-immediately="true" class="edit-object-ribbon-dropdown" @controller="page-editor:EditObjectController as eord">\n<dropdown separate="false">\n<dropdown-button @on.click="eord.setEditType(\'All\')" name="All" icon-class=\'fv__ui-button-icon fv__ui-property-icon-selected-color-light\'>page-editor:editObject.all</dropdown-button>\n<dropdown-button @on.click="eord.setEditType(\'Text\')" name="Text" icon-class=\'fv__ui-button-icon fv__ui-property-icon-selected-color-light\'>page-editor:editObject.text</dropdown-button>\n<dropdown-button @on.click="eord.setEditType(\'Image\')" name="Image" icon-class=\'fv__ui-button-icon fv__ui-property-icon-selected-color-light\'>page-editor:editObject.image</dropdown-button>\n<dropdown-button @on.click="eord.setEditType(\'Path\')" name="Path" icon-class=\'fv__ui-button-icon fv__ui-property-icon-selected-color-light\'>page-editor:editObject.shape</dropdown-button>\n<dropdown-button @on.click="eord.setEditType(\'Shading\')" name="Shading" icon-class=\'fv__ui-button-icon fv__ui-property-icon-selected-color-light\'>page-editor:editObject.shading</dropdown-button>\n</dropdown>\n</ribbon-button>'}},683:e=>{e.exports=null},5585:(e,t,n)=>{"use strict";
/*! art-template@runtime | https://github.com/aui/art-template */var r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{},o=Object.create(r),a=/["&'<>]/;function i(e){return"string"!=typeof e&&(e=null==e?"":"function"==typeof e?i(e.call(e)):JSON.stringify(e)),e}o.$escape=function(e){return function(e){var t=""+e,n=a.exec(t);if(!n)return e;var r="",o=void 0,i=void 0,c=void 0;for(o=n.index,i=0;o<t.length;o++){switch(t.charCodeAt(o)){case 34:c="&#34;";break;case 38:c="&#38;";break;case 39:c="&#39;";break;case 60:c="&#60;";break;case 62:c="&#62;";break;default:continue}i!==o&&(r+=t.substring(i,o)),i=o+1,r+=c}return i!==o?r+t.substring(i,o):r}(i(e))},o.$each=function(e,t){if(Array.isArray(e))for(var n=0,r=e.length;n<r;n++)t(e[n],n);else for(var o in e)t(e[o],o)},e.exports=o},5779:(e,t,n)=>{"use strict";e.exports=n(5585)},7297:e=>{e.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAN0lEQVR42m3NMQ7AMBACweH+/2dSOLIdKZSrBdIWJCm0DcyBRbcQvPBOVuMvszbzsdtmzmE2hAeBeRkFLldufwAAAABJRU5ErkJggg=="},4945:e=>{e.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAANUlEQVR42m2NSQrAQBCEtP//Z3NImAXiUSzKCgA1gEqAWTKgHQi88sRv8cdU4l1Xzjp0S4AHhHsZBRHojyUAAAAASUVORK5CYII="},8649:e=>{e.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAW0lEQVR42rXQsQ3AIAxE0X8oG9BSsv9ElLTMcCkiJxQkoslVtvRkW5ZtIpKeBrCtqI8ZjVJnhyQHTm8IYJR6bxGwRHNyb9fEnfwAbSv39nmfbaX41woHAtDuw09owS/ec9h8cQAAAABJRU5ErkJggg=="},7665:e=>{e.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADBUlEQVR42tVXS27TUBQ99zngIJXiBSBhVkA6wskEdwUQBSExol1B3CQTRnFmDPpxV5AyqkSVul1BzIREYtCwgroSCzBVB2mVvMsgpYodx83HQnBntt675/jcr4H/yQzrUE/bp5jrNKl2oXZ8Vqi0NtIiQPMcfllxLUG8d/voE3NDyhuv67z3/4oCgobjQDoTNUlRzwtVt7loeGZSwLSa2o3QykxsAdCmn+STzk6pmKoC+epp+Vp5cs7EdiI4wx8MRWMycY/MhQkUam4dGDrJXz0CZ0nr351iLwReOzJJUdqFilufm0Ch5taZ2b5PIQY8VdJa1yn6k/FV6gDAxPY0ErE5YFRaG0TUjLwOQNzAkHQIlEfg8nN3521sSRq1I5NYaYfZ8lZnt+QkKmBYhzoR1SckHtJaZ7vkMHFv5Isb08ABAIOMD0ZYFaK6aTe1RAKkPLABjJdUwJLW7yQW0memze5uKTE8Xafos6R1AMHYa61/uWpNDYFhHeqkqOdhRrzV2Q7LNo/lKy0LRHvjH6Q+/vXcszeDSQXEQzMq/TLgAHAb85AK15erG7EhEOA3kRzfT6PfM4X9EMSL+BwQ4lnoopC9dEaO9CKEzFgCzMiNP2dXrlIhkB1kon60mTrhn0RZ1jynGMxKIHQwWrOLmmm52qytOESgf7WSS4NAPzOI+unF54DE13DuCDOVKpCZXCTXLuIJEPXCnZPKqex9xOVIuZ/EEngkcRBtGvlKy1oGPF89LUdaO6QUXiwBzykG0aYBovqi69bo3tAONyE6GB/dYrJmxUTrJEVtz0vidq60Q8sMw5dDNBKnoecUAzBHVyudFPVs1nDkq6dlUtSzqPQEbkQXl6lLqVFr2cQUt8X4YN5nIXvZwVXPczYD02pqfazkhMi8mra4MnMjboQnbsUJJOYrwyngAKAkXfz57Yv3NP/ugkA5EBbpigGIP3Z3Sp+W+i8wLFeHwjYBH2YFZuL97EA4MXNg8V8zw3J1CGkSidcA68Dd9AwYCATIY5Y/VCkO7gP+Z+w3g7JLOd6W0HAAAAAASUVORK5CYII="},8552:(e,t,n)=>{var r=n(852)(n(5639),"DataView");e.exports=r},1989:(e,t,n)=>{var r=n(1789),o=n(401),a=n(7667),i=n(1327),c=n(1866);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=a,s.prototype.has=i,s.prototype.set=c,e.exports=s},8407:(e,t,n)=>{var r=n(7040),o=n(4125),a=n(2117),i=n(7518),c=n(4705);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=a,s.prototype.has=i,s.prototype.set=c,e.exports=s},7071:(e,t,n)=>{var r=n(852)(n(5639),"Map");e.exports=r},3369:(e,t,n)=>{var r=n(4785),o=n(1285),a=n(6e3),i=n(9916),c=n(5265);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=a,s.prototype.has=i,s.prototype.set=c,e.exports=s},3818:(e,t,n)=>{var r=n(852)(n(5639),"Promise");e.exports=r},8525:(e,t,n)=>{var r=n(852)(n(5639),"Set");e.exports=r},8668:(e,t,n)=>{var r=n(3369),o=n(619),a=n(2385);function i(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}i.prototype.add=i.prototype.push=o,i.prototype.has=a,e.exports=i},6384:(e,t,n)=>{var r=n(8407),o=n(7465),a=n(3779),i=n(7599),c=n(4758),s=n(4309);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=o,u.prototype.delete=a,u.prototype.get=i,u.prototype.has=c,u.prototype.set=s,e.exports=u},2705:(e,t,n)=>{var r=n(5639).Symbol;e.exports=r},1149:(e,t,n)=>{var r=n(5639).Uint8Array;e.exports=r},577:(e,t,n)=>{var r=n(852)(n(5639),"WeakMap");e.exports=r},4963:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,a=[];++n<r;){var i=e[n];t(i,n,e)&&(a[o++]=i)}return a}},4636:(e,t,n)=>{var r=n(2545),o=n(5694),a=n(1469),i=n(4144),c=n(5776),s=n(6719),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=a(e),l=!n&&o(e),d=!n&&!l&&i(e),p=!n&&!l&&!d&&s(e),g=n||l||d||p,f=g?r(e.length,String):[],h=f.length;for(var v in e)!t&&!u.call(e,v)||g&&("length"==v||d&&("offset"==v||"parent"==v)||p&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||c(v,h))||f.push(v);return f}},2488:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},2908:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},8470:(e,t,n)=>{var r=n(7813);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},8866:(e,t,n)=>{var r=n(2488),o=n(1469);e.exports=function(e,t,n){var a=t(e);return o(e)?a:r(a,n(e))}},4239:(e,t,n)=>{var r=n(2705),o=n(9607),a=n(2333),i=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?o(e):a(e)}},9454:(e,t,n)=>{var r=n(4239),o=n(7005);e.exports=function(e){return o(e)&&"[object Arguments]"==r(e)}},939:(e,t,n)=>{var r=n(2492),o=n(7005);e.exports=function e(t,n,a,i,c){return t===n||(null==t||null==n||!o(t)&&!o(n)?t!=t&&n!=n:r(t,n,a,i,e,c))}},2492:(e,t,n)=>{var r=n(6384),o=n(7114),a=n(8351),i=n(6096),c=n(4160),s=n(1469),u=n(4144),l=n(6719),d="[object Arguments]",p="[object Array]",g="[object Object]",f=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,h,v,m){var b=s(e),y=s(t),C=b?p:c(e),P=y?p:c(t),w=(C=C==d?g:C)==g,x=(P=P==d?g:P)==g,S=C==P;if(S&&u(e)){if(!u(t))return!1;b=!0,w=!1}if(S&&!w)return m||(m=new r),b||l(e)?o(e,t,n,h,v,m):a(e,t,C,n,h,v,m);if(!(1&n)){var E=w&&f.call(e,"__wrapped__"),k=x&&f.call(t,"__wrapped__");if(E||k){var I=E?e.value():e,_=k?t.value():t;return m||(m=new r),v(I,_,n,h,m)}}return!!S&&(m||(m=new r),i(e,t,n,h,v,m))}},8458:(e,t,n)=>{var r=n(3560),o=n(5346),a=n(3218),i=n(346),c=/^\[object .+?Constructor\]$/,s=Function.prototype,u=Object.prototype,l=s.toString,d=u.hasOwnProperty,p=RegExp("^"+l.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||o(e))&&(r(e)?p:c).test(i(e))}},8749:(e,t,n)=>{var r=n(4239),o=n(1780),a=n(7005),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&o(e.length)&&!!i[r(e)]}},280:(e,t,n)=>{var r=n(5726),o=n(6916),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))a.call(e,n)&&"constructor"!=n&&t.push(n);return t}},2545:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},7561:(e,t,n)=>{var r=n(7990),o=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},1717:e=>{e.exports=function(e){return function(t){return e(t)}}},4757:e=>{e.exports=function(e,t){return e.has(t)}},4429:(e,t,n)=>{var r=n(5639)["__core-js_shared__"];e.exports=r},7114:(e,t,n)=>{var r=n(8668),o=n(2908),a=n(4757);e.exports=function(e,t,n,i,c,s){var u=1&n,l=e.length,d=t.length;if(l!=d&&!(u&&d>l))return!1;var p=s.get(e),g=s.get(t);if(p&&g)return p==t&&g==e;var f=-1,h=!0,v=2&n?new r:void 0;for(s.set(e,t),s.set(t,e);++f<l;){var m=e[f],b=t[f];if(i)var y=u?i(b,m,f,t,e,s):i(m,b,f,e,t,s);if(void 0!==y){if(y)continue;h=!1;break}if(v){if(!o(t,function(e,t){if(!a(v,t)&&(m===e||c(m,e,n,i,s)))return v.push(t)})){h=!1;break}}else if(m!==b&&!c(m,b,n,i,s)){h=!1;break}}return s.delete(e),s.delete(t),h}},8351:(e,t,n)=>{var r=n(2705),o=n(1149),a=n(7813),i=n(7114),c=n(8776),s=n(1814),u=r?r.prototype:void 0,l=u?u.valueOf:void 0;e.exports=function(e,t,n,r,u,d,p){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var g=c;case"[object Set]":var f=1&r;if(g||(g=s),e.size!=t.size&&!f)return!1;var h=p.get(e);if(h)return h==t;r|=2,p.set(e,t);var v=i(g(e),g(t),r,u,d,p);return p.delete(e),v;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},6096:(e,t,n)=>{var r=n(8234),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,i,c){var s=1&n,u=r(e),l=u.length;if(l!=r(t).length&&!s)return!1;for(var d=l;d--;){var p=u[d];if(!(s?p in t:o.call(t,p)))return!1}var g=c.get(e),f=c.get(t);if(g&&f)return g==t&&f==e;var h=!0;c.set(e,t),c.set(t,e);for(var v=s;++d<l;){var m=e[p=u[d]],b=t[p];if(a)var y=s?a(b,m,p,t,e,c):a(m,b,p,e,t,c);if(!(void 0===y?m===b||i(m,b,n,a,c):y)){h=!1;break}v||(v="constructor"==p)}if(h&&!v){var C=e.constructor,P=t.constructor;C==P||!("constructor"in e)||!("constructor"in t)||"function"==typeof C&&C instanceof C&&"function"==typeof P&&P instanceof P||(h=!1)}return c.delete(e),c.delete(t),h}},1957:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},8234:(e,t,n)=>{var r=n(8866),o=n(9551),a=n(3674);e.exports=function(e){return r(e,a,o)}},5050:(e,t,n)=>{var r=n(7019);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},852:(e,t,n)=>{var r=n(8458),o=n(7801);e.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},9607:(e,t,n)=>{var r=n(2705),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,c=r?r.toStringTag:void 0;e.exports=function(e){var t=a.call(e,c),n=e[c];try{e[c]=void 0;var r=!0}catch(e){}var o=i.call(e);return r&&(t?e[c]=n:delete e[c]),o}},9551:(e,t,n)=>{var r=n(4963),o=n(479),a=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,c=i?function(e){return null==e?[]:(e=Object(e),r(i(e),function(t){return a.call(e,t)}))}:o;e.exports=c},4160:(e,t,n)=>{var r=n(8552),o=n(7071),a=n(3818),i=n(8525),c=n(577),s=n(4239),u=n(346),l="[object Map]",d="[object Promise]",p="[object Set]",g="[object WeakMap]",f="[object DataView]",h=u(r),v=u(o),m=u(a),b=u(i),y=u(c),C=s;(r&&C(new r(new ArrayBuffer(1)))!=f||o&&C(new o)!=l||a&&C(a.resolve())!=d||i&&C(new i)!=p||c&&C(new c)!=g)&&(C=function(e){var t=s(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case h:return f;case v:return l;case m:return d;case b:return p;case y:return g}return t}),e.exports=C},7801:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},1789:(e,t,n)=>{var r=n(4536);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},401:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},7667:(e,t,n)=>{var r=n(4536),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(t,e)?t[e]:void 0}},1327:(e,t,n)=>{var r=n(4536),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}},1866:(e,t,n)=>{var r=n(4536);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},5776:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},7019:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},5346:(e,t,n)=>{var r,o=n(4429),a=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!a&&a in e}},5726:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},7040:e=>{e.exports=function(){this.__data__=[],this.size=0}},4125:(e,t,n)=>{var r=n(8470),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():o.call(t,n,1),--this.size,!0)}},2117:(e,t,n)=>{var r=n(8470);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},7518:(e,t,n)=>{var r=n(8470);e.exports=function(e){return r(this.__data__,e)>-1}},4705:(e,t,n)=>{var r=n(8470);e.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},4785:(e,t,n)=>{var r=n(1989),o=n(8407),a=n(7071);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||o),string:new r}}},1285:(e,t,n)=>{var r=n(5050);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},6e3:(e,t,n)=>{var r=n(5050);e.exports=function(e){return r(this,e).get(e)}},9916:(e,t,n)=>{var r=n(5050);e.exports=function(e){return r(this,e).has(e)}},5265:(e,t,n)=>{var r=n(5050);e.exports=function(e,t){var n=r(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},8776:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}},4536:(e,t,n)=>{var r=n(852)(Object,"create");e.exports=r},6916:(e,t,n)=>{var r=n(5569)(Object.keys,Object);e.exports=r},1167:(e,t,n)=>{e=n.nmd(e);var r=n(1957),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,i=a&&a.exports===o&&r.process,c=function(){try{var e=a&&a.require&&a.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=c},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},5639:(e,t,n)=>{var r=n(1957),o="object"==typeof self&&self&&self.Object===Object&&self,a=r||o||Function("return this")();e.exports=a},619:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},2385:e=>{e.exports=function(e){return this.__data__.has(e)}},1814:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},7465:(e,t,n)=>{var r=n(8407);e.exports=function(){this.__data__=new r,this.size=0}},3779:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},7599:e=>{e.exports=function(e){return this.__data__.get(e)}},4758:e=>{e.exports=function(e){return this.__data__.has(e)}},4309:(e,t,n)=>{var r=n(8407),o=n(7071),a=n(3369);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var i=n.__data__;if(!o||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(i)}return n.set(e,t),this.size=n.size,this}},346:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},7990:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},3279:(e,t,n)=>{var r=n(3218),o=n(7771),a=n(4841),i=Math.max,c=Math.min;e.exports=function(e,t,n){var s,u,l,d,p,g,f=0,h=!1,v=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var n=s,r=u;return s=u=void 0,f=t,d=e.apply(r,n)}function y(e){var n=e-g;return void 0===g||n>=t||n<0||v&&e-f>=l}function C(){var e=o();if(y(e))return P(e);p=setTimeout(C,function(e){var n=t-(e-g);return v?c(n,l-(e-f)):n}(e))}function P(e){return p=void 0,m&&s?b(e):(s=u=void 0,d)}function w(){var e=o(),n=y(e);if(s=arguments,u=this,g=e,n){if(void 0===p)return function(e){return f=e,p=setTimeout(C,t),h?b(e):d}(g);if(v)return clearTimeout(p),p=setTimeout(C,t),b(g)}return void 0===p&&(p=setTimeout(C,t)),d}return t=a(t)||0,r(n)&&(h=!!n.leading,l=(v="maxWait"in n)?i(a(n.maxWait)||0,t):l,m="trailing"in n?!!n.trailing:m),w.cancel=function(){void 0!==p&&clearTimeout(p),f=0,s=g=u=p=void 0},w.flush=function(){return void 0===p?d:P(o())},w}},7813:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},5694:(e,t,n)=>{var r=n(9454),o=n(7005),a=Object.prototype,i=a.hasOwnProperty,c=a.propertyIsEnumerable,s=r(function(){return arguments}())?r:function(e){return o(e)&&i.call(e,"callee")&&!c.call(e,"callee")};e.exports=s},1469:e=>{var t=Array.isArray;e.exports=t},8612:(e,t,n)=>{var r=n(3560),o=n(1780);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},4144:(e,t,n)=>{e=n.nmd(e);var r=n(5639),o=n(5062),a=t&&!t.nodeType&&t,i=a&&e&&!e.nodeType&&e,c=i&&i.exports===a?r.Buffer:void 0,s=(c?c.isBuffer:void 0)||o;e.exports=s},8446:(e,t,n)=>{var r=n(939);e.exports=function(e,t){return r(e,t)}},3560:(e,t,n)=>{var r=n(4239),o=n(3218);e.exports=function(e){if(!o(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1780:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},3218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},3448:(e,t,n)=>{var r=n(4239),o=n(7005);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==r(e)}},6719:(e,t,n)=>{var r=n(8749),o=n(1717),a=n(1167),i=a&&a.isTypedArray,c=i?o(i):r;e.exports=c},3674:(e,t,n)=>{var r=n(4636),o=n(280),a=n(8612);e.exports=function(e){return a(e)?r(e):o(e)}},7771:(e,t,n)=>{var r=n(5639);e.exports=function(){return r.Date.now()}},479:e=>{e.exports=function(){return[]}},5062:e=>{e.exports=function(){return!1}},4841:(e,t,n)=>{var r=n(7561),o=n(3218),a=n(3448),i=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,s=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=c.test(e);return n||s.test(e)?u(e.slice(2),n?2:8):i.test(e)?NaN:+e}},4616:t=>{"use strict";t.exports=e},732:e=>{"use strict";e.exports=t}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var a=r[e]={id:e,loaded:!1,exports:{}};return n[e](a,a.exports,o),a.loaded=!0,a.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var a={};return(()=>{"use strict";o.d(a,{default:()=>sa});var e={};function t(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function n(e){return function(){var n=this,r=arguments;return new Promise(function(o,a){var i=e.apply(n,r);function c(e){t(i,o,a,c,s,"next",e)}function s(e){t(i,o,a,c,s,"throw",e)}c(void 0)})}}function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}function i(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(i=function(){return!!e})()}function c(e,t){return!t||"object"!=((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t;var n}function s(e,t,n){return t=r(t),c(e,i()?Reflect.construct(t,n||[],r(e).constructor):t.apply(e,n))}function u(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):u(e,t)}function l(e,t){if(!u(e,t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t,n){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}(e,t);if(o){var a=Object.getOwnPropertyDescriptor(o,t);return a.get?a.get.call(n||e):a.value}},f(e,t,n||e)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){g(e,t,n[t])})}return e}function b(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}}(e,t)||C(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||C(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}o.r(e),o.d(e,{ArrangeAlignmentOptions:()=>qo,ArrangeDistributeOptions:()=>Xo,ArrangeFlipOptions:()=>Zo,ArrangePagecenterOptions:()=>Jo,ArrangeRotateOptions:()=>Qo,ArrangeZorderOptions:()=>ea});function x(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;var S=o(4616),E=o(683),k=o.n(E);const I=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(l(this,e),"function"==typeof t.transformRect){var c=t;t=c.a,n=c.b,r=c.c,o=c.d,a=c.e,i=c.f}else if(Array.isArray(t)){var s=t;t=s[0],n=s[1],r=s[2],o=s[3],a=s[4],i=s[5]}this.a=t,this.b=n,this.c=r,this.d=o,this.e=a,this.f=i}return p(e,[{key:"set",value:function(e,t,n,r,o,a){this.a=e,this.b=t,this.c=n,this.d=r,this.e=o,this.f=a}},{key:"reset",value:function(){this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0}},{key:"reverse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,n=t.a*t.d-t.b*t.c;if(0==n)return t;var r=-n;return new e(t.d/n,t.b/r,t.c/r,t.a/n,(t.c*t.f-t.d*t.e)/n,(t.a*t.f-t.b*t.e)/r)}},{key:"setReverse",value:function(e){var t=this.reverse(e);this.set(t.a,t.b,t.c,t.d,t.e,t.f)}},{key:"rotate",value:function(t,n){var r,o=Math.cos(t),a=Math.sin(t),i=new e(o,a,-a,o,0,0);r=n?e.Concat2mt(i,this):e.Concat2mt(this,i),this.set(r.a,r.b,r.c,r.d,r.e,r.f)}},{key:"rotateAt",value:function(e,t,n,r){this.translate(e,t,r),this.rotate(n,r),this.translate(-e,-t,r)}},{key:"translate",value:function(e,t,n){n?(this.e+=e*this.a+t*this.c,this.f+=t*this.d+e*this.b):(this.e+=e,this.f+=t)}},{key:"concat",value:function(t,n,r,o,a,i,c){var s,l;u(t,e)?(s=t,c=n):s=new e(t,n,r,o,a,i),l=c?e.Concat2mt(s,this):e.Concat2mt(this,s),this.set(l.a,l.b,l.c,l.d,l.e,l.f)}},{key:"is90Rotated",value:function(){var e=1e3*this.a;e<0&&(e*=-1);var t=1e3*this.d;t<0&&(t*=-1);var n=this.b;n<0&&(n*=-1);var r=this.c;return r<0&&(r*=-1),e<n&&t<r}},{key:"isScaled",value:function(){var e=1e3*this.b;e<0&&(e*=-1);var t=1e3*this.c;t<0&&(t*=-1);var n=this.a;n<0&&(n*=-1);var r=this.d;return r<0&&(r*=-1),e<n&&t<r}},{key:"getA",value:function(){return this.a}},{key:"getB",value:function(){return this.b}},{key:"getC",value:function(){return this.c}},{key:"getD",value:function(){return this.d}},{key:"getE",value:function(){return this.e}},{key:"getF",value:function(){return this.f}},{key:"scale",value:function(e,t,n){this.a*=e,this.d*=t,n?(this.b*=e,this.c*=t):(this.b*=t,this.c*=e,this.e*=e,this.f*=t)}},{key:"transformXDistance",value:function(e){var t=this.a*e,n=this.b*e;return Math.sqrt(t*t+n*n)}},{key:"transformYDistance",value:function(e){var t=this.c*e,n=this.d*e;return Math.sqrt(t*t+n*n)}},{key:"transformDistance",value:function(e,t){var n=this.a*e+this.c*t,r=this.b*e+this.d*t;return Math.sqrt(n*n+r*r)}},{key:"transformPoint",value:function(e,t){return[this.a*e+this.c*t+this.e,this.b*e+this.d*t+this.f]}},{key:"transformRect",value:function(e,t,n,r){for(var o,a=[e,e,n,n],i=[t,r,t,r],c=0;c<4;c++)o=this.transformPoint(a[c],i[c]),a[c]=o[0],i[c]=o[1];for(var s=[a[0],a[0],i[0],i[0]],u=1;u<4;u++)s[0]>a[u]&&(s[0]=a[u]),s[1]<a[u]&&(s[1]=a[u]),s[2]>i[u]&&(s[2]=i[u]),s[3]<i[u]&&(s[3]=i[u]);return[s[0],s[2],s[1],s[3]]}},{key:"getXUnit",value:function(){var e=this.a,t=this.b;return 0===t?Math.abs(e):0===e?Math.abs(t):Math.sqrt(e*e+t*t)}},{key:"getYUnit",value:function(){var e=this.c,t=this.d;return 0===e?Math.abs(t):0===t?Math.abs(e):Math.sqrt(e*e+t*t)}},{key:"getUnitRect",value:function(){return this.transformRect(0,0,1,1)}},{key:"matchRect",value:function(e,t){var n=t[0]-t[2];this.a=Math.abs(n)<.001?1:(e[0]-e[2])/n,n=t[3]-t[1],this.d=Math.abs(n)<.001?1:(e[3]-e[1])/n,this.e=e[0]-t[0]*this.a,this.f=e[3]-t[3]*this.d,this.b=0,this.c=0}},{key:"getAngle",value:function(){return Math.atan2(this.b,this.a)}},{key:"toArray",value:function(){return[this.a,this.b,this.c,this.d,this.e,this.f]}}],[{key:"Concat2mt",value:function(t,n){return new e(t.a*n.a+t.b*n.c,t.a*n.b+t.b*n.d,t.c*n.a+t.d*n.c,t.c*n.b+t.d*n.d,t.e*n.a+t.f*n.c+n.e,t.e*n.b+t.f*n.d+n.f)}}]),e}();var _=S.PDFViewCtrl,A=_.shared.DebounceTaskExecutor,T=_.DeviceInfo.isIOS,M=S.vendors.jQuery,F="",O=M('<input style="opacity:0;position:fixed;z-index: -1;" tabindex="-1" title="input chart"/>');M("body").append(O);var D=!1,j=new A(20);T&&(j={exec:function(e){e()}});var R=function(e,t){},B={onChar:R};O.on("compositionstart",function(){D=!0}).on("compositionend",function(e){D=!1,B.onChar(e.originalEvent.data,e),O.val(""),F=""}).on("input",function(e){var t=O.val();!D&&t.length>F.length&&B.onChar(t.replace(F,""),e),D?F=t:(O.val(""),F="")}).on("keydown",function(e){(e.shiftKey&&e.ctrlKey&&90===e.keyCode||e.ctrlKey&&89===e.keyCode)&&e.preventDefault()});var U=function(){O.val(F="")};const N={startInput:function(e){B.onChar=e,U(),j.exec(function(){O.focus()})},endInput:function(){B.onChar=R,j.exec(function(){B.onChar===R&&O.blur()})},refocusInput:function(){j.exec(function(){O.focus()})},isCompositionInput:function(){return D},getElement:function(){return O},resetValue:U,setPos:function(e,t){O.css({left:e,top:t})}};var L=UIExtension.vendors.jQuery,V=function(){function e(t){var n=this;l(this,e),g(this,"keydown",void 0),g(this,"keyup",void 0),g(this,"trace",void 0),this.trace=!0,L(document).on("keydown",this.keydown=function(e){if(n.trace){var r=e.keyCode;if(t.skipKey(r))return;if(!N.isCompositionInput())return N.resetValue(),t.keydown(e)}}).on("keyup",this.keyup=function(e){if(n.trace){var r=e.keyCode;if(t.skipKey(r))return;if(!N.isCompositionInput())return N.resetValue(),t.keyup(e)}})}return p(e,[{key:"stop",value:function(){this.trace=!1}},{key:"start",value:function(){this.trace=!0}},{key:"destroy",value:function(){L(document).off("keydown",this.keydown),L(document).off("keyup",this.keyup)}}]),e}(),z={shiftKey:1,ctrlKey:2,altKey:4,metaKey:8},H=function(e){var t=0;for(var n in z)e[n]&&(t|=z[n]);return t},K=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Down";switch(e.button){case 0:t="OnLButton"+n;break;case 1:t="OnWheelButton"+n;break;case 2:t="OnRButton"+n}return t},$={37:"up",38:"left",39:"right",40:"down",46:"Delete",67:"c",86:"v",88:"x",8:"backspace",13:"enter",27:"esc"},W=S.PDFViewCtrl.shared.dpr,G=[];function Y(e,t){try{var n=t.$ui.find(".touchup_handler")[0];if(null==n)return;var r=n.getBoundingClientRect(),o=[],a=t.$ui.find(".fv__pdf-doc-handler-container"),i=t.$ui[0].getBoundingClientRect(),c=!0,s=!1,u=void 0;try{for(var l,d=e[Symbol.iterator]();!(c=(l=d.next()).done);c=!0){var p=l.value,g=document.createElement("div");g.style.webkitBackdropFilter="invert(1)",g.style.backdropFilter="invert(1)",g.style.position="absolute",g.style.left=p.left/W+r.left-i.left+"px",g.style.top=p.bottom/W+r.top-i.top+"px",g.style.width=(p.right-p.left)/W+"px",g.style.height=(p.top-p.bottom)/W+"px",a.append(g),o.push(g)}}catch(e){s=!0,u=e}finally{try{c||null==d.return||d.return()}finally{if(s)throw u}}G=o}catch(e){console.log("revert error",e)}}function J(){var e=!0,t=!1,n=void 0;try{for(var r,o=G[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value;a.parentNode.removeChild(a)}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}G=[]}function q(e,t,n){switch(t){case"font-family":e.handleEvent("OnFontNameChanged",{type:"WString",value:n});break;case"font-size":e.handleEvent("OnFontSizeChanged",Number(n));break;case"font-color":e.handleEvent("OnTextColorChanged","transparent"===(r=n)?0:parseInt("FF"+r.slice(1),16));break;case"font-bold":e.handleEvent("OnBoldItalicChanged",{type:"WString",value:""},n,!1,!0);break;case"font-italic":e.handleEvent("OnBoldItalicChanged",{type:"WString",value:""},!1,n,!1);break;case"font-underline":e.handleEvent("OnUnderlineChanged",n);break;case"font-strikethrough":e.handleEvent("OnCrossChanged",n);break;case"font-super-sub-script":"font-superscript"===n[0]?e.handleEvent("OnSuperScriptChanged",!0):"font-subscript"===n[0]?e.handleEvent("OnSubScriptChanged",!0):(e.handleEvent("OnSuperScriptChanged",!1),e.handleEvent("OnSubScriptChanged",!1));break;case"font-character-spacing":e.handleEvent("OnCharSpaceChanged",Number(n));break;case"paragraph-bullets":e.handleEvent("OnBulletedList",{type:"NumberingType",value:parseInt(n[n.length-1])});break;case"paragraph-numbering":e.handleEvent("OnNumberedList",{type:"BulletType",value:parseInt(n[n.length-1])});break;case"paragraph-align":"left"===n?e.handleEvent("OnAlignChanged",0):"center"===n?e.handleEvent("OnAlignChanged",1):"right"===n?e.handleEvent("OnAlignChanged",2):"justify"===n&&e.handleEvent("OnAlignChanged",3);break;case"paragraph-increase":e.handleEvent("OnInDentChanged");break;case"paragraph-decrease":e.handleEvent("OnDeDentChanged");break;case"paragraph-line-spacing":e.handleEvent("OnLineLeadingChanged",Number(n));break;case"paragraph-spacing":e.handleEvent("OnParagraphSpacingChanged",Number(n));break;case"paragraph-character-scale":e.handleEvent("OnCharHorzScaleChanged",parseInt(n))}var r}var X={Annotation:0,TextObject:1,PathObject:2,ImageObject:3,ShadingObject:4,FormXObject:5,TouchUp:6,Measure:7,DistanceObject:8,NoteObject:9,Drawing:10,EraserObject:11,FileObject:12,HighlightObject:13,PencilObject:14,FreeText:15},Q=UIExtension.PDFViewCtrl.FontUtil.FoxitFontMap,Z={0:"page-editor:popMenu.JoinTextBoxes",1:"page-editor:popMenu.SplitTextBoxes",2:"page-editor:popMenu.LinkTextBoxes",3:"page-editor:popMenu.UnlinkTextBoxes",4:"page-editor:popMenu.SelectNone",5:"page-editor:popMenu.MaxValue",32751:"page-editor:popMenu.Undo",32752:"page-editor:popMenu.Redo",32753:"page-editor:popMenu.Cut",32754:"page-editor:popMenu.Copy",32755:"page-editor:popMenu.Paste",32756:"page-editor:popMenu.Delete",32757:"page-editor:popMenu.SelectAll",32758:"page-editor:popMenu.RightToLeft",32759:"page-editor:popMenu.LeftToRight",32760:"SuggestStart"},ee=0,te=1,ne=2,re=3,oe=4,ae=5,ie={Line:0,Rectangle:1,RoundRect:2,Ellipse:3,Polyline:4,Polygon:5,Polybezier:6,Curve:7,Freedom:8},ce={Invalid:0,All:1,Text:2,Image:3,Path:4,Shading:5},se={1:"ProjectingSquareCap",2:"Round",3:"Butt",ProjectingSquareCap:1,Round:2,Butt:3},ue={1:"Round",2:"Bevel",3:"Miter",Round:1,Bevel:2,Miter:3},le=1,de=2,pe=3,ge=4,fe=5,he=2,ve=3,me=0,be=1,ye=2,Ce=3,Pe=4,we=5,xe=0,Se=1,Ee=2,ke=3,Ie=0,_e=1,Ae=2,Te=0,Me=2,Fe=1,Oe=2,De=3,je=5,Re=7,Be=8,Ue=0,Ne=1,Le=2,Ve={0:"None",1:"All",2:"Text",3:"Image",4:"Path",5:"Shading",None:0,All:1,Text:2,Image:3,Path:4,Shading:5},ze=0,He=1,Ke={0:"Butt",1:"Round",2:"ProjectingSquareCap",Butt:0,Round:1,ProjectingSquareCap:2},$e={0:"Miter",1:"Round",2:"Bevel",Miter:0,Round:1,Bevel:2},We={PopupMenuItem_e_PopupMenuItemProperties:"Properties",PopupMenuItem_e_PopupMenuItemSetDefault:"SetDefault",PopupMenuItem_e_PopupMenuItemEditObject:"EditObject",PopupMenuItem_e_PopupMenuItemChangeOrderStartFlag:"ChangeOrderStartFlag",PopupMenuItem_e_PopupMenuItemBackward:"Backward",PopupMenuItem_e_PopupMenuItemForward:"ForwardGround",PopupMenuItem_e_PopupMenuItemBackGround:"BackGround",PopupMenuItem_e_PopupMenuItemFrontGround:"FrontGround",PopupMenuItem_e_PopupMenuItemChangeOrderEndFlag:"ChangeOrderEndFlag",PopupMenuItem_e_PopupMenuItemCut:"Cut",PopupMenuItem_e_PopupMenuItemCopy:"Copy",PopupMenuItem_e_PopupMenuItemPaste:"Paste",PopupMenuItem_e_PopupMenuItemPasteInPlace:"PasteInPlace",PopupMenuItem_e_PopupMenuItemDelete:"Delete",PopupMenuItem_e_PopupMenuItemAlignStartFlag:"AlignStartFlag",PopupMenuItem_e_PopupMenuItemAlignLeft:"AlignLeft",PopupMenuItem_e_PopupMenuItemAlignRight:"AlignRight",PopupMenuItem_e_PopupMenuItemAlignTop:"AlignTop",PopupMenuItem_e_PopupMenuItemAlignBottom:"AlignBottom",PopupMenuItem_e_PopupMenuItemAlignVertical:"AlignVertical",PopupMenuItem_e_PopupMenuItemAlignHorizontal:"AlignHorizontal",PopupMenuItem_e_PopupMenuItemAlignEndFlag:"AlignEndFlag",PopupMenuItem_e_PopupMenuItemCenterStartFlag:"CenterStartFlag",PopupMenuItem_e_PopupMenuItemCenterVertical:"CenterVertical",PopupMenuItem_e_PopupMenuItemCenterHorizontal:"CenterHorizontal",PopupMenuItem_e_PopupMenuItemCenterBoth:"CenterBoth",PopupMenuItem_e_PopupMenuItemCenterEndFlag:"CenterEndFlag",PopupMenuItem_e_PopupMenuItemDistributeStartFlag:"DistributeStartFlag",PopupMenuItem_e_PopupMenuItemDistributeVertical:"DistributeVertical",PopupMenuItem_e_PopupMenuItemDistributeHorizontal:"DistributeHorizontal",PopupMenuItem_e_PopupMenuItemDistributeEndFlag:"DistributeEndFlag",PopupMenuItem_e_PopupMenuItemSizeStartFlag:"SizeStartFlag",PopupMenuItem_e_PopupMenuItemSizeWidth:"SizeWidth",PopupMenuItem_e_PopupMenuItemSizeHeight:"SizeHeight",PopupMenuItem_e_PopupMenuItemSizeBoth:"SizeBoth",PopupMenuItem_e_PopupMenuItemSizeEndFlag:"SizeEndFlag",PopupMenuItem_e_PopupMenuItemRotateStartFlag:"RotateStartFlag",PopupMenuItem_e_PopupMenuItemRotateClockwise:"RotateClockwise",PopupMenuItem_e_PopupMenuItemRotateCounterClockwise:"RotateCounterClockwise",PopupMenuItem_e_PopupMenuItemRotateMoreOptions:"RotateMoreOptions",PopupMenuItem_e_PopupMenuItemRotateEndFlag:"RotateEndFlag",PopupMenuItem_e_PopupMenuItemFlipStartFlag:"FlipStartFlag",PopupMenuItem_e_PopupMenuItemFlipVertical:"FlipVertical",PopupMenuItem_e_PopupMenuItemFlipHorizontal:"FlipHorizontal",PopupMenuItem_e_PopupMenuItemFilpEndFlag:"FilpEndFlag",PopupMenuItem_e_PopupMenuItemShear:"Shear",PopupMenuItem_e_PopupMenuItemAddClipStartFlag:"AddClipStartFlag",PopupMenuItem_e_PopupMenuItemAddClipRectangle:"AddClipRectangle",PopupMenuItem_e_PopupMenuItemAddClipElipse:"AddClipElipse",PopupMenuItem_e_PopupMenuItemAddClipRoundRectangle:"AddClipRoundRectangle",PopupMenuItem_e_PopupMenuItemAddClipPolygon:"AddClipPolygon",PopupMenuItem_e_PopupMenuItemAddClipCurve:"AddClipCurve",PopupMenuItem_e_PopupMenuItemAddClipDrawing:"AddClipDrawing",PopupMenuItem_e_PopupMenuItemAddClipEndFlag:"AddClipEndFlag",PopupMenuItem_e_PopupMenuItemEditClip:"EditClip",PopupMenuItem_e_PopupMenuItemClearClip:"ClearClip",PopupMenuItem_e_PopupMenuItemConvert2Shape:"Convert2Shape",PopupMenuItem_e_PopupMenuItemMaxValue:"MaxValue",PopupMenuItem_e_PopupMenuItemShadingDelete:"Delete",PopupMenuItem_e_PopupMenuItemShadingInsertStartFlag:"InsertStartFlag",PopupMenuItem_e_PopupMenuItemShadingInsertLine:"InsertLine",PopupMenuItem_e_PopupMenuItemShadingInsertBessel:"InsertBessel",PopupMenuItem_e_PopupMenuItemShadingInsertEndFlag:"InsertEndFlag",PopupMenuItem_e_PopupMenuItemShadingChangeToStartFlag:"ChangeToStartFlag",PopupMenuItem_e_PopupMenuItemShadingChangeToLine:"ChangeToLine",PopupMenuItem_e_PopupMenuItemShadingChangeToBessel:"ChangeToBessel",PopupMenuItem_e_PopupMenuItemShadingChangeToEndFlag:"ChangeToEndFlag",PopupMenuItem_e_PopupMenuItemShadingClose:"Close",PopupMenuItem_e_PopupMenuItemShadingExit:"Exit",PopupMenuItem_e_PopupMenuItemShadingMaxValue:"MaxValue",PopupMenuItem_e_PopupMenuItemTextUndo:"Undo",PopupMenuItem_e_PopupMenuItemTextRedo:"Redo",PopupMenuItem_e_PopupMenuItemTextCut:"Cut",PopupMenuItem_e_PopupMenuItemTextCopy:"Copy",PopupMenuItem_e_PopupMenuItemTextPaste:"Paste",PopupMenuItem_e_PopupMenuItemTextDelete:"Delete",PopupMenuItem_e_PopupMenuItemTextDirection:"TextDirection",PopupMenuItem_e_PopupMenuItemTextDirectionL2R:"TextDirectionL2R",PopupMenuItem_e_PopupMenuItemTextDirectionR2L:"TextDirectionR2L",PopupMenuItem_e_PopupMenuItemTextSelectAll:"SelectAll",PopupMenuItem_e_PopupMenuItemPathDelete:"Delete",PopupMenuItem_e_PopupMenuItemPathInsertStartFlag:"InsertStartFlag",PopupMenuItem_e_PopupMenuItemPathInsertLine:"InsertLine",PopupMenuItem_e_PopupMenuItemPathInsertBessel:"InsertBessel",PopupMenuItem_e_PopupMenuItemPathInsertEndFlag:"InsertEndFlag",PopupMenuItem_e_PopupMenuItemPathChangeToStartFlag:"ChangeToStartFlag",PopupMenuItem_e_PopupMenuItemPathChangeToLine:"ChangeToLine",PopupMenuItem_e_PopupMenuItemPathChangeToBessel:"ChangeToBessel",PopupMenuItem_e_PopupMenuItemPathChangeToEndFlag:"ChangeToEndFlag",PopupMenuItem_e_PopupMenuItemPathClose:"Close",PopupMenuItem_e_PopupMenuItemPathAddLine:"AddLine",PopupMenuItem_e_PopupMenuItemPathAddRectangle:"AddRectangle",PopupMenuItem_e_PopupMenuItemPathAddEllipse:"AddEllipse",PopupMenuItem_e_PopupMenuItemPathAddLineDrawing:"AddLineDrawing",PopupMenuItem_e_PopupMenuItemPathExit:"Exit",PopupMenuItem_e_PopupMenuItemPathMaxValue:"MaxValue"},Ge="EditObject",Ye="AddText",Je="AdvEditStateHandlerName",qe=Object.assign({},{"Foxit Fixed OTF":"Courier","Foxit Sans OTF":"Helvetica","Foxit Serif OTF":"Times-Roman",FoxitSansOTF:"Helvetica"},Q);function Xe(e){return n(function(){var t;return x(this,function(n){switch(n.label){case 0:return e?[4,e.getComponentByName("edit-properties")]:[2];case 1:return(t=n.sent())&&t.disable(),[2]}})})()}var Qe=function(){function e(){l(this,e),this.events={}}return p(e,[{key:"register",value:function(e,t,n){for(var r=u(t,Array)?t:[t],o=0;o<r.length;o++)this._addEventData(e,r[o],n);return this._addKeydownEvent(),this}},{key:"unregister",value:function(e,t){for(var n=0,r=t?u(t,Array)?t:[t]:Object.keys(this.events),o=0;o<r.length;o++)n=this._removeEventData(e,r[o]);0===n&&(this.keydownEvent&&this.keydownEvent.destroy(),this.keydownEvent=void 0,this.mouseoverEvent&&this.mouseoverEvent.destroy(),this.mouseoverEvent=void 0)}},{key:"_addEvent",value:function(e,t,n){if(e&&t){var r=n||document;r.addEventListener(e,t);return{destroy:function(){r.removeEventListener(e,t)}}}}},{key:"_addKeydownEvent",value:function(){var e=this;this.keydownEvent||(this.mouseoverEvent=this._addEvent("mouseover",function(t){e.mouseoverElement=t.target},document),this.keydownEvent=this._addEvent("keydown",function(t){var n=e._matchEventData(e._getKeyFromEvent(t));n&&n(t)}))}},{key:"_addEventData",value:function(e,t,n){this.events[t]||(this.events[t]=[]);for(var r=this.events[t],o=0;o<r.length;o++){if(r[o][0]===e)return void console.error("Duplicate binding of shortcut key",t,", on dom:",e)}this.events[t].push([e,n])}},{key:"_removeEventData",value:function(e,t){for(var n=this.events[t]||[],r=0;r<n.length;r++){if(n[r][0]===e){n.splice(r,1),0===n.length&&delete this.events[t];break}}return Object.keys(this.events).length}},{key:"_matchEventData",value:function(e){var t,n=this,r=this._getPrevKey(),o=this.events,a=r?"".concat(r,",").concat(e):"",i=function(e){if(!e)return null;for(var t in o)if(n._isKeyEqual(t,e))return o[t];return null};return(t=i(e)||i(a))?this._removePrevKey():this._addPrevKey(a||e),this._matchEventCallback(t)}},{key:"_matchEventCallback",value:function(e){if(!e||0===e.length)return null;var t=e.filter(function(e){var t=e[0];if(t===document)return!0;var n=t.getBoundingClientRect();return n.x+n.y+n.width+n.height>0});e.length>1&&t.sort(function(e,t){var n=e[0],r=t[0];return n.contains(r)?-1:r.contains(n)?1:0}).reverse();for(var n=[document.activeElement,this.mouseoverElement],r=0;r<n.length;r++){var o=n[r];if(o)for(var a=["INPUT","TEXTAREA"].includes(o.nodeName)||"true"===o.contentEditable,i=0;i<t.length;i++){var c=t[i],s=c[0],u=c[1];if(s===o)return u;if(!a&&s.contains(o))return u}}}},{key:"_addPrevKey",value:function(e){var t=this;this._removePrevKey(),this._prev_key=e,this._prev_key_timer=setTimeout(function(){t._removePrevKey()},2e3)}},{key:"_getPrevKey",value:function(){return this._prev_key}},{key:"_removePrevKey",value:function(){this._prev_key=void 0,this._prev_key_timer&&clearTimeout(this._prev_key_timer),this._prev_key_timer=void 0}},{key:"_getKeyFromEvent",value:function(e){var t=e.key,n=(e.keyCode,e.code,e.altKey),r=e.ctrlKey,o=e.shiftKey,a=e.metaKey,i=[t];return n&&"Alt"!==t&&i.unshift("Alt"),r&&"Control"!==t&&i.unshift("Ctrl"),o&&"Shift"!==t&&i.unshift("Shift"),a&&"Meta"!==t&&i.unshift("Meta"),i.join("+")}},{key:"_isKeyEqual",value:function(e,t){return e=e.toLowerCase().replaceAll("control","ctrl").replaceAll("escape","esc"),t=t.toLowerCase().replaceAll("control","ctrl").replaceAll("escape","esc"),e.indexOf("+")>-1&&t.indexOf("+")>-1?e.split("+").sort(function(e,t){return e.charCodeAt(0)>t.charCodeAt(0)?-1:e.charCodeAt(0)<t.charCodeAt(0)?1:0}).join("+")===t.split("+").sort(function(e,t){return e.charCodeAt(0)>t.charCodeAt(0)?-1:e.charCodeAt(0)<t.charCodeAt(0)?1:0}).join("+"):e===t}}],[{key:"getInstance",value:function(){return window.Shortcut?window.Shortcut:window.Shortcut=new e}}]),e}();Qe.getInstance();var Ze=o(732);function et(e,t,n,r,o,a){var i=e.target;if(!(i==t.getElement()[0]||0==n||Ze.isIOS&&"div"===i.localName&&i.isContentEditable)){if("input"===i.localName||"textarea"===i.localName||i.isContentEditable)return"value"==i.name||i.classList.contains("fv__ui-dropdown-editor")?void o():(o(),void a());r(),t.getElement().focus()}}var tt=S.PDFViewCtrl.commons.copyText;function nt(e,t,r){var o=[],a=!0,i=!1,c=void 0;try{for(var s,u=function(){var t=s.value,a=t.name,i=t.enable,c=t.id,u=t.subItems;if("-"===a||"touchup"===r&&0===a)o.push({type:"separator"});else{var l={text:Z[a],id:c,enable:i,shortcut:"",onClick:function(){return n(function(){var t,n;return x(this,function(r){switch(r.label){case 0:return t=e.doc,32755!==c?[3,3]:[4,(0,Ze.readFromClipboard)()];case 1:return n=r.sent(),[4,e.handleEvent("UpdateClipboardText",n)];case 2:r.sent(),r.label=3;case 3:return e.triggerTUPopMenuAction(c).then(function(){[32753,32754].includes(a)&&t.api.handleTouchUpEvent(t.getId(),"GetClipboardText").then(function(e){tt(e)})}),[2]}})})()}};u&&(contentSubItems=nt(e,u),l.subMenu=contentSubItems),o.push(l)}},l=t[Symbol.iterator]();!(a=(s=l.next()).done);a=!0)u()}catch(e){i=!0,c=e}finally{try{a||null==l.return||l.return()}finally{if(i)throw c}}return o}function rt(e,t,n,r,o,a){var i=nt(t,o,n),c=document.querySelector(".fv__ui-pdfviewer").getBoundingClientRect(),s=c.x,u=c.y;e.popMenu(r.x+s,r.y+u,i)}var ot=o(3279),at=o.n(ot);function it(e){if("clientX"in e)return e.clientX;switch(e.type){case"touchstart":case"touchmove":return e.touches[0].clientX;case"touchend":case"touchcancel":return e.changedTouches[0].clientX}}function ct(e){if("clientY"in e)return e.clientY;switch(e.type){case"touchstart":case"touchmove":return e.touches[0].clientY;case"touchend":case"touchcancel":return e.changedTouches[0].clientY}}var st=S.vendors.jQuery,ut=S.PDFViewCtrl,lt=S.UIEvents,dt=S.vendors.Hammer,pt=ut.DeviceInfo,gt=pt.isTouchDevice,ft=pt.isDesktop,ht=S.PDFViewCtrl,vt=ht.commons,mt=vt.copyText,bt=vt.readFromClipboard,yt=(ht.shared.createDeferred,ht.DeviceInfo),Ct=yt.isMobile,Pt=yt.isTablet,wt=Promise.resolve(),xt=0,St=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"OnKeyDown",n=arguments.length>2?arguments[2]:void 0;return wt=wt.then(function(r){return Kt.trigger(t,[e.keyCode]).then(function(t){n&&n.doc.getTouchup().handleEvent("GetCaretFootPositon").then(function(t){if(t){var r=e.target;if(r===N.getElement()[0]){var o=n.pdfViewer.$ui.parent().offset();r.style.top=o.top+t.y-r.offsetHeight+"px",r.style.left=o.left+t.x+"px"}}});return t})})},Et=!0;var kt,It={3:"nesw-resize",0:"ns-resize",2:"nwse-resize",1:"ew-resize",4:"move"},_t="touchup",At=!1,Tt="",Mt=function(){return"findReplace"===_t&&kt&&0===kt.pdfViewer.currentPDFDoc.checkPermission(ut.PDF.constant.User_Permissions.modify)},Ft=function(e){function t(e){var n;return l(this,t),(n=s(this,t,[e])).destroyHooks=[],n.canScroll=!0,n.rectsCache=[],n.index=-1,n.ocrCache=[],n.disableToggleCaret=!1,n.throttleRender=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=null;return function(){var r=this,o=arguments;n||(n=setTimeout(function(){e.apply(r,o),n=null},t))}}(function(){n.pdfViewer.redraw(1,0)}),window&&(window.PageEditorTrigger=Kt),n}return v(t,e),p(t,[{key:"goToPage",value:function(e,t,n){if(this.docRender){var r=this.docRender.getPDFPageRender(e);if(r){var o=P(r.getPDFPointFromClientPoint(t,n,!0),2),a=o[0],i=o[1],c=this.docRender.pdfViewer,s=this.uiContainerRect.height||0;c.goToPage(e,i-s/4,a,!1)}}}},{key:"docHandler",value:function(e){var r=this,o=this;this.docRender=e;var a=this.pdfViewer;Kt.setDocRender(this.docRender,"touchup");var i=a.viewerUI.loading();Kt.trigger("restartTouchup").then(function(e){Rt(a,1,0).then(function(e){i();var t="findReplace"==_t?"touchup":_t;Kt.trigger("OnActivate",[t,At])})}),this.setEditorNotifier(),this.keyMgr=new V({skipKey:function(e){var t=document.activeElement!==N.getElement()[0];return t?!$[e]&&void 0:t},keydown:function(t){if(r.pdfViewer.isShortcutKeyEnabled()){var n=r.handleSpecialKesEvent(t);if(([37,38,39,40].indexOf(t.keyCode)>=0||Ze.isMac&&t.metaKey&&[89].indexOf(t.keyCode)>=0)&&(t.preventDefault(),t.stopPropagation()),27==t.keyCode&&Kt.trigger("ExitEditing",[!1]),8==t.keyCode&&Kt.trigger("OnChar",[String.fromCharCode(t.keyCode)]),n)return!1;St(t,"OnKeyDown",e)}},keyup:function(t){r.pdfViewer.isShortcutKeyEnabled()&&(13==t.keyCode?Kt.trigger("OnChar",[String.fromCharCode(t.keyCode)]):St(t,"OnKeyUp",e))}}),st(document).on("focusin",this._focusinLisener=function(e){et(e,N,xt,function(){return r.keyMgr.start()},function(){return r.keyMgr.stop()},function(){return s()})}),st(document).on("mouseup",this.cancelDown=function(e){if(!(e.target.classList&&e.target.classList.contains("fv__pdf-doc-handler-container")||st(e.target).hasClass("icon-btn")||st(e.target).parents('[name="fv--plugin-PageEditor-add-shape"]').length||st(e.target).parents(".icon-btn").length||st(e.target).parents('[name="edit-properties"]').length)){var t=K(e,"Up");return setTimeout(function(){if(r.docRender){var n=Kt.getPageIndex(e);-1!==n&&Kt.trigger(t,Kt.getArgs(n,e)).then(function(e){return r.actionFinalUpdate()})}},200)}}),this.setEditorNotifier();var c=function(){o.uiContainerRect=e.pdfViewer.$ui[0].parentElement.getBoundingClientRect();Rt(a,1,0,!0);Tt=""};[ut.Events.fitWidthResizeViewport,ut.Events.zoomToSuccess,ut.Events.afterDocumentRotation,ut.Events.pageRotationChanged,ut.Events.pagesRotated,ut.Events.importPages,ut.Events.pageAdded,ut.Events.pageMoved,ut.Events.pagesMoved].forEach(function(e){r.destroyHooks.push(a.addEventListener(e,c))});var s=function(){Kt.trigger("ExitEditing",[!1]);var e={clientX:50,clientY:150},t=Kt.getPageIndex(e);-1!==t&&Kt.trigger("OnLButtonUp",Kt.getArgs(t,e),2)},u=this.docRender.doc.getTouchup();this.destroyHooks.push(a.addEventListener(lt.editPropertiesAction,function(e){var t=e.name,n=e.value;gt&&!ft&&("font-family"!==t&&"paragraph-numbering"!==t&&"paragraph-align"!==t&&"paragraph-increase"!==t&&"paragraph-decrease"!==t||(r.disableToggleCaret=!0)),q(u,t,n)}),a.addEventListener("restartTouchup",function(){Kt.trigger("restartTouchup").then(function(e){Rt(a,1,0).then(function(e){var t="findReplace"==_t?"touchup":_t;Kt.trigger("OnActivate",[t,!1])})})}),a.addEventListener("before-page-rotation-changed",s),a.addEventListener("exitTouchup",s),a.addEventListener(lt.switchStateHandler,s),gt&&!ft?a.addEventListener("refocusInput",function(){r.disableToggleCaret=!1,N.refocusInput()}):function(){});var l=this.$handler=e.$container.siblings(".fv__pdf-doc-handler-container");l.css("z-index",80);var d=l.get(0);if(Ze.isIOS){var p=function(){r.disableTouchEndEvent?r.disableTouchEndEvent=!1:(r.tempInput=document.createElement("div"),r.tempInput.contentEditable=!0,r.tempInput.style="pointer-events: none;position:absolute;left:0;top:0;right:0;bottom:0;opacity: 0.001;",d.appendChild(r.tempInput),r.tempInput.focus({preventScroll:!0}))};d.addEventListener("touchend",p),this.destroyHooks.push(function(){d.removeEventListener("touchend",p),r.tempInput&&r.tempInput.parentElement&&r.tempInput.remove()})}var g=this.hammer=new dt.Manager(d,{recognizers:[[dt.Pan,{direction:dt.DIRECTION_ALL}]],time:150}),f=st('<div class="touchup_handler_container"></div>'),h=st('<canvas class="touchup_handler" style="backdrop-filter: url(#touchup-revert-bg)"></canvas>');f.append(h),l.before(f),this.destroyHooks.push(function(){l.css("z-index",0),l.off("mousemove mousedown mouseup contextmenu")}),l.on("mousemove",this.hover=function(e){if(Kt.cacheMouseCoord(e),Et){var t=Kt.getPageIndex(e);-1!==t&&Kt.trigger("OnMouseMove",Kt.getArgs(t,e),1)}}).on("mousedown",this.RButtionDown=function(e){if(2==e.button){r.$handler.find(".touchup_rect").remove();var t=Kt.getPageIndex(e);-1!==t&&Kt.trigger("OnRButtonDown",Kt.getArgs(t,e),0)}}).on("mouseup",this.RButtionUp=function(e){return n(function(){var t,n,r;return x(this,function(o){switch(o.label){case 0:if(2!=e.button)return[3,6];t=this.docRender.doc.getTouchup(),o.label=1;case 1:return o.trys.push([1,4,,5]),[4,bt()];case 2:return n=o.sent(),[4,t.handleEvent("UpdateClipboardText",n)];case 3:return o.sent(),[3,5];case 4:return o.sent(),[3,5];case 5:-1!==(r=Kt.getPageIndex(e))&&Kt.trigger("OnRButtonUp",Kt.getArgs(r,e),0),o.label=6;case 6:return[2]}})}).call(r)}).on("contextmenu",function(e){return!1}),window.addEventListener("wheel",this.cancelWheel=function(e){r.canScroll||e.preventDefault()},{passive:!1}),this.destroyHooks.push(function(){l.css("z-index",0),st(document).off("mouseup",r.cancelDown),l.off("mousemove",r.hover),l.off("mousedown",r.RButtionDown),l.off("mouseup",r.RButtionUp),window.removeEventListener("wheel",r.cancelWheel),st(document).off("focusin",r._focusinLisener)}),g.add(new dt.Tap({event:"doubletap",taps:2})),g.add(new dt.Tap({event:"singletap"})),g.add(new dt.Press);try{g.get("doubletap").recognizeWith("singletap"),g.get("singletap").requireFailure("doubletap"),g.on("hammer.input",function(e){if("mouse"==e.pointerType&&!Mt())if("pointerdown"!=e.srcEvent.type){if("pointerup"==e.srcEvent.type){Et=!0,e=e.srcEvent;var t=Kt.getPageIndex(e);if(-1===t)return;var n=K(e,"Up");Kt.trigger(n,Kt.getArgs(t,e))}}else{Et=!1,e=e.srcEvent;var o=K(e);r.$handler.find(".touchup_rect").remove();var a=Kt.getPageIndex(e);-1!==a&&Kt.trigger(o,Kt.getArgs(a,e))}}),g.on("singletap",function(e){if("mouse"!=e.pointerType&&(r.$handler.find(".touchup_rect").remove(),e=e.srcEvent,!Mt())){r.LButtionEvent=e;var t=K(e),n=Kt.getPageIndex(e);if(-1!==n){var o=Kt.trigger(t,Kt.getArgs(n,e));t=K(e,"Up"),o.then(function(r){return Kt.trigger(t,Kt.getArgs(n,e),2)}),o.then(function(t){r.goToPage(n,it(e),ct(e))})}}}),g.on("panstart",function(e){r.disableTouchEndEvent=!0,r.canScroll=!1,Mt()||(r.LButtionEvent=e.srcEvent,r.$handler.find(".touchup_rect").remove(),t.panStartHandle(e))}),g.on("panmove",function(e){t.panMoveHandle(e)}),g.on("panend",function(e){r.canScroll=!0,t.panEndHandle(e)}),g.on("doubletap",function(e){Mt()||(r.LButtionEvent=e.srcEvent,r.$handler.find(".touchup_rect").remove(),t.doubleTapHandle(e))}),g.on("press",function(e){if("mouse"!=e.pointerType){r.disableTouchEndEvent=!0;var t=Kt.getPageIndex(e.srcEvent);-1!==t&&Kt.trigger("OnRButtonUp",Kt.getArgs(t,e.srcEvent),0)}})}catch(e){console.error(e)}c(!1)}},{key:"actionFinalUpdate",value:function(e){}},{key:"setEditorNotifier",value:function(){var e=this,r={gotoPageView:function(n){var r=JSON.stringify(n);if(Tt!=r){Tt=r;var o=n.index,a=n.left,i=n.top,c=e.uiContainerRect.height,s=e.pdfViewer.getPDFDocRender().getPDFPageRender(0),u=s.page;if(u){var l=P(u.reverseDeviceOffset([c,0],s.scale,s.rotate),2),d=l[0];l[1];i+=d/2}"findReplace"==t.getType()?e.pdfViewer.eventEmitter.emit("find-replace-goto",{pageIndex:o,top:i,left:a}):e.pdfViewer.goToPage(o,i,a)}},replaceAllProgress:function(t){var n=t.pageIndex,r=t.total;-1===n?e.pdfViewer.eventEmitter.emit("find-replace-abort"):e.pdfViewer.eventEmitter.emit("find-replace-progress",{pageIndex:n,total:r})},updateTextFormat:function(e){!function(e,t,r,o,a){n(function(){var n,i,c,s;return x(this,function(u){switch(u.label){case 0:return n=["","font-superscript","font-subscript"],i=["left","center","right","justify"],c={fontFamily:{value:qe[o]||o},fontSize:{value:Math.round(100*t.fontSize)/100},fontColor:{enable:!0,value:t.wordColor},fontBold:{value:t.isBold},fontItalic:{value:t.isItalic},fontUnderline:{value:t.isUnderline},fontStrikethrough:{value:t.isCross},fontSuperSubScript:{value:n[t.scriptType]},fontCharacterSpacing:{value:t.charSpace},fontWritingDirection:{enable:!1},paragraphBullets:{enable:!0},paragraphNumbering:{enable:!0},paragraphAlign:{enable:!0,value:i[r.alignment]},paragraphIncrease:{enable:!0},paragraphDecrease:{enable:!0},paragraphLineSpacing:{value:r.lineLeading},paragraphSpacing:{value:r.secSpace.toFixed(2)},paragraphWordSpacing:{enable:!1},paragraphCharacterScale:{value:t.horzScale},bulletType:a.bulletType,numberType:a.numberType},e?[4,e.getComponentByName("edit-properties")]:[2];case 1:return(s=u.sent())?(s.enable(),s.setHost(c,X.TouchUp),[2]):[2]}})})()}(kt,e.wordProp,e.secProps,e.fontName,e)},toggleCaret:function(t,n,r,o){if(!gt||ft||!e.disableToggleCaret)if(t)N.startInput(function(e,t){return Kt.trigger("OnChar",[e])}),xt=3,Ze.isIOS&&e.tempInput&&e.tempInput.remove();else{if(xt=0,Ze.isIOS)return;N.endInput()}},showPopupMenu:function(t){var n=t.position,r=t.menu,o=(t.pageIndex,e.docRender.doc.getTouchup());rt(kt,o,_t,n,r)},showMessageBox:function(e){var t=e.id;e.flag,e.data;1===t?(J(),kt.alert(kt.i18n.t("page-editor:alert.joinFailed"))):2===t&&(J(),kt.alert(kt.i18n.t("page-editor:alert.notAvaliable")))},updateView:function(t){var n=t.bitmapInfo,r=t.revertRects;t.redraw;e.displayImage(n,r),"joinSplit"===_t&&e.updateJoinSplitBtns()},enterEdit:function(){e.pdfViewer.eventEmitter.emit(lt.paragraphTextEnterEdit),function(e){n(function(){var t;return x(this,function(n){switch(n.label){case 0:return e?[4,e.getComponentByName("edit-properties")]:[2];case 1:return(t=n.sent())&&t.enable(),[2]}})})()}(kt),N.startInput(function(e,t){return Kt.trigger("OnChar",[e]).then(function(e){var n=Kt.getPageIndex(t);-1!==n&&Kt.trigger("OnMouseMove",Kt.getArgs(n,t,0,-1))})}),e.throttleRender(),xt=3,Ze.isIOS&&e.tempInput&&e.tempInput.remove()},exitEdit:function(){e.pdfViewer.eventEmitter.emit(lt.paragraphTextExitEdit),kt.getAddonInstance("UndoRedoAddon").then(function(e){e&&e.pushUndoStack("touchup","exitEdit")}),xt=0,kt.getComponentByName("edit-properties").then(function(e){e&&e.hostType===X.TouchUp&&Xe(kt)}),Ut(kt),e.throttleRender()},cursorChange:function(t){e.$handler&&(7==t?(e.$handler.css("cursor",""),e.$handler.addClass("fv__cursor-text")):(e.$handler.removeClass("fv__cursor-text"),e.$handler.css("cursor",It[t]||"")),At&&(void 0===t||5===t||4===t&&(Ct||Pt))&&e.$handler.css("cursor",At?"text":""))},progressRelease:function(){},progressCreate:function(e){var t=P(e,2);t[0],t[1]},progressSetText:function(e){var t=P(e,2);t[0],t[1]},progressSetRange:function(e){var t=P(e,3);t[0],t[1],t[2]},progressSetCurrentValue:function(e){var t=P(e,2);t[0],t[1]},progressDestroy:function(e){P(e,1)[0]},fontNameChange:function(e){},docModified:function(){e.docRender&&e.docRender.doc.setDocModified()},OnActivate:at()(function(){e.pdfViewer.eventEmitter.emit(lt.paragraphTextOnActivate)},50),OnDeactivate:function(){e.pdfViewer.eventEmitter.emit(lt.paragraphTextOnDeactivate)},pageWithoutText:at()(function(t){var n=kt;t===e.docRender.currentPageNumber&&n.getPDFPageRender(t).then(function(t){e.ocrPage(t)})},300),contentChange:function(t){var n=t.pageIndex,r=t.type;e.throttleRender(),e.docRender&&e.docRender.doc.setDocModified(),e.pdfViewer.eventEmitter.emit(lt.paragraphContentChanged,{pageIndex:n,type:r})},onTextInputReachesLimit:at()(function(e){kt.alert(kt.i18n.t("page-editor:alert.textInputReachesLimit"))},300)};this.docRender.doc.getTouchup().setNotifier(r)}},{key:"displayImage",value:function(e,t){var n=kt.pdfViewer.getPDFDocRender();if(n.matrixes){var r=n.matrixes.uiRect,o=r.left,a=r.top,i=e.width,c=e.height,s=e.buffer,u=e.left,l=e.top,d=e.docRect;if(s&&o==u&&a==l){var p=n.$ui[0].getBoundingClientRect(),g=n.pdfViewer.$ui[0].parentElement,f=(this.uiContainerRect=g.getBoundingClientRect(),st('<div class="touchup_handler_container"></div>')),h=st('<canvas class="touchup_handler" style="backdrop-filter: url(#touchup-revert-bg)"></canvas>');f.append(h),f.css({left:u-p.left+"px",top:l-p.top+"px",width:g.clientWidth+"px",height:g.clientHeight+"px"});var v=h[0];v.width=i,v.height=c;var m=v.getContext("2d");m.clearRect(0,0,i,c);var b=new(Uint8ClampedArray||Uint8Array)(s),y=m.createImageData(i,c);y.data.set(b);var C=0,P=0;if(d.width==p.width&&d.height==p.height){var w=devicePixelRatio||1;C=Math.floor((p.left-d.left)*w),P=Math.floor((p.top-d.top)*w)}m.putImageData(y,C,P);var x=n.$ui.find(".touchup_handler_container");this.$handler&&this.$handler.before(f),x.hide().remove(),J(),Y(t,n)}}}},{key:"destroyDocHandler",value:function(){Kt.trigger("OnDeactivate"),this.destroyHooks.forEach(function(e){return e()}),this.docRender.$ui.find(".touchup_handler_container").remove(),this.keyMgr.destroy(),this.hammer.destroy(),"touchup"===_t&&Xe(kt),J(),this.ocrCache=[],this.docRender=null,this.$handler=null}},{key:"handleSpecialKesEvent",value:function(e){var t=null,n=this.docRender.doc.getTouchup();if(e.ctrlKey||e.metaKey){var r=document.activeElement===N.getElement()[0];switch(e.keyCode){case 67:t=this.doCopy();break;case 86:t=this.doPaste();break;case 90:e.shiftKey?n.handleEvent("Undo",!1,r):n.handleEvent("Undo",!0,r);break;case 89:n.handleEvent("Undo",!1,r)}}return t}},{key:"doCopy",value:function(){var e=this.docRender.doc.getTouchup();return e.handleEvent("DoCopy").then(function(){return e.handleEvent("GetClipboardText").then(function(e){return mt(e)})})}},{key:"doPaste",value:function(){var e=this;return bt().then(function(t){if(t){var n=e.docRender.doc.getTouchup();return n.handleEvent("UpdateClipboardText",t).then(function(){return n.handleEvent("DoPaste")})}},function(){e.pdfViewer.viewerUI.alert({level:"warning",message:"alert.clipboard-permission"})})}},{key:"updateJoinSplitBtns",value:function(){if(this.docRender){var e=this.docRender.doc.getTouchup();e.handleEvent("GetEnableStatus",{type:"JoinSpiltOperationType",value:ee}).then(function(e){kt.getComponentByName("join-split-join").then(function(t){t&&(e?t.enable():t.disable())})}),e.handleEvent("GetEnableStatus",{type:"JoinSpiltOperationType",value:te}).then(function(e){kt.getComponentByName("join-split-split").then(function(t){t&&(e?t.enable():t.disable())})}),e.handleEvent("GetEnableStatus",{type:"JoinSpiltOperationType",value:ne}).then(function(e){kt.getComponentByName("join-split-link").then(function(t){t&&(e?t.enable():t.disable())})}),e.handleEvent("GetEnableStatus",{type:"JoinSpiltOperationType",value:re}).then(function(e){kt.getComponentByName("join-split-unlink").then(function(t){t&&(e?t.enable():t.disable())})}),e.handleEvent("GetEnableStatus",{type:"JoinSpiltOperationType",value:oe}).then(function(e){kt.getComponentByName("join-split-select-none").then(function(t){t&&(e?t.enable():(t.disable(),J()))})}),e.handleEvent("GetEnableStatus",{type:"JoinSpiltOperationType",value:ae}).then(function(e){kt.getComponentByName("join-split-close").then(function(t){t&&(e?t.enable():t.disable())})})}}},{key:"ocrPage",value:function(e){var t=e.index;if(!(this.ocrCache.indexOf(t)>-1)){this.ocrCache.push(t);var n=kt,r=e.page;if(!(n.customs&&n.customs.isDisableButton&&n.customs.isDisableButton("edit-text"))){var o=this.getEditingData(),a=this.getScannedEditingSettingData(),i=function(){var t=a.makeAllPages?"":e.index+1;n.customs&&n.customs.convert&&n.customs.convert.doConvertScannedDocument({languages:a.languages.join(","),is_editable:!0,to_find_all_suspects:!1,to_recognize_line_as_path:!1,pageRange:t},function(e){var r=Promise.resolve();t&&t>1&&(r=n.goToPage(t-1,0,0,!1)),r.then(function(){return n.getRootComponent()}).then(function(e){e.querySelector("edit-text").controller.handle()})})};o.alert?n.$confirm({message:"page-editor:confirm.content",id:r.doc.id+"-edit-text-"+e.index,again:!0,autoHide:!1,againText:"page-editor:confirm.againText",level:"question",customBtns:[{id:"setting",text:"page-editor:confirm.buttons.setting"},{id:"recognize",text:"page-editor:confirm.buttons.recognize"},{id:"no",text:"page-editor:confirm.buttons.no"}]}).then(function(e){if("setting"!==e)return i(),!0;n.customs&&n.customs.showScannedEditing&&n.customs.showScannedEditing()}):o.recognize&&i()}}}},{key:"getEditingData",value:function(){var e=localStorage.getItem("EDITING_DATA"),t=kt.customs&&kt.customs.sendGAEvent&&kt.customs.getPreferencesDefaultData&&kt.customs.getPreferencesDefaultData("EditingDefaultData");return e=Object.assign(t||{},e?JSON.parse(e):{})}},{key:"getScannedEditingSettingData",value:function(){var e=localStorage.getItem("SCANNED-EDITING-SETTING-DATA"),t=kt.customs&&kt.customs.sendGAEvent&&kt.customs.getPreferencesDefaultData&&kt.customs.getPreferencesDefaultData("ScannedDocumentSettingDefaultData");return e=Object.assign(t||{},e?JSON.parse(e):{})}}],[{key:"getStateName",value:function(){return"touch-up-editor"}},{key:"setType",value:function(e){_t=e,J()}},{key:"isAddingText",value:function(){return At}},{key:"activateType",value:function(e,n,r,o,a){return t.setType(r),kt=e,At=o,Rt(n,1,0).then(function(t){var n="findReplace"==_t?"touchup":_t;return e.getPDFDocRender().then(function(e){return Kt.setDocRender(e,"touchup"),Kt.trigger("OnActivate",[n,o]).then(function(e){return a&&Kt.trigger("SelectContent",a)})})})}},{key:"joinSplit2EditText",value:function(e,n){return t.setType("touchup"),kt=e,Rt(n,1,0).then(function(e){return Kt.trigger("JoinSplitToEditText")})}},{key:"getType",value:function(){return _t}},{key:"doubleTapHandle",value:function(e){var t=Kt.getPageIndex(e.srcEvent);return-1===t?Promise.resolve():Kt.trigger("OnLButtonDoubleClick",Kt.getArgs(t,e.srcEvent,0,-1))}},{key:"panEndHandle",value:function(e){e=e.srcEvent;var t=K(e,"Up"),n=Kt.getPageIndex(e);-1!==n&&Kt.trigger(t,Kt.getArgs(n,e),2)}},{key:"panMoveHandle",value:function(e){e=e.srcEvent;var t=Kt.getPageIndex(e);return-1!==t?Kt.trigger("OnMouseMove",Kt.getArgs(t,e),1):Promise.resolve()}},{key:"panStartHandle",value:function(e){var t=Kt.getPageIndex(e.srcEvent);return-1===t?Promise.resolve():Kt.trigger("OnLButtonDown",Kt.getArgs(t,{clientX:e.srcEvent.clientX-e.deltaX,clientY:e.srcEvent.clientY-e.deltaY}))}}]),t}(ut.IStateHandler);const Ot=Ft;var Dt=0,jt=[];function Rt(e){var t,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=e.getPDFDocRender();if(c&&delete c.matrixes,"page-editor"!==e.getStateHandlerManager().currentStateHandler.getStateName()&&1!=o)return Promise.resolve();if(Dt){var s=c.getContainerVisiblePageIndexes();if(t=s,r=jt,Array.isArray(t)&&Array.isArray(r)&&t.length===r.length&&t.every(function(e){return r.includes(e)}))return Promise.resolve()}return new Promise(function(e){return Dt=setTimeout(e,a)}).then(function(){var t=e.$ui[0].parentElement,r=t.getBoundingClientRect();if(!c)return Dt=0,jt=[],Promise.resolve();var a=c.doc,s=c.getContainerVisiblePageIndexes();return jt=s,s.length?s.reduce(function(e,t){return n(function(){var n,o,a,i,s,u,l,d,p;return x(this,function(g){switch(g.label){case 0:return[4,e];case 1:return n=g.sent(),(o=c.getPDFPageRender(t)).isRendering()?[4,o.waitRendered()]:[3,3];case 2:g.sent(),g.label=3;case 3:return[4,o.getPDFPage()];case 4:return g.sent()&&(a=o.$ui[0].getBoundingClientRect(),i=a.x-r.x,s=a.y-r.y,u=o.page.getDeviceMatrix(o.rotate),l=o.getScale(),u.scale(l,l),d=new I(u),u.translate(i,s),f=a,h=r,p={left:(p={left:Math.max(f.left,h.left),top:Math.max(f.top,h.top),right:Math.min(f.right,h.right),bottom:Math.min(f.bottom,h.bottom)}).left-r.x,right:p.right-r.x,top:p.top-r.y,bottom:p.bottom-r.y},a={left:a.left-r.x,right:a.right-r.x,top:a.top-r.y,bottom:a.bottom-r.y},n[t]=[l,o.rotate,u,p,a,d]),[2,n]}var f,h})})()},Promise.resolve({})).then(function(e){e.visibleIndexes=s,e.uiRect={left:r.left,top:r.top,width:Math.max(1,t.clientWidth),height:Math.max(1,t.clientHeight)},e.dpr=devicePixelRatio||1,c.matrixes=e,Dt=0,jt=[];var n=c.$ui[0].getBoundingClientRect();return e.docRect=n,e.force=i,a.api.updateWinlessMatrix(a.id,o,e)}):(Dt=0,Promise.resolve())}).finally(function(){Dt=0,jt=[]})}function Bt(e,t){return{type:e,value:t}}function Ut(e){return n(function(){return x(this,function(t){return e.getRootComponent().then(function(t){return n(function(){var n,r,o,a,i,c,s,u,l,d,p,g;return x(this,function(f){switch(f.label){case 0:return n=t.getComponentByName("edit-text"),r=t.getComponentByName("join-split"),o=t.getComponentByName("edit-tab"),[4,e.getStateHandlerManager()];case 1:return a=f.sent(),(i=t.getComponentByName("joinsplit-tab"))||(c=t.getComponentByName("toolbar-tabs"),s=t.getComponentByName("toolbar-tab-bodies"),u=t.getComponentByName("fv--protect-tab-paddle"),l=u?u.index():0,s&&s.insert('<paddle exclude-devices="tablet" name="fv--joinsplit-tab-paddle" visible="false">\n                <group-list name="joinsplit-toolbar-group-list">\n                    <group name="joinsplit-tab-group-join">\n                        <page-editor:join></page-editor:join>\n                        <page-editor:split></page-editor:split>\n                    </group>\n                    <group name="joinsplit-tab-group-link">\n                        <page-editor:link></page-editor:link>\n                        <page-editor:unlink></page-editor:unlink>\n                    </group>\n                    <group name="joinsplit-tab-group-select">\n                        <page-editor:select-none></page-editor:select-none>\n                    </group>\n                    <group name="joinsplit-tab-group-exit">\n                        <page-editor:edit-text @async class="fv__ui-toolbar-show-text-button"></page-editor:edit-text>\n                        <page-editor:close></page-editor:close>\n                    </group>\n                </group-list>\n            </paddle>',l+1),c&&c.insert('<gtab group="toolbar-tab" body="fv--joinsplit-tab-paddle" name="joinsplit-tab" text="toolbar.tabs.join&split.title" @portfolio.unsupport visible="false"></gtab>',6),i=t.getComponentByName("joinsplit-tab")),(d=a.getCurrentStates())!==Ot||d.isAddingText()?(n&&n.deactive(),r&&r.deactive(),i&&i.hide()):"touchup"===(p=Ot.getType())||"findReplace"==p?(o&&o.active(),n&&n.active(),r&&r.deactive(),i&&i.hide()):"joinSplit"===p&&(n&&n.deactive(),i&&i.show(),i&&i.active(),r&&r.active()),(g=t.getComponentByName("fv--plugin-PageEditor-add-text"))?(d===Ot&&d.isAddingText()?g.active():g.deactive(),[2]):[2]}})})()}),[2]})})()}var Nt=PDFViewCtrl.shared,Lt=Nt.getClientX,Vt=Nt.getClientY,zt=S.UIEvents,Ht=function(){function e(){l(this,e),this.cache={}}return p(e,[{key:"destroy",value:function(){this.docRender=null}},{key:"setDocRender",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pageEditor";this.docRender=e,this.type=t}},{key:"getPageIndex",value:function(e){var t=this;return this.docRender&&this.docRender.pagesRender?this.docRender.pagesRender.pageDOMs.findIndex(function(n){var r=n.getBoundingClientRect(),o=Lt(e),a=Vt(e);return void 0===o&&(o=t._clientX),void 0===a&&(a=t._clientY),o>r.left&&o<r.right&&a>r.top&&a<r.bottom}):-1}},{key:"getArgs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,o=this.docRender,a=[];if(a.push(Bt("EditorPage",e)),t){var i=o.pdfViewer.$ui[0].parentElement.getBoundingClientRect(),c=Lt(t),s=Vt(t),u=devicePixelRatio||1,l=(c-i.x)*u,d=(s-i.y)*u;a.push(Bt("PointF",[l,d]))}return n&&a.push(n),-1!==r&&a.push(r),a}},{key:"trigger",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!this.docRender)return Promise.resolve();var r=this.docRender,o=r.doc,a=r.pdfViewer;if(o.isDestroyed)return Promise.resolve();var i=document.activeElement,c=i===N.getElement()[0],s=i&&i.getComponent&&i.getComponent();if(s&&"contextmenu"===s.nodeName&&(c=!0),"pageEditor"==this.type){var u=[o.id,e,n].concat(w(t));return o.api.handlePageEditorEvent.apply(o.api,u).then(function(){["OnKeyUp","OnLButtonUp"].includes(e)&&setTimeout(function(){c=document.activeElement===N.getElement()[0],o.api.handlePageEditorEvent.apply(o.api,[o.id,"GetUndoManager",void 0,c]).then(function(e){a.eventEmitter.emit(zt.undoRedoStoreChange,e,"pageEditor",c)})},500)})}"OnChar"===e&&a.eventEmitter.emit(zt.paragraphTextOnChar,{char:t[0]});var l=[o.id,e].concat(w(t));return o.api.handleTouchUpEvent.apply(o.api,l).then(function(t){["OnKeyUp","OnLButtonUp"].includes(e)&&o.api.handleTouchUpEvent.apply(o.api,[o.id,"GetUndoManager",void 0,c]).then(function(e){a.eventEmitter.emit(zt.undoRedoStoreChange,e,"touchUp")})})}},{key:"cacheMouseCoord",value:function(e){this._clientX=Lt(e),this._clientY=Vt(e)}},{key:"clearPageEditorTouchupRedo",value:function(e,t){var n=this.docRender,r=n.doc,o=n.pdfViewer,a=document.activeElement===N.getElement()[0],i=this.cache.pageEditor,c=(i?i[0].length:0)+(i?i[1].length:0),s=t[0].length,u=t[1].length;c&&c!==s+u?r.api.handlePageEditorEvent.apply(r.api,[r.id,"ClearRedo",void 0,a]).then(function(e){o.eventEmitter.emit(zt.undoRedoStoreChange,e,"pageEditor",a)}):"pageEditor"===e&&o.eventEmitter.emit(zt.undoRedoStoreChange,t,"pageEditor",a);var l=this.cache.touchup,d=(l?l[0].length:0)+(l?l[1].length:0),p=t[0].length,g=t[1].length;d&&d!==p+g?r.api.handleTouchUpEvent.apply(r.api,[r.id,"ClearRedo"]).then(function(e){o.eventEmitter.emit(zt.undoRedoStoreChange,e,"touchUp")}):"touchup"===e&&o.eventEmitter.emit(zt.undoRedoStoreChange,t,"touchUp"),this.cache[e]=t}}]),e}();const Kt=new Ht;var $t=o(7665),Wt=o.n($t),Gt=o(8649),Yt=o.n(Gt),Jt=o(7297),qt=o.n(Jt),Xt=o(4945),Qt=o.n(Xt);const Zt={1:"crosshair",3:"nesw-resize",4:"ns-resize",5:"nwse-resize",6:"ew-resize",11:"no-drop",24:"text"};var en=UIExtension.vendors.jQuery,tn=en('<div class="pe_tip"></div>');en("body").append(tn);const nn=tn;var rn={Courier:{regular:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",bolditalic:"Courier-BoldOblique"},Helvetica:{regular:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",bolditalic:"Helvetica-BoldOblique"},"Times-Roman":{regular:"Times-Roman",bold:"Times-Bold",italic:"Times-Italic",bolditalic:"Times-BoldItalic"}};var on={popMenu:{activeObject:null,editingObject:null,position:null,pageIndex:null},addingText:!1,shapeElement:null};function an(){return on.addingText}function cn(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function sn(e){for(var t=e.length,n=[],r=0;r<t-1;r++)n.push({fromColor:e[r].color,from:e[r].offset,toColor:e[r+1].color,to:e[r+1].offset});return n}function un(e){return"transparent"===e?0:parseInt("FF"+e.slice(1),16)}function ln(e){var t,n,r,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HTML",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c="";switch("number"==typeof e&&(e=["int",e]),e[0]){case"int":t=(16711680&e[1])>>16,n=(65280&e[1])>>8,r=255&e[1];break;case"T":t=0,n=0,r=0,i=0;break;case"G":t=n=r=255*e[1];break;case"RGB":t=255*e[1],n=255*e[2],r=255*e[3];break;case"CMYK":t=(1-e[4])*(1-e[1])*255,n=(1-e[4])*(1-e[2])*255,r=(1-e[4])*(1-e[3])*255;break;case"r":t=+(o=e.match(/rgba?\((\d*),\s*(\d*),\s*(\d*),?\s*([\.0-9]*)?\)/))[1],n=+o[2],r=+o[3];break;case"#":var s=4==e.length?/#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/:/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/;o=e.match(s),t=parseInt(o[1],16),n=parseInt(o[2],16),r=parseInt(o[3],16);break;default:throw new Error("Unsupported color format")}switch(a){case"HTML":c=t===n&&n===r&&-1===r?"transparent":"rgba("+parseInt(t)+","+parseInt(n)+","+parseInt(r)+","+i+")";break;case"RGB":c=["RGB",t/255,n/255,r/255];break;case"#":c+=t<16?"#0"+t.toString(16):"#"+t.toString(16),c+=n<16?"0"+n.toString(16):n.toString(16),c+=r<16?"0"+r.toString(16):r.toString(16);break;case"int":c=0,c|=(i*=255)<<24,c|=t<<16,c|=n<<8,c|=r,c>>>=0}return c}function dn(e,t,r){return n(function(){var n;return x(this,function(o){switch(o.label){case 0:return t!==he?[3,2]:[4,e.getActiveObjectProperty(le)];case 1:n=o.sent(),mn({fontName:(a=n).fontName||"Helvetica",fontSize:a.fontSize||18,rtl:a.rtl||!1,charSpace:a.charSpace||0,wordSpace:a.wordSpace||0,fontColor:a.fillColor||"#000000",horzScale:a.horzScale||100,isBold:a.isBold||!1,isItalic:a.isItalic||!1,isCross:a.isCross||!1,isUnderline:a.isUnderline||!1,scriptType:a.scriptType||Ue,alignment:a.alignment||xe,isAdding:an(),lineSpace:0},r),o.label=2;case 2:return[2]}var a})})()}function pn(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=P(function(e){var t,n,r=rn[e.baseFontName];return r?(t=r.bold===e.fontName||r.bolditalic===e.fontName,n=r.italic===e.fontName||r.bolditalic===e.fontName):(t=e.fontIsBold,n=e.fontIsItalic),[e.baseFontName,t,n]}(e),3),o=r[0],a=r[1],i=r[2],c={effectClippingType1:{enable:1===e.count},effectClippingType2:{enable:1===e.count},effectClippingType3:{enable:1===e.count},effectClippingType4:{enable:1===e.count},effectClippingType5:{enable:1===e.count},effectClippingType6:{enable:1===e.count},effectEditClipping:{enable:Pn(e)},effectClearClipping:{enable:wn(e)},fontFamily:{enable:!0,value:o},fontSize:{enable:!0,value:Math.round(100*e.fontSize)/100},fontBold:{enable:!0,value:a},fontItalic:{enable:!0,value:i},fontColor:{enable:!0,value:ln(e.fillColor,"#")},fontUnderline:{enable:!1},fontStrikethrough:{enable:!1},fontSuperSubScript:{enable:!1},fontCharacterSpacing:{enable:!1},fontWritingDirection:{enable:!1},paragraphBullets:{enable:!1},paragraphNumbering:{enable:!1},paragraphAlign:{enable:!1},paragraphIncrease:{enable:!1},paragraphDecrease:{enable:!1},paragraphLineSpacing:{enable:!1},paragraphSpacing:{enable:!1},paragraphCharacterScale:{enable:!0,value:e.horizontalScale},paragraphWordSpacing:{enable:e.isWordSpaceValid,value:e.wordSpace},splitMergeText:{enable:e.canMergeText},splitRemoveKerning:{enable:e.canRemoveTextKerning},splitText:{enable:e.canSplitText,value:e.text},splitToShape:{enable:e.canText2Path},arrangeAlignmentVertically:{enable:e.count>1},arrangeAlignmentHorizontally:{enable:e.count>1},arrangeAlignmentLeft:{enable:e.count>1},arrangeAlignmentRight:{enable:e.count>1},arrangeAlignmentTop:{enable:e.count>1},arrangeAlignmentBottom:{enable:e.count>1},arrangeDistributeVertically:{enable:e.count>2},arrangeDistributeHorizontally:{enable:e.count>2},arrangeZorderToBack:{enable:e.canChangeBack},arrangeZorderToFront:{enable:e.canChangeFront},effectOpacity:{enable:!0,value:e.opacity},arrangeRotateMoreOptions:{enable:!0,value:e.rotateOption},arrangeRotateMoreOptionsInput:{enable:!0,value:e.rotateOption}};n||Cn(t,c,e.type)}function gn(e,t){var n,r,o,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Ke,c=se,s=$e,u=ue;switch(e.lineCap){case i.Butt:n=c.Butt;break;case i.Round:n=c.Round;break;case i.ProjectingSquareCap:n=c.ProjectingSquareCap}switch(e.lineJoin){case s.Miter:r=u.Miter;break;case s.Round:r=u.Round;break;case s.Bevel:r=u.Bevel}cn(e.lineStyle,[])?o=1:cn(e.lineStyle,[2,2])?o=2:cn(e.lineStyle,[3,3])?o=3:cn(e.lineStyle,[4,4])?o=4:cn(e.lineStyle,[4,3,2,3])?o=5:cn(e.lineStyle,[4,3,16,3])?o=6:cn(e.lineStyle,[8,4,4,4])&&(o=7);var l={effectClippingType1:{enable:1===e.count},effectClippingType2:{enable:1===e.count},effectClippingType3:{enable:1===e.count},effectClippingType4:{enable:1===e.count},effectClippingType5:{enable:1===e.count},effectClippingType6:{enable:1===e.count},effectEditClipping:{enable:Pn(e)},effectClearClipping:{enable:wn(e)},shapeStyleLineColor:{enable:!0,value:e.strokeColorSpace?ln(e.strokeColor,"#"):"#fff"},shapeStyleFillColor:{enable:!0,value:ln(e.fillColor,"#")},shapeStyleMiterLimit:{enable:!0,value:e.miterLimit},shapeStyleLineJoin:{enable:!0,value:r},shapeStyleLineCap:{enable:!0,value:n},shapeStyleDashType:{enable:!0,value:o},shapeStyleOpacity:{enable:!0,value:e.opacity},shapeStyleLineWidth:{enable:!0,value:e.lineWidth},arrangeAlignmentVertically:{enable:e.count>1},arrangeAlignmentHorizontally:{enable:e.count>1},arrangeAlignmentLeft:{enable:e.count>1},arrangeAlignmentRight:{enable:e.count>1},arrangeAlignmentTop:{enable:e.count>1},arrangeAlignmentBottom:{enable:e.count>1},arrangeDistributeVertically:{enable:e.count>2},arrangeDistributeHorizontally:{enable:e.count>2},arrangeZorderToBack:{enable:e.canChangeBack},arrangeZorderToFront:{enable:e.canChangeFront},effectOpacity:{enable:!0,value:e.opacity},arrangeRotateMoreOptions:{enable:!0,value:e.rotateOption},arrangeRotateMoreOptionsInput:{enable:!0,value:e.rotateOption}};a||Cn(t,l,e.type)}function fn(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e){for(var t=e.length,n=[],r=0;r<t;r++)n.push({color:e[r].fromColor,offset:e[r].from}),r===t-1&&n.push({color:e[r].toColor,offset:e[r].to});return n}(e.gradientArray),o={effectClippingType1:{enable:1===e.count},effectClippingType2:{enable:1===e.count},effectClippingType3:{enable:1===e.count},effectClippingType4:{enable:1===e.count},effectClippingType5:{enable:1===e.count},effectClippingType6:{enable:1===e.count},effectEditClipping:{enable:Pn(e)},effectClearClipping:{enable:wn(e)},shadingStyleGradientStops:{enable:!0,value:r},arrangeAlignmentVertically:{enable:e.count>1},arrangeAlignmentHorizontally:{enable:e.count>1},arrangeAlignmentLeft:{enable:e.count>1},arrangeAlignmentRight:{enable:e.count>1},arrangeAlignmentTop:{enable:e.count>1},arrangeAlignmentBottom:{enable:e.count>1},arrangeDistributeVertically:{enable:e.count>2},arrangeDistributeHorizontally:{enable:e.count>2},arrangeZorderToBack:{enable:e.canChangeBack},arrangeZorderToFront:{enable:e.canChangeFront},effectOpacity:{enable:!0,value:e.opacity},arrangeRotateMoreOptions:{enable:!0,value:e.rotateOption},arrangeRotateMoreOptionsInput:{enable:!0,value:e.rotateOption}};n||Cn(t,o,e.type)}function hn(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={effectClippingType1:{enable:1===e.count},effectClippingType2:{enable:1===e.count},effectClippingType3:{enable:1===e.count},effectClippingType4:{enable:1===e.count},effectClippingType5:{enable:1===e.count},effectClippingType6:{enable:1===e.count},effectEditClipping:{enable:Pn(e)},effectClearClipping:{enable:wn(e)},arrangeAlignmentVertically:{enable:e.count>1},arrangeAlignmentHorizontally:{enable:e.count>1},arrangeAlignmentLeft:{enable:e.count>1},arrangeAlignmentRight:{enable:e.count>1},arrangeAlignmentTop:{enable:e.count>1},arrangeAlignmentBottom:{enable:e.count>1},arrangeDistributeVertically:{enable:e.count>2},arrangeDistributeHorizontally:{enable:e.count>2},arrangeZorderToBack:{enable:e.canChangeBack},arrangeZorderToFront:{enable:e.canChangeFront},effectOpacity:{enable:!0,value:e.opacity}};n||Cn(t,r,pe)}function vn(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={effectClippingType1:{enable:1===e.count},effectClippingType2:{enable:1===e.count},effectClippingType3:{enable:1===e.count},effectClippingType4:{enable:1===e.count},effectClippingType5:{enable:1===e.count},effectClippingType6:{enable:1===e.count},effectEditClipping:{enable:Pn(e)},effectClearClipping:{enable:wn(e)},arrangeAlignmentVertically:{enable:e.count>1},arrangeAlignmentHorizontally:{enable:e.count>1},arrangeAlignmentLeft:{enable:e.count>1},arrangeAlignmentRight:{enable:e.count>1},arrangeAlignmentTop:{enable:e.count>1},arrangeAlignmentBottom:{enable:e.count>1},arrangeDistributeVertically:{enable:e.count>2},arrangeDistributeHorizontally:{enable:e.count>2},arrangeZorderToBack:{enable:e.canChangeBack},arrangeZorderToFront:{enable:e.canChangeFront},effectOpacity:{enable:!0,value:e.opacity},arrangeRotateMoreOptions:{enable:!0,value:e.rotateOption},arrangeRotateMoreOptionsInput:{enable:!0,value:e.rotateOption}};n||Cn(t,r,e.type)}function mn(e,t){var n;switch(e.scriptType){case Ue:n="";break;case Le:n="font-subscript";break;case Ne:n="font-superscript"}var r={fontFamily:{enable:!0,value:qe[e.fontName]||e.fontName},fontSize:{enable:!0,value:e.fontSize},fontColor:{enable:!0,value:ln(e.fontColor,"#")},fontBold:{enable:!0,value:e.isBold},fontItalic:{enable:!0,value:e.isItalic},fontStrikethrough:{enable:!0,value:e.isCross},fontUnderline:{enable:!0,value:e.isUnderline},fontSuperSubScript:{enable:!0,value:n},fontCharacterSpacing:{enable:!0,value:e.charSpace},fontWritingDirection:{enable:e.isAdding,value:e.isAdding?e.rtl?"rtl":"ltr":""},paragraphWordSpacing:{enable:!0,value:e.wordSpace},paragraphCharacterScale:{enable:!0,value:e.horzScale},paragraphAlign:{enable:!0,value:["left","center","right","justify"][e.alignment]},paragraphBullets:{enable:!1},paragraphNumbering:{enable:!1},paragraphIncrease:{enable:!1},paragraphDecrease:{enable:!1},paragraphLineSpacing:{enable:!0,value:e.lineSpace},paragraphSpacing:{enable:!1},splitMergeText:{enable:!1},splitRemoveKerning:{enable:!1},splitText:{enable:!1},splitToShape:{enable:!1},effectClippingType1:{enable:!1},effectClippingType2:{enable:!1},effectClippingType3:{enable:!1},effectClippingType4:{enable:!1},effectClippingType5:{enable:!1},effectClippingType6:{enable:!1},effectEditClipping:{enable:!1},effectClearClipping:{enable:!1},effectOpacity:{enable:!1},effectShear:{enable:!1},arrangePagecenterVertically:{enable:!1},arrangePagecenterHorizontally:{enable:!1},arrangePagecenterBoth:{enable:!1},arrangeAlignmentVertically:{enable:!1},arrangeAlignmentHorizontally:{enable:!1},arrangeAlignmentLeft:{enable:!1},arrangeAlignmentRight:{enable:!1},arrangeAlignmentTop:{enable:!1},arrangeAlignmentBottom:{enable:!1},arrangeDistributeVertically:{enable:!1},arrangeDistributeHorizontally:{enable:!1},arrangeRotateClockwise:{enable:!1},arrangeRotateCounterClockwise:{enable:!1},arrangeRotateMoreOptions:{enable:!1},arrangeFlipVertically:{enable:!1},arrangeFlipHorizontally:{enable:!1},arrangeZorderToBack:{enable:!1},arrangeZorderToFront:{enable:!1}};Ze.isTouchDevice&&(r.showKeyboard=!0),Cn(t,r,le)}function bn(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n(function(){var n;return x(this,function(o){return e&&((n=e.type)===le?pn(e,t,r):n===de?gn(e,t,r):n===ge?fn(e,t,r):n===fe?hn(e,t,r):n===pe&&vn(e,t,r)),[2]})})()}function yn(e){if(e){var t=e.getComponentByName("edit-properties");if(t){if(t.formatTab&&t.formatTab.$element){var n=t.formatTab.$element.find('[name="arrange-rotate-more-options-input"]');n&&n.val("")}t.disable()}}}function Cn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(e){var r=e.getComponentByName("sidebar-right");if(!r){var o=e.getComponentByName("edit-properties");if(!o)return;return o.enable(),void o.setHost(t,n)}r.show();var a=e.getComponentByName("sidebar-right-tabs");a.openTab("edit-properties-panel"),a.setActivetab("edit-properties-panel"),e.getComponentByName("edit-properties").setHost(t,n)}}function Pn(e){return!(e.count>1)&&(e.type===ge||e.clipPathCount>0)}function wn(e){return!(e.count>1)&&(e.type!==ge&&e.clipPathCount>0)}function xn(e,t){return n(function(){return x(this,function(n){switch(n.label){case 0:return[4,e.setOpacity(t)];case 1:return n.sent(),[2]}})})()}function Sn(e,t){return n(function(){return x(this,function(n){switch(n.label){case 0:return[4,e.rotate(parseFloat(t))];case 1:return n.sent(),[2]}})})()}function En(e,t){return n(function(){return x(this,function(n){switch(n.label){case 0:return[4,e.flip(t)];case 1:return n.sent(),[2]}})})()}function kn(e,t){return n(function(){return x(this,function(n){switch(n.label){case 0:return[4,e.shear(t)];case 1:return[2,n.sent()]}})})()}function In(e,t){return n(function(){return x(this,function(n){switch(n.label){case 0:return[4,e.align(t)];case 1:return n.sent(),[2]}})})()}function _n(e,t){return n(function(){return x(this,function(n){switch(n.label){case 0:return[4,e.center(t)];case 1:return n.sent(),[2]}})})()}function An(e,t){return n(function(){return x(this,function(n){switch(n.label){case 0:return[4,e.distribute(t)];case 1:return[2,n.sent()]}})})()}function Tn(e,t){return n(function(){return x(this,function(n){switch(n.label){case 0:return[4,e.changeRenderingOrder(t)];case 1:return n.sent(),[2]}})})()}function Mn(e){return n(function(){return x(this,function(t){switch(t.label){case 0:return[4,e.clearClipPath()];case 1:return[2,t.sent()]}})})()}function Fn(e){return n(function(){return x(this,function(t){switch(t.label){case 0:return[4,e.editClipPath()];case 1:return[2,t.sent()]}})})()}function On(e,t){return n(function(){return x(this,function(n){switch(n.label){case 0:return[4,e.addClipPath(t)];case 1:return[2,n.sent()]}})})()}function Dn(e,t){return n(function(){return x(this,function(n){switch(n.label){case 0:return[4,e.setFontSize(parseInt(t))];case 1:return[2,n.sent()]}})})()}function jn(e,t){return n(function(){return x(this,function(n){switch(n.label){case 0:return[4,e.setHorizontalScale(t)];case 1:return[2,n.sent()]}})})()}function Rn(e,t){return n(function(){return x(this,function(n){switch(n.label){case 0:return[4,e.setCharSpace(t)];case 1:return[2,n.sent()]}})})()}function Bn(e,t){return n(function(){return x(this,function(n){switch(n.label){case 0:return[4,e.setWordSpace(t)];case 1:return[2,n.sent()]}})})()}function Un(e,t,r,o,a){return n(function(){return x(this,function(n){return[2,e.setFont(t,r,o,a)]})})()}function Nn(e){return n(function(){return x(this,function(t){switch(t.label){case 0:return[4,e.removeTextKerning()];case 1:return[2,t.sent()]}})})()}function Ln(e){return n(function(){return x(this,function(t){switch(t.label){case 0:return[4,e.mergeText()];case 1:return[2,t.sent()]}})})()}function Vn(e,t){return n(function(){return x(this,function(n){switch(n.label){case 0:return t=t.sort(function(e,t){return e-t}),[4,e.splitText(t)];case 1:return[2,n.sent()]}})})()}function zn(e,t,r){return n(function(){return x(this,function(n){switch(n.label){case 0:return e.json.fillColorSpace=2,[4,e.setFillColor(un(t),r)];case 1:return[2,n.sent()]}})})()}function Hn(e,t){return n(function(){return x(this,function(n){switch(n.label){case 0:return[4,e.setLineWidth(t)];case 1:return[2,n.sent()]}})})()}function Kn(e,t){return n(function(){return x(this,function(n){switch(n.label){case 0:return[4,e.setMiterLimit(t)];case 1:return[2,n.sent()]}})})()}function $n(e,t){return n(function(){return x(this,function(n){switch(n.label){case 0:return[4,e.setLineCap(t)];case 1:return[2,n.sent()]}})})()}function Wn(e,t){return n(function(){return x(this,function(n){switch(n.label){case 0:return[4,e.setLineJoin(t)];case 1:return[2,n.sent()]}})})()}function Gn(e,t){return n(function(){return x(this,function(n){return[2,e.setLineStyle(t)]})})()}function Yn(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n(function(){return x(this,function(n){switch(n.label){case 0:return e.setColorSpace("fillColorSpace",2),[4,e.setFillColor(un(t),r)];case 1:return[2,n.sent()]}})})()}function Jn(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n(function(){return x(this,function(n){return e.setColorSpace("strokeColorSpace",2),[2,e.setStrokeColor(un(t),r)]})})()}function qn(e,t){return n(function(){return x(this,function(n){return[2,e.changeShadingColor(t)]})})()}function Xn(e,t){return n(function(){return x(this,function(n){return[2,e.setGradientColorShowRect(t)]})})()}function Qn(e,t){return n(function(){return x(this,function(n){return[2,e.setGradientCurrentInfo(t)]})})()}function Zn(e){return n(function(){var t;return x(this,function(n){switch(n.label){case 0:return[4,e.getEditingObject()];case 1:return t=n.sent(),[2,e.createEditingObjectProxy(t)]}})})()}function er(e,t){return n(function(){return x(this,function(n){switch(n.label){case 0:return[4,Zn(e)];case 1:return[2,n.sent().OnAlignChanged(t)]}})})()}function tr(e,t){return n(function(){return x(this,function(n){switch(n.label){case 0:return[4,Zn(e)];case 1:return[2,n.sent().OnSuperScriptChanged(t)]}})})()}function nr(e,t){return n(function(){return x(this,function(n){switch(n.label){case 0:return[4,Zn(e)];case 1:return[2,n.sent().OnSubScriptChanged(t)]}})})()}function rr(e,t){return n(function(){return x(this,function(n){switch(n.label){case 0:return[4,Zn(e)];case 1:return[2,n.sent().OnWritingDirectionChanged(t)]}})})()}function or(e,t,r,o,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return n(function(){var n,c,s,u,l,d,p;return x(this,function(g){switch(g.label){case 0:switch(c={},e&&(c=e.json,n=c.type),s=a.getComponentByName("edit-properties"),u=s.formatTab,n){case le:return[3,1];case de:return[3,3];case ge:return[3,5];case pe:return[3,7];case fe:return[3,9]}return[3,11];case 1:return[4,ar(t,u,e,r,o)];case 2:return g.sent(),[3,15];case 3:return[4,ir(t,u,e,r,o)];case 4:return g.sent(),[3,15];case 5:return[4,cr(t,u,e,r,o)];case 6:return g.sent(),[3,15];case 7:return[4,sr(t,u,e,r,o)];case 8:return g.sent(),[3,15];case 9:return[4,ur(t,u,e,r,o)];case 10:return g.sent(),[3,15];case 11:return[4,t.getEditingObject()];case 12:return(l=g.sent())?l.type!==he?[3,14]:[4,lr(t,u,l,r,o)]:[2];case 13:g.sent(),g.label=14;case 14:return[3,15];case 15:return[4,t.getActiveObject()];case 16:return(d=g.sent())?(p=d.json,"arrange-rotate-more-options"===r&&(p.rotateOption=o),bn(p,a,i),[2]):[2]}})})()}function ar(e,t,r,o,a){return n(function(){var n,i,c,s,u;return x(this,function(l){switch(l.label){case 0:return[4,t];case 1:switch(n=l.sent()&&t.getStates(["fontFamily","fontBold","fontItalic"])||{},i=n.fontFamily,c=n.fontBold,s=n.fontItalic,o){case"font-family":return[3,2];case"font-bold":return[3,4];case"font-italic":return[3,6];case"font-size":return[3,8];case"font-color":return[3,10];case"font-character-spacing":return[3,12];case"paragraph-word-spacing":return[3,14];case"paragraph-character-scale":return[3,16];case"split-merge-text":return[3,18];case"split-remove-kerning":return[3,20];case"split-text":return[3,22];case"split-to-shape":return[3,24]}return[3,26];case 2:return c=void 0===c?r.json.fontIsBold:c,s=void 0===s?r.json.fontIsItalic:s,[4,Un(r,a,c,s,0)];case 3:case 5:case 7:case 9:case 11:case 13:case 15:case 17:case 19:case 21:case 23:case 25:return l.sent(),[3,26];case 4:return s=void 0===s?r.json.fontIsItalic:s,0==(u=i||r.json.baseFontName).length?[2]:[4,Un(r,u,a,s,1)];case 6:return c=void 0===c?r.json.fontIsBold:c,0==(i||r.json.baseFontName).length?[2]:[4,Un(r,i||r.json.baseFontName,c,a,2)];case 8:return[4,Dn(r,parseInt(a))];case 10:return[4,zn(r,a,!0)];case 12:return[4,Rn(r,parseInt(a))];case 14:return[4,Bn(r,parseInt(a))];case 16:return[4,jn(r,parseInt(a))];case 18:return[4,fr(r,t)];case 20:return[4,Nn(r)];case 22:return[4,Vn(r,a)];case 24:return[4,e.text2Path()];case 26:return[4,dr(e,r,o,a)];case 27:return l.sent(),[4,pr(e,r,o,a)];case 28:return l.sent(),[2]}})})()}function ir(e,t,r,o,a){return n(function(){var e,t,n,i;return x(this,function(c){switch(c.label){case 0:switch(e=se,t=Ke,n=ue,i=$e,o){case"shape-style-color":return[3,1];case"shape-style-line-color":return[3,6];case"shape-style-fill-color":return[3,8];case"shape-style-opacity":return[3,10];case"shape-style-line-width":return[3,12];case"shape-style-dash-type":return[3,14];case"shape-style-line-cap":return[3,16];case"shape-style-line-join":return[3,24];case"shape-style-miter-limit":return[3,32]}return[3,34];case 1:return"string"!=typeof a.borderColor?[3,3]:[4,Jn(r,a.borderColor)];case 2:c.sent(),c.label=3;case 3:return"string"!=typeof a.backgroundColor?[3,5]:[4,Yn(r,a.backgroundColor)];case 4:c.sent(),c.label=5;case 5:return[3,34];case 6:return[4,Jn(r,a)];case 7:return c.sent(),[3,34];case 8:return[4,Yn(r,a)];case 9:return c.sent(),[3,34];case 10:return[4,xn(r,parseFloat(a))];case 11:return c.sent(),[3,34];case 12:return[4,Hn(r,parseInt(a))];case 13:return c.sent(),[3,34];case 14:return[4,gr(r,a)];case 15:return c.sent(),[3,34];case 16:switch(a){case e.ProjectingSquareCap:return[3,17];case e.Round:return[3,19];case e.Butt:return[3,21]}return[3,23];case 17:return[4,$n(r,t.ProjectingSquareCap)];case 18:return c.sent(),[3,23];case 19:return[4,$n(r,t.Round)];case 20:return c.sent(),[3,23];case 21:return[4,$n(r,t.Butt)];case 22:return c.sent(),[3,23];case 23:return[3,34];case 24:switch(a){case n.Miter:return[3,25];case n.Round:return[3,27];case n.Bevel:return[3,29]}return[3,31];case 25:return[4,Wn(r,i.Miter)];case 26:return c.sent(),[3,31];case 27:return[4,Wn(r,i.Round)];case 28:return c.sent(),[3,31];case 29:return[4,Wn(r,i.Bevel)];case 30:return c.sent(),[3,31];case 31:return[3,34];case 32:return[4,Kn(r,parseInt(a))];case 33:return c.sent(),[3,34];case 34:return[4,dr(r,r,o,a)];case 35:return c.sent(),[4,pr(r,r,o,a)];case 36:return c.sent(),[2]}})})()}function cr(e,t,r,o,a){return n(function(){return x(this,function(t){switch(t.label){case 0:switch(o){case"shading-style-gradient-stops":return[3,1];case"shading-style-color":return[3,5];case"shading-style-reference-line":return[3,9]}return[3,10];case 1:case 5:return[4,Xn(r,{left:0,bottom:60,right:225,top:40})];case 2:case 6:return t.sent(),[4,Qn(r,sn(a))];case 3:case 7:return t.sent(),[4,qn(r,!0)];case 4:case 8:return t.sent(),[3,10];case 9:return function(e){n(function(){return x(this,function(t){return[2,e.editReferenceLine()]})})()}(r),[3,10];case 10:return[4,dr(e,r,o,a)];case 11:return t.sent(),[4,pr(e,r,o,a)];case 12:return t.sent(),[2]}})})()}function sr(e,t,r,o,a){return n(function(){return x(this,function(t){switch(t.label){case 0:return[4,dr(e,r,o,a)];case 1:return t.sent(),[4,pr(e,r,o,a)];case 2:return t.sent(),[2]}})})()}function ur(e,t,r,o,a){return n(function(){return x(this,function(t){switch(t.label){case 0:return[4,dr(e,r,o,a)];case 1:return t.sent(),[4,pr(e,r,o,a)];case 2:return t.sent(),[2]}})})()}function lr(e,t,r,o,a){return n(function(){var r;return x(this,function(i){switch(i.label){case 0:return[4,t];case 1:switch(r=(i.sent()&&t.getStates(["fontBold"])||{}).fontBold,o){case"font-family":r=void 0===r?selection.json.fontIsBold:r,function(e,t,r){n(function(){return x(this,function(n){switch(n.label){case 0:return[4,Zn(e)];case 1:return[2,n.sent().OnFontNameChanged(t,r)]}})})()}(e,a,r);break;case"font-size":!function(e,t){n(function(){return x(this,function(n){switch(n.label){case 0:return[4,Zn(e)];case 1:return[2,n.sent().OnFontSizeChanged(t)]}})})()}(e,parseInt(a));break;case"font-color":!function(e,t){n(function(){return x(this,function(n){switch(n.label){case 0:return[4,Zn(e)];case 1:return[2,n.sent().OnTextColorChanged(un(t))]}})})()}(e,a);break;case"font-bold":!function(e,t){n(function(){return x(this,function(n){switch(n.label){case 0:return[4,Zn(e)];case 1:return[2,n.sent().OnBoldChanged(t)]}})})()}(e,a);break;case"font-italic":!function(e,t){n(function(){return x(this,function(n){switch(n.label){case 0:return[4,Zn(e)];case 1:return[2,n.sent().OnItalicChanged(t)]}})})()}(e,a);break;case"font-underline":!function(e,t){n(function(){return x(this,function(n){switch(n.label){case 0:return[4,Zn(e)];case 1:return[2,n.sent().OnUnderlineChanged(t)]}})})()}(e,a);break;case"font-strikethrough":!function(e,t){n(function(){return x(this,function(n){switch(n.label){case 0:return[4,Zn(e)];case 1:return[2,n.sent().OnCrossChanged(t)]}})})()}(e,a);break;case"font-super-sub-script":a.indexOf("font-superscript")>=0?(nr(e,!1),tr(e,!0)):a.indexOf("font-subscript")>=0?(tr(e,!1),nr(e,!0)):(nr(e,!1),tr(e,!1));break;case"font-character-spacing":!function(e,t){n(function(){return x(this,function(n){switch(n.label){case 0:return[4,Zn(e)];case 1:return[2,n.sent().OnCharSpaceChanged(t)]}})})()}(e,a);break;case"font-writing-direction":a.indexOf("rtl")>=0?rr(e,He):a.indexOf("ltr")>=0&&rr(e,ze);break;case"paragraph-align":switch(a){case"left":er(e,xe);break;case"right":er(e,Ee);break;case"center":er(e,Se);break;case"justify":er(e,ke)}break;case"paragraph-word-spacing":!function(e,t){n(function(){return x(this,function(n){switch(n.label){case 0:return[4,Zn(e)];case 1:return[2,n.sent().OnWordSpaceChanged(t)]}})})()}(e,parseFloat(a));break;case"paragraph-character-scale":!function(e,t){n(function(){return x(this,function(n){switch(n.label){case 0:return[4,Zn(e)];case 1:return[2,n.sent().OnCharHorzScaleChanged(t)]}})})()}(e,parseFloat(a));break;case"paragraph-line-spacing":!function(e,t){n(function(){return x(this,function(n){switch(n.label){case 0:return[4,Zn(e)];case 1:return[2,n.sent().OnLineLeadingChanged(t)]}})})()}(e,parseFloat(a))}return[2]}})})()}function dr(e,t,r,o){return n(function(){return x(this,function(e){switch(e.label){case 0:switch(r){case"effect-clipping-type1":return[3,1];case"effect-clipping-type2":return[3,3];case"effect-clipping-type3":return[3,5];case"effect-clipping-type4":return[3,7];case"effect-clipping-type5":return[3,9];case"effect-clipping-type6":return[3,11];case"effect-edit-clipping":return[3,13];case"effect-clear-clipping":return[3,15];case"effect-opacity":return[3,17];case"effect-shear":return[3,19]}return[3,21];case 1:return[4,On(t,Oe)];case 2:case 4:case 6:case 8:case 10:case 12:case 14:case 16:case 18:case 20:return e.sent(),[3,21];case 3:return[4,On(t,De)];case 5:return[4,On(t,Fe)];case 7:return[4,On(t,je)];case 9:return[4,On(t,Re)];case 11:return[4,On(t,Be)];case 13:return[4,Fn(t)];case 15:return[4,Mn(t)];case 17:return[4,xn(t,parseFloat(o))];case 19:return[4,kn(t,parseInt(o))];case 21:return[2]}})})()}function pr(e,t,r,o){return n(function(){return x(this,function(e){switch(e.label){case 0:switch(r){case"arrange-rotate-clockwise":return[3,1];case"arrange-rotate-counter-clockwise":return[3,2];case"arrange-flip-vertically":return[3,3];case"arrange-flip-horizontally":return[3,4];case"arrange-rotate-more-options":return[3,5];case"arrange-zorder-to-back":return[3,6];case"arrange-zorder-to-front":return[3,8];case"arrange-pagecenter-vertically":return[3,10];case"arrange-pagecenter-horizontally":return[3,11];case"arrange-pagecenter-both":return[3,12];case"arrange-alignment-vertically":return[3,13];case"arrange-alignment-horizontally":return[3,14];case"arrange-alignment-left":return[3,15];case"arrange-alignment-right":return[3,16];case"arrange-alignment-top":return[3,17];case"arrange-alignment-bottom":return[3,18];case"arrange-distribute-vertically":return[3,19];case"arrange-distribute-horizontally":return[3,20]}return[3,21];case 1:return Sn(t,-Math.PI/2),[3,21];case 2:return Sn(t,Math.PI/2),[3,21];case 3:return En(t,!0),[3,21];case 4:return En(t,!1),[3,21];case 5:return Sn(t,-parseFloat(o)/180*Math.PI),[3,21];case 6:return[4,Tn(t,Te)];case 7:case 9:return e.sent(),[3,21];case 8:return[4,Tn(t,Me)];case 10:return _n(t,Ie),[3,21];case 11:return _n(t,_e),[3,21];case 12:return _n(t,Ae),[3,21];case 13:return In(t,Pe),[3,21];case 14:return In(t,we),[3,21];case 15:return In(t,me),[3,21];case 16:return In(t,be),[3,21];case 17:return In(t,ye),[3,21];case 18:return In(t,Ce),[3,21];case 19:return An(t,!0),[3,21];case 20:return An(t,!1),[3,21];case 21:return[2]}})})()}function gr(e,t){return n(function(){return x(this,function(n){switch(n.label){case 0:return[4,Gn(e,{1:[],2:[2,2],3:[3,3],4:[4,4],5:[4,3,2,3],6:[4,3,16,3],7:[8,4,4,4]}[t])];case 1:return n.sent(),[2]}})})()}function fr(e,t){return n(function(){var n;return x(this,function(r){switch(r.label){case 0:return[4,Ln(e)];case 1:return r.sent()||(n=t.pdfUI).alert(n.i18n.t("page-editor:alert.mertTextFaided")),[2]}})})()}var hr="unique_"+Date.now().toString(36),vr=0;var mr,br=(mr="contextmenu",function(e){return"fv--plugin-".concat(mr,"-").concat(e)});function yr(e){var t=e.text,n=e.isEnabled,r=e.submenu,o="";!1===n&&(o=' disabled="true"');var a="";a+="\n      <dropdown".concat(o," separate='false' align='out-right' valign='top' text='").concat(t,"'>");var i=!0,c=!1,s=void 0;try{for(var u,l=r[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var d=u.value;d.submenu?a+=yr(d):a+=Cr(d)}}catch(e){c=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(c)throw s}}return a+="\n      </dropdown>"}function Cr(e){var t,n=e.type,r=e.text,o=e.isEnabled,a=e.onClickId;if(n&&"default"!==n){if("separator"!==n)return"";t="contextmenu-separator"}else t="contextmenu-item";var i="";!1===o&&(i=' disabled="true"');var c="";return void 0!==a&&(c=" @on.click=\"ctrl.itemClick('".concat(a,"')\"")),"\n      <".concat(t).concat(i).concat(c," class='fv__plugin-contextmenu-item'>").concat(r||"","</").concat(t,">")}function Pr(e,t){var n,r=br([n||"",hr,vr++].join("_")),o=function(e,t){var n="";n+="<contextmenu name='".concat(t||"","' @controller.alias='ctrl' @on.hide='ctrl.onClose'>");var r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var s=i.value;s.submenu?n+=yr(s):n+=Cr(s)}}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n+"\n    </contextmenu>"}(t,r);return e.rootComponent.append(o,[{target:r,config:{callback:function(t){function n(){return l(this,n),s(this,n,arguments)}return v(n,t),p(n,[{key:"itemClick",value:function(t){switch(t){case"PopupMenuItem_e_PopupMenuItemProperties":e.openDialog("pageEditorProps");break;case"PopupMenuItem_e_PopupMenuItemShear":case"PopupMenuItem_e_PopupMenuItemRotateMoreOptions":break;default:e.pdfViewer.currentPDFDoc.pageEditor.triggerPopMenuAction(t)}}},{key:"onClose",value:function(){!function(e,t){var n=e.getComponentByName(t);n.hide()}(e.rootComponent,r)}}]),n}(S.Controller)}}]),r}var wr=["PopupMenuItem_e_PopupMenuItemShear","PopupMenuItem_e_PopupMenuItemRotateMoreOptions"];function xr(e,t,r){return n(function(){var n,o,a,i,c,s,u,l;return x(this,function(d){switch(d.label){case 0:n=[],o=!0,a=!1,i=void 0,d.label=1;case 1:d.trys.push([1,6,7,8]),c=e[Symbol.iterator](),d.label=2;case 2:return(o=(s=c.next()).done)?[3,5]:[4,Sr(s.value,t,r)];case 3:(u=d.sent())&&n.push(u),d.label=4;case 4:return o=!0,[3,2];case 5:return[3,8];case 6:return l=d.sent(),a=!0,i=l,[3,8];case 7:try{o||null==c.return||c.return()}finally{if(a)throw i}return[7];case 8:return[2,n=function(e){for(var t=[],n=0,r=e.length-1,o=0;o<e.length;o++){if("separator"!==e[o].type)break;n++}for(var a=e.length-1;a>=0;a--){if("separator"!==e[a].type)break;r--}if(r<n)return[];for(var i=!1,c=n;c<=r;c++){var s=e[c];if("separator"===s.type){if(i)continue;i=!0}else i=!1;t.push(s)}return t}(n)]}})})()}function Sr(e,t,r){return n(function(){var n,o,a,i,c,s,u,l;return x(this,function(d){switch(d.label){case 0:return(n=t.activeObject)?wr.indexOf(e.name)>=0?[2]:(p=e.name,"separator"===(o="-"===p?"separator":"default")?[2,{type:o}]:(a=We[e.name],i=a?"page-editor:popMenu."+a:"","EditObject"!==a||n.type!==ve?[3,1]:(c=!1,[3,3]))):[2];case 1:return[4,Er(e,t,r)];case 2:c=d.sent(),d.label=3;case 3:return s=e.name,e.subItems?[4,xr(e.subItems,t,r)]:[3,5];case 4:u=d.sent(),d.label=5;case 5:return l={text:i,isEnabled:c,onClickId:s},u&&(l.submenu=u),[2,l]}var p})})()}function Er(e,t,r){return n(function(){var o,a;return x(this,function(i){switch(i.label){case 0:return o=t.activeObject,a=t.editingObject,0!==Object.keys(o).length||0!==Object.keys(a).length?[3,4]:"PopupMenuItem_e_PopupMenuItemPaste"!==e.name?[3,2]:[4,r.currentPDFDoc.pageEditor.canPaste()];case 1:return[2,i.sent()];case 2:return[2,!1];case 3:return[3,8];case 4:return e.enable||void 0===e.enable?e.subItems?[4,(c=e.subItems,n(function(){var e,n,o,a,i,s;return x(this,function(u){switch(u.label){case 0:e=!0,n=!1,o=void 0,u.label=1;case 1:u.trys.push([1,6,7,8]),a=c[Symbol.iterator](),u.label=2;case 2:return(e=(i=a.next()).done)?[3,5]:[4,Er(i.value,t,r)];case 3:if(u.sent())return[2,!0];u.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return s=u.sent(),n=!0,o=s,[3,8];case 7:try{e||null==a.return||a.return()}finally{if(n)throw o}return[7];case 8:return[2,!1]}})})())]:[3,6]:[2,!1];case 5:return[2,i.sent()];case 6:if(e.enable||void 0===e.enable)return[2,!0];i.label=7;case 7:return[2,!1];case 8:return[2]}var c})})()}function kr(e){on.addingText=e}var Ir,_r=o(8446),Ar=o.n(_r),Tr=S.vendors.jQuery,Mr=S.PDFViewCtrl,Fr=Mr.shared,Or=Fr.debounce,Dr=Fr.ThrottleAsyncTaskExecutor,jr=S.vendors.Hammer,Rr=S.UIEvents,Br=Promise.resolve(),Ur=S.PDFViewCtrl,Nr=Ur.commons.copyText,Lr=Ur.DeviceInfo,Vr=Lr.isTouchDevice,zr=Lr.isDesktop,Hr=Lr.isMobile,Kr=Lr.isTablet,$r=Ur.shared.createDeferred,Wr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"OnKeyDown";return Br=Br.then(function(n){return Kt.trigger(t,[e.keyCode,H(e)])})},Gr=!0,Yr=0,Jr=navigator.userAgent.toLowerCase(),qr=/opera|opr/.test(Jr),Xr=/msie/.test(Jr),Qr=(/trident/.test(Jr)||Xr)&&!qr&&"msSaveBlob"in navigator,Zr=function(e){function t(e){var n;return l(this,t),(n=s(this,t,[e])).destroyHooks=[],n.hasSelection=!1,n.canScroll=!0,n.component=e.viewerUI.rootComponent.getComponentByName("fv--plugin-PageEditor-add-text"),n.disableToggleCaret=!1,window&&(window.PageEditorTrigger=Kt),n}return v(t,e),p(t,[{key:"goToPage",value:function(e,t,n){if(this.docRender){var r=this.docRender.getPDFPageRender(e);if(r){var o=P(r.getPDFPointFromClientPoint(t,n,!0),2),a=o[0],i=o[1],c=this.docRender.pdfViewer,s=this.uiContainerRect.height||0;c.goToPage(e,i-s/4,a,!1)}}}},{key:"hitTest",value:function(e,t,n){if(!this.docRender)return!1;var r=this.docRender.getPDFPageRender(e);if(!r)return!1;var o=P(r.getPDFPointFromClientPoint(t,n,!1),2),a=o[0],i=o[1];if(!this.selectionText)return!1;var c=this.selectionText,s=c.x,u=c.y,l=c.width,d=c.height;return a>=s&&a<=s+l&&i>=u&&i<=u+d}},{key:"docHandler",value:function(e){var t=this,r=this;this.documentMouseupFinalUpdateCount=0;var o=this.pdfViewer;this.docRender=e;var a=this.doc=e.doc;Ir=this;var i=o.viewerUI.loading(),c=this.startPromise=a.startPageEdit(Wt(),Yt(),qt(),Qt()).then(function(e){o.getEventEmitter().emit("pageeditor-started"),i()});Kt.setDocRender(this.docRender),this.keyMgr=new V({skipKey:function(e){var t=document.activeElement!==N.getElement()[0];return t?!$[e]&&void 0:t},keydown:function(e){if(t.pdfViewer.isShortcutKeyEnabled()){var n=t.handleSystemCommand(e);if([37,38,39,40].indexOf(e.keyCode)>=0&&t.hasSelection&&(e.preventDefault(),e.stopPropagation()),8==e.keyCode&&Kt.trigger("OnChar",[String.fromCharCode(e.keyCode)]),n)return!1;Wr(e).then(function(n){return t.actionFinalUpdate(e)})}},keyup:function(e){if(t.pdfViewer.isShortcutKeyEnabled()){13==e.keyCode?Kt.trigger("OnChar",[String.fromCharCode(e.keyCode)]).then(function(n){return t.actionFinalUpdate(e)}):Wr(e,"OnKeyUp").then(function(n){return t.actionFinalUpdate(e)});var n=document.activeElement===N.getElement()[0];!0!==t.doc.docModified&&n&&t.doc.setDocModified()}}}),Tr(document).on("focusin",this.focusin=function(e){et(e,N,Yr,function(){return t.keyMgr.start()},function(){return t.keyMgr.stop()},function(){return Kt.trigger("RestartEdit")})}),Tr(document).on("mouseup",this.cancelDown=function(e){if(!(e.target.classList&&e.target.classList.contains("fv__pdf-doc-handler-container")||Tr(e.target).hasClass("icon-btn")||Tr(e.target).parents(".icon-btn").length||Tr(e.target).parents('[name="fv--plugin-PageEditor-add-shape"]').length||2===e.button||t.documentMouseupFinalUpdateCount>0||Tr(e.target).parents(".fv__ui-contextmenu-item").length||Tr(e.target).parents(".fv__ui-layer"))){var n=K(e,"Up");return setTimeout(function(){t.docRender&&Kt.trigger(n,Kt.getArgs(0,e,0,H(e))).then(function(e){return t.actionFinalUpdate()})},200)}}),window.addEventListener("wheel",this.cancelWheel=function(e){t.canScroll||e.preventDefault()},{passive:!1}),this.setEditorNotifier();var s=function(){r.uiContainerRect=e.pdfViewer.$ui[0].parentElement.getBoundingClientRect(),c.then(function(){return Rt(o,0,0,!0)})};this.destroyHooks.push(o.addEventListener("before-zoom-to",function(){var e=o.getPDFDocRender();if(e){var n=e.$ui.find(".pe_handler_container");["top","left","width","height","right","bottom"].forEach(function(e){n[0].style[e]=null,t.$handler&&(t.$handler[0].style[e]=null)})}})),["fitWidthResizeViewport","zoomToSuccess","afterDocumentRotation","pageRotationChanged","pagesRotated","importPages","pageAdded","pageMoved","pagesMoved"].map(function(e){return Mr.Events[e]}).forEach(function(e){t.destroyHooks.push(o.addEventListener(e,s))});var u=function(){var e=["","Text","Path","Image","Shading","XObject","Size"].map(function(e){return o.i18n.t("page-editor:"+e)});return Kt.trigger("ChangeLanguage",[e])};this.destroyHooks.push(o.addEventListener("change-language-success",u)),c.then(function(){return u()}).then(function(){s(!1)}),this.destroyHooks.push(o.addEventListener("PageEditor_onStartClick",function(){t.disableRightPanel=!0}),o.addEventListener("PageEditor_onEndClick",function(){t.disableRightPanel=!1}),o.addEventListener("editPropertiesAction",function(e){Vr&&!zr?"font-family"!==e.name&&"paragraph-numbering"!==e.name&&"paragraph-align"!==e.name&&"paragraph-increase"!==e.name&&"paragraph-decrease"!==e.name||(t.disableToggleCaret=!0):Yr+0&&("font-family"===e.name||"font-size"===e.name)&&N.getElement().focus();var n=o.getCurrentPDFDoc();if(n&&"page-editor"===o.getStateHandlerManager().currentStateHandler.getStateName()){var r=n.getPageEditor();r.getActiveObject().then(function(t){or(t,r,e.name,e.value,o.viewerUI.rootComponent)})}}),o.addEventListener("PE-mouseMoveEnd",function(){var e=t.doc;e&&e.getPageEditor().getActiveObject().then(function(e){if(e){var t=e.json;t.type===le&&pn(t,o.viewerUI.rootComponent)}})}),o.addEventListener("pageeditor-notify",function(e,r){var a=t.doc;if(a){var i,c,s,u=a.getPageEditor();switch(e){case"enterEdit":r===he&&(N.getElement().focus(),Ze.isIOS&&t.tempInput&&t.tempInput.remove()),dn(u,r,o.viewerUI.rootComponent);break;case"exitEdit":kr(!1),yn(o.viewerUI.rootComponent);break;case"selectionChange":u.getActiveObject().then(function(e){Ar()((t.currActiveObject||{}).json,(e||{}).json)||(!function(e,t,r,o){n(function(){var n,a,i;return x(this,function(c){switch(c.label){case 0:switch(a={},e&&(a=e.json,n=a.type),n){case le:return[3,1];case pe:return[3,2];case de:return[3,3];case ge:return[3,4];case fe:return[3,5]}return[3,6];case 1:return pn(a,r,o),[3,8];case 2:return vn(a,r,o),[3,8];case 3:return gn(a,r,o),[3,8];case 4:return fn(a,r,o),[3,8];case 5:return hn(a,r,o),[3,8];case 6:return[4,t.getEditingObject()];case 7:return(i=c.sent())&&i.type===he?i&&i.type===he?[2]:[3,8]:(yn(r),[2]);case 8:return[2]}})})()}(e,u,o.viewerUI.rootComponent,t.disableRightPanel),t.pdfViewer.eventEmitter.emit(Rr.objectSelectionChanged,e?e.json:void 0)),t.currActiveObject=e});break;case"showPopupMenu":u.getActiveObject().then(function(e){var t=Promise.resolve(!0);e||(t=u.getEditingObject().then(function(e){return!!e})),t.then(function(e){e&&xr(r.menu,r,o).then(function(e){var t=Pr(o.viewerUI,e),n=r.position,a=n.x,i=n.y;!function(e,t,n,r){var o=document.querySelector(".fv__ui-pdfviewer").getBoundingClientRect(),a=o.x,i=o.y;e.getComponentByName(t).showAt(n+a,r+i)}(o.viewerUI.rootComponent,t,a,i)})})});break;case"caretChange":Hr&&Kr||N.getElement().focus(),Or(50,mn((c=(i=r).charProp,s=i.wordProp,{fontName:i.fontName||"Helvetica",fontSize:s.fontSize||18,rtl:c.rtl||!1,charSpace:s.charSpace||0,wordSpace:s.wordSpace||0,fontColor:s.wordColor||"#000000",horzScale:s.horzScale||100,isBold:s.isBold||!1,isItalic:s.isItalic||!1,isCross:s.isCross||!1,isUnderline:s.isUnderline||!1,scriptType:s.scriptType,alignment:c.alignment||xe,isAdding:an(),lineSpace:c.lineLeading}),o.viewerUI.rootComponent))}}}),o.addEventListener(Rr.switchStateHandler,function(){t.selectionText=null}),Vr&&!zr?o.addEventListener("refocusInput",function(){t.disableToggleCaret=!1,N.refocusInput()}):function(){});var l=this.$handler=e.$container.siblings(".fv__pdf-doc-handler-container");l.css("z-index",82);var d=l.get(0);Ze.isIOS&&this.destroyHooks.push(function(){t.tempInput&&t.tempInput.parentElement&&t.tempInput.remove()},(0,Ze.onTap)({target:d,onDoubleTap:function(e){t.triggerDoubleClick(e);var n=Kt.getPageIndex(e);-1!==n&&t.selectionText&&t.hitTest(n,it(e.srcEvent),ct(e.srcEvent))&&(t.tempInput=document.createElement("div"),t.tempInput.contentEditable=!0,t.tempInput.style="pointer-events: none;position:absolute;left:0;top:0;right:0;bottom:0;opacity: 0.001;",d.appendChild(t.tempInput),t.tempInput.focus({preventScroll:!0}))},onSingleTap:function(e){t.triggerClick(e,1).then(function(n){var r=Kt.getPageIndex(e);-1!==r&&t.doc.getPageEditor().getActiveObject().then(function(n){if(n){t.goToPage(r,it(e.srcEvent),ct(e.srcEvent));var o=n.json;o.type===le?t.selectionText={x:o.xPosition,y:o.yPosition,width:o.width,height:o.height}:t.selectionText=null}})})}}));var p,g,f=this.hammer=new jr.Manager(d,{recognizers:[[jr.Pan,{direction:jr.DIRECTION_ALL}]],time:150}),h=Tr('<div class="pe_handler_container"></div>'),v=Tr('<canvas class="pe_handler"></canvas>');h.append(v),l.before(h),l.on("mouseleave",this.mouseleave=function(e){nn.toggle(!1)}).on("mousemove",this.hover=function(e){return n(function(){var t,n;return x(this,function(r){switch(r.label){case 0:return Kt.cacheMouseCoord(e),[4,y()];case 1:return t=r.sent(),!Gr||-1!==t&&m||-1!==(n=Kt.getPageIndex(e))&&Kt.trigger("OnHitObjectTest",Kt.getArgs(n,e,0,-1),0),[2]}})})()}).on("mousedown",this.RButtionDown=function(e){if(2==e.button){var n=Kt.getPageIndex(e);-1!==n&&Kt.trigger("OnRButtonDown",Kt.getArgs(n,e,0,H(e)))}else 0===e.button&&t.hasSelection&&(t.canScroll=!1)}).on("mouseup",this.RButtionUp=function(e){if(2==e.button){var n=Kt.getPageIndex(e);-1!==n&&Kt.trigger("OnRButtonUp",Kt.getArgs(n,e,0,H(e)))}else 0===e.button&&(t.canScroll=!0)}).on("mousein",function(e){t.hasSelection&&(t.canScroll=!1)}).on("mouseout",function(e){t.canScroll=!0}).on("contextmenu",function(e){return!1}),this.destroyHooks.push(function(){t.startPromise=null,l.css("z-index",0),Tr(document).off("mouseup",t.cancelDown),l.off("mouseleave",t.mouseleave),l.off("mousemove",t.hover),l.off("mousedown",t.RButtionDown),l.off("mouseup",t.RButtionUp),window.removeEventListener("wheel",t.cancelWheel)}),f.add(new jr.Tap({event:"doubletap",taps:2})),f.add(new jr.Tap({event:"singletap"})),f.add(new jr.Press);var m=!1;try{var b=this;f.get("doubletap").recognizeWith("singletap"),f.get("singletap").requireFailure("doubletap"),f.on("hammer.input",function(e){if("mouse"==e.pointerType){var t=Kt.getPageIndex(e);if(-1!==t)return"pointerdown"==e.srcEvent.type?(Gr=!1,g=$r(),void(p=setTimeout(function(){e=e.srcEvent;var n=K(e);Kt.trigger(n,Kt.getArgs(t,e,0,H(e))).then(function(e){return g&&g.resolve(e)})},520))):void("pointerup"==e.srcEvent.type&&(Gr=!0,g&&g.promise.then(function(n){e=e.srcEvent;var r=K(e,"Up");Kt.trigger(r,Kt.getArgs(t,e,0,H(e)))})))}}),this.triggerClick=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;b.documentMouseupFinalUpdateCount=0,clearTimeout(p),b.component&&b.component.deactive();var n=Kt.getPageIndex(e);if(-1!==n){g=null,e=e.srcEvent;var r=Promise.resolve();return t&&(r=Kt.trigger("OnHitObjectTest",Kt.getArgs(n,e,0,-1),0)),(r=r.then(function(t){return Kt.trigger(K(e),Kt.getArgs(n,e,0,H(e)))})).then(function(t){return Kt.trigger(K(e,"Up"),Kt.getArgs(n,e,0,H(e)),2)})}},this.triggerDoubleClick=function(e){t.documentMouseupFinalUpdateCount=0,clearTimeout(p),g=null,t.triggerClick(e).then(function(){setTimeout(function(){var n=Kt.getPageIndex(e.srcEvent);-1!==n&&Kt.trigger("OnLButtonDoubleClick",Kt.getArgs(n,e.srcEvent,0,0)).then(function(r){"mouse"!=e.pointerType&&t.goToPage(n,it(e.srcEvent),ct(e.srcEvent)),t.actionFinalUpdate()})},100)})},f.on("singletap",function(e){"mouse"==e.pointerType||Ze.isIOS||t.triggerClick(e,1).then(function(n){var r=Kt.getPageIndex(e);-1!==r&&t.doc.getPageEditor().getActiveObject().then(function(n){n&&t.goToPage(r,it(e.srcEvent),ct(e.srcEvent))})})}),f.on("panstart",function(e){return n(function(){var t;return x(this,function(n){switch(n.label){case 0:return m=!0,clearTimeout(p),g=null,-1!==(t=Kt.getPageIndex(e.srcEvent))?[3,2]:[4,y()];case 1:t=n.sent(),n.label=2;case 2:return-1===t||("mouse"!==e.pointerType&&Kt.trigger("OnHitObjectTest",Kt.getArgs(t,e.srcEvent,0,-1),0),Kt.trigger("OnLButtonDown",Kt.getArgs(t,{clientX:e.srcEvent.clientX-e.deltaX,clientY:e.srcEvent.clientY-e.deltaY},0,H(e)))),[2]}})})()}),f.on("panmove",function(e){return n(function(){var t;return x(this,function(n){switch(n.label){case 0:return e=e.srcEvent,-1!==(t=Kt.getPageIndex(e))?[3,2]:[4,y()];case 1:t=n.sent(),n.label=2;case 2:return-1!==t&&Kt.trigger("OnMouseMove",Kt.getArgs(t,e,0,H(e)),1),[2]}})})()}),f.on("panend",function(e){return n(function(){var t,n,r;return x(this,function(o){switch(o.label){case 0:return t=this,e=e.srcEvent,n=K(e,"Up"),-1!==(r=Kt.getPageIndex(e))?[3,2]:[4,y()];case 1:r=o.sent(),o.label=2;case 2:return-1!==r&&Kt.trigger(n,Kt.getArgs(r,e,0,H(e)),2).then(function(n){return t.actionFinalUpdate(e)}).finally(function(e){m=!1}),[2]}})}).call(t)}),f.on("doubletap",function(e){Ze.isIOS||t.triggerDoubleClick(e)}),f.on("press",function(e){if("mouse"!=e.pointerType){var t=Kt.getPageIndex(e.srcEvent);-1!==t&&(clearTimeout(p),Kt.trigger("OnRButtonUp",Kt.getArgs(t,e.srcEvent,0,H(e.srcEvent))))}})}catch(e){console.error(e)}var y=function(){return n(function(){var e;return x(this,function(t){switch(t.label){case 0:return a?[4,a.getPageEditor().getActiveObject()]:[2,-1];case 1:return[2,(e=t.sent())?e.json.pageIndex:-1]}})})()}}},{key:"actionFinalUpdate",value:function(e){return this.pdfViewer.eventEmitter.emit("PE-mouseMoveEnd"),Promise.resolve()}},{key:"setEditorNotifier",value:function(){var e,t=this,r=function(e,r){return n(function(){var t,n,o,a;return x(this,function(i){switch(i.label){case 0:return this.pdfViewer.getEventEmitter().emit("pageeditor-notify",e,r),[4,this.pdfViewer.getCurrentPDFDoc().getPageEditor().getActiveObject()];case 1:return(t=i.sent())?(n=t.json,o=this.pdfViewer.viewerUI.rootComponent,o.getComponentByName("sidebar-right")&&(a=o.getComponentByName("edit-properties"),bn(n,a)),[2]):[2]}})}).call(t)},o={caretChange:function(e){r("caretChange",e)},propertyChanged:function(e){var n,r=e.type,o=e.fn,a=e.param,i={SetGradientCurrentInfo:"gradientColor",SetStrokeColor:"strokeColor",SetFillColor:"fillColor",SetLineWidth:"lineWidth",SetLineStyle:"lineStyle",SetLineCap:"lineCap",SetLineJoin:"lineJoin",SetMiterLimit:"miterLimit",SetFont:"font",SetFontSize:"fontSize",SetOpacity:"opacity",Shear:"shear",Center:"center",Align:"align",Distribute:"distribute",Rotate:"rotate",ChangeRenderingOrder:"renderOrder",SetWordSpace:"wordSpace",SetHorizontalScale:"horizontalScale"};o in i&&("SetFont"===o&&a.pop(),n=g({},i[o],a),t.pdfViewer.getEventEmitter().emit(Rr.objectPropertyChanged,{type:r,properties:n}))},contentChange:function(e){var n=t.pdfViewer.getPDFDocRender();if(n&&(n.doc.setDocModified(),t.pdfViewer.redraw(1,0),e)){var r=e.type,o=e.graphicsObject,a=e.pageIndex,i=e.stage;o&&o.type&&(0===r?t.pdfViewer.getEventEmitter().emit(Rr.objectAdded,{pageIndex:a,graphicsObject:o}):(1===r||2===r&&"end"===i)&&t.pdfViewer.getEventEmitter().emit(Rr.objectContentChanged,{pageIndex:a,graphicsObject:o}))}},toggleCaret:function(e){if(!Vr||zr||!t.disableToggleCaret)if(e)Gr=!1,N.startInput(function(e,t){return Kt.trigger("OnChar",[e]).then(function(e){var n=Kt.getPageIndex(t);-1!==n&&Kt.trigger("OnMouseMove",Kt.getArgs(n,t,0,0))})}),Yr=3,Ze.isIOS&&t.tempInput&&t.tempInput.remove();else{if(Yr=0,Ze.isIOS)return;N.endInput(),Gr=!0}},updateView:function(e){var n=e.bitmapInfo;t.displayImage(n),n.isRedraw&&(t.throttleExecutor||(t.throttleExecutor=new Dr(100)),t.throttleExecutor.exec(function(e){return t.pdfViewer.redraw(1,0)}))},moveTip:function(e){var n=t.uiContainerRect,r=n.left,o=n.top,a=devicePixelRatio||1;nn.css({left:e.x/a+15+r,top:e.y/a+20+o}),N.setPos(e.x+r-20,e.y+o+100)},setTipMsg:function(e){nn.html(e)},showTipMsg:function(t){nn.toggle(t),Vr&&!zr&&t&&(e&&clearTimeout(e),e=setTimeout(function(){nn.toggle(!1),clearTimeout(e)},500))},showPopupMenu:function(e){if(void 0!==e.activeObject.type||void 0!==e.editingObject.type)3==e.activeObject.type&&e.menu.some(function(e){if("PopupMenuItem_e_PopupMenuItemEditObject"==e.name)return e.enable=!1,!0}),r("showPopupMenu",e);else{var n=t.pdfViewer.viewerUI.rootComponent.getComponentByName("fv--page-contextmenu");if(n){var o=document.querySelector(".fv__ui-pdfviewer").getBoundingClientRect(),a=o.x,i=o.y;n.showAt(e.position.x+a,e.position.y+i)}}},selectionChange:function(){t.doc.getPageEditor().hasSelection().then(function(e){return t.hasSelection=e}),r("selectionChange")},setClipboardText:function(e){Nr(e)},enterEdit:function(e){r("enterEdit",e),t.pdfViewer.redraw(1,0)},exitEdit:function(e){t.selectionText=null,r("exitEdit",e),t.pdfViewer.redraw(1,0)},processEdit:function(e){r("processEdit",e)},cursorChange:function(e){t.$handler&&(7==e?t.$handler.addClass("fv__cursor-rotation"):(t.$handler.removeClass("fv__cursor-rotation"),t.$handler.css("cursor",Zt[e]||"")))},onAddUndo:function(e){r("onAddUndo",e)},editObject:function(){t.pdfViewer.redraw(1,0)}};this.doc.getPageEditor().setNotifier(o)}},{key:"displayImage",value:function(e){var t=this.pdfViewer.getPDFDocRender();if(e&&t.matrixes){var n=e.width,r=e.height,o=e.buffer,a=e.left,i=e.top,c=e.docRect;if(o&&t){var s=Tr('<div class="pe_handler_container"></div>'),u=Tr('<canvas class="pe_handler"></canvas>');s.append(u);var l=t.$ui[0].getBoundingClientRect(),d=this.pdfViewer.$ui[0].parentElement;d.getBoundingClientRect();s.css({left:a-l.left+"px",top:i-l.top+"px",width:d.clientWidth+"px",height:d.clientHeight+"px"}),this.$handler&&this.$handler.css({left:a-l.left+"px",top:i-l.top+"px",width:d.clientWidth+"px",height:d.clientHeight+"px",right:"unset",bottom:"unset"});var p=u[0];if(p){p.width=n,p.height=r;var g=p.getContext("2d");g.clearRect(0,0,n,r),Qr&&g.beginPath();var f=new(Uint8ClampedArray||Uint8Array)(o),h=g.createImageData(n,r);h.data.set(f);var v=0,m=0;if(c.width==l.width&&c.height==l.height){var b=devicePixelRatio||1;v=Math.floor((l.left-c.left)*b),m=Math.floor((l.top-c.top)*b)}g.putImageData(h,v,m),zr&&Yr&&(document.activeElement===document.body||document.activeElement===N.getElement()[0])&&N.getElement().focus();var y=t.$ui.find(".pe_handler_container");this.$handler&&this.$handler.before(s),y.hide().remove()}}}}},{key:"handleSystemCommand",value:function(e){var t=null,n=this.doc.getPageEditor(),r=function(e){t=n.getActiveObject().then(function(t){if(!t)return n.getEditingObject();var r;null===(r=t[e.toLowerCase()])||void 0===r||r.call(t)}).then(function(t){t&&n.createEditingObjectProxy(t)[e]()})};if(e.ctrlKey||e.metaKey){var o=document.activeElement===N.getElement()[0];switch(e.keyCode){case 65:r("SelectAll");break;case 67:r("Copy");break;case 86:return o?t:n.getEditingObject().then(function(e){e?n.createEditingObjectProxy(e).Paste():n.paste()});case 88:r("Cut");break;case 89:n.undoRedo(o,!1);break;case 90:e.shiftKey?n.undoRedo(o,!1):n.undoRedo(o,!0)}}return t}},{key:"pageHandler",value:function(e){this.pageRender=e}},{key:"destroyPageHandler",value:function(){}},{key:"destroyDocHandler",value:function(){this.docRender&&(Tr(document).off("focusin",this.focusin),this.doc.endPageEdit(),Yr=0,Kt.destroy(),this.keyMgr.destroy(),this.hammer&&this.hammer.destroy(),this.destroyHooks.forEach(function(e){return e()}),this.resetHandler(),this.docRender.$ui.find(".pe_handler_container").remove(),nn.hide(),this.component&&this.component.deactive(),this.docRender=null,this.destroyHooks=null,this.keyMgr=null,this.hasSelection=!1,this.$handler.get(0).style.cssText="",this.$handler=null,this.component=null)}},{key:"out",value:function(){this.destroyDocHandler(),this.destroyPageHandler()}},{key:"resetHandler",value:function(){}}],[{key:"getStateName",value:function(){return"page-editor"}},{key:"setMatrix",value:function(e,t,n){Ir.startPromise&&Ir.startPromise.then(function(){Rt(e,t,n)})}}]),t}(Mr.IStateHandler);const eo=Zr;var to=o(4395),no=o.n(to),ro=S.PDFViewCtrl.shared.colorConvertor,oo={0:[],1:[2,2],2:[3,3],3:[4,4],4:[4,3,2,3],5:[4,3,16,3],6:[8,4,4,4]},ao=Object.keys(oo).map(function(e){return oo[e].join()}),io={1:"GRAY",2:"RGB",3:"CMYK"},co=function(e,t){if(1==t&&e<=1||!t)return[e];var n=e;if(e<=1){var r=255*(1-e)|0;n=4278190080|r<<16|r<<8|r}var o=ro(n,io[t]);return o.splice(0,1),o},so=[{value:0,text:"fillText"},{value:1,text:"strokeText"},{value:2,text:"fillStrokeText"},{value:3,text:"invisible"}],uo=[{value:1,text:"page-editor:textAp.gray"},{value:2,text:"RGB"},{value:3,text:"CMYK"}],lo=[{value:0,text:"page-editor:textAp.noColor"}].concat(w(uo)),po=[{value:2,text:"project"},{value:1,text:"round"},{value:0,text:"butt"}],go=[{value:0,text:"miter"},{value:1,text:"round"},{value:2,text:"bevel"}],fo=S.PDFViewCtrl._internal.consts.ADD_FONT_MAP_LIST,ho=S.UIEvents,vo=S.shared.AdditionalFamilies,mo=S.PDFViewCtrl.FontUtil.FontFamilies,bo=S.PDFViewCtrl.shared.colorConvertor,yo=S.PDFViewCtrl.Deps.jQuery,Co=S.PDFViewCtrl.KeyboardUtils.isMatch,Po=S.PDFViewCtrl.KeyboardUtils.matchers.Enter,wo=function(e,t){Object.assign(e,{opacity:100*e.getPEObjectProp("getOpacity",0)|0,positionX:(e.getPEObjectProp("getXPosition",0)/72).toFixed(2)+" "+t,positionY:(e.getPEObjectProp("getYPosition",0)/72).toFixed(2)+" "+t,width:(e.getPEObjectProp("getWidth",0)/72).toFixed(2)+" "+t,height:(e.getPEObjectProp("getHeight",0)/72).toFixed(2)+" "+t,scaleX:"100%",scaleY:"100%",fontSize:e.getPEObjectProp("getFontSize").toFixed(2),horizonScale:e.getPEObjectProp("getHorizontalScale"),charSpace:e.getPEObjectProp("getCharSpace").toFixed(2),wordSpace:e.getPEObjectProp("getWordSpace").toFixed(2),strokeGray:e.getGrayColor("stroke"),fillGray:e.getGrayColor(),lineWidth:e.getPEObjectProp("getLineWidth"),miterLimit:e.getPEObjectProp("getMiterLimit")})},xo=mo.map(function(e){return b(m({},e),{family:e.value})}),So=function(e){function t(e){var n;return l(this,t),(n=s(this,t,[e])).customFamilies=[],n.fontName="",n.baseFontFamilies=xo,n.fontFamilies=w(vo),n.textModes=so,n.textMode=so[0].value,n.colorTypes=uo,n.textStrokeColor=uo[0].value,n.textFillColor=uo[0].value,n.lineColorTypes=lo,n.pathStrokeColor=lo[0].value,n.pathFillColor=uo[0].value,n.lineCaps=po,n.lineCap="",n.lineJoins=go,n.lineJoin="",n}return v(t,e),p(t,[{key:"getGrayColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"fill",t=this.obj;if(!t)return 1;var n="fill"==e?"fillColor":"strokeColor";return 1==t.json[n+"Space"]?1-(255&t.json[n])/255:1}},{key:"getPEObjectProp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.obj&&this.obj[e]?this.obj[e]():t}},{key:"setPEObjectProp",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var a;if(!isNaN(t)&&!this.syncingUI&&this.obj&&this.obj[e])return(a=this.obj)[e].apply(a,w(r))}},{key:"forceSyncUI",value:function(){var e=this;return this.pdfUI.pdfViewer.currentPDFDoc.pageEditor.getActiveObject().then(function(t){return e.syncUI(t)})}},{key:"mounted",value:function(){var e=this,t=this.pdfUI.pdfViewer,n=t.getEventEmitter();n.on("pageeditor-notify",function(t,n){if("selectionChange"===t)e.forceSyncUI().then(function(t){t&&e.getComponentByName("general-tab").active()})}),n.on("PE-mouseMoveEnd",function(){e.forceSyncUI()}),n.on(ho.objectPropertyChanged,function(){e.forceSyncUI()}),this.$width=this.getEle("width"),this.$height=this.getEle("height"),this.bindEvent(),t.currentPDFDoc&&(this.digest(),this.forceSyncUI()),this.watch("ctrl.positionX",function(t,n){t.length&&!isNaN(t)&&e.setPEObjectProp("setXPosition",t,72*t)}),this.watch("ctrl.positionY",function(t,n){t.length&&!isNaN(t)&&e.setPEObjectProp("setYPosition",t,72*t)}),this.watch("ctrl.width",this.watchCtrlWidth=function(t,n){if(t.length&&!isNaN(t)&&(e.setPEObjectProp("setWidth",t,72*t),e.$proportion&&e.$proportion.hasClass("lock"))){t=(t/e.constrain).toFixed(2);var r=e.$height,o=[t,t,{target:r[0]}];r.val(t),e.focusInput.apply(e,w(o)),e.blurInput.apply(e,w(o)),e.setPEObjectProp("setHeight",t,72*t)}}),this.watch("ctrl.height",this.watchCtrlHeight=function(t,n){if(t.length&&!isNaN(t)&&(e.setPEObjectProp("setHeight",t,72*t),e.$proportion&&e.$proportion.hasClass("lock"))){t=(e.constrain*t).toFixed(2);var r=e.$width,o=[t,t,{target:r[0]}];r.val(t),e.focusInput.apply(e,w(o)),e.blurInput.apply(e,w(o)),e.setPEObjectProp("setWidth",t,72*t)}}),this.watch("ctrl.opacity",function(t,n){t.length&&!isNaN(t)&&(t>100&&(t=100),e.setPEObjectProp("setOpacity",t,t/100))}),[["ctrl.fontSize","setFontSize"],["ctrl.horizonScale","setHorizontalScale"],["ctrl.charSpace","setCharSpace"],["ctrl.wordSpace","setWordSpace"],["ctrl.lineWidth","setLineWidth"],["ctrl.miterLimit","setMiterLimit"]].forEach(function(t){var n=P(t,2),r=n[0],o=n[1];e.watch(r,function(t,n){e.setPEObjectProp(o,t,+t)})})}},{key:"blurInput",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[2].target,o=t[0];r.type="","%"==r.postfix?(t[0]="100",this.setPEObjectProp("scale",1,o/100-1,"horizon"==r.dataset.dir)):t[0]=(+t[0]).toFixed(2),r.value=t[0]+" "+r.postfix}},{key:"fontSizeBlur",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[2].target,o=t[0];r.value=Number(o).toFixed(2)}},{key:"focusInput",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=parseFloat(t[0]),o=t[2].target;o.type="number",o.value=r,o.postfix=t[0].replace(""+r,""),"%"!==o.postfix&&(o.postfix=this.pdfUI.i18n.t("sidebar.layers.importDialog.inches"))}},{key:"getEle",value:function(e,t){var n=this.component.getComponentByName(e);return t?n:yo(n.element)}},{key:"bindEvent",value:function(){var e=this;yo(this.component.element).find(".rangeLimit").on("keyup",function(e){var t=yo(e.target),n=t.val().split(".");n[1]&&n[1].length>2&&t.val(n[0]+"."+n[1].substring(0,2))}),yo(this.component.element).find('[name="opacity"] input').on("keyup",function(e){+e.target.value>=100&&(e.target.value="100")}),this.component.getComponentByName("PE-lineStyle").on("change",function(t){e.obj.setLineStyle(oo[t]).then(function(t){return e.forceSyncUI()})}),Array.from(["PE-fontSize","PE-horizonScale","PE-charSpace","PE-wordSpace","PE-opacity"]).forEach(function(n){var r=e.component.getComponentByName(n);yo(r.element).on("input",function(e){var o=e.target.value;if(/^-?\d*(\.\d+)?$/.test(o)&&o){var a=Number(r.getAttribute("max")),i=Number(r.getAttribute("min"));o>a||o<i?t(r,n):(["PE-horizonScale","PE-opacity"].includes(n)||(o=Number(o).toFixed(2)),r.setValue(o))}else t(r,n)})});var t=function(t,n){var r=e.obj.json[n.replace("PE-","")];"PE-opacity"===n&&(r=100*Number(r)),["PE-horizonScale","PE-opacity"].includes(n)||(r=Number(r).toFixed(2)),t.setValue(r)};this.component.querySelectorAll("@slider").forEach(function(t){switch(t.attrs["@model"]){case"ctrl.opacity":t.on("change",function(t,n,r,o){o.isMoving||e.setPEObjectProp("setOpacity",r,r/100)});break;case"ctrl.fillGray":t.on("change",function(t,n,r,o){if(!o.isMoving){var a=e.obj,i=bo(["G",1-r],"int");a.setFillColor(co(1-r,!0,a.json.fillColorSpace),!0,i,!0).then(function(t){return e.forceSyncUI()})}});break;case"ctrl.strokeGray":t.on("change",function(t,n,r,o){if(!o.isMoving){var a=e.obj,i=bo(["G",1-r],"int");a.setStrokeColor(co(1-r,!0,a.json.strokeColorSpace),!0,i,!0).then(function(t){return e.forceSyncUI()})}})}}),this.pdfUI.addViewerEventListener("languageChangeFinished",function(t){wo(e,e.pdfUI.i18n.t("sidebar.layers.importDialog.inches")),e.digest()}),this.pdfUI.addUIEventListener(g({},ho.localFontLoaded,function(t){e.updateFontFamilyUI()})),this.pdfUI.getStore().then(function(t){e.component.addDestroyHook(t.subscribe(fo,function(t){e.updateCustomFamily(t)}));var n=t.getCurrentValue(fo);n&&(e.customFamilies=n.all.map(function(e){return{name:e.name,family:e.name}})),e.updateFontFamilyUI()});var n=this.$proportion,r=this.getEle("width"),o=this.getEle("height");n&&n.on("click",function(){if(n.hasClass("lock"))n.removeClass("lock"),n.addClass("unlock");else{n.removeClass("unlock"),n.addClass("lock");var t=parseFloat(r.val()),a=parseFloat(o.val());e.constrain=t/a}})}},{key:"updateCustomFamily",value:function(e){e&&e.all.length&&(this.customFamilies=e.all.map(function(e){return{name:e.name,family:e.name}}),this.updateFontFamilyUI())}},{key:"updateFontFamilyUI",value:function(){var e=this.getLocalFamilies();this.fontFamilies.length>this.baseFontFamilies+vo.length&&e.length+this.customFamilies.length?(this.baseFontFamilies=[],this.fontFamilies=[].concat(additionalFamilies,this.customFamilies,this.mergeFamilies(e)),this.digest()):this.baseFontFamilies=[].concat(xo,this.mergeFamilies(e))}},{key:"getLocalFamilies",value:function(){var e=this.pdfUI.pdfViewer._localFontDatas||[];return this._localFamilies&&this._localFamilies.length?this._localFamilies:this._localFamilies=e.map(function(e){return{family:e.family,name:e.fullName}}).filter(function(e){return!xo.find(function(t){return t.family===e.family})})}},{key:"mergeFamilies",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return e.concat(t)}).sort(function(e,t){return e.name>t.name?1:-1})}},{key:"keyBoardHandler",value:function(e,t){Co(e,Po)&&this.showCP(t)}},{key:"showCP",value:function(e){var t=this,n=this.getEle(e).find(".color-picker"),r=n.attr("disabled");if(!r||!r.length){var o=this.obj,a=-1!=e.indexOf("StrokeColor"),i=-1!=e.indexOf("path"),c=a?o.getStrokeColor():o.getFillColor(),s=a?"setStrokeColor":"setFillColor",u=a?"strokeColorSpace":"fillColorSpace",l=o.json[u];if(2==l||3==l){var d=this.pdfUI.colorSpectrum;i&&d.showTransparent(!0),d.setDefaultColor(bo(c,"#")),d.show(n,function(e){if(0===e)return o.setColorSpace(u,0),void o[s]([0],!0,4278190080,!1).then(function(e){return t.forceSyncUI()});var n=bo(e,"int");o[s](co(n,l),!0,n).then(function(e){return t.forceSyncUI()})})}}}},{key:"isCmpDisabled",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"PE-textStrokeColor",t=this.obj;if(1==t.getType()){var n=t.getTextMode();return"PE-textStrokeColor"==e?1!=n&&2!=n:0!=n&&2!=n}return!1}},{key:"syncUI",value:function(e){var t=this;if(!e)return this.obj=e,this.component.disable(),!0;this.constrain=e.json.width/e.json.height,this.component.enable(),this.syncingUI=!0;var n=!this.obj||e.getType()!==this.obj.getType();this.obj=e,wo(this,this.pdfUI.i18n.t("sidebar.layers.importDialog.inches"));var r,o="disabled",a=function(n){var r=t.getEle(n),a=n.split("-")[1],i=t.component.getComponentByName(a),c=r.find(".color-picker .color");c.css("background-color","#000");var s=n.indexOf("path"),u=s>-1?t.lineColorTypes:t.colorTypes,l=t.getEle(n,!0).querySelector("@slider");if(t.isCmpDisabled(n))r.find(".color-picker").attr(o,o),i.disable(),t[a]=1,t.selectDropdownChild(i,u.findIndex(function(e){return 1===e.value})),l.show(),l.lock();else{r.find(".color-picker").removeAttr(o),i.enable(),l.unlock();var d=-1!==n.indexOf("StrokeColor")?"strokeColor":"fillColor",p=e.json[d+"Space"];t[a]=p,t.selectDropdownChild(i,u.findIndex(function(e){return e.value===p}));var g=s&&!p?"#fff":bo(e.json[d],"#");c.css("background-color",g),1!==p?(c.removeAttr(o),l.hide()):(c.attr(o),l.setValue(t.getGrayColor(d.replace("Color",""))),l.show())}},i="page-editor:";switch(e.getType()){case 1:var c=e.getFontName();this.fontFamilies=this.fontFamilies.filter(function(e){return!e.external}),this.fontNameComp=this.getComponentByName("PE-fontName");for(var s=this.fontNameComp.children(),u=!1,l=0;l<s.length;l++)if(s[l].text&&s[l].text.replace(/\s|-/g,"").toLowerCase()===c.toLowerCase())return this.fontName=c,u=!0,this.selectDropdownChild(this.fontNameComp,l),this.syncingUI=!1,!1;u||(this.fontFamilies.push({name:c,family:c,external:!0}),this.fontName=c,this.fontNameComp.digest(),this.selectDropdownChild(this.fontNameComp,this.fontNameComp.children().length));var d=this.textModes.find(function(t){return t.value===e.getTextMode()});this.textModeComp=this.getComponentByName("PE-textMode"),d&&(this.textMode=d.value,this.selectDropdownChild(this.textModeComp,this.textModes.findIndex(function(e){return e.value===+t.textMode})));["PE-textStrokeColor","PE-textFillColor"].forEach(function(e){a(e)}),i+="TextProps";break;case 2:i+="PathProps";["PE-pathStrokeColor","PE-pathFillColor"].forEach(function(e){a(e)});var p=0==(r=e.getLineStyle()).length?0:ao.indexOf(r.join()),g=this.component.getComponentByName("PE-lineStyle");g&&g.setValue(p),this.lineCap=Number(e.getLineCap()),this.lineJoin=Number(e.getLineJoin());var f=this.component.getComponentByName("PE-lineCap");this.selectDropdownChild(f,this.lineCaps.findIndex(function(e){return e.value===t.lineCap}));var h=this.component.getComponentByName("PE-lineJoin");this.selectDropdownChild(h,this.lineJoins.findIndex(function(e){return e.value===t.lineJoin}));break;case 3:i+="ImageProps";break;case 4:i+="ShadingProps";break;case 5:i+="MixedProps"}return yo(this.component.element).find(".fv__ui-layer-header-title").text(this.pdfUI.i18n.t(i)).attr("data-i18n",i),this.component.hasFocus()?(this.syncingUI=!1,!1):(this.digest(),this.syncingUI=!1,n)}},{key:"getActiveType",value:function(){return this.obj?this.obj.getType():0}},{key:"hideDialog",value:function(){this.component.hide()}},{key:"selectFontName",value:function(e){var t=this;this.obj.setFont(e,this.obj.getFontIsBold(),this.obj.getFontIsItalic(),0).then(function(e){return t.forceSyncUI()})}},{key:"selectTextMode",value:function(e){var t=this;this.obj.setTextMode({type:"TextMode",value:e}).then(function(e){return t.forceSyncUI()})}},{key:"selectLineCap",value:function(e){var t=this;this.obj.setLineCap(+e).then(function(e){return t.forceSyncUI()})}},{key:"selectLineJoin",value:function(e){var t=this;this.obj.setLineJoin(+e).then(function(e){return t.forceSyncUI()})}},{key:"selectColor",value:function(e,t){var n=this,r=this.obj,o=+t,a=e+"Space",i=r.json[e];r.setColorSpace(a,o),r["set"+e[0].toUpperCase()+e.substring(1)](co(i,o),!0,i,o).then(function(e){return n.forceSyncUI()})}},{key:"selectDropdownChild",value:function(e,t){e.select(e.childAt(t)),e.digest()}}],[{key:"getName",value:function(){return"PropsDialogController"}}]),t}(S.Controller),Eo=o(5442),ko=o.n(Eo),Io=S.PDFViewCtrl.Events,_o=S.PDFViewCtrl.Consts.PDFDocPermission,Ao=S.vendors.jQuery,To=(S.PDFViewCtrl.shared.Store,{"home-tab":"home-toolbar-group-list","edit-tab":"edit-toolbar-group-list"}),Mo={"home-tab":"edit-object-ribbon-dropdown","edit-tab":"fv--plugin-PageEditor-edit"},Fo=function(e){function t(){return l(this,t),s(this,t,arguments)}return v(t,e),p(t,[{key:"changePermission",value:function(e){var t=this;this.getPDFUI().getPDFDocRender().then(function(t){return Promise.all([t&&t.getUserPermission().getValue(),e.readonly()])}).then(function(e){var n=P(e,2),r=n[0],o=n[1];r&t.constructor.permission&&!o?t.component.unlock&&t.component.unlock():t.component.lock&&t.component.lock()})}},{key:"mounted",value:function(){var e=this;f(r(t.prototype),"mounted",this).call(this),this.eventsHandler(),this.pdfUI.getStore().then(function(t){e.store=t}),this.addDestroyHook(this.getPDFUI().addViewerEventListener(Io.toolbarTabsClicked,function(t){t&&["edit-tab","home-tab"].includes(t.name)&&(e.changeBtnStatus(t.name),e.currentTabName=t.name)}))}},{key:"toggleLock",value:function(e){Object.values(Mo).forEach(function(t){pdfui.getComponentByName(t).then(function(t){t&&(e?t.lock():t.unlock())})})}},{key:"changeBtnStatus",value:function(e){return n(function(){var t,n,r,o,a,i,c,s,u;return x(this,function(l){switch(l.label){case 0:return t=this.getPDFUI().pdfViewer.getStateHandlerManager().currentStateHandler.getStateName(),(n=this.getPDFUI()).activeMainPageTab?(r=e||n.activeMainPageTab.name,(o=Mo[r])?(a=To[r],[4,n.getComponentByName(a)]):[2]):[2];case 1:return[4,l.sent().getComponentByName(o)];case 2:return(i=l.sent())&&(this.component=i),[4,n.getCurrentPDFDoc()];case 3:return(c=l.sent())?(s=c.getPageEditor(),(u=Number(s.filter))===Ve.None||t!==eo.getStateName()?(this.component.deactive(),"function"==typeof this.component.getDropdown&&this.component.getDropdown().children().find(function(e){return e.deactive()}),this.removeAllActive()):(this.component.active(),this.setEditType(Ve[""+u],e)),[2]):[2]}})}).call(this)}},{key:"eventsHandler",value:function(){var e,t=this,n=this.getPDFUI();e=function(e){var n,r=t.store.getCurrentValue(Je);if(e.getStateName()===eo.getStateName()&&r==Ge)t.component.active(),"function"==typeof t.component.getDropdown&&(null===(n=t.component.getDropdown())||void 0===n||n.children()[0].active());else if(t.component.deactive(),"function"==typeof t.component.getDropdown){var o,a=null===(o=t.component.getDropdown())||void 0===o?void 0:o.children();null==a||a.find(function(e){return e.deactive()})}},this.addDestroyHook(n.addViewerEventListener(Io.beforeSwitchStateHandler,e))}},{key:"removeAllActive",value:function(){Ao(this.component.element).find(".fv__ui-dropdown-list li").removeClass("active"),Ao(this.component.element).find(".fv__ui-dropdown-list i.fv__ui-property-icon-selected-color-light").removeClass("fv__ui-property-icon-selected-color-light")}},{key:"updateItemFromDropdown",value:function(){var e=this;setTimeout(function(){return n(function(){var e,t,n,r,o,a;return x(this,function(i){switch(i.label){case 0:return[4,this.getPDFUI().getCurrentPDFDoc()];case 1:return e=i.sent(),t=e.getPageEditor(),n=Number(t.filter),r=Ve[""+n],o="home-tab"===this.currentTabName?r:"fv--plugin-PageEditor-edit-".concat(r.toLowerCase()),"home-tab"!==this.currentTabName&&this.removeAllActive(),a=Ao(this.component.element).find('li[name="'.concat(o,'"]')),Ao(this.component.element).find(".fv__ui-dropdown-list li").removeClass("active"),a.addClass("active").find("i").addClass("fv__ui-property-icon-selected-color-light"),[2]}})}).call(e)})}},{key:"setEditType",value:function(e,t){var n=this,r=this.getPDFUI();r.getCurrentPDFDoc().then(function(o){o&&r.getStateHandlerManager().then(function(r){n.store.dispatch(Je,Ge),r.switchTo(eo.getStateName()),o.getPageEditor().setObjectFilter(ce[e]),n.updateItem(e,t)})})}},{key:"updateItem",value:function(e,t){return n(function(){var t,n;return x(this,function(r){switch(r.label){case 0:return(t=this.component.getComponentByName(e))?(Ao(t.element).addClass("active").siblings().removeClass("active"),[3,3]):[2];case 1:return[3,3];case 2:(n=r.sent())&&Ao(n.element).addClass("active").siblings().removeClass("active").find("i").removeClass("fv__ui-property-icon-selected-color-light"),n&&Ao(n.element).find("i").addClass("fv__ui-property-icon-selected-color-light"),r.label=3;case 3:return[2]}})}).call(this)}},{key:"handle",value:function(){if("dropdown"===this.component.parent.nodeName)return f(r(t.prototype),"handle",this).call(this);this.setEditType(this.component.getAttribute("edit-type"))}}],[{key:"getName",value:function(){return"EditObjectController"}},{key:"permission",get:function(){return _o.ModifyDocument}}]),t}(S.Controller),Oo=S.PDFViewCtrl.Events,Do=S.PDFViewCtrl.Consts.PDFDocPermission,jo=function(e){function t(){return l(this,t),s(this,t,arguments)}return v(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(r(t.prototype),"mounted",this).call(this),this.eventsHandler(),this.pdfUI.getStore().then(function(t){e.store=t})}},{key:"changePermission",value:function(e){var t=this;this.getPDFUI().getPDFDocRender().then(function(t){return Promise.all([t&&t.getUserPermission().getValue(),e.readonly()])}).then(function(e){var n=P(e,2),r=n[0],o=n[1];r&t.constructor.permission&&!o?t.component.unlock&&t.component.unlock():t.component.lock&&t.component.lock()})}},{key:"eventsHandler",value:function(){var e=this,t=this.getPDFUI();this.addDestroyHook(t.addViewerEventListener(Oo.beforeSwitchStateHandler,function(t,n){var r=e.store.getCurrentValue(Je);t.getStateName()===Ot.getStateName()&&r==Ye?e.component.active():e.component.deactive()}))}},{key:"handle",value:function(){var e=this,t=this.getPDFUI();t.getCurrentPDFDoc().then(function(n){if(n)return t.getStateHandlerManager().then(function(n){e.store.dispatch(Je,Ye);var r=Ot.getType();n.switchTo("touch-up-editor"),"touchup"!==r&&"touch-up-editor"===n.currentStateHandler.getStateName()&&e.openRightTextEditPanel(t,0),kr(!0),n.getCurrentStates().activateType(t,n.pdfViewer,"touchup",!0)})})}},{key:"openRightTextEditPanel",value:function(e,t){return n(function(){var n,r,o;return x(this,function(a){switch(a.label){case 0:return[4,e.getComponentByName("sidebar-right")];case 1:return(n=a.sent())?(n.show(),[4,e.getComponentByName("sidebar-right-tabs")]):[2];case 2:return(r=a.sent())?(r.openTab("edit-properties-panel"),r.setActivetab("edit-properties-panel"),[4,e.getComponentByName("edit-properties")]):[2];case 3:return o=a.sent(),!t&&o&&(o.setHost({},X.TouchUp),o.disable()),[2]}})})()}}],[{key:"getName",value:function(){return"AddTextController"}},{key:"permission",get:function(){return Do.ModifyDocument}}]),t}(S.Controller),Ro=S.PDFViewCtrl.Consts.PDFDocPermission,Bo=function(e){function t(){return l(this,t),s(this,t,arguments)}return v(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(r(t.prototype),"mounted",this).call(this),this.pdfUI.getStore().then(function(t){e.store=t})}},{key:"changePermission",value:function(e){var t=this;this.getPDFUI().getPDFDocRender().then(function(t){return Promise.all([t&&t.getUserPermission().getValue(),e.readonly()])}).then(function(e){var n=P(e,2),r=n[0],o=n[1];r&t.constructor.permission&&!o?t.component.unlock&&t.component.unlock():t.component.lock&&t.component.lock()})}},{key:"activeImage",value:function(e,t){Kt.trigger("OnHitObjectTest",Kt.getArgs(t,e,0,-1),0),Kt.trigger("OnLButtonDown",Kt.getArgs(t,e,0,H(e))),Kt.trigger("OnLButtonUp",Kt.getArgs(t,e,0,H(e)))}},{key:"handle",value:function(e){var t=this,n=this.getPDFUI(),r=new FileReader;r.readAsArrayBuffer(e),r.onload=function(e){try{n.getCurrentPDFDoc().then(function(r){r&&n.getStateHandlerManager().then(function(o){t.store.dispatch(Je,Ge);var a=o.currentStateHandler.getStateName()===eo.getStateName()?0:1e3;o.switchTo(eo.getStateName()),setTimeout(function(){var o=r.getPageEditor(),a=n.pdfViewer.getPDFDocRender(),i=a.getCurrentPageIndex();return r.getPageByIndex(i).then(function(r){var c=a.$ui.get(0).getBoundingClientRect().x,s=a.$ui.parents(".fv__ui-pdfviewer").get(0).getBoundingClientRect().y;return Kt.trigger("OnHitObjectTest",Kt.getArgs(i,{clientX:c,clientY:s},0,-1),0).then(function(r){return o.createImage(e.target.result).then(function(e){e?t.activeImage({clientX:c+5,clientY:s+5},i):n.alert({message:"page-editor:alert.createImageFailed",level:"warning"})})})})},a)})})}catch(e){n.alert({message:"page-editor:alert.createImageFailed",level:"warning"})}}}}],[{key:"getName",value:function(){return"AddImageAdvController"}},{key:"permission",get:function(){return Ro.ModifyDocument}}]),t}(S.Controller),Uo=o(9848),No=o.n(Uo),Lo=S.PDFViewCtrl.Consts.PDFDocPermission,Vo=(S.vendors.jQuery,function(e){function t(){return l(this,t),s(this,t,arguments)}return v(t,e),p(t,[{key:"mounted",value:function(){var e=this;f(r(t.prototype),"mounted",this).call(this),this.pdfUI.getStore().then(function(t){e.store=t})}},{key:"changePermission",value:function(e){var t=this;this.getPDFUI().getPDFDocRender().then(function(t){return Promise.all([t&&t.getUserPermission().getValue(),e.readonly()])}).then(function(e){var n=P(e,2),r=n[0],o=n[1];r&t.constructor.permission&&!o?t.component.unlock&&t.component.unlock():t.component.lock&&t.component.lock()})}},{key:"addPath",value:function(e){var t=this,n=this.getPDFUI();n.getCurrentPDFDoc().then(function(r){r&&n.getStateHandlerManager().then(function(n){t.store.dispatch(Je,Ge),n.switchTo(eo.getStateName()),r.getPageEditor().createPath(ie[e]),t.updateUI("path-".concat(e))})})}},{key:"addShading",value:function(e){var t=this,n=this.getPDFUI();n.getCurrentPDFDoc().then(function(r){r&&n.getStateHandlerManager().then(function(n){t.store.dispatch(Je,Ge),n.switchTo(eo.getStateName()),r.getPageEditor().createShading(ie[e]),t.updateUI("shading-".concat(e))})})}},{key:"updateUI",value:function(e){var t=this,n=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"active",r=e.split("-"),o=t.component.getComponentByName(r[0]).getComponentByName(r[1]);o&&o[n]&&o[n]()};this.activeType&&n(this.activeType,"deactive"),n(e),this.activeType=e}}],[{key:"getName",value:function(){return"AddShapesController"}},{key:"permission",get:function(){return Lo.ModifyDocument}}]),t}(S.Controller));const zo={annotationUpdated:"annotation-updated",annotationIDUpdated:"annotation-id-updated",annotationAppearanceUpdated:"annotation-appearance-updated",annotationReplyAdd:"annotation-reply-add",annotationReplyAdded:"annotation-reply-add",annotationReviewStateAnnotAdd:"annotation-review-state-annot-add",annotationReviewStateAnnotAdded:"annotation-review-state-annot-add",annotationMarkedStateAnnotAdd:"annotation-marked-state-annot-add",annotationMarkedStateAnnotAdded:"annotation-marked-state-annot-add",annotationStatesCleared:"annotation-states-cleared",annotationRemoved:"annotation-removed",annotationMovedPosition:"annotation-moved-position",annotationPositionMoved:"annotation-moved-position",annotationOrderChanged:"annotation-order-changed",annotationAdded:"annotation-add",annotationAdd:"annotation-add",moveAnnotsToPages:"moveAnnotsToPages",annotationImported:"annotation-imported",annotationImportedEx:"annotation-imported-ex",annotationLoaded:"annotation-loaded",actionUpdated:"action-updated",actionAdd:"action-add",actionAdded:"action-add",actionRemove:"action-remove",actionRemoved:"action-remove",layerVisibleChange:"layer-visible-change",layerVisibleChanged:"layer-visible-change",layerRemoved:"layer-removed",layerMerged:"layer-merged",layerAdded:"layer-added",bookmarkAdded:"bookmark-added",structureBookmarkAdded:"structure-bookmark-added",bookmarkUpdated:"bookmark-updated",bookmarkRemoved:"bookmark-removed",stateAnnotNameUpdated:"state-annot-name-updated",pageInfoChange:"page-info-change",pageInfoChanged:"page-info-change",pageRotationChange:"page-rotation-change",beforePageRotationChanged:"before-page-rotation-changed",pageRotationChanged:"page-rotation-change",imageAdded:"image-added",watermarksAdded:"watermarks-added",watermarkAdded:"watermark-added",watermarkRemoved:"watermark-removed",graphicsUpdated:"graphics-updated",permissionChanged:"permission-changed",docPasswordChanged:"doc-password-changed",drmEncryptSuccess:"drm-encrypt-success",drmEncryptSucceeded:"drm-encrypt-success",drmEncryptFailed:"drm-encrypt-failed",removePwdAndPerm:"remove-password-and-permission",pwdAndPermRemoved:"remove-password-and-permission",securityTypeChanged:"security-type-changed",pageMoved:"page-moved",pageRemoved:"page-removed",pageAdded:"page-added",insertPages:"import-pages",pagesInserted:"import-pages",importPages:"import-pages",documentAttachmentAdd:"document-attachment-add",docAttachmentAdded:"document-attachment-add",documentAttachmentModify:"document-attachment-modify",docAttachmentModified:"document-attachment-modify",documentAttachmentRemove:"document-attachment-remove",docAttachmentRemoved:"document-attachment-remove",applyRedaction:"apply-redaction",redactionApplied:"apply-redaction",removeReviewState:"remove-review-state",reviewStateRemoved:"remove-review-state",removeMarkedState:"remove-marked-state",markedStateRemoved:"remove-marked-state",formValueChanged:"form-value-changed",metaDataChanged:"meta-data-changed",docModified:"doc-modified",flattened:"flattened",flattenAnnotation:"flatten-annotation",headerFooterUpdated:"headerFooterUpdated",headerFooterAdded:"headerFooterAdded",calculationOrderUpdated:"calculationOrderUpdated",COChange:"COChange",COChanged:"COChange",pagesMoved:"pages-moved",pagesReverseStart:"pagesReverseStart",pagesReversed:"pagesReversed",pagesRemoved:"pages-removed",pagesRotated:"pages-rotated",pageMeasureScaleRatioChanged:" page-measure-scale-ratio-changed",obtainsPageFromEngine:"obtains-page-from-engine",pagesBoxChange:"pages-box-changed",pagesBoxChanged:"pages-box-changed",pagesLabelChange:"pages-label-change",pagesLabelChanged:"pages-label-change",pagesLabelNeedUpdate:"pages-label-need-change",pagesLabelNeedUpdated:"pages-label-need-change",pagesReplace:"pages-replace",pagesReplaced:"pages-replace",recognitionForm:"recognition-form",removeEmbeddedPageThumbnail:"remove-embedded-page-thumbnail",embeddedPageThumbnailRemoved:"remove-embedded-page-thumbnail",objectStartEdit:"object-start-edit",objectEndEdit:"object-end-edit",objectSelectionChanged:"object-selection-changed",objectAdded:"object-added",objectPropertyChanged:"object-property-changed",objectContentChanged:"object-content-changed",paragraphContentChanged:"paragraph-text-changed",paragraphTextOnActivate:"paragraph-text-on-activate",paragraphTextOnDeactivate:"paragraph-text-on-deactivate",paragraphTextEnterEdit:"paragraph-text-enter-edit",paragraphTextExitEdit:"paragraph-text-exit-edit",paragraphTextOnChar:"paragraph-text-on-char",findSuccess:"find-success",replaceSuccess:"replace-success",replaceAllSuccess:"replace-all-success",articleThreadAdded:"article-thread-added",articleThreadUpdated:"article-thread-updated",articleThreadRemoved:"article-thread-removed",articleBeadAdded:"article-bead-added",articleBeadRemoved:"article-bead-removed",articleBeadUpdated:"article-bead-updated",articleEnterReadMode:"article-enter-read-mode",articleOutReadMode:"article-out-read-mode",invalidRect:"invalidRect",xfaContentChanged:"xfa-content-changed",formReloaded:"formReloaded",formFieldImported:"form-field-imported",pagingSealUpdated:"paging-seal-updated",xfaFormImported:"xfa-form-imported",xfaFormReset:"xfa-form-reset",xfaFormRemoved:"xfa-form-removed",textSplited:"text-splited",formFieldPropertyUpdated:"form-field-property-updated",formFieldRenamed:"form-field-renamed",formFieldRemoved:"form-field-removed",formReset:"form-reset",formImported:"form-imported",tabOrderTypeUpdated:"tab-order-type-updated",pageAdditionalActionAdded:"page-additional-action-added",pageAdditionalActionUpdated:"page-additional-action-updated",pageAdditionalActionRemoved:"page-additional-action-removed",docAdditionalActionAdded:"doc-additional-action-added",docAdditionalActionUpdated:"doc-additional-action-updated",docAdditionalActionRemoved:"doc-additional-action-removed",docOpenActionUpdated:"doc-open-action-updated",docOpenActionRemoved:"doc-open-action-removed",formWidgetCreated:"form-widget-created",pdfDocCreated:"pdf-doc-created"};const Ho=Object.assign({jrLicenseSuccess:"jr-license-success",srLicenseSuccess:"sr-license-success",beforeOpenFile:"before-open-file",openingFile:"opening-file",beforeLoadPDFDoc:"before-load-pdf-document",openFileSuccess:"open-file-success",openFileFailed:"open-file-failed",willCloseDocument:"will-close-document",documentClosed:"document-closed",renderFileSuccess:"render-file-success",renderFileFailed:"render-file-error",beforeRenderPage:"before-render-page",renderPageSuccess:"render-page-success",updateZoomMode:"update-zoom-mode",beforeZoomTo:"before-zoom-to",zoomToSuccess:"zoom-to-success",zoomToFailed:"zoom-to-failed",startChangeViewMode:"start-change-view-mode",changeViewModeSuccess:"change-view-mode-success",toggleFullScreen:"toggle-full-screen",changeViewModeFailed:"change-view-mode-failed",pagesLayoutRedrawBegin:"pages-layout-redraw-begin",pageLayoutRedraw:"page-layout-redraw",pagesLayoutRedrawEnd:"pages-layout-redraw-end",copyTextSuccess:"copy-text-success",copyTextFailed:"copy-text-failed",tapPage:"tap-page",tapAnnotation:"tap-annotation",pressPage:"press-page",pressAnnotation:"press-annotation",pressText:"press-text",rightClickPage:"right-click-page",rightClickAnnotation:"right-click-annotation",doubleTapPage:"double-tap-page",doubleTapAnnotation:"double-tap-annotation",activeAnnotationBefore:"active-annotation-before",activeAnnotation:"active-annotation",activeAnnotationAfter:"active-annotation-after",panActiveAnnotation:"pan-active-annotation",doubleTapActiveAnnotation:"double-tap-active-annotation",contextMenuActiveAnnotation:"contextmenu-action-annotation",activeMultipleAnnotations:"active-multiple-annotations",unActiveAnnotation:"unactive-annotation",updateActiveAnnotation:"update-action-annotation",updateActionAnnotation:"update-action-annotation",removeActiveAnnotationBefore:"remove-action-annotation-before",removeActionAnnotationBefore:"remove-action-annotation-before",removeActiveAnnotationSuccess:"remove-action-annotation-success",removeActionAnnotationSuccess:"remove-action-annotation-success",removeActiveAnnotationFailed:"remove-action-annotation-failed",removeActionAnnotationFailed:"remove-action-annotation-failed",beforeSwitchStateHandler:"before-switch-state-handler",switchStateHandler:"switch-state-handler",deactiveStateHandler:"deactive-state-handler",afterSwitchStateHandler:"after-switch-state-handler",redactAnnotAllApplyed:"applyed-all-redaction",redactAnnotApplyed:"applyed-redaction",pageNumberChange:"page-number-change",beforeDocumentRotation:"before-document-rotation",afterDocumentRotation:"after-document-rotation",snapModeChanged:"snap-mode-changed",createPageAreaRenderer:"create-page-area-renderer",destroyPageAreaRenderer:"destroy-page-area-renderer",startUpdatePageAreaRenderer:"start-update-page-area-renderer",createSnapshotArea:"create-snapshot-area",updateSnapshotArea:"update-snapshot-area",stabilizedSnapshotArea:"stabilized-snapshot-area",switchPageAreaRenderer:"switch-page-area-renderer",fitWidthResizeViewport:"fit-width-resize-viewport",signatureFieldMouseLButtonDown:"signature-field-Lbutton-down",signatureFieldMouseLButtonUp:"signature-field-LButton-up",signatureFieldMouseEnter:"signature-field-mouse-enter",signatureFieldMouseExit:"signature-field-mouse-exit",visiblePagesRenderCompleted:"completed-render-visible-pages",marqueeZoomIn:"marquee-zoom-in",marqueeZoomOut:"marquee-zoom-out",inkSignAdded:"inkSign-added",inkSignDeleted:"inkSign-deleted",changeReadSpeed:"changeReadSpeed",changeReadVolume:"changeReadVolume",pageMoved:"page-moved",pageRemoved:"page-removed",pageAdded:"page-added",customDataAdd:"custom-data-add",customDataImported:"custom-data-imported",customDataRemoved:"custom-data-removed",customDataUpdated:"custom-data-updated",distanceAnnotCreationStart:"distance-creation-start",perimeterAnnotCreationStart:"perimeter-creation-start",updateDistanceAnnot:"update-distance-annot",distanceAnnotCreationEnd:"distance-creation-end",distanceAnnotCreationCancel:"distance-creation-cancel",drawingAnnotCreationStart:"drawing-creation-start",drawingAnnotCreationEnd:"drawing-creation-end",drawingAnnotCreationCancel:"drawing-creation-cancel",addEditImage:"add-edit-image",InkImageSelected:"ink-image-selected",checkTheSearch:"check-the-search",activeElementChanged:"active-element-changed",cancelCreatingDistance:"cancel-creating-measurement",completeCreatingDistance:"complete-creating-measurement",eraserSuccess:"eraser-success",addAnnotSuccess:"add-annot-success",cancelAddAnnot:"cancel-add-annot",globalAnnotFlagChanged:"global-annot-flag-changed",toolbarTabsClicked:"toolbar-tabs-clicked",sideBarChanged:"sidebar-changed",showWhatsNew:"show-whats-new",disableScroll:"disable-scroll",enableScroll:"enable-scroll",updateScrollableStatus:"update-scrollable-status",selectText:"select-text",changeEnableJS:"change-enable-js",toggleEngineSr2JrSuccess:"toggle-engine-sr-to-jr-success",iconInited:"iconInited",iconAdded:"iconAdded",iconRemoved:"iconRemoved",annotationPermissionChanged:"annotation-premission-changed",startScrollingPage:"pdfui-start-scrolling-page",scrollingPage:"pdfui-scrolling-page",endScrollingPage:"pdfui-end-scrolling-page",designerAssistantStatusChanged:"form-designer-assistant-status-changed",mouseEnter:"mouse-enter",mouseLeave:"mouse-leave",setFromFieldHighlight:"set_form_field_highlight",AddFontMaps:"set_font_map",thumbnailClicked:"thumbnail-clicked",layerActionActived:"layer-action-actived",redeModeShowSidebar:"rede-mode-show-sidebar",gridToggle:"grid-toggle",snapGridToggle:"snap-grid-toggle",toggleCollaborationMode:"toggleCollaborationMode",findReplaceDialogVisibleChange:"find-replace-dialog-visible-change",showAllComments:"show-all-comments",hideAllComments:"hide-all-comments",focusOnControl:"focus-on-control",blurFromObject:"blur-from-object",documentWillPrint:"document-will-print",documentDidPrint:"document-did-print",documentWillSave:"document-will-save",documentDidSave:"document-did-save",verifyDocSignatureEvent:"verify-doc-signature",verifySignatureEvent:"verify-signature",clearSignatureEvent:"clear-signature",viewSignedVersionDocEvent:"view-signed-version",showFieldPropertiesEvent:"show-field-properties",showSignatureVerifyInfoEvent:"show-signature-tusted-info",compareSignedVersionEvent:"compare-signed-version",showCompareSignedVersionResultEvent:"show-compare-signed-version-result",eSignCnShowMultiPageStamp:"eSignCnShowMultiPageStamp",eSignCNAddDateStamp:"eSignCNAddDateStamp",eSignCNCloseStamp:"eSignCNCloseStamp",eSignCNChangePagingSeal:"eSignCNChangePagingSeal",eSignCNOpenProcessSeal:"eSignCNOpenProcessSeal",eSignCnApply:"eSignCnApply",eSignCNShowOfflineResult:"eSignCNShowOfflineResult",eSignCnExit:"eSignCnExit",tapField:"tap-field",tapGraphicsObject:"tap-graphics-object",spawnPageSuccess:" spawn-page-success",progressChanged:"progress-changed",togglePageContextMenu:"toggle-page-contextmenu",beforeRenderingVisiblePages:"before-rerendering-visible-pages",afterRenderingVisiblePages:"after-rerendering-visible-pages",localFontLoaded:"local-font-loaded",willToggleAutoScroll:"will-toggle-auto-scroll",showLoading:"show-loading",changeLanguageSuccess:"change-language-success"},zo);var Ko=function(){function e(t,n){l(this,e),g(this,"internalGraphicObject",void 0),g(this,"pdfViewer",void 0),this.internalGraphicObject=t,this.pdfViewer=n}return p(e,[{key:"setProperties",value:function(e){return n(function(){var t,n,r,o,a,i,c,s;return x(this,function(l){switch(l.label){case 0:if(!(t=this.pdfViewer.getCurrentPDFDoc()))throw new Error("Unable to apply property modifications. The document is either not open or has been closed. Please ensure the document is open and accessible for editing.");if("page-editor"!==this.pdfViewer.getStateHandlerManager().currentStateHandler.getStateName())throw new Error("Unable to apply property modifications. Current state handler is not page-editor!");for(a in n=t.getPageEditor(),r=this.resolvePropertiesKeyName(e),o=[],r)o.push(a);i=0,l.label=1;case 1:if(!(i<o.length))return[3,4];if(c=o[i],s=r[c],"shading-style-color"===c&&!u(s,Array))throw new Error("The value of the shading style color shoud be an array!");return[4,or(this.internalGraphicObject,n,c,s,this.pdfViewer.viewerUI.rootComponent,!0)];case 2:l.sent(),l.label=3;case 3:return i++,[3,1];case 4:return[2]}})}).call(this)}},{key:"resolvePropertiesKeyName",value:function(e){var t={};for(var n in["arrangeAlignment","arrangePagecenter","arrangeAlignment","arrangeDistribute","arrangeRotate","arrangeFlip","arrangeZorder"].forEach(function(n){if(n in e){var r=e[n],o=n.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})+"-"+r;t[o]=!0,delete e[n]}}),e){var r=n.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});t[r]=e[n]}return t}}]),e}(),$o=function(e){function t(){return l(this,t),s(this,t,arguments)}return v(t,e),p(t,[{key:"type",get:function(){return Ve[Ve.Text]}}]),t}(Ko),Wo=function(e){function t(){return l(this,t),s(this,t,arguments)}return v(t,e),p(t,[{key:"type",get:function(){return Ve[Ve.Path]}},{key:"resolvePropertiesKeyName",value:function(e){var n=f(r(t.prototype),"resolvePropertiesKeyName",this).call(this,e),o=e.shapeBorderColor,a=e.shapeBackgroundColor;return(o||a)&&(n["shape-style-color"]={borderColor:o,backgroundColor:a}),delete n["shape-border-color"],delete n["shape-background-color"],n}}]),t}(Ko),Go=function(e){function t(){return l(this,t),s(this,t,arguments)}return v(t,e),p(t,[{key:"type",get:function(){return Ve[Ve.Shading]}}]),t}(Ko),Yo=function(e){function t(){return l(this,t),s(this,t,arguments)}return v(t,e),p(t,[{key:"type",get:function(){return Ve[Ve.All]}}]),t}(Ko),Jo=function(e){return e.VERTICALLY="vertically",e.HORIZONTALLY="horizontally",e.BOTH="both",e}({}),qo=function(e){return e.VERTICALLY="vertically",e.HORIZONTALLY="horizontally",e.LEFT="left",e.RIGHT="right",e.TOP="top",e.BOTTOM="bottom",e}({}),Xo=function(e){return e.VERTICALLY="vertically",e.HORIZONTALLY="horizontally",e}({}),Qo=function(e){return e.CLOCKWISE="clockwise",e.COUNTERCLOCKWISE="counter-clockwise",e}({}),Zo=function(e){return e.VERTICALLY="vertically",e.HORIZONTALLY="horizontally",e}({}),ea=function(e){return e.TO_BACK="to-back",e.TO_FRONT="to-front",e}({});function ta(e){return function(t){if(t)return"number"===e.element.getAttribute("type")?t.replace(/\D+$/,""):t}}var na=S.PDFViewCtrl,ra=na.ViewerEvents,oa=S.vendors.jQuery,aa=S.UIConsts.COMPONENT_EVENTS,ia=function(e){function t(){return l(this,t),s(this,t,arguments)}return v(t,e),p(t,[{key:"changePermission",value:function(e){var t=this;this.getPDFUI().getPDFDocRender().then(function(t){return Promise.all([t&&t.getUserPermission().getValue(),e.readonly()])}).then(function(e){var n=P(e,2),r=n[0],o=n[1];r&t.constructor.permission&&!o?t.component.unlock&&t.component.unlock():t.component.lock&&t.component.lock()})}},{key:"stateIn",value:function(){var e=this.component.parent;e.is("dropdown")&&e.selectable&&(e.select(this.component),e.separate&&e.iconElement.setAttribute("aria-pressed","true"),e.addCSSClass("selected"))}},{key:"stateOut",value:function(){var e=this.component.parent;e.is("dropdown")&&e.selectable&&(e.separate&&e.iconElement.setAttribute("aria-pressed","false"),e.removeCSSClass("selected"))}},{key:"changeBtnState",value:function(){"touch-up-editor"===this.getPDFUI().pdfViewer.getStateHandlerManager().currentStateHandler.getStateName()?(this.component.active(),this.stateIn()):(this.component.deactive(),this.stateOut())}},{key:"mounted",value:function(){var e=this;f(r(t.prototype),"mounted",this).call(this),this.changeBtnState(),this.addDestroyHook(this.getPDFUI().addViewerEventListener(Ho.toolbarTabsClicked,function(t){t&&["edit-tab","home-tab"].includes(t.name)&&e.changeBtnState()}))}},{key:"handle",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,o=this.getPDFUI();o.getStateHandlerManager().then(function(e){if(e.getCurrentStates()===Ot){var a=Ot.getType();Ut(o),"joinSplit"===a?Ot.joinSplit2EditText(o,e.pdfViewer):Ot.activateType(o,e.pdfViewer,"touchup",!1)}else{var i,c,s;if(n)r.selectedPages.length>=1&&(c=r.selectedPages[0].pageRender,s=r.selectedPages[0].rectArray),(i=[c.index]).push([[s[0].start,s[0].end]]);Ot.activateType(o,e.pdfViewer,"touchup",!1,i)}e.switchTo(Ot.getStateName()),t.changeBtnState()}),n||(this.openRightTextEditPanel(o,n),o.getPDFDocRender().then(function(e){e.$ui.find(".fv__mark-selection-blank").remove()}))}},{key:"openRightTextEditPanel",value:function(e,t){return n(function(){var n,r,o,a;return x(this,function(i){switch(i.label){case 0:return[4,e.getComponentByName("sidebar-right")];case 1:return(n=i.sent())?[3,3]:[4,e.getComponentByName("edit-properties")];case 2:return(r=i.sent())?(!t&&r&&(r.setHost({},X.TouchUp),r.disable()),[2]):[2];case 3:return n.showRightFormatPanel(X.TouchUp),[4,e.getComponentByName("sidebar-right-tabs")];case 4:return(o=i.sent())?(o.openTab("edit-properties-panel"),o.setActivetab("edit-properties-panel"),[4,e.getComponentByName("edit-properties")]):[2];case 5:return a=i.sent(),!t&&a&&(a.setHost({},X.TouchUp),a.disable()),[2]}})})()}},{key:"postlink",value:function(){var e=this;this.addDestroyHook(this.getPDFUI().addViewerEventListener("switch-state-handler",function(t,n,r){if(Ut(e.getPDFUI()),["page-editor","touch-up-editor"].indexOf(t.getStateName())>-1){if(r&&r.disableRightPanel)return;if("findReplace"===Ot.getType())return;e.openRightTextEditPanel(e.getPDFUI(),0)}}))}}],[{key:"getName",value:function(){return"EditTextController"}},{key:"permission",get:function(){return S.PDFViewCtrl.Consts.PDFDocPermission.ModifyDocument}}]),t}(S.Controller),ca=function(e){function t(){return l(this,t),s(this,t,arguments)}return v(t,e),p(t,[{key:"changePermission",value:function(e){var t=this;this.getPDFUI().getPDFDocRender().then(function(t){return Promise.all([t&&t.getUserPermission().getValue(),e.readonly()])}).then(function(e){var n=P(e,2),r=n[0],o=n[1];r&t.constructor.permission&&!o?t.component.unlock&&t.component.unlock():t.component.lock&&t.component.lock()})}},{key:"handle",value:function(){var e=this.getPDFUI();e.getStateHandlerManager().then(function(t){t.getCurrentStates()===Ot?("touchup"===Ot.getType()&&Kt.trigger("OnDeactivate"),Ut(e),Ot.activateType(e,t.pdfViewer,"joinSplit")):Ot.activateType(e,t.pdfViewer,"joinSplit"),t.switchTo(Ot.getStateName())})}}],[{key:"getName",value:function(){return"JoinSplitController"}},{key:"permission",get:function(){return S.PDFViewCtrl.Consts.PDFDocPermission.ModifyDocument}}]),t}(S.Controller),sa=function(e){function t(){return l(this,t),s(this,t,arguments)}return v(t,e),p(t,[{key:"destroy",value:function(){Ot.prototype.getPDFUI=function(){}}},{key:"init",value:function(e){var t=this;this.pdfUI=e,Ot.prototype.getPDFUI=function(){return e},e.getPDFViewer().then(function(n){t.viewer=n,n.getStateHandlerManager().register(eo),n.getStateHandlerManager().register(Ot),n.getScrollWrap().addScrollEventListener(function(){return t.updatePageMatrix(100)});var r=at()(function(){switch(e.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName()){case"page-editor":case"touch-up-editor":break;default:return}t.updatePageMatrix()},100);e.getComponentByName("sidebar").then(function(e){e&&(e.on(aa.RESIZE,r),e.on(aa.HIDDEN,r))})}),e.getRootComponent().then(function(t){return n(function(){var n,r;return x(this,function(o){switch(o.label){case 0:return[4,t.waitForComponentLifecycle("edit-properties","mounted")];case 1:return n=P.apply(void 0,[o.sent(),1]),(r=n[0])?(oa(r.element).on("pointerup",".icon-btn[name]",function(){switch(e.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName()){case"page-editor":case"touch-up-editor":break;default:return}N.getElement().focus()}),[2]):[2]}})})()});var r,o=!0;e.addViewerEventListener((g(r={},ra.zoomToSuccess,function(){return t.updatePageMatrix(100)}),g(r,ra.changeViewModeSuccess,function(){return t.updatePageMatrix(100)}),g(r,na.Events.openFileSuccess,function(e){nn.hide(),t.textToolStyle&&t.setTextToolStyle(t.textToolStyle),o=!0}),g(r,ra.switchStateHandler,function(t,n){["touch-up-editor","page-editor"].includes(t.getStateName())||e.getComponentByName("edit-properties").then(function(t){t&&[X.TextObject,X.PathObject,X.ImageObject,X.ShadingObject,X.FormXObject,X.TouchUp].indexOf(t.hostType)>-1&&e.getComponentByName("sidebar-right-tabs").then(function(e){e&&e.openTabs.length>1&&e.closeTab("edit-properties-panel")})})}),g(r,"pageeditor-started",function(){t.editingObjectToolStyle&&o&&t.setEditingObjectToolStyle(t.editingObjectToolStyle),o=!1}),g(r,"switch-touchup",function(t){var n=t.type,r=void 0===n?"touchup":n,o=e.pdfViewer.getStateHandlerManager();Ot.setType(r),o.getCurrentStates()!==Ot&&(Ot.activateType(e,o.pdfViewer,r,!1),o.switchTo(Ot.getStateName()))}),g(r,ra.pageAdded,function(){t.reInitPageEditor()}),g(r,ra.pageMoved,function(){t.reInitPageEditor()}),g(r,ra.pagesMoved,function(){t.reInitPageEditor()}),g(r,ra.pageRemoved,function(){t.reInitPageEditor()}),g(r,ra.pagesRemoved,function(){t.reInitPageEditor()}),g(r,ra.insertPages,function(){t.reInitPageEditor()}),g(r,ra.importPages,function(){t.reInitPageEditor()}),g(r,ra.beforePageRotationChanged,function(t,n,r){return e.getPDFDocRender().then(function(e){e.doc.getTouchup().handleEvent("OnAfterRotatePage",t.getIndex(),n)})}),g(r,Ho.textSplited,function(){t.deactivate()}),r)),e.registerDialog("pageEditorProps",function(){if(!t.dialog)return e.getComponentByName("template-container").then(function(e){var n=t.dialog=e.append(no()({AdditionalFamilies:S.shared.AdditionalFamilies,BaseFontFamilies:S.shared.BaseFontFamilies}),[{target:"PE-lineStyle",config:{selectorClass:"fv__ui-border-style-selector",options:[{value:0,class:"fv__ui-line-style-0",lable:!1},{value:1,class:"fv__ui-line-style-1",lable:!1},{value:2,class:"fv__ui-line-style-2",lable:!1},{value:3,class:"fv__ui-line-style-3",lable:!1},{value:4,class:"fv__ui-line-style-4",lable:!1},{value:5,class:"fv__ui-line-style-5",lable:!1},{value:6,class:"fv__ui-line-style-6",lable:!1}]}}]);n.open(e.getRoot()),n.show()});t.dialog.show()})}},{key:"reInitPageEditor",value:function(){this.pdfUI.getCurrentPDFDoc().then(function(e){e.api.reInitPageEditor(e.id)})}},{key:"updatePageMatrix",value:function(e){var t=this.viewer,n=t.getStateHandlerManager().currentStateHandler;switch(n.getStateName()){case"page-editor":n.setMatrix(t,0,e);break;case"touch-up-editor":Rt(t,1,e)}}},{key:"beforeMounted",value:function(e){}},{key:"fragments",value:function(){return[]}},{key:"receiveAction",value:function(e,t){var n=this[e];if("function"==typeof n)return n.apply(this,t)}},{key:"getActiveObject",value:function(){var e=this.pdfUI.pdfViewer,t=e.getCurrentPDFDoc();return t?"page-editor"!==e.getStateHandlerManager().currentStateHandler.getStateName()?Promise.resolve():t.getPageEditor().getActiveObject().then(function(t){return t&&function(e,t){switch(e.json.type){case 1:return new $o(e,t);case 2:return new Wo(e,t);case 4:return new Go(e,t);default:return new Yo(e,t)}}(t,e)}):Promise.resolve()}},{key:"onClick",value:function(e,t){var n,r=this,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=this.pdfUI.pdfViewer;if(!a.getCurrentPDFDoc())return Promise.resolve();if("page-editor"!==a.getStateHandlerManager().currentStateHandler.getStateName())return Promise.resolve();if(o){var i=a.getPDFPageRender(e);if(!i)return Promise.resolve();n=i.transformPoint({point:t,srcType:"pdf",destType:"PDFViewerPort"})}else n=Promise.resolve(t);return n.then(function(t){var n=devicePixelRatio||1,o=[{type:"EditorPage",value:e},{type:"PointF",value:[t.x*n,t.y*n]}];return a.eventEmitter.emit("PageEditor_onStartClick"),Kt.trigger("OnHitObjectTest",w(o)).then(function(){return Kt.trigger("OnLButtonDown",w(o).concat([0])).then(function(){return Kt.trigger("OnLButtonUp",w(o).concat([0])).then(function(){r.pdfUI.getComponentByName("sidebar-right").then(function(e){e&&e.hide()})})})}).finally(function(){a.eventEmitter.emit("PageEditor_onEndClick")})})}},{key:"activate",value:function(e){var t=this;return Promise.all([this.pdfUI.getCurrentPDFDoc(),this.pdfUI.getStore()]).then(function(n){var r=P(n,2),o=r[0],a=r[1];if(o)return t.pdfUI.getStateHandlerManager().then(function(n){return a.dispatch(Je,Ge),n.switchTo(eo.getStateName(),{disableRightPanel:!0}),o.getPageEditor().setObjectFilter(ce[e]).then(function(){return t.pdfUI.getComponentByName("sidebar-right").then(function(e){e&&e.hide()}),t.pdfUI.getComponentByName("edit-object-ribbon-dropdown").then(function(t){if(t){var n=t.getComponentByName(e);n&&oa(n.element).addClass("active").siblings().removeClass("active")}})})})})}},{key:"deactivate",value:function(){var e=this;return this.pdfUI.getStateHandlerManager().then(function(t){return t.switchTo("hand"),e.pdfUI.getComponentByName("edit-object-ribbon-dropdown").then(function(e){if(e){var t=e.getComponentByName("All");t&&oa(t.element).removeClass("active").siblings().removeClass("active")}})})}},{key:"activateTouchup",value:function(){var e=this;return this.pdfUI.getPDFDocRender().then(function(t){if(t.getUserPermission().getValue()&e.constructor.permission){if(!t.doc)return;return e.pdfUI.getStateHandlerManager().then(function(t){var n=t.getCurrentStates(),r=Promise.resolve();return n===Ot&&"touchup"===n.getType()||(t.switchTo(Ot.getStateName()),r=Ot.activateType(e.pdfUI,t.pdfViewer,"touchup",!1)),r.then(function(t){return e.pdfUI.getComponentByName("edit-text").then(function(t){t&&(e.pdfUI.getComponentByName("sidebar-right").then(function(e){e&&e.hide()}),t.controller.changeBtnState())})})})}throw new Error("No permission to edit document.")})}},{key:"deactivateTouchup",value:function(){return this.pdfUI.getStateHandlerManager().then(function(e){e.switchTo("hand")})}},{key:"changeTextColorByRect",value:function(e){var t=this;return this.pdfUI.getPDFDocRender().then(function(n){if(n.getUserPermission().getValue()&t.constructor.permission){var r=t.pdfUI.pdfViewer,o=r.getCurrentPDFDoc();if(!o)return Promise.resolve();var a=r.getStateHandlerManager().getCurrentStates();if(a!==Ot||"touchup"!==a.getType())return Promise.resolve();var i=o.getTouchup(),c=e.pageIndex,s=e.rect,u=e.color,l=o.getPageCount();if(c<0||c>=l)throw new Error("Invalid page index.");if(!s||Object.values(s).some(function(e){return void 0===e})||s.left===s.right&&s.top===s.bottom)throw new Error("Invalid rect.");if(!u)throw new Error("Invalid color.");return i.handleEvent("ChangeTextColorByRect",{page:c,rect:s,textColor:u}).catch(function(e){throw new Error(e.message)})}throw new Error("No permission to edit document.")})}},{key:"loadStyleConfigFile",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"touchup";return n(function(){var t,n,r,o,a;return x(this,function(i){switch(i.label){case 0:return t=this.pdfUI.pdfViewer,(n=t.getCurrentPDFDoc())?this.advEditorConfigFilebuffer?[3,3]:(r=na.shared.resolvePath(t.libPath,"assets/advEditor","advedit-interaction-config-default.pdf"),[4,fetch(r)]):[2,Promise.resolve()];case 1:return o=i.sent(),a=this,[4,o.blob()];case 2:a.advEditorConfigFilebuffer=i.sent(),i.label=3;case 3:return[2,n.loadAdvEditorConfigFile(this.advEditorConfigFilebuffer,e)]}})}).call(this)}},{key:"setTextToolStyle",value:function(){return n(function(){var e,t,n,r=arguments;return x(this,function(o){switch(o.label){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:{},t=this.pdfUI.pdfViewer,(n=t.getCurrentPDFDoc())?[4,this.loadStyleConfigFile("touchup")]:[2,Promise.resolve()];case 1:if(!o.sent())throw new Error("Failed to load the text tool style configuration file.");return e.cursor&&(e.editTextCaret=e.cursor),this.textToolStyle=e,[2,n.setAdvEditorTextToolStyle(e)]}})}).apply(this,arguments)}},{key:"setEditingObjectToolStyle",value:function(){return n(function(){var e,t,n,r=arguments;return x(this,function(o){switch(o.label){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:{},t=this.pdfUI.pdfViewer,(n=t.getCurrentPDFDoc())?[4,this.loadStyleConfigFile("pageEditor")]:[2,Promise.resolve()];case 1:if(!o.sent())throw new Error("Please activate the pageEditor first.");return e.addShapeBox&&(e.editShapeBox=e.addShapeBox),this.editingObjectToolStyle=e,[2,n.setAdvEditorEditingObjectToolStyle(e)]}})}).apply(this,arguments)}}],[{key:"getName",value:function(){return"page-editor"}},{key:"getLoader",value:function(){return k()}},{key:"permission",get:function(){return S.PDFViewCtrl.Consts.PDFDocPermission.ModifyDocument}},{key:"initOnLoad",value:function(){var e=S.modular.module("page-editor",[]);e.registerController(ia),e.registerController(ca),e.registerPreConfiguredComponent("edit-text",{template:'<ribbon-button name="edit-text" icon-class="fv__icon-edit-touch-up" @tooltip text="page-editor:buttons.edit-text"></ribbon-button>',config:[{target:"edit-text",tooltip:{title:"page-editor:buttons.edit-text"},callback:ia}]}),e.registerPreConfiguredComponent("join-split",{template:'<ribbon-button name="join-split" icon-class="fv__icon-edit-join-split" @tooltip text="page-editor:buttons.join-split"></ribbon-button>',config:[{target:"join-split",tooltip:{title:"page-editor:buttons.join-split"},callback:ca}]}),e.registerPreConfiguredComponent("join",{template:'<ribbon-button name="join-split-join" class="fv__ui-toolbar-show-text-button" icon-class="fv__icon-join-split-join" @tooltip text="page-editor:buttons.join"></ribbon-button>',config:[{target:"join-split-join",tooltip:{title:"page-editor:buttons.join"},callback:function(e){function t(){return l(this,t),s(this,t,arguments)}return v(t,e),p(t,[{key:"handle",value:function(){this.getPDFUI().getCurrentPDFDoc().then(function(e){e.getTouchup().handleEvent("JoinBoxes")})}}],[{key:"getName",value:function(){return"join"}}]),t}(S.Controller)}]}),e.registerPreConfiguredComponent("split",{template:'<ribbon-button name="join-split-split" class="fv__ui-toolbar-show-text-button" icon-class="fv__icon-join-split-split" @tooltip text="page-editor:buttons.split"></ribbon-button>',config:[{target:"join-split-split",tooltip:{title:"page-editor:buttons.split"},callback:function(e){function t(){return l(this,t),s(this,t,arguments)}return v(t,e),p(t,[{key:"handle",value:function(){this.getPDFUI().getCurrentPDFDoc().then(function(e){e.getTouchup().handleEvent("SplitBoxes")})}}],[{key:"getName",value:function(){return"split"}}]),t}(S.Controller)}]}),e.registerPreConfiguredComponent("link",{template:'<ribbon-button name="join-split-link" class="fv__ui-toolbar-show-text-button" icon-class="fv__icon-join-split-link" @tooltip text="page-editor:buttons.link"></ribbon-button>',config:[{target:"join-split-link",tooltip:{title:"page-editor:buttons.link"},callback:function(e){function t(){return l(this,t),s(this,t,arguments)}return v(t,e),p(t,[{key:"handle",value:function(){this.getPDFUI().getCurrentPDFDoc().then(function(e){e.getTouchup().handleEvent("LinkBoxes")})}}],[{key:"getName",value:function(){return"link"}}]),t}(S.Controller)}]}),e.registerPreConfiguredComponent("unlink",{template:'<ribbon-button name="join-split-unlink" class="fv__ui-toolbar-show-text-button" icon-class="fv__icon-join-split-unlink" @tooltip text="page-editor:buttons.unlink"></ribbon-button>',config:[{target:"join-split-unlink",tooltip:{title:"page-editor:buttons.unlink"},callback:function(e){function t(){return l(this,t),s(this,t,arguments)}return v(t,e),p(t,[{key:"handle",value:function(){this.getPDFUI().getCurrentPDFDoc().then(function(e){e.getTouchup().handleEvent("UnlinkBoxes")})}}],[{key:"getName",value:function(){return"unlink"}}]),t}(S.Controller)}]}),e.registerPreConfiguredComponent("select-none",{template:'<ribbon-button name="join-split-select-none" class="fv__ui-toolbar-show-text-button" icon-class="fv__icon-join-split-select-none" @tooltip text="page-editor:buttons.select-none"></ribbon-button>',config:[{target:"join-split-select-none",tooltip:{title:"page-editor:buttons.select-none"},callback:function(e){function t(){return l(this,t),s(this,t,arguments)}return v(t,e),p(t,[{key:"handle",value:function(){this.getPDFUI().getCurrentPDFDoc().then(function(e){e.getTouchup().handleEvent("SelectNone")})}}],[{key:"getName",value:function(){return"select-none"}}]),t}(S.Controller)}]}),e.registerPreConfiguredComponent("close",{template:'<ribbon-button name="join-split-close" class="fv__ui-toolbar-show-text-button" icon-class="fv__icon-join-split-close" @tooltip text="page-editor:buttons.close"></ribbon-button>',config:[{target:"join-split-close",tooltip:{title:"page-editor:buttons.close"},callback:function(e){function t(){return l(this,t),s(this,t,arguments)}return v(t,e),p(t,[{key:"handle",value:function(){var e=this;this.getPDFUI().getStateHandlerManager().then(function(t){t.switchTo("hand"),e.getPDFUI().getComponentByName("edit-tab").then(function(e){e.active()})})}}],[{key:"getName",value:function(){return"close"}}]),t}(S.Controller)}]}),e.registerController(So),e.registerController(Fo),e.registerPreConfiguredComponent("edit-object-ribbon-dropdown",{template:ko()()}),e.registerController(jo),e.registerPreConfiguredComponent("add-text-button",{template:'<ribbon-button name="fv--plugin-PageEditor-add-text" icon-class="fv__icon-menu-add-text" @controller="page-editor:AddTextController" @tooltip tooltip-title="page-editor:addText.title">page-editor:addText.title</ribbon-button>'}),e.registerController(Bo),e.registerPreConfiguredComponent("add-image-button",{template:'<ribbon-button name="fv--plugin-PageEditor-add-image" icon-class="fv__icon-menu-add-image" @controller="page-editor:AddImageAdvController" @tooltip tooltip-title="page-editor:addImage.title" class="fx-ribbon-hidden-dropdown" @var.self="$component" not-dropdown="true">\n                <dropdown @on.selected="self.select($args[0])" selected="0">\n                    <file-selector ribbon-icon="fx-icon-ribbon_edit_add_images-32" icon-class="fv__icon-edit-add-image" accept=".bmp,.jpg,.jpeg,.jpf,.jpx,.jp2,.j2k,.jpc,.j2c,.png,.tiff,.tif,.exif,.gif" text="page-editor:addImage.title"></file-selector>\n                </dropdown>\n            </ribbon-button>'}),e.registerController(Vo),e.registerPreConfiguredComponent("add-shapes-ribbon-dropdown",{template:No()()}),e.getRegistry().registerPipe("format_number",ta)}}]),t}(S.UIXAddon);Object.assign(S.addons,{},{page_editor:b(m({},e),{AddImageAdvController:Bo,AddShapesController:Vo,AddTextController:jo,EditObjectController:Fo,EditTextController:ia,JoinSplitController:ca})})})(),a=a.default})());