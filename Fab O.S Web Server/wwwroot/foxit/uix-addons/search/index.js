!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("UIExtension")):"function"==typeof define&&define.amd?define(["UIExtension"],t):"object"==typeof exports?exports.SearchAddon=t(require("UIExtension")):e.SearchAddon=t(e.UIExtension)}(self,__WEBPACK_EXTERNAL_MODULE__4616__=>(()=>{var __webpack_modules__={681:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<layer modal class="fv__ui-create-redaction-profile-dialog center" append-to="body" @var.self="$component">\n<layer-header title="search:searchPanel.dialog.createProfile"></layer-header>\n<div class="mb_8" data-i18n="search:searchPanel.text.profileName"></div>\n<input @model="self.state.manageRedactionProfile.profileName" @on.change="self.handleChangeProfileName.apply(self,$args)" class="fv__ui-search-profile-input mb_12"  />\n<div class="mb_8" data-i18n="search:searchPanel.text.newWord"></div>\n<input @model="self.state.manageRedactionProfile.newWord" @on.change="self.handleChangeNewWord.apply(self,$args)" class="fv__ui-search-profile-input mb_12" />\n<div class="mb_8" data-i18n="search:searchPanel.text.overlayText"></div>\n<div class="d_f mb_12">\n<input @model="self.state.manageRedactionProfile.overlay" @on.change="self.handleChangeOverlay.apply(self, $args)" class="w_70z fv__ui-search-profile-input" />\n<div class="w_30z d_f jc_fe">\n<xbutton @on.click="self.handleAdd()"\n @disable="!self.state.manageRedactionProfile.newWord"\n class="fv__ui-dialog-cancel-button">search:searchPanel.button.add</xbutton>\n</div>\n</div>\n<div class="mb_8" data-i18n="search:searchPanel.text.wordOverlayList"></div>\n<div class="fv__ui-search-table-wrapper">\n<table class="w_100z h_500 fv__ui-search-overlay-table mb_8">\n<thead>\n<tr>\n<th data-i18n="search:searchPanel.table.wordPhrase"></th>\n<th data-i18n="search:searchPanel.table.overlayText"></th>\n</tr>\n</thead>\n<tbody>\n<tr class="fv__ui-search-word-overlay-tr"\n@foreach="item in self.state.manageRedactionProfile.wordOverlayList"\n@set.attr.data-word="item.word"\n@on.native.click="self.handleClickWord($event, item.word)">\n<td>@{item.word}</td>\n<td>@{item.overlay}</td>\n</tr>\n<tr @foreach="item in self.state.manageRedactionProfile.emptyList">\n<td>@{item.word}</td>\n<td>@{item.overlay}</td>\n</tr>\n</tbody>\n</table>\n</div>\n<div class="mb_8 d_f jc_sb">\n<div class="w_70z fv__ui-search-options">\n<checkbox @model="self.wholeWordsOnly" \ntext="search:searchPanel.options.wholeWordsOnly"></checkbox>\n<checkbox @model="self.caseSensitive" \ntext="search:searchPanel.options.caseSensitive"></checkbox>\n<checkbox @model="self.highlight" \ntext="search:searchPanel.options.highlight"></checkbox>\n<checkbox @model="self.autoSize" \ntext="search:searchPanel.options.autoSize"></checkbox>\n</div>\n<div class="w_30z d_f jc_fe">\n<xbutton @on.click="self.handleRemove()" \n @disable="!self.state.manageRedactionProfile.selectedWords.length" \n class="fv__ui-dialog-cancel-button">search:searchPanel.button.remove</xbutton>\n</div>\n</div>\n<div class="footer d_f jc_fe">\n<xbutton @on.click="self.handleSaveAndSearch()"\n @disable="!self.state.manageRedactionProfile.profileName || !self.state.manageRedactionProfile.wordOverlayList.length > 0"\n class="fv__ui-dialog-button fv__ui-dialog-ok-button">search:searchPanel.button.saveAndSearch</xbutton>\n<xbutton @on.click="self.handleSave()" @disable="!self.state.manageRedactionProfile.profileName" class="fv__ui-dialog-button fv__ui-dialog-ok-button">search:searchPanel.button.save</xbutton>\n<xbutton @on.click="self.handleCancel()" class="fv__ui-dialog-button fv__ui-dialog-cancel-button">search:searchPanel.button.cancel</xbutton>\n</div>\n\n</layer>'}},1334:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<layer modal class="fv__ui-manage-redaction-profile-dialog center" append-to="body" @var.self="$component">\n<layer-header title="search:searchPanel.dialog.manageProfile"></layer-header>\n<div class="mb_8" data-i18n="search:searchPanel.text.profileList"></div>\n<div class="fv__ui-search-profile-content">\n<div class="fv__ui-search-profile-left-col">\n<div class="fv__ui-search-profile-container">\n<div data-i18n="search:searchPanel.text.profileHeader"></div>\n<select class="fv__ui-search-profile-list" \nmultiple \nname="fv_profile-list"\n@on.native.change="self.handleChangeSelectedProfile($event)">\n<option @foreach="profile in self.state.manageRedactionProfile.profileList" \n@set.attr.value="profile">\n@{profile}\n</option>\n</select>\n</div>\n</div>\n<div class="fv__ui-search-profile-right-col">\n<div class="fv__ui-search-btn-group">\n<xbutton class="fv__ui-dialog-cancel-button mb_16" \n @disable="!self.state.manageRedactionProfile.selectedProfile||!self.state.manageRedactionProfile.profileList.length||self.isMultipleValues()"\n @on.click="self.handleEdit()">search:searchPanel.button.edit</xbutton>\n<xbutton class="fv__ui-dialog-cancel-button" @disable="!self.state.manageRedactionProfile.selectedProfile||!self.state.manageRedactionProfile.profileList.length" @on.click="self.handleDelete()">search:searchPanel.button.delete</xbutton>\n</div>\n<div class="fv__ui-search-btn-group">\n<file-selector class="fv__ui-dialog-cancel-button mb_16" @on.change="self.handleImport.apply(self,$args)">search:searchPanel.button.importProfile</file-selector>\n<xbutton class="fv__ui-dialog-cancel-button" @disable="self.state.manageRedactionProfile.profileList.length <= 0" @on.click="self.handleExport()">search:searchPanel.button.exportProfile</xbutton>\n</div>\n<div class="fv__ui-search-btn-group">\n<xbutton class="fv__ui-dialog-ok-button" @on.click="self.handleClose()">search:searchPanel.button.close</xbutton>\n</div>\n</div>\n</div>\n</layer>'}},4483:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<layer modal class="fv__ui-search-partial-dialog center" append-to="body" @var.self="$component">\n<layer-header title="search:searchPanel.dialog.partialRedaction"></layer-header>\n<div class="fv__ui-search-partial-setting mb_16" @radio-group>\n<div class="fv__ui-search-partial-radio mb_8">\n<div class="mark-partial-type">\n<radio @model="self.state.searchResult.markPartialType"\n   checked = "true"\n   value="position" name="redactMarkType" @on.change="self.store.digest()"></radio>\n<label for="redactMarkTypePos">@{self.markByPos[0]}</label>\n</div>\n<input type="number" @model="self.state.searchResult.markPosStart">\n<div>@{self.markByPos[1]}</div>\n<select class="fv__ui-search-markpos-end" @on.native.change="self.handleMarkPosEnd($event)">\n<option value="beginning" data-i18n="search:searchPanel.options.beginning">\n</option>\n<option value="end" data-i18n="search:searchPanel.options.end">\n</option>\n</select>\n<div>@{self.markByPos[2]}</div>\n</div>\n<div class="fv__ui-search-partial-radio">\n<div class="mark-type-count">\n<radio @model="self.state.searchResult.markPartialType" \n   value="count" name="redactMarkType" @on.change="self.store.digest()"></radio>\n<label for="redactMarkTypeCount">@{self.markByCount[0]}</label>\n</div>\n<input type="number" @model="self.state.searchResult.markCountStart">\n<div>@{self.markByCount[1]}</div>\n<input type="number" @model="self.state.searchResult.markCountEnd">\n<div>@{self.markByCount[2]}</div>\n</div>\n</div>\n<div class="d_f jc_fe footer">\n<xbutton class="fv__ui-dialog-ok-button" @on.click="self.handleOk()">search:searchbar.prop.ok</xbutton>\n<xbutton class="fv__ui-dialog-cancel-button" @on.click="self.handleCancel()">search:searchbar.prop.cancel</xbutton>\n</div>\n</layer>'}},8959:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};var t="";return t+='<div class="fv__ui-search-with-text" @var.self="$component">\n',t+='\n<div @show="self.state.searchMode !== \'multiple\' && self.state.searchMode !== \'profile\'">\n<div @show="[\'exact\', \'any\'].indexOf(self.state.searchMode) >= 0">\n<div class="mb_12" data-i18n="search:searchPanel.text.wordOrPhrase"></div>\n<div class="fv__ui-search-text-wrapper mb_12">\n<input class="fv__ui-search-text" @model="self.state.searchText" \ndata-i18n="[placeholder]search:searchPanel.text.searching"\n@on.native.input="self.oninput($event)"\n@on.native.change="self.oninput($event)"\n@on.native.keydown="self.handleSearchTextKeydown($event)" />\n<div class="fv__ui-search-text-clear fv__icon-search-close" @show="self.state.searchText.length > 0" @on.native.click="self.handleClearText()"></div>\n</div>\n</div>\n<div class="fv__ui-search-options">\n<checkbox @model="self.state.searchOptions.wholeWordsOnly" \n@show="self.state.searchMode !== \'pattern\'"\n@on.change="self.store.digest()"\ntext="search:searchPanel.options.wholeWordsOnly"></checkbox>\n<checkbox @model="self.state.searchOptions.caseSensitive" \n@on.change="self.store.digest()"\n@show="self.state.searchMode !== \'pattern\'"\ntext="search:searchPanel.options.caseSensitive"></checkbox>\n',t+='\n<checkbox @model="self.state.searchOptions.highlight" \n@on.change="self.store.digest()"\n@show="(self.state.preference.isAlwaysShowMore || self.state.showMore) || self.state.searchType === \'highlight\'"\ntext="search:searchPanel.options.highlight"></checkbox>\n</div>  \n<div @show="self.state.searchMode === \'pattern\'">\n<select class="fv__ui-search-select" @on.native.change="self.handlePatternChange($event)">\n<option value="select" data-i18n="search:searchPanel.pattern.select"></option>\n<option value="phone" data-i18n="search:searchPanel.pattern.phone"></option>\n<option value="date" data-i18n="search:searchPanel.pattern.date"></option>\n<option value="security" data-i18n="search:searchPanel.pattern.security"></option>\n<option value="email" data-i18n="search:searchPanel.pattern.email"></option>\n<option value="credit" data-i18n="search:searchPanel.pattern.credit"></option>\n<option value="bank" data-i18n="search:searchPanel.pattern.bank"></option>\n<option value="driving" data-i18n="search:searchPanel.pattern.driving"></option>\n</select>\n<div class="mb_12" data-i18n="search:searchPanel.text.country"></div>\n<select class="fv__ui-search-select fv__ui-search-country-select"\n@disable="self.state.searchMode === \'pattern\' && self.state.searchPattern === \'select\'"\n@on.native.change="self.handlePatternCountryChange($event)">\n<option @foreach="country in self.state.countryList" \n@set.attr.value="country"\n@set.attr.data-i18n="\'search:searchPanel.country.\' + country">\n</option>\n</select>\n</div>\n<a class="fv__ui-more-less" \n   @show="!self.state.preference.isAlwaysShowMore && !self.state.showMore && self.state.searchType !== \'highlight\'" \n   @on.native.click="self.setShowMore(true)"\n   data-i18n="search:searchPanel.button.more"></a>\n<a class="fv__ui-more-less" \n   @show="!self.state.preference.isAlwaysShowMore && self.state.showMore && self.state.searchType !== \'highlight\'" \n   @on.native.click="self.setShowMore(false)"\n   data-i18n="search:searchPanel.button.less"></a>\n<xbutton class="fv__ui-dialog-ok-button ml_0 fv__ui-search_button"\n @disable="self.searchBtnAvailable()"\n @on.click="self.search()">search:searchPanel.button.search</xbutton>\n</div>\n<xbutton class="fv__ui-dialog-ok-button ml_0" \n @show="self.state.searchMode === \'multiple\'"\n @on.click="self.handleSelectWords()">search:searchPanel.button.selectWords</xbutton>\n<div @show="self.state.searchMode === \'profile\'">\n<div class="mb_12" data-i18n="search:searchPanel.text.selectProfile"></div>\n<select class="fv__ui-search-select fv__ui-search-select-profilelist" @on.native.change="self.handleRedactionProfileChange($event)">\n<option value="select" selected data-i18n="search:searchPanel.button.selectProfile"></option>\n<option @foreach="profile in self.state.manageRedactionProfile.profileList"\n@set.attr.value="profile">@{profile}</option>\n</select>\n<div class="mb_12 d_f jc_fs">\n<xbutton class="fv__ui-dialog-cancel-button mr_12 ml_0" \n @disable="self.state.searchMode === \'profile\' && !self.state.manageRedactionProfile.selectedProfile"\n @on.click="self.search()">search:searchPanel.button.search</xbutton>\n<xbutton class="fv__ui-dialog-cancel-button" \n @on.click="self.handleManageRedactionProfile()">search:searchPanel.button.manage</xbutton>\n</div>\n<div class="mb_12" data-i18n="search:searchPanel.text.or"></div>\n<xbutton class="fv__ui-dialog-ok-button ml_0" \n @on.click="self.handleCreateRedactionProfile()">search:searchPanel.button.create</xbutton>\n</div>\n</div>'}},9789:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};var t="";return t+='<div class="fv__ui-search-result-panel" @var.self="$component">\n<div class="mb_8" data-i18n="search:searchPanel.text.lookingFor"></div>\n<div class="mb_8">\n@{self.getLookingForText()}\n</div>\n<div class="mb_8 fv__ui-search-result-panel-text" data-i18n="search:searchPanel.text.results"></div>\n<div class="mb_8">\n@{self.getResultText()}\n</div>\n<div class="fv__ui-search-options" \n @show="self.state.searchType === \'highlight\' || self.state.searchType === \'redaction\'">\n<checkbox @show="self.showCheckAll()"\n  @disable="self.changeCheckALLState()"\n  @model="self.state.searchResult.checkAll" \n  @on.change="self.handleCheckAll.apply(self, $args)"\n  text="search:searchPanel.button.checkAll"></checkbox>\n</div>\n<div class="d_f jc_fs">\n<xbutton class="fv__ui-dialog-ok-button ml_0" @on.click="self.handleNewSearch()">search:searchPanel.button.newSearch</xbutton>\n',t+='\n<xbutton icon-class="fv__icon-toolbar-text-highlight"\n@on.click="self.handleHighlight()"\n@disable="self.changeHighlightState()"\n@show="self.state.searchType === \'highlight\'" @aria:label="search:searchPanel.button.text-highlight"></xbutton>\n</div>\n<div class="fv__ui-search-results mb_8" id="search-result-panel-box">\n<div class="fv__ui-search-result-title" @show="self.handleShowSearchTitle()">\n<span @on.click="self.handleExpendSearchResult(false)" @disable="self.changeCheckALLState()">\n<i class="search-root-icon search-result-title-tree-icon tree--minus"></i>\n</span>\n<i class="tree-hor-line"></i>\n<span class="fv__ui-search-result-title-check" @if="self.showCheckbox()">\n<checkbox @model="self.state.searchResult.checkAll"\n  @disable="self.changeCheckALLState()"\n@on.change="self.handleCheckAll.apply(self, $args)"\nclass="fv__ui-checkbox-hide-text"\n></checkbox>\n</span>\n@{self.searchResultTitle}\n</div>\n\n<div class="fv__ui-search-attachment-box" \n@foreach="attachmentResult in self.state.searchResult.attachmentResults">\n<div class="fv__ui-search-attachment-title">\n<i class="tree-ver-line"></i>\n<span @on.click="self.handleExpendAttachmentSearchResult(false,attachmentResult[0].attachmentName)">\n<i attach-root-icon-name="@{attachmentResult[0].attachmentName}" class="search-attachment-root-icon search-result-title-tree-icon tree--minus"></i>\n</span>\n<i class="tree-hor-line"></i>\n@{attachmentResult[0].attachmentName}\n</div>\n<div class="fv__ui-search-result-item fv__ui-search-attachment-result-item" @foreach="result in attachmentResult" attachment-name="@{result.attachmentName}">\n<div @if="result.isMetaData && result.count && self.state.searchType === \'normal\'&& attachmentResult.length>1" class="lous fv__ui-search-result-item-content">\n<span class="fv__ui-search-result-item-tree-line"></span>\n<i @if="result.type === \'pageText\'" class="fv__ui-search-result-location fv__icon-search-pdf"></i>\n<i @if="result.type === \'annot\'" class="fv__ui-search-result-location fv__icon-search-comment"></i>\n<i @if="result.type === \'form\'" class="fv__ui-search-result-location fv__icon-search-form"></i>\n<i @if="result.type === \'attachment\'" class="fv__ui-search-result-location fv__icon-search-attachment"></i>\n<i @if="result.type === \'bookmark\'" class="fv__ui-search-result-location fv__icon-search-bookmark"></i>\n<div class="fv__ui-search-result-text">\n<span class="fv__ui-search-result-normal-text meta-data-text" data-count="@{result.count}">@{result.text}</span>\n</div>\n</div>\n<div @if="!result.isMetaData" class="fv__ui-search-result-item-content">\n<span class="fv__ui-search-result-item-tree-line"></span>\n<i @show="self.showWarnIcon()" class="fv__ui-search-result-location fv__icon-search-warn"></i>\n<i @if="result.type === \'pageText\'" class="fv__ui-search-result-location fv__icon-search-pdf"></i>\n<i @if="result.type === \'annot\'" class="fv__ui-search-result-location fv__icon-search-comment"></i>\n<i @if="result.type === \'form\'" class="fv__ui-search-result-location fv__icon-search-form"></i>\n<i @if="result.type === \'attachment\'" class="fv__ui-search-result-location fv__icon-search-attachment"></i>\n<i @if="result.type === \'bookmark\'" class="fv__ui-search-result-location fv__icon-search-bookmark"></i>\n<div class="fv__ui-search-result-text">\n<span class="fv__ui-search-result-normal-text">@{result.startText}</span>\n<span class="fv__ui-search-result-highlight-text">@{result.word}</span>\n<span class="fv__ui-search-result-normal-text">@{result.endText}</span>\n</div>\n</div>\n</div>\n</div>\n',t+='\n<div class="fv__ui-search-result-item fv__ui-search-normal-result-item"\n@foreach="result in self.state.searchResult.results track by trackIndex" @lazy-content.intersection>\n',t+='\n<div @if="result.isMetaData && result.count && self.state.searchType === \'normal\' && self.state.searchResult.results.length>1" class="fv__ui-search-result-item-content nocursor">\n<span class="fv__ui-search-result-item-tree-line"></span>\n<i @if="result.type === \'pageText\'" class="fv__ui-search-result-location fv__icon-search-pdf"></i>\n<i @if="result.type === \'annot\'" class="fv__ui-search-result-location fv__icon-search-comment"></i>\n<i @if="result.type === \'form\'" class="fv__ui-search-result-location fv__icon-search-form"></i>\n<i @if="result.type === \'attachment\'" class="fv__ui-search-result-location fv__icon-search-attachment"></i>\n<i @if="result.type === \'bookmark\'" class="fv__ui-search-result-location fv__icon-search-bookmark"></i>\n<div class="fv__ui-search-result-text">\n<span class="fv__ui-search-result-normal-text meta-data-text" data-count="@{result.count}">@{result.text}</span>\n</div>\n</div>\n<div @if="!result.isMetaData" class="fv__ui-search-result-item-content" @on.native.click="self.handleClickResult(result)">\n<span class="fv__ui-search-result-item-tree-line"></span>\n<i @show="self.showWarnIcon()" class="fv__ui-search-result-location fv__icon-search-warn"></i>\n<search:checkbox class="fv__ui-search-result-item-check"\n@show="self.showCheckbox()"\nname="fv__ui-search-result-check" \n@setter.invalid="self.state.searchType !== \'highlight\' && result.isRedacted" \n@setter.value="result.checked"\n@on.click="self.handleClickResultCheckbox()"\n@on.change="self.handleCheckResult.apply(self, $args.concat(result))"></search:checkbox>\n<i @if="result.type === \'pageText\'" class="fv__ui-search-result-location fv__icon-search-pdf"></i>\n<i @if="result.type === \'annot\'" class="fv__ui-search-result-location fv__icon-search-comment"></i>\n<i @if="result.type === \'form\'" class="fv__ui-search-result-location fv__icon-search-form"></i>\n<i @if="result.type === \'attachment\'" class="fv__ui-search-result-location fv__icon-search-attachment"></i>\n<i @if="result.type === \'bookmark\'" class="fv__ui-search-result-location fv__icon-search-bookmark"></i>\n<div class="fv__ui-search-result-text">\n<span class="fv__ui-search-result-normal-text">@{result.startText}</span>\n<span class="fv__ui-search-result-highlight-text">@{result.word}</span>\n<span class="fv__ui-search-result-normal-text">@{result.endText}</span>\n</div>\n</div>\n</div>\n<div @if="self.state.showMoreBtn" class="fv__search-more" tabindex="0">\n<div @if="!self.state.showMoreLoading" data-i18n="search:searchPanel.button.loadMore" @on.native.click="self.handleSearchMore()"></div>\n<div @if="self.state.showMoreLoading" data-i18n="sidebar.commentlist.search.loading"></div>\n</div>\n</div>\n<div @show="self.state.searchType === \'redaction\'">\n',t+='\n<div class="fv__ui-search-result-bottom-btns">\n<xbutton class="fv__ui-dialog-cancel-button mb_8 ellipsis"\nname="search-mark-redacts"\n@disable="!(self.state.searchResult.checkedResults.length>0&&self.state.searchResult.checkedResults.some(function(ret){return !ret.isRedacted}))"\n@on.click="self.handleMarkRedaction()">search:searchPanel.button.markRedaction</xbutton>\n<xbutton name="search-apply-redacts" class="fv__ui-dialog-cancel-button" @on.click="self.handleApplyRedaction()">search:searchPanel.button.applyRedaction</xbutton>\n</div>\n</div>\n</div>\n'}},5237:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<layer modal class="fv__ui-search-word-dialog center" append-to="body" @var.self="$component">\n<layer-header title="search:searchPanel.dialog.selectWord"></layer-header>\n<div class="fv__ui-search-word-content">\n<div class="fv__ui-search-word-left-col">\n<div class="mb_8" data-i18n="search:searchPanel.text.newWord"></div>\n<input class="fv__ui-search-word-input" \n   @model="self.state.selectWord.newWord" \n   @on.change="self.handleInputNewWord.apply(self, $args)" />\n<div class="mb_8" data-i18n="search:searchPanel.text.list"></div>\n<select class="fv__ui-search-word-list" \nmultiple \n@on.native.change="self.handleSelectWord($event)">\n<option @foreach="word in self.state.selectWord.wordList" \n@set.attr.value="word">\n@{word}\n</option>\n</select>\n<div class="fv__ui-search-options">\n<checkbox @model="self.state.searchOptions.wholeWordsOnly" \ntext="search:searchPanel.options.wholeWordsOnly"></checkbox>\n<checkbox @model="self.state.searchOptions.caseSensitive" \ntext="search:searchPanel.options.caseSensitive"></checkbox>\n<checkbox @model="self.state.searchOptions.highlight" \ntext="search:searchPanel.options.highlight"></checkbox>\n</div>\n</div>\n<div class="fv__ui-search-word-right-col">\n<xbutton class="fv__ui-dialog-cancel-button"\n @on.click="self.handleAdd()">search:searchPanel.button.add</xbutton>\n<xbutton class="fv__ui-dialog-cancel-button" \n @disable="self.state.selectWord.wordList.indexOf(self.state.selectWord.selectedWord) < 0"\n @on.click="self.handleRemove()">search:searchPanel.button.remove</xbutton>\n<file-selector class="fv__ui-dialog-cancel-button fv__ui-search-word-import" \n   @on.change="self.handleImport.apply(self, $args)">search:searchPanel.button.import</file-selector>\n<xbutton class="fv__ui-dialog-cancel-button" \n @disable="self.state.selectWord.wordList.length === 0"\n @on.click="self.handleExport()">search:searchPanel.button.export</xbutton>\n</div>\n</div>\n<div class="d_f jc_fe footer">\n<xbutton class="fv__ui-dialog-ok-button" @on.click="self.handleOk()">search:searchbar.prop.ok</xbutton>\n<xbutton class="fv__ui-dialog-cancel-button" @on.click="self.handleCancel()">search:searchbar.prop.cancel</xbutton>\n</div>\n</layer>'}},3562:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};return'<div class="fv__ui-advanced-search" @var.self="$component">\n<search:search-option-panel @show="!self.state.showSearchResult"></search:search-option-panel>\n<search:search-result-panel @show="self.state.showSearchResult"></search:search-result-panel>\n<search:select-word-dialog name="search-select-word-dialog"></search:select-word-dialog>\n<search:manage-redaction-profile-dialog name="search-manage-redaction-profile-dialog"></search:manage-redaction-profile-dialog>\n<search:create-redaction-profile-dialog name="search-create-redaction-profile-dialog"></search:create-redaction-profile-dialog>\n<search:redact-partial-word-dialog name="redact-partial-word-dialog"></search:redact-partial-word-dialog>\n</div>'}},2759:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};var t="";return t+='<contextmenu class="fv__ui-search-basic-options" name="fv--search-basic-options-list" @var.self="$component">\r\n<option-group multiple>\r\n<option-group-item name="fv--search-basic-options-whole-word" @on.click="self.setWholeWordOnly($args[0].selected)">search:searchbar.basicOption.wholeWordOnly</option-group-item>\r\n\r\n<option-group-item name="fv--search-basic-options-case-sensitive" @on.click="self.setCaseSensitive($args[0].selected)">search:searchbar.basicOption.caseSensitive</option-group-item>\r\n\r\n',t+='\r\n<option-group-item name="fv--search-basic-options-highlight" @on.click="self.setHighlightAll($args[0].selected)">search:searchbar.basicOption.highlight</option-group-item>\r\n</option-group>\r\n',t+="\r\n</contextmenu>"}},6511:(e,t,n)=>{n(5779);e.exports=function(e){"use strict";e=e||{};var t="";return t+='<contextmenu class="fv--search-choose-search-type" @var.self="$component" name="fv--search-choose-type">\n<contextmenu-item name="fv--search-choose-type-advanced" @class="{\'active\': self.state.searchType === \'normal\' && self.sidebarOpen}" icon-class="fv__icon-search-advance" @on.click="self.handleClickAdvanced()">search:searchbar.searchType.advanced</contextmenu-item>\n',t+='\n<contextmenu-item name="fv--search-choose-type-redact"  @class="{\'active\': self.state.searchType === \'redaction\' && self.sidebarOpen}" icon-class="fv__icon-search-redact" @on.click="self.handleClickRedact()" @license-validation functional-module="redaction" @require-modules="redaction">search:searchbar.searchType.redact</contextmenu-item>\n<contextmenu-item name="fv--search-choose-type-highlight"  @class="{\'active\': self.state.searchType === \'highlight\' && self.sidebarOpen}" icon-class="fv__icon-search-highlight" @on.click="self.handleClickHighlight()">search:searchbar.searchType.highlight</contextmenu-item>\n</contextmenu>'}},7363:e=>{e.exports=null},5585:(e,t,n)=>{"use strict";
/*! art-template@runtime | https://github.com/aui/art-template */var r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{},a=Object.create(r),s=/["&'<>]/;function i(e){return"string"!=typeof e&&(e=null==e?"":"function"==typeof e?i(e.call(e)):JSON.stringify(e)),e}a.$escape=function(e){return function(e){var t=""+e,n=s.exec(t);if(!n)return e;var r="",a=void 0,i=void 0,o=void 0;for(a=n.index,i=0;a<t.length;a++){switch(t.charCodeAt(a)){case 34:o="&#34;";break;case 38:o="&#38;";break;case 39:o="&#39;";break;case 60:o="&#60;";break;case 62:o="&#62;";break;default:continue}i!==a&&(r+=t.substring(i,a)),i=a+1,r+=o}return i!==a?r+t.substring(i,a):r}(i(e))},a.$each=function(e,t){if(Array.isArray(e))for(var n=0,r=e.length;n<r;n++)t(e[n],n);else for(var a in e)t(e[a],a)},e.exports=a},5779:(e,t,n)=>{"use strict";e.exports=n(5585)},8552:(e,t,n)=>{var r=n(852)(n(5639),"DataView");e.exports=r},1989:(e,t,n)=>{var r=n(1789),a=n(401),s=n(7667),i=n(1327),o=n(1866);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=a,c.prototype.get=s,c.prototype.has=i,c.prototype.set=o,e.exports=c},8407:(e,t,n)=>{var r=n(7040),a=n(4125),s=n(2117),i=n(7518),o=n(4705);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=a,c.prototype.get=s,c.prototype.has=i,c.prototype.set=o,e.exports=c},7071:(e,t,n)=>{var r=n(852)(n(5639),"Map");e.exports=r},3369:(e,t,n)=>{var r=n(4785),a=n(1285),s=n(6e3),i=n(9916),o=n(5265);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=a,c.prototype.get=s,c.prototype.has=i,c.prototype.set=o,e.exports=c},3818:(e,t,n)=>{var r=n(852)(n(5639),"Promise");e.exports=r},8525:(e,t,n)=>{var r=n(852)(n(5639),"Set");e.exports=r},2705:(e,t,n)=>{var r=n(5639).Symbol;e.exports=r},577:(e,t,n)=>{var r=n(852)(n(5639),"WeakMap");e.exports=r},9932:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}},8470:(e,t,n)=>{var r=n(7813);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},7786:(e,t,n)=>{var r=n(1811),a=n(327);e.exports=function(e,t){for(var n=0,s=(t=r(t,e)).length;null!=e&&n<s;)e=e[a(t[n++])];return n&&n==s?e:void 0}},4239:(e,t,n)=>{var r=n(2705),a=n(9607),s=n(2333),i=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?a(e):s(e)}},9454:(e,t,n)=>{var r=n(4239),a=n(7005);e.exports=function(e){return a(e)&&"[object Arguments]"==r(e)}},8458:(e,t,n)=>{var r=n(3560),a=n(5346),s=n(3218),i=n(346),o=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,h=c.toString,u=l.hasOwnProperty,d=RegExp("^"+h.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!s(e)||a(e))&&(r(e)?d:o).test(i(e))}},8749:(e,t,n)=>{var r=n(4239),a=n(1780),s=n(7005),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return s(e)&&a(e.length)&&!!i[r(e)]}},280:(e,t,n)=>{var r=n(5726),a=n(6916),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}},531:(e,t,n)=>{var r=n(2705),a=n(9932),s=n(1469),i=n(3448),o=r?r.prototype:void 0,c=o?o.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(s(t))return a(t,e)+"";if(i(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},1717:e=>{e.exports=function(e){return function(t){return e(t)}}},1811:(e,t,n)=>{var r=n(1469),a=n(5403),s=n(5514),i=n(9833);e.exports=function(e,t){return r(e)?e:a(e,t)?[e]:s(i(e))}},4429:(e,t,n)=>{var r=n(5639)["__core-js_shared__"];e.exports=r},1957:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},5050:(e,t,n)=>{var r=n(7019);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},852:(e,t,n)=>{var r=n(8458),a=n(7801);e.exports=function(e,t){var n=a(e,t);return r(n)?n:void 0}},9607:(e,t,n)=>{var r=n(2705),a=Object.prototype,s=a.hasOwnProperty,i=a.toString,o=r?r.toStringTag:void 0;e.exports=function(e){var t=s.call(e,o),n=e[o];try{e[o]=void 0;var r=!0}catch(e){}var a=i.call(e);return r&&(t?e[o]=n:delete e[o]),a}},4160:(e,t,n)=>{var r=n(8552),a=n(7071),s=n(3818),i=n(8525),o=n(577),c=n(4239),l=n(346),h="[object Map]",u="[object Promise]",d="[object Set]",_="[object WeakMap]",f="[object DataView]",v=l(r),p=l(a),g=l(s),y=l(i),m=l(o),k=c;(r&&k(new r(new ArrayBuffer(1)))!=f||a&&k(new a)!=h||s&&k(s.resolve())!=u||i&&k(new i)!=d||o&&k(new o)!=_)&&(k=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,r=n?l(n):"";if(r)switch(r){case v:return f;case p:return h;case g:return u;case y:return d;case m:return _}return t}),e.exports=k},7801:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},1789:(e,t,n)=>{var r=n(4536);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},401:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},7667:(e,t,n)=>{var r=n(4536),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return a.call(t,e)?t[e]:void 0}},1327:(e,t,n)=>{var r=n(4536),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:a.call(t,e)}},1866:(e,t,n)=>{var r=n(4536);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},5403:(e,t,n)=>{var r=n(1469),a=n(3448),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!a(e))||(i.test(e)||!s.test(e)||null!=t&&e in Object(t))}},7019:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},5346:(e,t,n)=>{var r,a=n(4429),s=(r=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!s&&s in e}},5726:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},7040:e=>{e.exports=function(){this.__data__=[],this.size=0}},4125:(e,t,n)=>{var r=n(8470),a=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)}},2117:(e,t,n)=>{var r=n(8470);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},7518:(e,t,n)=>{var r=n(8470);e.exports=function(e){return r(this.__data__,e)>-1}},4705:(e,t,n)=>{var r=n(8470);e.exports=function(e,t){var n=this.__data__,a=r(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this}},4785:(e,t,n)=>{var r=n(1989),a=n(8407),s=n(7071);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(s||a),string:new r}}},1285:(e,t,n)=>{var r=n(5050);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},6e3:(e,t,n)=>{var r=n(5050);e.exports=function(e){return r(this,e).get(e)}},9916:(e,t,n)=>{var r=n(5050);e.exports=function(e){return r(this,e).has(e)}},5265:(e,t,n)=>{var r=n(5050);e.exports=function(e,t){var n=r(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this}},4523:(e,t,n)=>{var r=n(8306);e.exports=function(e){var t=r(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}},4536:(e,t,n)=>{var r=n(852)(Object,"create");e.exports=r},6916:(e,t,n)=>{var r=n(5569)(Object.keys,Object);e.exports=r},1167:(e,t,n)=>{e=n.nmd(e);var r=n(1957),a=t&&!t.nodeType&&t,s=a&&e&&!e.nodeType&&e,i=s&&s.exports===a&&r.process,o=function(){try{var e=s&&s.require&&s.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=o},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},5639:(e,t,n)=>{var r=n(1957),a="object"==typeof self&&self&&self.Object===Object&&self,s=r||a||Function("return this")();e.exports=s},5514:(e,t,n)=>{var r=n(4523),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,i=r(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(a,function(e,n,r,a){t.push(r?a.replace(s,"$1"):n||e)}),t});e.exports=i},327:(e,t,n)=>{var r=n(3448);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},346:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},7813:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},7361:(e,t,n)=>{var r=n(7786);e.exports=function(e,t,n){var a=null==e?void 0:r(e,t);return void 0===a?n:a}},5694:(e,t,n)=>{var r=n(9454),a=n(7005),s=Object.prototype,i=s.hasOwnProperty,o=s.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return a(e)&&i.call(e,"callee")&&!o.call(e,"callee")};e.exports=c},1469:e=>{var t=Array.isArray;e.exports=t},8612:(e,t,n)=>{var r=n(3560),a=n(1780);e.exports=function(e){return null!=e&&a(e.length)&&!r(e)}},4144:(e,t,n)=>{e=n.nmd(e);var r=n(5639),a=n(5062),s=t&&!t.nodeType&&t,i=s&&e&&!e.nodeType&&e,o=i&&i.exports===s?r.Buffer:void 0,c=(o?o.isBuffer:void 0)||a;e.exports=c},1609:(e,t,n)=>{var r=n(280),a=n(4160),s=n(5694),i=n(1469),o=n(8612),c=n(4144),l=n(5726),h=n(6719),u=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(o(e)&&(i(e)||"string"==typeof e||"function"==typeof e.splice||c(e)||h(e)||s(e)))return!e.length;var t=a(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(l(e))return!r(e).length;for(var n in e)if(u.call(e,n))return!1;return!0}},3560:(e,t,n)=>{var r=n(4239),a=n(3218);e.exports=function(e){if(!a(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1780:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},3218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},3448:(e,t,n)=>{var r=n(4239),a=n(7005);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==r(e)}},6719:(e,t,n)=>{var r=n(8749),a=n(1717),s=n(1167),i=s&&s.isTypedArray,o=i?a(i):r;e.exports=o},928:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},8306:(e,t,n)=>{var r=n(3369);function a(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],s=n.cache;if(s.has(a))return s.get(a);var i=e.apply(this,r);return n.cache=s.set(a,i)||s,i};return n.cache=new(a.Cache||r),n}a.Cache=r,e.exports=a},5062:e=>{e.exports=function(){return!1}},9833:(e,t,n)=>{var r=n(531);e.exports=function(e){return null==e?"":r(e)}},9627:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(9227),a=n(7424),s=n(5991),i=n(4616),o=n(6502),c=n(6372),l=n(132);var h=n(7595),u=function(){function e(){(0,r._)(this,e),(0,s._)(this,"store",void 0),(0,s._)(this,"baseStore",void 0),(0,s._)(this,"searchManager",void 0),(0,s._)(this,"baseSearchManager",void 0),(0,s._)(this,"pdfui",void 0)}return(0,a._)(e,[{key:"getAdvanceSearchManager",value:function(){return this.searchManager||(this.searchManager=new o.Z(this.pdfui,this.getAdvanceStore())),this.searchManager}},{key:"getBaseSearchManager",value:function(){return this.baseSearchManager||(this.baseSearchManager=new h.Z(this.pdfui,this.getBaseStore())),this.baseSearchManager}},{key:"getAdvanceStore",value:function(){return this.store||(this.store=(0,c.T)()),this.store}},{key:"getBaseStore",value:function(){return this.baseStore||(this.baseStore=new l.x({state:{searchText:"",wholeWordsOnly:!1,caseSensitive:!1,includePageText:!0,includeBookmarks:!1,includeComments:!1,highlightAll:!1,highlightColor:"#0400ff",highlightOpacity:31,preference:{isIgnoreAsia:!1,isIgnoreDiacritics:!1,isAlwaysShowMore:!1,RangeOfWord:900}}})),this.baseStore}}],[{key:"inject",value:function(){return{pdfui:i.PDFUI}}}]),e}()},132:(e,t,n)=>{"use strict";n.d(t,{x:()=>o});var r=n(9227),a=n(7424),s=n(7635),i=function(){function e(){(0,r._)(this,e),this.event={}}return(0,a._)(e,[{key:"on",value:function(e,t){this.event[e]?this.event[e].push(t):this.event[e]=[t]}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];this.event[e]&&this.event[e].map(function(e){return e.apply(t,r)})}},{key:"off",value:function(e,t){if(this.event[e])if(t){var n=this.event[e].indexOf(t);n>-1&&this.event[e].splice(n,1)}else delete this.event[e]}}]),e}(),o=function(){function e(t){(0,r._)(this,e),this.$subject=new i,this.$digests=[],this.state=t.state||{},this.actions=t.actions||{},this.mutations=t.mutations||{},this._digestTask=null}return(0,a._)(e,[{key:"on",value:function(e,t){var n=this;return this.$subject.on(e,t),function(){n.$subject&&n.$subject.off(e,t)}}},{key:"off",value:function(e,t){this.$subject.off(e,t)}},{key:"trigger",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a;(a=this.$subject).emit.apply(a,[e].concat((0,s._)(n)))}},{key:"commit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=this.mutations[e];if(a)try{a.apply(void 0,[this.state].concat((0,s._)(n)))}finally{this.digest()}}},{key:"dispatch",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return new Promise(function(n){var a=t.actions[e];a&&n(a.apply(void 0,[t].concat((0,s._)(r))))})}},{key:"link",value:function(e){this.$digests.push(e.digest.bind(e))}},{key:"digest",value:function(){var e=this;this._digestTask&&clearTimeout(this._digestTask);new Promise(function(t){e._digestTask=setTimeout(t)}).then(function(){var t=!0,n=!1,r=void 0;try{for(var a,s=e.$digests[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){(0,a.value)()}}catch(e){n=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}if("searchOptions"in e.state&&localStorage){var i=e.state.searchOptions;"1"===localStorage.getItem("init_search_config")&&(i=(i=localStorage.getItem("search_check_config"))?JSON.parse(i):e.state.searchOptions,localStorage.removeItem("init_search_config")),localStorage.setItem("search_check_config",JSON.stringify(i))}})}}]),e}()},1330:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(9227),a=n(7424),s=n(9627),i=UIExtension.vendors.jQuery,o=function(e){return(100*e).toFixed(2)+"%"};const c=function(){function e(t,n,a){(0,r._)(this,e),this.pdfUI=t;var i=t.getServiceInstance(s.Z);this.advancedStore=i.getAdvanceStore(),this.baseStore=i.getBaseStore(),this.handlers=n,this.advanced=a,this.currSelected=null}return(0,a._)(e,[{key:"isPageHighlight",value:function(e){return-1==e||this.docRender.getPDFPageRender(e).$ui.find(".fv__search-handler>div").length>0}},{key:"highlight",value:function(e,t,n,r){var a=this;if("pageText"==t.type||"form"==t.type){e||(e=t.pageIndex);var s=this.baseStore.state,c=this.docRender.getPDFPageRender(e);if(null==c?void 0:c.page){var l=c.$ui.find(".fv__search-handler");l.length||(c.$ui.find(".fv__pdf-page-container").after("<div class='fv__search-handler'></div>"),l=c.$ui.find(".fv__search-handler").on("contextmenu",function(e){return a.showContextMenu(e)})),t.rects.forEach(function(e){var h=c.page.getDeviceRect(e,c.scale,c.rotate),u=c.getShowWidth(),d=c.getShowHeight(),_={left:o(h.left/u),top:o(h.top/d),width:o((h.right-h.left)/u),height:o((h.bottom-h.top)/d),backgroundColor:s.highlightColor,opacity:s.highlightOpacity/100},f=i('<div class="fv__search-find-highlight" data-index='.concat(n," data-typeIndex=").concat(t.type,"-").concat(t.index,">")).css(_).appendTo(l);a.advanced?a.advancedStore.state.searchOptions.highlight||r||f.hide():s.highlightAll||r||f.hide()})}}}},{key:"singleHighlight",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.pageIndex,a=this.baseStore.state,s=this.docRender.getPDFPageRender(r);if(s.page){var c=s.$ui.find(".fv__search-handler");c.length||(s.$ui.find(".fv__pdf-page-container").after("<div class='fv__search-handler'></div>"),c=s.$ui.find(".fv__search-handler").on("contextmenu",function(e){return t.showContextMenu(e)})),n&&c.find(".fv__search-find-highlight-single[type=single]").remove(),e.rects.forEach(function(e){var t=s.page.getDeviceRect(e,s.scale,s.rotate),r=s.getShowWidth(),l=s.getShowHeight(),h={left:o(t.left/r),top:o(t.top/l),width:o((t.right-t.left)/r),height:o((t.bottom-t.top)/l),backgroundColor:a.highlightColor,opacity:a.highlightOpacity/100};i('<div class="fv__search-find-highlight-single" type="'.concat(n?"single":"all",'">')).css(h).appendTo(c)})}}},{key:"clearSingleHigtlight",value:function(){var e,t,n;null===this||void 0===this||null===(n=this.docRender)||void 0===n||null===(t=n.$ui)||void 0===t||null===(e=t.find(".fv__search-find-highlight-single"))||void 0===e||e.remove()}},{key:"update",value:function(e){var t=this.docRender&&this.docRender.$ui;if(t)if(e){var n=this.baseStore.state;t.find(".fv__search-find-highlight").toggle(n.highlightAll);var r={opacity:n.highlightOpacity/100,backgroundColor:n.highlightColor};t.find(".fv__search-find-highlight").css(r),r.opacity*=2,t.find(".fv__search-find-highlight.selected").css(r)}else t.find(".fv__search-find-highlight").remove()}},{key:"select",value:function(e,t,n){this.currSelected=[e,t,n];var r=this.baseStore.state.highlightOpacity/100;if(this.docRender.$ui.find(".fv__search-find-highlight.selected").css({opacity:r}).removeClass("selected"),-1!=e){var a=this.docRender.getPDFPageRender(e),s='.fv__search-find-highlight[data-index="'.concat(t,'"]');"form"===n&&(s=".fv__search-find-highlight[data-typeIndex=form-".concat(t,"]")),a.$ui.find(s).addClass("selected").css({opacity:2*r})}}},{key:"hideAllHighlightMasks",value:function(){this.docRender&&this.docRender.$ui.find(".fv__search-find-highlight.selected").removeClass("selected")}},{key:"removeUI",value:function(){this.docRender&&this.docRender.$ui.find(".fv__search-find-highlight").remove()}},{key:"showContextMenu",value:function(e){e.preventDefault();var t=e.target.closest(".fv__pdf-view-mode-item");if(t){var n=t.querySelector(".fv__contextmenu-container");if(n){var r=e.originalEvent,a=new PointerEvent("contextmenu",r);n.dispatchEvent(a)}}}},{key:"checkPerm",value:function(e){return this.docRender.getUserPermission()[e]()}},{key:"getSelectedIndex",value:function(){return this.currentTarget}}]),e}()},6502:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(5578),_swc_helpers_call_super__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(2429),_swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(9227),_swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(7424),_swc_helpers_define_property__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(5991),_swc_helpers_inherits__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(7166),_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(2956),_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(9149),_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(9976),_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(7635),_swc_helpers_type_of__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(9256),_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(7582),UIExtension__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4616),UIExtension__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(UIExtension__WEBPACK_IMPORTED_MODULE_0__),_SearchHighlight__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1330),_searchManager__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2253),_helper__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9117),_store__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6372),lodash_get__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(7361),lodash_get__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_5__),lodash_last__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(928),lodash_last__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(lodash_last__WEBPACK_IMPORTED_MODULE_6__),lodash_isEmpty__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1609),lodash_isEmpty__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_7__),colorConvertor=UIExtension__WEBPACK_IMPORTED_MODULE_0__.PDFViewCtrl.shared.colorConvertor,Events=UIExtension__WEBPACK_IMPORTED_MODULE_0__.UIEvents,$=UIExtension__WEBPACK_IMPORTED_MODULE_0__.PDFViewCtrl.vendors.jQuery,SearchResultManager=function(SearchManager1){function SearchResultManager1(e,t){var n,r;return(0,_swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_9__._)(this,SearchResultManager1),(n=(0,_swc_helpers_call_super__WEBPACK_IMPORTED_MODULE_10__._)(this,SearchResultManager1,[e,t])).highlighter=new _SearchHighlight__WEBPACK_IMPORTED_MODULE_1__.Z(e,n.handlerCtxMenu.bind(n),!0),n.clear(),e.addViewerEventListener((r={},(0,_swc_helpers_define_property__WEBPACK_IMPORTED_MODULE_11__._)(r,Events.openFileSuccess,function(e){n.resetSearchResult()}),(0,_swc_helpers_define_property__WEBPACK_IMPORTED_MODULE_11__._)(r,Events.openFileFailed,function(){n.resetSearchResult()}),(0,_swc_helpers_define_property__WEBPACK_IMPORTED_MODULE_11__._)(r,Events.renderPageSuccess,function(e){if(n.docRender&&!n.noResults){var t=n.highlighter;if(!t.isPageHighlight(e.index)){var r,a=n.findResult[e.index];if(a&&a.map(function(e,n){e.isMetaData||t.highlight(e.pageIndex,e,n)}),t.currSelected&&t.currSelected[0]===e.index)(r=t).select.apply(r,(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_12__._)(t.currSelected))}}}),(0,_swc_helpers_define_property__WEBPACK_IMPORTED_MODULE_11__._)(r,Events.pageRotationChanged,function(){n.docRender&&!n.noResults&&n.highlighter.removeUI()}),(0,_swc_helpers_define_property__WEBPACK_IMPORTED_MODULE_11__._)(r,Events.beforeDocumentRotation,function(){n.docRender&&!n.noResults&&n.highlighter.removeUI()}),r)),n}return(0,_swc_helpers_inherits__WEBPACK_IMPORTED_MODULE_8__._)(SearchResultManager1,SearchManager1),(0,_swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_13__._)(SearchResultManager1,[{key:"resetSearchResult",value:function(){this.clear(),this.store.commit("hideSearchResult")}},{key:"clear",value:function(){this.highlighter.removeUI(),this.clearSearch()}},{key:"clearSearch",value:function(){this.noResults=!0,this.findResult={},this.attachmentResultsList={}}},{key:"setSearchType",value:function(e){this.store.state.searchType!==e&&this.resetSearchResult(),this.store.state.searchType=e;var t=JSON.parse(localStorage.getItem("search_check_config")||"{}");this.store.state.searchOptions=(0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({},_store__WEBPACK_IMPORTED_MODULE_4__.P,t),this.clearSearch()}},{key:"searchInDocMetaDataHandle",value:function searchInDocMetaDataHandle(doc,wordArr){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_15__._)(function(){var metaData,count,countHandle,info,idString,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,word;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_16__.Jh)(this,function(_state){switch(_state.label){case 0:return doc&&doc.getMetadata?[4,doc.getMetadata()]:[2];case 1:return metaData=_state.sent(),count=0,metaData.hasOwnProperty("FileName")&&delete metaData.FileName,countHandle=function(w,obj){var c=0,reg=eval("/".concat(w.replace(/\*/g,"\\*"),"/g")),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=Object.values(obj)[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var i=_step.value;"object"!==(void 0===i?"undefined":(0,_swc_helpers_type_of__WEBPACK_IMPORTED_MODULE_17__._)(i))?c+=((""+i).match(reg)||[]).length:c+=countHandle(w,i)}}catch(e){_didIteratorError=!0,_iteratorError=e}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return c},[4,doc.getPDFDocInfo()];case 2:info=_state.sent(),idString=info.fileID.join(","),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(_iterator=wordArr[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)word=_step.value,count+=countHandle(word,Object.values(metaData)),count+=countHandle(word,{idString})}catch(e){_didIteratorError=!0,_iteratorError=e}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return[2,count]}})})()}},{key:"loadSearches",value:function(e,t){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_15__._)(function(){var n,r,a,s,i,o,c,l,h,u,d,_,f,v,p,g,y,m,k,b,w,P,x,S,R,E,C,O,M,T,A,D,I,L,U,W,B,j,F,K,N,$;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_16__.Jh)(this,function(q){switch(q.label){case 0:return n=this,this.docRender?[3,2]:[4,this.initDocRender()];case 1:q.sent(),q.label=2;case 2:switch(this.noResults=!1,r=this.store.state,this.oldState=Object.assign({},r.searchOptions),this.oldState.searchText=r.searchText,a=[r.searchText],s=(0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({},r.searchOptions,r.preference),t&&"Text"in t&&(a=[t.Text],s=Object.assign({},s,t.Option)),i=s.highlight,r.searchMode){case"any":return[3,3];case"pattern":return[3,4];case"profile":return[3,5];case"multiple":return[3,7]}return[3,8];case 3:return a=r.searchText.split(" "),[3,9];case 4:return a=[r.searchPattern+"+++"+r.patternCountry],s.regExp=!0,[3,9];case 5:return o=(0,_helper__WEBPACK_IMPORTED_MODULE_3__.H)(),c=[{}],[4,o.get(r.manageRedactionProfile.selectedProfile)];case 6:return s=_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._.apply(void 0,c.concat([q.sent(),r.preference])),a=s.list.map(function(e){return e.word}),r.searchOptions.highlight=s.highlight,[3,9];case 7:return a=r.selectWord.wordList,s=(0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({},r.selectWord.searchOptions,r.preference),[3,9];case 8:return[3,9];case 9:return a.some(function(e){return!e.length})?[2,Promise.resolve(!1)]:(l=this.pdfUI.i18n,h=l.t("search:searchPanel.text.resultMetaData"),u=e.slice(0),d=this.docRender.doc,[3,11]);case 10:q.sent(),q.label=11;case 11:return 0==u.length?[3,29]:[4,d.search(u,a,s,"redaction"==r.searchType)];case 12:for(var H in _=q.sent(),_)this.findResult[H]=_[H];return this.attachmentResultsList={},s.includeAttachments?[4,this.getAttachments(u)]:[3,28];case 13:f=q.sent(),v=d.getPageCount(),p=!0,g=!1,y=void 0,q.label=14;case 14:q.trys.push([14,25,26,27]),m=f[Symbol.iterator](),q.label=15;case 15:return(p=(k=m.next()).done)?[3,24]:(b=k.value,w=b.objNum,P=b.fileName,[4,d.getFileSpecStream(w)]);case 16:return x=q.sent(),S=new File(x,P,{type:"application/pdf"}),[4,this.pdfUI.getWebPDFJR()];case 17:return[4,q.sent().getPDFDocByFile(S)];case 18:return[4,(R=q.sent()).parse()];case 19:for(q.sent(),E=[],C=R.getPageCount(),O=0;O<C;O++)E.push(O);return M=u,(C>=v&&lodash_last__WEBPACK_IMPORTED_MODULE_6___default()(u)===v-1||C<v&&lodash_last__WEBPACK_IMPORTED_MODULE_6___default()(u)>=C-1)&&(M=E),T=(0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_18__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({},s),{includeAttachments:!1}),[4,R.search(M,a,T,"redaction"==r.searchType)];case 20:for(var V in A=q.sent(),D={},A)A[V].length&&(D[V]=A[V]);return lodash_isEmpty__WEBPACK_IMPORTED_MODULE_7___default()(D)?[3,23]:[3,22];case 21:for(var z in I=q.sent(),D){L=lodash_get__WEBPACK_IMPORTED_MODULE_5___default()(D,"[".concat(z,"][0].type"))||"",D[z].unshift({isMetaData:!0,count:I,text:h.replace("${1}",I),type:L,charIndex:0,endText:"",index:0,isRedacted:!1,pageIndex:1,rects:[{left:0,right:0,top:0,bottom:0}],startText:"",word:""});break}q.label=22;case 22:this.attachmentResultsList[P]=D,q.label=23;case 23:return p=!0,[3,15];case 24:return[3,27];case 25:return U=q.sent(),g=!0,y=U,[3,27];case 26:try{p||null==m.return||m.return()}finally{if(g)throw y}return[7];case 27:W={},B=!0,j=!1,F=void 0;try{for(K=function(){var e=(0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_19__._)($.value,2),t=e[0],n=e[1];Object.values(n).forEach(function(e){var n;W[t]||(W[t]=[]),(n=W[t]).push.apply(n,(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_12__._)(e))})},N=Object.entries(this.attachmentResultsList)[Symbol.iterator]();!(B=($=N.next()).done);B=!0)K()}catch(e){j=!0,F=e}finally{try{B||null==N.return||N.return()}finally{if(j)throw F}}this.attachmentResultsList=W,q.label=28;case 28:r.searchOptions.regExp=!1,s.highlight=i,q.label=29;case 29:return[2,e.reduce(function(e,t){return n.findResult[t].map(function(e,t){e.isMetaData||n.highlighter.highlight(e.pageIndex,e,t)}),e[t]=n.findResult[t],e},{})]}})}).call(this)}},{key:"getAllAnnot",value:function(){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_15__._)(function(){var e,t,n,r,a,s,i=arguments;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_16__.Jh)(this,function(o){switch(o.label){case 0:e=i.length>0&&void 0!==i[0]?i[0]:this.docRender.doc.getPageCount(),t=this.docRender.doc,n=[],r=0,o.label=1;case 1:return r<e?[4,t.getPageByIndex(r)]:[3,5];case 2:return[4,o.sent().getAnnots()];case 3:s=o.sent(),(a=n).push.apply(a,(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_12__._)(s)),o.label=4;case 4:return r++,[3,1];case 5:return[2,n]}})}).apply(this,arguments)}},{key:"getAttachments",value:function(e){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_15__._)(function(){var t,n,r,a,s;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_16__.Jh)(this,function(i){switch(i.label){case 0:return t=this.docRender.doc,[4,this.getAllAnnot(e.length)];case 1:return n=i.sent(),r=n.filter(function(e){return"fileattachment"===e.getType()}),a=r.map(function(e){return e.getFileSpec().fileSpec}),[4,t.getNameTree(3)];case 2:return s=i.sent(),[2,(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_12__._)(a).concat((0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_12__._)(Object.values(s)))||[]]}})}).call(this)}},{key:"getAttachmentSearchResultHandle",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var a,s=function(){var t,n=(0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_19__._)(a.value,2),r=n[0],s=n[1],i=[];s.forEach(function(e){return e.attachmentName=r}),(t=i).push.apply(t,(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_12__._)(s)),e.push(i)},i=Object.entries(this.attachmentResultsList)[Symbol.iterator]();!(t=(a=i.next()).done);t=!0)s()}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e}},{key:"changeSearchResultItemOrder",value:function(e){var t=this,n=e,r=n.find(function(e){return e.isMetaData});if(r){var a=n.findIndex(function(e){return e.isMetaData});n.splice(a,1),n.unshift(r)}return n.forEach(function(e){e.trackIndex=t.docRender.doc.id+e.pageIndex+e.type+e.charIndex}),n}},{key:"startSearch",value:function(e){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_15__._)(function(){var t,n,r,a,s,i,o;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_16__.Jh)(this,function(c){switch(c.label){case 0:return t=this,this.store.commit("setSearchResultInvalid",!1),this.highlighter.removeUI(),r=[],this.store.state.searchOptions.includeBookmarks&&r.push(-1),[4,this.initDocRender()];case 1:if(!(a=c.sent()))return[2,!1];for(s=a.getContainerVisiblePageIndexes(),i=Math.min((n=Math).max.apply(n,(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_12__._)(s)),9),o=0;o<=i;)r.push(o++);return[2,this.loadSearches(r,e).then(function(e){var n,r=[];Object.keys(e).sort(function(e,t){return e-t>0?1:-1}).forEach(function(t){return(n=r).push.apply(n,(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_12__._)(e[t]))}),t.store.state.searchResult.results=t.changeSearchResultItemOrder(r),t.store.state.searchResult.attachmentResults=t.getAttachmentSearchResultHandle(),Object.keys(e).length<=0||s.length===a.doc.getPageCount()?t.store.state.showMoreBtn=!1:t.store.state.showMoreBtn=!0,t.store.digest()})]}})}).call(this)}},{key:"searchMore",value:function(){for(var e,t=this,n=(e=Math).max.apply(e,(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_12__._)(Object.keys(this.findResult).map(function(e){return+e}))),r=this.docRender,a=[],s=r.doc.getPageCount(),i=1;i<3&&n+i<s;){var o=n+i;a.push(o),o==s-1&&(this.store.state.showMoreBtn=!1),i++}return this.loadSearches(a).then(function(e){if(Object.values(e).flat().length<=0&&a.length)return t.searchMore();var n,r=[];Object.keys(t.findResult).sort(function(e,t){return e-t>0?1:-1}).map(function(e){return+e}).forEach(function(e){return(n=r).push.apply(n,(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_12__._)(t.findResult[e]))});var s=t.store.state.searchResult,i=s.checkAll,o=s.checkedResults,c=s.results;i?(r.forEach(function(e){return e.checked=!0}),c.forEach(function(e){return e.checked=!0})):r.forEach(function(e){var t=o.find(function(t){return t.trackIndex===e.trackIndex});e.checked=!!t}),t.store.state.searchResult.results=t.changeSearchResultItemOrder(t.removeExtraMetaData(r,!1)),t.store.state.searchResult.attachmentResults=t.removeExtraMetaData(t.getAttachmentSearchResultHandle(),!0),i&&(t.store.state.searchResult.checkedResults=[].concat(r)),(r.length<=0||!a.length)&&(t.store.state.showMoreBtn=!1),t.store.digest()})}},{key:"removeExtraMetaData",value:function(e){var t=e,n=function(e){var t=e,n=e.filter(function(e){return e.isMetaData}).length>1;if(n)for(var r=e.length-1;r>=0;r--)if(e[r].isMetaData){t.splice(r,1);break}return t};return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?(t=[],e.forEach(function(e){t.push(n(e))})):t=n(e),t}},{key:"saveToCsv",value:function(){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_15__._)(function(){var e,t,n,r,a,s,i,o,c;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_16__.Jh)(this,function(l){for(var h in e=this.pdfUI.i18n,t=this.docRender.doc,n=t.getFileName()||"Untitled.pdf",r=n.replace(/\.(pdf|PDF)/,".csv"),a=0,s="",this.findResult)this.findResult[h].forEach(function(t){var i="bookmark"==t.type?e.t("search:searchPanel.csv.metadata"):t.pageIndex+1;t.startText&&t.endText&&(s+='"'.concat(n,'","').concat(r,'","').concat(i,'","').concat((t.startText||"").replace(/\r\n/g," ")).concat(t.word).concat((t.endText||"").replaceAll("\r\n"," "),'"\n'),a++)});return i=(new Date).toUTCString(),o=this.oldState.searchText,c='"'.concat(e.t("search:searchPanel.csv.results"),'"\n\n"').concat(e.t("search:searchPanel.csv.summary"),'"\n"').concat(e.t("search:searchPanel.csv.savedOn"),'","').concat(i,'"\n"').concat(e.t("search:searchPanel.csv.search"),'","').concat(o,'"\n"').concat(e.t("search:searchPanel.csv.count"),'","').concat(a,'"\n\n"').concat(e.t("search:searchPanel.csv.fileName"),'","').concat(e.t("search:searchPanel.csv.title"),'","').concat(e.t("search:searchPanel.csv.page"),'","').concat(e.t("search:searchPanel.csv.searchInstance"),'"\n')+s,saveAs(new Blob(["\ufeff"+c],{type:"text/csv; charset=utf-18"}),r||"Untitled.csv"),[2]})}).call(this)}},{key:"convertToTextMarkup",value:function(){var e=this,t=this.docRender.doc,n=this.store.state.searchResult.checkedResults;if(n.length){var r=n.filter(function(e){return"form"!==e.type});if(r.length)return t.convertToTextMarkup(r).then(function(t){return e.highlighter.removeUI()})}}},{key:"markRedaction",value:function(){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_15__._)(function(){var e,t,n,r,a,s,i,o,c,l,h;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_16__.Jh)(this,function(u){switch(u.label){case 0:if(e=this,t=this.store.state,n=t.searchResult,!(r=n.checkedResults.filter(function(e){return!e.isRedacted})).length)return[2];if(a=this.docRender.doc,s=0,i=-1,"partial"==n.markOptions)switch(n.markPartialType){case"count":s=+n.markCountStart-1,i=+n.markCountEnd-+n.markCountStart+1;break;case"position":i=+n.markPosStart,"beginning"!==n.markPosEnd&&(s=-i)}return o=[],c=!1,"profile"===t.searchMode?[3,1]:[3,3];case 1:return[4,(0,_helper__WEBPACK_IMPORTED_MODULE_3__.H)().get(t.manageRedactionProfile.selectedProfile)];case 2:return l=u.sent(),c=l.autoSize,o=l.list,[3,3];case 3:return(h=Object.assign({},this.pdfUI.pdfViewer.getAnnotDefaultProperty("redact"))).isAutoFontSize=c,h.applyFillColor&&(h.applyFillColor=colorConvertor(h.applyFillColor,"int",1)),h.textColor&&(h.textColor=colorConvertor(h.textColor,"int",1)),[2,a.redactSearch(r,s,i,o,h).then(function(n){e.highlighter.removeUI(),t.searchResult.results.forEach(function(e){e.isRedacted||t.searchResult.checkedResults.some(function(t){return t.trackIndex===e.trackIndex&&t.pageIndex===e.pageIndex})&&(e.isRedacted=!0)}),t.searchResult.checkedResults.length=0,e.store.digest()})]}})}).call(this)}}]),SearchResultManager1}(_searchManager__WEBPACK_IMPORTED_MODULE_2__.Z);const __WEBPACK_DEFAULT_EXPORT__=SearchResultManager},6372:(e,t,n)=>{"use strict";n.d(t,{P:()=>s,T:()=>i});var r=n(2956),a=n(132),s={wholeWordsOnly:!1,caseSensitive:!1,includePageText:!0,includeBookmarks:!1,includeComments:!1,includeAttachments:!1,stemming:!1,highlight:!1,autoSize:!1};function i(){return new a.x({state:{showSearchResult:!1,searchType:"",searchMode:"exact",searchText:"",searchPattern:"select",selectedProfile:"",patternCountry:"",countryList:[],searchOptions:(0,r._)({},s),showMore:!1,showMoreBtn:!0,selectWord:{newWord:"",wordList:[],searchOptions:{wholeWordsOnly:!1,caseSensitive:!1,highlight:!1}},manageRedactionProfile:{profileList:[],selectedProfile:"",profileName:"",newWord:"",overlay:"",selectedWords:[],wordOverlayList:[],emptyList:[],searchOptions:{wholeWordsOnly:!1,caseSensitive:!1,highlight:!1,autoSize:!1}},searchResult:{checkAll:!1,invalid:!1,count:0,results:[],attachmentResults:[],checkedResults:[],selectedResult:-1,markOptions:"",markPartialType:"position",markPosStart:1,markPosEnd:"beginning",markCountStart:1,markCountEnd:1},preference:{isIgnoreAsia:!1,isIgnoreDiacritics:!1,isAlwaysShowMore:!1,RangeOfWord:900}},mutations:{setSearchResultInvalid:function(e,t){e.searchResult.invalid=t},hideSearchResult:function(e){e.showSearchResult=!1}}})}},9117:(e,t,n)=>{"use strict";n.d(t,{H:()=>i});n(4616),PDFViewCtrl.shared.IndexDBCache;var r="FoxitPDFSDKForWeb_",a="redactionProfile",s="name";function i(){return new IndexDBStore(a,r+a,1,s)}},7595:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(5578),a=n(2429),s=n(9227),i=n(7424),o=n(5991),c=n(7166),l=n(2956),h=n(7582),u=n(1330),d=n(2253),_=UIExtension.UIEvents,f=UIExtension.vendors.jQuery;const v=function(e){function t(e,n){var r,i,c;return(0,s._)(this,t),(r=(0,a._)(this,t,[e,n])).latestResult=null,r.oldState={},r.highlighter=new u.Z(e,r.handlerCtxMenu.bind(r)),r.clearResult(),n.link(r),e.addViewerEventListener((i={},(0,o._)(i,_.renderPageSuccess,function(e){if(r.docRender){var t=e.index;r.loadSearch(t).then(function(e){var n=r.highlighter;n.isPageHighlight(t)||e.forEach(function(e,t){var a,s;(null===(s=r.store)||void 0===s||null===(a=s.state)||void 0===a?void 0:a.highlightAll)&&n.singleHighlight(e)})})}}),(0,o._)(i,"search-preference-changed",function(){r.clearResult()}),i)),f(document).on("click",c=function(e){r.allText&&(r.highlighter.removeUI(),r.allText=null)}),e.addDestroyHook(function(){f(document).off("click",c)}),r}return(0,c._)(t,e),(0,i._)(t,[{key:"clearResult",value:function(){this.resultIndex=-1,this.currentType=-2,this.firstSearchType=-2,this.findResult={"-2":[]},this.direction=0,this.latestResult=null,this.highlighter.removeUI()}},{key:"digest",value:function(){var e=this;this.research=this.oldState&&["searchText","wholeWordsOnly","caseSensitive","includeBookmarks","includeComments"].some(function(t){return e.oldState[t]!=e.store.state[t]});var t={};for(var n in this.store.state){var r,a,s;(null===(r=this.oldState)||void 0===r?void 0:r[n])!=(null===(s=this.store)||void 0===s||null===(a=s.state)||void 0===a?void 0:a[n])?t[n]=!0:t[n]=!1}(t.searchText||t.wholeWordsOnly||t.caseSensitive)&&this.clearSingleHigtlight(),t.highlightAll&&(this.baseHighlightAll(this.store.state.highlightAll),this.latestResult&&this.singleHighlight(this.latestResult)),this.oldState=Object.assign({},this.store.state),this.research&&this.clearResult()}},{key:"loadSearch",value:function(e){return(0,r._)(function(){var t,n,r,a,s,i,o;return(0,h.Jh)(this,function(c){switch(c.label){case 0:return t=this,this.docRender?[3,2]:[4,this.initDocRender()];case 1:c.sent(),c.label=2;case 2:return n=this.docRender.doc,r=this.store.state,a=r.searchText,!r.includePageText&&e>=0&&(a=""),(s=this.getSearchResult(e,a))&&s.length?i=Promise.resolve(s):(o=(0,l._)({},r,r.preference),this.oldState=Object.assign({},r),i=n.search(e,[a],o).then(function(n){return t.cacheSearchResult(e,a,n),n})),[2,i]}})}).call(this)}},{key:"next",value:function(){return(0,r._)(function(){var e,t,n,r,a,s;return(0,h.Jh)(this,function(i){switch(i.label){case 0:return e=this,[4,this.initDocRender()];case 1:if(i.sent(),this.research&&(this.research=!1,this.clearResult()),t=!1,-1===this.direction&&(t=!0,this.directionChangedType=this.currentType),this.direction=0,n=this.store.state.includeBookmarks,r=++this.resultIndex,!(a=this.getCurrentCachedSearchResult())||r>=a.length){if(this.directionChangedType===this.currentType&&(t=!0,delete this.directionChangedType),this.resultIndex=0,(s=this.currentType+1)>=this.docRender.doc.getPageCount()&&(s=n?-1:0),n||-1!=s||(s=0),this.currentType=s,-2==this.firstSearchType||t)this.firstSearchType=s;else if(this.firstSearchType==s)return this.currentType=this.firstSearchType,this.resultIndex=-1,this.highlighter.select(-1,-1),this.pdfUI.alert({message:"search:noMore"}),[2,Promise.resolve()];return[2,this.loadSearch(s).then(function(t){return t.length?t[0]:e.next()})]}return[2,Promise.resolve(a[r])]}})}).call(this)}},{key:"prev",value:function(){return(0,r._)(function(){var e,t,n,r,a,s,i;return(0,h.Jh)(this,function(o){switch(o.label){case 0:return e=this,this.docRender?[3,2]:[4,this.initDocRender()];case 1:o.sent(),o.label=2;case 2:if(this.research&&(this.research=!1,this.clearResult()),t=!1,0===this.direction&&(t=!0,this.directionChangedType=this.currentType),this.direction=-1,n=this.store.state.includeBookmarks,r=--this.resultIndex,a=this.getCurrentCachedSearchResult(),r<0){if(this.directionChangedType===this.currentType&&(t=!0,delete this.directionChangedType),this.resultIndex=-1,(s=this.currentType-1)<=-1&&(s=n?-1:this.docRender.doc.getPageCount()-1),this.currentType=s,-2==this.firstSearchType||t)this.firstSearchType=s;else if(this.firstSearchType==s)return this.currentType=this.firstSearchType,this.resultIndex=null===(i=this.getCurrentCachedSearchResult())||void 0===i?void 0:i.length,this.highlighter.select(-1,-1),this.pdfUI.alert({message:"search:noMore"}),[2,Promise.resolve()];return[2,this.loadSearch(s).then(function(t){return t.length?(e.resultIndex=t.length-1,t[t.length-1]):e.prev()})]}return[2,Promise.resolve(a[r])]}})}).call(this)}},{key:"cacheSearchResult",value:function(e,t,n){var r=this.getSearchResultKey(e,t);this.findResult[r]=n}},{key:"getCurrentCachedSearchResult",value:function(){return this.getSearchResult(this.currentType,this.store.state.searchText)}},{key:"getSearchResult",value:function(e,t){var n=this.getSearchResultKey(e,t);return this.findResult[n]}},{key:"getSearchResultKey",value:function(e,t){return-2!==e&&"-2"!==e&&t?e+"-"+t:"-2"}},{key:"baseHighlight",value:function(e){var t;this.latestResult=e,(null===this||void 0===this||null===(t=this.oldState)||void 0===t?void 0:t.highlightAll)||this.clearSingleHigtlight(),this.singleHighlight(e)}},{key:"baseHighlightAll",value:function(e){if(e)for(var t in this.findResult){var n=!0,r=!1,a=void 0;try{for(var s,i=this.findResult[t][Symbol.iterator]();!(n=(s=i.next()).done);n=!0){var o=s.value;this.singleHighlight(o,!1)}}catch(e){r=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}}else this.clearSingleHigtlight()}}]),t}(d.Z)},2253:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(5578),a=n(9227),s=n(7424),i=n(5991),o=n(9976),c=n(7582),l=n(4616),h=l.PDFViewCtrl,u=h.stateHandler.StateHandlerUtils.getCaretRectAndRotate,d=h.shared.browser.copyText,_=l.UIEvents;l.vendors.jQuery;const f=function(){function e(t,n){var r=this;(0,a._)(this,e),this.pdfUI=t,this.store=n,t.addViewerEventListener((0,i._)({},_.willCloseDocument,function(){r.docRender=null,r.highlighter.docRender=null}))}return(0,s._)(e,[{key:"initDocRender",value:function(){var e=this;return this.pdfUI.getPDFDocRender().then(function(t){return e.docRender=t,e.highlighter.docRender=t,t})}},{key:"selectCurrent",value:function(e){var t=this.highlighter;if(e)t.select(e.pageIndex,e.index,e.type);else{var n=this.currentType;-1==n||t.isPageHighlight(n)||this.findResult[n].forEach(function(e,r){t.highlight(n,e,r)}),t.select(n,this.resultIndex,e.type)}}},{key:"singleHighlight",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e){var n=this.pdfUI,r=this.highlighter;if(["annot","form","bookmark"].includes(e.type))this.gotoResult(e);else{var a=e.rects[0];if(a){var s=Promise.resolve();t&&(s=n.goToPage(e.pageIndex,a.top,a.left)),s.then(function(){setTimeout(function(){r.singleHighlight(e,t)},100)})}}}}},{key:"clearSingleHigtlight",value:function(){this.highlighter.clearSingleHigtlight()}},{key:"gotoResult",value:function(e){var t=this;if(e){var n=this.pdfUI;switch(e.type){case"bookmark":n.getPDFViewer().then(function(t){t.viewerUI.rootComponent.getComponentByName("sidebar-bookmark").active(),n.getComponentByName("fv-bookmark-sidebar-panel").then(function(t){return t.activeItem(e.id)})}),this.highlighter.select(-1,-1);break;case"annot":var r=e.rects[0];if(!r)break;n.goToPage(e.pageIndex,r.top,r.left).then(function(t){return n.getAnnotRender(e.pageIndex,e.id)}).then(function(e){return e.active()}),this.highlighter.select(-1,-1);break;case"pageText":var a=e.rects[0];if(!a)break;n.goToPage(e.pageIndex,a.top,a.left).then(function(n){return t.selectCurrent(e)});break;case"form":var s=e.rects[0];if(!s)break;n.goToPage(e.pageIndex,s.top,s.left).then(function(n){return t.selectCurrent(e)})}}}},{key:"handlerCtxMenu",value:function(e){var t=(0,o._)(this.highlighter.getSelectedIndex(),2),n=t[0],r=t[1],a=this.allText||this.findResult[n][r];switch(e.currentTarget.attributes["component-name"].value){case"fv--contextmenu-item-copy":this.doTextCopy(a.word);break;case"fv--contextmenu-item-exportSelectionAs":this.doExportSelectionAs(1,a);break;case"fv--contextmenu-item-highlight":this.createTextMarkupAnnot("highlight",a);break;case"fv--contextmenu-item-strikeout":this.createTextMarkupAnnot("strikeout",a);break;case"fv--contextmenu-item-underline":this.createTextMarkupAnnot("underline",a);break;case"fv--contextmenu-item-squigglyUnderline":this.createTextMarkupAnnot("squiggly",a);break;case"fv--contextmenu-item-replaceText":this.createTextMarkupAnnot("replace",a);break;case"fv--contextmenu-item-selectAll":this.doTextSelectAll(a);break;case"fv--contextmenu-item-bookmark":this.createBookmark(a);break;case"fv--contextmenu-item-createLink":this.createLink(a);break;case"fv--contextmenu-item-wordCount":this.doWordCount(a)}}},{key:"doTextCopy",value:function(e){return(0,r._)(function(){var t;return(0,c.Jh)(this,function(n){switch(n.label){case 0:return void 0===e?[3,2]:[4,d(e)];case 1:t=n.sent(),this.pdfUI.eventEmitter.emit(t?_.copyTextSuccess:_.copyTextFailed,e),n.label=2;case 2:return[2]}})}).call(this)}},{key:"doExportSelectionAs",value:function(e,t){var n=this.pdfUI;if(!(n.customs&&n.customs.isAccountExpired&&n.customs.isAccountExpired(!0,{btnName:"fv--contextmenu-item-exportSelectionAs",tabName:"convert_tab"}))){var r=this.docRender.getPDFPageRender(t.pageIndex);if(1===e){if(!selectedInfo)return;!function(e){n.customs&&n.customs.showSaveAsDialog&&n.customs.showSaveAsDialog("convert-pdf-to-word",JSON.stringify([{pageIndex:r.index,rectArray:e}]))}(t.rects.map(function(e){return{left:e.left,right:e.right,top:e.top,bottom:e.bottom}}))}}}},{key:"createTextMarkupAnnot",value:function(e,t){var n=this,r=this.docRender.getPDFPageRender(t.pageIndex);return this.clearResult(),this.research=!0,r.getPDFPage().then(function(n){var r=t.rects;if("replace"===e){var a=u(r),s=a.rect,i=a.rotate;return n.addAnnotGroup([{flags:4,type:"strikeout",rect:{left:0,right:0,top:0,bottom:0},coords:r,noPopup:!0,subject:"Replace",typeAlias:"Replace",intent:"StrikeOutTextEdit"},{type:"caret",flags:4,rect:s,subject:"Replace",typeAlias:"Replace",intent:"Replace",_rotate:i}],1)}return n.addAnnot({type:e,rect:{left:0,right:0,top:0,bottom:0},flags:4,coords:r})}).then(function(e){var t=e[0];n.pdfUI.eventEmitter.emit(_.addAnnotSuccess,t),r.annotsRender.activeAnnot(t.getId())})}},{key:"createBookmark",value:function(e){var t=this.docRender.getPDFPageRender(e.pageIndex),n=t.pdfViewer.viewerUI.rootComponent;n.getComponentByName("sidebar-bookmark").active();var r=e.rects,a=e.word;t.getPDFPage().then(function(e){var s=r[0],i=s.left,o=s.top,c=a,l=e.getIndex(),h=n.getComponentByName("fv-bookmark-sidebar-panel");t.pdfViewer.eventEmitter.emit("bookmark-create-current-view",{bookmarkId:h.currentBookmarkId,left:i,top:o,title:c,relationship:3,pageIndex:l})}),this.clearResult(),this.research=!0}},{key:"createLink",value:function(e){var t=this.docRender.getPDFPageRender(e.pageIndex);t.getPDFPage().then(function(n){var r=e.rects,a=Number.MAX_VALUE,s=-Number.MAX_VALUE,i=-Number.MAX_VALUE,o=Number.MAX_VALUE;r.forEach(function(e){a=Math.min(a,e.left),s=Math.max(s,e.right),i=Math.max(i,e.top),o=Math.min(o,e.bottom)}),n.addAnnot({type:"link",rect:{left:a,right:s,top:i,bottom:o},color:"0000FF"}).then(function(e){var n=t.getAnnotRender(e[0].getId()).component;n.showCreateDialog(),t.pdfViewer.eventEmitter.emit(_.addAnnotSuccess,n.annot)})}),this.clearResult(),this.research=!0}},{key:"doWordCount",value:function(e){var t=e.word;this.pdfViewer.viewerUI.rootComponent.pdfUI.openDialog("word-count-dialog").then(function(e){e.controller.showDialog(t)})}},{key:"doTextSelectAll",value:function(e){var t=this,n=this.docRender.getPDFPageRender(e.pageIndex),r=n.pdfViewer;this.clearResult(),this.research=!0,Promise.all([n.getAllTextRect(),n.getAllTextChar(),n.getPDFPage()]).then(function(e){var a=(0,o._)(e,3),s=a[0],i=a[1],c=a[2];r.getStore().dispatch("viewer--store-selection-info",{page:c,text:i,rectArray:s}),r.eventEmitter.emit(_.selectText,{page:c,text:i,rectArray:s}),t.allText={pageIndex:n.index,word:i,rects:s},t.highlighter.highlight(n.index,t.allText,0,!0)})}}]),e}()},4616:e=>{"use strict";e.exports=__WEBPACK_EXTERNAL_MODULE__4616__},7151:(e,t,n)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{_:()=>r})},5578:(e,t,n)=>{"use strict";function r(e,t,n,r,a,s,i){try{var o=e[s](i),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,s){var i=e.apply(t,n);function o(e){r(i,a,s,o,c,"next",e)}function c(e){r(i,a,s,o,c,"throw",e)}o(void 0)})}}n.d(t,{_:()=>a})},2429:(e,t,n)=>{"use strict";n.d(t,{_:()=>o});var r=n(9418);function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(a=function(){return!!e})()}var s=n(9256);function i(e,t){return!t||"object"!==(0,s._)(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e,t,n){return t=(0,r._)(t),i(e,a()?Reflect.construct(t,n||[],(0,r._)(e).constructor):t.apply(e,n))}},9227:(e,t,n)=>{"use strict";n.d(t,{_:()=>a});var r=n(5843);function a(e,t){if(!(0,r._)(e,t))throw new TypeError("Cannot call a class as a function")}},7424:(e,t,n)=>{"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,{_:()=>a})},5991:(e,t,n)=>{"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{_:()=>r})},9418:(e,t,n)=>{"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{_:()=>r})},7166:(e,t,n)=>{"use strict";function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}n.d(t,{_:()=>a})},5843:(e,t,n)=>{"use strict";n.d(t,{_:()=>a});var r=n(5843);function a(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):(0,r._)(e,t)}},2956:(e,t,n)=>{"use strict";n.d(t,{_:()=>a});var r=n(5991);function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){(0,r._)(e,t,n[t])})}return e}},9149:(e,t,n)=>{"use strict";function r(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}n.d(t,{_:()=>r})},9976:(e,t,n)=>{"use strict";n.d(t,{_:()=>a});var r=n(6223);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return s}}(e,t)||(0,r._)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},7635:(e,t,n)=>{"use strict";n.d(t,{_:()=>s});var r=n(7151);var a=n(6223);function s(e){return function(e){if(Array.isArray(e))return(0,r._)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,a._)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},9256:(e,t,n)=>{"use strict";function r(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}n.d(t,{_:()=>r})},6223:(e,t,n)=>{"use strict";n.d(t,{_:()=>a});var r=n(7151);function a(e,t){if(e){if("string"==typeof e)return(0,r._)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r._)(e,t):void 0}}},7582:(e,t,n)=>{"use strict";n.d(t,{Jh:()=>r});function r(e,t){var n,r,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(a=s.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var __webpack_exports__={};return(()=>{"use strict";__webpack_require__.d(__webpack_exports__,{default:()=>pe});var e=__webpack_require__(5578),t=__webpack_require__(2429),n=__webpack_require__(9227),r=__webpack_require__(7424),a=__webpack_require__(5991),s=__webpack_require__(7166),i=__webpack_require__(7582),o=__webpack_require__(4616),c=__webpack_require__(7363),l=__webpack_require__.n(c),h=__webpack_require__(9418);function u(e,t,n){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,h._)(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n||e):a.value}},u(e,t,n||e)}var d=__webpack_require__(5843);(function(){function e(){(0,n._)(this,e),this.events={}}return(0,r._)(e,[{key:"register",value:function(e,t,n){for(var r=(0,d._)(t,Array)?t:[t],a=0;a<r.length;a++)this._addEventData(e,r[a],n);return this._addKeydownEvent(),this}},{key:"unregister",value:function(e,t){for(var n=0,r=t?(0,d._)(t,Array)?t:[t]:Object.keys(this.events),a=0;a<r.length;a++)n=this._removeEventData(e,r[a]);0===n&&(this.keydownEvent&&this.keydownEvent.destroy(),this.keydownEvent=void 0,this.mouseoverEvent&&this.mouseoverEvent.destroy(),this.mouseoverEvent=void 0)}},{key:"_addEvent",value:function(e,t,n){if(e&&t){var r=n||document;r.addEventListener(e,t);return{destroy:function(){r.removeEventListener(e,t)}}}}},{key:"_addKeydownEvent",value:function(){var e=this;this.keydownEvent||(this.mouseoverEvent=this._addEvent("mouseover",function(t){e.mouseoverElement=t.target},document),this.keydownEvent=this._addEvent("keydown",function(t){var n=e._matchEventData(e._getKeyFromEvent(t));n&&n(t)}))}},{key:"_addEventData",value:function(e,t,n){this.events[t]||(this.events[t]=[]);for(var r=this.events[t],a=0;a<r.length;a++){if(r[a][0]===e)return void console.error("Duplicate binding of shortcut key",t,", on dom:",e)}this.events[t].push([e,n])}},{key:"_removeEventData",value:function(e,t){for(var n=this.events[t]||[],r=0;r<n.length;r++){if(n[r][0]===e){n.splice(r,1),0===n.length&&delete this.events[t];break}}return Object.keys(this.events).length}},{key:"_matchEventData",value:function(e){var t,n=this,r=this._getPrevKey(),a=this.events,s=r?"".concat(r,",").concat(e):"",i=function(e){if(!e)return null;for(var t in a)if(n._isKeyEqual(t,e))return a[t];return null};return(t=i(e)||i(s))?this._removePrevKey():this._addPrevKey(s||e),this._matchEventCallback(t)}},{key:"_matchEventCallback",value:function(e){if(!e||0===e.length)return null;var t=e.filter(function(e){var t=e[0];if(t===document)return!0;var n=t.getBoundingClientRect();return n.x+n.y+n.width+n.height>0});e.length>1&&t.sort(function(e,t){var n=e[0],r=t[0];return n.contains(r)?-1:r.contains(n)?1:0}).reverse();for(var n=[document.activeElement,this.mouseoverElement],r=0;r<n.length;r++){var a=n[r];if(a)for(var s=["INPUT","TEXTAREA"].includes(a.nodeName)||"true"===a.contentEditable,i=0;i<t.length;i++){var o=t[i],c=o[0],l=o[1];if(c===a)return l;if(!s&&c.contains(a))return l}}}},{key:"_addPrevKey",value:function(e){var t=this;this._removePrevKey(),this._prev_key=e,this._prev_key_timer=setTimeout(function(){t._removePrevKey()},2e3)}},{key:"_getPrevKey",value:function(){return this._prev_key}},{key:"_removePrevKey",value:function(){this._prev_key=void 0,this._prev_key_timer&&clearTimeout(this._prev_key_timer),this._prev_key_timer=void 0}},{key:"_getKeyFromEvent",value:function(e){var t=e.key,n=(e.keyCode,e.code,e.altKey),r=e.ctrlKey,a=e.shiftKey,s=e.metaKey,i=[t];return n&&"Alt"!==t&&i.unshift("Alt"),r&&"Control"!==t&&i.unshift("Ctrl"),a&&"Shift"!==t&&i.unshift("Shift"),s&&"Meta"!==t&&i.unshift("Meta"),i.join("+")}},{key:"_isKeyEqual",value:function(e,t){return e=e.toLowerCase().replaceAll("control","ctrl").replaceAll("escape","esc"),t=t.toLowerCase().replaceAll("control","ctrl").replaceAll("escape","esc"),e.indexOf("+")>-1&&t.indexOf("+")>-1?e.split("+").sort(function(e,t){return e.charCodeAt(0)>t.charCodeAt(0)?-1:e.charCodeAt(0)<t.charCodeAt(0)?1:0}).join("+")===t.split("+").sort(function(e,t){return e.charCodeAt(0)>t.charCodeAt(0)?-1:e.charCodeAt(0)<t.charCodeAt(0)?1:0}).join("+"):e===t}}],[{key:"getInstance",value:function(){return window.Shortcut?window.Shortcut:window.Shortcut=new e}}]),e})().getInstance();o.vendors.jQuery;var _=o.UIEvents,f=function(e){function a(){return(0,n._)(this,a),(0,t._)(this,a,arguments)}return(0,s._)(a,e),(0,r._)(a,[{key:"mounted",value:function(){var e=this;u((0,h._)(a.prototype),"mounted",this).call(this);var t=this.getPDFUI();this.addDestroyHook(t.addViewerEventListener(_.renderFileSuccess,function(n){n&&n.isPortfolio()?(e.hide(),t.getComponentByName("sidebar-right").then(function(e){e.hide()})):e.show()}))}},{key:"createDOMElement",value:function(){return document.createElement("div")}},{key:"handleClickMore",value:function(){var e=this;if(this.getPDFUI().checkAppSignIn()){var t=Promise.resolve();this.optionsUI||(t=this.getPDFUI().getRootComponent("template-container").then(function(t){e.optionsUI=t.append('<search:basic-search-options name="fv--search-basic-options"></search:basic-search-options>')})),t.then(function(t){var n=e.element.getBoundingClientRect();e.optionsUI.showAt(n.left,n.bottom)})}}},{key:"handleClickType",value:function(e){var t=this;if(this.getPDFUI().checkAppSignIn()){var n=Promise.resolve(),r=this.getPDFUI(),a=r.pdfViewer.getAllActiveElements();a.length&&a.forEach(function(e){r.pdfViewer.deactivateElement(e)}),this.moreUI||(n=this.getPDFUI().getRootComponent("template-container").then(function(e){t.moreUI=e.append('<search:choose-search-type name="fv--search-choose-search-type"></search:choose-search-type>')})),n.then(function(e){var n=t.element.getBoundingClientRect();t.moreUI.showAt(n.left,n.bottom)})}}}],[{key:"getName",value:function(){return"search-bar"}}]),a}(o.SeniorComponentFactory.createSuperClass({template:'\n        <div class="fv__ui-search-bar" @var.self="$component">\n            <div class="fv__ui-search-type-button fv__icon-search-type" \n                    @tooltip tooltip-title="search:searchbar.input.searchFeatures"\n                    @on.native.click="self.handleClickType($event)"\n                    name="fv--search-bar-type-list-button"\n            >\n            </div>\n            <search:search-input name="fv--search-bar-input"></search:search-input>\n            <div class="fv__ui-search-options-button fv__icon-search-more" \n                    @tooltip tooltip-title="search:searchbar.input.findOptions"\n                    @on.native.click="self.handleClickMore($event)"\n                    name="fv--search-options-button"\n            >\n            </div>\n        </div>\n    '})),v=__webpack_require__(2759),p=__webpack_require__.n(v),g=__webpack_require__(9627),y=function(e){function a(){return(0,n._)(this,a),(0,t._)(this,a,arguments)}return(0,s._)(a,e),(0,r._)(a,[{key:"serviceInjected",value:function(){var e=this;this.store=this.searchService.getBaseStore(),this.state=this.store.state,this.store.on("clearSearchText",function(t){e.setHighlightAll(t.highlightAll)})}},{key:"setWholeWordOnly",value:function(e){this.updateState("wholeWordsOnly",e)}},{key:"setCaseSensitive",value:function(e){this.updateState("caseSensitive",e)}},{key:"setIncludeBookmarks",value:function(e){this.updateState("includeBookmarks",e)}},{key:"setIncludeComments",value:function(e){this.updateState("includeComments",e)}},{key:"setHighlightAll",value:function(e){this.updateState("highlightAll",e)}},{key:"updateState",value:function(e,t){this.state[e]=t,this.store.digest()}},{key:"handleClickProp",value:function(){var e=this,t=function(){e.getPDFUI().getComponentByName("fv--search-prop-dialog").then(function(e){e.show()})};if(!this.dialog)return this.getPDFUI().getComponentByName("template-container").then(function(e){e.append('<search:search-prop-dialog name="fv--search-prop-dialog"></search:search-prop-dialog>'),t()});t()}}],[{key:"getName",value:function(){return"basic-search-options"}},{key:"services",value:function(){return{searchService:g.Z}}}]),a}(o.SeniorComponentFactory.createSuperClass({template:p()()})),m=__webpack_require__(7635),k=__webpack_require__(6511),b=__webpack_require__.n(k),w=(o.vendors.jQuery,function(a){function o(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];var s;return(0,n._)(this,o),(s=(0,t._)(this,o,(0,m._)(r))).sidebarOpen=!1,s}return(0,s._)(o,a),(0,r._)(o,[{key:"serviceInjected",value:function(){this.searchManager=this.searchService.getAdvanceSearchManager(),this.store=this.searchService.getAdvanceStore(),this.state=this.store.state,this.store.link(this)}},{key:"mounted",value:function(){for(var e,t=this,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];(e=u((0,h._)(o.prototype),"mounted",this)).call.apply(e,[this].concat((0,m._)(r))),this.getRoot().getMountedComponentByName("sidebar-right").then(function(e){t.sidebarOpen=e.isExpand,t.digest(),e.on("expand",function(){t.sidebarOpen=!0,t.digest()}),e.on("collapse",function(){t.sidebarOpen=!1,t.digest()})})}},{key:"handleClickAdvanced",value:function(){this.activeSearch("normal")}},{key:"handleClickReplace",value:function(){this.pdfUI.eventEmitter.emit("active-find-replace")}},{key:"handleClickRedact",value:function(){this.activeSearch("redaction")}},{key:"handleClickHighlight",value:function(){this.activeSearch("highlight")}},{key:"activeSearch",value:function(t){return(0,e._)(function(){var e,n,r;return(0,i.Jh)(this,function(a){switch(a.label){case 0:return e=this.store,[4,this.pdfUI.getComponentByName("sidebar-right")];case 1:return n=a.sent(),[4,this.pdfUI.getComponentByName("sidebar-right-tabs")];case 2:return r=a.sent(),t===e.state.searchType&&"right-search-panel"===r.activetab&&n.isExpand?(r.closeTab("right-search-panel"),e.state.searchType=""):(n.show(),r.openTab("right-search-panel"),r.setActivetab("right-search-panel"),this.searchManager.setSearchType(t)),e.state.showSearchResult=!1,e.digest(),[2]}})}).call(this)}}],[{key:"getName",value:function(){return"choose-search-type"}},{key:"services",value:function(){return{searchService:g.Z}}}]),o}(o.SeniorComponentFactory.createSuperClass({template:b()()}))),P=(__webpack_require__(7595),o.vendors.jQuery,o.PDFViewCtrl.KeyboardUtils.isMatch),x=o.PDFViewCtrl.KeyboardUtils.matchers,S=x.Enter,R=x.Escape,E=function(e){function i(){return(0,n._)(this,i),(0,t._)(this,i,arguments)}return(0,s._)(i,e),(0,r._)(i,[{key:"createDOMElement",value:function(){return document.createElement("div")}},{key:"serviceInjected",value:function(){this.store=this.searchService.getBaseStore(),this.state=this.store.state,this.store.link(this),this.currentSearchText=""}},{key:"postlink",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;(r=u((0,h._)(i.prototype),"postlink",this)).call.apply(r,[this].concat((0,m._)(t))),this.inputComponent=this.querySelector("@input")}},{key:"mounted",value:function(){for(var e,t,n=this,r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];(e=u((0,h._)(i.prototype),"mounted",this)).call.apply(e,[this].concat((0,m._)(s))),this.searchMgr=this.searchService.getBaseSearchManager(),this.getPDFUI().addViewerEventListener((t={},(0,a._)(t,o.UIEvents.willCloseDocument,function(e){n.searchMgr.clearResult()}),(0,a._)(t,o.UIEvents.renderFileSuccess,function(e){e.isDynamicXFA()?n.inputComponent.disable():n.inputComponent.enable()}),(0,a._)(t,"SEARCH_FROM_CMD",function(e){if(e&&0!==e.length){var t=e[0];n.setSearchText(t.word),n.store.digest(),n.handleNext()}}),t))}},{key:"handleSearchInput",value:function(e){if(this.getPDFUI().checkAppSignIn()){var t,n=e&&e.target&&e.target.value;if(void 0!==n&&n!=this.currentSearchText)null===this||void 0===this||null===(t=this.searchMgr)||void 0===t||t.clearSingleHigtlight(),this.searchMgr.digest(),this.setSearchText(n);this.store.digest()}}},{key:"handleSearch",value:function(e){if(this.getPDFUI().checkAppSignIn()){if(P(e,S)){var t,n=e&&e.target&&e.target.value;if(void 0!==n&&n!=this.currentSearchText)null===this||void 0===this||null===(t=this.searchMgr)||void 0===t||t.clearSingleHigtlight(),this.searchMgr.digest(),this.setSearchText(n);this.store.digest(),this.handleNext()}else P(e,R)&&this.clearSearchText();e.stopPropagation()}}},{key:"handlePrev",value:function(){this.getPDFUI().checkAppSignIn()&&this.search()}},{key:"handleNext",value:function(){this.getPDFUI().checkAppSignIn()&&this.search(!0)}},{key:"search",value:function(e){var t=this,n=e?"next":"prev";this.searchMgr[n]().then(function(e){var n,r;null===(r=t)||void 0===r||null===(n=r.searchMgr)||void 0===n||n.baseHighlight(e,!0)}).catch(function(e){alert("No more result found.")})}},{key:"setSearchText",value:function(e){this.currentSearchText=e,this.state.searchText=e,this.store.digest()}},{key:"clearSearchText",value:function(){var e;this.getPDFUI().checkAppSignIn()&&(this.setSearchText(""),null===this||void 0===this||null===(e=this.searchMgr)||void 0===e||e.clearSingleHigtlight(),this.store.dispatch("clearSearchText"))}},{key:"digest",value:function(){u((0,h._)(i.prototype),"digest",this).call(this)}},{key:"focus",value:function(){this.inputComponent.focus(),this.inputComponent.element.select()}},{key:"hasFocus",value:function(){return this.inputComponent.hasFocus()}}],[{key:"getName",value:function(){return"search-input"}},{key:"services",value:function(){return{searchService:g.Z}}}]),i}(o.SeniorComponentFactory.createSuperClass({template:'\n        <div class="fv__ui-search-input" @var.cmpt="$component">\n            <input aria-label="search doc input" class="fv__ui-search-input-input fv__icon-search-search" data-i18n="[placeholder]search:searchbar.input.placeholder"\n                   @model="cmpt.state.searchText"\n                   @on.native.keydown="cmpt.handleSearch($event)"\n                   name="fv--search-input-input"\n            />\n            <div class="fv__ui-search-button-group" @show="!!cmpt.state.searchText" name="fv--search-input-button-group">\n                <div @on.click="cmpt.handlePrev()" class="fv__icon-search-arrow-up fv__ui-search-button" name="fv--search-input-button-up"></div>\n                <div @on.click="cmpt.handleNext()" class="fv__icon-search-arrow-down fv__ui-search-button" name="fv--search-input-button-down"></div>\n                <div class="fv__icon-search-delete-filling fv__ui-search-button" @on.click="cmpt.clearSearchText()" name="fv--search-input-button-clear"></div>\n            </div>\n        </div>\n    '})),C=(o.vendors.jQuery,function(e){function a(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];var i;return(0,n._)(this,a),(i=(0,t._)(this,a,(0,m._)(r))).tempColor="",i.tempOpacity=0,i.tempInputOpacity=0,i.tempSliderOpacity=0,i}return(0,s._)(a,e),(0,r._)(a,[{key:"serviceInjected",value:function(){var e=this;this.store=this.searchService.getBaseStore(),this.state=this.store.state,this.on("shown",function(){e.setTempColor(e.state.highlightColor),e.setTempOpacity(e.state.highlightOpacity)})}},{key:"handleClickColor",value:function(e){var t=this,n=this.pdfUI.colorSpectrum;n.showTransparent(!1).setDefaultColor(this.tempColor||"#ffffff"),n.show(e.target,function(e){t.setTempColor(e)})}},{key:"handleChangeOpacity",value:function(e,t,n){this.setTempOpacity(n)}},{key:"getBackgroundColor",value:function(){var e=parseInt(this.tempColor.substr(1,2),16),t=parseInt(this.tempColor.substr(3,2),16),n=parseInt(this.tempColor.substr(5,2),16);return"background-color:rgba(".concat(e,",").concat(t,",").concat(n,",").concat(this.tempOpacity/100,")")}},{key:"handleInputOpacity",value:function(e){e=parseInt(e),Number.isNaN(e)||(e>100?e=100:e<0&&(e=0),this.setTempOpacity(e))}},{key:"handleOk",value:function(){this.setColor(this.tempColor),this.setOpacity(this.tempOpacity),this.hide()}},{key:"handleCancel",value:function(){this.hide()}},{key:"setTempColor",value:function(e){this.tempColor=e,this.controller.digest()}},{key:"setTempOpacity",value:function(e){this.tempOpacity=e,this.tempInputOpacity=e,this.tempSliderOpacity=e,this.controller.digest()}},{key:"setColor",value:function(e){this.state.highlightColor=e,this.store.digest()}},{key:"setOpacity",value:function(e){this.state.highlightOpacity=e,this.store.digest()}}],[{key:"getName",value:function(){return"search-prop-dialog"}},{key:"services",value:function(){return{searchService:g.Z}}}]),a}(o.SeniorComponentFactory.createSuperClass({template:'\n    <layer modal class="fv__ui-search-prop-dialog center" append-to="body" @draggable @var.self="$component">\n        <layer-header title="search:searchbar.prop.title"></layer-header>\n        <div class="fv__ui-search-prop-container">\n            <div data-i18n="search:searchbar.prop.intro"></div>\n            <div class="fv__ui-search-prop-background">\n                <div class="fv__ui-search-prop-row">\n                    <div class="fv__ui-search-prop-row-title" data-i18n="search:searchbar.prop.color"></div>\n                    <div class="fv__ui-search-prop-color" \n                        @attr.style="self.getBackgroundColor()"\n                        @on.native.click="self.handleClickColor($event)"></div>\n                </div>\n                <div class="fv__ui-search-prop-row">\n                    <div class="fv__ui-search-prop-row-title" data-i18n="search:searchbar.prop.opacity"></div>\n                    <input class="fv__ui-search-prop-input" \n                        type="number" \n                        @on.input="self.handleInputOpacity.apply(self, $args)"\n                        @model="self.tempInputOpacity"/> %\n                </div>\n                <div class="fv__ui-search-prop-row">\n                    <div class="fv__ui-search-prop-row-title"></div>\n                    <slider class="fv__ui-search-prop-slider" \n                            contrast="true"\n                            @model="self.tempSliderOpacity"\n                            @on.change="self.handleChangeOpacity.apply(self, $args)"\n                            max="100" \n                            min="0" \n                            step="1" \n                            value="31" \n                            @stop-drag>\n                    </slider>\n                </div>\n            </div>\n        </div>\n        <div class="d_f jc_fe footer">\n            <xbutton class="fv__ui-dialog-ok-button" @on.click="self.handleOk()">search:searchbar.prop.ok</xbutton>\n            <xbutton class="fv__ui-dialog-cancel-button" @on.click="self.handleCancel()">search:searchbar.prop.cancel</xbutton>\n        </div>\n    </layer>\n    '}))),O=__webpack_require__(3562),M=__webpack_require__.n(O),T=(o.vendors.jQuery,function(e){function a(){return(0,n._)(this,a),(0,t._)(this,a,arguments)}return(0,s._)(a,e),(0,r._)(a,[{key:"serviceInjected",value:function(){this.searchManager=this.searchService.getAdvanceSearchManager(),this.store=this.searchService.getAdvanceStore(),this.state=this.store.state,this.store.link(this)}},{key:"postlink",value:function(){this.store.digest()}},{key:"setSearchType",value:function(e){this.searchManager.setSearchType(e),this.store.digest()}},{key:"setShowSearchResult",value:function(e){this.state.showSearchResult=e,this.store.digest()}}],[{key:"getName",value:function(){return"advanced-search"}},{key:"services",value:function(){return{searchService:g.Z}}}]),a}(o.SeniorComponentFactory.createSuperClass({template:M()()}))),A=__webpack_require__(8959),D=__webpack_require__.n(A),I=__webpack_require__(9117),L=o.vendors.jQuery,U=o.PDFViewCtrl,W=U.BrowserInfo.isSafari,B=U.DeviceInfo.isTouchDevice,j={phone:["United States","Canada","China","Hong Kong/Taiwan","France","Germany","Japan","Korea","Brazil","Spain","Turkey","United Kingdom","Norway","Denmark","Finland","Iceland","Sweden","Ireland"],security:["United States","Canada","China","Hong Kong/Taiwan","France","Korea","Brazil","Spain","Turkey","United Kingdom","Norway","Denmark","Finland","Iceland","Sweden","Ireland"],bank:["United States","France","Germany","Brazil","Spain","Turkey","United Kingdom","Norway","Denmark","Finland","Iceland","Sweden","Ireland"],driving:["China","Hong Kong/Taiwan","Japan","Korea","United Kingdom","Denmark","Sweden","Ireland"]};j.date=j.phone,j.credit=j.phone,j.email=j.phone;var F=function(a){function o(){return(0,n._)(this,o),(0,t._)(this,o,arguments)}return(0,s._)(o,a),(0,r._)(o,[{key:"serviceInjected",value:function(){var e=this;this.store=this.searchService.getAdvanceStore(),this.searchManager=this.searchService.getAdvanceSearchManager(),this.state=this.store.state,this.watch("$component.state.searchPattern",function(t){var n=j[t]||[];e.setCountryList(n),!e.state.patternCountry&&n.length&&e.setPatternCountry(n[0])}),this.watch("$component.state.searchMode",function(t){"profile"===t&&(0,I.H)().getAllKeys().then(function(t){e.setRedactionProfileList(t)})}),this.watch("$component.state.searchType",function(t){var n=e.state.searchMode;("redaction"!==t&&("profile"===n||"multiple"===n)||"redaction"===t&&"any"===n)&&e.setSearchMode("exact")})}},{key:"mounted",value:function(){u((0,h._)(o.prototype),"mounted",this).call(this),this.$modeSelect=L(".fv__ui-search-mode-select"),this.$countrySelect=L(".fv__ui-search-country-select"),this.setSearchMode("exact"),this.setSearchPattern("select")}},{key:"search",value:function(){return(0,e._)(function(){var e;return(0,i.Jh)(this,function(t){return e=this,"profile"!==this.state.searchMode||this.state.manageRedactionProfile.selectedProfile?(this.searchManager.startSearch().then(function(t){!1!==t&&e.setShowResult(!0)}),[2]):[2]})}).call(this)}},{key:"handleSearchModeChange",value:function(e){this.setSearchMode(e.target.value)}},{key:"handlePatternChange",value:function(e){this.setSearchPattern(e.target.value)}},{key:"handlePatternCountryChange",value:function(e){this.setPatternCountry(e.target.value)}},{key:"oninput",value:function(e){"input"===e.type&&B&&W||(this.store.state.searchText=e.target.value)}},{key:"handleSearchTextKeydown",value:function(e){this.store.digest(),"Enter"===e.key&&this.search()}},{key:"handleSelectWords",value:function(){this.getPDFUI().getComponentByName("search-select-word-dialog").then(function(e){e.show()})}},{key:"handleRedactionProfileChange",value:function(e){this.setSelectedProfile("select"===e.target.value?"":e.target.value)}},{key:"handleClearText",value:function(){this.setSearchText("")}},{key:"handleManageRedactionProfile",value:function(){this.getPDFUI().getComponentByName("search-manage-redaction-profile-dialog").then(function(e){e.show()})}},{key:"handleCreateRedactionProfile",value:function(){Object.assign(this.store.state.manageRedactionProfile,{profileName:"",newWord:"",overlay:"",selectedWords:[],wordOverlayList:[],emptyList:[],searchOptions:{wholeWordsOnly:!1,caseSensitive:!1,highlight:!1,autoSize:!1}}),this.store.digest(),this.getPDFUI().getComponentByName("search-create-redaction-profile-dialog").then(function(e){e.show()})}},{key:"searchBtnAvailable",value:function(){return"pattern"===this.state.searchMode&&"select"===this.state.searchPattern||"any"===this.state.searchMode&&""===this.state.searchText||"exact"===this.state.searchMode&&""===this.state.searchText||"profile"===this.state.searchMode&&this.state.manageRedactionProfile.selectedProfile}},{key:"clearSearch",value:function(){this.searchManager&&this.searchManager.clearSearch()}},{key:"setShowMore",value:function(e){this.state.showMore=e,this.store.digest()}},{key:"setSearchMode",value:function(e){this.state.searchMode=e,this.store.digest(),this.$modeSelect.val(e),this.clearSearch()}},{key:"setSearchType",value:function(e){this.state.searchType=e,this.store.digest(),this.clearSearch()}},{key:"setSearchPattern",value:function(e){this.state.searchPattern=e,this.store.digest(),this.clearSearch()}},{key:"setPatternCountry",value:function(e){this.state.patternCountry=e,this.$countrySelect.val(e),this.store.digest()}},{key:"setCountryList",value:function(e){this.state.countryList=e,this.store.digest()}},{key:"setSearchOptions",value:function(e,t){this.state.searchOptions[e]=t,this.store.digest()}},{key:"setShowResult",value:function(e){this.state.showSearchResult=e,this.store.digest()}},{key:"setSelectedProfile",value:function(e){this.state.manageRedactionProfile.selectedProfile=e,this.store.digest()}},{key:"setRedactionProfileList",value:function(e){this.state.manageRedactionProfile.profileList=e,this.store.digest()}},{key:"setSearchText",value:function(e){this.state.searchText=e,this.store.digest()}}],[{key:"getName",value:function(){return"search-option-panel"}},{key:"services",value:function(){return{searchService:g.Z}}}]),o}(o.SeniorComponentFactory.createSuperClass({template:D()()})),K=__webpack_require__(9789),N=__webpack_require__.n(K),$=__webpack_require__(1609),q=__webpack_require__.n($),H=o.vendors.jQuery,V=o.UIEvents,z=PDFViewCtrl.PDF.constant.User_Permissions,J=o.PDFViewCtrl.shared.createDeferred,Z=o.PDFViewCtrl.constants.PROGRESS_STATUS,Q=function(o){function c(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];var s;return(0,n._)(this,c),(s=(0,t._)(this,c,(0,m._)(r))).searchResultTitle="",s.expendResultFlag=!0,s.allInstanceCount=0,s}return(0,s._)(c,o),(0,r._)(c,[{key:"serviceInjected",value:function(){var e=this,t=this;this.store=this.searchService.getAdvanceStore(),this.searchManager=this.searchService.getAdvanceSearchManager(),this.state=this.store.state,this.watch("$component.state.searchResult.markOptions",function(t){"partial"===t&&e.getPDFUI().getComponentByName("redact-partial-word-dialog").then(function(e){e.show(!0)})}),this.watch("$component.state.searchResult.selectedResult",function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.updateActiveResult.apply(t,(0,m._)(n))}),this.watch("$component.state.searchResult.results",function(){e.setSelectedResult(void 0)}),this.watch("$component.state.searchResult.checkedResults",function(t){e.state.searchResult.results.length?e.state.searchResult.results.find(function(e){return!e.checked})?e.setCheckAll(!1):e.setCheckAll(!0):e.setCheckAll(!1)}),this.watch("$component.state.showSearchResult",function(t){if(t){var n=document.querySelector(".search-result-title-tree-icon");n&&(n.classList.remove("tree--plus"),n.classList.add("tree--minus"),e.expendResultFlag=!0),e.handleCheckAll(!1)}}),this.watch("$component.state.searchType",function(t){e.updateCheckedResults([])}),this.annotPermission=!0,this.modifyDocPermisssion=!0,this.lockMark(!0)}},{key:"lockMark",value:function(e){var t=this.getComponentByName("search-mark-redacts");t&&t[e?"unlock":"lock"]()}},{key:"mounted",value:function(){var e=this;u((0,h._)(c.prototype),"mounted",this).call(this),this.applyButton=this.getComponentByName("search-apply-redacts");var t=this.getPDFUI();this.state.searchResult.markOptions="whole",this.store.digest(),t.getComponentByName("sidebar-right").then(function(n){var r,s=function(t){e.doc=t,e.modifyDocPermisssion=t.checkPermission(z.modify),e.doc.readonly().then(function(t){e.annotPermission=e.doc.checkPermission(z.annotForm)&&!t,e.lockMark(e.annotPermission)}),n.isShow?e.disableApplyButton():e.lazyDisableApplyButton(),e.searchResultTitle=t.getFileName(),e.state.searchResult.checkedResults=[]},i=t.pdfViewer.getCurrentPDFDoc();i&&s(i),t.addViewerEventListener((r={},(0,a._)(r,V.openFileSuccess,s),(0,a._)(r,V.renderPageSuccess,function(t){n.isShow?e.disableApplyButton():e.lazyDisableApplyButton()}),(0,a._)(r,V.annotationAdded,function(t){e.disableApplyButton()}),(0,a._)(r,V.permissionChanged,function(){e.doc&&(e.modifyDocPermisssion=e.doc.checkPermission(z.modify),e.doc.readonly().then(function(t){e.annotPermission=e.doc.checkPermission(z.annotForm)&&!t,e.lockMark(e.annotPermission)}))}),(0,a._)(r,"languageChangeFinished",function(){e.changeResultText()}),r)),n.on("expand",function(){e.disableApplyButtonTask&&e.disableApplyButtonTask.resolve()})}),t.getPDFViewer().then(function(t){var n=function(){-1!==e.state.searchResult.selectedResult&&(e.setSelectedResult(-1),e.searchManager.highlighter.hideAllHighlightMasks())};t.element.addEventListener("click",n,!0),e.addDestroyHook(function(){t.element.removeEventListener("click",n,!0)})})}},{key:"protectedViewStatus",value:function(){return"all"===(localStorage.getItem("SECURITY_PROTECTED_VIEW")||"off")}},{key:"showWarnIcon",value:function(){var e=this.protectedViewStatus();return!this.annotPermission||e}},{key:"showCheckbox",value:function(){return!(this.protectedViewStatus()||!this.annotPermission)&&("normal"!==this.state.searchType&&this.annotPermission)}},{key:"showCheckAll",value:function(){return!this.protectedViewStatus()}},{key:"lazyDisableApplyButton",value:function(){var e=this;this.disableApplyButtonTask=J(),this.disableApplyButtonTask.promise.then(function(){e.disableApplyButton()})}},{key:"handleShowSearchTitle",value:function(){return 0!==this.state.searchResult.results.length||0!==this.state.searchResult.attachmentResults.length}},{key:"changeResultText",value:function(){var e=this.getPDFUI().i18n.t("search:searchPanel.text.resultMetaData");H("#search-result-panel-box").find(".meta-data-text").each(function(t,n){var r=H(n).data("count"),a=e.replace("${1}",r);H(n).text(a)}),this.store.digest()}},{key:"disableApplyButton",value:function(){this.doc&&this.doc.pageCache.some(function(e,t){return!!e&&e.annots.some(function(e){return"redact"==e.getType()})})&&this.annotPermission&&this.modifyDocPermisssion?this.applyButton.enable():this.applyButton.disable()}},{key:"getResultText",value:function(){var e=this.getPDFUI().i18n.t("search:searchPanel.text.resultCount"),t=this.state.searchResult.results.length;t&&this.state.searchResult.results[0].isMetaData&&(t-=1);var n=this.state.searchResult.attachmentResults.reduce(function(e,t){return t.length&&t[0].isMetaData?e+t.length-1:e+t.length},0),r=1+this.state.searchResult.attachmentResults.length||0;return this.allInstanceCount=n+t,e.replace("${1}",n+t).replace("${2}",r)}},{key:"changeCheckALLState",value:function(){return 0===this.allInstanceCount||!this.annotPermission}},{key:"getLookingForText",value:function(){var e=this.state,t=e.searchMode,n=e.searchText,r=e.searchPattern,a="";if(["exact","any"].includes(t))return(a=this.getPDFUI().i18n.t("search:searchPanel.text.lookingWordRes")).replace("${1}",n);if(["multiple","profile"].includes(t))return a=this.getPDFUI().i18n.t("search:searchPanel.text.lookingMulRes");if(["pattern"].includes(t)){var s=this.getPDFUI().i18n.t("search:searchPanel.pattern."+r);return(a=this.getPDFUI().i18n.t("search:searchPanel.text.lookingPatternRes")).replace("${1}",s)}return a}},{key:"updateActiveResult",value:function(e,t){var n=H(".fv__ui-search-normal-result-item")[e],r=H(".fv__ui-search-normal-result-item")[t];n&&n.classList.add("active"),r&&r.classList.remove("active")}},{key:"updateCheckedResults",value:function(e){var t=this;this.querySelectorAll("fv__ui-search-result-check").forEach(function(n,r){e.indexOf(t.state.searchResult.results[r])>=0?n.setValue(!0):n.setValue(!1)})}},{key:"handleCheckAll",value:function(e){this.setCheckAll(e),this.handleClickResultCheckbox(),this.handleExpendSearchResult(!0),this.state.searchResult.results.forEach(function(t){return t.checked=e}),e?this.setCheckedResults([].concat(this.state.searchResult.results),!0):this.setCheckedResults([],!0)}},{key:"handleNewSearch",value:function(){this.applyButton.lock(),this.state.searchResult.checkedResults=[],this.updateCheckedResults([]),this.state.showSearchResult=!1,this.state.showMoreBtn=!0,this.state.searchResult.checkAll=!1,this.store.digest(),this.searchManager.clear()}},{key:"handleSaveSearchResult",value:function(){this.searchManager.saveToCsv()}},{key:"setSelectAndGoToResultHandle",value:function(e){this.setSelectedResult(this.state.searchResult.results.indexOf(e)),this.searchManager.gotoResult(e)}},{key:"handleClickResult",value:function(t){return(0,e._)(function(){var e,n,r,a,s,o,c,l,h,u,d,_;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return e=this,n=t.layer,q()(n)?[3,3]:(r=n.name,a=n.objNum,[4,(s=this.getPDFUI()).getCurrentPDFDoc()]);case 1:return[4,(o=i.sent()).getLayerNodesJson()];case 2:return c=i.sent(),l=c.children,(h=l.filter(function(e){return e.name===r&&e.objNum===a})).length&&(u=h[0],d=u.visible,_=u.id,d?(this.setSelectAndGoToResultHandle(t),s.eventEmitter.emit("needToUpdateLayerTree")):s.confirm({message:"search:searchPanel.dialog.existInHide",level:"warning"}).then(function(){o.setLayerNodeVisiable(_,!0),e.setSelectAndGoToResultHandle(t),s.eventEmitter.emit("needToUpdateLayerTree")},function(){})),[3,4];case 3:this.setSelectAndGoToResultHandle(t),i.label=4;case 4:return[2]}})}).call(this)}},{key:"handleClickResultCheckbox",value:function(){var e=this;if(this.state.searchResult.invalid){var t=this.getPDFUI();t.confirm({message:t.i18n.t("search:searchPanel.dialog.modified"),again:!0,id:"SearchPanelResultModifiedConfirm",level:"prompt"}).then(function(t){e.setShowMoreBtn(!0),e.setCheckAll(!1),("profile"!==e.state.searchMode||e.state.manageRedactionProfile.selectedProfile)&&(e.state.searchResult.checkedResults=[],e.updateCheckedResults([]),e.searchManager.startSearch().then(function(t){!1!==t&&e.setShowResult(!0)}))}).catch(function(){e.store.commit("setSearchResultInvalid",!1)})}}},{key:"handleCheckResult",value:function(e,t){var n=this.state.searchResult.checkedResults,r=n.indexOf(t);e?r<0&&n.push(t):r>=0&&n.splice(r,1),t.checked=e,this.setCheckedResults(n.concat([]))}},{key:"changeHighlightState",value:function(){return!this.state.searchResult.checkedResults.length}},{key:"handleHighlight",value:function(){this.annotPermission&&(this.searchManager.convertToTextMarkup(),this.store.state.searchOptions.highlight=!1,this.store.commit("setSearchResultInvalid",!0))}},{key:"handleExpendSearchResult",value:function(e){var t=this;if(!e){void 0===this.expendResultFlag&&(this.expendResultFlag=!0),this.expendResultFlag=!this.expendResultFlag;var n=document.querySelector(".search-root-icon"),r=document.querySelectorAll(".fv__ui-search-result-item"),a=document.querySelector(".fv__search-more"),s=document.querySelectorAll(".fv__ui-search-attachment-title"),i=document.querySelectorAll(".search-attachment-root-icon");this.expendResultFlag?(n.classList.remove("tree--plus"),n.classList.add("tree--minus"),r.forEach(function(e){return e.style.display="block"}),s&&s.forEach(function(e){return e.style.display="block"}),a&&(a.style.display="block"),i&&i.forEach(function(e){var n=e.getAttribute("attach-root-icon-name");t.handleExpendAttachmentSearchResult(!0,n)})):(n.classList.remove("tree--minus"),n.classList.add("tree--plus"),r.forEach(function(e){return e.style.display="none"}),s&&s.forEach(function(e){return e.style.display="none"}),a&&(a.style.display="none"))}}},{key:"handleExpendAttachmentSearchResult",value:function(e,t){var n=H("#search-result-panel-box"),r=n.find('i[attach-root-icon-name="'.concat(t,'"]'))[0],a=n.find('[attachment-name="'.concat(t,'"]')),s=a.length,i=function(){for(var e=0;e<s;e++)a[e].style.display="block"},o=function(){for(var e=0;e<s;e++)a[e].style.display="none"};e?r.classList.contains("tree--plus")?o():i():r.classList.contains("tree--plus")?(r.classList.remove("tree--plus"),r.classList.add("tree--minus"),i()):(r.classList.remove("tree--minus"),r.classList.add("tree--plus"),o())}},{key:"handleMarkRedaction",value:function(){var e=this;this.annotPermission?this.isAccountExpired()||(this.applyButton.lock(),this.searchManager.markRedaction().then(function(){e.store.commit("setSearchResultInvalid",!0),e.modifyDocPermisssion&&e.applyButton.unlock()})):this.getPDFUI().alert({message:"search:searchPanel.dialog.noModifyPerm",level:"warning"})}},{key:"handleApplyRedaction",value:function(){this.isAccountExpired()||this.getPDFUI().getCurrentPDFDoc().then(function(e){return e.applyRedaction()})}},{key:"handleSetting",value:function(){this.getPDFUI().getComponentByName("redact-partial-word-dialog").then(function(e){e.show(!1)})}},{key:"handleSearchMore",value:function(){var e=this,t=this.getPDFUI().pdfViewer;this.searchManager.store.state.showMoreLoading=!0;var n=t.getScrollWrap();n.disable(!0),t.setEnableScale(!1),this.showLoadingTimeout=setTimeout(function(){t.eventEmitter.emit(V.progressChanged,"advanceSearchMore","sidebar.commentlist.search.loading",Z.PROGRESSING)},1e3),this.searchManager.searchMore().then(function(){e.searchManager.store.state.showMoreLoading=!1,n.disable(!1),t.setEnableScale(!0),clearTimeout(e.showLoadingTimeout),e.showLoadingTimeout=null,t.eventEmitter.emit(V.progressChanged,"advanceSearchMore","",Z.SUCCESS)})}},{key:"setResults",value:function(e){this.state.searchResult.results=e,this.store.digest()}},{key:"setCheckedResults",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.state.searchResult.checkedResults=e,this.store.digest(),t&&this.updateCheckedResults(e)}},{key:"setSelectedResult",value:function(e){this.state.searchResult.selectedResult=e,this.store.digest()}},{key:"setShowResult",value:function(e){this.state.showSearchResult=e,this.store.digest()}},{key:"setCheckAll",value:function(e){this.state.searchResult.checkAll=e,this.store.digest()}},{key:"setShowMoreBtn",value:function(e){this.state.showMoreBtn=e,this.store.digest()}},{key:"isAccountExpired",value:function(){var e=this.getPDFUI().customs.isAccountExpired;return!!e&&e()}}],[{key:"getName",value:function(){return"search-result-panel"}},{key:"services",value:function(){return{searchService:g.Z}}}]),c}(o.SeniorComponentFactory.createSuperClass({template:N()()})),G=__webpack_require__(5237),X=__webpack_require__.n(G);var Y=o.vendors.jQuery,ee=o.PDFViewCtrl.shared.download,te=function(e){function a(){return(0,n._)(this,a),(0,t._)(this,a,arguments)}return(0,s._)(a,e),(0,r._)(a,[{key:"serviceInjected",value:function(){var e=this;this.store=this.searchService.getAdvanceStore(),this.searchManager=this.searchService.getAdvanceSearchManager(),this.state=this.store.state,this.store.link(this),this.watch("$component.state.selectWord.wordList",function(t){t.indexOf(e.state.selectWord.selectedWord)<0&&e.setSelectedWord(""),setTimeout(function(){Y(".fv__ui-search-word-list").val(e.state.selectWord.selectedWord)})}),this.watch("$component.state.selectWord.selectedWord",function(e){Y(".fv__ui-search-word-list").val(e)}),this.on("shown",function(){e.state.selectWord.wordList=[],e.store.digest(),Y(".fv__ui-search-word-import input").attr("accept",".txt")})}},{key:"handleOk",value:function(){this.searchManager.startSearch(),this.hide(),this.state.showSearchResult=!0,this.store.digest()}},{key:"handleCancel",value:function(){this.hide()}},{key:"handleInputNewWord",value:function(e){this.setNewWord(e)}},{key:"handleSelectWord",value:function(e){this.setSelectedWord(e.target.value)}},{key:"handleAdd",value:function(){var e=this.state.selectWord.newWord.trim(),t=this.state.selectWord.wordList;t.indexOf(e)>=0||!e||(t.push(e),this.setWordList(t.concat([])),this.setNewWord(""))}},{key:"handleRemove",value:function(){var e=this.state.selectWord.selectedWord,t=this.state.selectWord.wordList,n=t.indexOf(e);n>=0&&t.splice(n,1),this.setWordList(t.concat([])),this.setSelectedWord("")}},{key:"handleImport",value:function(e){var t=this,n=new FileReader;n.onloadend=function(){var e=t.state.selectWord.wordList,r=n.result,a=function(e){var t=new RegExp('"([^]*?)"',"gm"),n=(e=e.substring(0,1048576).replace(t,"")).split("\r"),r=e.split("\n"),a=r.length>1&&r[0].length<n[0].length;if(1===n.length||a)return console.log("n"),"\n";for(var s=0,i=0;i<n.length;i++)"\n"===n[i][0]&&s++;return s>=n.length/2?console.log("r n"):console.log("r"),s>=n.length/2?"\r\n":"\r"}(r),s=!0,i=!1,o=void 0;try{for(var c,l=r.split(a)[Symbol.iterator]();!(s=(c=l.next()).done);s=!0){var h=c.value;h&&e.indexOf(h)<0&&e.push(h)}}catch(e){i=!0,o=e}finally{try{s||null==l.return||l.return()}finally{if(i)throw o}}t.setWordList(e.concat([]))},n.readAsText(e)}},{key:"handleExport",value:function(){var e="",t=!0,n=!1,r=void 0;try{for(var a,s=this.state.selectWord.wordList[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var i=a.value;e+="".concat(i,"\r\n")}}catch(e){n=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}var o=new Blob([e],{type:"text/plain"});ee(o,"wordList.txt","application/txt")}},{key:"setNewWord",value:function(e){this.state.selectWord.newWord=e,this.store.digest()}},{key:"setSelectedWord",value:function(e){this.state.selectWord.selectedWord=e,this.store.digest()}},{key:"setWordList",value:function(e){this.state.selectWord.wordList=e,this.store.digest()}}],[{key:"getName",value:function(){return"select-word-dialog"}},{key:"services",value:function(){return{searchService:g.Z}}}]),a}(o.SeniorComponentFactory.createSuperClass({template:X()()})),ne=__webpack_require__(1334),re=__webpack_require__.n(ne),ae=o.PDFViewCtrl.shared.download,se=o.vendors.jQuery,ie=function(a){function o(){return(0,n._)(this,o),(0,t._)(this,o,arguments)}return(0,s._)(o,a),(0,r._)(o,[{key:"serviceInjected",value:function(){var e=this;this.store=this.searchService.getAdvanceStore(),this.state=this.store.state,this.store.link(this),this.on("shown",function(){e.loadProfileFromDb().then(function(t){e.setRedactionProfileList(t)})})}},{key:"loadProfileFromDb",value:function(){return(0,I.H)().getAllKeys()}},{key:"deleteProfile",value:function(e){return(0,I.H)().remove(e)}},{key:"isMultipleValues",value:function(){return this.getComponentByName("fv_profile-list").element.selectedOptions.length>1}},{key:"handleChangeSelectedProfile",value:function(e){this.setSelectedProfile(e.target.value)}},{key:"handleClose",value:function(){this.hide()}},{key:"handleEdit",value:function(){var e=this;this.state.manageRedactionProfile.selectedProfile&&(0,I.H)().get(this.state.manageRedactionProfile.selectedProfile).then(function(t){t&&(e.setWordOverlayList(t.list),e.setProfileName(t.name),e.setProfileSearchOptions("wholeWordsOnly",t.wholeWordsOnly),e.setProfileSearchOptions("caseSensitive",t.caseSensitive),e.setProfileSearchOptions("highlight",t.highlight),e.setProfileSearchOptions("autoSize",t.autoSize),e.hide(),e.getPDFUI().getComponentByName("search-create-redaction-profile-dialog").then(function(e){e.show()}))})}},{key:"handleDelete",value:function(){var e=this,t=[];this.getComponentByName("fv_profile-list").element.selectedOptions.forEach(function(n){t.push(e.deleteProfile(n.value))}),this.state.manageRedactionProfile.selectedProfile="",Promise.all(t).then(function(){return e.loadProfileFromDb()}).then(function(t){return e.setRedactionProfileList(t)})}},{key:"handleImport",value:function(t){var n=this,r=new FileReader;r.onloadend=function(){return(0,e._)(function(){var e,t,n,a,s,o,c,l,h,u,d,_,f;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return e=[],t=r.result,n=new DOMParser,se(n.parseFromString(t,"application/xml")).find("profile").each(function(t,n){try{var r=se(n),a={name:r.attr("name"),list:[]};r.children().each(function(e,t){a.list.push({word:se(t).attr("phrase"),overlay:se(t).attr("overlaytext")})}),e.push(a)}catch(e){}}),[4,(a=(0,I.H)()).getAllKeys()];case 1:s=i.sent(),o=!0,c=!1,l=void 0,i.label=2;case 2:i.trys.push([2,9,10,11]),h=e[Symbol.iterator](),i.label=3;case 3:return(o=(u=h.next()).done)?[3,8]:(d=u.value,s.indexOf(d.name)>=0?[4,a.update(d.name,"list",d.list)]:[3,5]);case 4:return i.sent(),[3,7];case 5:return[4,a.add(d)];case 6:i.sent(),i.label=7;case 7:return o=!0,[3,3];case 8:return[3,11];case 9:return _=i.sent(),c=!0,l=_,[3,11];case 10:try{o||null==h.return||h.return()}finally{if(c)throw l}return[7];case 11:return[4,this.loadProfileFromDb()];case 12:return f=i.sent(),this.setRedactionProfileList(f),[2]}})}).call(n)},r.readAsText(t)}},{key:"handleExport",value:function(){return(0,e._)(function(){var e,t,n,r,a;return(0,i.Jh)(this,function(s){switch(s.label){case 0:return[4,(0,I.H)().getAll()];case 1:return e=s.sent(),t="<Foxit>",t+="<profiles>",n=function(e,n){t+='<profile name="'.concat(e.name,'" id="').concat(n,'">');var r=!0,a=!1,s=void 0;try{for(var i,o=e.list[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var c=i.value;t+='<value phrase="'.concat(c.word,'" overlaytext="').concat(c.overlay,'" />')}}catch(e){a=!0,s=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw s}}t+="</profile>"},(r=this.getComponentByName("fv_profile-list").element.selectedOptions).length?r.forEach(function(t){var r=t.value,a=0,s=e.find(function(e,t){return a=t,e.name==r});n(s,a)}):e.forEach(function(e,t){return n(e,t)}),t+="</profiles>",t+="</Foxit>",a=new Blob([t],{type:"text/plain"}),ae(a,"profiles.xml","application/txt"),[2]}})}).call(this)}},{key:"setRedactionProfileList",value:function(e){this.state.manageRedactionProfile.profileList=e,this.store.digest()}},{key:"setSelectedProfile",value:function(e){this.state.manageRedactionProfile.selectedProfile=e,this.store.digest()}},{key:"setWordOverlayList",value:function(e){this.state.manageRedactionProfile.wordOverlayList=e,this.store.digest()}},{key:"setProfileName",value:function(e){this.state.manageRedactionProfile.profileName=e,this.store.digest()}},{key:"setProfileSearchOptions",value:function(e,t){this.state.manageRedactionProfile.searchOptions[e]=!!t,this.store.digest()}}],[{key:"getName",value:function(){return"manage-redaction-profile-dialog"}},{key:"services",value:function(){return{searchService:g.Z}}}]),o}(o.SeniorComponentFactory.createSuperClass({template:re()()})),oe=__webpack_require__(681),ce=__webpack_require__.n(oe),le=o.vendors.jQuery,he=function(e){function a(){return(0,n._)(this,a),(0,t._)(this,a,arguments)}return(0,s._)(a,e),(0,r._)(a,[{key:"show",value:function(){this.localize(),u((0,h._)(a.prototype),"show",this).call(this)}},{key:"serviceInjected",value:function(){var e=this;this.searchManager=this.searchService.getAdvanceSearchManager(),this.store=this.searchService.getAdvanceStore(),this.state=this.store.state,this.store.link(this),this.maxListLength=10,this.firstClickWord="",this.on("shown",function(){e.computeEmptyList()}),this.watch("$component.state.manageRedactionProfile.selectedWords",function(t){e.updateWordListHighlight(t)}),this.watch("$component.state.manageRedactionProfile.wordOverlayList",function(){setTimeout(function(){e.updateWordListHighlight(e.state.manageRedactionProfile.selectedWords),e.computeEmptyList()})})}},{key:"mounted",value:function(){u((0,h._)(a.prototype),"mounted",this).call(this),this.$profileSelect=le(".fv__ui-search-select-profilelist")}},{key:"search",value:function(){var e=this;this.searchManager.startSearch().then(function(t){!1!==t&&(e.setShowResult(!0),e.hide())})}},{key:"saveProfile",value:function(){var e=this.state.manageRedactionProfile.profileName,t=this.state.manageRedactionProfile.profileList;return-1==t.indexOf(e)&&t.push(e),(0,I.H)().add({name:e,list:this.state.manageRedactionProfile.wordOverlayList,wholeWordsOnly:this.wholeWordsOnly,caseSensitive:this.caseSensitive,highlight:this.highlight,autoSize:this.autoSize})}},{key:"computeEmptyList",value:function(){for(var e=[],t=0;t<this.maxListLength-this.state.manageRedactionProfile.wordOverlayList.length;t++)e.push({word:"",overlay:""});this.state.manageRedactionProfile.emptyList=e,this.store.digest(),this.wholeWordsOnly=this.state.manageRedactionProfile.searchOptions.wholeWordsOnly,this.caseSensitive=this.state.manageRedactionProfile.searchOptions.caseSensitive,this.highlight=this.state.manageRedactionProfile.searchOptions.highlight,this.autoSize=this.state.manageRedactionProfile.searchOptions.autoSize}},{key:"updateWordListHighlight",value:function(e){le(".fv__ui-search-word-overlay-tr").each(function(t,n){e.indexOf(n.dataset.word)>=0?n.classList.add("active"):n.classList.remove("active")})}},{key:"handleCancel",value:function(){this.hide()}},{key:"handleClickWord",value:function(e,t){var n=this.state.manageRedactionProfile.selectedWords;if(e.ctrlKey||e.metaKey)n.indexOf(t)>=0?n.splice(n.indexOf(t),1):n.push(t);else if(e.shiftKey){var r=this.state.manageRedactionProfile.wordOverlayList,a=!1;for(var s in n=[],r){var i=r[s].word;if(a){if(n.push(i),i===t||i===this.firstClickWord)break}else i!==t&&i!==this.firstClickWord||(a=!0,n.push(i))}}else n=[t],this.firstClickWord=t;this.setSelectedWords(n.concat([]))}},{key:"handleChangeProfileName",value:function(e){this.setProfileName(e)}},{key:"handleChangeNewWord",value:function(e){this.setNewWord(e)}},{key:"handleChangeOverlay",value:function(e){this.setOverlay(e)}},{key:"handleAdd",value:function(){var e=this.state.manageRedactionProfile.newWord.trim();if(e){var t=this.state.manageRedactionProfile.overlay.trim(),n=this.state.manageRedactionProfile.wordOverlayList,r=!1,a=!0,s=!1,i=void 0;try{for(var o,c=n[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var l=o.value;if(e===l.word){r=!0,l.overlay=t;break}}}catch(e){s=!0,i=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw i}}r||n.push({word:e,overlay:t}),this.setWordOverlayList(n.concat([])),this.setNewWord("")}}},{key:"handleRemove",value:function(){var e=this.state.manageRedactionProfile.wordOverlayList,t=this.state.manageRedactionProfile.selectedWords,n=[],r=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var c=i.value;t.indexOf(c.word)<0&&n.push(c)}}catch(e){a=!0,s=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw s}}this.setWordOverlayList(n),this.setSelectedWords([])}},{key:"handleSaveAndSearch",value:function(){var e=this;this.setSelectedProfile(this.state.manageRedactionProfile.profileName),this.saveProfile().then(function(){e.search()})}},{key:"handleSave",value:function(){var e=this;this.saveProfile().then(function(t){return e.store.digest()}),this.hide()}},{key:"setSelectedProfile",value:function(e){var t=this;this.state.manageRedactionProfile.selectedProfile=e,this.store.digest(),setTimeout(function(){t.$profileSelect.val(e)})}},{key:"setSelectedWords",value:function(e){this.state.manageRedactionProfile.selectedWords=e,this.store.digest()}},{key:"setWordOverlayList",value:function(e){this.state.manageRedactionProfile.wordOverlayList=e,this.store.digest()}},{key:"setShowResult",value:function(e){this.state.showSearchResult=e,this.store.digest()}},{key:"setNewWord",value:function(e){this.state.manageRedactionProfile.newWord=e,this.store.digest()}},{key:"setOverlay",value:function(e){this.state.manageRedactionProfile.overlay=e,this.store.digest()}},{key:"setProfileName",value:function(e){this.state.manageRedactionProfile.profileName=e,this.store.digest()}}],[{key:"getName",value:function(){return"create-redaction-profile-dialog"}},{key:"services",value:function(){return{searchService:g.Z}}}]),a}(o.SeniorComponentFactory.createSuperClass({template:ce()()})),ue=__webpack_require__(4483),de=__webpack_require__.n(ue),_e=o.vendors.jQuery,fe=function(e){function a(){return(0,n._)(this,a),(0,t._)(this,a,arguments)}return(0,s._)(a,e),(0,r._)(a,[{key:"serviceInjected",value:function(){var e=this;this.store=this.searchService.getAdvanceStore(),this.state=this.store.state,this.store.link(this),this.markByPos=["","",""],this.markByCount=["","",""],this.on("hidden",function(){e.shouldChangeMarkOptionsAfterClose&&e.setMarkOptions("whole")})}},{key:"mounted",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;(r=u((0,h._)(a.prototype),"mounted",this)).call.apply(r,[this].concat((0,m._)(t))),this.parseText()}},{key:"parseText",value:function(){var e=this,t=this.getPDFUI(),n=t.i18n.t("search:searchPanel.text.markByPos"),r=t.i18n.t("search:searchPanel.text.markByCount");this.markByPos=n.split("${}"),this.markByCount=r.split("${}"),t.i18n.on("languageChanged",function(n){var r=t.i18n.t("search:searchPanel.text.markByPos"),a=t.i18n.t("search:searchPanel.text.markByCount");e.markByPos=r.split("${}"),e.markByCount=a.split("${}")})}},{key:"show",value:function(e){u((0,h._)(a.prototype),"show",this).call(this),this.shouldChangeMarkOptionsAfterClose=e}},{key:"handleOk",value:function(){this.shouldChangeMarkOptionsAfterClose=!1,this.hide();var e=this.state.searchResult;switch(e.markPartialType){case"position":+e.markPosStart<1&&(e.markPosStart="1"),+e.markPosStart>this.state.searchText.length&&(e.markPosStart=""+this.state.searchText.length);break;case"count":+e.markCountStart<1&&(e.markCountStart="1"),+e.markCountStart>this.state.searchText.length&&(e.markCountStart=""+this.state.searchText.length),+e.markCountEnd<1&&(e.markCountEnd="1"),+e.markCountEnd>this.state.searchText.length&&(e.markCountEnd=""+this.state.searchText.length)}this.store.digest()}},{key:"handleCancel",value:function(){this.hide()}},{key:"handleMarkPosEnd",value:function(e){this.setMarkPosEnd(e.target.value)}},{key:"setMarkPosStart",value:function(e){this.state.searchResult.markPosStart=e,this.store.digest()}},{key:"setMarkPosEnd",value:function(e){this.state.searchResult.markPosEnd=e;var t=_e(".fv__ui-search-markpos-end");t&&t.val(e),this.store.digest()}},{key:"setMarkCountStart",value:function(e){this.state.searchResult.markCountStart=e,this.store.digest()}},{key:"setMarkCountEnd",value:function(e){this.state.searchResult.markCountEnd=e,this.store.digest()}},{key:"setMarkOptions",value:function(e){this.state.searchResult.markOptions=e,this.store.digest()}}],[{key:"getName",value:function(){return"redact-partial-word-dialog"}},{key:"services",value:function(){return{searchService:g.Z}}}]),a}(o.SeniorComponentFactory.createSuperClass({template:de()()})),ve=function(e){function a(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];var i;return(0,n._)(this,a),(i=(0,t._)(this,a,(0,m._)(r))).checked=!1,i.invalid=!1,i}return(0,s._)(a,e),(0,r._)(a,[{key:"serviceInjected",value:function(){this.store=this.searchService.getAdvanceStore()}},{key:"createDOMElement",value:function(){var e=document.createElement("label"),t=document.createElement("span");return t.classList.add("fv__ui-checkbox-inner"),e.appendChild(t),e.classList.add("fv__ui-checkbox"),this.previewerElement=t,e}},{key:"destroy",value:function(){this.element.removeEventListener("click",this.clickHandle),u((0,h._)(a.prototype),"destroy",this).call(this)}},{key:"mounted",value:function(){for(var e,t=this,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];(e=u((0,h._)(a.prototype),"mounted",this)).call.apply(e,[this].concat((0,m._)(r))),this.updateUI(),this.element.addEventListener("click",this.clickHandle=function(){t.invalid||(t.trigger("click"),t.setValue(!t.checked),t.trigger("change",t.getValue()))})}},{key:"render",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;this.element.addClass("fv__ui-search-checkbox"),(r=u((0,h._)(a.prototype),"render",this)).call.apply(r,[this].concat((0,m._)(t)))}},{key:"setValue",value:function(e){void 0!==e&&this.checked!==e&&(this.checked=e,this.updateUI())}},{key:"getValue",value:function(){return this.checked}},{key:"setInvalid",value:function(e){void 0!==e&&(this.invalid=e,this.updateUI())}},{key:"updateUI",value:function(){if(this.element)return this.invalid?(this.element.addClass("fv__icon-search-invalid"),this.element.removeClass("fv__icon-search-rect"),void this.element.removeClass("fv__icon-search-checked")):void(this.checked?(this.element.addClass("fv__icon-search-checked"),this.element.removeClass("fv__icon-search-rect"),this.element.removeClass("fv__icon-search-invalid")):(this.element.addClass("fv__icon-search-rect"),this.element.removeClass("fv__icon-search-invalid"),this.element.removeClass("fv__icon-search-checked")))}}],[{key:"getName",value:function(){return"checkbox"}},{key:"services",value:function(){return{searchService:g.Z}}}]),a}(o.Component),pe=function(c){function h(){return(0,n._)(this,h),(0,t._)(this,h,arguments)}return(0,s._)(h,c),(0,r._)(h,[{key:"init",value:function(e){var t=this;this.pdfUI=e;e.addViewerEventListener((0,a._)({},o.PDFViewCtrl.Events.renderFileSuccess,function(){})),e.getRootComponent().then(function(n){t.searchService=e.getServiceInstance(g.Z),t.updateSearchPreference(e.customs.getSearchPreference());var r=o.PDFViewCtrl.keyboard,a=r.BuiltinShortcutContext,s=r.interceptors,i=o.shared.keyboard.BuiltinPDFUIShortcutCommand;e.getKeyboard().then(function(n){n.withContext(a.VIEWER,function(n){n.keydown(i.QUICK_SEARCH,function(n){var r,a;n.preventDefault(),(null===(r=e.customs)||void 0===r?void 0:r.isCollaborationMode)&&(null===(a=e.customs)||void 0===a?void 0:a.isCollaborationMode())?t.collaborateToolbar.find("input").focus():t.toolbar&&t.toolbar.querySelector("@search:search-input").focus()},{interceptors:[s.preventDefaultInterceptor()]})})})})}},{key:"openPanel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"redaction",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"exact";return(0,e._)(function(){var e,r,a,s,o,c,l;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return[4,(e=this.pdfUI).getComponentByName("sidebar-right")];case 1:return r=i.sent(),[4,e.getComponentByName("sidebar-right-tabs")];case 2:return a=i.sent(),r.show(),a.openTab("right-search-panel"),a.setActivetab("right-search-panel"),[4,e.getComponentByName("advanced-search")];case 3:return(s=i.sent()).setSearchType(t),s.store.state.searchMode=n,s.store.digest(),[3,5];case 4:if(o=i.sent(),c=s.store.state.searchResult.results,l=c.filter(function(e){return!e.isMetaData}),window.pdfui.textCmdSearchCount=l.length,0===l.length&&a.openTabs.includes("right-ai-panel")&&a.setActivetab("right-ai-panel"),!1===o)return[2];l.length>0&&(s.store.state.showSearchResult=!0,s.store.digest()),i.label=5;case 5:return[2]}})}).call(this)}},{key:"receiveAction",value:function(e,t){var n=this[e];if("function"==typeof n)return n.apply(this,t)}},{key:"updateSearchPreference",value:function(e){var t=this.searchService.getAdvanceStore(),n=this.searchService.getBaseStore();t.state.preference=e,t.digest(),n.state.preference=e,n.digest(),localStorage&&localStorage.setItem("init_search_config","1"),this.pdfUI.eventEmitter.emit("search-preference-changed")}}],[{key:"getName",value:function(){return"SearchAddon"}},{key:"getLoader",value:function(){return l()}},{key:"initOnLoad",value:function(){var e=o.modular.module("search");[f,y,E,T,C,F,Q,te,ie,he,fe,w,ve].forEach(function(t){return e.registerComponent(t)})}}]),h}(o.UIXAddon)})(),__webpack_exports__=__webpack_exports__.default,__webpack_exports__})());