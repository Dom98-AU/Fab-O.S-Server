!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("UIExtension"),require("UIExtension").PDFViewCtrl.commons,require("UIExtension").__ui_lib__):"function"==typeof define&&define.amd?define(["UIExtension",["UIExtension","PDFViewCtrl","commons"],["UIExtension","__ui_lib__"]],t):"object"==typeof exports?exports.ARIAUIXAddon=t(require("UIExtension"),require("UIExtension").PDFViewCtrl.commons,require("UIExtension").__ui_lib__):e.ARIAUIXAddon=t(e.UIExtension,e.UIExtension.PDFViewCtrl.commons,e.UIExtension.__ui_lib__)}(self,(e,t,n)=>(()=>{var i={511:e=>{e.exports=null},616:t=>{"use strict";t.exports=e},732:e=>{"use strict";e.exports=t},399:e=>{"use strict";e.exports=n}},a={};function r(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return i[e](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o={};return(()=>{"use strict";function e(t){return e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e(t)}function t(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(t=function(){return!!e})()}function n(e,t){return!t||"object"!=((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t;var n}function i(i,a,r){return a=e(a),n(i,t()?Reflect.construct(a,r||[],e(i).constructor):a.apply(i,r))}function a(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):a(e,t)}function l(e,t){if(!a(e,t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}r.d(o,{default:()=>Or});var f=r(616),h=r(511),v=r.n(h);function m(t,n,i){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,n,i){var a=function(t,n){for(;!Object.prototype.hasOwnProperty.call(t,n)&&null!==(t=e(t)););return t}(t,n);if(a){var r=Object.getOwnPropertyDescriptor(a,n);return r.get?r.get.call(i||t):r.value}},m(t,n,i||t)}var b=function(t){function n(){return l(this,n),i(this,n,arguments)}return d(n,t),s(n,[{key:"init",value:function(t){m(e(n.prototype),"init",this).call(this,t),this.attrValue&&t.setAttribute("role",this.attrValue)}}],[{key:"getName",value:function(){return"role"}}]),n}(f.Directive),p=f.PDFViewCtrl,g=p.PDF,y=(g.form.constant.Field_Type,p.shared.browser.eventPath),_=g.constant,E=(_.Action_Trigger,_.Graphics_ObjectType,p.keyboard),w=(E.BuiltinShortcutCommand,E.BuiltinShortcutContext,E.KeyboardUtils),x=p.ViewerEvents,k=f.UIConsts.COMPONENT_EVENTS,A=(f.Directive,p.shared.debounce),S=p.constants.PagePointType,C=p._internal.shared,D=(C.Lazy,C.attachKeypressEvent),q=(C.preventFastClickByKeydown,C.createClickEvent),L=(f.PDFUI,p.shared.ThrottleAsyncTaskExecutor),$=p.constants.STATE_HANDLER_NAMES.STATE_HANDLER_HAND,P=p.commons.isEditable;p.vendors.jQuery;function T(e,t){if(e)for(var n in t)N(e,n,t[n])}function N(e,t,n){null!=n&&e&&e.getAttribute(t)!==n+""&&e.setAttribute(t,n)}function I(e,t){e&&t&&e.removeAttribute(t)}function F(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];e&&n.forEach(function(t){t&&e.removeAttribute(t)})}var H=function(e){function t(){return l(this,t),i(this,t,arguments)}return d(t,e),s(t,[{key:"componentMounted",value:function(){var e=this,t=this.component,n=this.subName;if("tablist"===n)N(t.element,"role","tablist");else if("tab"===n){var i=t.element.getAttribute("body");t.getRoot().getMountedComponentByName(i).then(function(n){e.isDestroyed||T(t.element,{role:"tab","aria-selected":"false","aria-controls":n.element.id})})}else if("tabpanel"===n){var a=t.getRoot().getComponentByName("toolbar-tabs").element.querySelector("[body=".concat(t.name,"]"));if(!a)return;T(t.element,{role:"tabpanel",tabindex:"0","aria-labelledby":a.id})}}}],[{key:"getName",value:function(){return"toolbar"}}]),t}(f.Directive);function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function O(e,t){if(e){if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}function M(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var U="__aria_addon_override_methods__";function B(e,t){V(e.prototype,t,!0)}function V(e,t){var n=function(n){var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=this;return r.call(this,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;return o.apply(i,e)},t)},r=t[n];if(r[U])throw new Error("The method '".concat(n,"' of ").concat(clazz," has been overwrited more then once! Please confirm whether the'aria' addon has been loaded."));var o=e[n];a.$origin=o,e[n]=a,a[U]=!0,i||"function"!=typeof e.addDestroyHook||e.addDestroyHook(function(){a[U]=!1,e[n]=o})},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var a in t)n(a)}var z="unique_"+Date.now().toString(36),j=0;function G(e){return[e||"",z,j++].join("_")}var K=f.PDFViewCtrl.shared.isEditableElement,W=w.match,X=w.matchers,Q=w.isMatch,J=X.or,Z=X.ArrowUp,Y=X.ArrowDown,ee=X.ArrowLeft,te=X.ArrowRight,ne=X.Enter,ie=X.Space,ae=X.Home,re=X.End,oe=X.Tab;function le(e,t,n,i,a,r,o){try{var l=e[r](o),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(i,a)}function ce(e){return function(){var t=this,n=arguments;return new Promise(function(i,a){var r=e.apply(t,n);function o(e){le(r,i,a,o,l,"next",e)}function l(e){le(r,i,a,o,l,"throw",e)}o(void 0)})}}function se(e,t){var n,i,a,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(a=2&l[0]?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(!(a=r.trys,(a=a.length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){r=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){r.label=l[1];break}if(6===l[0]&&r.label<a[1]){r.label=a[1],a=l;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(l);break}a[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(e){l=[6,e],i=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;var ue=w.match,de=w.matchers,fe=de.Enter,he=de.ArrowUp,ve=de.ArrowDown,me=de.Escape;function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return r}}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var pe=w.match,ge=w.matchers,ye=(ge.ArrowUp,ge.ArrowDown,ge.Home,ge.End,ge.Enter),_e=null;function Ee(){_e.querySelectorAll(".fv__ui-dialog-button").forEach(function(e){e.classList.contains("disabled")?(e===document.activeElement&&_e.querySelector("[name=name]").focus(),T(e,{tabindex:-1,disabled:!0})):(N(e,"tabindex",0),I(e,"disabled"))})}var we=w.isMatch,xe=(w.match,w.matchers),ke=xe.or,Ae=xe.Space,Se=xe.Enter;var Ce=w.match,De=w.matchers,qe=De.Enter,Le=De.Space,$e=De.or;var Pe=w.match,Te=w.matchers,Ne=w.isMatch,Ie=Te.ArrowUp,Fe=Te.ArrowDown,He=Te.ArrowLeft,Re=Te.ArrowRight,Oe=Te.or,Me=Te.Enter,Ue=Te.Space,Be=Te.Escape,Ve=15;function ze(e){if(e.isActive)if(e.selectable&&e.selectedItem&&!e.selectedItem.disabled)e.selectedItem.focus();else if(!e.selectable){var t=e.childAt(0);if(!t)return;for(var n=t,i=1;n&&n.disabled;)n=e.childAt(i),i++;if(!n)return;if(n.focus(),!n.hasFocus()){var a=n.childAt&&n.childAt(0);a&&a.focus()}}}var je=w.isMatch,Ge=w.matchers,Ke=Ge.or,We=Ge.Enter,Xe=Ge.Space,Qe=0;function Je(e){return e+(Qe++).toString(36)}function Ze(e){return e.separate?e.caretElement:e.togglerElement}var Ye=w.match,et=w.matchers.Enter;w.match;var tt=w.matchers;tt.Space,tt.Enter,tt.ArrowLeft,tt.ArrowRight,tt.Home,tt.End,tt.Tab,tt.or;var nt=f.PDFViewCtrl.shared.createFocusEvent,it=w.match,at=w.matchers;function rt(e){var t=e.getBoundingClientRect(),n=t.width,i=t.height;return n&&i}var ot=w.match,lt=w.matchers,ct=lt.Enter,st=lt.Space,ut=lt.ArrowLeft,dt=lt.ArrowRight,ft=lt.ArrowUp,ht=lt.ArrowDown,vt=lt.Home,mt=lt.End,bt=lt.or;var pt=["Static","SignHere","Dynamic","Favorite"];var gt=w.match,yt=w.matchers,_t=yt.Enter,Et=yt.Space,wt=yt.Home,xt=yt.End,kt=yt.ArrowLeft,At=yt.ArrowRight,St=yt.or;var Ct=w.match,Dt=w.matchers,qt=w.isMatch,Lt=Dt.Tab,$t=Dt.Enter,Pt=Dt.Escape,Tt=Dt.Home,Nt=Dt.End,It=Dt.ArrowUp,Ft=Dt.ArrowDown,Ht=Dt.or;var Rt=function(e,t,n){if(t.lable){var i=t.lable;n.addDestroyHook(n.localizer.watch(i,{},i,function(t){e.setAttribute("aria-label",t)}))}else e.setAttribute("aria-label",t.value)},Ot=function(t){function n(){return l(this,n),i(this,n,arguments)}return d(n,t),s(n,[{key:"init",value:function(t){m(e(n.prototype),"init",this).call(this,t);var i=this.subName,a=this.attrValue;this.addDestroyHook(t.controller.watch(a,function(e){t.setAttribute("aria-"+i,e)}))}}],[{key:"getName",value:function(){return"attr"}}]),n}(f.Directive),Mt=function(e){function t(e){var n;return l(this,t),(n=i(this,t,[e])).order=1/0,n}return d(t,e),s(t,[{key:"getTargetElement",value:function(){var e=this.component,t=a(e,f.components.widgets.DropdownComponent),n=a(e,f.components.widgets.RibbonButtonComponent),i=!t&&a(e,f.components.widgets.SelectComponent);if(t){switch(this.subName){case"caret":return e.caretElement;case"icon":return e.iconElement;case"editor":return e.editElement;case"list":return e.listElement}return e.togglerElement}if(n){if("list"===this.subName){var r=e.getDropdown();return r&&r.listElement}}else if(i)return e.element.querySelector(".fv__ui-select");return e.element}}]),t}(f.Directive),Ut=function(e){function t(e){var n;return l(this,t),(n=i(this,t,[e])).order=1/0,n}return d(t,e),s(t,[{key:"componentMounted",value:function(){var e=this.component,t=this.getTargetElement(),n=this.attrValue;n||(n=e.text),n||(n=e.getAttribute("tooltip-title"));var i=e.localizer.watch(n,{},n,function(e){t.getAttribute("aria-labelledby")&&t.removeAttribute("aria-labelledby"),t.setAttribute("aria-label",e)});this.addDestroyHook(i)}}],[{key:"getName",value:function(){return"label"}}]),t}(Mt),Bt=function(e){function t(e){var n;return l(this,t),(n=i(this,t,[e])).order=1/0,n}return d(t,e),s(t,[{key:"componentMounted",value:function(){var e=this.component,t=this.getTargetElement(),n=this.attrValue;n||(n=e.text),n||(n=e.getAttribute("tooltip-title"));var i=e.localizer.watch(n,{},n,function(e){t.setAttribute("title",e)});this.addDestroyHook(i)}}],[{key:"getName",value:function(){return"title"}}]),t}(Mt),Vt=function(e){function t(){return l(this,t),i(this,t,arguments)}return d(t,e),s(t,[{key:"componentMounted",value:function(){var e=this,t=this.component,n=A(function(){if(!t.isDestroyed){var n=t.querySelectorAll(e.attrValue);if(n.length>0){var i=n.map(function(e){return e.id});t.setAttribute("aria-describedby",i.join(" "))}else t.removeAttribute("aria-describedby")}},100),i=t.context;this.addDestroyHook(i.onModifyTree(n),i.onStatusChange(n))}}],[{key:"getName",value:function(){return"describedby"}}]),t}(f.Directive),zt=function(e){function t(){return l(this,t),i(this,t,arguments)}return d(t,e),s(t,[{key:"componentMounted",value:function(){var e=this,t=this.component,n=a(t,f.components.widgets.DropdownComponent),i=!n&&a(t,f.components.widgets.SelectComponent),r=A(function(){if(!t.isDestroyed){var a=t.querySelectorAll(e.attrValue),r=function(){if(n){switch(e.subName){case"caret":return t.caretElement;case"icon":return t.iconElement;case"editor":return t.editElement}return t.togglerElement}return i?t.element.querySelector(".fv__ui-select"):t.element}();if(r)if(a.length>0){var o=a.map(function(e){return e.id});r.setAttribute("aria-labelledby",o.join(" "))}else r.removeAttribute("aria-labelledby")}},100),o=t.context;this.addDestroyHook(o.onModifyTree(r),o.onStatusChange(r))}}],[{key:"getName",value:function(){return"labelledby"}}]),t}(f.Directive),jt=function(e){function t(){return l(this,t),i(this,t,arguments)}return d(t,e),s(t,[{key:"componentMounted",value:function(){var e=this,t=this.component,n=A(function(){if(!t.isDestroyed){var n=t.querySelectorAll(e.attrValue),i=e.subName;switch(i){case"activedescendant":case"describedby":case"labelledby":case"flowto":case"owns":case"controls":break;default:throw new Error("[ARIA]".concat(e.attrName,": Unidentified relative aria property: ").concat(i))}var a="aria-"+i;if(n.length>0){var r=n.map(function(e){return e.id});t.setAttribute(a,r.join(" "))}else t.removeAttribute(a)}},100),i=t.context;this.addDestroyHook(i.onModifyTree(n),i.onStatusChange(n))}}],[{key:"getName",value:function(){return"rel"}}]),t}(f.Directive),Gt=function(t){function n(){return l(this,n),i(this,n,arguments)}return d(n,t),s(n,[{key:"init",value:function(t){m(e(n.prototype),"init",this).call(this,t),this.addDestroyHook(t.localizer.watch(this.attrValue,{},this.attrValue,function(e){t.setAttribute("alt",e)}))}}],[{key:"getName",value:function(){return"alt"}}]),n}(f.Directive);var Kt=w.match,Wt=w.matchers;var Xt=function(e){function t(){return l(this,t),i(this,t,arguments)}return d(t,e),s(t,[{key:"componentMounted",value:function(){var e=this,t=this.component;T(t,{role:"button",tabindex:0});var n=setInterval(function(){if(!e.isDestroyed){var n=t.element;T(n,{"aria-disabled":n.classList.contains("disabled"),tabindex:n.classList.contains("disabled")?"-1":"0"})}},500);this.addDestroyHook(function(){clearInterval(n)})}}],[{key:"getName",value:function(){return"button"}}]),t}(f.Directive);var Qt=["$"," DM","€","fl"," F"," kr","Lit. "," Pts","£","$A. ","$NZ. ","Руб ","ESC. ","HK$ ","P. ","RMB¥","NT$ ","S.$ ","W","¥","zł","SEK ","kr ","C$ "],Jt=function(){function e(){l(this,e)}return s(e,null,[{key:"GetSeperatorString",value:function(e,t){var n=""+e,i=n.length;return i>3?0==t?this.GetSeperatorString(parseInt(n.substr(0,i-3)),t)+"."+n.substr(i-3):1==t?this.GetSeperatorString(parseInt(n.substr(0,i-3)),t)+","+n.substr(i-3):this.GetSeperatorString(parseInt(n.substr(0,i-3)),t)+" "+n.substr(i-3):n}},{key:"GetSampNumberFormat",value:function(e,t,n,i,a,r){var o="",l="",c=[];if(t>=0&&n>=0&&i>=0&&r>=0){var s="",u="",d=(l=""+e.toFixed(parseInt(t))).indexOf(".");d>0?(u=l.substr(0,d),s=l.substr(d)):(u=l,s="");var f="";for(0==n&&(f=this.GetSeperatorString(parseInt(u),1)+s),1==n&&(f=l),2==n&&(s=s.replace(".",","),f=this.GetSeperatorString(parseInt(u),0)+s),3==n&&(f=(f=l).replace(".",",")),4==n&&(s=s.replace(".",","),f=this.GetSeperatorString(parseInt(u),2)+s);;){if(0==a){o="$";break}if(1==a){o="DM";break}if(2==a){o="€";break}if(3==a){o="f";break}if(4==a){o="F";break}if(5==a){o="kr";break}if(6==a){o="Lit.";break}if(7==a){o="Pts";break}if(8==a){c[0]=163,o=String.fromCharCode.apply(String,c);break}if(9==a){o="$A.";break}if(10==a){o="$NZ.";break}if(11==a){c[0]=1056,c[1]=1091,c[2]=1073,o=String.fromCharCode.apply(String,c);break}if(12==a){o="ESC.";break}if(13==a){o="HK$";break}if(14==a){o="P.";break}if(15==a){c[0]=65509,o=String.fromCharCode.apply(String,c);break}if(16==a){o="NT$";break}if(17==a){o="S.$";break}if(18==a){c[0]=8361,o=String.fromCharCode.apply(String,c);break}if(19==a){c[0]=165,o=String.fromCharCode.apply(String,c);break}if(20==a){c[0]=122,c[1]=322,o=String.fromCharCode.apply(String,c);break}if(21==a){o="SEK";break}if(22==a){o="kr";break}if(23==a){c[0]=67,c[1]=36,o=String.fromCharCode.apply(String,c);break}if(a>23||a<0)break}if(2&i){0==r?l="("+f+" "+o+")":l="("+o+f+")"}else if(0==r)l=f+o;else{l=o+f}}return l}},{key:"GetSampPercentFormat",value:function(e,t,n){var i="";if(t>=0&&n>=0){i=""+(100*e).toFixed(parseInt(t));var a="",r="",o=(i+="%").indexOf(".");o>0?(r=i.substr(0,o),a=i.substr(o)):(r=i,a="");var l="";0==n&&(l=this.GetSeperatorString(parseInt(r),1)+a),1==n&&(l=i),2==n&&(a=a.replace(".",","),l=this.GetSeperatorString(parseInt(r),0)+a),3==n&&(l=(l=i).replace(".",",")),4==n&&(a=a.replace(".",","),l=this.GetSeperatorString(parseInt(r),2)+a),i=l}return i}},{key:"GetFormatStringType",value:function(e){return e&&""!=e?0==e.indexOf("AFNumber_Format")?1:0==e.indexOf("AFPercent_Format")?2:0==e.indexOf("AFDate_FormatEx")?3:0==e.indexOf("AFTime_Format")?4:0==e.indexOf("AFSpecial_Format")?5:-1:0}},{key:"GetKeystrokeStringType",value:function(e){return e&&""!=e?0==e.indexOf("AFNumber_Keystroke")?1:0==e.indexOf("AFPercent_Keystroke")?2:0==e.indexOf("AFDate_KeystrokeEx")?3:0==e.indexOf("AFTime_Keystroke")?4:0==e.indexOf("AFSpecial_Keystroke")?5:-1:0}},{key:"GetPercentageValues",value:function(e){var t,n=-1,i=e.length,a=e.indexOf("("),r=i-a-3,o=e.substr(a+1,r).split(","),l=o[0];t=Number(l);for(var c=0;c<o.length&&!(++c>=2)&&""!=(l=o[c]);)1==c&&(n=Number(l));return{iDec:t,iSep:n}}},{key:"StringFromUnicode",value:function(e){for(var t=!1,n="0x",i="",a=0;a<e.length;a++){var r=e[a];"\\"==e[a]&&a+1<e.length&&("u"==e[a+1]||"U"==e[a+1])?(a+=1,t&&(i+=String.fromCharCode(n),n="0x"),t=!0):t?n+=r:(i+=r,t=!1)}return t&&(i+=String.fromCharCode(n)),i}},{key:"GetNumberValues",value:function(e){var t,n=1,i=-1,a=-1,r=-1,o=-1,l=e.length,c=e.indexOf("("),s=l-c-3,u=e.substr(c+1,s).split(",");t=Number(u[0]);for(var d=0;d<u.length&&!(++d>=6);){var f=u[d];if(""==f)break;if(1!=d)if(2!=d)if(3!=d)if(4!=d){if(5==d)o=f.indexOf("false")>=0?0:1}else{var h=f;if(""==h){r=-1;continue}h=(h=(h=(h=h.replace(/"/g,"")).replace(/'/g,"")).replace("\\u0020"," ")).trim(),h=this.StringFromUnicode(h);for(var v=0;v<24;v++){var m=Qt[v];if(h==(m=(m=m.replace(" "," ")).trim())){r=v;break}}v>23&&(r=-1)}else a=0;else{var b=Number(f);0!=b&&1!=b&&2!=b&&3!=b||(i=b)}else n=Number(f)}return{iDec:t,iSep:n,iNeg:i,iDef:a,iMoney:r,iPre:o}}},{key:"GetRangeValues",value:function(e){for(var t,n=!1,i=!1,a="",r="",o=e.indexOf("("),l=e.indexOf(")"),c=e.substr(o+1,l-o-1).split(","),s=0;s<c.length;){t=(t=c[s]).trim(),0==s||2==s?"true"==t.toLowerCase()?0==s?n=!0:i=!0:0==s?n=!1:i=!1:1!=s&&3!=s||(1==s?a=t:r=t),s++}return{bFrom:n,bTo:i,csiFrom:a,csiTo:r}}}]),e}(),Zt=w.match,Yt=w.matchers,en=Yt.ArrowUp,tn=Yt.ArrowDown;var nn=w.match,an=w.matchers,rn=an.Enter,on=an.Space,ln=an.ArrowUp,cn=an.ArrowDown,sn=an.ArrowLeft,un=an.ArrowRight,dn=an.or;function fn(e){e&&B(e.addon.constructor,{getDialog:function(e){var t=e();return function(e){var t=e.$element;if(!t)return;if("field-pick-dialog"===e.dialog.attrs.name){hn(t);var n=t.find('input[type="radio"]');n.off("focus"),n.on("focus",function(e){hn(t),function(e){var t=e.target.parentElement.querySelectorAll(".fv__pick-left input[type=radio] + label + .fv__submit-datas input");t.length>0&&t.forEach(function(e){e.removeAttribute("disabled")})}(e)}),n.off("change"),n.on("change",function(e){var n=t.find(".fv__fiels-bottom .fv__field-buttons #selectAll"),i=t.find(".fv__fiels-bottom .fv__field-buttons #deselectAll");"selectedFieldsButton"===e.target.id?(n.attr("tabindex","0"),i.attr("tabindex","0")):(n.attr("tabindex","-1"),i.attr("tabindex","-1"))})}else if("multiple-copy-dialog"===e.dialog.attrs.name){var i=t.find(".fv__multiple-copy-position .bg-wrap");i.off("keydown"),i.on("keydown",vn)}var a=t.find("[role=button]");a.off("keyup",mn),a.on("keyup",mn)}(t),t}})}function hn(e){e.find(".fv__pick-left input[type=radio] + label + .fv__submit-datas input").attr("disabled","true")}function vn(e){var t=this;nn(e).when(sn,function(){t.querySelector(".left").focus()}).when(un,function(){t.querySelector(".right").focus()}).when(cn,function(){t.querySelector(".down").focus()}).when(ln,function(){t.querySelector(".up").focus()})}function mn(e){var t=this;nn(e.originalEvent).when(dn(rn,on),function(){t.click(e)})}var bn=g.form.constant.Field_Type,pn=g.constant.Action_Trigger,gn=w.match,yn=w.matchers,_n=yn.ArrowRight,En=yn.ArrowLeft,wn=yn.Home,xn=yn.End,kn=yn.Enter;function An(e){var t=document.activeElement,n=y(e.originalEvent).filter(function(e){return e.classList&&e.classList.contains("fv__action_tab")})[0];if("DIV"===t.tagName)n.querySelectorAll(".fv__action-delete,.fv__action-edit").forEach(function(e){N(e,"tabindex",0)});else if("LI"===t.tagName){var i=n.querySelector(".fv__action-edit"),a=n.querySelector(".fv__action-delete");N(i,"tabindex","-1"),N(a,"tabindex","0")}}function Sn(e){e();var t=this.$element.find(".fv__action_list"),n=this.$element.find(".fv_action-info-toggler");t.find("[tabindex]").off("keydown",Cn),n.off("click",Pn),t.find("[tabindex]").off("click",Tn)}function Cn(e){var t=function(e){var t=null,n={};if(void 0!==e.key)t="key",n={Enter:"Enter"," ":" ",End:"End",Home:"Home",ArrowLeft:"ArrowLeft",ArrowRight:"ArrowRight",ArrowDown:"ArrowDown",ArrowUp:"ArrowUp","*":"*"};else{if(void 0===e.keyCode)return"";t="keyCode",n={13:"Enter",32:" ",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",56:"*"}}return n[e[t]]}(e);if("Enter"===t)this.querySelector(":nth-child(2)").click(),this.focus();else if(" "===t)this.querySelector(":nth-child(2)").click(),this.focus();else if("End"===t){this.setAttribute("tabindex","-1"),$n(Dn(e,this))}else if("Home"===t){this.setAttribute("tabindex","-1"),$n(Dn(e,this,0))}else if("ArrowLeft"===t)if("div"===this.tagName.toLowerCase())Ln(this),e.stopPropagation();else{if("li"!==this.tagName.toLowerCase())return;if(this.querySelector(".fv_action-info-toggler").classList.contains("fv__minusonly_pc"))Ln(this),e.stopPropagation();else{var n=function(t){var i=Dn(e,t,-1);return"div"===i.tagName.toLowerCase()?i:n(i)};$n(n(this))}}else if("ArrowRight"===t)if("div"===this.tagName.toLowerCase())if(this.querySelector(".fv_action-info-toggler").classList.contains("fv__plugonly_pc"))qn(this),e.stopPropagation();else{var i=Dn(e,this,1);i&&$n(i)}else{if("li"!==this.tagName.toLowerCase())return;qn(this),e.stopPropagation()}else if("ArrowDown"===t){this.setAttribute("tabindex","-1");var a=Dn(e,this,1);a&&$n(a)}else if("ArrowUp"===t){this.setAttribute("tabindex","-1");var r=Dn(e,this,-1);r&&$n(r)}else{if("*"!==t)return;M(this.parentElement.children).forEach(function(e){e.querySelector(".fv_action-info-toggler").classList.replace("fv__plugonly_pc","fv__minusonly_pc")})}e.stopPropagation(),e.preventDefault()}function Dn(e,t,n){var i=y(e.originalEvent).filter(function(e){return e.classList&&e.classList.contains("fv__action_tab")})[0];if(i){var a=i.querySelectorAll("[role='treeitem']"),r=(a=M(a).filter(function(e){var t=e.getBoundingClientRect(),n=t.width,i=t.height;return 0!==n||0!==i})).indexOf(t),o=a.length;return 0===n?a[0]:"number"==typeof n?a[(r+n+o)%o]:a[o-1]}}function qn(e){e.querySelector(".fv_action-info-toggler").classList.replace("fv__plugonly_pc","fv__minusonly_pc"),e.setAttribute("aria-expanded","true")}function Ln(e){e.querySelector(".fv_action-info-toggler").classList.replace("fv__minusonly_pc","fv__plugonly_pc"),e.setAttribute("aria-expanded","false")}function $n(e){e.setAttribute("tabindex","0"),setTimeout(function(){e.focus()})}function Pn(e){var t=y(e).filter(function(e){return!!(e.classList&&e.classList.length>0)&&e.classList.contains("fv_action-info-toggler")});t&&0!==t.length&&(t[0].classList.contains("fv__minusonly_pc")?t[0].parentElement.setAttribute("aria-expanded","false"):t[0].classList.contains("fv__plugonly_pc")&&t[0].parentElement.setAttribute("aria-expanded","true"),$n(t[0].parentElement))}function Tn(e){var t=y(e.originalEvent).filter(function(e){return e.classList&&e.classList.contains("fv__action_list")})[0];t&&M(t.querySelectorAll("[role='treeitem'],[tabindex='0']")).filter(function(e){return e!==document.activeElement}).forEach(function(e){N(e,"tabindex","-1")})}var Nn=w.match,In=w.matchers.Enter,Fn="openSignAPDialog";var Hn=w.match,Rn=w.matchers,On=Rn.ArrowUp,Mn=Rn.ArrowDown;var Un=w.isMatch,Bn=w.match,Vn=w.matchers,zn=Vn.ArrowUp,jn=Vn.ArrowDown,Gn=Vn.ArrowLeft,Kn=Vn.ArrowRight,Wn=Vn.Home,Xn=Vn.End,Qn=Vn.or,Jn=Vn.Enter;function Zn(e,t){var n,i=e.target,a=i.parentElement.querySelectorAll("span");Bn(e).when(Qn(zn,Gn),function(){n=i.previousSibling?i.previousSibling:a[a.length-1]}).when(Qn(jn,Kn),function(){n=i.nextSibling?i.nextSibling:a[0]}).when(Wn,function(){n=a[0]}).when(Xn,function(){n=a[a.length-1]}),n&&(t(n),n.focus(),e.preventDefault(),e.stopPropagation())}var Yn=function(e){function t(){return l(this,t),i(this,t,arguments)}return d(t,e),s(t,[{key:"componentMounted",value:function(){var e=this;this.component.once("enable",function(){e.component.element.focus()})}}],[{key:"getName",value:function(){return"auto-focus"}}]),t}(f.Directive),ei=w.isMatch,ti=w.match,ni=w.matchers,ii=ni.ArrowUp,ai=ni.ArrowDown,ri=ni.Home,oi=ni.End,li=ni.Enter,ci=null;function si(e){var t,n=e.target,i=n.querySelector(".active");ti(e).when(ii,function(){t=i.previousSibling?i.previousSibling:n.lastElementChild}).when(ai,function(){t=i.nextSibling?i.nextSibling:n.firstElementChild}).when(ri,function(){t=n.firstElementChild}).when(oi,function(){t=n.lastElementChild}),t&&(t.focus(),t.click(),di(),ui(),e.stopPropagation(),e.preventDefault())}function ui(){var e=ci.$element[0].querySelectorAll(".fv__ui-dialog-button"),t=ci.$element[0].querySelector("#upButton"),n=ci.$element[0].querySelector("#downButton");document.activeElement===t&&t.classList.contains("disabled")&&!n.classList.contains("disabled")?n.focus():document.activeElement===n&&n.classList.contains("disabled")&&!t.classList.contains("disabled")&&t.focus(),e.forEach(function(e){N(e,"tabindex",e.classList.contains("disabled")?-1:0)})}function di(){return ce(function(){var e;return se(this,function(t){switch(t.label){case 0:return[4,Promise.resolve()];case 1:return t.sent(),T((e=ci.$element.find(".fv__fields-list"))[0],{"aria-activedescendant":e.find(".active").attr("id")}),ci.$element.find(".fv_CO-item").each(function(t,n){T(n,{"aria-selected":n.id==e.find(".active").attr("id")})}),[2]}})})()}var fi=w.match,hi=w.matchers.Space;function vi(e){return ce(function(){var t,n,i,a,r,o;return se(this,function(l){return N(e.querySelector(".fv__multi-file-div"),"role","radiogroup"),t=e.querySelector(".fv__record-record"),n=e.querySelectorAll(".fv__multi-file-label")[0],T(t,{tabindex:-1,"aria-label":n.innerText}),e.querySelectorAll("[type=radio]").forEach(function(e){N(e,"aria-label",e.nextElementSibling.innerText),e.addEventListener("change",function(e){N(t,"tabindex",1==e.target.value?-1:0)})}),i=e.querySelector(".fv__poster-file"),a=e.querySelector(".fv__poster-file-label"),r=G("poster-file"),o=G("poster-file-input"),N(a,"id",r),T(i,{id:o,"aria-labelledby":"".concat(r," ").concat(o)}),[2]})})()}var mi=w.match,bi=w.matchers;var pi=f.PDFViewCtrl.ViewerEvents;var gi=w.match,yi=w.matchers,_i=yi.ArrowUp,Ei=yi.ArrowDown,wi=yi.ArrowLeft,xi=yi.ArrowRight,ki=yi.Home,Ai=yi.End,Si=yi.or;var Ci=f.components.Component,Di="a,button,input,textarea,select,details,[contenteditable],[tabindex]".split(",").map(function(e){return e+':not([tabindex^="-"]):not([disabled]):not(.fv__ui-aria-focus-secondary-node)'}).join(","),qi={autoFocusFirst:!0},Li=function(e){function t(){return l(this,t),i(this,t,arguments)}return d(t,e),s(t,[{key:"componentMounted",value:function(){var e,t,n=this.component,i=n.element,r=!0,o=$i(),l=$i(),c=qi;if(this.attrValue&&(c=this.controller.eval(this.attrValue)||qi),c.selector){var s=n.querySelector(c.selector)||n;if(a(s,Ci))i=s.element;else{if(!a(s,HTMLElement))throw new Error("Incorrect selector: ".concat(c.selector));i=s}}var u=function(n){var a=function(e){var t=Array.from(e.querySelectorAll(Di)),n=t.find(function(e){return e.getClientRects().length>0}),i=t.findLast(function(e){return e.getClientRects().length>0});return{first:n,last:i}}(i),r=a.first,o=a.last;e=r,t=o,f()},d=function(){e||u(),!1!==c.autoFocusFirst&&i===document.activeElement&&Promise.resolve().then(function(){e&&e.focus()})},f=function(){i.firstElementChild!==o&&(o.parentNode!==i&&o.remove(),i.childElementCount>0?i.firstElementChild.before(o):i.appendChild(o)),i.lastElementChild!==l&&(l.parentNode!==i&&l.remove(),i.appendChild(l))},h=A(u);if(window.MutationObserver){var v=new MutationObserver(h);v.observe(i,{subtree:!0,attributeFilter:["tabindex","contenteditable","style","class"],attributes:!0}),this.addDestroyHook(function(){v.disconnect()})}else{var m="DOMSubtreeModified";i.addEventListener(m,h),this.addDestroyHook(function(){i.removeEventListener(m,h)})}o.onfocus=function(n){n.relatedTarget&&i.contains(n.relatedTarget)&&!r?t&&t.focus():(r=!1,e&&e.focus())},l.onfocus=function(){e&&e.focus()},i.onfocus=function(){r=!0},n.isVisible&&d(),this.addDestroyHook(n.on("shown",d),n.on("hidden",function(){o.remove(),l.remove()}))}}],[{key:"getName",value:function(){return"circular-focus"}}]),t}(f.Directive);function $i(){var e=document.createElement("div");return T(e,{tabindex:0,"aria-hidden":!0,class:"fv__ui-aria-focus-secondary-node"}),e}function Pi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ti(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){Pi(e,t,n[t])})}return e}var Ni=w.isMatch,Ii=w.matchers;function Fi(e){if(!e.isDestroyed){e.unwatchAriaI18n&&e.unwatchAriaI18n();var t=e.childAt(0),n=e.disabled,i=e.notDropdown,a=e.element,r=e.eRibbonIcon,o=e.eRibbonText,l=e.selectedItem;F(a,"tabindex","aria-label","aria-disabled"),F(r,"tabindex","role","aria-label","aria-disabled"),F(o,"tabindex","role","aria-label","aria-haspopup","aria-disabled");var c=e.localizer.translateSync(e.text||e.tooltipTitle);if(i||!t)T(a,Ti({"aria-label":c},!0===n?{tabindex:-1,"aria-disabled":!0}:{tabindex:0}));else if(t.separate){if(N(a,"tabindex",-1),l){var s=l.getText()||e.text;T(r,Ti({role:"button","aria-label":e.localizer.translateSync(s)},!0===n?{tabindex:-1,"aria-disabled":!0}:{tabindex:0}))}T(o,Ti({role:"button","aria-label":c,"aria-haspopup":"true"},!0===n?{tabindex:-1,"aria-disabled":!0}:{tabindex:0}))}else T(a,Ti({"aria-label":c},!0===n?{tabindex:-1,"aria-disabled":!0}:{tabindex:0})),T(r,{"aria-hidden":!0}),T(o,{role:"presentation"})}}var Hi=w.match,Ri=w.matchers,Oi=Ri.Enter,Mi=Ri.ArrowLeft,Ui=Ri.ArrowRight,Bi=Ri.Home,Vi=Ri.End;function zi(e,t){var n=e.querySelector(".tabPanel").children,i=M(n).filter(function(e){return"none"!==e.style.display}),a=e.querySelector(".tabPanel > .active"),r=i.findIndex(function(e){return e.id===a.id}),o=i[r=0===t?0:"number"==typeof t?(r+t+i.length)%i.length:i.length-1],l=M(n).findIndex(function(e){return o.id===e.id}),c=M(n).findIndex(function(e){return a.id===e.id});T(a,{tabindex:"-1","aria-selected":!1}),a.classList.remove("active"),T(o,{tabindex:"0","aria-selected":!0}),o.classList.add("active"),e.querySelector(".annot-properties-dialog-body > div:nth-child(".concat(c+1,")")).style.display="none",e.querySelector(".annot-properties-dialog-body > div:nth-child(".concat(l+1,")")).style.display="block",setTimeout(function(){o.focus()})}function ji(e){Hi(e).when(Oi,function(){e.target.click(),e.stopPropagation(),e.target.removeEventListener("keyup",ji)})}var Gi=UIExtension.vendors.jQuery,Ki=w.match,Wi=w.matchers,Xi=Wi.ArrowRight,Qi=Wi.ArrowLeft,Ji=Wi.Home,Zi=Wi.End,Yi=Wi.Enter;var ea=w.match,ta=w.matchers;function na(e,t){var n,i=e.$html.find(".tree-item-main"),a=i.filter(".fv__active"),r=i.index(a),o=(n=1===t||-1===t?i.eq((r+t+i.length)%i.length):0===t?i.first():i.last()).attr("data-id");e.$html.children("ul.tree-list").attr({"aria-activedescendant":o}),e.activeItem(o),function(e){var t=e.closest(".fv__ui-sidebar-panel-body"),n=t.scrollTop(),i=t.offset().top,a=e.offset().top;t.scrollTop(a-i+n)}(n)}var ia=w.match,aa=w.matchers,ra=aa.ArrowUp,oa=aa.ArrowDown;aa.Home,aa.End;function la(e,t){var n=e.$attachmentTable.find(".tr"),i=n.filter(".tr.selected");0===i.length&&(i=n.first());var a=n.index(i),r=n.eq((a+t+n.length)%n.length);return i.removeClass("selected"),r.addClass("selected"),r}var ca=w.match,sa=w.matchers.Enter;var ua=w.match,da=w.matchers,fa=da.ArrowUp,ha=da.ArrowDown,va=da.Home,ma=da.End,ba=da.Enter;da.Space;function pa(e){ua(e).when(ba,function(){e.target.click(),e.stopPropagation(),e.target.removeEventListener("keyup",pa)})}function ga(e,t){var n,i=e.originalEvent.target,a=i.querySelector(".active"),r=M(i.children).indexOf(a),o=i.children.length;return n=0===t?i.children[t]:"number"==typeof t?i.children[(r+t+o)%o]:i.children[o-1],I(a,"aria-selected"),N(n,"aria-selected","true"),function(e,t){var n=e.scrollTop,i=t.getBoundingClientRect().bottom,a=e.getBoundingClientRect(),r=a.top,o=a.height,l=n+i-r-o;l<0&&(l=0);e.scrollTo(0,l)}(i,n),n}var ya=w.isMatch,_a=w.match,Ea=w.matchers,wa=Ea.or,xa=Ea.Space,ka=Ea.Enter,Aa=Ea.ArrowDown,Sa=Ea.ArrowUp,Ca=Ea.Home,Da=Ea.End;var qa=w.match,La=w.matchers,$a=(w.isMatch,La.or,La.Home),Pa=La.End,Ta=La.ArrowUp,Na=La.ArrowDown,Ia=La.Enter,Fa=La.Space;function Ha(e,t){var n=e.$thumbImageContainer.find(".fv__thumb-page"),i=e.$thumbImageContainer.find(".fv__active"),a=0;n.each(function(e){n.eq(e).attr("id")===i.attr("id")&&(a=e)});var r=0;r=1===t||-1===t?(a+t+n.length)%n.length:"number"==typeof t?(t+n.length)%n.length:n.length-1;var o,l,c,s,u,d=n.eq(r);return i.removeClass("fv__active"),d.addClass("fv__active"),l=(o=d).closest(".fv__thumb-image-container-box"),c=l.scrollTop(),s=l.offset().top,u=o.offset().top,l.scrollTop(u-s+c),d}var Ra=w.isMatch,Oa=w.match,Ma=w.matchers,Ua=Ma.or,Ba=Ma.Home,Va=Ma.End,za=Ma.ArrowLeft,ja=Ma.ArrowRight,Ga=Ma.Escape;var Ka=w.isMatch,Wa=w.matchers,Xa=w.match,Qa=Wa.or,Ja=Wa.Space,Za=Wa.Enter,Ya=Wa.ArrowLeft,er=Wa.ArrowRight,tr=Wa.Home,nr=Wa.End,ir=Wa.ArrowUp,ar=Wa.ArrowDown,rr=Wa.PageUp,or=Wa.PageDown;var lr=w.isMatch,cr=w.matchers,sr=cr.Enter,ur=cr.Space,dr=cr.or;var fr=w.isMatch,hr=w.match,vr=w.matchers,mr=vr.Home,br=vr.End,pr=vr.ArrowUp,gr=vr.ArrowDown,yr=vr.or;var _r=w.matchers,Er=w.isMatch,wr=f.PDFViewCtrl._internal.shared.Lazy,xr=_r.or,kr=_r.ArrowDown,Ar=_r.ArrowUp,Sr=_r.ArrowLeft,Cr=_r.ArrowRight,Dr=_r.PageDown,qr=_r.PageUp,Lr=_r.Home,$r=_r.End;var Pr=r(732),Tr=(r(399),Pr.matchers.ArrowDown),Nr=Pr.matchers.ArrowLeft,Ir=Pr.matchers.ArrowRight,Fr=Pr.matchers.ArrowUp;Pr.matchers.Enter,Pr.matchers.Home,Pr.matchers.End;var Hr=[function(){var e=f.modular.root(),t=f.PDFViewCtrl.keyboard.KeyboardUtils,n=t.matchers,i=n.Enter,a=n.Space,r=n.Home,o=n.End,l=n.ArrowLeft,c=n.ArrowRight,s=n.ArrowUp,u=n.ArrowDown,d=n.Tab,h=n.or,v=t.isMatch,m=e.getComponentClass("portfolio-node"),b=e.getComponentClass("portfolio-node-list"),p=e.getComponentClass("portfolio-node-container");V(m,{services:function(e){var t=e();return t.delegateEventService=f.__ui_lib__.DelegateEventService,t}}),V(b,{services:function(e){var t=e();return t.delegateEventService=f.__ui_lib__.DelegateEventService,t}}),B(m,{doActive:function(e){e(),T(this.element,{"aria-selected":!0}),this.getCurrentDisplayElement().focus({preventScroll:!0})},doDeactive:function(e){e(),T(this.element,{"aria-selected":!1})},getCurrentDisplayElement:function(){return"block"===this.display?this.blockElement:this.detailsElement}}),B(b,{postlink:function(e){var t=this;e();var n=function(e){var n=t.children().map(function(e){return e.element}).indexOf(e);if(-1!==n)return t.childAt(n)};this.addDestroyHook(this.layoutService.onLayoutChange(function(e){"details"===e?(t.element.setAttribute("role","rowgroup"),t.parent.element.setAttribute("role","table")):(t.element.setAttribute("role","list"),t.parent.element.removeAttribute("role"))}),this.delegateEventService.delegate(this.element,"focus",function(e){var t=e.target.closest(".fv__ui-portfolio-node");t&&(n(t)&&t.classList.add("focused"))}),this.delegateEventService.delegate(this.element,"blur",function(e){var t=e.target.closest(".fv__ui-portfolio-node");t&&(t.contains(document.activeElemen)||t.classList.remove("focused"))}),this.delegateEventService.delegate(this.element,"pointerdown",function(e){t.element.classList.remove("tabbed")}),this.delegateEventService.delegate(this.element,"keydown",function(e){if(v(e,d))t.element.classList.add("tabbed");else{var f=e.target.closest(".fv__ui-portfolio-node");if(f){var m=n(f);if(m){var b=m.index();if(v(e,i)||v(e,a))return t.nodeService.isActiveNode(m)?m.handleNodeAction():(m.doActiveNode(),m.element.scrollIntoViewIfNeeded()),void e.preventDefault();if(v(e,h(r,o,l,c,s,u))){var p=b;if(v(e,r)?p=0:v(e,o)?p=t.childrenCount()-1:v(e,h(l,s))?p=Math.max(0,b-1):v(e,h(c,u))&&(p=Math.min(t.childrenCount()-1,b+1)),p===b)return;e.preventDefault();var g=t.childAt(p);return g.doActiveNode(),void g.element.scrollIntoViewIfNeeded()}}}}}))}}),B(p,{mounted:function(e){e()}})},function(){var e=UIExtension.components.widgets,t=e.TreeComponent,n=e.TreeNodeComponent,i=e.TreeNodeListComponent;B(n,{doActive:function(e){e(),T(this.element,{"aria-expanded":!0})},doDeactive:function(e){e(),T(this.element,{"aria-expanded":!1})},render:function(e){e(),this.titleElement.id=this.name+"_title",T(this.element,{"aria-labelledby":this.titleElement.id,tabindex:"0"})},select:function(e){e(),T(this.element,{"aria-selected":!0}),this.focus()},unselect:function(e){e(),T(this.element,{"aria-selected":!1})},mounted:function(e){var t=this;e(),this.attachEventToElement(this.element,"keydown",function(e){if((0,Pr.isMatch)(e,Nr))t.isActive&&t.deactive();else if((0,Pr.isMatch)(e,Ir))t.isActive||t.active();else{if(!(0,Pr.isMatch)(e,Pr.matchers.Enter))return;var n=t.getTree();n.select(t),n.trigger("aria-select",t.id)}e.stopPropagation()})}}),B(t,{setSelectable:function(e){e(),T(this.element,{"aria-selectable":this.selectable})},setCheckable:function(e){e(),T(this.element,{"aria-multiselectable":this.checkable})},render:function(e){e(),T(this.element,{orientation:"vertical"})},mounted:function(e){var t=this;e(),this.addDestroyHook(this.attachEventToElement(this.element,"keydown",function(e){if(!t.selectedNode||!t.selectedNode.editting){if((0,Pr.isMatch)(e,Fr))t._selectPrevious();else if((0,Pr.isMatch)(e,Tr))t._selectNext();else if((0,Pr.isMatch)(e,Pr.matchers.Home)){var n=t._getFirstNode();n&&n.focus()}else{if(!(0,Pr.isMatch)(e,Pr.matchers.End))return;var i=t._getLastNode();i&&i.focus()}e.stopPropagation()}},!0))},_selectNext:function(){var e=this._getNext();e&&(this.select(e),this.trigger("aria-select",e.id))},_selectPrevious:function(){var e=this._getPrevious();e&&(this.select(e),this.trigger("aria-select",e.id))},_getNext:function(){var e=this.getSelectedNode();if(!e)return this.querySelector("@tree-node:first");if(e.isActive){var t=e.getChildrenNodes();if(t.length>0)return t[0]}return e.nextSiblings()},_getPrevious:function(){var e=this.getSelectedNode();if(!e)return this.querySelectorAll("@tree-node").pop();var t=e.previousSiblings();if(!t){var i=e.findClosestComponent(function(t){return t!==e&&a(t,n)});return i||this.querySelectorAll("@tree-node").pop()}if(t.isActive){var r=t.getChildrenNodes();if(0===r.length)return t;for(var o=r[r.length-1];;){if(!o.isActive)return o;var l=o.getChildrenNodes();if(0===l.length)return o;o=l[l.length-1]}}return t},_getFirstNode:function(){return this.querySelectorAll("@tree-node").shift()},_getLastNode:function(){return this.querySelectorAll("@tree-node").pop()}}),B(i,{render:function(e){e(),T(this.element,{role:"group"})}})},function(){var e=f.components.widgets.DropdownComponent;f.components.widgets.DropdownItemComponent,B(e,{doDestroy:function(e){this._unwatchAriaLabel&&this._unwatchAriaLabel(),e()},render:function(e){var t=this;e();var n=Je("dropd-tglr-"),i=Je("dropd-caret-"),a=Je("dropd-icon-"),r=Je("dropd-list-");this.togglerElement.setAttribute("id",n),this.caretElement.setAttribute("id",i),this.iconElement.setAttribute("id",a);var o=Ze(this);this.element.setAttribute("role","presentation"),this.separate?this.listElement.setAttribute("aria-labelledby",i):this.listElement.setAttribute("aria-labelledby",n);var l=this.selectable;o.setAttribute("aria-haspopup",l?"listBox":"true"),this.listElement.setAttribute("role",l?"listbox":"menu"),l||(this.listElement.setAttribute("id",r),o.setAttribute("aria-controls",r)),this.separate&&T(this.togglerElement,{role:"group"});this.attachEventToElement(this.togglerElement,"keyup",function(e){je(e,Ke(We,Xe))&&t.isActive&&ze(t)})},postlink:function(e){var t=this;e();var n=this.text;!n&&this.texts[0]&&(n=this.texts[0].textContent),n||(n=this.getAttribute("tooltip-title")),n&&(this._unwatchThisLabel=this.localizer.watch(n,{},n,function(e){t.iconElement.setAttribute("aria-label",e),t.editable&&t.editElement.setAttribute("aria-label",e),(t.separate||t.editable)&&t.caretElement.setAttribute("aria-label",e)}),this.addDestroyHook(this._unwatchThisLabel))},select:function(e,t){var n=this,i=be(t,1)[0];if(i){var a=this.selectedItem;this.selectable&&(a&&a.element&&a.setAttribute("aria-selected","false"),i.setAttribute("aria-selected","true"));var r=i.text;return r||i.texts[0]&&(r=i.texts[0].textContent),r||(r=i.getAttribute("tooltip-title")),this._unwatchAriaLabel&&this._unwatchAriaLabel(),this._unwatchThisLabel&&this._unwatchThisLabel(),r?this._unwatchAriaLabel=this.localizer.watch(r,{},r,function(e){n.editable&&n.caretElement.setAttribute("aria-label",e),n.separate?n.iconElement.setAttribute("aria-label",e):n.togglerElement.setAttribute("aria-label",e)}):(this.caretElement.removeAttribute("aria-label"),this.togglerElement.removeAttribute("aria-label"),this.iconElement.removeAttribute("aria-label")),e()}},doActive:function(e){e(),Ze(this).setAttribute("aria-expanded","true")},doDeactive:function(e){e(),Ze(this).setAttribute("aria-expanded","false")},mounted:function(e){if(e(),this.isInsideOtherDropdown()){var t=this.element.parentElement;t.getAttribute("role")||t.setAttribute("role","none"),this.setAttribute("role","menuitem")}},setEditValue:function(e,t){var n;e(),this.numberInput&&"string"==typeof this.numberInput.template?n=this.localizer.translateSync(this.numberInput.template):this.numberInput&&"function"==typeof this.numberInput.template&&(n=this.localizer.translateSync(this.numberInput.template(t))),this.editElement.setAttribute("aria-label",n)}})},function(){B(f.components.Component,{doDisable:function(e){e(),this.setAttribute("aria-disabled","true")},doEnable:function(e){e(),this.removeAttribute("aria-disabled")}})},function(){var e=f.components.widgets.ButtonComponent,t=f.components.widgets.DropdownComponent;B(e,{doActive:function(e){e(),a(this.parent,t)&&this.parent.selectable?this.setAttribute("aria-selected","true"):this.setAttribute("aria-pressed","true")},doDeactive:function(e){e(),a(this.parent,t)&&this.parent.selectable?this.setAttribute("aria-selected","false"):this.setAttribute("aria-pressed","false")},doEnable:function(e){e(),this.setAttribute("tabindex","0")},doDisable:function(e){e(),this.setAttribute("tabindex","-1")},render:function(e){e(),"button"!==this.element.nodeName.toLowerCase()&&(this.element.getAttribute("role")||(this.setAttribute("role","button"),this.setAttribute("tabindex","0"))),this.iconElement.setAttribute("aria-hidden",!0)},postlink:function(e){var t=this;e();var n=this.text;!n&&this.texts[0]&&(n=this.texts[0].textContent),n||(n=this.getAttribute("tooltip-title")),n&&this.addDestroyHook(this.localizer.watch(n,{},n,function(e){t.element.setAttribute("aria-label",e)}))},mounted:function(e){e(),a(this.parent,t)&&(this.parent.selectable?this.setAttribute("role","option"):this.setAttribute("role","menuitem"))}})},function(){B(f.components.widgets.LoadingComponent,{postlink:function(e){e();var t=this.querySelector(">@ul");N(t,"role","status"),t.querySelectorAll(">@li").forEach(function(e){N(e,"role","presentation")}),T(this,{"aria-busy":!0,role:"alert","aria-describedby":this.querySelector(">@span").id}),this.statusComponent=t},doHidden:function(e){e();var t=this.element.parentElement;t&&t.setAttribute("aria-busy","false"),this.activeElement&&this.activeElement.focus()},doShown:function(e){this.activeElement=document.activeElement,e();var t=this.element.parentElement;t&&t.setAttribute("aria-busy","true")}})},function(){B(f.components.widgets.ProgressComponent,{postlink:function(e){e(),T(this.circlePath,{role:"progressbar","aria-label":"Progress","aria-valuemin":"0","aria-valuemax":"100"})},doHidden:function(e){e();var t=this.element.parentElement;t&&t.setAttribute("aria-busy","false"),this.activeElement&&this.activeElement.focus()},doShown:function(e){this.activeElement=document.activeElement,e();var t=this.element.parentElement;t&&t.setAttribute("aria-busy","true"),T(this.circlePath,{"aria-valuenow":"".concat(this.textElement.innerText)})},updateProgress:function(e){e();this.element.parentElement;T(this.circlePath,{"aria-valuenow":"".concat(this.textElement.innerText)})}})},function(){B(f.components.widgets.GTabItemComponent,{init:function(e){var t=this;e(),T(this,{role:"tab",tabindex:"-1"}),this.bodyComponentPromise.then(function(e){T(e,{"aria-labelledby":t.id,role:"tabpanel"}),N(t,"aria-controls",e.id)})},doDisable:function(e){e(),I(this.element,"tabindex")},doEnable:function(e){e(),N(this,"tabindex",this.isActive?"0":-1)},doActive:function(e){e(),N(this,"aria-selected","true"),N(this,"tabindex",0)},doDeactive:function(e){e(),N(this,"aria-selected","false"),N(this,"tabindex",-1)}})},function(){B(f.components.widgets.DropdownButtonComponent,{mounted:function(e){e();var t=this.parent.selectable,n=t?"option":"menuitem";this.setAttribute("role",n),t||this.setAttribute("tabindex","0")},postlink:function(e){var t=this;e();var n=this.text;!n&&this.texts[0]&&(n=this.texts[0].textContent),n||(n=this.getAttribute("tooltip-title")),n&&this.addDestroyHook(this.localizer.watch(n,{},n,function(e){t.element.setAttribute("aria-label",t.textElement.innerText)}))},doDisable:function(e){e(),this.element.setAttribute("tabindex","-1")},doEnable:function(e){e(),this.element.setAttribute("tabindex","0")}})},function(){B(f.components.widgets.ContextMenuComponent,{render:function(e){e(),N(this,"role","application"),T(this.containerElement,{role:"context menu",tabindex:"-1","aria-atomic":"true"})},doShown:function(e){e(),N(this,"aria-hidden","false"),this.containerElement.focus()},doHidden:function(e){e(),N(this,"aria-hidden","true")},rerenderChildren:function(e){e();var t=this.children().filter(function(e){return"contextmenu-separator"!==e.constructor.getName()}),n=t.map(function(e){return e.id});t.forEach(function(e,n){N(e,"aria-posinset",n+""),N(e,"aria-setsize",t.length)}),T(this.containerElement,{"aria-owns":n.join(" "),"aria-describedby":n.join(" ")})}})},function(){B(f.components.widgets.ContextMenuItemComponent,{doDestroy:function(e){e(),this.unwatchAriaLabel&&this.unwatchAriaLabel()},render:function(e){e(),this.setAttribute("role","menuitem"),this.setAttribute("tabindex","0")},setText:function(e){var t=this;e();var n=this.text;n||this.texts[0]&&(n=this.texts[0].textContent),this.unwatchAriaLabel&&this.unwatchAriaLabel(),n&&(this.unwatchAriaLabel=this.localizer.watch(n,{},"",function(e){t.setAttribute("aria-label",e)}))}})},function(){B(f.components.widgets.ContextMenuSeparatorComponent,{render:function(e){e(),this.setAttribute("role","menuitem")}})},function(){var e=f.components.widgets.LayerComponent;V(e,{preprocess:function(e,t){var n=be(t,1)[0];e(),n.vnode.setAttribute("@aria:circular-focus","{autoFocusFirst: false}")}}),B(e,{render:function(e){e();var t=G("layer-inner-");this.containerElement.setAttribute("id",t),T(this,{role:"dialog",tabindex:-1,"aria-modal":!!this.modal})},mounted:function(e){var t=this;e(),this.element.querySelectorAll("input[type=file]").forEach(function(e){e.removeEventListener("click",i),e.addEventListener("click",i)});var n=!1;function i(){n=!0}function a(e){it(e).when(at.Escape,function(){n&&(e.stopPropagation(),n=!1)})}this.element.addEventListener("keyup",a),this.addDestroyHook(function(){t.element.removeEventListener("keyup",a)})},show:function(e){this.currentFocusElement=document.activeElement,e(),this.focusOnShown&&this.element.focus({preventScroll:!0}),this.element.dispatchEvent(nt(this.element))},doHidden:function(e){if(this.currentFocusElement){var t=this.currentFocusElement;if(this.currentFocusElement=document.activeElement,e(),t.getClientRects().length>0)t.focus({preventScroll:!0});else{var n=function(e,t){for(var n=t;n;){if(n.id){var i=e.querySelector("[id=".concat(n.id,"]"));if(i)return i}n=n.parentElement}}(this.getRoot(),t);if(n)if(rt(n.element))n.element.focus();else for(var i=n.parent;i;){if(rt(i.element)){i.focus();break}i=i.parent}else for(var a=t.parentElement;a;){if(rt(a)){a.focus();break}a=a.parentElement}}}else e()}})},function(){var e=f.components.widgets.LayerHeaderComponent,t=f.components.widgets.LayerComponent;B(e,{mounted:function(e){e();var n=this.getClosestComponentByClass(t),i=this.element.querySelector("[action=close]"),a=this.titleElement;n&&i.setAttribute("aria-controls",n.id),this.addDestroyHook(this.localizer.watch("aria:labels.close-layer-btn",{},"",function(e){i.setAttribute("aria-label",e)}),this.localizer.watch("aria:labels.promptTitle",{},"",function(e){if(a.innerText){var t=G("layer-title");a.setAttribute("id",t),n.setAttribute("aria-labelledby",t)}else n.setAttribute("aria-label",e)}))}})},function(){B(f.components.widgets.AlertComponent,{postlink:function(e){e(),this.setAttribute("role","alertdialog"),this.setAttribute("aria-describedby",this.body.id)}})},function(){B(f.components.widgets.SidebarComponent,{render:function(e){e(),this.togglerElement.setAttribute("aria-hidden","true"),this.navElement.setAttribute("role","tablist"),this.navElement.setAttribute("tabindex","-1")}})},function(){var e=f.components.widgets.SidebarPanelComponent;B(e,{render:function(e){e();var t=G("sidebar-panel-title-");this.titleElement.id=t,T(this.ctrlElement,{role:"tab","aria-controls":this.element.id,tabindex:-1,"aria-labelledby":t}),T(this.bodyElement,{role:"tabpanel","aria-labelledby":t,tabindex:0})},mounted:function(t){var n=this;t(),this.ctrlElement.addEventListener("keydown",function(t){if(!n.disabled){var i=function(t){return a(t,e)&&t.isVisible};ot(t).when(bt(ct,st),function(){n.isActive?n.parent.collapse():n.active()}).when(bt(ht,dt),function(){if(n.isActive){var e=n.findNextMatching(i,!0);e&&(e.active(),e.ctrlElement.focus())}t.stopPropagation()}).when(bt(ft,ut),function(){if(t.stopPropagation(),n.isActive){var e=n.findPreviousMatching(i,!0);e&&(e.active(),e.ctrlElement.focus())}}).when(mt,function(e){e.stopPropagation();var t=n.parent.last();t.isVisible||(t=t.findPreviousMatching(i)),t&&(t.active(),t.ctrlElement.focus())}).when(vt,function(e){e.stopPropagation();var t=n.parent.first();t.isVisible||(t=t.findNextMatching(i)),t&&(t.active(),t.ctrlElement.focus())})}})},doActive:function(e){e(),T(this.ctrlElement,{"aria-expanded":!0,tabindex:0})},doDeactive:function(e){e(),T(this.ctrlElement,{"aria-expanded":!1,tabindex:-1})}})},function(){B(f.components.widgets.GroupComponent,{render:function(e){var t=this;e();var n=this.btnList.moreElement,i=G("aria-group-more");this.on("shrink",function(e){var a=function(e){Ye(e).when(et,function(){e.target.click(),e.stopPropagation(),e.preventDefault()}),e.currentTarget.removeEventListener("keyup",a)},r=function(e){Ye(e).when(et,function(){y(e).every(function(e){return"option"!==e.getAttribute("role")||(e.addEventListener("keyup",a,!0),!1)}),e.stopPropagation(),e.preventDefault()})};if(e){T(n,{role:"button",tabindex:0,"aria-haspopup":"listbox","aria-controls":t.btnList.id,id:i}),T(t.btnList.element,{role:"listbox",tabindex:-1,"aria-labelledby":i});var o=t.btnList.element.children,l=function(e){M(e).forEach(function(e){if(e.classList.contains("fv__ui-grp-btn-list-title"))T(e,{"aria-hidden":!0});else if("button"===e.getAttribute("role")||"BUTTON"===e.tagName||"LI"===e.tagName)T(e,{role:"option"}),t.attachEventToElement(e,"keydown",r);else if(e.classList.contains("fx-ribbon-items-sm")){var n=e.children;l(n)}})};l(o)}else{F(n,"aria-haspopup","role","tabindex","aria-controls"),F(t.btnList.element,"role","tabindex","aria-labelledby"),M(t.btnList.element.querySelectorAll("[role=option]")).forEach(function(e){"BUTTON"!==e.tagName&&"LI"!==e.tagName&&T(e,{role:"button"}),e.removeEventListener("keydown",r)})}}),this.btnList.on("active",function(){T(n,{"aria-expanded":!0})}),this.btnList.on("deactive",function(){T(n,{"aria-expanded":!1})}),this.addDestroyHook(this.localizer.watch("",{},"",function(){T(n,{"aria-label":t.localizer.translateSync(t.shrinkTitle||"toolbar.more.document.title")})}))}})},function(){B(UIExtension.components.widgets.SliderComponent,{render:function(e){e();var t=this.$options.label||this.attrs.label,n=G("slider-label"),i=document.createElement("div");T(i,{"data-i18n":t,id:n}),i.classList.add("fv__ui-aria-sr-only"),this.element.appendChild(i),N(this.element,"tabindex","-1");var a=G("slider-unit");T(this.unitElement,{id:a});var r=G("slider-input");T(this.inputElement,{id:r}),T(this.cursorElement,{role:"slider","aria-valuemin":this.range.min,"aria-valuemax":this.range.max,tabindex:"0","aria-describedby":a,"aria-labelledby":n}),T(this.inputElement,{"aria-labelledby":"".concat(n," ").concat(r," ").concat(a)})},sync:function(e,t){var n,i,a=be(t,2),r=a[0],o=a[1],l=e();return"label"===r?(i=o,(n=this).labelElement.setAttribute("data-i18n",i),n.localize(),!0):l},doDisable:function(e){e(),T(this.cursorElement,{"aria-disabled":!0,tabindex:-1})},doEnable:function(e){e(),T(this.cursorElement,{"aria-disabled":!1,tabindex:0})},setValue:function(e){e(),this.cursorElement&&this.cursorElement.setAttribute("aria-valuetext",this.value)}})},function(){B(UIExtension.components.widgets.TabItemComponent,{render:function(e){e();var t=G("tab"),n={role:"tab","aria-controls":this.id,id:t};T(this.tabElement,n),T(this,{role:"tabpanel","aria-labelledby":t})},doActive:function(e){e(),N(this.tabElement,"aria-selected","true")},doDeactive:function(e){e(),N(this.tabElement,"aria-selected","false")},mounted:function(e){var t=this;e(),this.on(k.ACTIVE,function(e){t.parent&&t.parent.$container&&t.parent.$container.$children&&t.parent.$container.$children.forEach&&setTimeout(function(){t.tabElement.focus()})}),this.attachEventToElement(this.tabElement,"keyup",function(e){var n,i=t.parent;gt(e).when(St(_t,Et),function(){t.active()}).when(wt,function(){n=i.getFirstTab()}).when(xt,function(){n=i.getLastTab()}).when(kt,function(){n=i.getPreviousOf(t)}).when(At,function(){n=i.getNextOf(t)}),n&&(n.tabElement.focus(),n.tabElement.click())})}})},function(){function e(e){var t=e.element,n=e.colors,i=e.localizer;T(t.querySelector(".fv__ui-colors-picker"),{role:"listbox"}),t.querySelectorAll(".fv__ui-picker-color").forEach(function(t){var a,r=+t.dataset.index,o=n[r],l=function(e){e=e.replace("#","");var t=parseInt(e,16),n=t>>8&255,i=t>>16&255;return"RGB(".concat(255&t,", ").concat(n,", ").concat(i,")")}(o);a=e.isEditing?i.translateSync("aria:labels.color-picker-remove-item",{color:l}):i.translateSync("aria:labels.color-picker-item",{color:l}),T(t,o===e.value?{"aria-label":a,role:"option","aria-posinset":r,"aria-selected":!0,tabindex:0}:{"aria-label":a,role:"option","aria-posinset":r,"aria-selected":!1})});e.getPDFUI();T(t.querySelector(".fv__ui-picker-addcolor"),{"aria-label":i.translateSync("aria:labels.color-picker-add-color")});var a=t.querySelector(".fv__ui-property-icon-nocolor"),r=i.translateSync("aria:labels.color-picker-transparent");T(a,0===e.value?{role:"option","aria-label":r,"aria-selected":!0,tabindex:0}:{role:"option","aria-label":r}),T(t.querySelector(".fv__ui-picker-removecolor"),{role:"option","aria-label":e.isEditing?i.translateSync("aria:labels.color-picker-confirm-remove"):i.translateSync("aria:labels.color-picker-removecolor")})}B(f.components.widgets.ColorPickerComponent,{render:function(t){t(),e(this)},_activeDom:function(e){e();var t=this.element.querySelector("[aria-selected=true]");t&&N(t,"aria-selected",!1),N(this.element.querySelector(".fv__ui-property-icon-nocolor"),"aria-selected",0===this.value);var n=this.colors.indexOf(this.value);if(n>-1){var i=this.element.querySelectorAll(".fv__ui-picker-color")[n];i&&T(i,{"aria-selected":"true",tabindex:0})}},_toggleEditingMode:function(t){t(),e(this)},mounted:function(t){var n=this;t(),this.addDestroyHook(this.localizer.watch("",{},"",function(){e(n)}))}})},function(){B(f.components.widgets.ColorSpectrumComponent,{mounted:function(e){var t=this;e(),this.$sliderHelper.attr({tabindex:0,"aria-valuenow":this.$active.css("background-color"),role:"slider"}),this.$draggerHelper.attr({tabindex:0,"aria-valuenow":this.$active.css("background-color"),role:"slider"}),this.$trans.attr({tabindex:0,role:"button"});var n="aria:labels.no-color";this._unwatchThisLabel=this.localizer.watch(n,{},n,function(e){t.$trans.attr("aria-label",e)}),this.addDestroyHook(this._unwatchThisLabel),this._updateCurrentColor=A(function(){var e=t.$active.css("background-color");t.$active.attr({"aria-label":e}),t.$sliderHelper.attr({"aria-valuetext":e}),t.$draggerHelper.attr({"aria-valuetext":e})},100);var i=function(e){if(e=e.originalEvent||e,Ne(e,Oe(Fe,Ie,He,Re))){var n=t.$dragger.offset(),i=n.left,a=n.top,r=t.$draggerHelper.offset(),o=r.left,l=r.top,c=o-i+t.$draggerHelper.outerWidth()/2,s=l-a+t.$draggerHelper.outerHeight()/2,u=t.$dragger.height(),d=t.$dragger.width();Pe(e).switchers(!1).when(He,function(){(c-=Ve)<0&&(c=0)}).when(Ie,function(){(s-=Ve)<0&&(s=0)}).when(Re,function(){(c+=Ve)>d&&(c=d)}).when(Fe,function(){(s+=Ve)>u&&(s=u)}),e.stopPropagation(),e.preventDefault(),t.currentSaturation=c/d,t.currentValue=(u-s)/u,t.updateColorLocation(),t.active()}};this.$draggerHelper.on("keydown",i),this.$draggerHelper.on("click",function(e){return e.target.focus()}),this.$sliderHelper.on("keydown",function(e){if(Ne(e,Oe(Fe,Ie))){var n=t.$sliderHelper.offset().top-t.$slider.offset().top+Math.ceil(t.$sliderHelper.outerHeight()/2),i=t.$slider.height();Pe(e).when(Ie,function(){(n-=Ve)<0&&(n=0)}).when(Fe,function(){(n+=Ve)>i&&(n=i)}),t.currentHue=parseFloat(n/t.$slider.height()),t.updateHueLocation(),t.active(),e.stopPropagation(),e.preventDefault()}}),this.$sliderHelper.on("click",function(e){return e.target.focus()}),this.attachEventToElement(this.element,"keydown",function(e){Ne(e,Oe(Ue,Me,Be))&&e.stopPropagation()}),this.addDestroyHook(D(this.element,function(e){e.stopPropagation(),t.$cancel.click()},Be,{capture:!0}),D(this.element,function(e){if(e.target!==t.$cancel.get(0)){if(e.target===t.$trans[0])return t.$trans.click(),void e.stopPropagation();e.stopPropagation(),t.$choose.click()}},Me,{capture:!0}),function(){t.$draggerHelper.off("keydown",i),t.$draggerHelper.off("click",function(e){return e.target.focus()}),t.$sliderHelper.off("keydown",i),t.$sliderHelper.off("click",function(e){return e.target.focus()})});var a=function(e){t.attachEventToElement(e,"keydown",function(e){Ne(e,Oe(Me,Ue))&&(e.preventDefault(),e.stopPropagation())}),t.attachEventToElement(e,"keyup",function(t){if(Ne(t,Oe(Me,Ue))){var n=q(t);t.stopPropagation(),e.dispatchEvent(n)}})};a(this.$choose.get(0)),a(this.$cancel.get(0))},updateColorLocation:function(e){e()},active:function(e){e(),this.$sliderHelper.attr("tabindex",0),this._updateCurrentColor()},show:function(e){e(),this.previousFocusEle=document.activeElement;var t=this.element.querySelector("#foxit-spectrum-color-dragger");t&&setTimeout(function(){t.focus()})},hide:function(e){e(),this.previousFocusEle&&this.previousFocusEle.focus()}})},function(){B(f.PDFViewCtrl.printer.PrintProgress,{reset:function(e){this.progressBarElement=this.element.querySelector(".fv__ui-print-process-bar"),e(),T(this.progressBarElement,{tabindex:"-1",role:"progressbar","aria-label":this.title})},show:function(e){e(),this.progressBarElement.focus()},updateProgress:function(e,t){var n=be(t,2),i=n[0],a=n[1];e(),T(this.progressBarElement,{"aria-valuemin":"0","aria-valuenow":i,"aria-valuemax":a})}})},function(){B(f.components.widgets.SelectComponent,{render:function(e){var t=this;e();var n=G("select-btn-"),i=this.element.querySelector(".fv__ui-select"),a=document.createElement("span");this.selectedLabel=a,T(a,{id:G("selected"),"data-i18n":"[aria-label]aria:labels.select.selectedLabel",class:"fv__ui-aria-sr-only"}),this.element.appendChild(a),T(i,{id:n,role:"listbox","aria-haspopup":"listbox","aria-expanded":"false",tabindex:0}),this.$selector.setAttribute("aria-labelledby",n),this.$selector.setAttribute("role","listbox"),this.$selector.setAttribute("tabindex","-1"),this.$selector.querySelectorAll("li").forEach(function(e,n){var i=t.$options.options[n];Rt(e,i,t),e.setAttribute("role","option"),e.setAttribute("tabIndex","-1")})},setValue:function(e){var t=e();if(!this.$selector)return t;var n=this.$selector.querySelector('li[data-value="'.concat(this.value,'"]'));n&&(n.setAttribute("aria-selected","true"),n.id||(n.id=G("sel-opt-")),T(this.element.querySelector(".fv__ui-select"),{"aria-describedby":"".concat(this.selectedLabel.id," ").concat(n.id)}));return t},mounted:function(e){var t=this;e();var n=function(e){qt(e,Ht(Lt,$t,Pt,Tt,Nt,It,Ft))&&(e.preventDefault(),e.stopPropagation(),Ct(e).switchers(!1).when($t,function(){e.target.click()}).when(It,function(){var e=!1,n=document.activeElement.previousElementSibling;if(n)n.focus(),e=t.setValue(+(n.dataset?n.dataset.value:n.getAttribute("data-value")));else{var i=document.activeElement.parentElement.lastElementChild;i.focus(),e=t.setValue(+(i.dataset?i.dataset.value:i.getAttribute("data-value")))}e&&t.trigger("change",t.value)}).when(Ft,function(){var e=!1,n=document.activeElement.nextElementSibling;if(n)n.focus(),e=t.setValue(+(n.dataset?n.dataset.value:n.getAttribute("data-value")));else{var i=document.activeElement.parentElement.firstElementChild;i.focus(),e=t.setValue(+(i.dataset?i.dataset.value:i.getAttribute("data-value")))}e&&t.trigger("change",t.value)}).filter(function(){return t.$selector.children.length>5}).when(Tt,function(){var e=t.$selector.firstElementChild;e.focus(),t.setValue(+(e.dataset?e.dataset.value:e.getAttribute("data-value")))&&t.trigger("change",t.value)}).when(Nt,function(){var e=t.$selector.lastElementChild;e.focus(),t.setValue(+(e.dataset?e.dataset.value:e.getAttribute("data-value")))&&t.trigger("change",t.value)}))},i=function(e){Ct(e).when($t,function(){t.element.click()})},a=function(e){t.element.querySelector(".fv__ui-select").setAttribute("aria-expanded","true");var n=t.$selector.querySelector('li[data-value="'.concat(t.value,'"]'));setTimeout(function(){n.focus()})},r=function(e){"none"!==t.$selector.style.display&&Ct(e).when(Pt,function(){e.stopPropagation();var n=t.element.querySelector(".fv__ui-select");n.setAttribute("aria-expanded","false"),t.$selector.style.display="none",n.focus()})},o=function(e){if(!t.disabled){var n=t.element.querySelector(".fv__ui-select");n.setAttribute("aria-expanded","false");var i=t.$selector.querySelectorAll('li[aria-selected="true"]');i.length>0&&i.forEach(function(e){return e.removeAttribute("aria-selected")}),y(e).every(function(e){return!e.classList.contains("fv__ui-select-option")||(e.setAttribute("aria-selected",!0),e.click(),!1)}),t.$selector.style.display="none",n&&n.focus()}};this.$selector.querySelectorAll("li").forEach(function(e){e.addEventListener("keydown",n),e.addEventListener("click",o),t.addDestroyHook(function(){e.removeEventListener("keydown",n),e.addEventListener("click",o)})}),this.element.addEventListener("keydown",i),this.element.addEventListener("click",a),this.element.addEventListener("keyup",r),this.addDestroyHook(function(){t.element.removeEventListener("keydown",i),t.element.removeEventListener("keydown",a),t.element.removeEventListener("keyup",r)})},doActive:function(e){e(),this.element.querySelector(".fv__ui-select").setAttribute("aria-expanded","true")},doDisable:function(){T(this.element.querySelector(".fv__ui-select"),{"aria-disabled":!0,tabindex:-1})},doEnable:function(){T(this.element.querySelector(".fv__ui-select"),{"aria-disabled":!1,tabindex:0})}})},function(){var e=UIExtension.modular.root(),t=e.getComponentClass("listbox"),n=e.getComponentClass("listbox-item");t&&(B(t,{updateListData:function(e){e(),T(this,{role:"presentation"});this.children().forEach(function(e,t){"listbox-item"===e.nodeName&&(T(e,{"aria-posinset":t}),t++)}),this.childAt(0)&&this.childAt(0).childAt(1)&&this.childAt(0).childAt(1).childAt(0)&&this.childAt(0).childAt(1).childAt(0).element.focus()}}),B(n,{render:function(e){var t=this;if(e(),this.listdata.url){var n=this.path;this.addDestroyHook(this.localizer.watch("",{},"",function(){var e=n.slice(0,n.length-1).map(function(e){return pt.indexOf(e)>-1?t.localizer.translateSync("stamp.category."+e):e}).join(",");T(t,{"aria-label":e}),t.element.querySelector("img").alt=t.element.title+", "+e})),T(this.element.querySelector(".stamp-preview"),{"aria-hidden":"true"}),T(this,{role:"option"})}},doActive:function(e){e(),T(this,{"aria-selected":!0})},doDeactive:function(e){e(),T(this,{"aria-selected":!1})}}))},function(){var e=f.modular.root().getComponentClass("field-panel"),t=function(e,t){var i,a=e.$html.find(".fv__field-item:visible"),r=a.filter(".focus"),o=a.index(r);i=1===t||-1===t?a.eq((o+t+a.length)%a.length):0===t?a.first():a.last(),r.removeClass("focus"),i.addClass("focus");var l=i.attr("id");i.closest(".fv__ui-field-container").attr({"aria-activedescendant":l}),n(i)},n=function(e){var t=e.closest(".fv__ui-sidebar-panel-body"),n=t.scrollTop(),i=t.offset().top,a=e.offset().top;t.scrollTop(a-i+n)},i=function(e){var t=e.$html.find(".fv__field-item"),n=t.filter(".fv__active:visible");0===n.length&&(n=t.eq(0)),t.filter(".focus").removeClass("focus"),n.addClass("focus");var i=n.attr("id");e.$html.attr("aria-activedescendant",i)},a=function(e,t,n){for(var i=arguments.length,a=new Array(i>3?i-3:0),r=3;r<i;r++)a[r-3]=arguments[r];var o;(o=t).on.apply(o,[n].concat(M(a))),e.addDestroyHook(function(){var e;(e=t).off.apply(e,[n].concat(M(a)))})},r=function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return a.apply(void 0,[e,e.$html,t].concat(M(i)))},o=function(e,t,n,i){var a=n.id;T(t,{id:a,"aria-label":e.localizer.i18next.t("aria:labels.field.widget",{type:n.type,name:n.title,page:i}),role:"option"}),T(t.querySelector("input"),{"aria-labelledby":a})},l=function(e,t){var n=e.element,i=t.page,a=n.querySelector('.fv__field-item[data-deep="0"][data-page="'.concat(i,'"]'));if(a&&!a.getAttribute("role")){var r=a.id||G("page-item");T(a,{id:r,role:"option",tabindex:0}),T(a.querySelector("input"),{"aria-labelledby":r}),e.attachEventToElement(a.previousElementSibling,"click",function(){!function(e,t,n){var i=t.parentElement.nextElementSibling,a=n.page,r=i.querySelectorAll(".fv__field-item:not([role=option])"),l=n.children.reduce(function(e,t){return e[t.id]=t,e},{});r.forEach(function(t){var n=t.getAttribute("data-id"),i=l[n];o(e,t,i,a)})}(e,a,t)})}};B(e,{addField:function(e,t){var n=be(t,1)[0];e();var i=n.children[0];!function(e,t,n){var i=e.element.querySelector('.fv__field-item[data-deep="0"][data-page="'.concat(t,'"]'));if(i){var a=i.parentElement.nextElementSibling.querySelector('.fv__field-item[data-id="'.concat(n.id,'"]'));o(e,a,n,t)}}(this,n.page,i)},updatePage:function(e,t){var n=be(t,1)[0];e();var i=!n||!n.children||!n.children.length;this.$html.attr("tabindex",i?"-1":"0"),i||l(this,n)},render:function(e){var t=this;e(),this.$html.attr({role:"listbox",tabindex:"-1"}),r(this,"focus",function(){i(t)}),r(this,"click",".fv__field-item",function(){i(t)})},mounted:function(e){var i=this;e();var a=Wt.ArrowUp,o=Wt.ArrowDown,l=Wt.ArrowRight,c=Wt.ArrowLeft,s=Wt.Home,u=Wt.End,d=Wt.Space,f=Wt.Enter;r(this,"keydown",function(e){Kt(e.originalEvent).when(a,function(){t(i,-1),e.preventDefault(),e.stopPropagation()}).when(o,function(){t(i,1),e.preventDefault(),e.stopPropagation()}).when(l,function(){var t=i.$html.find(".fv__field-item:visible").filter(".focus"),a=t.closest(".fv__fields_list"),r=a.next();if(r.length>0&&r.hasClass("fv__hide")){var o=a.find(".fv__tree-icon"),l=o.attr("class");o.attr("class",l.replace("fv__plug","fv__minus")),r.removeClass("fv__hide"),t.removeClass("focus"),(t=r.find(".fv__field-item:visible").eq(0)).addClass("focus");var c=t.attr("id");t.closest(".fv__ui-field-container").attr({"aria-activedescendant":c}),n(t)}e.preventDefault(),e.stopPropagation()}).when(c,function(){var t,a=i.$html.find(".fv__field-item:visible").filter(".focus"),r=a.closest(".fv__field-child"),o=r.prev();if(o.length>0&&!o.hasClass("fv__hide")){t=o.find(".fv__tree-icon");var l=o.find(".fv__field-item:visible").eq(0);l.removeClass("focus"),l.addClass("focus");var c=l.attr("id");l.closest(".fv__ui-field-container").attr({"aria-activedescendant":c}),n(l)}else 0===o.length&&a.length>0&&(r=a.closest(".fv__fields_list").next()).length>0&&(t=r.find(".fv__tree-icon"));var s=t.attr("class");t.attr("class",s.replace("fv__minus","fv__plug")),r.addClass("fv__hide"),e.preventDefault(),e.stopPropagation()}).when(s,function(){t(i,0),e.preventDefault(),e.stopPropagation()}).when(u,function(){t(i),e.preventDefault(),e.stopPropagation()}).when(d,function(){i.$html.find(".fv__field-item:visible").filter(".focus").trigger("click"),i.pdfUI.eventEmitter.once("active-annotation",function(){e.target.focus()}),e.preventDefault(),e.stopPropagation()}).when(f,function(){i.$html.find(".fv__field-item:visible").filter(".focus").trigger("click"),i.pdfUI.eventEmitter.once("active-annotation",function(){e.target.focus()}),e.preventDefault(),e.stopPropagation()})})}})},function(){var e=f.components.widgets.FileSelectorComponent,t=f.components.widgets.DropdownComponent;B(e,{postlink:function(e){var t=this;e(),this.addDestroyHook(this.localizer.watch("",{},"",function(){T(t.inputElement,{"aria-label":t.element.getAttribute("aria-label")})}))},mounted:function(e){var n=this;e(),a(this.parent,t)&&(this.parent.selectable?this.setAttribute("role","option"):this.setAttribute("role","menuitem"));var i=function(e){e.pointerType&&"mouse"===e.pointerType&&(n.inputElement.click(),e.stopPropagation(),e.preventDefault())};"button"===this.element.getAttribute("role")&&(this.element.addEventListener("click",i),this.addDestroyHook(function(){n.element.removeEventListener("click",i)}))},doDisable:function(e){e(),this.element.setAttribute("tabindex","-1")},doEnable:function(e){e(),this.element.setAttribute("tabindex","0")}})},function(){B(f.components.widgets.CheckboxComponent,{render:function(e){var t=this;e(),this.attachEventToElement(this.element,"keyup",function(e){fi(e).when(hi,function(){t.inputElement.click(),e.preventDefault()})})}})},function(){B(f.components.widgets.RibbonButtonComponent,{mounted:function(e){var t=this;e(),this.on("child_inserted",A(function(){Fi(t)})),this.watchI18n("",function(){Fi(t)});var n=function(e){if(!t.notDropdown&&(Ni(e,Ii.or(Ii.Space,Ii.Enter))||"click"===e.type)){var n=t.getDropdown();n&&n.isActive&&(n.once("deactive",function(){n.separate?t.eRibbonText.focus():t.element.focus()}),ze(n))}};this.attachEventToElement(this.eRibbonText,"click",n),this.attachEventToElement(this.element,"click",n);var i=this.eRibbonText.id||G("ribbon-text");N(this.eRibbonText,"id",i);var a=this.getDropdown();if(a){a.listElement["aria-label"]||N(a.listElement,"aria-labelledby",i),a.separate||a.editable?N(a.caretElement,"aria-labelledby",i):N(a.togglerElement,"aria-labelledby",i),this.notDropdown,N(this.element,"role","button");var r=a.separate?this.eRibbonText:this.element;this.attachEventToElement(r,"keyup",function(e){e.target===r&&Ni(e,Ii.or(Ii.Space,Ii.Enter))&&n(e)}),this.addDestroyHook(a.on("active",function(){F(t.eDropdownContainer,"aria-hidden"),N(r,"aria-expanded","true")}),a.on("deactive",function(){N(t.eDropdownContainer,"aria-hidden","true"),N(r,"aria-expanded","false")}))}else N(this.eDropdownContainer,"aria-hidden","true"),N(this.element,"role","button")},select:function(e){e(),Fi(this)},doDisable:function(e){e(),Fi(this)},doEnable:function(e){e(),Fi(this)},setText:function(e){e(),Fi(this)}})},function(){B(f.modular.module("layer").getComponentClass("pdflayers"),{update:function(e){e();var t=this.$html.children(".tree-wrapper>ul.tree-list");t.attr({role:"listbox",tabindex:"0","aria-multiselectable":"true"});var n=t.find(".tree-item-main"),i=0,a=n.filter(function(e){return!!n[e].classList.contains(".fv__active")&&(i=e,!0)}),r=n[i]&&n[i].getAttribute("data-id");t.attr("aria-activedescendant",r),0===a.length&&this.activeItem(r);var o=t.find("ul.tree-list"),l=t.find(".tree-item");o.attr({role:"group"}),l.attr({role:"option",tabindex:-1}).attr("id",function(e){return l.eq(e).find(":nth-child(2)").attr("data-id")}).attr("aria-selected",function(e){var t=l.eq(e).find("input[type=checkbox]").prop("checked");return!!l.eq(e).find("input[type=checkbox]").hasClass("vb-hidden")||(t?(l.eq(e).attr("aria-checked",!0),!0):(l.eq(e).removeAttr("aria-checked"),!1))}),l.find("input[type=checkbox]").attr("tabindex","-1");n.on("click",function(e){var n=this.getAttribute("data-id");t.attr("aria-activedescendant",n)})},events:function(e){var t=this;e();var n=ta.ArrowUp,i=ta.ArrowDown,a=ta.ArrowLeft,r=ta.ArrowRight,o=ta.Space,l=ta.Home,c=ta.End,s=ta.Enter;this.$html.on("keydown",function(e){ea(e.originalEvent).when(n,function(){na(t,-1),e.preventDefault(),e.stopPropagation()}).when(i,function(){na(t,1),e.preventDefault(),e.stopPropagation()}).when(l,function(){na(t,0),e.preventDefault(),e.stopPropagation()}).when(c,function(){na(t),e.preventDefault(),e.stopPropagation()}).when(a,function(){e.stopPropagation()}).when(r,function(){e.stopPropagation()}).when(o,function(){var n=t.$html.find(".tree-item-main").filter(".fv__active"),i=n.children(".tree-item-checkbox");i.hasClass("vb-hidden")||(i.prop("checked")?(n.closest("li.tree-item").attr("aria-selected",!1),n.closest("li.tree-item").removeAttr("aria-checked")):(n.closest("li.tree-item").attr("aria-selected",!0),setTimeout(function(){n.closest("li.tree-item").attr("aria-checked",!0)}))),i.trigger("click"),e.preventDefault(),e.stopPropagation()}).when(s,function(){var n=t.$html.find(".tree-item-main").filter(".fv__active"),i=n.children(".tree-item-checkbox");i.hasClass("vb-hidden")||(i.prop("checked")?(n.closest("li.tree-item").attr("aria-selected",!1),n.closest("li.tree-item").removeAttr("aria-checked")):(n.closest("li.tree-item").attr("aria-selected",!0),setTimeout(function(){n.closest("li.tree-item").attr("aria-checked",!0)}))),i.trigger("click"),e.preventDefault(),e.stopPropagation()})})}})},function(){B(f.modular.module("attachment").getComponentClass("attachment-panel"),{mounted:function(e){var t=this;e(),this.$element.on("keydown",function(e){ia(e.originalEvent).when(ra,function(){var e=la(t,-1);t.updateButton();var n=e.find(".td:nth-child(1)").attr("id");t.$element.find(".tbody").attr("aria-labelledby",n)}).when(oa,function(){var e=la(t,1);t.updateButton();var n=e.find(".td:nth-child(1)").attr("id");t.$element.find(".tbody").attr("aria-labelledby",n)})})},renderAttachmentTable:function(e){e(),this.$attachmentTable.find(".tr>.td:nth-child(1)").each(function(e,t){t.id||T(t,{id:G()})})}})},function(){B(f.modular.module("inksign").getComponentClass("signItem"),{mounted:function(e){var t=this;e(),T(this.signItemBtn,{role:"menuitem",tabindex:0});var n=function(e,n){t.addDestroyHook(t.watchI18n(n,function(t){e.setAttribute("aria-label",t)}))};n(this.element,"aria:labels.createSignature"),n(this.deleteSignBtn,"aria:labels.deleteSignature")}})},function(){var e=f.widgets.SidebarRightComponent,t=f.SeniorComponents.SidebarTabsComponent;e&&t&&(B(e,{show:function(e){e(),this.focusElement=document.activeElement!==document.body&&document.activeElement},collapse:function(e){var t=this.isExpanded;e(),t&&(this.focusElement?this.focusElement.focus():M(document.querySelectorAll(".fx-ribbon-item-active")).every(function(e){var t=e.getBoundingClientRect(),n=t.width,i=t.height;return!n||!i||(e.focus(),!1)}))}}),B(t,{mounted:function(e){var t=this;e();var n=this.element.querySelector(".fv__ui-sidebar-right-navlist");T(n,{role:"tablist","aria-label":"right panel"});var i=function(e){var n=t.element.querySelectorAll(".fv__ui-sidebar-right-nav"),i=t.element.querySelector(".fv__ui-sidebar-right-nav.active"),a=M(n).indexOf(i);a="number"==typeof e?-1===e||1===e?(a+e+n.length)%n.length:e:n.length-1;var r=t.openTabs[a];t.openTab(r),t.setActivetab(r)};this.attachEventToElement(this.element,"keydown",function(e){P(e.target)||Ra(e,Ua(Ba,Va,ja,za,Ga))&&(e.stopPropagation(),e.preventDefault())}),this.attachEventToElement(n,"keyup",function(e){Oa(e).when(za,function(){e.stopPropagation(),e.preventDefault(),i(-1)}).when(ja,function(){e.stopPropagation(),e.preventDefault(),i(1)}).when(Ba,function(){e.stopPropagation(),e.preventDefault(),i(0)}).when(Va,function(){e.stopPropagation(),e.preventDefault(),i()}).when(Ga,function(){e.stopPropagation(),e.preventDefault(),function(){var e=t.element.querySelectorAll(".fv__ui-sidebar-right-nav"),n=t.element.querySelector(".fv__ui-sidebar-right-nav.active"),i=M(e).indexOf(n),a=t.openTabs[i];t.closeTab(a)}()})},!0)},setActivetab:function(e,t){var n=this,i=be(t,1)[0];e(),M(this.element.querySelectorAll(".fv__ui-sidebar-right-nav")).forEach(function(e){var t;(T(e.querySelector(".fv__ui-sidebar-nav-close"),{"aria-hidden":"true"}),e.classList.contains("active"))?(T(e,{role:"tab",tabindex:"0","aria-selected":"true","aria-controls":null===(t=n.getTabs().filter(function(e){return e.name===i})[0])||void 0===t?void 0:t.element.id}),e):T(e,{tabindex:"-1",role:"tab","aria-selected":"false"})})},closeTab:function(e,t){var n,i=this,a=be(t,1)[0];e(),M(this.element.querySelectorAll(".fv__ui-sidebar-right-nav")).forEach(function(e){var t;e.classList.contains("active")?(T(e,{role:"tab",tabindex:"0","aria-selected":"true","aria-controls":null===(t=i.getTabs().filter(function(e){return e.name===a})[0])||void 0===t?void 0:t.element.id}),n=e):T(e,{tabindex:"-1",role:"tab","aria-selected":"false"})}),n&&n.focus()}}))},function(){var e=7,t=9,n=f.modular.module("edit-properties").getComponentClass("edit-properties");n&&B(n,{setHost:function(n,i){var a=be(i,2),r=(a[0],a[1]);if(n(),r===e){var o=this.measureTab.$element.find("[checkbox]");o.parent().attr("role","group"),o.attr({role:"checkbox",tabindex:"0","aria-checked":!1});var l=this.measureTab.getEleByName("measure-export");l.attr({role:"button",tabindex:"0"}).attr("aria-label",l.attr("title")),o.off("click"),o.on("click",function(e){e.target.classList.contains("active")?T(e.target,{"aria-checked":!1}):T(e.target,{"aria-checked":!0})}),o.off("keydown"),o.on("keydown",function(e){Ka(e.originalEvent,Qa(Ja,Za))&&(e.preventDefault(),e.stopPropagation(),o.click())}),l.off("keydown"),l.on("keydown",function(e){Ka(e.originalEvent,Qa(Ja,Za))&&(e.preventDefault(),e.stopPropagation(),l.click())})}else if(r===t){var c=function(e){e.target.classList.contains("disabled")||(e.target.classList.contains("up")?T(e.target,{"aria-expanded":!1}):T(e.target,{"aria-expanded":!0}))},s=function(e){if(Ka(e.originalEvent,Qa(Ja,Za))){if(e.target.classList.contains("disabled"))return;e.target.click()}},u=this.noteTab.$element;B(this.noteTab.constructor,{getDialogInstance:function(e){var t=e();if(t&&t.name&&"color"===t.name){var n=t.$element,i=n.find(".fv__ui-layer-inner"),a=n.find(".item-btn");i.attr({tabindex:"0",role:"listbox","aria-labelledby":i.find(":first-child").id,"aria-activedescendant":a[0].id}),a.attr({role:"option"}).attr("aria-label",function(e){return a[e].style.background}),a.eq(0).attr("aria-selected","true");var r=function(e){var n,a=t.$element.find(".item-btn:visible"),r=-1;a.each(function(e,t){t.getAttribute("aria-selected")&&(r=e,t.removeAttribute("aria-selected"))}),n="number"==typeof e?-1===e||1===e?(r+e+a.length)%a.length:(e+a.length)%a.length:a.length-1;var o=a.eq(n),l=o.attr("id");o.attr("aria-selected","true"),i.attr("aria-activedescendant",l)};n.off("keydown"),n.on("keydown",function(e){Xa(e.originalEvent).when(Ya,function(){r(-1),e.stopPropagation(),e.preventDefault()}).when(er,function(){r(1),e.stopPropagation(),e.preventDefault()}).when(tr,function(){r(0),e.stopPropagation(),e.preventDefault()}).when(nr,function(){r(),e.stopPropagation(),e.preventDefault()}),Ka(e.originalEvent,Qa(Ja,Za))&&e.target.querySelector("[aria-selected]").click()})}else if("opacity"===t.name){var o=t.$element,l=o.find(".trigger");l.attr({role:"slider",tabindex:"0","aria-valuemax":"".concat(t.valueMax,"%"),"aria-valuemin":"".concat(t.valueMin,"%"),"aria-valuenow":"".concat(t.$label.text(),"%")});var c=function(e,n){var i=+t.$label.text()+e*n;i>100?i=100:i<0&&(i=0),t.updateUI(i);var a=+i/100;t.callback&&t.oldValue!==a&&(t.oldValue=a,t.callback(a)),o.find(".trigger").attr({"aria-valuenow":"".concat(i,"%")})},s=function(e){Ka(e.originalEvent,Qa(er,ir))?(c(1,1),e.preventDefault(),e.stopPropagation()):Ka(e.originalEvent,Qa(ar,Ya))?(c(-1,1),e.preventDefault(),e.stopPropagation()):Xa(e.originalEvent).when(or,function(){c(-1,10),e.preventDefault(),e.stopPropagation()}).when(rr,function(){c(1,10),e.preventDefault(),e.stopPropagation()}).when(tr,function(){c(-100,1),e.preventDefault(),e.stopPropagation()}).when(nr,function(){c(100,1),e.preventDefault(),e.stopPropagation()})};l.off("keydown"),l.on("keydown",s)}return t}});var d=u.find(".icon-btn");d.attr({role:"button"}).attr("tabindex",function(e){return d[e].classList.contains("disabled")?"-1":"0"}).attr("aria-disabled",function(e){return d[e].classList.contains("disabled")?"true":"false"}),d.off("keydown"),d.on("keydown",s);var f=u.find('[name="toolbar-caret"]');f.attr({role:"button",tabindex:"0","aria-label":"Toolbar Caret"}),f.off("keydown"),f.on("keydown",s),f.off("click",c),f.on("click",c);var h=u.find('[name="color"]');h.attr({tabindex:"0",role:"button","aria-label":"Color"}),h.off("keydown"),h.on("keydown",s);var v=u.find('[name="opacity"]');v.attr({tabindex:"0",role:"button","aria-label":"Opacity"}),v.off("keydown"),v.on("keydown",s)}},doDisable:function(e){e(),this.$element.find("[tabindex=0]").attr({tabindex:-1,"aria-disabled":!0})},doEnable:function(e){e();var t=this.$element.find("[tabindex=-1]:not(.disabled)");t.attr({tabindex:0}),t.removeAttr("aria-disabled")}})},function(){var e=f.widgets.CollapsePanelComponent;e&&B(e,{mounted:function(e){e();var t=this.element.querySelector("[name=text]");T(t,{role:"button",tabindex:this.disabled?"-1":"0"}),this.attachEventToElement(t,"keydown",function(e){lr(e,dr(ur,sr))&&(e.preventDefault(),e.stopPropagation(),e.target.click())})},open:function(e){e(),T(this.element.querySelector("[name=text]"),{"aria-expanded":!0})},close:function(e){e(),T(this.element.querySelector("[name=text]"),{"aria-expanded":!1})}})},function(){f.modular.moduleAsync("thumbnail").then(function(e){e.getComponentDefAsync("thumbnail-list").then(function(e){B(e.componentClass,{render:function(e){e(),T(this.element,{role:"listbox",tabindex:0})}})}),e.getComponentDefAsync("thumbnail-item").then(function(e){B(e.componentClass,{render:function(e){e(),N(this.element,"role","option")},doActive:function(e){e();var t=this.parent.element,n=(t.getAttribute("aria-activedescendant")||"").split(/\s+/);n.push(this.id),N(t,"aria-activedescendant",n.join(" ")),N(this.element,"aria-selected",!0)},doDeactive:function(e){e();var t=this.parent.element,n=(t.getAttribute("aria-activedescendant")||"").split(/\s+/),i=n.indexOf(this.id);i>-1&&(n.splice(i,1),N(t,"aria-activedescendant",n.join(" "))),N(this.element,"aria-selected",!1)}})})})},function(){B(f.modular.root().getComponentClass("form-group"),{setDescription:function(e){if(e(),this.description){var t=this.descriptionElement.id||G("desc");N(this.element,"aria-describedby",t)}}})},function(){var e=f.widgets,t=e.SelectListComponent;B(e.SelOptionComponent,{setValue:function(e){e(),T(this.element,{title:this.value})},applyNewState:function(e){e(),T(this.element,{"aria-selected":this.isSelected()})}}),B(t,{mounted:function(e){var t=this;e();var n=function(){if(0===t.size())return 1;var e=t.element.clientHeight,n=t.childAt(0).element.clientHeight;return Math.ceil(e/n)};this.attachEventToElement(this.element,"keydown",function(e){var i=t.getSelectedOptionChildren(),a=-1,r=i[i.length-1],o=i[0]?i[0].index():-1,l=r?r.index():-1,c=t.children().length,s=wr.value(n);if(Er(e,xr(kr,Cr)))0===i.length?a=0:i.length>1?a=l:(a=o+1)>=c&&(a=0);else if(Er(e,xr(Ar,Sr)))0===i.length?a=c-1:i.length>1?a=o:(a=o-1)<0&&(a=c-1);else if(Er(e,Lr))a=0;else if(Er(e,$r))a=c-1;else if(Er(e,Dr))a=0===i.length?0:o+(s.value-1);else{if(!Er(e,qr))return;a=0===i.length?0:o-(s.value-1)}a=Math.max(Math.min(c-1,a),0);var u=t.childAt(a);u&&(u.select(!0),e.preventDefault())},{})}})},function(){B(UIExtension.widgets.ColorPickerButtonComponent,{postlink:function(e){e(),T(this.element,{"aria-haspopup":"dialog"})}})}],Rr=[function(e,t){return ce(function(){return se(this,function(e){switch(e.label){case 0:return[4,t.getAllMountedComponentsByName("fv--addon-textobject-font-family-size-dropdown")];case 1:return e.sent().forEach(function(e){e.querySelectorAll("@dropdown-button").forEach(function(e){e.setAttribute("role","option")});var n=e.childAt(1),i="aria:labels.set-font-size";n.on("select",function(){n._unwatchAriaLabel&&n._unwatchAriaLabel(),n._unwatchThisLabel&&n._unwatchThisLabel();var e=t.localizer.translateSync(i);n.togglerElement.setAttribute("aria-label",e)}),t.localizer.watch(i,{},"",function(e){n.togglerElement.setAttribute("aria-label",e)})}),[2]}})})()},function(e){var t=f.modular.module("comment-list"),n=t.getComponentClass("comment-list"),i=t.getComponentClass("comment-group-ex"),a=t.getComponentClass("comment"),r=t.getComponentClass("reply"),o=t.getComponentClass("search-comment"),l=t.getComponentClass("filter-dialog"),c=t.getDirectiveClass("search-comment"),s=t.getComponentClass("load-all");B(o,{mounted:function(e){e(),T(this.element.querySelector(".fv__ui-commentlist-not-searching"),{id:G("fv__ui-commentlist-not-searching")})},doDisable:function(e){e(),T(this.openFilterBtnElement,{"aria-disabled":!0,tabindex:"-1"})},doEnable:function(e){e(),F(this.openFilterBtnElement,"aria-disabled"),T(this.openFilterBtnElement,{tabindex:"0"})}}),B(n,{render:function(e){e();var t=document.querySelector(".fv__ui-commentlist-not-searching");T(this.element,{role:"tree","aria-labelledby":t.id})},mounted:function(e){var t=this;e(),this.attachEventToElement(this.element,"keydown",function(e){var n=function(){e.preventDefault(),e.stopPropagation()},i=e.target.closest(".fv__ui-accordion-card-header"),a=e.target.closest(".fv__ui-accordion-card-body"),r=!!i,o=!!a,l=t.children().filter(function(e){return e.isDOMVisible()}),c=l.length,s=l.findIndex(function(e){return r?e.headerElement===i:e.bodyElement===a}),u=l[s],d=void 0,f=void 0,h=void 0,v=void 0,m=!1;if(r)if(Q(e,ae))f=0;else if(Q(e,re))f=c-1;else if(Q(e,Y)||Q(e,oe)&&!e.shiftKey)if(u.isActive)d=u.children().filter(function(e){return e.isDOMVisible()}),h=0,m=Q(e,oe);else{if(Q(e,oe)&&(f=s+1)>=c)return;f=(s+1)%c}else if(Q(e,Z)||Q(e,oe)&&e.shiftKey){if(Q(e,oe)){if(-1===(f=s-1))return}else f=(s-1+c)%c;var b=l[f];b&&b.isActive&&(f=void 0,h=(d=b.children().filter(function(e){return e.isDOMVisible()})).length-1,m=Q(e,oe))}else Q(e,te)?(u.active(),n()):Q(e,ee)?(u.deactive(),n()):Q(e,J(ne,ie))&&(u.isActive?u.deactive():u.active());else if(o)if(v=(d=u.children().filter(function(e){return e.isDOMVisible()})).findIndex(function(e){return e.hasFocus()}),m=Q(e,oe),Q(e,Y))(h=v+1)>=d.length&&(h=void 0,f=(s+1)%c);else if(Q(e,Z))(h=v-1)<0&&(f=s,h=void 0,v=0);else if(Q(e,oe)&&e.shiftKey){var p=d[v];if(e.target!==p.element)return;(h=v-1)<0&&(f=s,h=void 0,v=0)}else if(Q(e,oe)&&!e.shiftKey){var g=d[v];if(g&&e.target===g.replyEditorElement)g.replyEditorElement.innerText.trim()||(h=v+1)>=d.length&&(h=void 0,f=(s+1)%c);else v=void 0}else v=void 0;var y=!1;void 0!==f&&(l[f].headerElement.focus(),y=!0);var _=d?d[v]:void 0;_&&(_.deselect(),_.applyState(),y=!0);var E=d?d[h]:void 0;E&&(E.focus(),E.selected||m||E.trigger("click"),y=!0),y&&n()})}}),B(i,{render:function(e){e(),T(this.headerElement,{role:"treeitem",tabindex:"0"}),T(this.headerButtonElement,{role:"none",tabindex:"-1"})},mounted:function(e){var t=this;e(),this.attachEventToElement(this.headerElement,"focus",function(){t.headerElement.classList.add("selected"),T(t.headerElement,{"aria-selected":!0})}),this.attachEventToElement(this.headerElement,"blur",function(){t.headerElement.classList.remove("selected"),T(t.headerElement,{"aria-selected":!1})})},doActive:function(e){e(),T(this.headerElement,{"aria-expanded":!0})},doDeactive:function(e){e(),T(this.headerElement,{"aria-expanded":!1})}}),B(r,{render:function(e){e(),T(this.element,{role:"treeitem",tabindex:"-1"})},mounted:function(e){var t=this;e();var n=this.element.querySelector(".fv__ui-commentlist-comment-reply-menu");if(n){var i=n.querySelector(".fv__ui-dropdown-toggler");this.attachEventToElement(i,"focus",function(){t.element.focus()})}var a=this.element.querySelector(".fv__ui-commentlist-reply-edit"),r=function(e){Q(e,X.Tab)&&a&&!a.contains(document.activeElement)&&t.publishMessage(),document.removeEventListener("keyup",r)};this.attachEventToElement(this.element,"keydown",function(e){Q(e,X.Tab)&&document.addEventListener("keyup",r)})},applyState:function(e){e(),document.activeElement.classList.contains("fv__ui-commentlist-btn")&&this.element.focus()},doDestroy:function(e){if(e(),document.activeElement===document.body){var t=document.querySelector(".fv__biz-sidebar-comment-list.active .fv__ui-commentlist-comment.selected .fv__ui-commentlist-handler");if(t||(t=document.querySelector(".fv__biz-sidebar-comment-list.active .fv__ui-accordion-card-header")),t)T(t,{tabindex:"0"}),t.focus(),d(document.querySelector('[name="comment-list-sidebar-panel"] .fv__ui-sidebar-panel-body'),t)}}}),B(a,{render:function(e){var t=this;e(),this.commentContentElement=this.element.querySelector(".fv__ui-commentlist-comment-content"),this.on("intersection-visible",function(){T(t.element,{role:"group"}),T(t.addReplyContainerElement,{role:"treeitem",tabindex:"-1"}),T(t.handlerElement,{role:"treeitem",tabindex:"-1"}),T(t.checkMarkElement.parentElement,{tabindex:0}),T(t.commentContentElement,{tabindex:0})})},mounted:function(e){var t=this;e(),this.commentlist=this.parent.parent,this.group=this.parent,this.groupIndex=this.group.index(),this.on("intersection-visible",function(){t.attachEventToElement(t.handlerElement,"keydown",function(e){Q(e,ie)&&(e.preventDefault(),e.stopPropagation())}),t.attachEventToElement(t.commentContentElement,"keydown",function(e){Q(e,ne)&&(t.trigger("dblclick",e),e.preventDefault(),e.stopPropagation())}),t.attachEventToElement(t.element,"keydown",function(e){e.target===t.element&&(K(e.target)&&Q(e,J(ne,oe,te,ee,Z,Y,ie,ae,re))&&e.stopPropagation(),Q(e,ne)&&!t.selected&&t.trigger("click"))}),t.attachEventToElement(t.publishMessageBtn,"keydown",function(e){Q(e,J(ne,ie))&&t.target.click()});var e=t.handlerElement.querySelector(".fv__ui-commentlist-comment-item-menu"),n=e&&e.querySelector(".fv__ui-dropdown-toggler");e&&(t.attachEventToElement(e,"keyup",function(t){W(t).when(ie,function(){"cancel-check-mark"===t.target.getAttribute("component-name")?e.querySelector('[component-name="add-check-mark"]').focus():"add-check-mark"===t.target.getAttribute("component-name")&&e.querySelector('[component-name="cancel-check-mark"]').focus()}),t.preventDefault(),t.stopPropagation()}),t.attachEventToElement(n,"focus",function(){t.handlerElement.focus()}));var i,a=function(){document.activeElement===document.body&&M(document.querySelector('[name="fv--commentlist-search-load-all"]').children).every(function(e){var t=e.getBoundingClientRect(),n=t.width,i=t.height;return!n||!i||(e.focus(),d(document.querySelector('[name="comment-list-sidebar-panel"] .fv__ui-sidebar-panel-body'),e),!1)})},r=t.element.querySelector(".fv__ui-commentlist-comment-editor"),o=function(e){Q(e,X.Tab)&&("replyContainer"!==i||t.addReplyContainerElement.contains(document.activeElement)||(t.publishReplyMessage(),a()),"commentEditor"!==i||r.contains(document.activeElement)||(t.publishMessage(),a())),document.removeEventListener("keyup",o)};t.attachEventToElement(t.element,"keydown",function(e){Q(e,X.Tab)&&(t.addReplyContainerElement.contains(document.activeElement)?i="replyContainer":r.contains(document.activeElement)&&(i="commentEditor"),document.addEventListener("keyup",o))});var l=t.handlerElement.querySelector(".fv__ui-commentlist-comment-check-mark");t.attachEventToElement(t.handlerElement,"keyup",function(e){W(e).when(ne,function(){n&&n.click(),e.preventDefault(),e.stopPropagation()}).when(ie,function(){l&&(l.click(),T(t.handlerElement,{"aria-checked":l.checked})),e.preventDefault(),e.stopPropagation()})})})},clearReplyEditor:function(e){e();var t=this.element.querySelector(".fv__ui-commentlist-replies .fv__ui-commentlist-reply:last-child"),n=document.querySelector([".fv__ui-accordion-card-header[aria-selected=true]",".fv__ui-commentlist-handler[aria-selected=true]",".fv__ui-commentlist-reply[aria-selected=true]"].join(","));(n&&(n.classList.remove("selected"),F(n,"aria-selected"),T(n,{tabindex:"-1"})),t)&&(t.classList.add("selected"),T(t,{tabindex:"0","aria-selected":!0}),t.focus(),d(document.querySelector('[name="comment-list-sidebar-panel"] .fv__ui-sidebar-panel-body'),t))},applyState:function(e){if(e(),this.element&&(M(this.element.querySelectorAll(".fv__ui-commentlist-comment-editor")).forEach(function(e){T(e,{role:"treeitem"})}),M(this.element.querySelectorAll(".fv__ui-commentlist-btn")).forEach(function(e){T(e,{tabindex:"0",role:"button"})})),document.activeElement.classList&&document.activeElement.classList.contains("fv__ui-commentlist-btn")){var t=document.querySelector([".fv__ui-accordion-card-header[aria-selected=true]",".fv__ui-commentlist-handler[aria-selected=true]",".fv__ui-commentlist-reply[aria-selected=true]"].join(","));t&&(F(t,"aria-selected"),T(t,{tabindex:"-1"}),t.classList.remove("selected")),this.handlerElement.classList.add("selected"),T(this.handlerElement,{tabindex:"0","aria-selected":!0}),this.handlerElement.focus(),d(document.querySelector('[name="comment-list-sidebar-panel"] .fv__ui-sidebar-panel-body'),this.handlerElement)}},doDestroy:function(e){var t=this.groupIndex,n=this.commentlist.children();e();for(var i=t;i>=0&&i<n.length;i--){var a=n[i];if(a.children().length>0)return void a.headerElement.focus()}for(var r=t;r<n.length;r++){var o=n[r];if(o.children().length>0)return void o.headerElement.focus()}this.commentlist.getClosestComponentByType("sidebar-panel").focus()}}),B(l,{mounted:function(e){e();var t=this.element.querySelector('[name="fv--commentlist-filter-clear-selection-btn"]');T(t,{role:"button",tabindex:0}),M(this.element.querySelectorAll(".fv__ui-commentlist-filter-option .fv--ui-commentlist-fielter-fieldset-label")).forEach(function(e){T(e,{role:"checkbox",tabindex:0,"aria-label":e.textContent})}),this.attachEventToElement(t,"keydown",function(e){Q(e,J(ie,ne))&&(t.click(),e.preventDefault(),e.stopPropagation())}),this.attachEventToElement(this.element,"click",function(e){e.target.classList&&e.target.classList.contains("fv--ui-commentlist-fielter-fieldset-label")&&T(e.target,{"aria-checked":!e.target.previousSibling.checked})}),this.attachEventToElement(this.element,"keydown",function(e){Q(e,J(ie,ne))&&(e.target.classList&&e.target.classList.contains("fv--ui-commentlist-fielter-fieldset-label")&&e.target.click(),e.preventDefault(),e.stopPropagation())})},updateData:function(e){e(),M(this.element.querySelectorAll(".fv__ui-commentlist-filter-fieldset-author,.fv__ui-commentlist-filter-fieldset-commentType")).forEach(function(e){e.querySelectorAll(".fv__ui-commentlist-filter-option .fv--ui-commentlist-fielter-fieldset-label").forEach(function(e){T(e,{role:"checkbox",tabindex:0,"aria-label":e.textContent})})})}}),B(c,{doFoundMatch:function(e){e(),this.component.element.classList.contains("selected")&&this.storeFocusEle&&(this.storeFocusEle.classList.remove("selected"),F(this.storeFocusEle,"aria-selected"),T(this.storeFocusEle,{tabindex:"-1"}))},doFoundNotMatch:function(e){e(),this.component.element.classList.contains("selected")&&(this.storeFocusEle=document.querySelector(".fv__biz-sidebar-comment-list.active .fv__ui-accordion-card-header"),this.storeFocusEle&&(this.storeFocusEle.classList.add("selected"),T(this.storeFocusEle,{tabindex:0,"aria-selected":!0})))}}),B(s,{mounted:function(e){e();var t=this.element.querySelector(".fv__ui-commentlist-search-load-all-load"),n=this.element.querySelector(".fv__ui-commentlist-search-load-all-loading"),i=this.element.querySelector(".fv__ui-commentlist-search-load-all-no-more");T(t,{tabindex:"0",role:"button"}),T(n,{tabindex:"0",role:"button"}),T(i,{tabindex:"0",role:"button"}),this.attachEventToElement(t,"click",function(e){var t=document.querySelector(".fv__ui-commentlist [aria-selected=true]");t&&(t.focus(),d(document.querySelector('[name="comment-list-sidebar-panel"] .fv__ui-sidebar-panel-body'),t))}),this.attachEventToElement(t,"keydown",function(e){Q(e,ne)&&(e.preventDefault(),e.stopPropagation())}),this.attachEventToElement(t,"keyup",function(e){Q(e,ne)&&t.click()})}});var u=f.UIEvents;function d(e,t){var n=e.scrollTop,i=t.getBoundingClientRect().bottom,a=e.getBoundingClientRect(),r=n+i-a.top-a.height;r<0&&(r=0),e.scrollTo(0,r)}e.addUIEventListener(u.appendCommentListGroup,function(e){var t=e.localizer,n=e.headerElement,i=function(){var i=t.translateSync("aria:labels.commentlist.group-title",{count:e.annotationCount,page:e.pageNumber});n.setAttribute("aria-label",i)};n.addEventListener("focus",i),e.addDestroyHook(function(){n.removeEventListener("focus",i)})}),e.addUIEventListener(u.appendCommentListComment,function(e,t){e.on("intersection-visible",function(){var n=e.localizer.watch("aria:labels.commentlist.comment",{type:t.getType(),page:t.getPDFPage().getIndex()+1,author:t.getTitle(),content:t.getContent()},"",function(t){e.handlerElement.setAttribute("aria-label",t)});e.addDestroyHook(n),M(e.handlerElement.querySelectorAll("button")).forEach(function(e){T(e,{role:"none",tabindex:"-1"})})})}),e.addUIEventListener(u.appendCommentListReply,function(e,t,n){var i=e.localizer.watch("aria:labels.commentlist.reply",{page:t.getPDFPage().getIndex()+1,type:t.getType(),replyAuthor:t.getTitle(),commentAuthor:n.getTitle(),content:t.getContent()},"",function(t){e.setAttribute("aria-label",t)});M(e.handlerElement.querySelectorAll("button")).forEach(function(e){T(e,{role:"none",tabindex:"-1"})}),e.addDestroyHook(i)})},function(e,t){return ce(function(){var e,n,i,a,r,o;return se(this,function(l){switch(l.label){case 0:return[4,t.getMountedComponentByName("print-dialog")];case 1:return(e=l.sent())?(n=e.querySelector("fv--print-page-size-container>@div"),i=e.getComponentByName("print-dropdown-quality"),a=e.querySelector("fv--print-page-size-container::nextSiblings()"),i&&n&&T(i.cursorElement,{"aria-labelledby":n.id}),a&&T(a,{role:"alert","aria-live":"assetive","aria-atomic":"true"}),(r=e.getComponentByName("print-dialog-ok-btn"))&&(o=function(e){Ce(e).when($e(qe,Le),function(){r.element.click()})},r.element.addEventListener("keyup",o),e.addDestroyHook(function(){r.element.removeEventListener("keyup",o)})),B(e.controller.constructor,{showError:function(e,t){var n=be(t,1)[0];e(n),n.attr("aria-invalid","true"),n.focus(),n[0].onblur=function(){n.removeAttr("aria-invalid")}}}),[2]):[2]}})})()},function(e,t){return ce(function(){var n,i,a,r,o,l,c,s,u;return se(this,function(d){switch(d.label){case 0:return[4,t.waitForComponentLifecycle("page-template-dialog","mounted")];case 1:return n=be.apply(void 0,[d.sent(),1]),(i=n[0])?(_e=i.element,T(a=i.getComponentByName("nameTree"),{role:"group","aria-live":"assertive"}),r=t.localizer,o="aria:labels.visibleBox",l=i.controller.resetNameTreeUI,i.controller.resetNameTreeUI=function(){return l.apply(this,arguments).then(function(){var t;Array.from(a.element.children).forEach(function(n,i){n.classList.add("fv__addon-aria-page-template-name-tree-item");var l=n.classList.contains("selected");T(n.lastElementChild,{"aria-posinset":i,tabindex:"0",role:"listitem","aria-selected":l});var c=n.querySelector("[name=visibleBox]");T(c,{role:"checkbox","aria-checked":!0,tabindex:0,"aria-label":r.translateSync(o)}),l&&(t=n.lastElementChild),n.addEventListener("click",function(){t!==n&&(t&&N(t,"aria-selected","false"),N(n.lastElementChild,"aria-selected","true"),t=n.lastElementChild)}),a.element.addEventListener("keyup",function(e){var t=e.target;pe(e).when(ye,function(){t.click(),Ee()}),e.stopPropagation()}),c.addEventListener("click",function(t){var n=t.target.querySelector(".eye");N(t.target,"aria-checked",Boolean(n)),e.eventEmitter.once("completed-render-visible-pages",function(){t.target.focus()})}),c.addEventListener("keyup",function(e){var t=e.target;pe(e).when(ye,function(){t.click()}),e.stopPropagation()})})})},c=i.controller.resetPageThumb,i.controller.resetPageThumb=function(){var e=this;return function(t){c.apply(e,t),Array.from(a.element.children).forEach(function(e,t){e.classList.add("fv__addon-aria-page-template-name-tree-item");var n=e.classList.contains("selected");T(e.lastElementChild,{"aria-posinset":t,tabindex:"0",role:"listitem","aria-selected":n});var i=e.querySelector("[name=visibleBox]"),a=Boolean(i.querySelector(".eye"));T(i,{role:"checkbox","aria-checked":a,tabindex:0,"aria-label":r.translateSync(o)})})}(arguments)},s=i.controller.resetButtonUI,i.controller.resetButtonUI=function(){var e=this;return function(t){s.apply(e,t),Ee()}(arguments)},u=i.controller.resetUI,i.controller.resetUI=function(){var e=this,t=arguments;return u.apply(e,t),void Ee()},i.controller.$name.on("keyup",Ee),[2]):[2]}})})()},function(e,t){return ce(function(){var e,n,i,a,r,o,l,c,s,u,d,f,h,v,m,b,p;function g(e,t){var n=a.querySelector("#"+e),i=n.querySelector("label"),r=n.querySelector("input"),o=G(t);T(i,{id:o}),T(r,{"aria-labelledby":o})}return se(this,function(y){switch(y.label){case 0:return[4,t.getMountedComponentByName("create-stamp-dialog")];case 1:return e=y.sent(),n=e.element.querySelector(".fv__ui-layer-inner"),i=e.querySelector("@stamp:stamp-create"),a=i.element,r=a.querySelector(".fv__ui-stamp-dropdown"),o=a.querySelector(".fv__ui-stamp-source"),l=G("stamp-dropdown"),T(n,{role:"application"}),T(r,{tabindex:"0",role:"button","aria-haspopup":"listbox",id:l}),T(o,{role:"listbox","aria-labelledby":l,tabindex:"-1"}),o.querySelectorAll("li").forEach(function(e,t){T(e,{"aria-posinset":t,tabindex:0,role:"option"})}),o.querySelector("#stamp-local-path"),c=a.querySelector("#stampCategory"),s=c.querySelector("label"),u=G("stamp-category"),d=c.querySelector("input"),f=c.querySelector("select"),T(s,{id:u}),T(d,{"aria-labelledby":u}),T(f,{"aria-labelledby":u}),h=a.querySelector("#stampType"),v=h.querySelector("label"),m=h.querySelector("select"),b=G("stamp-type"),T(v,{id:b}),T(m,{"aria-labelledby":b}),g("stampName","stamp-name"),g("stampWidth","stamp-width"),g("stampHeight","stamp-height"),p=e.querySelectorAll("@xbutton[data-action=OK]"),r.addEventListener("keyup",function(e){ue(e).when(fe,function(){var t=o.style;t.display="block"===t.display?"none":"block",o.firstElementChild.focus(),e.stopPropagation()}).when(me,function(){o.style.display="none",r.focus(),e.stopPropagation()})}),o.addEventListener("keyup",function(e){ue(e).switchers(!1).when(fe,function(){var t=e.target;"LI"===t.tagName&&(t.querySelector("#stamp-local-path")?t.querySelector("span").click():t.querySelector(".fv__ui-stamp-source-lable").click());e.stopPropagation()}).when(he,function(){var e=document.activeElement;if("LI"===e.tagName){var t,n=M(e.parentElement.children),i=n.indexOf(e);n[--i]?(t=n[i]).focus():(t=e.parentElement.lastElementChild).focus(),e.removeAttribute("aria-selected"),t.setAttribute("aria-selected","true")}}).when(ve,function(){var e=document.activeElement;if("LI"===e.tagName){var t,n=M(e.parentElement.children),i=n.indexOf(e);n[++i]?(t=n[i]).focus():(t=e.parentElement.firstElementChild).focus(),e.removeAttribute("aria-selected"),t.setAttribute("aria-selected","true")}}).when(me,function(){o.style.display="none",r.focus(),e.stopPropagation()})}),e.element.addEventListener("keydown",function(e){ue(e).switchers(!1).when(fe,function(){var e=document.activeElement;e.classList&&e.classList.contains("fv__ui-stamp-dialog")?p[0].element.click():"Close"===e.getAttribute("data-action")&&e.children[0].click()}),e.stopPropagation()}),o.querySelector("#stamp-local-path").addEventListener("click",function(e){r.focus()}),[2]}})})()},function(e,t){B(f.modular.module("search").getComponentClass("search-panel"),{render:function(e){e(),T(this.eInput,{"aria-label":this.localizer.translateSync("[placeholder]sidebar.search.panel.placeholder")})}});var n=t.querySelector("@search:search-panel");if(n){var i=n.element,a=i.querySelector("[name=pattern]"),r=t.localizer;n.addDestroyHook(r.watch("",{},"",function(){T(a,{"aria-label":r.translateSync("sidebar.search.panel.placeholder")})})),i.querySelectorAll(".fv__search-panel-form-label").forEach(function(e){var t=e.querySelector("input"),n=e.querySelector(".fv__search-panel-form-label-text"),i=G("search-panel-label");T(n,{id:i}),T(t,{"aria-labelledby":i})})}},function(e,t){B(f.EditActionsTab,{buildActionsDom:function(e){return ce(function(){var t,n,i;return se(this,function(a){switch(a.label){case 0:return[4,e()];case 1:return a.sent(),t=this.$element.find(".fv__action_list"),n=this.$element.find(".fv__action_title").attr("id"),t.attr({role:"tree","aria-labelledby":n}),t.children().length>0&&((i=t.children().attr({role:"treeitem","aria-expanded":"true",tabindex:"-1"}))[0].setAttribute("tabindex","0"),i.find(".fv__subaction_list").attr("role","group"),i.find(".fv_action-body").attr({role:"treeitem","aria-expanded":"true",tabindex:"-1"}),function(e){var t=e.find("[role='treeitem']");t.off("click",Tn),t.on("click",Tn),t.off("keydown",Cn),t.on("keydown",Cn);var n=e.find(".fv_action-info-toggler");n.off("click",Pn),n.on("click",Pn),e.off("click",An),e.on("click",An)}(t)),[2]}})}).call(this)},_setActionBtnStatus:function(e){var t,n;e(),t=this.$element.find(".fv__action_list"),(n=t.closest(".fv__action_tab").find(".fv__action_buttons>.fv__ui-dialog-ok-button")).attr("tabindex",function(e){return n[e].classList.contains("disabled")?-1:0}),this.$element.find("#upAction, #downAction").each(function(e,t){t.classList.contains("disabled")?N(t,"tabindex","-1"):N(t,"tabindex","0")});var i=document.activeElement;if("upAction"===i.getAttribute("id")&&i.classList.contains("disabled")?this.$element.find("#downAction:not(.disabled)").length>0&&this.$element.find("#downAction:not(.disabled)").eq(0).focus():"downAction"===i.getAttribute("id")&&i.classList.contains("disabled")&&this.$element.find("#upAction:not(.disabled)").length>0&&this.$element.find("#upAction:not(.disabled)").eq(0).focus(),this.$element.find("[role=tree]").attr({disabled:this.disabled,"aria-disabled":this.disabled}),this.disabled)this.$element.find("[role=treeitem]").attr({tabindex:"-1"});else{var a=this.$element.find("[role=treeitem]");a.length>0&&0===a.filter(function(e){return"0"===a[e].getAttribute("tabindex")}).length&&a.eq(0).attr("tabindex","0")}},syncUI:function(e){e(),this.$element.find("#actionAddButton").attr("tabindex",this.disabled?"-1":"0")},offEvent:Sn})},function(e,t){e.eventEmitter.on(PDFViewCtrl.ViewerEvents.renderFileSuccess,function(){var t=e.signPropertyDialog;t&&B(t.constructor,{updateDialog:function(t){function n(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?{role:"button",tabindex:"0"}:{},i={"aria-labelledby":t.id};T(e,Object.assign({},n,i))}t();var i=this.dialog.element;i.querySelectorAll(".fv__signature-input").forEach(function(e){var t=e.querySelector("span");n(t.nextSibling,t)});var a=i.querySelector("#permissions");n(a,a.previousSibling);var r=i.querySelector(".fv__ap-edit"),o=r.previousSibling;n(r,o,!0);var l=function(t){Nn(t).when(In,function(){t.target.click(),e.eventEmitter.emit(Fn)})};r.addEventListener("keyup",l),this.addDestroyHook(function(){r.removeEventListener("keyup",l)});var c=i.querySelector(".fv__button-ok"),s=i.querySelector(".fv__button-cancle");T(c,{role:"button",tabindex:"0","aria-label":c.innerText}),T(s,{role:"button",tabindex:"0","aria-label":s.innerText})}})})},function(e,t){e.eventEmitter.on(Fn,function(){var t=e.SigAPDialog.dialog;if(t){var n=t.element,i=n.querySelector(".fv_sig-open-inksign");T(i,{role:"button",tabindex:"-1","aria-label":i.innerText});var a=n.querySelector(".fv__signature-image");T(a,{role:"radiogroup","aria-labelledby":a.previousSibling.id});var r=a.querySelectorAll("input");r.forEach(function(e){var n=e.checked;T(e,{"aria-checked":n?"true":"false",tabindex:n?"0":"-1"});var a=function(e){r.forEach(function(e){T(e,{"aria-checked":"false",tabindex:"-1"})}),T(e.target,{tabindex:"0","aria-checked":"true"})},o=function(e){Hn(e).when(On,function(){T(i,{tabindex:"drawingSig"==e.target.id?"0":"-1"})}).when(Mn,function(){T(i,{tabindex:"drawingSig"==e.target.id?"0":"-1"})})};e.addEventListener("click",a),e.addEventListener("keyup",o),t.addDestroyHook(function(){e.removeEventListener("click",a),e.removeEventListener("keyup",o)})});var o=n.querySelector(".fv__signature-labels");T(o,{role:"group","aria-labelledby":o.previousSibling.id});var l=n.querySelector(".fv__button-ok"),c=n.querySelector(".fv__button-cancle");T(l,{role:"button",tabindex:"0","aria-label":l.innerText}),T(c,{role:"button",tabindex:"0","aria-label":c.innerText})}})},function(e,t){return ce(function(){var e,n,i,a,r,o,l,c,s,u,d,f,h,v,m,b,p,g,y,_,E,w;return se(this,function(x){switch(x.label){case 0:return[4,t.getMountedComponentByName("create-signature")];case 1:return e=x.sent(),n=e.element.querySelector(".fv__ui-layer-header-title"),i=e.getComponentByName("sign-dialog-tab-panel").element,a=i.querySelector(".fv__ui-sign-dialog-tabs"),r=i.querySelectorAll(".fv__ui-sign-dialog-tab"),o=i.querySelectorAll(".fv__ui-sign-dialog-panel"),l=i.querySelector(".preview-file-error-message"),T(a,{role:"tablist","aria-label":n.innerText}),c=function(e){e.target.textContext?T(e.target,{role:"alert"}):I(e.target,"role")},window.MutationObserver?((s=new MutationObserver(function(e){e.forEach(function(e){e&&e.addedNodes&&e.addedNodes.length>0&&e.addedNodes[0]?T(e.target,{role:"alert"}):I(e.target,"role")})})).observe(l,{childList:!0}),e.addDestroyHook(function(){s.disconnect()})):(u="DOMSubtreeModified",l.addEventListener(u,c),this.addDestroyHook(function(){element.removeEventListener(u,c)})),d=function(e){r.forEach(function(e){var t=e.classList.contains("active");T(e,{"aria-selected":t,tabindex:t?"0":"-1"})})},f=function(e){var t,n,i=e.target;Bn(e).when(Qn(zn,Gn),function(){t=i.previousSibling?i.previousSibling:r[r.length-1]}).when(Qn(jn,Kn),function(){t=i.nextSibling?i.nextSibling:r[0]}).when(Wn,function(){t=r[0]}).when(Xn,function(){t=r[r.length-1]}),t&&(n=t,r.forEach(function(e,t){var i=e.id==n.id;e.classList[i?"add":"remove"]("active"),T(e,{"aria-selected":i,tabindex:i?"0":"-1"}),o[t].style.display=i?"block":"none"}),t.focus(),e.preventDefault(),e.stopPropagation())},r.forEach(function(t,n){T(t,{role:"tab",tabindex:t.classList.contains("active")?"0":"-1","aria-selected":"false","aria-labelledby":r[n].id,"aria-controls":o[n].id}),t.addEventListener("keydown",f),t.addEventListener("click",d),e.addDestroyHook(function(){t.removeEventListener("keydown",f),t.addEventListener("click",d)})}),o.forEach(function(e,t){T(e,{role:"tabpanel","aria-labelledby":r[t].id})}),h=i.querySelector(".fv__ui-sign-dialog-color"),v=h.querySelectorAll("span"),m=i.querySelector(".fv__ui-sign-dialog-size"),b=m.querySelectorAll("span"),p=i.querySelector(".fv__ui-sign-dialog-eraser .fv__icon-toolbar-clear"),g=i.querySelector(".image-title .fv__icon-toolbar-clear"),y=i.querySelector(".fv__ui-sign-dialog-canvas"),_=t.localizer,e.attachEventToElement(p,"keydown",function(e){Un(e,Jn)&&(p.click(),e.preventDefault(),e.stopPropagation())}),e.attachEventToElement(g,"keydown",function(e){Un(e,Jn)&&(g.click(),e.preventDefault(),e.stopPropagation())}),e.addDestroyHook(_.watch("",{},"",function(){T(h,{role:"radiogroup","aria-label":_.translateSync("aria:labels.createInkSign.strokeColor")}),T(m,{role:"radiogroup","aria-label":_.translateSync("aria:labels.createInkSign.brushSize")}),T(p,{role:"button",tabindex:"0","aria-label":_.translateSync("aria:labels.createInkSign.eraser")}),T(g,{role:"button",tabindex:"0","aria-label":_.translateSync("aria:labels.createInkSign.clear")}),T(y,{"aria-label":_.translateSync("aria:labels.createInkSign.preview"),tabindex:"0"}),b.forEach(function(e){T(e,{"aria-label":_.translateSync("aria:labels.createInkSign.unit",{unit:e.getAttribute("data-size")})})})})),E=function(e){var t=e.target;t.classList.contains("color-wrapper")||(t=t.parentNode),t.parentElement.querySelectorAll("span").forEach(function(e){var n=e.id==t.id;T(e,{"aria-checked":n,tabindex:n?"0":"-1"})})},w=function(e){e.parentElement.querySelectorAll("span").forEach(function(t,n){var i=t.id==e.id;t.classList[i?"add":"remove"]("circle-active"),i&&t.click()})},v.forEach(function(t,n){var i=0==n;T(t,{role:"radio","aria-checked":i?"true":"false",tabindex:i?"0":"-1","aria-label":t.getAttribute("data-color")}),t.addEventListener("keydown",function(e){return Zn(e,w)}),t.addEventListener("click",E),e.addDestroyHook(function(){t.removeEventListener("keydown",function(e){return Zn(e,w)}),t.removeEventListener("click",E)})}),b.forEach(function(t,n){var i=0==n;T(t,{role:"radio","aria-checked":i?"true":"false",tabindex:i?"0":"-1"}),t.addEventListener("keydown",function(e){return Zn(e,w)}),t.addEventListener("click",E),e.addDestroyHook(function(){t.removeEventListener("keydown",function(e){return Zn(e,w)}),t.removeEventListener("click",E)})}),e.element.querySelectorAll(".online-checkbox-input").forEach(function(e){var t=e.parentElement;T(t,{role:"checkbox",tabindex:0,"aria-checked":e.checked}),t.addEventListener("click",function(){N(t,"aria-checked",e.checked)}),t.addEventListener("keydown",function(e){Bn(e).when(Jn,function(){e.target.click(),e.preventDefault(),e.stopPropagation()})})}),[2]}})}).call(this)},function(e,t){e.eventEmitter.once("showCODialog",function(){var t=(ci=e.CODialog).$element.find("[role=button]"),n=function(e){ei(e,li)&&(e.target.click(),e.preventDefault(),e.stopPropagation()),e.target.removeEventListener("keyup",n)};t.on("keydown",function(e){if(ei(e.originalEvent,li)){if(e.target.classList.contains("disabled"))return;e.target.addEventListener("keyup",n),e.stopPropagation(),e.preventDefault()}}),B(ci.constructor,{show:function(e){e(),this.$element.find(".fv_CO-item").each(function(e,t){T(t,{role:"option","aria-label":t.innerText,"aria-selected":t.classList.contains("active"),id:G("field-item")}),t.addEventListener("click",function(e){ui(),di()})}),this.$element.find(".fv__fields-list")[0].addEventListener("keydown",si),ui(),di()},moveItemTo:function(e){e(),ui(),di(),ci.$element.find(".fv_CO-item").each(function(e,t){T(t,{"aria-label":t.innerText})})},destroy:function(e){e(),this.$element.find(".fv_CO-item").each(function(e,t){t.removeEventListener("click")}),this.$element.find(".fv__fields-list")[0].removeEventListener("keydown")}})})},function(e,t){var n=t.getAllComponentsByType("pause-resume-read-aloud");n&&1===n.length&&B(n[0].constructor,{switchToResumeButton:function(e){e(),this.setAttribute("aria-label",this.localizer.translateSync(this.resumeTooltipTitle))},switchToPauseButton:function(e){e(),this.setAttribute("aria-label",this.localizer.translateSync(this.pauseTooltipTitle))}})},function(e,t){return ce(function(){var n;function i(){n.dialog.localizer.watch("aria:labels.close-layer-btn",{},"aria:labels.close-layer-btn",function(e){n.$dialog.find("[name=closeDialog]").attr("aria-label",e)}),n.$tabNav.attr("role","tab"),n.$tabNav.attr("tabindex","-1"),n.$tabNav.filter(".active").attr("tabindex","0"),n.$tabNav.attr("aria-selected","false"),n.$tabNav.each(function(e,t){var i=n.$dialog.find(".fv__ui-form-tab-body > div:not(.lock-mask)");i.attr("role","tabpanel"),i.eq(e).attr("aria-labelledby",t.id),t.setAttribute("aria-controls",i.eq(e).attr("id"))}),function(){n.$tabNav.on("keydown",v),n.$tabNav.on("focus",function(e){n.$tabNav.attr("tabindex","-1"),n.$tabNav.attr("aria-selected","false"),e.target.setAttribute("tabindex","0"),e.target.setAttribute("aria-selected","true")}),n.$dialog.find("[role='button']").on("keydown",v),n.$dialog.find(".fv__ui-dialog-button[name=advanced]").on("click",o),n.$dialog.find(".fv__ui-dialog-button[name=clearIcon]").on("click",s),n.$dialog.find("select[name=layout]").on("change",a),n.$dialog.find("#chooseIconFile").on("change",c);var e=n.$dialog.find(".fv__advanced-dialog");e.find(".fv__icon-layer-close,.confirm-button,.cancel-button").on("click",l),e.on("keyup",r),n.$dialog.find("[name=validateRadio]").on("change",function(e){return u("validateRadio")}),n.$dialog.find("[name=calculateRadio]").on("change",function(e){return u("calculateRadio")}),n.$dialog.find("[name=selectAction]").on("change",f),n.$dialog.find("[name=signAction]").on("change",h)}(),B(n.constructor,{updateContent:function(e){e();var t=n.annot,i=(Object.keys(bn).find(function(e){return bn[e]===t.getField().getType()})||"").toLowerCase(),a=n.dialog.element.querySelector(".fv__ui-form-tab-nav");if(a){a.setAttribute("role","tablist");var r=n.$dialog.find('.fv_ui_dialog_title > div[show-in-types="'.concat(i,'"]')).attr("id");a.setAttribute("aria-labelledby",r)}!function(){n.$dialog.find(".inputContainer .inlineItem").each(function(e,t){var n=t.querySelector("div").getAttribute("id"),i=t.querySelector("input").getAttribute("id"),a=t.querySelector("span").getAttribute("id");t.querySelector("input").setAttribute("aria-labelledby","".concat(n," ").concat(i," ").concat(a))});var e=n.$dialog.find(".bg-wrap .fv__ui-dropdown-editor"),t=n.$dialog.find(".bg-wrap .fv__ui-dropdown-caret"),i=e.parent().parent().prev();e.attr("aria-labelledby",i.attr("id")),t.attr("aria-labelledby",i.attr("id")),e[0].parentElement.hasAttribute("disabled")?e.attr("disabled",!0):e.removeAttr("disabled")}()},lockedHandler:function(e){if(e(),n.dialog.element){if(n.$locked.prop("checked")){var t=n.$dialog.find(".fv__ui-form-tab-body");t.find("input,select,textarea,button").not(function(e,t){return t.hasAttribute("data-forbid")}).attr("disabled",!0),t.find(".fv__action_list").addClass("disabled"),t.find('.fv__ui-dialog-button[tabindex="0"],.fv__action_list div[tabindex="0"],.color-picker div[tabindex="0"],.fv__action_add[tabindex="0"],select,input[type="radio"],input[type="checkbox"]').attr("tabindex",-1),t.find(".fv__ui-dialog-button").addClass("disabled"),d(),f(),h()}else{var i=n.$dialog.find(".fv__ui-form-tab-body");i.find("input,select,textarea,button").not(function(e,t){return t.hasAttribute("data-forbid")}).removeAttr("disabled"),i.find(".fv__action_list").removeClass("disabled"),i.find('.fv__ui-dialog-button[tabindex="-1"],.fv__action_list div[tabindex="-1"],.color-picker div[tabindex="-1"],.fv__action_add[tabindex="-1"],select,input[type="radio"],input[type="checkbox"]').attr("tabindex",0),function(){var e=n.$dialog.find(".fv__ui-form-tab-body");if(n.annot&&n.annot.getField){var t=n.annot.getField(),i=e.find("[name=textSize]"),a=e.find("[name=directionRTL]"),r=e.find("[name=fontName]");!t||t.getType()!==bn.Sign&&t.getType()!==bn.CheckBox&&t.getType()!==bn.RadioButton?(i.find("input,button").removeAttr("disabled").removeClass("disabled"),a.removeAttr("disabled").removeClass("disabled"),r.removeAttr("disabled").removeClass("disabled")):(i.find("input,button").attr("disabled",!0).addClass("disabled"),a.attr("disabled",!0).addClass("disabled"),r.attr("disabled",!0).addClass("disabled"))}}(),d(),f(),h(),u("calculateRadio"),function(){var e,t;if(n.annot&&n.annot.getField){if(!(e=n.annot.getField()))return;var i=e.getAction(pn.format);i&&"TypeJavaScript"==i.info.type&&(t=i.info.javascript);var a=t?Jt.GetFormatStringType(t):0,r=n.$dialog.find('[name="validateRadio"]');1==a||2==a?r.filter("[value=1]").removeAttr("disabled"):r.filter("[value=1]").attr("disabled","disabled"),u("validateRadio")}}()}UIExtension.vendors.jQuery;var a=n.annot;if(!a||a.isEmpty()||!a.getField())return}},destroy:function(e){!function(){if(n.isDestroyed)return;n.$tabNav.off("keydown"),n.$tabNav.off("focus"),n.$dialog.find("[role='button']").off("keydown"),n.$dialog.find(".fv__ui-dialog-button[name=advanced]").off("click",o),n.$dialog.find(".fv__ui-dialog-button[name=clearIcon]").off("click",s),n.$dialog.find("select[name=layout]").off("change",a),n.$dialog.find("#chooseIconFile").off("change",c);var e=n.$dialog.find(".fv__advanced-dialog");e.find(".fv__icon-layer-close,.confirm-button,.cancel-button").off("click",l),e.off("keyup",r),n.$dialog.find("[name=validateRadio]").off("change",function(e){return u("validateRadio")}),n.$dialog.find("[name=calculateRadio]").off("change",function(e){return u("calculateRadio")}),n.$dialog.find("[name=selectAction]").off("change",f),n.$dialog.find("[name=signAction]").off("change",h)}(),e()}})}function a(e){var t=e.target.value,i=n.$dialog.find(".fv__ui-dialog-button[name=advanced]"),a=n.$dialog.find(".fv__ui-dialog-button[name=chooseIcon]");"e_MKRelationNoIcon"===t?(i.attr("tabindex",-1),a.attr("tabindex",-1)):"e_MKRelationNoIcon"!==t&&(i.attr("tabindex",0),a.attr("tabindex",0))}function r(e){e=e.originalEvent||e,gn(e).switchers(!1).when(yn.Escape,function(){e.stopPropagation(),n.$dialog.find(".fv__advanced-dialog .cancel-button").trigger("click"),l()})}function o(e){setTimeout(function(){n.$dialog.find(".fv__advanced-dialog").focus()})}function l(e){n.$dialog.find(".fv__ui-dialog-button[name='advanced']").focus()}function c(e){n.$dialog.find(".fv__ui-dialog-button[name=clearIcon]").attr("tabindex",0)}function s(e){e.target.setAttribute("tabindex","-1")}function u(e){n.$dialog.find('[name="'.concat(e,'"]')).each(function(t,i){var a=i.parentElement;if("calculateRadio"===e){var r=a.querySelector("select");r&&i.checked?(r.removeAttribute("disabled"),r.classList.remove("disabled")):r&&!i.checked&&(r.setAttribute("disabled","disabled"),r.classList.add("disabled"))}if(0!=t){var o=a.nextElementSibling;if(o){var l=o.querySelectorAll('input:not([type="radio"]),textarea'),c=o.querySelectorAll("div.fv__ui-dialog-button");l.length>0&&M(l).forEach(function(t){i.checked?"validateRadio"===e&&"textScript"===t.getAttribute("name")||t.removeAttribute("disabled"):t.setAttribute("disabled",!0)}),c.length>0&&M(c).forEach(function(t){i.checked?(t.setAttribute("tabindex",0),t.classList.contains("disabled")&&t.classList.remove("disabled")):(t.setAttribute("tabindex",-1),t.classList.contains("disabled")||(t.classList.add("disabled"),n.$dialog.find('[name="'.concat(e,'"]:checked')).focus()))})}}})}function d(){var e=n.$dialog.find(".fv__ui-form-tab-body"),t=e.find(".fv__action_list");if(t.hasClass("disabled"))t.find("[tabindex]").attr("tabindex","-1"),e.find(".fv__ui-dialog-ok-button:not(.disabled)").attr("tabindex","-1");else{var i=t.find(".active");0===i.length?t.find("[role=treeitem]").attr("tabindex","0"):i.parent().attr("tabindex","0"),e.find(".fv__ui-dialog-ok-button:not(.disabled)").attr("tabindex","0")}}function f(){n.$dialog.find('[name="selectAction"]').each(function(e,t){var i=n.$dialog.find("#keyStrokeJS"),a=n.$dialog.find(".btn-edit");"1"===t.getAttribute("data-id")&&(t.checked?(i.removeAttr("disabled"),a.attr("tabindex","0"),a.removeClass("disabled")):(i.attr("disabled",!0),a.addClass("disabled"),a.attr("tabindex","-1")))})}function h(){n.$dialog.find('[name="signAction"]').each(function(e,t){if("fieldsFlag"===t.id){var i=n.$dialog.find(".fv_sign-fields-category"),a=n.$dialog.find(".fv_-fields-list"),r=n.$dialog.find("#pickField");t.checked?(i.removeAttr("disabled"),a.removeAttr("disabled"),r.hasClass("interactive")?(r.removeAttr("disabled"),r.attr("tabindex","0")):(r.attr("disabled",!0),r.attr("tabindex","-1"))):(i.attr("disabled",!0),a.attr("disabled",!0),r.attr("disabled",!0),r.attr("tabindex","-1"))}else if("customScript"===t.id){var o=n.$dialog.find("#editScript"),l=n.$dialog.find(".fv_sign-script-input");t.checked?(o.attr("tabindex","0"),l.removeAttr("disabled")):(o.attr("tabindex","-1"),l.attr("disabled",!0))}})}function v(e){e=e.originalEvent||e,gn(e).switchers(!1).when(_n,function(){!function(){var e=-1,t=n.$tabNav.filter(":visible"),i=t.index(n.$tabNav.filter(".active"));n.$tabNav.removeClass("active"),n.$tabNav.attr("aria-selected","false"),n.$tabNav.attr("tabindex","-1"),e=t.length===i+1?0:i+1;t[e].classList.add("active"),t[e].setAttribute("aria-selected","true"),t[e].setAttribute("tabindex","0"),t[e].focus(),b(t[e])}(),e.preventDefault(),e.stopPropagation()}).when(En,function(){!function(){var e=-1,t=n.$tabNav.filter(":visible"),i=t.index(n.$tabNav.filter(".active"));n.$tabNav.removeClass("active"),n.$tabNav.attr("aria-selected","false"),n.$tabNav.attr("tabindex","-1"),e=0===i?t.length-1:i-1;t[e].classList.add("active"),t[e].setAttribute("aria-selected","true"),t[e].setAttribute("tabindex","0"),t[e].focus(),b(t[e])}(),e.preventDefault(),e.stopPropagation()}).when(wn,function(){var t;t=n.$tabNav.filter(":visible"),n.$tabNav.removeClass("active"),n.$tabNav.attr("aria-selected","false"),n.$tabNav.attr("tabindex","-1"),t[0].classList.add("active"),t[0].setAttribute("aria-selected","true"),t[0].setAttribute("tabindex","0"),t[0].focus(),b(t[0]),e.preventDefault(),e.stopPropagation()}).when(xn,function(){!function(){var e=n.$tabNav.filter(":visible"),t=e.length-1;n.$tabNav.removeClass("active"),n.$tabNav.attr("aria-selected","false"),n.$tabNav.attr("tabindex","-1"),e[t].classList.add("active"),e[t].setAttribute("aria-selected","true"),e[t].setAttribute("tabindex","0"),e[t].focus(),b(e[t])}(),e.preventDefault(),e.stopPropagation()}).when(kn,function(e){e.target.classList.contains("disabled")||e.target.addEventListener("keyup",m)})}function m(e){e=e.originalEvent||e,gn(e).when(kn,function(){e.target.click(),e.stopPropagation(),e.target.removeEventListener("keyup",m)})}function b(e){var t=n.$tabNav.index(e),i=n.$dialog.find(".fv__ui-form-tab-body > div:not(.lock-mask)");i.hide(),i.eq(t).show(),n.tabs.forEach(function(e){return e.active&&e.annot&&e.annot.getField()&&e.active()});var a=n.PDFUI.colorSpectrum;a&&a.isActive&&a.hide()}return se(this,function(a){switch(a.label){case 0:return[4,t.getMountedComponentByName("form-properties-dialog")];case 1:return a.sent(),(n=e.formDesignDialog)?(i(),function(e){if(e){var t=e.$dialog.find(".fv__comboListOptions_tab");r();var n=t.find("[name=itemLabel]");n.on("keyup",function(e){r()});var i=t.find("[name=items]");i.on("keydown",function(e){var t,n=e.target,i=n.children[n.selectedIndex];Zt(e).when(en,function(){t=i&&i.previousSibling}).when(tn,function(){t=i&&i.nextSibling}),t&&(t.click(),r()),e.stopPropagation()});var a=t.find(".fv__ui-dialog-button");a.on("click",r),e.dialog.addDestroyHook(function(){n.off("keyup"),a.off("click"),i.off("keyup")})}function r(){setTimeout(function(){a.each(function(e,t){N(t,"tabindex",t.classList.contains("disabled")?-1:0)})},10)}}(n),fn(n),[2]):[2]}})})()},function(e,t){return ce(function(){var e,n,i;return se(this,function(a){switch(a.label){case 0:return[4,t.waitForComponentLifecycle("multi-media-popup","mounted")];case 1:return e=be.apply(void 0,[a.sent(),1]),(n=e[0])?(i=n.element,B(n.constructor,{hideRecordError:function(e){e(),F(i.querySelector(".fv__record-error"),"role","aria-live")},showRecordError:function(e){e(),T(i.querySelector(".fv__record-error"),{role:"alert","aria-live":"assertive"})}}),vi(i),n.on("localize",function(){vi(i)}),[2]):[2]}})})()},function(e,t){t.getAllComponentsByType("measurement-popup").forEach(function(e){B(e.constructor,{mounted:function(e){var t=this;e(),this.on(k.SHOWN,function(){t.element.querySelectorAll("input")[0].focus()});var n=function(e){e.stopPropagation(),t.hide(),document.removeEventListener("keyup",n)};document.addEventListener("keydown",function(e){y(e).some(function(e){return e===t.element})&&mi(e).when(bi.Escape,function(){e.stopPropagation(),document.addEventListener("keyup",n)})})}})})},function(e,t){e.addViewerEventListener(pi.openFileSuccess,function(e){return ce(function(){var e;return se(this,function(n){switch(n.label){case 0:return[4,t.getMountedComponentByName("redaction-page-popup")];case 1:return(e=n.sent())?(B(e.constructor,{rendered:function(e){e();var t=this.element.querySelector(".fv__redaction-range");t.firstElementChild.setAttribute("id","page_range"),t.lastElementChild.setAttribute("aria-labelledby","page_range")},showError:function(e){e();var t=this.element.querySelector(".fv__redaction-page-range");t.setAttribute("aria-invalid","true"),t.focus(),t.onblur=function(){t.removeAttribute("aria-invalid")}}}),[2]):[2]}})})()})},function(e,t){return ce(function(){var e,n;return se(this,function(i){switch(i.label){case 0:return[4,t.getMountedComponentByName("stamp-drop-down-ui")];case 1:return(e=i.sent())?((n=e.listElement).addEventListener("keyup",function(e){var t,i=Array.from(n.querySelectorAll("[tabindex]")),a=i.findIndex(function(t){return t.id==e.target.id});a<0||(gi(e).when(Si(_i,wi),function(){t=0==a?i[i.length-1]:i[--a]}).when(Si(Ei,xi),function(){t=a==i.length-1?i[0]:i[++a]}).when(ki,function(){t=i[0]}).when(Ai,function(){t=i[i.length-1]}),t&&t.focus())}),[2]):[2]}})})()},function(e,t){var n={};e.getPDFViewer().then(function(i){t.addDestroyHook(e.addViewerEventListener(x.openFileSuccess,function(e){i.getPDFDocRender().$container.attr({tabindex:"-1",role:"document","aria-roledescription":e.getFileName()})}),e.addViewerEventListener(x.renderFileSuccess,function(){var e=i.getPDFDocRender();if(e){var t=e.$container.get(0);t.focus({preventScroll:!0});var n=document.createElement("div");n.className="fv__aria-current-page-info fv__ui-aria-sr-only",T(n,{role:"represent","aria-live":"polite","aria-atomic":!0,"aria-relvant":"text"}),t.append(n)}}),e.addViewerEventListener(x.pageNumberChange,function(e){var n=i.getPDFDocRender();if(n){var a=n.$container.find(".fv__aria-current-page-info");if(a.length){var r=n.doc,o=r.getPageCount(),l=t.localizer.translateSync("aria:labels.PDF.current-page-info",{pageNumber:e,pageCount:o,fileName:r.getFileName(),extra:""});a.text(l)}}}),e.addViewerEventListener(x.renderPageSuccess,function(e){(window.requestIdleCallback||window.setTimeout)(function(){if(!e.isDestroyed&&!e.ariaSetupDone){var i=e.getPDFDoc();e.ariaSetupDone=1;var a=e.$element,r=i.getPageCount(),o=e.index,l=n[o];l&&l();var c=t.localizer;c.translateSync("aria:labels.PDF.loading",{pageIndex:o+1,pageCount:r});a.attr({"aria-posinset":o,"aria-setsize":r,"aria-busy":!1})}})}),e.addViewerEventListener(x.willCloseDocument,function(){for(var e in n){(0,n[e])()}n={}}))})},function(e,t){return ce(function(){var n,i,a;return se(this,function(r){switch(r.label){case 0:return[2];case 1:return n=r.sent(),i=function(){},a=function(){var e,t=n.getPDFDocRender(),a=t.$container,r=new L(100),o=function(n){var i=n.target.closest(".fv__pdf-page-layout");if(i){var a=+i.getAttribute("data-index");isFinite(a)&&r.exec(function(){return ce(function(){var i,r,o,l,c,s,u,d;return se(this,function(f){switch(f.label){case 0:return i=t.getPDFPageRender(a),(r=i.$element.find(".fv__ui-aria-mouseover-page-text")[0])||((r=document.createElement("span")).classList.add("fv__ui-aria-sr-only","fv__ui-aria-mouseover-page-text"),r.id=Date.now().toString(16),i.$element.append(r),i.$element.attr("aria-labelledby",r.id)),r.innerHTML="",[4,i.transformPoint({point:{x:n.clientX,y:n.clientY},srcType:S.viewport,destType:S.pdf})];case 1:return o=f.sent(),e&&function(e,t){return e.x>=t.left&&e.x<=t.right&&e.y>=t.bottom&&e.y<=t.top}(o,e)?[2]:[4,i.getPDFPage()];case 2:return[4,f.sent().getTextLineUnderPoint([o.x,o.y])];case 3:return l=f.sent(),c=l.text,s=l.rect,(u=l.textGraphicsObjects)&&0!==u.length?(e=s,d=document.createTextNode(c),r.appendChild(d),[2]):[2]}})})()})}};a[0].addEventListener("mousemove",o,!0),i=function(){r.cancel(),a[0].removeEventListener("mousemove",o,!0)}},t.addDestroyHook(e.addViewerEventListener(x.switchStateHandler,function(e){i(),e.getStateName()===$&&a()}),e.addViewerEventListener(x.openFileSuccess,function(){i(),a()})),[2]}})})()},function(e,t){B(UIExtension.modular.module("field").getControllerClass("field-load-all"),{mounted:function(e){var t=this;e(),this.$html.attr({tabindex:0,role:"button"}),this.element.onfocus=function(e){e.relatedTarget?t.resetFocusElement=e.relatedTarget:t.resetFocusElement=document.body}},loadAllPage:function(e){e();var t=this.$html.prev('[name="fv-field-sidebar-panel"][tabindex=0]');t.length>0?t.focus():this.resetFocusElement?this.resetFocusElement.focus():document.body.focus()}})},function(e,t){var n=f.internals.AnnotPropertiesDialog;B(n,{listenEvent:function(e){var t=this;e();var n=this.dialog.element;T(n.querySelector("[name=annot-property-close]"),{role:"button",tabindex:"0"}),M(n.querySelectorAll(".color-picker")).forEach(function(e){T(e,{role:"button","aria-labelledby":e.previousElementSibling.id,tabindex:"0"})});var i,a,r,o,l=n.querySelector(".tabPanel");T(l,{"aria-label":n.querySelector(".fv__ui-layer-header-title").textContent}),M(l.children).forEach(function(e,t){T(e,{role:"tab",tabindex:"-1","aria-selected":!1,"aria-controls":n.querySelector(".annot-properties-dialog-body>div:nth-child(".concat(t+1,")")).id}),e.classList.contains("active")&&T(e,{"aria-selected":!0,tabindex:0})}),M(n.querySelector(".tabBody").children).forEach(function(e,n){T(e,{"aria-labelledby":t.dialog.element.querySelector(".tabPanel>div:nth-child(".concat(n+1,")")).id})}),i=this,r="keydown",o=function(e){Hi(e).when(Mi,function(){zi(n,-1),e.preventDefault(),e.stopPropagation()}).when(Ui,function(){zi(n,1),e.preventDefault(),e.stopPropagation()}).when(Bi,function(){zi(n,0),e.preventDefault(),e.stopPropagation()}).when(Vi,function(){zi(n),e.preventDefault(),e.stopPropagation()})},(a=n).addEventListener(r,o),i.destroyHooks.push(function(e){return a.removeEventListener(r,o)}),function(e,t,n,i){t.on(n,i),e.destroyHooks.push(function(e){return t.off(n,i)})}(this,this.dialog,k.SHOWN,function(e){setTimeout(function(){M(t.dialog.element.querySelector(".tabPanel").children).forEach(function(e){var t=e.classList.contains("active");T(e,{tabindex:t?0:-1,"aria-selected":t})})})}),M(n.querySelectorAll("[role=button]")).forEach(function(e){e.addEventListener("keydown",function(t){Hi(t).when(Oi,function(){e.classList.contains("disabled")||e.addEventListener("keyup",ji)})})})},toggle:function(e){var t=this;e();var n=this.annotProperties.disabled;if([".color-picker"].forEach(function(e){M(t.dialog.element.querySelectorAll(e)).forEach(function(e){T(e,{tabindex:n?-1:0}),n?T(e,{disabled:!0}):F(e,"disabled")})}),!0===n){M(this.dialog.element.querySelectorAll(".fv__ui-dialog-ok-button")).forEach(function(e){T(e,{tabindex:"-1"})}),M(this.dialog.element.querySelectorAll('.fv__action_list > [tabindex="0"]')).forEach(function(e){T(e,{tabindex:"-1"})})}else{M(this.dialog.element.querySelectorAll(".fv__ui-dialog-ok-button:not(.disabled)")).forEach(function(e){T(e,{tabindex:"0"})});var i=this.dialog.element.querySelectorAll('[role="treeitem"]')[0];i&&T(i,{tabindex:"0"})}}})},function(e,t){return ce(function(){var n;function i(){n.once(k.SHOWN,function(){T(n.$cancel[0],{role:"button",tabindex:0,"aria-label":n.$cancel.text()}),N(n.$nav[0],"role","tabList"),n.$nav.find("a").each(function(e,t){T(t,{role:"tab",tabindex:-1,"aria-selected":t.classList.contains("active"),id:G("nav-item")})}),n.$nav.on("keydown",a),n.$cancel.on("keydown",r),document.addEventListener("keydown",function(e){e=e.originalEvent||e,y(e).some(function(e){return e===n.element})&&Ki(e).when(Wi.Escape,function(){e.stopPropagation(),y(e).some(function(e){return e===document.activeElement})&&n.$cancel.click()})})}),B(n.constructor,{activeNavItem:function(e){e(),n.$nav.find("a").each(function(e,t){var n=t.classList.contains("active");T(t,{tabindex:n?0:-1,"aria-selected":n})})},showTab:function(t){t(),function(){var t=[e.i18n.t("file-property:description.desc")],i=n.navData[t[0]];if(!i)return;var a=i.tab.element.querySelector(".file-property-custom");T(a,{role:"button",tabindex:0,"aria-label":a.innerText}),a.addEventListener("keydown",r),a.addEventListener("click",o)}()}})}function a(e){var t,i=(e=e.originalEvent||e).target.parentElement,a=i.querySelector(".active");Ki(e).switchers(!1).when(Qi,function(){t=a.previousSibling?a.previousSibling:i.lastElementChild}).when(Xi,function(){t=a.nextSibling?a.nextSibling:i.firstElementChild}).when(Ji,function(){t=i.firstElementChild}).when(Zi,function(){t=i.lastElementChild}),t&&(!function(e){n.$nav.find("a").each(function(t,n){var i=n.id==e.id;T(n,{tabindex:i?0:-1,"aria-selected":i})})}(t),t.focus(),t.click()),e.stopPropagation()}function r(e){e=e.originalEvent||e,Ki(e).switchers(!1).when(Yi,function(){var t=document.createEvent("MouseEvents"),n=e.target.getBoundingClientRect(),i=n.x,a=n.y;t.initMouseEvent("click",!0,!0,window,0,0,0,i,a,!1,!1,!1,!1,0,null),e.target.dispatchEvent(t)})}function o(){n.updateNavData();var t=[e.i18n.t("file-property:description.desc")],i=n.navData[t[0]];if(i){var a=i.customDialog,o=a.$add,l=a.$delete,c=a.$name,s=a.$value,u=a.$table,d=a.$dialog,f=Gi(".fv__ui-layer-header",a[0]);T(u[0],{role:"group","aria-labelledby":f.attr("id")}),d.find("input").on("input",function(e){e.preventDefault(),e.stopPropagation();var t=c.val().trim(),n=s.val().trim();t.length>0&&n.length>0?o.attr({disabled:!1,tabindex:0}):o.attr({disabled:!0,tabindex:-1})}),d.find("input").on("change",function(e){e.preventDefault(),e.stopPropagation();var t=c.val().trim(),n=s.val().trim();t.length>0&&n.length>0&&o.focus()}),Array.from([o,l]).forEach(function(e){T(e[0],{role:"button",tabindex:-1,"aria-label":e.text()}),e.on("keydown",r),e.on("click",function(e){0===Array.from([o,l]).map(function(e){return N(e[0],"tabindex",-1),e}).filter(function(e){return!e.attr("disabled")}).length&&c.focus(),h(u)})}),Array.from([c,s]).forEach(function(e){e.on("keyup",function(e){N(o[0],"tabindex",o.attr("disabled")?-1:0)})}),c.on("keyup",function(e){N(o[0],"aria-label",o.text())}),h(u)}function h(e){var t=e.find("tbody tr");Array.from(t).forEach(function(e,n){var i=e.classList.contains("active");T(e,{"aria-posinset":n,tabindex:"0",role:"listitem","aria-selected":i}),e.addEventListener("click",function(e){var n=t.find(".active")[0];n&&N(n,"aria-selected","false"),N(e.target,"aria-selected","true"),N(l[0],"tabindex",0)}),e.addEventListener("keydown",r)})}}return se(this,function(e){switch(e.label){case 0:return[4,t.getMountedComponentByName("file-property-popup")];case 1:return(n=e.sent())?(i(),[2]):[2]}})})()},function(){B(f.internals.AnnotCreateDialog,{_bindEvent:function(e){if(e(),this.$colorBtn){var t=this.$colorBtn,n=this.$colorPickerDialog;t.attr({tabindex:0,role:"button"}),t.on("keydown",function(e){ca(e.originalEvent).when(sa,function(){e.target.click(),e.stopPropagation()})}),t.on("click",function(){setTimeout(function(){n.find("li[aria-selected=true]").focus()})}),n.attr("tabindex",-1)}}})},function(e,t){B(f.internals.AppearanceTab,{updateUI:function(e){e();var t=this.getElementByNames("codeSets,addSelectedEntry,codeEntries,editCodes,fillColor,fontColor");t.each(function(e){var n=t.eq(e);n.prop("tabindex",n.prop("disabled")||n.hasClass("disabled")?"-1":"0")})},bindEvent:function(e){e(),this.$element.find("[role=button]:not([tabindex=-1])").on("keydown",function(e){ua(e.originalEvent).when(ba,function(){e.target.addEventListener("keyup",pa)})}),this.$element.find("[name=codeSets],[name=codeEntries]").on("keydown",function(e){var t=this;ua(e.originalEvent).when(fa,function(){var n=ga(e,-1);N(t,"aria-activedescendant",n.getAttribute("id")),n.click(),e.preventDefault(),e.stopPropagation()}).when(ha,function(){var n=ga(e,1);N(t,"aria-activedescendant",n.getAttribute("id")),n.click(),e.preventDefault(),e.stopPropagation()}).when(va,function(){var n=0;N(t,"aria-activedescendant",n.getAttribute("id")),n.click(),e.preventDefault(),e.stopPropagation()}).when(ma,function(){var n=ga(e);N(t,"aria-activedescendant",n.getAttribute("id")),n.click(),e.preventDefault(),e.stopPropagation()})})},init:function(e){e();var t=this.$element.find("[name=codeSets],[name=codeEntries]");t.find("li").attr("role","option").attr("id",function(){return N(this,"id",G("fv__code"))}),t.attr("role","listbox").attr("aria-labelledby",function(){return this.previousSibling.getAttribute("id")}).attr("aria-activedescendant",function(){return this.children[0]&&this.children[0].getAttribute("id")})}})},function(e,t){var n=f.modular.module("search").getComponentClass("search-input");n&&B(n,{mounted:function(e){e(),T(this.inputComponent.element,{"aria-label":this.localizer.translateSync("search:searchbar.input.placeholder")})}})},function(e,t){var n=f.modular.module("search").getComponentClass("search-option-panel"),i=f.modular.module("search").getComponentClass("search-result-panel"),a=f.modular.module("search").getComponentClass("checkbox");n&&B(n,{mounted:function(e){var t=this;e();var n=this.element.querySelector(".fv__ui-search-text"),i=n.getAttribute("placeholder");T(n,{"aria-label":i});var a=this.element.querySelector(".fv__ui-search-country-select");T(a,{"aria-labelledby":a.previousElementSibling.id});var r=this.element.querySelectorAll(".fv__ui-more-less");M(r).forEach(function(e){T(e,{role:"button",tabindex:"0"}),t.attachEventToElement(e,"click",function(e){setTimeout(function(){M(r).filter(function(e){var t=e.getBoundingClientRect(),n=t.width,i=t.height;return n&&i})[0].focus()})}),t.attachEventToElement(e,"keydown",function(e){ya(e,wa(xa,ka))&&e.target.click()})});if(window.MutationObserver){var o=new MutationObserver(function(e){if(!be(e,1)[0].target.classList.contains("fv__ui-directive-show-hidden")){var n=t.element.querySelector(".fv__ui-search_button");n&&n.focus()}});o.observe(this.element,{attributeFilter:["class"],attributes:!0}),this.addDestroyHook(function(){o.disconnect()})}}}),i&&(B(i,{mounted:function(e){var t=this;e();var n=function(e,n){var a=M(e.querySelectorAll(".fv__ui-search-result-title,.fv__ui-search-result-item")).filter(function(e){return"none"!==e.style.display}),r=e.getAttribute("aria-activedescendant"),o=e.querySelector("[id=".concat(r,"]")),l=a.indexOf(o),c=l,s=a[c="number"==typeof n?-1===n||1===n?(c+n+a.length)%a.length:(n+a.length)%a.length:a.length-1];T(e,{"aria-activedescendant":s.id}),t.updateActiveResult(c-1,l-1),i(e,s)},i=function(e,t){var n=e.scrollTop,i=t.getBoundingClientRect().bottom,a=e.getBoundingClientRect(),r=n+i+20-a.top-a.height;r<0&&(r=0),e.scrollTo(0,r)},a=this.element.querySelector(".fv__ui-search-results"),r=this.element.querySelector(".fv__ui-search-result-title"),o=this.element.querySelector(".fv__ui-search-result-panel-text");T(a,{role:"listbox",tabindex:"0","aria-activedescendant":r.id,"aria-labelledby":o.id}),T(r,{role:"option"}),this.attachEventToElement(this.element,"keyup",function(e){e.target.classList.contains("fv__ui-search-results")&&ya(e,wa(Aa,Sa,Ca,Da,ka,xa))&&(e.stopPropagation(),e.preventDefault())}),this.attachEventToElement(this.element,"keydown",function(e){e.target.classList.contains("fv__ui-search-results")&&_a(e).when(Sa,function(){n(e.target,-1),e.stopPropagation(),e.preventDefault()}).when(Aa,function(){n(e.target,1),e.stopPropagation(),e.preventDefault()}).when(Ca,function(){n(e.target,0),e.stopPropagation(),e.preventDefault()}).when(Da,function(){n(e.target),e.stopPropagation(),e.preventDefault()}).when(xa,function(){var t=e.target.getAttribute("aria-activedescendant"),n=e.target.querySelector("[id=".concat(t,"]"));if(n){var i=n.querySelector(".fv__ui-checkbox-hide-text,.fv__ui-search-result-item-check");if(i){if(i.classList.contains("fv__icon-search-checked"))T(n,{"aria-checked":!1});else if(i.classList.contains("fv__ui-search-result-item-check")&&!i.classList.contains("fv__icon-search-checked"))T(n,{"aria-checked":!0});else{var a=i.querySelector("input[type=checkbox]");a&&a.checked?T(n,{"aria-checked":!1}):a&&!a.checked&&T(n,{"aria-checked":!0})}i.click(),e.target.focus()}}e.stopPropagation(),e.preventDefault()}).when(ka,function(){var t=e.target.getAttribute("aria-activedescendant"),n=e.target.querySelector("[id=".concat(t,"]"));if(n){var i=n.querySelector(".fv__ui-search-result-item-content");i?i.click():n.click()}e.stopPropagation(),e.preventDefault()})});if(window.MutationObserver){var l=new MutationObserver(function(e){if(!be(e,1)[0].target.classList.contains("fv__ui-directive-show-hidden")){var n=t.element.querySelector(".fv__ui-search-results");n&&n.focus()}});l.observe(this.element,{attributeFilter:["class"],attributes:!0}),this.addDestroyHook(function(){l.disconnect()})}},setSelectedResult:function(e){var t=this;e();var n=this.element.querySelector(".fv__ui-search-results"),i=this.element.querySelector(".fv__ui-search-result-title"),a=this.element.querySelector(".fv__ui-search-result-panel-text"),r=this.element.querySelectorAll(".fv__search-more");if(n&&i&&a){n.getAttribute("aria-activedescendant")||T(n,{"aria-activedescendant":i.id}),T(n,{role:"listbox",tabindex:"0","aria-labelledby":a.id}),T(i,{role:"option"});var o=i.querySelector("input[type=checkbox]");i.getAttribute("aria-checked")||(o&&!o.checked?T(i,{"aria-checked":!1}):o&&o.checked&&T(i,{"aria-checked":!0})),M(n.querySelectorAll(".fv__ui-search-result-item")).forEach(function(e){T(e,{"aria-checked":!!e.querySelector(".fv__icon-search-checked")})})}M(r).forEach(function(e){T(e,{tabindex:"0",role:"button"}),t.attachEventToElement(e,"keydown",function(n){ya(n,wa(xa,ka))&&(e.click(),t.element.querySelector(".fv__ui-search-results").focus())})})},handleClickResult:function(e){var t=this;e(),this.pdfUI.eventEmitter.once("completed-render-visible-pages",function(){var e=document.querySelector(".fv__ui-ask-dialog");if(e)e.focus();else{var n=t.element.querySelector("#search-result-panel-box");n&&n.focus()}})},getLookingForText:function(e){e(),T(this.element.querySelector(".fv__ui-checkbox-hide-text .fv__ui-checkbox-input"),{tabindex:"-1"});var t=this.element.querySelectorAll(".fv__ui-search-result-item");0!==t.length&&M(t).forEach(function(e){T(e,{role:"option"})})}}),a&&B(a,{updateUI:function(e){if(e(),this.element){this.invalid?T(this.element,{"aria-disabled":!0}):F(this.element,"aria-disabled"),T(this.element,{"aria-checked":this.checked});var t=this.element.closest(".fv__ui-search-result-item");t||T(t,{"aria-checked":this.checked})}}}))},function(e,t){var n=f.modular.module("thumbnail").getComponentClass("thumbnail-panel");n&&B(n,{initThumbnailRect:function(e){e();var t=this.$thumbImageContainerBox.find(".fv__thumb-page");t.attr({role:"option"}).attr("aria-labelledby",function(e){var n=G("fv__thumbnail_page_index"),i=t[e].querySelector(".fv__thumb-page-index");return T(i,{id:n,"aria-hidden":!0,"aria-label":i.textContent}),n}).attr("id",function(e){return G("fv__thumbnail_page")}),this.$thumbImageContainer.attr({tabindex:"0",role:"listbox","aria-labelledby":this.$thumbImageContainer.closest(".fv__ui-sidebar-panel-body").attr("aria-labelledby"),"aria-activedescendant":this.$thumbImageContainer.find(".fv__thumb-page").eq(0).attr("id")})},updatePageLabel:function(e,t){var n=be(t,1)[0];e();var i=this.$thumbImageContainerBox.find(".fv__thumb-page").eq(n);i.attr("aria-labelledby")||i.attr({role:"option"}).attr("aria-labelledby",function(e){var t=G("fv__thumbnail_page"),n=i.find(".fv__thumb-page-index");return T(n[0],{id:t,"aria-hidden":!0,"aria-label":n[0].textContent}),t})},mounted:function(e){var t=this;e(),this.attachEventToElement(this.$thumbImageContainerBox[0],"click",function(e){var n=t.$thumbImageContainer.find(".fv__active");t.$thumbImageContainer.attr("aria-activedescendant",n.attr("id"))});var n=function(e){var n=+e.target.querySelector(".fv__active").getAttribute("data-page-index"),i=t.previePageIndex;t.doPageAction(i,n),t.previePageIndex=n,t.getPDFUI().goToPage(n,0,0,!1),!t.resizing&&!t.moving&&t.calcThumbnailRect(!0,n)};this.attachEventToElement(this.$thumbImageContainerBox[0],"keyup",function(e){qa(e).when($a,function(){var n=Ha(t,0);t.$thumbImageContainer.attr("aria-activedescendant",n.attr("id")),e.preventDefault(),e.stopPropagation()}).when(Pa,function(){var n=Ha(t);t.$thumbImageContainer.attr("aria-activedescendant",n.attr("id")),e.preventDefault(),e.stopPropagation()}).when(Ta,function(){var n=Ha(t,-1);t.$thumbImageContainer.attr("aria-activedescendant",n.attr("id")),e.preventDefault(),e.stopPropagation()}).when(Na,function(){var n=Ha(t,1);t.$thumbImageContainer.attr("aria-activedescendant",n.attr("id")),e.preventDefault(),e.stopPropagation()}).when(Fa,function(){n(e)}).when(Ia,function(){n(e)})})}})},function(e,t){var n=f.internals.NoteTypeTab;n&&B(n,{bindEvent:function(e){e();var t=this.$dom.find(".fv__noteType-body");t.attr({role:"listbox","aria-labelle":"Note Type Icon",tabindex:"0"});var n=t.find(".icon-btn");n.attr({role:"option"});var i=function(e){var i=n.index(n.filter(".active")[0]);i="number"==typeof e?1===e||-1===e?(i+e+n.length)%n.length:e:n.length-1,n.eq(i).click(),n.removeAttr("aria-selected");var a=t.scrollTop(),r=t.offset().top,o=n.eq(i).offset().top;t.scrollTop(o-r+a)};t.on("keydown",function(e){fr(e.originalEvent,yr(mr,br,pr,gr))&&(e.preventDefault(),e.stopPropagation())}),t.on("keyup",function(e){hr(e.originalEvent).when(gr,function(){i(1),e.preventDefault(),e.stopPropagation()}).when(pr,function(){i(-1),e.preventDefault(),e.stopPropagation()}).when(mr,function(){i(0),e.preventDefault(),e.stopPropagation()}).when(br,function(){i(),e.preventDefault(),e.stopPropagation()})})},toggle:function(e,t){var n=be(t,1)[0];e(),this.$dom.find(".fv__noteType-body").attr({"aria-disabled":n,tabindex:n?"0":"-1"})},combine:function(e){e();var t=this.$dom.find(".fv__noteType-body");t.attr("aria-activedescendant",function(){return t.find(".icon-btn.active").attr("id")});var n=t.find(".icon-btn");n.attr("aria-selected",function(e){if(n.eq(e).hasClass("active"))return!0})}})}];Rr.push(function(e,t){var n=f.modular.module("password-protect").getComponentClass("password-protect-popup"),i=f.modular.module("password-protect").getComponentClass("password-protect-permissionPopup");n&&(B(n,{updateData:function(e){var t=this;e();var n=this.element.querySelector(".fv__ui-layer-panel");T(n.querySelector(".fv__password-protect-error"),{role:"alert"});var i=n.querySelector(".fv__encrypt-settings-radiobox-container"),a=i.children.item(0),r=i.children.item(1),o=r.children.item(0),l=i.children.item(2),c=l.children.item(0),s=G("enc-alg-l"),u=G("env-alg-128"),d=G("env-alg-256");T(i,{"aria-labelledby":s}),N(a,"id",s),N(r,"id",u),N(l,"id",d),T(o,{"aria-labelledby":u}),T(c,{"aria-labelledby":d}),n.querySelectorAll(".check-box-wrapper").forEach(function(e){var t=e.querySelector("input"),n=e.querySelector(".checkbox-inner");T(n,{role:"checkbox",tabindex:0,"aria-checked":t.checked,"aria-disabled":t.disabled}),t.disabled&&I(n,"tabindex"),n.addEventListener("keydown",function(e){we(e,ke(Ae,Se))&&e.target.click()}),n.addEventListener("click",function(){N(n,"aria-checked",!t.checked)})}),this.bindEvent(".fv__owner-password-checkbox","change",function(e){t.element.querySelectorAll(".check-box-wrapper").forEach(function(e){var t=e.querySelector("input"),n=e.querySelector(".checkbox-inner");N(n,"aria-disabled",t.disabled),t.disabled?I(n,"tabindex"):N(n,"tabindex","0")})})}}),B(i,{updateData:function(e){var t=this;e(),this.element.querySelector(".fv__ui-layer-panel").querySelectorAll(".check-box-wrapper").forEach(function(e){var t=e.querySelector("input"),n=e.querySelector(".checkbox-inner");T(n,{role:"checkbox",tabindex:0,"aria-checked":t.checked,"aria-disabled":t.disabled}),t.disabled&&I(n,"tabindex"),n.addEventListener("keydown",function(e){we(e,ke(Ae,Se))&&e.target.click()}),n.addEventListener("click",function(){N(n,"aria-checked",t.checked)})}),this.bindEvent(".fv__owner-permission-setting-checkbox","change",function(e){T(e.target.parentElement.querySelector(".checkbox-inner"),{"aria-checked":e.target.checked}),M(t.element.querySelectorAll(".fv__permission-copy,.fv__permission-accessibility")).forEach(function(e){var t=e.parentElement.querySelector(".checkbox-inner");e.disabled?T(t,{tabindex:-1,"aria-disabled":!0}):(T(t,{tabindex:0}),F(t,"disabled","aria-disabled"))})}),this.bindEvent(".fv__permission-copy","change",function(e){T(e.target.parentElement.querySelector(".checkbox-inner"),{"aria-checked":e.target.checked});var n=t.element.querySelector(".fv__permission-accessibility"),i=n.parentElement.querySelector(".checkbox-inner");n.disabled?T(i,{tabindex:-1,"aria-disabled":!0}):(T(i,{tabindex:0}),F(i,"disabled","aria-disabled"))}),this.bindEvent(".fv__permission-accessibility","change",function(e){T(e.target.parentElement.querySelector(".checkbox-inner"),{"aria-checked":e.target.checked})})}}))});var Or=function(e){function t(){return l(this,t),i(this,t,arguments)}return d(t,e),s(t,[{key:"init",value:function(e){var t=this,n=e.renderTo;e.waitForInitialization().then(function(){n.setAttribute("role","main")}),e.getRootComponent().then(function(n){Rr.forEach(function(i){i.call(t,e,n)})})}},{key:"receiveAction",value:function(e,t){0}}],[{key:"getName",value:function(){return"aria"}},{key:"getLoader",value:function(){return v()}},{key:"initOnLoad",value:function(){var e=f.modular.module("aria",[]).getRegistry();e.registerDirective(Ut),e.registerDirective(jt),e.registerDirective(zt),e.registerDirective(Vt),e.registerDirective(Ot),e.registerDirective(Bt),e.registerDirective(H),e.registerDirective(b),e.registerDirective(Gt),e.registerDirective(Xt),e.registerDirective(Yn),e.registerDirective(Li),Hr.forEach(function(e){e.call()})}}]),t}(f.UIXAddon)})(),o=o.default})());