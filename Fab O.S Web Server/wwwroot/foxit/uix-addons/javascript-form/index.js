!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("UIExtension")):"function"==typeof define&&define.amd?define(["UIExtension"],e):"object"==typeof exports?exports.JavaScriptFormAddon=e(require("UIExtension")):t.JavaScriptFormAddon=e(t.UIExtension)}(self,t=>(()=>{var e={778:(t,e,n)=>{n(779);t.exports=function(t){"use strict";t=t||{};return'<layer @var.self="$component" name="document-action-dialog" class="fv__ui-document-action-layer center" append-to="body" @draggable modal>\n<layer-header title="javascript-form:document-action.dialog.title"></layer-header>\n<div class="fv__ui-document-action-layer-main" @stop-drag>\n<p>javascript-form:document-action.dialog.name</p>\n<div class="fv__ui-document-action-layer-top">\n<div class="fv__ui-document-action-layer-top-left">\n<ul id="docActionList">\n<li @foreach="item in self.docActionList" js-key="@{item.key}" @on.click="self.selectHandle(item)">@{item.name}</li>\n</ul>\n</div>\n<div class="fv__ui-document-action-layer-top-right">\n<xbutton @on.click="self.editJs()" name="doc-action-edit">javascript-form:document-action.dialog.edit</xbutton>\n</div>\n</div>\n<p>javascript-form:document-action.dialog.sub-name</p>\n<div class="fv__ui-document-action-layer-bottom">\n<textarea id="doc-action-preview" readonly></textarea>\n</div>\n</div>\n<div class="fv_ui_dialog-footer fv__doc_action_dia_footer">\n<xbutton @on.click="self.okHandle()" name="okBtn" class="fv__ui-dialog-ok-button fv__ui-dialog-btn fv__button-ok">javascript-form:document-action.dialog.ok</xbutton>\n<xbutton @on.click="self.closeDia()" name="closeBtn" class="fv__ui-dialog-cancel-button fv__ui-dialog-btn fv__button-cancle">javascript-form:document-action.dialog.cancel</xbutton>\n</div>\n</layer>'}},145:(t,e,n)=>{n(779);t.exports=function(t){"use strict";t=t||{};return'<layer @var.self="$component" name="document-javascript-dialog" class="fv__ui-document-javascript-layer center" append-to="body" @draggable modal>\n<layer-header title="javascript-form:document-javascript.dialog.title"></layer-header>\n<div class="fv__ui-document-javascript-layer-main" @stop-drag>\n<p>javascript-form:document-javascript.dialog.name</p>\n<input @model="self.inputName" type="text" class="js-name-input" name="js-name-input" @on.native.input="self.inputHandleChange($event)" />\n<div class="fv__ui-document-javascript-layer-main-body">\n<div class="fv__ui-document-javascript-layer-main-body-left">\n<ul id="addJsList" @if="self.addedJsList.length">\n<li @foreach="item in self.addedJsList" js-name="@{item.name}" @on.click="self.clickHandle(item)">@{item.name}</li>\n</ul>\n</div>\n<div class="fv__ui-document-javascript-layer-main-body-right">\n<xbutton @on.click="self.closeDia()" name="js-dia-close">javascript-form:document-javascript.dialog.close</xbutton>\n<xbutton @on.click="self.addJs(false)" name="js-dia-add">javascript-form:document-javascript.dialog.add</xbutton>\n<xbutton @on.click="self.addJs(true)" name="js-dia-edit">javascript-form:document-javascript.dialog.edit</xbutton>\n<xbutton @on.click="self.deleteItem()" name="js-dia-delete">javascript-form:document-javascript.dialog.delete</xbutton>\n</div>\n</div>\n<div class="fv__ui-document-javascript-layer-preview">\n<textarea id="js-dia-preview-box" readonly></textarea>\n</div>\n</div>\n</layer>'}},806:(t,e,n)=>{n(779);t.exports=function(t){"use strict";t=t||{};return'<layer @var.self="$component" name="edit-all-javascript-dialog" class="fv__ui-edit-all-javascript-layer center" append-to="body" @draggable modal>\n<layer-header class="lh-js" title="javascript-form:edit-all-javascript.dialog.title"></layer-header>\n<p>javascript-form:edit-all-javascript.dialog.sub-title</p>\n<div class="fv__ui-edit-all-javascript-layer-main" @stop-drag>\n<textarea id="all-js-editor"></textarea>\n</div>\n<div class="fv_ui_dialog-footer fv__edit_all_javascript_dia_footer">\n<xbutton @on.click="self.okHandle()" name="okBtn" class="fv__ui-dialog-ok-button fv__ui-dialog-btn fv__button-ok">javascript-form:edit-all-javascript.dialog.ok</xbutton>\n<xbutton @on.click="self.closeDia()" name="closeBtn" class="fv__ui-dialog-cancel-button fv__ui-dialog-btn fv__button-cancle">javascript-form:edit-all-javascript.dialog.cancel</xbutton>\n<xbutton @on.click="self.goTo()" name="goToBtn" class="fv__ui-dialog-cancel-button fv__ui-dialog-btn fv__button-cancle">javascript-form:edit-all-javascript.dialog.go</xbutton>\n<p id="js-editor-curpos"></p>\n</div>\n</layer>'}},12:(t,e,n)=>{n(779);t.exports=function(t){"use strict";t=t||{};return'<layer @var.self="$component" name="go-to-line-dialog" class="fv__ui-go-to-line-layer center" append-to="body" @draggable modal>\n<layer-header title="javascript-form:edit-all-javascript.dialog.go-title"></layer-header>\n<div class="fv__ui-go-to-line-main" @stop-drag>\n<p>javascript-form:edit-all-javascript.dialog.go-sub-title</p>\n<input @model="self.inputNum" type="number" class="js-line-num-input" name="js-line-num-input" @on.native.input="self.inputHandleChange($event)" />\n</div>\n<div class="fv_ui_dialog-footer fv__go_to_line_dia_footer">\n<xbutton @on.click="self.okHandle()" name="okBtn" class="fv__ui-dialog-ok-button fv__ui-dialog-btn fv__button-ok">javascript-form:edit-all-javascript.dialog.ok</xbutton>\n<xbutton @on.click="self.closeDia()" name="closeBtn" class="fv__ui-dialog-cancel-button fv__ui-dialog-btn fv__button-cancle">javascript-form:edit-all-javascript.dialog.cancel</xbutton>\n</div>\n</layer>'}},59:(t,e,n)=>{n(779);t.exports=function(t){"use strict";t=t||{};return'<layer @var.self="$component" name="javascript-console.dialog" class="fv__ui-javascript-console-layer center" append-to="body" @draggable modal>\n<layer-header title="javascript-form:javascript-console.dialog.title"></layer-header>\n<div class="fv__ui-javascript-console-layer-main" @stop-drag>\n<div class="fv__ui-console-content">\n<div class="fv__ui-script-input-dialog">\n<div class="fv_js-editor-body">\n<textarea disabled resize=none class="line-container">\n</textarea>\n<textarea resize=none class="script-container" @on.native.input="self.checkTxt($event)" @aria:labelledby="::parent()::previousSiblings()" id="importTextarea">\n</textarea>\n</div>\n</div>\n</div>\n<div class="fv__ui-console-results">\n<textarea disabled name="fv__ui-console-results" id="fv__ui-console-results" ></textarea>\n</div>\n<div class="fv__ui-console-footer">\n<div class="fv__ui-button-collection">\n<xbutton @on.click="self.handleRun()" name="js-dia-run">javascript-form:javascript-console.dialog.run</xbutton>\n<xbutton @on.click="self.handleClear()" name="js-dia-clear">javascript-form:javascript-console.dialog.clear</xbutton>\n<xbutton @on.click="self.handleClose()" name="js-dia-close">javascript-form:javascript-console.dialog.close</xbutton>\n</div>\n</div>   \n</div>\n</layer>'}},155:t=>{t.exports=null},585:(t,e,n)=>{"use strict";
/*! art-template@runtime | https://github.com/aui/art-template */var o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{},i=Object.create(o),r=/["&'<>]/;function a(t){return"string"!=typeof t&&(t=null==t?"":"function"==typeof t?a(t.call(t)):JSON.stringify(t)),t}i.$escape=function(t){return function(t){var e=""+t,n=r.exec(e);if(!n)return t;var o="",i=void 0,a=void 0,c=void 0;for(i=n.index,a=0;i<e.length;i++){switch(e.charCodeAt(i)){case 34:c="&#34;";break;case 38:c="&#38;";break;case 39:c="&#39;";break;case 60:c="&#60;";break;case 62:c="&#62;";break;default:continue}a!==i&&(o+=e.substring(a,i)),a=i+1,o+=c}return a!==i?o+e.substring(a,i):o}(a(t))},i.$each=function(t,e){if(Array.isArray(t))for(var n=0,o=t.length;n<o;n++)e(t[n],n);else for(var i in t)e(t[i],i)},t.exports=i},779:(t,e,n)=>{"use strict";t.exports=n(585)},552:(t,e,n)=>{var o=n(852)(n(639),"DataView");t.exports=o},71:(t,e,n)=>{var o=n(852)(n(639),"Map");t.exports=o},818:(t,e,n)=>{var o=n(852)(n(639),"Promise");t.exports=o},525:(t,e,n)=>{var o=n(852)(n(639),"Set");t.exports=o},705:(t,e,n)=>{var o=n(639).Symbol;t.exports=o},577:(t,e,n)=>{var o=n(852)(n(639),"WeakMap");t.exports=o},239:(t,e,n)=>{var o=n(705),i=n(607),r=n(333),a=o?o.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):r(t)}},454:(t,e,n)=>{var o=n(239),i=n(5);t.exports=function(t){return i(t)&&"[object Arguments]"==o(t)}},458:(t,e,n)=>{var o=n(560),i=n(346),r=n(218),a=n(257),c=/^\[object .+?Constructor\]$/,s=Function.prototype,l=Object.prototype,u=s.toString,d=l.hasOwnProperty,f=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!r(t)||i(t))&&(o(t)?f:c).test(a(t))}},749:(t,e,n)=>{var o=n(239),i=n(780),r=n(5),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return r(t)&&i(t.length)&&!!a[o(t)]}},280:(t,e,n)=>{var o=n(726),i=n(916),r=Object.prototype.hasOwnProperty;t.exports=function(t){if(!o(t))return i(t);var e=[];for(var n in Object(t))r.call(t,n)&&"constructor"!=n&&e.push(n);return e}},518:t=>{t.exports=function(t){return function(e){return t(e)}}},429:(t,e,n)=>{var o=n(639)["__core-js_shared__"];t.exports=o},957:(t,e,n)=>{var o="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=o},852:(t,e,n)=>{var o=n(458),i=n(801);t.exports=function(t,e){var n=i(t,e);return o(n)?n:void 0}},607:(t,e,n)=>{var o=n(705),i=Object.prototype,r=i.hasOwnProperty,a=i.toString,c=o?o.toStringTag:void 0;t.exports=function(t){var e=r.call(t,c),n=t[c];try{t[c]=void 0;var o=!0}catch(t){}var i=a.call(t);return o&&(e?t[c]=n:delete t[c]),i}},160:(t,e,n)=>{var o=n(552),i=n(71),r=n(818),a=n(525),c=n(577),s=n(239),l=n(257),u="[object Map]",d="[object Promise]",f="[object Set]",p="[object WeakMap]",v="[object DataView]",m=l(o),h=l(i),g=l(r),y=l(a),b=l(c),j=s;(o&&j(new o(new ArrayBuffer(1)))!=v||i&&j(new i)!=u||r&&j(r.resolve())!=d||a&&j(new a)!=f||c&&j(new c)!=p)&&(j=function(t){var e=s(t),n="[object Object]"==e?t.constructor:void 0,o=n?l(n):"";if(o)switch(o){case m:return v;case h:return u;case g:return d;case y:return f;case b:return p}return e}),t.exports=j},801:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},346:(t,e,n)=>{var o,i=n(429),r=(o=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"";t.exports=function(t){return!!r&&r in t}},726:t=>{var e=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}},916:(t,e,n)=>{var o=n(569)(Object.keys,Object);t.exports=o},167:(t,e,n)=>{t=n.nmd(t);var o=n(957),i=e&&!e.nodeType&&e,r=i&&t&&!t.nodeType&&t,a=r&&r.exports===i&&o.process,c=function(){try{var t=r&&r.require&&r.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=c},333:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},569:t=>{t.exports=function(t,e){return function(n){return t(e(n))}}},639:(t,e,n)=>{var o=n(957),i="object"==typeof self&&self&&self.Object===Object&&self,r=o||i||Function("return this")();t.exports=r},257:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},694:(t,e,n)=>{var o=n(454),i=n(5),r=Object.prototype,a=r.hasOwnProperty,c=r.propertyIsEnumerable,s=o(function(){return arguments}())?o:function(t){return i(t)&&a.call(t,"callee")&&!c.call(t,"callee")};t.exports=s},469:t=>{var e=Array.isArray;t.exports=e},612:(t,e,n)=>{var o=n(560),i=n(780);t.exports=function(t){return null!=t&&i(t.length)&&!o(t)}},144:(t,e,n)=>{t=n.nmd(t);var o=n(639),i=n(62),r=e&&!e.nodeType&&e,a=r&&t&&!t.nodeType&&t,c=a&&a.exports===r?o.Buffer:void 0,s=(c?c.isBuffer:void 0)||i;t.exports=s},609:(t,e,n)=>{var o=n(280),i=n(160),r=n(694),a=n(469),c=n(612),s=n(144),l=n(726),u=n(719),d=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(c(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||s(t)||u(t)||r(t)))return!t.length;var e=i(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(l(t))return!o(t).length;for(var n in t)if(d.call(t,n))return!1;return!0}},560:(t,e,n)=>{var o=n(239),i=n(218);t.exports=function(t){if(!i(t))return!1;var e=o(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},780:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},218:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},5:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},719:(t,e,n)=>{var o=n(749),i=n(518),r=n(167),a=r&&r.isTypedArray,c=a?i(a):o;t.exports=c},62:t=>{t.exports=function(){return!1}},616:e=>{"use strict";e.exports=t}},n={};function o(t){var i=n[t];if(void 0!==i)return i.exports;var r=n[t]={id:t,loaded:!1,exports:{}};return e[t](r,r.exports,o),r.loaded=!0,r.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var i={};return(()=>{"use strict";function t(e){return t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t(e)}function e(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(e=function(){return!!t})()}function n(t,e){return!e||"object"!=((n=e)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e;var n}function r(o,i,r){return i=t(i),n(o,e()?Reflect.construct(i,r||[],t(o).constructor):i.apply(o,r))}function a(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):a(t,e)}function c(t,e){if(!a(t,e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function l(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function u(t,e){return u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},u(t,e)}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}o.d(i,{default:()=>st});var f=o(616),p=o(155),v=o.n(p);function m(t,e,n,o,i,r,a){try{var c=t[r](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(o,i)}function h(t){return function(){var e=this,n=arguments;return new Promise(function(o,i){var r=t.apply(e,n);function a(t){m(r,o,i,a,c,"next",t)}function c(t){m(r,o,i,a,c,"throw",t)}a(void 0)})}}function g(e,n,o){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,n,o){var i=function(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&null!==(e=t(e)););return e}(e,n);if(i){var r=Object.getOwnPropertyDescriptor(i,n);return r.get?r.get.call(o||e):r.value}},g(e,n,o||e)}function y(t,e){var n,o,i,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=c(0),a.throw=c(1),a.return=c(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(r=0)),r;)try{if(n=1,o&&(i=2&c[0]?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(!(i=r.trys,(i=i.length>0&&i[i.length-1])||6!==c[0]&&2!==c[0])){r=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(6===c[0]&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(t){c=[6,t],o=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;f.PDFViewCtrl.ViewerEvents,f.PDFViewCtrl.Consts.PDFDocPermission;var b=function(e){function n(){return c(this,n),r(this,n,arguments)}return d(n,e),l(n,[{key:"mounted",value:function(){g(t(n.prototype),"mounted",this).call(this)}},{key:"click",value:function(){return h(function(){return y(this,function(t){return this.pdfUI.openDialog("document-action-dialog").then(function(t){return t.show()}),[2]})}).call(this)}}],[{key:"getName",value:function(){return"document-action"}}]),n}(f.SeniorComponentFactory.createSuperClass({template:'<xbutton\n        @on.click="$component.click()"\n        @tooltip\n        tooltip-title="javascript-form:document-action.title"\n        text="javascript-form:document-action.text"\n        icon-class="fx-icon-sm fx-icon-ribbon_form_document_action"\n        tabindex="0"\n    ></xbutton>'})),j=(f.PDFViewCtrl.ViewerEvents,f.PDFViewCtrl.Consts.PDFDocPermission,function(e){function n(){return c(this,n),r(this,n,arguments)}return d(n,e),l(n,[{key:"mounted",value:function(){g(t(n.prototype),"mounted",this).call(this)}},{key:"click",value:function(){return h(function(){return y(this,function(t){return this.pdfUI.openDialog("document-javascript-dialog").then(function(t){return t.show()}),[2]})}).call(this)}}],[{key:"getName",value:function(){return"document-javascript"}}]),n}(f.SeniorComponentFactory.createSuperClass({template:'\n    <xbutton\n        @on.click="$component.click()"\n        @tooltip\n        tooltip-title="javascript-form:document-javascript.title"\n        text="javascript-form:document-javascript.text"\n        icon-class="fx-icon-sm fx-icon-ribbon_form_document_javascript"\n        tabindex="0"\n    ></xbutton>'}))),k=(f.PDFViewCtrl.ViewerEvents,f.PDFViewCtrl.Consts.PDFDocPermission,function(e){function n(){return c(this,n),r(this,n,arguments)}return d(n,e),l(n,[{key:"mounted",value:function(){g(t(n.prototype),"mounted",this).call(this)}},{key:"click",value:function(){return h(function(){return y(this,function(t){return this.pdfUI.openDialog("edit-all-javascript-dialog").then(function(t){return t.show()}),[2]})}).call(this)}}],[{key:"getName",value:function(){return"edit-all-javascript"}}]),n}(f.SeniorComponentFactory.createSuperClass({template:'<xbutton\n        @on.click="$component.click()"\n        @tooltip\n        tooltip-title="javascript-form:edit-all-javascript.title"\n        text="javascript-form:edit-all-javascript.text"\n        icon-class="fx-icon-sm fx-icon-ribbon_form_edit_all_javascript"\n        tabindex="0"\n    ></xbutton>'})));function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function x(t,e){if(t){if("string"==typeof t)return _(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(t,e):void 0}}function w(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||x(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var S=function(e){function n(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];var i;return c(this,n),(i=r(this,n,w(e))).initData(),i}return d(n,e),l(n,[{key:"mounted",value:function(){var e=this;g(t(n.prototype),"mounted",this).call(this),this.pdfUI.addViewerEventListener("show-js-console",function(t){e.click(!1)})}},{key:"initData",value:function(){}},{key:"click",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return h(function(){var e;return y(this,function(n){switch(n.label){case 0:return this.pdfUI.customs.isAccountExpired(!0)?[2]:this.dialog?[3,2]:[4,this.pdfUI.getComponentByName("template-container")];case 1:e=n.sent(),this.dialog=e.append('<javascript-form:javascript-console-dialog name="javascript-console-dialog"></javascript-form:javascript-console-dialog>'),n.label=2;case 2:return t&&this.pdfUI.customs.sendGAEvent({eventKey:"fv--form-javascript-console",label:"form_tab"}),this.dialog.show(),[2]}})}).call(this)}}],[{key:"getName",value:function(){return"javascript-console"}}]),n}(f.SeniorComponentFactory.createSuperClass({template:'<xbutton\n        @on.click="$component.click()"\n        @tooltip\n        tooltip-title="javascript-form:javascript-console.title"\n        text="javascript-form:javascript-console.text"\n        icon-class="fx-icon-sm fx-icon-ribbon_form_javascript_console"\n        tabindex="0"\n    ></xbutton>'})),A=f.PDFViewCtrl.Consts.PDFDocPermission,I=function(e){function n(){return c(this,n),r(this,n,arguments)}return d(n,e),l(n,[{key:"mounted",value:function(){var e=this;g(t(n.prototype),"mounted",this).call(this);var o=this.getComponentByName("js-form-dropdown"),i=o.doActive.bind(o);o.doActive=function(){i(),e.pdfUI.getCurrentPDFDoc().then(function(t){var n=t.getUserPermissions(),o="all"===localStorage.getItem("SECURITY_PROTECTED_VIEW"),i=e.getComponentByName("form-document-javascript"),r=e.getComponentByName("form-document-action"),a=e.getComponentByName("form-edit-all-javascript");n&A.ModifyDocument?o?(i.disable(),r.disable(),a.disable()):(i.enable(),r.enable(),a.enable()):(i.disable(),r.disable(),a.disable())})}}}],[{key:"getName",value:function(){return"javascript-form-dropdown"}}]),n}(f.SeniorComponentFactory.createSuperClass({template:'\n    <div>\n        <ribbon-button\n            @tooltip \n            tooltip-title="javascript-form:button-tooltip.title"\n            text="javascript-form:ribbon.text"\n            icon-class="fx-icon-ribbon_form_javascript_form"\n            class="fx-js-form-btn"\n            not-immediately="true"\n            @var.self="$component"\n        >\n        <dropdown\n            icon-class="fx-icon-ribbon_form_javascript_form"\n            @tooltip \n            tooltip-title="javascript-form:button-tooltip.title"\n            separate="false"\n            text="javascript-form:ribbon.text"\n            name="js-form-dropdown"\n        >\n            <javascript-form:document-javascript name="form-document-javascript"></javascript-form:document-javascript>\n            <javascript-form:document-action name="form-document-action"></javascript-form:document-action>\n            <javascript-form:javascript-console name="javascript-console"></javascript-form:javascript-console>\n            <javascript-form:edit-all-javascript name="form-edit-all-javascript"></javascript-form:edit-all-javascript>\n        </dropdown>\n        </ribbon-button>\n    </div>\n    '}));function N(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,i,r=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(o=n.next()).done)&&(r.push(o.value),!e||r.length!==e);a=!0);}catch(t){c=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return r}}(t,e)||x(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var D=o(145),C=o.n(D),O=f.vendors.jQuery,T=function(e){function n(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];var i;return c(this,n),(i=r(this,n,w(e))).initData(),i}return d(n,e),l(n,[{key:"initData",value:function(){this.addedJsList=[],this.inputName="",this.selectName="",this.previewStr="",this.scriptInputDialog=null}},{key:"mounted",value:function(){g(t(n.prototype),"mounted",this).call(this)}},{key:"show",value:function(){g(t(n.prototype),"show",this).call(this),this.inputName="",this.selectName="",this.previewStr="",this.changeUiState(),this.localize();var e=this.pdfUI.addonInstanceMap.FormDesigner;this.scriptInputDialog||(this.scriptInputDialog=e.getDialog("JSInput")),this.getJsFromDoc()}},{key:"getJsFromDoc",value:function(){return h(function(){var t,e,n,o,i,r,a,c,s,l;return y(this,function(u){switch(u.label){case 0:return this.addedJsList=[],[4,this.pdfUI.getCurrentPDFDoc()];case 1:t=u.sent(),e=t.getJsNameTree(),n=!0,o=!1,i=void 0;try{for(r=Object.entries(e)[Symbol.iterator]();!(n=(a=r.next()).done);n=!0)c=N(a.value,2),s=c[0],l=c[1],this.addedJsList.push({name:s,content:l,jsNameTree:!0})}catch(t){o=!0,i=t}finally{try{n||null==r.return||r.return()}finally{if(o)throw i}}return this.controller.digest(),[2]}})}).call(this)}},{key:"closeDia",value:function(){this.hide()}},{key:"clickHandle",value:function(t){var e=t.name,n=t.content;this.inputName=e,this.selectName=e,this.previewStr=n,this.changeUiState(),this.changeSelectUi(e)}},{key:"changeSelectUi",value:function(t){O("#addJsList").find("li").removeClass("selected"),t&&O('li[js-name="'.concat(t,'"]')).addClass("selected")}},{key:"deleteItem",value:function(){return h(function(){var t,e;return y(this,function(n){switch(n.label){case 0:return t=this,[4,this.pdfUI.getCurrentPDFDoc()];case 1:return e=n.sent(),this.addedJsList.forEach(function(n){t.selectName===n.name&&n.jsNameTree&&(delete e.info.jsNameTree[t.selectName],e.removeNameTreeObj(2,t.selectName))}),this.addedJsList=this.addedJsList.filter(function(e){return e.name!==t.selectName}),this.selectName="",this.inputName="",this.previewStr="",this.changeUiState(),[2]}})}).call(this)}},{key:"addJs",value:function(t){return h(function(){var e,n,o;return y(this,function(i){return e=this,n="",o=this.addedJsList.find(function(t){return t.name===e.selectName}),n=t&&o?o.content:"function ".concat(this.inputName,"()\n{\n}\n"),this.scriptInputDialog.show(n,function(n){return h(function(){var e,i;return y(this,function(r){switch(r.label){case 0:return[4,this.pdfUI.getCurrentPDFDoc()];case 1:return e=r.sent(),i="edit",t?(o.content=n,o.jsNameTree&&(e.info.jsNameTree[this.selectName]=n)):(this.addedJsList.push({name:this.inputName,content:n,jsNameTree:!1}),this.selectName=this.inputName,e.info.jsNameTree[this.selectName]=n,i="add"),e.api.updateJSNameTree({path:"jr/doc"},e.id,i,this.selectName,n),this.controller.digest(),this.previewStr=n,this.changeUiState(),this.changeSelectUi(this.selectName),[2]}})}).call(e)}),[2]})}).call(this)}},{key:"saveToLocal",value:function(){window.localStorage.setItem("DOCUMENT_JAVASCRIPT_LIST",JSON.stringify(this.addedJsList.filter(function(t){return!t.jsNameTree})))}},{key:"changeUiState",value:function(){return h(function(){var t,e,n,o;return y(this,function(i){switch(i.label){case 0:return[4,this.pdfUI.getComponentByName("js-dia-add")];case 1:return t=i.sent(),[4,this.pdfUI.getComponentByName("js-dia-edit")];case 2:return e=i.sent(),[4,this.pdfUI.getComponentByName("js-dia-delete")];case 3:return n=i.sent(),o=O("#js-dia-preview-box"),!this.selectName&&this.inputName?(t.enable(),e.disable(),n.disable()):this.selectName||this.inputName?(t.disable(),e.enable(),n.enable()):(t.disable(),e.disable(),n.disable()),o.val(this.previewStr),this.controller.digest(),[2]}})}).call(this)}},{key:"inputHandleChange",value:function(t){var e=this;this.inputName=t.target.value,this.addedJsList.some(function(t){return t.name===e.inputName})?(this.selectName=this.inputName,this.changeSelectUi(this.selectName),this.previewStr=this.addedJsList.find(function(t){return t.name===e.selectName}).content):(this.selectName="",this.previewStr="",this.changeSelectUi()),this.changeUiState()}}],[{key:"getName",value:function(){return"document-javascript-dialog"}}]),n}(f.SeniorComponentFactory.createSuperClass({template:C()()}));const U=T;function L(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var E=o(778),F=o.n(E),J=f.PDFViewCtrl.ViewerEvents,P=f.PDFViewCtrl.PDF.actions.JavaScriptAction,R=f.vendors.jQuery,$=["wc","ws","ds","wp","dp"],V={wc:2,ws:3,ds:4,wp:5,dp:6},B=function(e){function n(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return c(this,n),r(this,n,w(e))}return d(n,e),l(n,[{key:"initData",value:function(){this.selectKey="",this.previewStr="",this.scriptInputDialog=null,this.isEnable=!1,this.todoEventList=[],this.timer=null,this.docActionList=$.map(function(t){return{key:t,name:"",content:""}}),this.getDataFromLocalStorage(),this.changeLanguage()}},{key:"changeLanguage",value:function(){var t=this.docActionList;this.docActionList=[],this.controller.digest(),this.docActionList=t;var e=this.controller.pdfUI,n=e.i18n.t("javascript-form:document-action.dialog.doc-will-close"),o=e.i18n.t("javascript-form:document-action.dialog.doc-will-save"),i=e.i18n.t("javascript-form:document-action.dialog.doc-did-save"),r=e.i18n.t("javascript-form:document-action.dialog.doc-will-print"),a=e.i18n.t("javascript-form:document-action.dialog.doc-did-print");this.docActionList.forEach(function(t){switch(t.key){case"wc":t.name=n;break;case"ws":t.name=o;break;case"ds":t.name=i;break;case"wp":t.name=r;break;case"dp":t.name=a}}),this.controller.digest()}},{key:"mounted",value:function(){g(t(n.prototype),"mounted",this).call(this),this.initData(),this.bindEvent()}},{key:"bindEvent",value:function(){var t,e=this,n=this.controller.pdfUI;this.addDestroyHook(n.addViewerEventListener((L(t={},J.willCloseDocument,function(t){e.handleJsAction("wc")}),L(t,J.documentWillPrint,function(t){e.handleJsAction("wp")}),L(t,J.documentDidPrint,function(t){e.handleJsAction("dp")}),L(t,J.documentWillSave,function(t){e.handleJsAction("ws")}),L(t,J.documentDidSave,function(t){e.handleJsAction("ds")}),t)))}},{key:"handleJsActionFun",value:function(t){var e=this.controller.pdfUI,n=this.docActionList.find(function(e){return e.key===t}).content,o=new P;o.setScript(n);var i=e.pdfViewer.getPDFDocRender();i&&i.getFormRender().execAction(o.getType(),o)}},{key:"handleJsAction",value:function(t){var e=this;this.todoEventList.includes(t)||this.todoEventList.push(t),this.timer||(this.timer=setTimeout(function(){if(e.getJsEnableFun(),e.isEnable)e.todoEventList.forEach(function(t){return e.handleJsActionFun(t)}),e.todoEventList=[];else{var t=e.controller.pdfUI,n=t.i18n.t("javascript-form:document-action.dialog.enable-tip");t.confirm({message:n,level:"warning"}).then(function(){localStorage.setItem("enable_js_action",!0),t.pdfViewer.setEnableJS(!0),t.eventEmitter.emit("js_action_event",!0),e.todoEventList.forEach(function(t){return e.handleJsActionFun(t)}),e.todoEventList=[]},function(){})}e.timer=null}))}},{key:"show",value:function(){g(t(n.prototype),"show",this).call(this),this.selectKey="",this.previewStr="",this.changeLanguage(),this.changeUiState(),this.changeSelectUi(),this.localize();var e=this.controller.pdfUI;this.getJsEnableFun();var o=e.addonInstanceMap.FormDesigner;this.scriptInputDialog||(this.scriptInputDialog=o.getDialog("JSInput")),this.docActionList.map(function(t){t.content="",t.engineObj=null}),this.getDataFromLocalStorage(),this.controller.digest()}},{key:"getJsEnableFun",value:function(){this.controller.pdfUI;var t=localStorage.getItem("enable_js_action");null==t&&(t=this.controller.pdfUI.pdfViewer.getEnableJS());"string"==typeof t&&(t="true"===t),this.isEnable=t}},{key:"getDataFromLocalStorage",value:function(){var t=this;this.controller.pdfUI.pdfViewer.currentPDFDoc.loadAdditionalActions().then(function(e){Object.keys(e).forEach(function(n){var o=e[n],i=t.docActionList[n-2];i.content=o.getScript(),i.engineObj=o}),t.controller.digest()})}},{key:"closeDia",value:function(){this.hide()}},{key:"okHandle",value:function(){this.closeDia()}},{key:"selectHandle",value:function(t){var e=t.key,n=t.content;this.selectKey=e,this.previewStr=n,this.changeSelectUi(e),this.changeUiState()}},{key:"changeUiState",value:function(){return h(function(){var t;return y(this,function(e){switch(e.label){case 0:return[4,this.controller.pdfUI.getComponentByName("doc-action-edit")];case 1:return t=e.sent(),this.selectKey?t.enable():t.disable(),[2]}})}).call(this)}},{key:"changeSelectUi",value:function(t){R("#docActionList").find("li").removeClass("selected");var e=R("#doc-action-preview");t&&R('li[js-key="'.concat(t,'"]')).addClass("selected"),e.val(this.previewStr)}},{key:"editJs",value:function(){var t=this;this.scriptInputDialog.show(this.previewStr,function(e){t.previewStr=e,t.docActionList.forEach(function(n){if(n.key===t.selectKey){if(n.content=e,!n.engineObj){var o=t.pdfUI.pdfViewer.currentPDFDoc;return o.api.addJSAA({path:"jr/doc"},o.id,V[t.selectKey],e),void t.pdfUI.eventEmitter.emit(J.actionUpdated,o)}n.engineObj.setScript(e)}}),t.changeSelectUi(t.selectKey)})}}],[{key:"getName",value:function(){return"document-action-dialog"}}]),n}(f.SeniorComponentFactory.createSuperClass({template:F()()}));const H=B;var M=o(806),W=o.n(M),K=o(609),z=o.n(K),G=f.PDFViewCtrl.PDF.actions.JavaScriptAction,q=f.vendors.jQuery,Q=f.internals.AnnotActions,X=function(e){function n(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];var i;return c(this,n),(i=r(this,n,w(e))).initData(),i}return d(n,e),l(n,[{key:"initData",value:function(){this.col=0,this.ln=0,this.jsUsedAnnotActionList=[],this.docActionList=[],this.docJsList=[]}},{key:"mounted",value:function(){g(t(n.prototype),"mounted",this).call(this),this.bindEvent()}},{key:"bindEvent",value:function(){this.pdfUI.eventEmitter.on("goToLineNumber",this.getGoToLIneNum)}},{key:"getGoToLIneNum",value:function(t){var e=document.getElementById("all-js-editor");if(!(t>parseInt(e.scrollHeight/20))){for(var n=e.value.split(""),o=n.length,i=0,r=0,a=0,c=1;a<o;a++)if("\n"===n[a]&&(c+=1)===t){i=a+1;break}for(var s=i;s<o;s++){if(s===o-1){r=o;break}if("\n"===n[s]){r=s;break}}if(e.createTextRange){var l=e.createTextRange();l.moveEnd("character",r),l.moveStart("character",i),l.select()}else e.setSelectionRange(i,r);e.focus(),q("#all-js-editor").scrollTop(20*Number(t-1))}}},{key:"show",value:function(){var e=this,o=this,i=function(){return g(t(n.prototype),"show",e)};return h(function(){var t,e,n,r,c,s,l,u,d,f,p,v,m,h,g,b,j,k,_,x,w,S,A,I;return y(this,function(y){switch(y.label){case 0:return t=this,i().call(o),this.addEditorEvent(),this.col=1,this.ln=1,this.updateCurLineCol(),this.localize(),this.jsUsedAnnotActionList=[],e=q("#all-js-editor"),n=window.localStorage.getItem("DOCUMENT_ACTION_LIST"),this.docActionList=n?JSON.parse(n):null,r=window.localStorage.getItem("DOCUMENT_JAVASCRIPT_LIST"),this.docJsList=r?JSON.parse(r):[],[4,this.pdfUI.getCurrentPDFDoc()];case 1:c=y.sent(),s=c.getJsNameTree(),l=!0,u=!1,d=void 0;try{for(f=Object.entries(s)[Symbol.iterator]();!(l=(p=f.next()).done);l=!0)v=N(p.value,2),m=v[0],h=v[1],this.docJsList.push({name:m,content:h,jsNameTree:!0})}catch(t){u=!0,d=t}finally{try{l||null==f.return||f.return()}finally{if(u)throw d}}return g="//-------------------------------------------------------------\n//-----------------Do not edit the XML tags--------------------\n//-------------------------------------------------------------\n",this.docJsList.length&&(b=this.docJsList.reduce(function(t,e){var n=e.name,o=e.content;return t+="\n//<Document-Level>\n//<ACRO_source>".concat(n,"</ACRO_source>\n//<ACRO_script>\n//\x3c!--*********** belongs to:Document-Level:").concat(n," ***********--\x3e\n").concat(o,"\n//</ACRO_script>\n//</Document-Level>\n")},""),g+=b),this.docActionList&&(j=this.docActionList.filter(function(t){return t.content}),k=this.pdfUI.i18n.t("javascript-form:document-action.dialog.doc-did-save"),_=this.pdfUI.i18n.t("javascript-form:document-action.dialog.doc-did-saved"),x=this.pdfUI.i18n.t("javascript-form:document-action.dialog.doc-did-print"),w=this.pdfUI.i18n.t("javascript-form:document-action.dialog.doc-did-printed"),S=j.reduce(function(t,e){var n=e.name,o=e.content,i=n;return n===k?i=_:n===x&&(i=w),t+="\n//<Document-Actions>\n//<ACRO_source>".concat(i,":Action1</ACRO_source>\n//<ACRO_script>\n//\x3c!--*********** belongs to:Document-Actions:").concat(i," ***********--\x3e\n").concat(o,"\n//</ACRO_script>\n//</Document-Actions>\n")},""),g+=S),[4,this.getAllAnnot()];case 2:return(A=y.sent())&&(I=A.reduce(function(e,n){if(a(t.getActionInAnnot(n),G)){t.jsUsedAnnotActionList.push(n);var o=t.getActionTitleName(n),i=o.jsStr,r=o.titleStr;e+="\n//<AcroForm>\n//<ACRO_source>".concat(r,"</ACRO_source>\n//<ACRO_script>\n//\x3c!--*********** belongs to:AcroForm:").concat(r," ***********--\x3e\n").concat(i,"\n//</ACRO_script>\n//</AcroForm>\n")}return e},""),g+=I),e.val(g),[2]}})}).call(this)}},{key:"getActionInAnnot",value:function(t){var e=null;if(t){e=t.getAction&&t.getAction();var n=t.engineActions;if(!e&&!z()(n)){var o=!0,i=!1,r=void 0;try{for(var c,s=Object.entries(t.engineActions)[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var l=N(c.value,2),u=l[0],d=l[1];if(a(d,G)){(e=d).actionTriggerType=u;break}}}catch(t){i=!0,r=t}finally{try{o||null==s.return||s.return()}finally{if(i)throw r}}}}return e}},{key:"getActionTitleName",value:function(t){var e=this.getActionInAnnot(t),n=e.getScript(),o="Page".concat(t.getPage().getIndex()+1,":"),i="".concat(t.getField().getName(),":"),r="Annot".concat(t.getIndex()+1,":"),a="";e.actionTriggerType&&Number(e.actionTriggerType)&&(a=(a=this.pdfUI.i18n.t(Q[Number(e.actionTriggerType)]))?a.split(" ").join("")+":":"");var c="Action".concat(e.getSubActionCount()+1);return{jsStr:n,titleStr:"".concat(o).concat(i).concat(r).concat(a).concat(c)}}},{key:"getAllAnnot",value:function(){return h(function(){var t,e,n,o,i,r;return y(this,function(a){switch(a.label){case 0:t=this.pdfUI.pdfViewer.getCurrentPDFDoc(),e=t.getPageCount(),n=[],o=0,a.label=1;case 1:return o<e?[4,t.getPageByIndex(o)]:[3,5];case 2:return[4,a.sent().getAnnots()];case 3:r=a.sent(),(i=n).push.apply(i,w(r)),a.label=4;case 4:return o++,[3,1];case 5:return[2,n]}})}).call(this)}},{key:"closeDia",value:function(){this.hide()}},{key:"addEditorEvent",value:function(){var t=this;q("#all-js-editor").on("click keyup focus",function(e){return t.editorEventHandler(e)})}},{key:"editorEventHandler",value:function(t){var e=t.target,n=e.value,o=e.selectionEnd;if(n){for(var i=n.split(""),r=i.length,a=o;a>=0;a--){if(0===o||"\n"===i[a-1]){this.col=1;break}if(0===a){this.col=o+1;break}if("\n"===i[a-2]){var c=n.substring(a-1,o);1===c.length&&"\n"===c?this.col=1:this.col=c.length+1;break}}for(var s=0,l=0;l<r;l++){if("\n"===i[l]&&(s+=1),l+1===o){this.ln=s+1;break}if(0===o){this.ln=1;break}}}else this.col=1,this.ln=1;this.updateCurLineCol()}},{key:"updateCurLineCol",value:function(){var t=this.pdfUI.i18n.t("javascript-form:edit-all-javascript.dialog.ln"),e=this.pdfUI.i18n.t("javascript-form:edit-all-javascript.dialog.col");q("#js-editor-curpos").html("".concat(t,": ").concat(this.ln,", ").concat(e,": ").concat(this.col))}},{key:"okHandle",value:function(){var t=q("#all-js-editor").val().split("\n//").filter(function(t){return t.startsWith("<")});this.getEditedJsFromStr(t),this.closeDia()}},{key:"getEditedJsFromStr",value:function(t){for(var e=t,n=e.length,o=0;o<n;o+=6){var i=this.splitNameFromStr(e[o+1]);e[o].startsWith("<Document-Actions>")&&(i=this.splitNameFromStr(e[o+1],"action"));var r=e[o+3].split("**--\x3e\n")[1];e[o].startsWith("<Document-Level>")?this.saveJsToSource("level",i,r):e[o].startsWith("<Document-Actions>")?this.saveJsToSource("action",i,r):e[o].startsWith("<AcroForm>")&&this.saveJsToSource("form",i,r)}}},{key:"saveJsToSource",value:function(t,e,n){return h(function(){var o,i,r,a,c,s,l,u,d,f,p,v,m,h,g,b,j,k,_;return y(this,function(y){switch(y.label){case 0:return"level"!==t?[3,2]:[4,this.pdfUI.getCurrentPDFDoc()];case 1:o=y.sent(),i=!0,r=!1,a=void 0;try{for(c=this.docJsList[Symbol.iterator]();!(i=(s=c.next()).done);i=!0)if((l=s.value).name===e){l.content=n,l.jsNameTree&&(o.info.jsNameTree[e]=n);break}}catch(t){r=!0,a=t}finally{try{i||null==c.return||c.return()}finally{if(r)throw a}}return window.localStorage.setItem("DOCUMENT_JAVASCRIPT_LIST",JSON.stringify(this.docJsList.filter(function(t){return!t.jsNameTree}))),[3,3];case 2:if("action"===t){u=!0,d=!1,f=void 0;try{for(p=this.docActionList[Symbol.iterator]();!(u=(v=p.next()).done);u=!0)if((m=v.value).name===e){m.content=n;break}}catch(t){d=!0,f=t}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}window.localStorage.setItem("DOCUMENT_ACTION_LIST",JSON.stringify(this.docActionList))}else if("form"===t){h=!0,g=!1,b=void 0;try{for(j=this.jsUsedAnnotActionList[Symbol.iterator]();!(h=(k=j.next()).done);h=!0)if(_=k.value,this.getActionTitleName(_).titleStr===e){this.getActionInAnnot(_).setScript(n);break}}catch(t){g=!0,b=t}finally{try{h||null==j.return||j.return()}finally{if(g)throw b}}}y.label=3;case 3:return[2]}})}).call(this)}},{key:"splitNameFromStr",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t.split("</ACRO_source>")[0].split("<ACRO_source>")[1];if("action"===e){var o=n.split(":")[0],i=this.pdfUI.i18n.t("javascript-form:document-action.dialog.doc-did-save"),r=this.pdfUI.i18n.t("javascript-form:document-action.dialog.doc-did-saved"),a=this.pdfUI.i18n.t("javascript-form:document-action.dialog.doc-did-print"),c=this.pdfUI.i18n.t("javascript-form:document-action.dialog.doc-did-printed");return o===r?i:o===c?a:o}return n}},{key:"goTo",value:function(){return h(function(){return y(this,function(t){switch(t.label){case 0:return[4,this.pdfUI.openDialog("go-to-line-dialog")];case 1:return t.sent().show(),[2]}})}).call(this)}},{key:"destroy",value:function(){var e=this;g(t(n.prototype),"destroy",this).call(this),q("#all-js-editor").off("click keyup focus",function(t){return e.editorEventHandler(t)}),this.pdfUI.eventEmitter.off("goToLineNumber",this.getGoToLIneNum)}}],[{key:"getName",value:function(){return"edit-all-javascript-dialog"}}]),n}(f.SeniorComponentFactory.createSuperClass({template:W()()}));const Y=X;var Z=o(12),tt=o.n(Z),et=function(e){function n(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];var i;return c(this,n),(i=r(this,n,w(e))).inputNum="",i}return d(n,e),l(n,[{key:"mounted",value:function(){g(t(n.prototype),"mounted",this).call(this)}},{key:"show",value:function(){g(t(n.prototype),"show",this).call(this),this.inputNum="",this.localize(),this.controller.digest()}},{key:"closeDia",value:function(){this.hide()}},{key:"okHandle",value:function(){var t=this.inputNum;""!==t&&0!==Number(t)?(this.pdfUI.eventEmitter.emit("goToLineNumber",Number(this.inputNum)),this.closeDia()):this.closeDia()}},{key:"inputHandleChange",value:function(t){var e=t.target.value;this.inputNum=e.replace(/[^0-9]/g,""),this.inputNum=0===Number(this.inputNum)?"":this.inputNum,this.controller.digest()}}],[{key:"getName",value:function(){return"go-to-line-dialog"}}]),n}(f.SeniorComponentFactory.createSuperClass({template:tt()()}));const nt=et;var ot=o(59),it=o.n(ot),rt=f.vendors.jQuery,at=function(e){function n(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return c(this,n),r(this,n,w(e))}return d(n,e),l(n,[{key:"mounted",value:function(){g(t(n.prototype),"mounted",this).call(this),this.$element=rt(this.element)}},{key:"show",value:function(){g(t(n.prototype),"show",this).call(this),this.$element.find(".script-container").val(""),this.syncLine(""),this.bindEvent()}},{key:"bindEvent",value:function(){var t=this,e=rt(".script-container",this.$element),n=rt(".line-container",this.$element);e.on("change keyup",function(e){if(t.syncLine(e.target.value),37==e.keyCode||39==e.keyCode)return e.stopPropagation(),!1}).on("scroll",function(t){n[0].scrollTop=e[0].scrollTop})}},{key:"syncLine",value:function(t){for(var e=t.split("\n"),n=rt(".line-container",this.$element),o="",i=0;i<e.length;i++){for(var r=""+i;r.length<5;)r="0"+r;i!=(o+=r)-1&&(o+="\r\n")}n.val(o);var a=rt(".script-container",this.$element);n[0].scrollTop=a[0].scrollTop}},{key:"substringError",value:function(t,e,n){return t.toString().substring(e,t.toString().indexOf(n))}},{key:"handleRun",value:function(){var t=this,e=rt(".script-container",this.$element).val(),n=pdfui.i18n.t("javascript-form:javascript-console.dialog.exec"),o=pdfui.i18n.t("javascript-form:javascript-console.dialog.success");pdfui.i18n.t("javascript-form:javascript-console.dialog.fail");pdfui.getPDFDocRender().then(function(n){var o;return t.pdfUI.eventEmitter.once("printLineConsole",function(t){o=t}),n.doc.executeJavaScript(e).then(function(t){return t&&!o?t:{ret:-1,errorInfo:{stack:o||""}}})}).then(function(e){var i;i=e&&-1===e.ret?"======== ".concat(n," ======== \n ").concat(e.errorInfo.stack):"======== ".concat(n," ======== \n ").concat(o);var r=rt("#fv__ui-console-results",t.$element),a=r.val();r.val(a+i+"\n"),r[0].scrollTop=r[0].scrollHeight})}},{key:"handleClear",value:function(t){rt("#fv__ui-console-results",this.$element).val("")}},{key:"handleClose",value:function(t){this.hide()}},{key:"checkTxt",value:function(t){}},{key:"handleCheckboxClick",value:function(t){console.log(t)}},{key:"showExecuteResults",value:function(){}}],[{key:"getName",value:function(){return"javascript-console-dialog"}}]),n}(f.SeniorComponentFactory.createSuperClass({template:it()()}));const ct=at;var st=function(t){function e(){return c(this,e),r(this,e,arguments)}return d(e,t),l(e,[{key:"init",value:function(t){var e=function(e){t.registerDialog(e,function(i){return n[r=e]?Promise.resolve(n[r]):t.getComponentByName("template-container").then(function(t){return n[r]=t.append(o[r])});var r})},n=this;this.pdfUI=t;var o={"document-javascript-dialog":'<javascript-form:document-javascript-dialog name="document-javascript-dialog"></javascript-form:document-javascript-dialog>',"document-action-dialog":'<javascript-form:document-action-dialog name="document-action-dialog"></javascript-form:document-action-dialog>',"javascript-console-dialog":'<javascript-form:javascript-console-dialog name="javascript-console-dialog"></javascript-form:javascript-console-dialog>',"edit-all-javascript-dialog":'<javascript-form:edit-all-javascript-dialog name="edit-all-javascript-dialog"></javascript-form:edit-all-javascript-dialog>',"go-to-line-dialog":'<javascript-form:go-to-line-dialog name="go-to-line-dialog"></javascript-form:go-to-line-dialog>'};for(var i in o)e(i)}},{key:"fragments",value:function(){return[]}}],[{key:"getName",value:function(){return"javascript-form"}},{key:"getLoader",value:function(){return v()}},{key:"initOnLoad",value:function(){var t=f.modular.module("javascript-form",[]);[U,H,ct,Y,nt,I,S,j,b,k].forEach(function(e){return t.registerComponent(e)})}}]),e}(f.UIXAddon)})(),i=i.default})());