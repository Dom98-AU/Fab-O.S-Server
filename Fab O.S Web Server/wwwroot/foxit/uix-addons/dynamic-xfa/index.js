!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("UIExtension"),require("UIExtension").PDFViewCtrl.PDF.actions,require("UIExtension").PDFViewCtrl.commons,require("UIExtension").__ui_lib__):"function"==typeof define&&define.amd?define(["UIExtension",["UIExtension","PDFViewCtrl","PDF","actions"],["UIExtension","PDFViewCtrl","commons"],["UIExtension","__ui_lib__"]],t):"object"==typeof exports?exports.XFAUIXAddon=t(require("UIExtension"),require("UIExtension").PDFViewCtrl.PDF.actions,require("UIExtension").PDFViewCtrl.commons,require("UIExtension").__ui_lib__):e.XFAUIXAddon=t(e.UIExtension,e.UIExtension.PDFViewCtrl.PDF.actions,e.UIExtension.PDFViewCtrl.commons,e.UIExtension.__ui_lib__)}(self,(e,t,n,r)=>(()=>{var i={594:(e,t,n)=>{n(779);e.exports=function(e){"use strict";e=e||{};return'<contextmenu>\r\n<contextmenu-item name="fv--xfa-signature-contextmenu-sign" @controller="xfa:SignController">signDocument.sign</contextmenu-item>\r\n<contextmenu-item name="fv--xfa-signature-contextmenu-verify" @controller="xfa:VerifyController">verifySign.verify</contextmenu-item>\r\n<contextmenu-separator></contextmenu-separator>\r\n<contextmenu-item name="fv--xfa-signature-contextmenu-show-properties" @controller="xfa:ShowPropertiesController">signDocument.showSignProperty</contextmenu-item>\r\n</contextmenu>'}},971:e=>{e.exports=null},585:(e,t,n)=>{"use strict";
/*! art-template@runtime | https://github.com/aui/art-template */var r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{},i=Object.create(r),o=/["&'<>]/;function a(e){return"string"!=typeof e&&(e=null==e?"":"function"==typeof e?a(e.call(e)):JSON.stringify(e)),e}i.$escape=function(e){return function(e){var t=""+e,n=o.exec(t);if(!n)return e;var r="",i=void 0,a=void 0,s=void 0;for(i=n.index,a=0;i<t.length;i++){switch(t.charCodeAt(i)){case 34:s="&#34;";break;case 38:s="&#38;";break;case 39:s="&#39;";break;case 60:s="&#60;";break;case 62:s="&#62;";break;default:continue}a!==i&&(r+=t.substring(a,i)),a=i+1,r+=s}return a!==i?r+t.substring(a,i):r}(a(e))},i.$each=function(e,t){if(Array.isArray(e))for(var n=0,r=e.length;n<r;n++)t(e[n],n);else for(var i in e)t(e[i],i)},e.exports=i},779:(e,t,n)=>{"use strict";e.exports=n(585)},616:t=>{"use strict";t.exports=e},459:e=>{"use strict";e.exports=t},732:e=>{"use strict";e.exports=n},399:e=>{"use strict";e.exports=r}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return i[e](n,n.exports,a),n.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var s={};return(()=>{"use strict";function e(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function t(t){return function(){var n=this,r=arguments;return new Promise(function(i,o){var a=t.apply(n,r);function s(t){e(a,i,o,s,c,"next",t)}function c(t){e(a,i,o,s,c,"throw",t)}s(void 0)})}}function n(e){return n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}function r(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(r=function(){return!!e})()}function i(e,t){return!t||"object"!=((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t;var n}function o(e,t,o){return t=n(t),i(e,r()?Reflect.construct(t,o||[],n(e).constructor):t.apply(e,o))}function c(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):c(e,t)}function d(e,t){if(!c(e,t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||g(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}a.d(s,{default:()=>Oe});function y(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;var b=a(616),x=(b.PDFUI,b.UIXAddon),w=(b.SeniorComponentFactory,b.modular),S=(b.ServiceScope,b.Directive,b.Controller,b.Component,b.ContainerComponent,b.UIEvents),C=b.vendors.Hammer,I=b.PDFViewCtrl,k=(I.PDFViewer,I.ViewerEvents,I.DeviceInfo,I.BrowserInfo,I.shared),D=(k.Disposable,k.Store,k.ValueStore,k.debounce,k.observeResize,k.throttle,k.Draggable,k.browser,k.DebounceAsyncTaskExecutor,k.ThrottleAsyncTaskExecutor,k.QueuedAsyncTaskExecutor,k.BuiltinIntersectionObserver,k.download,I.Log.LoggerFactory,I.PDF.constant.Signature_State,1),E=2,P=4,A=5,F=6,T=13,O=1,U=1,R=2,j=4,N=8,_=0,M=1,V=2,W=3,L=4,B=0,X=1,H="xfa-press-widget-point",q="show-signature-dialog",$="show-signature-property-dialog",K=a(971),J=a.n(K);function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){z(e,t,n[t])})}return e}function G(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}var Q=a(732);var Z;function ee(e){return function(){if(!Z){var e=(0,Q.getDPI)();Z=[e.x,e.y]}return Z}()[e]}function te(e){return e*ee(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)/72}function ne(e){return 72*e/ee(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}function re(e,n){return t(function(){var t,r,i,o,a,s;return y(this,function(c){switch(c.label){case 0:return t=n.getScale(),r=n.getRotation(),(i=n.page)?[3,2]:[4,n.getPDFPage()];case 1:i=c.sent(),c.label=2;case 2:return o=i.info,a=o.width,s=o.height,0===r||(90===r?e={left:s-e.bottom,top:e.left,right:s-e.top,bottom:e.right}:180===r?e={left:a-e.right,top:s-e.bottom,right:a-e.left,bottom:s-e.top}:270===r&&(e={left:e.top,top:a-e.right,right:e.bottom,bottom:a-e.left})),[2,{left:te(e.left)*t,top:te(e.top)*t,right:te(e.right)*t,bottom:te(e.bottom)*t}]}})})()}function ie(e,n){return t(function(){var t,r,i,o,a,s,c;return y(this,function(d){switch(d.label){case 0:return t=n.getScale(),r=n.getRotation(),(i=n.page)?[3,2]:[4,n.getPDFPage()];case 1:i=d.sent(),d.label=2;case 2:return o=i.info,a=o.width,s=o.height,c=[ne(e[0])/t,ne(e[1])/t],0===r?[2,c]:90===r?[2,[c[1],s-c[0]]]:180===r?[2,[a-c[0],s-c[1]]]:270===r?[2,[a-c[1],c[0]]]:[2]}})})()}function oe(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.x,e.clientY-n.y]}function ae(e){var t=0;return e.altKey&&(t|=j),e.ctrlKey&&(t|=R),e.shiftKey&&(t|=U),e.metaKey&&(t|=N),t}var se=a(459);var ce={left:0,center:1,right:2},de=(se.ActionType,1),ue=2,le=3,fe="editDiv",pe=function(){function e(){d(this,e)}return l(e,null,[{key:"formatHtmlStr",value:function(e){var t=e,n={split:"split",remove:"remove",removeSelf:"removeTag"};[{startStr:"\x3c!--StartFragment--\x3e",endStr:"\x3c!--EndFragment--\x3e",operate:n.split},{startStr:"\x3c!--[if",endStr:"<![endif]--\x3e",operate:n.remove},{startStr:"<![if",endStr:"<![endif]>",operate:n.remove},{startStr:"<o:p>",endStr:"</o:p>",operate:n.remove},{startStr:"<w:Sdt",endStr:"</w:Sdt>",operate:n.removeTag},{startStr:"<w:sdtPr>",endStr:"</w:sdtPr>",operate:n.remove}].forEach(function(e){for(var r=t.indexOf(e.startStr);r>-1;){switch(e.operate){case n.split:var i=t.indexOf(e.endStr);t=t.slice(r+e.startStr.length,i>-1?i:t.length);break;case n.remove:var o=t.indexOf(e.endStr),a=t.substring(0,r),s=t.substring(o+e.endStr.length);t=a+s;break;case n.removeTag:var c=t.substring(r),d=c.indexOf(">");t=(t=t.substring(0,r)+c.substring(d+1)).split(e.endStr).join("")}r=t.indexOf(e.startStr)}});var r=document.createElement("div");return r.contentEditable=!0,r.id=fe,r.style.display="none",document.body.appendChild(r),r.innerHTML=t.replaceAll("\n","").replaceAll("\r",""),this.addTagClassName(r)}},{key:"getFont",value:function(e){var t=e[0],n=new RegExp("^\\s*".concat(t,"\\b")),r=["-apple-system","system-ui"," BlinkMacSystemFont"," Segoe UI"," Roboto"," Oxygen"," Ubuntu"," Fira Sans"," Droid Sans"," Helvetica Neue"," sans-serif"].some(function(e){return n.test(e)});return r?(Q.DeviceInfo.isWindows?t="DengXian Light":Q.DeviceInfo.isMacOS||Q.DeviceInfo.isIOS?t="PingFangSC":Q.DeviceInfo.isAndroid?t="Roboto":Q.DeviceInfo.isLinux&&(t="Noto Sans"),t):t}},{key:"formatRichText",value:function(e){var t=this,n=this.formatHtmlStr(e),r=document.getElementById("".concat(fe)),i=n.map(function(e){var n,i,o,a,s=r.getElementsByClassName("".concat(e))[0],c=getComputedStyle(s),d=c.fontFamily.replaceAll('"',"").split(","),u=t.getFont(d);return{content:s.textContent,richTextStyle:{font:{name:u},textSize:parseInt(c.fontSize),textAlignment:ce[c.textAlign],textColor:(0,Q.colorConvertor)(c.color,"int"),isBold:(o=c.fontWeight,a=parseFloat(o),isNaN(a)?o.includes("bold"):a>400),isItalic:(i=c.fontStyle,i.includes("italic")||i.includes("oblique")),isUnderline:c.textDecoration.includes("underline"),isStrikethrough:c.textDecoration.includes("line-through"),cornerMarkStyle:(n=c.verticalAlign,{sub:le,super:ue}[n]||de)}}});return r.remove(),i}},{key:"addTagClassName",value:function(e){var t=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=e.childNodes.length;(["block","flex"].includes(getComputedStyle(e).display)&&e.nextElementSibling&&(e.innerHTML+="\n"),i>0)&&Array.from(e.childNodes).forEach(function(i){if("#text"===i.nodeName){var o=document.createElement("span");o.innerText="".concat(i.textContent),o.style.textDecoration="".concat(n.underline?"underline":""," ").concat(n.lineThrough?"line-through":""),o.style.verticalAlign=n.verticalAlign;var a="foxitwebsdk-".concat(Date.now(),"-").concat(parseInt(1e3*Math.random()));r.push(a),o.classList.add(a),e.replaceChild(o,i)}else{var s=getComputedStyle(i).textDecoration,c={};s.includes("underline")&&(c.underline=!0),s.includes("line-through")&&(c.lineThrough=!0);var d=getComputedStyle(i).verticalAlign;["sub","super"].includes(d)&&(c.verticalAlign=d),t.addTagClassName(i,r,Object.assign({},n,c))}});return r}}]),e}(),he="fv__ui-xfa-input",ge=function(){function e(n,r,i){var o,a=this;d(this,e),z(this,"pdfUI",void 0),z(this,"pdfDoc",void 0),z(this,"provider",void 0),z(this,"pageIndex",void 0),z(this,"dom",void 0),this.pdfUI=n,this.pdfDoc=r,this.provider=i,document.body.insertAdjacentHTML("beforeend","<input class='".concat(he,"'/>")),this.dom=document.getElementsByClassName(he)[0];var s=!1;this.dom.addEventListener("compositionstart",function(e){s=!0}),this.dom.addEventListener("compositionend",function(e){s=!1,a.pdfDoc.api.triggerXFAWidgetEvent(a.pdfDoc.id,a.pageIndex,{type:"OnChar",inputChar:e.data,keyCode:o,flags:ae(e)})}),this.dom.addEventListener("input",function(e){s||"insertFromPaste"===e.inputType||a.pdfDoc.api.triggerXFAWidgetEvent(a.pdfDoc.id,a.pageIndex,{type:"OnChar",inputChar:e.data,flags:ae(e)})}),this.dom.addEventListener("paste",function(e){!s&&c(e,ClipboardEvent)&&(0,Q.getClipboardData)(e).then(function(t){if(t&&0!==t.length){var n="";if("string"===t[0].type)for(var r=0;r<t.length;r++)n+=t[r].value;else if("html"===t[0].type){var i=pe.formatRichText(t[0].value);if(0===i.length)return;for(var o=0;o<i.length;o++)n+=i[o].content}0!==n.length&&a.pdfDoc.api.triggerXFAWidgetEvent(a.pdfDoc.id,a.pageIndex,{type:"OnChar",inputChar:n,flags:ae(e)})}})}),this.dom.addEventListener("keydown",function(e){return t(function(){var t;return y(this,function(n){switch(n.label){case 0:return[4,this.pdfDoc.api.triggerXFAWidgetEvent(this.pdfDoc.id,this.pageIndex,{type:"OnKeyDown",keyCode:e.keyCode,flags:ae(e)})];case 1:return n.sent(),8!==e.keyCode&&13!==e.keyCode?[3,3]:(t=this.convertToFWLVitrualKeyCode(e.keyCode,!1),[4,this.pdfDoc.api.triggerXFAWidgetEvent(this.pdfDoc.id,this.pageIndex,{type:"OnChar",keyCode:t,flags:ae(e)})]);case 2:n.sent(),n.label=3;case 3:return o=e.keyCode,[2]}})}).call(a)}),this.dom.addEventListener("keyup",function(e){a.pdfDoc.api.triggerXFAWidgetEvent(a.pdfDoc.id,a.pageIndex,{type:"OnKeyUp",keyCode:e.keyCode,flags:ae(e)})})}return l(e,[{key:"focus",value:function(e){var t=this,n=function(){t.pageIndex=e,t.dom.focus()};Q.isHuaweiBrowser?setTimeout(function(){n()},100):n()}},{key:"blur",value:function(){this.pageIndex=void 0,this.dom.blur()}},{key:"setValue",value:function(e){this.dom.value=e}},{key:"destroy",value:function(){this.dom.remove()}},{key:"convertToFWLVitrualKeyCode",value:function(e,t){if(t)return e;var n=e;switch(e){case 35:n=16777233;break;case 36:n=16777232;break;case 37:n=16777234;break;case 39:n=16777236;break;case 38:n=16777235;break;case 40:n=16777237;break;case 46:n=16777223}return n}}]),e}();const ve={annotationUpdated:"annotation-updated",annotationIDUpdated:"annotation-id-updated",annotationAppearanceUpdated:"annotation-appearance-updated",annotationReplyAdd:"annotation-reply-add",annotationReplyAdded:"annotation-reply-add",annotationReviewStateAnnotAdd:"annotation-review-state-annot-add",annotationReviewStateAnnotAdded:"annotation-review-state-annot-add",annotationMarkedStateAnnotAdd:"annotation-marked-state-annot-add",annotationMarkedStateAnnotAdded:"annotation-marked-state-annot-add",annotationStatesCleared:"annotation-states-cleared",annotationRemoved:"annotation-removed",annotationMovedPosition:"annotation-moved-position",annotationPositionMoved:"annotation-moved-position",annotationOrderChanged:"annotation-order-changed",annotationAdded:"annotation-add",annotationAdd:"annotation-add",moveAnnotsToPages:"moveAnnotsToPages",annotationImported:"annotation-imported",annotationImportedEx:"annotation-imported-ex",annotationLoaded:"annotation-loaded",actionUpdated:"action-updated",actionAdd:"action-add",actionAdded:"action-add",actionRemove:"action-remove",actionRemoved:"action-remove",layerVisibleChange:"layer-visible-change",layerVisibleChanged:"layer-visible-change",layerRemoved:"layer-removed",layerMerged:"layer-merged",layerAdded:"layer-added",bookmarkAdded:"bookmark-added",structureBookmarkAdded:"structure-bookmark-added",bookmarkUpdated:"bookmark-updated",bookmarkRemoved:"bookmark-removed",stateAnnotNameUpdated:"state-annot-name-updated",pageInfoChange:"page-info-change",pageInfoChanged:"page-info-change",pageRotationChange:"page-rotation-change",beforePageRotationChanged:"before-page-rotation-changed",pageRotationChanged:"page-rotation-change",imageAdded:"image-added",watermarksAdded:"watermarks-added",watermarkAdded:"watermark-added",watermarkRemoved:"watermark-removed",graphicsUpdated:"graphics-updated",permissionChanged:"permission-changed",docPasswordChanged:"doc-password-changed",drmEncryptSuccess:"drm-encrypt-success",drmEncryptSucceeded:"drm-encrypt-success",drmEncryptFailed:"drm-encrypt-failed",removePwdAndPerm:"remove-password-and-permission",pwdAndPermRemoved:"remove-password-and-permission",securityTypeChanged:"security-type-changed",pageMoved:"page-moved",pageRemoved:"page-removed",pageAdded:"page-added",insertPages:"import-pages",pagesInserted:"import-pages",importPages:"import-pages",documentAttachmentAdd:"document-attachment-add",docAttachmentAdded:"document-attachment-add",documentAttachmentModify:"document-attachment-modify",docAttachmentModified:"document-attachment-modify",documentAttachmentRemove:"document-attachment-remove",docAttachmentRemoved:"document-attachment-remove",applyRedaction:"apply-redaction",redactionApplied:"apply-redaction",removeReviewState:"remove-review-state",reviewStateRemoved:"remove-review-state",removeMarkedState:"remove-marked-state",markedStateRemoved:"remove-marked-state",formValueChanged:"form-value-changed",metaDataChanged:"meta-data-changed",docModified:"doc-modified",flattened:"flattened",flattenAnnotation:"flatten-annotation",headerFooterUpdated:"headerFooterUpdated",headerFooterAdded:"headerFooterAdded",calculationOrderUpdated:"calculationOrderUpdated",COChange:"COChange",COChanged:"COChange",pagesMoved:"pages-moved",pagesReverseStart:"pagesReverseStart",pagesReversed:"pagesReversed",pagesRemoved:"pages-removed",pagesRotated:"pages-rotated",pageMeasureScaleRatioChanged:" page-measure-scale-ratio-changed",obtainsPageFromEngine:"obtains-page-from-engine",pagesBoxChange:"pages-box-changed",pagesBoxChanged:"pages-box-changed",pagesLabelChange:"pages-label-change",pagesLabelChanged:"pages-label-change",pagesLabelNeedUpdate:"pages-label-need-change",pagesLabelNeedUpdated:"pages-label-need-change",pagesReplace:"pages-replace",pagesReplaced:"pages-replace",recognitionForm:"recognition-form",removeEmbeddedPageThumbnail:"remove-embedded-page-thumbnail",embeddedPageThumbnailRemoved:"remove-embedded-page-thumbnail",objectStartEdit:"object-start-edit",objectEndEdit:"object-end-edit",objectSelectionChanged:"object-selection-changed",objectAdded:"object-added",objectPropertyChanged:"object-property-changed",objectContentChanged:"object-content-changed",paragraphContentChanged:"paragraph-text-changed",paragraphTextOnActivate:"paragraph-text-on-activate",paragraphTextOnDeactivate:"paragraph-text-on-deactivate",paragraphTextEnterEdit:"paragraph-text-enter-edit",paragraphTextExitEdit:"paragraph-text-exit-edit",paragraphTextOnChar:"paragraph-text-on-char",findSuccess:"find-success",replaceSuccess:"replace-success",replaceAllSuccess:"replace-all-success",articleThreadAdded:"article-thread-added",articleThreadUpdated:"article-thread-updated",articleThreadRemoved:"article-thread-removed",articleBeadAdded:"article-bead-added",articleBeadRemoved:"article-bead-removed",articleBeadUpdated:"article-bead-updated",articleEnterReadMode:"article-enter-read-mode",articleOutReadMode:"article-out-read-mode",invalidRect:"invalidRect",xfaContentChanged:"xfa-content-changed",formReloaded:"formReloaded",formFieldImported:"form-field-imported",pagingSealUpdated:"paging-seal-updated",xfaFormImported:"xfa-form-imported",xfaFormReset:"xfa-form-reset",xfaFormRemoved:"xfa-form-removed",textSplited:"text-splited",formFieldPropertyUpdated:"form-field-property-updated",formFieldRenamed:"form-field-renamed",formFieldRemoved:"form-field-removed",formReset:"form-reset",formImported:"form-imported",tabOrderTypeUpdated:"tab-order-type-updated",pageAdditionalActionAdded:"page-additional-action-added",pageAdditionalActionUpdated:"page-additional-action-updated",pageAdditionalActionRemoved:"page-additional-action-removed",docAdditionalActionAdded:"doc-additional-action-added",docAdditionalActionUpdated:"doc-additional-action-updated",docAdditionalActionRemoved:"doc-additional-action-removed",docOpenActionUpdated:"doc-open-action-updated",docOpenActionRemoved:"doc-open-action-removed",formWidgetCreated:"form-widget-created",pdfDocCreated:"pdf-doc-created"};var me=function(){function e(t,n,r){d(this,e),z(this,"xfaWidget",void 0),z(this,"pdfViewer",void 0),z(this,"doc",void 0),z(this,"verifiedResult",void 0),z(this,"isXfaField",void 0),z(this,"isXFAField",void 0),z(this,"isFormField",void 0),this.xfaWidget=t,this.pdfViewer=n,this.doc=r,this.isXFAField=!0,this.isFormField=!1,this.isXfaField=!0}return l(e,[{key:"getName",value:function(){return this.xfaWidget.fieldName}},{key:"isSigned",value:function(){return Promise.resolve(this.xfaWidget.isSigned)}},{key:"getByteRange",value:function(){return Promise.resolve(this.xfaWidget.byteRange)}},{key:"getFilter",value:function(){return Promise.resolve(this.xfaWidget.filter)}},{key:"getSubfilter",value:function(){return Promise.resolve(this.xfaWidget.subfilter)}},{key:"getSigner",value:function(){return Promise.resolve(this.xfaWidget.signer)}},{key:"getFullName",value:function(){return this.xfaWidget.fullName}},{key:"getIndex",value:function(){return this.xfaWidget.index}},{key:"getWidget",value:function(){return this.xfaWidget}},{key:"getSignInfo",value:function(){if(!this.isSigned())return Promise.resolve({isSigned:!1,isXFA:!0});var e=this.xfaWidget,t=e.filter,n=e.subfilter,r=e.flag,i=e.signer,o=e.location,a=e.reason,s=e.distinguishName,c=e.textValue,d=e.fieldName,u=e.signTime,l=e.contact,f=e.rect,p=e.isSigned;return Promise.resolve({isXFA:!0,isSigned:p,filter:t,subfilter:n,rect:f,flag:r,signer:i,reason:a,email:l,distinguishName:s,location:o,textValue:c,fieldName:d,signTime:u})}},{key:"verify",value:function(){return t(function(){var e,n,r;return y(this,function(i){return(e=this.doc).isDestroyed?[2,0]:(n=this.pdfViewer.getSignatureService(),r=n.verifyHandler,[2,e.verifySignature(this,function(e,n,i,o){return t(function(){var t;return y(this,function(a){switch(a.label){case 0:return[4,r(e,n,i,o)];case 1:return t=1024&(t=a.sent())?4:8,o&&(t|=4&t?134217728:268435456),[2,t]}})})()})])})}).call(this)}}]),e}(),ye=b.vendors,be=ye.saveAs,xe=ye.jQuery,we=b.internals,Se=(we.SignVerifiedComponent,we.SignVerifiedComponentForOnline,function(){function e(n,r,i){var o=this;d(this,e),z(this,"pdfUI",void 0),z(this,"pdfDoc",void 0),z(this,"addon",void 0),z(this,"workflow",void 0),z(this,"displayCaretInterval",void 0),z(this,"showCaret",!0),z(this,"input",void 0),z(this,"currFocus",void 0),z(this,"throttleExecutor",void 0),z(this,"notifyContentChanged",void 0),z(this,"nIndexs",[]),z(this,"verifySignatureMap",void 0),z(this,"pressPoint",void 0),this.pdfUI=n,this.pdfDoc=r,this.addon=i,this.notifyContentChanged=!1,this.throttleExecutor=new Q.ThrottleAsyncTaskExecutor(100,!0),this.workflow=function(e){o[e.type]&&o[e.type](e.msg)},r.api.registerWorkflow("xfa",this.workflow),this.input=new ge(this.pdfUI,this.pdfDoc,this);var a,s=function(){var e=n.i18n.t("xfa:gsdkStrings",{returnObjects:!0});r.api.setXFAString({path:"jr"},e)};s(),n.eventEmitter.on("languageChangeFinished",s),this.pdfUI.addDestroyHook(this.pdfUI.addViewerEventListener((z(a={},H,function(e){o.pressPoint=e}),z(a,q,function(e){e.isSigned?o.Verify(e):o.Sign(e)}),z(a,$,function(e){return t(function(){var t,n,r,i;return y(this,function(o){switch(o.label){case 0:return n=this.getWigetInfo(e.xfaWidget,e.pageIndex),(r=null===(t=this.pdfUI.signatureFlowHandler)||void 0===t?void 0:t.verify)?[4,r(n)]:[3,2];case 1:return o.sent(),(i=this.pdfUI.signatureFlowHandler&&this.pdfUI.signatureFlowHandler.showSignatureProperty)?i(n):this.showSignatureProperties(n),[3,3];case 2:this.showSignatureProperties(n),o.label=3;case 3:return[2]}})}).call(o)}),a)))}return l(e,[{key:"DisplayCaret",value:function(e){return t(function(){var t,n,r,i,o,a,s,c,d;return y(this,function(u){switch(u.label){case 0:return t=this,n=e.pageIndex,r=e.isVisible,i=e.rect,[4,this.pdfUI.getPDFPageRender(n)];case 1:return o=u.sent(),a=o.$handler[0],(s=a.getElementsByClassName("fv__ui-xfa-caret")[0])||(a.insertAdjacentHTML("beforeend","<div class='fv__ui-xfa-caret'></div>"),s=a.getElementsByClassName("fv__ui-xfa-caret")[0]),r?[4,re(i,o)]:[3,3];case 2:return c=u.sent(),d=a.getBoundingClientRect(),s.style.cssText="\n                display: unset;\n                left: ".concat(c.left/d.width*100,"%;\n                top: ").concat(c.top/d.height*100,"%;\n                width: ").concat((c.right-c.left)/d.width*100,"%;\n                height: ").concat((c.bottom-c.top)/d.height*100,"%;\n            "),this.input.focus(n),this.displayCaretInterval?[2]:(this.displayCaretInterval=window.setInterval(function(){t.showCaret?s.style.cssText+=s.style.cssText.replace("display: unset;","display: none;"):s.style.cssText+=s.style.cssText.replace("display: none;","display: unset;"),t.showCaret=!t.showCaret},500),[3,4]);case 3:s.style.cssText="",this.input.blur(),clearInterval(this.displayCaretInterval),this.displayCaretInterval=0,u.label=4;case 4:return[2]}})}).call(this)}},{key:"InvalidateRect",value:function(e){return t(function(){var n,r;return y(this,function(i){return n=this,r=e.pageIndex,e.rect,e.flag,this.nIndexs.includes(r)||this.nIndexs.push(r),this.throttleExecutor.exec(function(){return t(function(){var e;return y(this,function(n){switch(n.label){case 0:return e=this,[4,this.pdfUI.getPDFViewer()];case 1:return n.sent().redraw(1,0),this.notifyContentChanged&&(this.nIndexs.forEach(function(n){return t(function(){return y(this,function(e){return this.pdfDoc.engine.eventEmitter.emit(ve.xfaContentChanged,n),[2]})}).call(e)}),this.notifyContentChanged=!1,this.nIndexs=[]),[2]}})}).call(n)}),[2]})}).call(this)}},{key:"SetFocus",value:function(e){var t=e.pageIndex,n=e.xfaWidget,r=e.bRelayout;this.currFocus=n,this.input.setValue(""),!r&&n&&this.goToPage({pageIndex:t,left:n.rect.left,top:n.rect.top,right:n.rect.right,bottom:n.rect.bottom})}},{key:"Sign",value:function(e){return t(function(){var t,n,r,i,o,a,s,c,d,u,l,f,p;return y(this,function(h){switch(h.label){case 0:return t=this,n=e.pageIndex,(r=e.xfaWidget)?(i=this,[4,(o=this.pdfUI).getPDFViewer()]):[3,5];case 1:if(a=h.sent(),s=new me(r,a,a.getCurrentPDFDoc()),c=r.fieldName,d=r.index,u=o.getSignatureWorkflowService(),l=u.signingWorkflowHandler,u.getSigningSettingsList().length<1&&!l)throw new Error("No signature sign Handler");return l?(f=this.getWigetInfo(r,n),p=new me(f,a,a.getCurrentPDFDoc()),[2,l(p,u.getSigningSettingsList()).then(function(e){return t.signDocument(G(Y({},e),{hashAlgorithm:0,pageIndex:n,fieldName:c,widgetIndex:d}),void 0,t.pdfUI)})]):[4,o.getViewerUI()];case 2:return[4,h.sent().getSignatureUI()];case 3:return[4,h.sent().getSignDocumentDialog()];case 4:h.sent().openWith(s,function(e,t){for(var r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];var s={image:o[0].showTagImage};i.signDocument(G(Y({},e),{pageIndex:n,widgetIndex:d,sign:t}),s,i.pdfUI)}),h.label=5;case 5:return[2]}})}).call(this)}},{key:"Verify",value:function(e){return t(function(){var t,n,r,i,o,a,s;return y(this,function(c){switch(c.label){case 0:return t=e.xfaWidget,n=e.pageIndex,r=this.getWigetInfo(t,n),i=this.pdfUI,t?(a=null===(o=i.signatureFlowHandler)||void 0===o?void 0:o.verify)?[4,a(r)]:[3,2]:[3,3];case 1:return c.sent(),(s=this.pdfUI.signatureFlowHandler&&this.pdfUI.signatureFlowHandler.showVerificationInfo)&&s(r),[3,3];case 2:this.showVerifiedResultDialog(r),c.label=3;case 3:return[2]}})}).call(this)}},{key:"getWigetInfo",value:function(e,t){var n=e.filter,r=e.subfilter,i=e.rect,o=e.apFlag,a=e.signer,s=e.reason,c=e.contact,d=e.image,u=e.DN,l=e.text,f=e.fieldName,p=e.signTime,h=e.location;return{isSigned:e.isSigned,byteRange:e.byteRange,index:e.index,fullName:e.fullName,filter:n,subfilter:r,rect:i,pageIndex:t,flag:o,signer:a,reason:s,contact:c,image:d,distinguishName:u,location:h,textValue:l,fieldName:f,signTime:p,email:c}}},{key:"verifySignature",value:function(e){return t(function(){var t,n,r,i,o,a;return y(this,function(s){switch(s.label){case 0:return t=this,[4,this.pdfUI.getPDFViewer()];case 1:return n=s.sent(),r=new me(e,n,n.getCurrentPDFDoc()),i="".concat(r.getFullName(),"_").concat(r.getIndex()),o=this.verifySignatureMap&&this.verifySignatureMap.has(i)?this.verifySignatureMap.get(i):null,a=Promise.resolve(o),o||(a=r.verify()),[2,a.then(function(e){return t.verifySignatureMap||(t.verifySignatureMap=new Map),t.verifySignatureMap.set(i,e),r.verifiedResult=e,r})]}})}).call(this)}},{key:"showVerifiedResultDialog",value:function(e){return t(function(){var t,n,r,i,o;return y(this,function(a){switch(a.label){case 0:return[4,this.pdfUI.getPDFViewer()];case 1:return t=a.sent(),[3,3];case 2:return r=a.sent(),n.openWith(r,r.verifiedResult),[3,6];case 3:return[4,t.viewerUI.getSignatureUI()];case 4:return[4,a.sent().getSignVerifiedResultDialog()];case 5:i=a.sent(),o=new me(e,t,t.getCurrentPDFDoc()),i.openWith(o),a.label=6;case 6:return[2]}})}).call(this)}},{key:"showSignatureProperties",value:function(e){return t(function(){var t,n;return y(this,function(r){switch(r.label){case 0:return[4,this.pdfUI.getPDFViewer()];case 1:return t=r.sent(),n=new me(e,t,this.pdfDoc),this.pdfUI.showSignedPropertyDialog(n),[2]}})}).call(this)}},{key:"signDocument",value:function(e,t,n){if(e){var r="";n.getCurrentPDFDoc().then(function(n){(r=n.getFileName()||"").length<1&&(r="untitled.pdf");var i=JSON.parse(JSON.stringify(e));return n.sign(i,e.sign,t)}).then(function(e){var t=n.customs,i=t.autoDownloadAfterSign,o=t.getSignedDocument;return(void 0===i||i)&&be(new Blob([e],{type:"application/octet-stream"}),r.replace(".pdf","_signed.pdf")),"function"==typeof o&&o(e),n.openPDFByFile(e,{fileName:r})})}}},{key:"ShowMemu",value:function(e){return t(function(){var t,n;return y(this,function(r){switch(r.label){case 0:return t=this.pdfUI,e.xfaWidget?[4,this.getSignatureContextmenu(e)]:[3,2];case 1:return(n=r.sent())?[3,4]:[2];case 2:return[4,t.getComponentByName("fv--page-contextmenu")];case 3:n=r.sent(),r.label=4;case 4:return[2,this.pressPoint&&n.showAt(this.pressPoint.x,this.pressPoint.y)]}})}).call(this)}},{key:"getSignatureContextmenu",value:function(e){return t(function(){var t,n,r;return y(this,function(i){switch(i.label){case 0:return t=this.pdfUI,n=e.xfaWidget,[4,t.getComponentByName("fv--xfa-signature-contextmenu")];case 1:return(r=i.sent())?(r.setCurrentTarget(n),r.info=e,this.handleSignatureContextMenu(r),[2,r]):[2,null]}})}).call(this)}},{key:"handleSignatureContextMenu",value:function(e){var t=e.$container.$children;e.info.isSigned?t.forEach(function(e){return xe(e.element).show()}):t.forEach(function(e){var t=xe(e.element);"fv--xfa-signature-contextmenu-sign"==t.attr("name")?t.show():t.hide()})}},{key:"goToPage",value:function(e){return t(function(){var t,n,r,i,o,a,s,c,d,u,l,f,p,h,g,v,m,b,x,w,S,C;return y(this,function(y){switch(y.label){case 0:return t=e.pageIndex,n=e.left,r=e.top,i=e.right,o=e.bottom,[4,this.pdfUI.getPDFPageRender(t)];case 1:return(a=y.sent())?(s=a.pdfViewer,c=function(e,t){var n=e.left>t.left?e.left:t.left,r=e.right<t.right?e.right:t.right,i=e.bottom<t.bottom?e.bottom:t.bottom,o=e.top>t.top?e.top:t.top;if(!(n>=r||i<=o))return{left:n,right:r,bottom:i,top:o}},d=function(e){var t,n;e.left>e.right&&(t=[e.right,e.left],e.left=t[0],e.right=t[1]);e.top<e.bottom&&(n=[e.bottom,e.top],e.top=n[0],e.bottom=n[1])},u=function(e){var t,n;e.left>e.right&&(t=[e.right,e.left],e.left=t[0],e.right=t[1]);e.top>e.bottom&&(n=[e.bottom,e.top],e.top=n[0],e.bottom=n[1])},d(l={left:n,top:r,right:i,bottom:o}),[4,re(l,a)]):[2];case 2:return f=y.sent(),u(f),p=Math.abs(f.right-f.left),h=Math.abs(f.bottom-f.top),g=a.$ui[0].getBoundingClientRect(),v=f.left+g.left,m=f.top+g.top,b={left:v,top:m,right:v+p,bottom:m+h},x=s.$ui[0].parentElement.getBoundingClientRect(),w={left:x.left,top:x.top,right:x.right,bottom:x.bottom},S=c(w,b),C=s.getPDFDocRender().getCurrentPageIndex(),!S&&C===t||S&&S.left===b.left&&S.top===b.top&&S.right===b.right&&S.bottom===b.bottom?[2]:(s.goToPage(t,f.top,f.left,!1),[2])}})}).call(this)}},{key:"SetChangeMark",value:function(){this.notifyContentChanged=!0,this.pdfDoc.setDocModified()}},{key:"Print",value:function(e){}},{key:"SubmitData",value:function(e){var t=e.target,n=e.format,r=(e.textEncoding,e.content);if(!!t&&["mailto:","ftp","file://"].some(function(e){return t.startsWith(e)})){var i=this.pdfUI.i18n.t("ui_:dialog.actionDialog.selectAction.submit"),o=this.pdfUI.i18n.t("alert.browserRestriction-actionTriggered-websdk");this.pdfUI.alert({message:'"'.concat(i,'" ').concat(o),level:"warning"})}else{var a;switch(n){case _:case M:case V:case W:case L:a=r}var s=new XMLHttpRequest;s.open("GET",t),s.send(a),s.onloadend=function(){}}}},{key:"PageViewEvent",value:function(e){return t(function(){var t,n,r;return y(this,function(i){return t=e.pageIndex,n=e.pageViewEventType,r=e.pageJson,n===B?this.pdfDoc.insertXfaPage(r):n===X&&this.pdfDoc.removeXfaPage(t),[2]})}).call(this)}},{key:"WidgetEvent",value:function(e){return t(function(){return y(this,function(e){return[2]})})()}},{key:"destroy",value:function(){this.pdfDoc.api.unregisterWorkflow("xfa",this.workflow),this.input.destroy(),this.verifySignatureMap&&this.verifySignatureMap.clear(),this.verifySignatureMap=null}}]),e}()),Ce=w.module("xfa",[]);function Ie(e,t,r){return Ie="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(r||e):o.value}},Ie(e,t,r||e)}var ke=a(399),De=function(e){function t(){var e;return d(this,t),z(e=o(this,t,arguments),"pdfUI",void 0),e}return p(t,e),l(t,[{key:"mounted",value:function(){var e=this;Ie(n(t.prototype),"mounted",this).call(this),this.component.parent.on(ke.COMPONENT_EVENTS.SHOWN,function(){var t=e.component.parent;e.component[t.info.isSigned?"hide":"show"]()})}},{key:"handle",value:function(){var e=this.component.parent;this.pdfUI.eventEmitter.emit(q,e.info)}}],[{key:"getName",value:function(){return"SignController"}}]),t}(ke.Controller);Ce.registerController(De);var Ee=function(e){function t(){var e;return d(this,t),z(e=o(this,t,arguments),"pdfUI",void 0),e}return p(t,e),l(t,[{key:"mounted",value:function(){var e=this;Ie(n(t.prototype),"mounted",this).call(this),this.component.parent.on(ke.COMPONENT_EVENTS.SHOWN,function(){var t=e.component.parent;e.component[t.info.isSigned?"show":"hide"]()})}},{key:"handle",value:function(){var e=this.component.parent;this.pdfUI.eventEmitter.emit(q,e.info)}}],[{key:"getName",value:function(){return"VerifyController"}}]),t}(ke.Controller);Ce.registerController(Ee);var Pe=function(e){function t(){var e;return d(this,t),z(e=o(this,t,arguments),"pdfUI",void 0),e}return p(t,e),l(t,[{key:"handle",value:function(){var e=this.component.parent;this.pdfUI.eventEmitter.emit($,e.info)}}],[{key:"getName",value:function(){return"ShowPropertiesController"}}]),t}(ke.Controller);Ce.registerController(Pe);var Ae=a(594),Fe=a.n(Ae);Ce.registerPreConfiguredComponent("contextmenu",{template:Fe()()});var Te=UIExtension.PDFViewCtrl.Consts.PDFDocPermission,Oe=function(e){function n(){var e;return d(this,n),(e=o(this,n)).pdfUI=null,e.pdfDoc=null,e.provider=null,e.destroyHooks=[],e.pageEvents={},e.mousemoveTimer=null,e.isCheckOnly=!1,e}return p(n,e),l(n,[{key:"init",value:function(e){var n=this;this.pdfUI=e,e.getPDFDocRender().then(function(r){return t(function(){var t,n,i,o;return y(this,function(a){switch(a.label){case 0:return r?(t=r.doc,this.pdfDoc=t,t.isDynamicXFA()?(n=this,[4,this.isCheckOnlyDoc()]):[3,2]):[2];case 1:for(n.isCheckOnly=a.sent(),this.provider=new Se(e,t,this),i=0;i<t.getPageCount();i++)(o=r.getPDFPageRender(i)).isRendered&&this.initPageEvent(o);a.label=2;case 2:return[2]}})}).call(n)}),this.destroyHooks.push(this.pdfUI.addViewerEventListener([S.openFileSuccess],function(r){return t(function(){var t;return y(this,function(n){switch(n.label){case 0:return this.pdfDoc=r,r.isDynamicXFA()?(t=this,[4,this.isCheckOnlyDoc()]):[2];case 1:return t.isCheckOnly=n.sent(),this.provider=new Se(e,r,this),[2]}})}).call(n)}),this.pdfUI.addViewerEventListener([S.willCloseDocument],function(){var e;(null===(e=n.pdfDoc)||void 0===e?void 0:e.isDynamicXFA())&&(Object.entries(n.pageEvents).forEach(function(e){var t=v(e,2);t[0];t[1].destroy()}),n.pageEvents={},n.cleanMousemoveTimer(),n.provider.destroy(),n.provider=null,n.pdfDoc=null)}),this.pdfUI.addViewerEventListener([S.renderPageSuccess],function(e){return t(function(){var t;return y(this,function(n){switch(n.label){case 0:return this.pdfDoc||(this.pdfDoc=e.doc),this.pdfDoc.isDynamicXFA()?(t=this.pageEvents[e.index])?t.handlerDom===e.$handler[0]?[3,2]:(t.destroy(),delete this.pageEvents[e.index],[4,this.initPageEvent(e)]):[3,3]:[2];case 1:n.sent(),n.label=2;case 2:return[3,5];case 3:return[4,this.initPageEvent(e)];case 4:n.sent(),n.label=5;case 5:return[2]}})}).call(n)}))}},{key:"initPageEvent",value:function(e){return t(function(){var n,r,i,o,a,s,c,d,u,l;return y(this,function(f){switch(f.label){case 0:return n=this,r=e.$handler[0],i=!1,(o=new C.Manager(r)).add(new C.Tap({event:"singletap"})),o.add(new C.Pan({threshold:1,pointers:1})),o.on("hammer.input",function(o){return t(function(){var t,n,a,s;return y(this,function(d){switch(d.label){case 0:return t=this,n=o.srcEvent.type,e.page?"pointerdown"!=n&&"pointerup"!=n?[3,5]:(a="pointerdown"==n?"OnLButtonDown":"OnLButtonUp",Q.isTouchDevice?o.eventType!==C.INPUT_START?[3,2]:[4,c(o.srcEvent)]:[3,3]):[2];case 1:return d.sent(),i=!1,[3,3];case 2:if(i)return[2];d.label=3;case 3:return[4,ie(oe(o.srcEvent,r),e)];case 4:return s=d.sent(),this.pdfDoc.api.triggerXFAWidgetEvent(this.pdfDoc.id,e.index,{type:a,point:s,flags:ae(o.srcEvent),permission:this.docPermission}),"pointerup"==n&&(this.pdfUI.eventEmitter.emit("can-scroll",!0),Q.isIOS&&(this.provider.input.focus(e.index),setTimeout(function(){t.provider.currFocus||t.provider.input.blur()},10))),[3,6];case 5:o.eventType===C.INPUT_MOVE&&o.srcEvent.target.getAttribute("class").includes("fv__ui-xfa")&&this.pdfUI.eventEmitter.emit("can-scroll",!1),d.label=6;case 6:return[2]}})}).call(n)}),o.on("panend",function(t){Q.isMobile||Q.isTablet||n.provider.currFocus&&n.provider.input.focus(e.index)}),a=function(o){return t(function(){var t,n;return y(this,function(a){switch(a.label){case 0:return o.preventDefault(),o.stopPropagation(),i=!0,[4,ie(oe(o,r),e)];case 1:return t=a.sent(),n={x:o.clientX,y:o.clientY},this.pdfUI.eventEmitter.emit(H,n),[4,this.pdfDoc.api.triggerXFAWidgetEvent(this.pdfDoc.id,e.index,{type:"Contextmenu",point:t,flags:ae(o),permission:this.docPermission})];case 2:return a.sent(),!Q.isTouchDevice&&this.provider.currFocus?[2,this.provider.input.focus(e.index)]:[2]}})}).call(n)},this.destroyHooks.push(this.pdfUI.addViewerEventListener([S.pressPage],function(e){Q.isTouchDevice&&(e.srcEvent.preventDefault(),e.srcEvent.stopPropagation(),a(e.srcEvent))})),s=function(e){e.touches&&e.touches.length>1||(e.preventDefault(),e.stopPropagation())},r.addEventListener("contextmenu",a),r.addEventListener("touchstart",s),c=function(i,o){return t(function(){var t,n,a,s,c,d,u;return y(this,function(l){switch(l.label){case 0:return t=this,clearTimeout(this.toolTipTimeout),this.hideTooltip(r),[4,ie(oe(i,r),e)];case 1:return n=l.sent(),[4,this.pdfDoc.api.triggerXFAWidgetEvent(this.pdfDoc.id,e.index,{type:"OnMouseMove",point:n,flags:ae(i),permission:this.docPermission})];case 2:if(a=l.sent(),s="",a){if(c=a.hitTestArea,a.pageIndex,d=a.xfaWidget,u=a.isAccessOpen,s="default",c===O||o){if(this.pdfUI.eventEmitter.emit("can-scroll",!1),!this.isCheckOnly&&u)switch(d.type){case P:case A:case T:s="text";break;case D:case E:s="pointer"}d.type===F&&(s="pointer")}else this.pdfUI.eventEmitter.emit("can-scroll",!0);d.toolTip&&(this.toolTipTimeout=setTimeout(function(){t.showTooltip(i,d,r)},1e3))}return r.style.cursor=s,[2]}})}).call(n)},r.addEventListener("mousemove",function(e){n.cleanMousemoveTimer(),n.mousemoveTimer=setTimeout(function(){var t;n.cleanMousemoveTimer(),c(e,null===(t=n.provider)||void 0===t?void 0:t.currFocus)},10)}),d=function(){n.hideTooltip(r)},[4,this.pdfUI.getScrollWrap()];case 1:return u=f.sent(),(l=u.getScrollHost()).addEventListener("scroll",d),this.pageEvents[e.index]={handlerDom:r,destroy:function(){o.destroy(),r.removeEventListener("mousemove",c),r.removeEventListener("contextmenu",a),r.removeEventListener("touchstart",s),m(r.querySelectorAll('[class^="fv__ui-xfa-"]')).forEach(function(e){r.removeChild(e)}),l.removeEventListener("scroll",d)}},[2]}})}).call(this)}},{key:"checkPermission",value:function(){return t(function(){return y(this,function(e){switch(e.label){case 0:return[4,this.pdfUI.getPDFDocRender()];case 1:return[2,e.sent().getUserPermission().getValue()]}})}).call(this)}},{key:"isCheckOnlyDoc",value:function(){return t(function(){var e;return y(this,function(t){switch(t.label){case 0:return[4,this.checkPermission()];case 1:return e=t.sent(),this.docPermission=e,[2,!(e&Te.AnnotForm||e&Te.FillForm)]}})}).call(this)}},{key:"cleanMousemoveTimer",value:function(){this.mousemoveTimer&&(clearTimeout(this.mousemoveTimer),this.mousemoveTimer=null)}},{key:"showTooltip",value:function(e,t,n){var r=n.getElementsByClassName("fv__ui-xfa-tooltip")[0];r||(n.insertAdjacentHTML("beforeend","<div class='fv__ui-xfa-tooltip'></div>"),r=n.getElementsByClassName("fv__ui-xfa-tooltip")[0]),r.style.cssText="\n            display: unset;\n            left: ".concat(e.offsetX,"px;\n            top: ").concat(e.offsetY,"px;\n        "),r.innerText=t.toolTip}},{key:"hideTooltip",value:function(e){var t=e.getElementsByClassName("fv__ui-xfa-tooltip")[0];t&&(t.style.display="none")}},{key:"destroy",value:function(){this.destroyHooks.forEach(function(e){"function"==typeof e&&e()})}}],[{key:"getName",value:function(){return"xfa"}},{key:"getLoader",value:function(){return J()}}]),n}(x)})(),s=s.default})());