!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("UIExtension"),require("UIExtension").PDFViewCtrl):"function"==typeof define&&define.amd?define(["UIExtension",["UIExtension","PDFViewCtrl"]],t):"object"==typeof exports?exports.HContinuousViewModeAddon=t(require("UIExtension"),require("UIExtension").PDFViewCtrl):e.HContinuousViewModeAddon=t(e.UIExtension,e.UIExtension.PDFViewCtrl)}(self,(e,t)=>(()=>{var n={469:e=>{e.exports=null},616:t=>{"use strict";t.exports=e},290:e=>{"use strict";e.exports=t}},o={};function r(e){var t=o[e];if(void 0!==t)return t.exports;var i=o[e]={exports:{}};return n[e](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var i={};return(()=>{"use strict";function e(t){return e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e(t)}function t(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(t=function(){return!!e})()}function n(e,t){return!t||"object"!=((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t;var n}function o(o,r,i){return r=e(r),n(o,t()?Reflect.construct(r,i||[],e(o).constructor):r.apply(o,i))}function a(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):a(e,t)}function u(e,t){if(!a(e,t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(t,n,o){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,n,o){var r=function(t,n){for(;!Object.prototype.hasOwnProperty.call(t,n)&&null!==(t=e(t)););return t}(t,n);if(r){var i=Object.getOwnPropertyDescriptor(r,n);return i.get?i.get.call(o||t):i.value}},c(t,n,o||t)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}r.d(i,{default:()=>x});var g=r(616),h=r(469),p=r.n(h),v=r(290),m=function(e){function t(){return u(this,t),o(this,t,arguments)}return f(t,e),t}(v.viewMode.UsualViewModeShortcutHandler),w=v.ViewerEvents,b=v.vendors.jQuery,y=v.commons.debounce,P=function(t){function n(e){var t;return u(this,n),(t=o(this,n,[e])).diffHCache=null,t.pdfViewer=e.pdfViewer,t._rotateCallback=t._rotateCallback.bind(t),t.scrollCurrentPageIntoView_debounced=y(function(){t.scrollCurrentPageIntoView()},20),t}return f(n,t),l(n,[{key:"getJQItems",value:function(){return b(c(e(n.prototype),"getItems",this).call(this))}},{key:"into",value:function(t,o){var r=this;c(e(n.prototype),"into",this).call(this,t,o),this.pdfViewer.element.classList.add("fv__h-continuous-view-mode-layout");var i=this.constructor.getName(),a=["<style>","."+i+"{","white-space:nowrap;","height:100%;","display: flex;","align-items: center","}","."+i+":before{",'content:"";',"display:inline-block;","height:100%;","vertical-align: middle;","}","."+i+" .fv__pdf-view-mode-item{","margin-left:10px;","display:inline-block;","vertical-align: middle;","align-self: stretch;","display: flex;","align-items: center;","}","."+i+" .fv__pdf-view-mode-item .fv__pdf-page-not-rendered{","width: 50vw;","}","."+i+" .fv__pdf-page-layout.fv__rendering{","min-width:128px;","}","."+i+" .fv__pdf-view-mode-item:first-child{","margin-left:10px;","}","</style>"].join("");this.$style=b(a),this.docRender.$container.after(this.$style),this.docRender.$container.addClass(i),this.docRender.$ui.parents(".fv__ui-pdfviewer").css({"overflow-y":"unset","overflow-x":"scroll"}),this.pdfViewer.eventEmitter.on(w.pageRotationChange,this.rotateCallback=function(e,t,n){var o=r.pdfViewer.getPDFPageRender(e.getIndex());r._rotateCallback(o,t)}),this.pdfViewer.eventEmitter.on(w.pagesRotated,this.rotatePagesCallback=function(e,t,n){e.forEach(function(e,t){r.rotateCallback(e,newRotation,oldRotations[t])})});var u=this.docRender.viewerRender.scrollWrap;this._unwatchScrollEvent=u.addScrollEventListener(function(){clearTimeout(r.scrollEventTimer);var e=r.getCurrentPageIndex();r.scrollEventTimer=setTimeout(function(){var t=r.docRender.pagesRender;t&&t.renderVisiblePages().then(function(){var t=r.getCurrentPageIndex();t!==e&&r.docRender.setCurrentPageIndex(t)},function(){})},30)}),this.onPageNumberChange=function(){r.scrollCurrentPageIntoView_debounced()},this.unobservePageNumberChangeEvent=this.pdfViewer.addEventListener(w.pageNumberChange,this.onPageNumberChange)}},{key:"renderViewMode",value:function(e,t,n,o,r){}},{key:"jumpToPage",value:function(e,t){var n=t.x,o=void 0===n?0:n,r=t.y,i=void 0===r?0:r,a=this.getJQItems();e>=a.length?e=a.length-1:e<0&&(e=0);var u=a[e],s=u.offsetLeft+o,l=u.firstElementChild.offsetTop+i;this.docRender.viewerRender.scrollWrap.scrollTo(s,l),this.docRender.viewerRender.scrollWrap.disabled||this.scrollCurrentPageIntoView_debounced()}},{key:"_rotateCallback",value:function(e,t){var n=e.getShowWidth(),o=e.getShowHeight();this.getJQItems().eq(e.index);if(t%2!=0){var r=n;n=o,o=r}this.docRender.pagesRender.$ui.height()}},{key:"getCurrentPageIndex",value:function(){var e,t=this.getJQItems(),n=this.docRender.viewerRender.scrollWrap.getScrollHost();e=n===window?{x:0,y:0,right:window.innerWidth,height:window.innerHeight}:n.getBoundingClientRect();for(var o=0,r=0,i=0,a=0;a<t.length;a++){var u=t[a].getBoundingClientRect(),s=C(e,u);if(s&&0==i&&(i=1),s>o&&(o=s,r=a),!s&&1==i){i=2;break}}return r}},{key:"getFitHeight",value:function(e){var t=this.docRender.viewerRender.scrollWrap;return t.getHeight()-t.getScrollOffsetTop()}},{key:"getFitWidth",value:function(e){return this.docRender.viewerRender.scrollWrap.getScrollHost().clientWidth}},{key:"getNextPageIndex",value:function(){var e=this.docRender.doc.getPageCount(),t=this.getCurrentPageIndex();return t<e-1&&t++,t}},{key:"getPrevPageIndex",value:function(){var e=this.getCurrentPageIndex();return e>0&&e--,e}},{key:"out",value:function(){this.pdfViewer.element.classList.remove("fv__h-continuous-view-mode-layout"),this._unwatchScrollEvent&&this._unwatchScrollEvent(),this.docRender.$container.removeClass(this.constructor.getName()),this.docRender.$ui.parents(".fv__ui-pdfviewer").css({"overflow-x":"","overflow-y":""}),this.pdfViewer.eventEmitter.off(w.pageRotationChange,this.rotateCallback),this.pdfViewer.eventEmitter.off(w.pagesRotated,this.rotatePagesCallback),this.docRender.pagesRender.$ui.css({paddingTop:"",paddingBottom:""}),this.unobservePageNumberChangeEvent(),this.$style&&this.$style.remove();for(var e=this.getJQItems(),t=0;t<e.length;t++)e.eq(t).css({paddingTop:"",paddingBottom:"",marginTop:"",marginBottom:"",paddingLeft:"",paddingRight:"",marginLeft:"",marginRight:""})}},{key:"generateShortcutEventHandler",value:function(){return new m(this)}},{key:"scrollCurrentPageIntoView",value:function(){if(this.docRender){var e=this.docRender.getCurrentPageIndex(),t=this.docRender.getPDFPageRender(e);t&&!t.pageAreaIsVisible&&t.$ui.get(0).scrollIntoViewIfNeeded(!0)}}}],[{key:"getName",value:function(){return"h-continuous-view-mode"}}]),n}(v.IViewMode),C=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Math.max(e.left,t.left),r=Math[n?"min":"max"](e.top,t.top),i=Math[n?"max":"min"](e.bottom,t.bottom),a=Math.min(e.right,t.right);if(o<=a)if(n){if(r>=i)return(a-o)*(r-i)}else if(r<=i)return(a-o)*(i-r);return 0},R=g.shared.replaceRibbonButton2XButton,V=(g.Controller,g.PDFViewCtrl.Events),x=function(t){function n(){return u(this,n),o(this,n,arguments)}return f(n,t),l(n,[{key:"init",value:function(t,o){c(e(n.prototype),"init",this).call(this,t,o),o.getViewModeManager().register(P)}}],[{key:"getName",value:function(){return"h-continuous"}},{key:"getLoader",value:function(){return p()}},{key:"initOnLoad",value:function(){var t=g.modular.module("h-continuous",[]);t.registerController(function(t){function n(e){return u(this,n),o(this,n,[e,P.getName()])}return f(n,t),l(n,[{key:"mounted",value:function(){var t=this,o=this.getPDFUI(),r=o.addViewerEventListener(V.openFileSuccess,function(e){var n=e.getPageCount();t.getPDFUI().getPDFViewerRender().then(function(e){var r=e.getViewMode().getName();n<2||t.portfolioService.isDocumentClosed()||o.pdfViewer.currentPDFDoc.isPortfolio()&&"cover"!==t.portfolioLayoutService.getLayoutMode()?t.component.disable():(t.component.enable(),r===t.viewModeName&&t.component.active())})});this.addDestroyHook(r),this.addDestroyHook(o.addViewerEventListener(V.pageAdded,function(){o.getPDFViewerRender().then(function(e){e.pdfDocRender.getPDFDoc().getPageCount()<2?t.component.disable():t.component.enable()})})),this.addDestroyHook(o.addViewerEventListener(V.insertPages,function(){o.getPDFViewerRender().then(function(e){e.pdfDocRender.getPDFDoc().getPageCount()<2?t.component.disable():t.component.enable()})})),this.addDestroyHook(o.addViewerEventListener(V.pageRemoved,function(){o.getPDFViewerRender().then(function(e){e.pdfDocRender.getPDFDoc().getPageCount()<2?t.component.disable():t.component.enable()})})),this.addDestroyHook(o.addViewerEventListener(V.pagesRemoved,function(){o.getPDFViewerRender().then(function(e){e.pdfDocRender.getPDFDoc().getPageCount()<2?t.component.disable():t.component.enable()})})),c(e(n.prototype),"mounted",this).call(this)}}],[{key:"getName",value:function(){return"HContinuousViewModeController"}}]),n}(g.controllers.ViewModeController));var n={template:'\n            <ribbon-button small="true" @tooltip tooltip-title="h-continuous:buttons.title" @controller="h-continuous:HContinuousViewModeController" name="h-continuous-button" icon-class="fv__icon-toolbar-h-continuous-page" @aria:label="h-continuous:buttons.title">h-continuous:buttons.title</ribbon-button>\n            '};t.registerPreConfiguredComponent("h-continuous-ribbon-button",n),t.registerPreConfiguredComponent("h-continuous-button",Object.assign({},n,{template:R(n.template)}))}}]),n}(g.UIXAddon)})(),i=i.default})());