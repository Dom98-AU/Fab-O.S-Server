!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(self,()=>(()=>{var __webpack_modules__={7484:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",i="second",a="minute",o="hour",s="day",c="week",u="month",l="quarter",d="year",h="date",f="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},m=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},_={s:m,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+m(r,2,"0")+":"+m(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,u),a=n-i<0,o=t.clone().add(r+(a?-1:1),u);return+(-(r+(n-i)/(a?i-o:o-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:d,w:c,d:s,D:h,h:o,m:a,s:i,ms:r,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",S={};S[y]=v;var b="$isDayjsObject",I=function(e){return e instanceof E||!(!e||!e[b])},A=function e(t,n,r){var i;if(!t)return y;if("string"==typeof t){var a=t.toLowerCase();S[a]&&(i=a),n&&(S[a]=n,i=a);var o=t.split("-");if(!i&&o.length>1)return e(o[0])}else{var s=t.name;S[s]=t,i=s}return!r&&i&&(y=i),i||!r&&y},P=function(e,t){if(I(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new E(n)},D=_;D.l=A,D.i=I,D.w=function(e,t){return P(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var E=function(){function v(e){this.$L=A(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[b]=!0}var m=v.prototype;return m.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(D.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(g);if(r){var i=r[2]-1||0,a=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(t)}(e),this.init()},m.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},m.$utils=function(){return D},m.isValid=function(){return!(this.$d.toString()===f)},m.isSame=function(e,t){var n=P(e);return this.startOf(t)<=n&&n<=this.endOf(t)},m.isAfter=function(e,t){return P(e)<this.startOf(t)},m.isBefore=function(e,t){return this.endOf(t)<P(e)},m.$g=function(e,t,n){return D.u(e)?this[t]:this.set(n,e)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(e,t){var n=this,r=!!D.u(t)||t,l=D.p(e),f=function(e,t){var i=D.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?i:i.endOf(s)},g=function(e,t){return D.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},p=this.$W,v=this.$M,m=this.$D,_="set"+(this.$u?"UTC":"");switch(l){case d:return r?f(1,0):f(31,11);case u:return r?f(1,v):f(0,v+1);case c:var y=this.$locale().weekStart||0,S=(p<y?p+7:p)-y;return f(r?m-S:m+(6-S),v);case s:case h:return g(_+"Hours",0);case o:return g(_+"Minutes",1);case a:return g(_+"Seconds",2);case i:return g(_+"Milliseconds",3);default:return this.clone()}},m.endOf=function(e){return this.startOf(e,!1)},m.$set=function(e,t){var n,c=D.p(e),l="set"+(this.$u?"UTC":""),f=(n={},n[s]=l+"Date",n[h]=l+"Date",n[u]=l+"Month",n[d]=l+"FullYear",n[o]=l+"Hours",n[a]=l+"Minutes",n[i]=l+"Seconds",n[r]=l+"Milliseconds",n)[c],g=c===s?this.$D+(t-this.$W):t;if(c===u||c===d){var p=this.clone().set(h,1);p.$d[f](g),p.init(),this.$d=p.set(h,Math.min(this.$D,p.daysInMonth())).$d}else f&&this.$d[f](g);return this.init(),this},m.set=function(e,t){return this.clone().$set(e,t)},m.get=function(e){return this[D.p(e)]()},m.add=function(r,l){var h,f=this;r=Number(r);var g=D.p(l),p=function(e){var t=P(f);return D.w(t.date(t.date()+Math.round(e*r)),f)};if(g===u)return this.set(u,this.$M+r);if(g===d)return this.set(d,this.$y+r);if(g===s)return p(1);if(g===c)return p(7);var v=(h={},h[a]=t,h[o]=n,h[i]=e,h)[g]||1,m=this.$d.getTime()+r*v;return D.w(m,this)},m.subtract=function(e,t){return this.add(-1*e,t)},m.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=D.z(this),a=this.$H,o=this.$m,s=this.$M,c=n.weekdays,u=n.months,l=n.meridiem,d=function(e,n,i,a){return e&&(e[n]||e(t,r))||i[n].slice(0,a)},h=function(e){return D.s(a%12||12,e,"0")},g=l||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(p,function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return D.s(t.$y,4,"0");case"M":return s+1;case"MM":return D.s(s+1,2,"0");case"MMM":return d(n.monthsShort,s,u,3);case"MMMM":return d(u,s);case"D":return t.$D;case"DD":return D.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(n.weekdaysMin,t.$W,c,2);case"ddd":return d(n.weekdaysShort,t.$W,c,3);case"dddd":return c[t.$W];case"H":return String(a);case"HH":return D.s(a,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return g(a,o,!0);case"A":return g(a,o,!1);case"m":return String(o);case"mm":return D.s(o,2,"0");case"s":return String(t.$s);case"ss":return D.s(t.$s,2,"0");case"SSS":return D.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")})},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,h,f){var g,p=this,v=D.p(h),m=P(r),_=(m.utcOffset()-this.utcOffset())*t,y=this-m,S=function(){return D.m(p,m)};switch(v){case d:g=S()/12;break;case u:g=S();break;case l:g=S()/3;break;case c:g=(y-_)/6048e5;break;case s:g=(y-_)/864e5;break;case o:g=y/n;break;case a:g=y/t;break;case i:g=y/e;break;default:g=y}return f?g:D.a(g)},m.daysInMonth=function(){return this.endOf(u).$D},m.$locale=function(){return S[this.$L]},m.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=A(e,t,!0);return r&&(n.$L=r),n},m.clone=function(){return D.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},v}(),C=E.prototype;return P.prototype=C,[["$ms",r],["$s",i],["$m",a],["$H",o],["$W",s],["$M",u],["$y",d],["$D",h]].forEach(function(e){C[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),P.extend=function(e,t){return e.$i||(e(t,E,P),e.$i=!0),P},P.locale=A,P.isDayjs=I,P.unix=function(e){return P(1e3*e)},P.en=S[y],P.Ls=S,P.p={},P}()},5733:(e,t,n)=>{
/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/
e.exports=function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){if(a)return a(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[o]={exports:{}};t[o][0].call(u.exports,function(e){return i(t[o][1][e]||e)},u,u.exports,e,t,n,r)}return n[o].exports}for(var a=void 0,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,i,o,s,c,u,l=[],d=0,h=e.length,f=h,g="string"!==r.getTypeOf(e);d<e.length;)f=h-d,i=g?(t=e[d++],n=d<h?e[d++]:0,d<h?e[d++]:0):(t=e.charCodeAt(d++),n=d<h?e.charCodeAt(d++):0,d<h?e.charCodeAt(d++):0),o=t>>2,s=(3&t)<<4|n>>4,c=1<f?(15&n)<<2|i>>6:64,u=2<f?63&i:64,l.push(a.charAt(o)+a.charAt(s)+a.charAt(c)+a.charAt(u));return l.join("")},n.decode=function(e){var t,n,r,o,s,c,u=0,l=0,d="data:";if(e.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var h,f=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===a.charAt(64)&&f--,e.charAt(e.length-2)===a.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(h=i.uint8array?new Uint8Array(0|f):new Array(0|f);u<e.length;)t=a.indexOf(e.charAt(u++))<<2|(o=a.indexOf(e.charAt(u++)))>>4,n=(15&o)<<4|(s=a.indexOf(e.charAt(u++)))>>2,r=(3&s)<<6|(c=a.indexOf(e.charAt(u++))),h[l++]=t,64!==s&&(h[l++]=n),64!==c&&(h[l++]=r);return h}},{"./support":30,"./utils":32}],2:[function(e,t,n){"use strict";var r=e("./external"),i=e("./stream/DataWorker"),a=e("./stream/Crc32Probe"),o=e("./stream/DataLengthProbe");function s(e,t,n,r,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=i}s.prototype={getContentWorker:function(){var e=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),t=this;return e.on("end",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(e,t,n){return e.pipe(new a).pipe(new o("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new o("compressedSize")).withStreamInfo("compression",t)},t.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){"use strict";var r=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){"use strict";var r=e("./utils"),i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n,r){var a=i,o=r+n;e^=-1;for(var s=r;s<o;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}(0|t,e,e.length,0):function(e,t,n,r){var a=i,o=r+n;e^=-1;for(var s=r;s<o;s++)e=e>>>8^a[255&(e^t.charCodeAt(s))];return-1^e}(0|t,e,e.length,0):0}},{"./utils":32}],5:[function(e,t,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){"use strict";var r=null;r="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:r}},{lie:37}],7:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),a=e("./utils"),o=e("./stream/GenericWorker"),s=r?"uint8array":"array";function c(e,t){o.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",a.inherits(c,o),c.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(a.transformTo(s,e.data),!1)},c.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(e){return new c("Deflate",e)},n.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){"use strict";function r(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r}function i(e,t,n,i,o,l){var d,h,f=e.file,g=e.compression,p=l!==s.utf8encode,v=a.transformTo("string",l(f.name)),m=a.transformTo("string",s.utf8encode(f.name)),_=f.comment,y=a.transformTo("string",l(_)),S=a.transformTo("string",s.utf8encode(_)),b=m.length!==f.name.length,I=S.length!==_.length,A="",P="",D="",E=f.dir,C=f.date,w={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(w.crc32=e.crc32,w.compressedSize=e.compressedSize,w.uncompressedSize=e.uncompressedSize);var k=0;t&&(k|=8),p||!b&&!I||(k|=2048);var T=0,F=0;E&&(T|=16),"UNIX"===o?(F=798,T|=function(e,t){var n=e;return e||(n=t?16893:33204),(65535&n)<<16}(f.unixPermissions,E)):(F=20,T|=function(e){return 63&(e||0)}(f.dosPermissions)),d=C.getUTCHours(),d<<=6,d|=C.getUTCMinutes(),d<<=5,d|=C.getUTCSeconds()/2,h=C.getUTCFullYear()-1980,h<<=4,h|=C.getUTCMonth()+1,h<<=5,h|=C.getUTCDate(),b&&(P=r(1,1)+r(c(v),4)+m,A+="up"+r(P.length,2)+P),I&&(D=r(1,1)+r(c(y),4)+S,A+="uc"+r(D.length,2)+D);var G="";return G+="\n\0",G+=r(k,2),G+=g.magic,G+=r(d,2),G+=r(h,2),G+=r(w.crc32,4),G+=r(w.compressedSize,4),G+=r(w.uncompressedSize,4),G+=r(v.length,2),G+=r(A.length,2),{fileRecord:u.LOCAL_FILE_HEADER+G+v+A,dirRecord:u.CENTRAL_FILE_HEADER+r(F,2)+G+r(y.length,2)+"\0\0\0\0"+r(T,4)+r(i,4)+v+A+y}}var a=e("../utils"),o=e("../stream/GenericWorker"),s=e("../utf8"),c=e("../crc32"),u=e("../signature");function l(e,t,n,r){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(l,o),l.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,o.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},l.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=i(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},l.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=i(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:function(e){return u.DATA_DESCRIPTOR+r(e.crc32,4)+r(e.compressedSize,4)+r(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},l.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=this.bytesWritten-e,i=function(e,t,n,i,o){var s=a.transformTo("string",o(i));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(e,2)+r(e,2)+r(t,4)+r(n,4)+r(s.length,2)+s}(this.dirRecords.length,n,e,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},l.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on("error",function(e){t.error(e)}),this},l.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},l.prototype.error=function(e){var t=this._sources;if(!o.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},l.prototype.lock=function(){o.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=l},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){"use strict";var r=e("../compressions"),i=e("./ZipFileWorker");n.generateWorker=function(e,t,n){var a=new i(t.streamFiles,n,t.platform,t.encodeFileName),o=0;try{e.forEach(function(e,n){o++;var i=function(e,t){var n=e||t,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,t.compression),s=n.options.compressionOptions||t.compressionOptions||{},c=n.dir,u=n.date;n._compressWorker(i,s).withStreamInfo("file",{name:e,dir:c,date:u,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(a)}),a.entriesCount=o}catch(e){a.error(e)}return a}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.1",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./external"),a=e("./utf8"),o=e("./zipEntries"),s=e("./stream/Crc32Probe"),c=e("./nodejsUtils");function u(e){return new i.Promise(function(t,n){var r=e.decompressed.getContentWorker().pipe(new s);r.on("error",function(e){n(e)}).on("end",function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()}).resume()})}t.exports=function(e,t){var n=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),c.isNode&&c.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then(function(e){var n=new o(t);return n.load(e),n}).then(function(e){var n=[i.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var a=0;a<r.length;a++)n.push(u(r[a]));return i.Promise.all(n)}).then(function(e){for(var i=e.shift(),a=i.files,o=0;o<a.length;o++){var s=a[o],c=s.fileNameStr,u=r.resolve(s.fileNameStr);n.file(u,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:t.createFolders}),s.dir||(n.file(u).unsafeOriginalName=c)}return i.zipComment.length&&(n.comment=i.zipComment),n})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../stream/GenericWorker");function a(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(a,i),a.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",function(e){t.push({data:e,meta:{percent:0}})}).on("error",function(e){t.isPaused?this.generatedError=e:t.error(e)}).on("end",function(){t.isPaused?t._upstreamEnded=!0:t.end()})},a.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){"use strict";var r=e("readable-stream").Readable;function i(e,t,n){r.call(this,t),this._helper=e;var i=this;e.on("data",function(e,t){i.push(e)||i._helper.pause(),n&&n(t)}).on("error",function(e){i.emit("error",e)}).on("end",function(){i.push(null)})}e("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,t,n){"use strict";t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,n){"use strict";function r(e,t,n){var r,i=a.getTypeOf(t),s=a.extend(n||{},c);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(e=p(e)),s.createFolders&&(r=g(e))&&v.call(this,r,!0);var d="string"===i&&!1===s.binary&&!1===s.base64;n&&void 0!==n.binary||(s.binary=!d),(t instanceof u&&0===t.uncompressedSize||s.dir||!t||0===t.length)&&(s.base64=!1,s.binary=!0,t="",s.compression="STORE",i="string");var m=null;m=t instanceof u||t instanceof o?t:h.isNode&&h.isStream(t)?new f(e,t):a.prepareContent(e,t,s.binary,s.optimizedBinaryString,s.base64);var _=new l(e,m,s);this.files[e]=_}var i=e("./utf8"),a=e("./utils"),o=e("./stream/GenericWorker"),s=e("./stream/StreamHelper"),c=e("./defaults"),u=e("./compressedObject"),l=e("./zipObject"),d=e("./generate"),h=e("./nodejsUtils"),f=e("./nodejs/NodejsStreamInputAdapter"),g=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},p=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},v=function(e,t){return t=void 0!==t?t:c.createFolders,e=p(e),this.files[e]||r.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function m(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var _={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r)},filter:function(e){var t=[];return this.forEach(function(n,r){e(n,r)&&t.push(r)}),t},file:function(e,t,n){if(1!==arguments.length)return e=this.root+e,r.call(this,e,t,n),this;if(m(e)){var i=e;return this.filter(function(e,t){return!t.dir&&i.test(e)})}var a=this.files[this.root+e];return a&&!a.dir?a:null},folder:function(e){if(!e)return this;if(m(e))return this.filter(function(t,n){return n.dir&&e.test(t)});var t=this.root+e,n=v.call(this,t),r=this.clone();return r.root=n.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter(function(t,n){return n.name.slice(0,e.length)===e}),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=a.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");a.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";t=d.generateWorker(this,n,r)}catch(e){(t=new o("error")).error(e)}return new s(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=_},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){"use strict";t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),a=this.length-4;0<=a;--a)if(this.data[a]===t&&this.data[a+1]===n&&this.data[a+2]===r&&this.data[a+3]===i)return a-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),a=this.readData(4);return t===a[0]&&n===a[1]&&r===a[2]&&i===a[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){"use strict";var r=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,n){"use strict";var r=e("./Uint8ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){"use strict";var r=e("./ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../support"),a=e("./ArrayReader"),o=e("./StringReader"),s=e("./NodeBufferReader"),c=e("./Uint8ArrayReader");t.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new s(e):i.uint8array?new c(r.transformTo("uint8array",e)):new a(r.transformTo("array",e)):new o(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../utils");function a(e){r.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(a,r),a.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../crc32");function a(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(a,r),a.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function a(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(a,i),a.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},t.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function a(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()},function(e){t.error(e)})}r.inherits(a,i),a.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.end()}),e.on("error",function(e){t.error(e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=r},{}],29:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./ConvertWorker"),a=e("./GenericWorker"),o=e("../base64"),s=e("../support"),c=e("../external"),u=null;if(s.nodestream)try{u=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function l(e,t){return new c.Promise(function(n,i){var a=[],s=e._internalType,c=e._outputType,u=e._mimeType;e.on("data",function(e,n){a.push(e),t&&t(n)}).on("error",function(e){a=[],i(e)}).on("end",function(){try{var e=function(e,t,n){switch(e){case"blob":return r.newBlob(r.transformTo("arraybuffer",t),n);case"base64":return o.encode(t);default:return r.transformTo(e,t)}}(c,function(e,t){var n,r=0,i=null,a=0;for(n=0;n<t.length;n++)a+=t[n].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(i=new Uint8Array(a),n=0;n<t.length;n++)i.set(t[n],r),r+=t[n].length;return i;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(s,a),u);n(e)}catch(e){i(e)}a=[]}).resume()})}function d(e,t,n){var o=t;switch(t){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=t,this._mimeType=n,r.checkSupport(o),this._worker=e.pipe(new i(o)),e.lock()}catch(e){this._worker=new a("error"),this._worker.error(e)}}d.prototype={accumulate:function(e){return l(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,function(e){t.call(n,e.data,e.meta)}):this._worker.on(e,function(){r.delay(t,arguments,n)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(r.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof Buffer,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=0===new Blob([r],{type:"application/zip"}).size}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),n.blob=0===i.getBlob("application/zip").size}catch(e){n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch(e){n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){"use strict";for(var r=e("./utils"),i=e("./support"),a=e("./nodejsUtils"),o=e("./stream/GenericWorker"),s=new Array(256),c=0;c<256;c++)s[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(){o.call(this,"utf-8 decode"),this.leftOver=null}function l(){o.call(this,"utf-8 encode")}s[254]=s[254]=1,n.utf8encode=function(e){return i.nodebuffer?a.newBufferFrom(e,"utf-8"):function(e){var t,n,r,a,o,s=e.length,c=0;for(a=0;a<s;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),c+=n<128?1:n<2048?2:n<65536?3:4;for(t=i.uint8array?new Uint8Array(c):new Array(c),a=o=0;o<c;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),n<128?t[o++]=n:(n<2048?t[o++]=192|n>>>6:(n<65536?t[o++]=224|n>>>12:(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63),t[o++]=128|n>>>6&63),t[o++]=128|63&n);return t}(e)},n.utf8decode=function(e){return i.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,i,a,o=e.length,c=new Array(2*o);for(t=n=0;t<o;)if((i=e[t++])<128)c[n++]=i;else if(4<(a=s[i]))c[n++]=65533,t+=a-1;else{for(i&=2===a?31:3===a?15:7;1<a&&t<o;)i=i<<6|63&e[t++],a--;1<a?c[n++]=65533:i<65536?c[n++]=i:(i-=65536,c[n++]=55296|i>>10&1023,c[n++]=56320|1023&i)}return c.length!==n&&(c.subarray?c=c.subarray(0,n):c.length=n),r.applyFromCharCode(c)}(e=r.transformTo(i.uint8array?"uint8array":"array",e))},r.inherits(u,o),u.prototype.processChunk=function(e){var t=r.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var a=t;(t=new Uint8Array(a.length+this.leftOver.length)).set(this.leftOver,0),t.set(a,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var o=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}(t),c=t;o!==t.length&&(i.uint8array?(c=t.subarray(0,o),this.leftOver=t.subarray(o,t.length)):(c=t.slice(0,o),this.leftOver=t.slice(o,t.length))),this.push({data:n.utf8decode(c),meta:e.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=u,r.inherits(l,o),l.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=l},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){"use strict";var r=e("./support"),i=e("./base64"),a=e("./nodejsUtils"),o=e("./external");function s(e){return e}function c(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}e("setimmediate"),n.newBlob=function(e,t){n.checkSupport("blob");try{return new Blob([e],{type:t})}catch(n){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(e,t,n){var r=[],i=0,a=e.length;if(a<=n)return String.fromCharCode.apply(null,e);for(;i<a;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+n,a)))):r.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+n,a)))),i+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,a.allocBuffer(1)).length}catch(e){return!1}}()}};function l(e){var t=65536,r=n.getTypeOf(e),i=!0;if("uint8array"===r?i=u.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=u.applyCanBeUsed.nodebuffer),i)for(;1<t;)try{return u.stringifyByChunk(e,r,t)}catch(e){t=Math.floor(t/2)}return u.stringifyByChar(e)}function d(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}n.applyFromCharCode=l;var h={};h.string={string:s,array:function(e){return c(e,new Array(e.length))},arraybuffer:function(e){return h.string.uint8array(e).buffer},uint8array:function(e){return c(e,new Uint8Array(e.length))},nodebuffer:function(e){return c(e,a.allocBuffer(e.length))}},h.array={string:l,array:s,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a.newBufferFrom(e)}},h.arraybuffer={string:function(e){return l(new Uint8Array(e))},array:function(e){return d(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:s,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a.newBufferFrom(new Uint8Array(e))}},h.uint8array={string:l,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:s,nodebuffer:function(e){return a.newBufferFrom(e)}},h.nodebuffer={string:l,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return h.nodebuffer.uint8array(e).buffer},uint8array:function(e){return d(e,new Uint8Array(e.length))},nodebuffer:s},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var r=n.getTypeOf(t);return h[r][e](t)},n.resolve=function(e){for(var t=e.split("/"),n=[],r=0;r<t.length;r++){var i=t[r];"."===i||""===i&&0!==r&&r!==t.length-1||(".."===i?n.pop():n.push(i))}return n.join("/")},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&a.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},n.delay=function(e,t,n){setImmediate(function(){e.apply(n||null,t||[])})},n.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},n.prepareContent=function(e,t,a,s,u){return o.Promise.resolve(t).then(function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new o.Promise(function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)}):e}).then(function(t){var l=n.getTypeOf(t);return l?("arraybuffer"===l?t=n.transformTo("uint8array",t):"string"===l&&(u?t=i.decode(t):a&&!0!==s&&(t=function(e){return c(e,r.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):o.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),a=e("./signature"),o=e("./zipEntry"),s=e("./support");function c(e){this.files=[],this.loadOptions=e}c.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=s.uint8array?"uint8array":"array",n=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(e=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(0<r)this.isSignature(t,a.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),a=e("./compressedObject"),o=e("./crc32"),s=e("./utf8"),c=e("./compressions"),u=e("./support");function l(e,t){this.options=e,this.loadOptions=t}l.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in c)if(Object.prototype.hasOwnProperty.call(c,t)&&c[t].magic===e)return c[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r};e.setIndex(i)},handleUTF8:function(){var e=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var a=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(a)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)||o(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)||o(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null}},t.exports=l},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){"use strict";function r(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var i=e("./stream/StreamHelper"),a=e("./stream/DataWorker"),o=e("./utf8"),s=e("./compressedObject"),c=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var a=!this._dataBinary;a&&!r&&(t=t.pipe(new o.Utf8EncodeWorker)),!a&&r&&(t=t.pipe(new o.Utf8DecodeWorker))}catch(e){(t=new c("error")).error(e)}return new i(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof s&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new o.Utf8EncodeWorker)),s.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof c?this._data:new a(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<u.length;d++)r.prototype[u[d]]=l;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,r){(function(e){"use strict";var n,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var a=0,o=new i(l),s=e.document.createTextNode("");o.observe(s,{characterData:!0}),n=function(){s.data=a=++a%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var c=new e.MessageChannel;c.port1.onmessage=l,n=function(){c.port2.postMessage(0)}}var u=[];function l(){var e,t;r=!0;for(var n=u.length;n;){for(t=u,u=[],e=-1;++e<n;)t[e]();n=u.length}r=!1}t.exports=function(e){1!==u.push(e)||r||n()}}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){"use strict";var r=e("immediate");function i(){}var a={},o=["REJECTED"],s=["FULFILLED"],c=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==i&&f(this,e)}function l(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r(function(){var r;try{r=t(n)}catch(r){return a.reject(e,r)}r===e?a.reject(e,new TypeError("Cannot resolve promise with itself")):a.resolve(e,r)})}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var n=!1;function r(t){n||(n=!0,a.reject(e,t))}function i(t){n||(n=!0,a.resolve(e,t))}var o=g(function(){t(i,r)});"error"===o.status&&r(o.value)}function g(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=u).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})},u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===o)return this;var n=new this.constructor(i);return this.state!==c?d(n,this.state===s?e:t,this.outcome):this.queue.push(new l(n,e,t)),n},l.prototype.callFulfilled=function(e){a.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){a.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},a.resolve=function(e,t){var n=g(h,t);if("error"===n.status)return a.reject(e,n.value);var r=n.value;if(r)f(e,r);else{e.state=s,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},a.reject=function(e,t){e.state=o,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},u.resolve=function(e){return e instanceof this?e:a.resolve(new this(i),e)},u.reject=function(e){var t=new this(i);return a.reject(t,e)},u.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var o=new Array(n),s=0,c=-1,u=new this(i);++c<n;)l(e[c],c);return u;function l(e,i){t.resolve(e).then(function(e){o[i]=e,++s!==n||r||(r=!0,a.resolve(u,o))},function(e){r||(r=!0,a.reject(u,e))})}},u.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var o,s=-1,c=new this(i);++s<n;)o=e[s],t.resolve(o).then(function(e){r||(r=!0,a.resolve(c,e))},function(e){r||(r=!0,a.reject(c,e))});return c}},{immediate:36}],38:[function(e,t,n){"use strict";var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){"use strict";var r=e("./zlib/deflate"),i=e("./utils/common"),a=e("./utils/strings"),o=e("./zlib/messages"),s=e("./zlib/zstream"),c=Object.prototype.toString,u=0,l=-1,d=0,h=8;function f(e){if(!(this instanceof f))return new f(e);this.options=i.assign({level:l,method:h,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==u)throw new Error(o[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var g;if(g="string"==typeof t.dictionary?a.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=r.deflateSetDictionary(this.strm,g))!==u)throw new Error(o[n]);this._dict_set=!0}}function g(e,t){var n=new f(t);if(n.push(e,!0),n.err)throw n.msg||o[n.err];return n.result}f.prototype.push=function(e,t){var n,o,s=this.strm,l=this.options.chunkSize;if(this.ended)return!1;o=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=a.string2buf(e):"[object ArrayBuffer]"===c.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(l),s.next_out=0,s.avail_out=l),1!==(n=r.deflate(s,o))&&n!==u)return this.onEnd(n),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(a.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((0<s.avail_in||0===s.avail_out)&&1!==n);return 4===o?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===u):2!==o||(this.onEnd(u),!(s.avail_out=0))},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===u&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=f,n.deflate=g,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,g(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,g(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){"use strict";var r=e("./zlib/inflate"),i=e("./utils/common"),a=e("./utils/strings"),o=e("./zlib/constants"),s=e("./zlib/messages"),c=e("./zlib/zstream"),u=e("./zlib/gzheader"),l=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==o.Z_OK)throw new Error(s[n]);this.header=new u,r.inflateGetHeader(this.strm,this.header)}function h(e,t){var n=new d(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}d.prototype.push=function(e,t){var n,s,c,u,d,h,f=this.strm,g=this.options.chunkSize,p=this.options.dictionary,v=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof e?f.input=a.binstring2buf(e):"[object ArrayBuffer]"===l.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new i.Buf8(g),f.next_out=0,f.avail_out=g),(n=r.inflate(f,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&p&&(h="string"==typeof p?a.string2buf(p):"[object ArrayBuffer]"===l.call(p)?new Uint8Array(p):p,n=r.inflateSetDictionary(this.strm,h)),n===o.Z_BUF_ERROR&&!0===v&&(n=o.Z_OK,v=!1),n!==o.Z_STREAM_END&&n!==o.Z_OK)return this.onEnd(n),!(this.ended=!0);f.next_out&&(0!==f.avail_out&&n!==o.Z_STREAM_END&&(0!==f.avail_in||s!==o.Z_FINISH&&s!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(c=a.utf8border(f.output,f.next_out),u=f.next_out-c,d=a.buf2string(f.output,c),f.next_out=u,f.avail_out=g-u,u&&i.arraySet(f.output,f.output,c,u,0),this.onData(d)):this.onData(i.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(v=!0)}while((0<f.avail_in||0===f.avail_out)&&n!==o.Z_STREAM_END);return n===o.Z_STREAM_END&&(s=o.Z_FINISH),s===o.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===o.Z_OK):s!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(f.avail_out=0))},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=d,n.inflate=h,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},n.ungzip=h},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){var t,n,r,i,a,o;for(t=r=0,n=e.length;t<n;t++)r+=e[t].length;for(o=new Uint8Array(r),t=i=0,n=e.length;t<n;t++)a=e[t],o.set(a,i),i+=a.length;return o}},a={arraySet:function(e,t,n,r,i){for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,a))},n.setTyped(r)},{}],42:[function(e,t,n){"use strict";var r=e("./common"),i=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var o=new r.Buf8(256),s=0;s<256;s++)o[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function c(e,t){if(t<65537&&(e.subarray&&a||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",o=0;o<t;o++)n+=String.fromCharCode(e[o]);return n}o[254]=o[254]=1,n.string2buf=function(e){var t,n,i,a,o,s=e.length,c=0;for(a=0;a<s;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),c+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(c),a=o=0;o<c;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),n<128?t[o++]=n:(n<2048?t[o++]=192|n>>>6:(n<65536?t[o++]=224|n>>>12:(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63),t[o++]=128|n>>>6&63),t[o++]=128|63&n);return t},n.buf2binstring=function(e){return c(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,i,a,s=t||e.length,u=new Array(2*s);for(n=r=0;n<s;)if((i=e[n++])<128)u[r++]=i;else if(4<(a=o[i]))u[r++]=65533,n+=a-1;else{for(i&=2===a?31:3===a?15:7;1<a&&n<s;)i=i<<6|63&e[n++],a--;1<a?u[r++]=65533:i<65536?u[r++]=i:(i-=65536,u[r++]=55296|i>>10&1023,u[r++]=56320|1023&i)}return c(u,r)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+o[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){for(var i=65535&e,a=e>>>16&65535,o=0;0!==n;){for(n-=o=2e3<n?2e3:n;a=a+(i=i+t[r++]|0)|0,--o;);i%=65521,a%=65521}return i|a<<16}},{}],44:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,i){var a=r,o=i+n;e^=-1;for(var s=i;s<o;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}},{}],46:[function(e,t,n){"use strict";var r,i=e("../utils/common"),a=e("./trees"),o=e("./adler32"),s=e("./crc32"),c=e("./messages"),u=0,l=4,d=0,h=-2,f=-1,g=4,p=2,v=8,m=9,_=286,y=30,S=19,b=2*_+1,I=15,A=3,P=258,D=P+A+1,E=42,C=113,w=1,k=2,T=3,F=4;function G(e,t){return e.msg=c[t],t}function R(e){return(e<<1)-(4<e?9:0)}function x(e){for(var t=e.length;0<=--t;)e[t]=0}function O(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function M(e,t){a._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,O(e.strm)}function N(e,t){e.pending_buf[e.pending++]=t}function B(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function L(e,t){var n,r,i=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-D?e.strstart-(e.w_size-D):0,u=e.window,l=e.w_mask,d=e.prev,h=e.strstart+P,f=u[a+o-1],g=u[a+o];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(u[(n=t)+o]===g&&u[n+o-1]===f&&u[n]===u[a]&&u[++n]===u[a+1]){a+=2,n++;do{}while(u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&a<h);if(r=P-(h-a),a=h-P,o<r){if(e.match_start=t,s<=(o=r))break;f=u[a+o-1],g=u[a+o]}}}while((t=d[t&l])>c&&0!=--i);return o<=e.lookahead?o:e.lookahead}function j(e){var t,n,r,a,c,u,l,d,h,f,g=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=g+(g-D)){for(i.arraySet(e.window,e.window,g,g,0),e.match_start-=g,e.strstart-=g,e.block_start-=g,t=n=e.hash_size;r=e.head[--t],e.head[t]=g<=r?r-g:0,--n;);for(t=n=g;r=e.prev[--t],e.prev[t]=g<=r?r-g:0,--n;);a+=g}if(0===e.strm.avail_in)break;if(u=e.strm,l=e.window,d=e.strstart+e.lookahead,f=void 0,(h=a)<(f=u.avail_in)&&(f=h),n=0===f?0:(u.avail_in-=f,i.arraySet(l,u.input,u.next_in,f,d),1===u.state.wrap?u.adler=o(u.adler,l,f,d):2===u.state.wrap&&(u.adler=s(u.adler,l,f,d)),u.next_in+=f,u.total_in+=f,f),e.lookahead+=n,e.lookahead+e.insert>=A)for(c=e.strstart-e.insert,e.ins_h=e.window[c],e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+A-1])&e.hash_mask,e.prev[c&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=c,c++,e.insert--,!(e.lookahead+e.insert<A)););}while(e.lookahead<D&&0!==e.strm.avail_in)}function U(e,t){for(var n,r;;){if(e.lookahead<D){if(j(e),e.lookahead<D&&t===u)return w;if(0===e.lookahead)break}if(n=0,e.lookahead>=A&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+A-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-D&&(e.match_length=L(e,n)),e.match_length>=A)if(r=a._tr_tally(e,e.strstart-e.match_start,e.match_length-A),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=A){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+A-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(M(e,!1),0===e.strm.avail_out))return w}return e.insert=e.strstart<A-1?e.strstart:A-1,t===l?(M(e,!0),0===e.strm.avail_out?T:F):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?w:k}function W(e,t){for(var n,r,i;;){if(e.lookahead<D){if(j(e),e.lookahead<D&&t===u)return w;if(0===e.lookahead)break}if(n=0,e.lookahead>=A&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+A-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=A-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-D&&(e.match_length=L(e,n),e.match_length<=5&&(1===e.strategy||e.match_length===A&&4096<e.strstart-e.match_start)&&(e.match_length=A-1)),e.prev_length>=A&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-A,r=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-A),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+A-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=A-1,e.strstart++,r&&(M(e,!1),0===e.strm.avail_out))return w}else if(e.match_available){if((r=a._tr_tally(e,0,e.window[e.strstart-1]))&&M(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return w}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<A-1?e.strstart:A-1,t===l?(M(e,!0),0===e.strm.avail_out?T:F):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?w:k}function H(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function K(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*b),this.dyn_dtree=new i.Buf16(2*(2*y+1)),this.bl_tree=new i.Buf16(2*(2*S+1)),x(this.dyn_ltree),x(this.dyn_dtree),x(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(I+1),this.heap=new i.Buf16(2*_+1),x(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*_+1),x(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function z(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=p,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?E:C,e.adler=2===t.wrap?0:1,t.last_flush=u,a._tr_init(t),d):G(e,h)}function V(e){var t=z(e);return t===d&&function(e){e.window_size=2*e.w_size,x(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=A-1,e.match_available=0,e.ins_h=0}(e.state),t}function J(e,t,n,r,a,o){if(!e)return h;var s=1;if(t===f&&(t=6),r<0?(s=0,r=-r):15<r&&(s=2,r-=16),a<1||m<a||n!==v||r<8||15<r||t<0||9<t||o<0||g<o)return G(e,h);8===r&&(r=9);var c=new K;return(e.state=c).strm=e,c.wrap=s,c.gzhead=null,c.w_bits=r,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=a+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+A-1)/A),c.window=new i.Buf8(2*c.w_size),c.head=new i.Buf16(c.hash_size),c.prev=new i.Buf16(c.w_size),c.lit_bufsize=1<<a+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new i.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=o,c.method=n,V(e)}r=[new H(0,0,0,0,function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(j(e),0===e.lookahead&&t===u)return w;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,M(e,!1),0===e.strm.avail_out))return w;if(e.strstart-e.block_start>=e.w_size-D&&(M(e,!1),0===e.strm.avail_out))return w}return e.insert=0,t===l?(M(e,!0),0===e.strm.avail_out?T:F):(e.strstart>e.block_start&&(M(e,!1),e.strm.avail_out),w)}),new H(4,4,8,4,U),new H(4,5,16,8,U),new H(4,6,32,32,U),new H(4,4,16,16,W),new H(8,16,32,32,W),new H(8,16,128,128,W),new H(8,32,128,256,W),new H(32,128,258,1024,W),new H(32,258,258,4096,W)],n.deflateInit=function(e,t){return J(e,t,v,15,8,0)},n.deflateInit2=J,n.deflateReset=V,n.deflateResetKeep=z,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?h:(e.state.gzhead=t,d):h},n.deflate=function(e,t){var n,i,o,c;if(!e||!e.state||5<t||t<0)return e?G(e,h):h;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&t!==l)return G(e,0===e.avail_out?-5:h);if(i.strm=e,n=i.last_flush,i.last_flush=t,i.status===E)if(2===i.wrap)e.adler=0,N(i,31),N(i,139),N(i,8),i.gzhead?(N(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),N(i,255&i.gzhead.time),N(i,i.gzhead.time>>8&255),N(i,i.gzhead.time>>16&255),N(i,i.gzhead.time>>24&255),N(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),N(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(N(i,255&i.gzhead.extra.length),N(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=s(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(N(i,0),N(i,0),N(i,0),N(i,0),N(i,0),N(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),N(i,3),i.status=C);else{var f=v+(i.w_bits-8<<4)<<8;f|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(f|=32),f+=31-f%31,i.status=C,B(i,f),0!==i.strstart&&(B(i,e.adler>>>16),B(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),O(e),o=i.pending,i.pending!==i.pending_buf_size));)N(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),O(e),o=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,N(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),0===c&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),O(e),o=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,N(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),0===c&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&O(e),i.pending+2<=i.pending_buf_size&&(N(i,255&e.adler),N(i,e.adler>>8&255),e.adler=0,i.status=C)):i.status=C),0!==i.pending){if(O(e),0===e.avail_out)return i.last_flush=-1,d}else if(0===e.avail_in&&R(t)<=R(n)&&t!==l)return G(e,-5);if(666===i.status&&0!==e.avail_in)return G(e,-5);if(0!==e.avail_in||0!==i.lookahead||t!==u&&666!==i.status){var g=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(j(e),0===e.lookahead)){if(t===u)return w;break}if(e.match_length=0,n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(M(e,!1),0===e.strm.avail_out))return w}return e.insert=0,t===l?(M(e,!0),0===e.strm.avail_out?T:F):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?w:k}(i,t):3===i.strategy?function(e,t){for(var n,r,i,o,s=e.window;;){if(e.lookahead<=P){if(j(e),e.lookahead<=P&&t===u)return w;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=A&&0<e.strstart&&(r=s[i=e.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){o=e.strstart+P;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);e.match_length=P-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=A?(n=a._tr_tally(e,1,e.match_length-A),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(M(e,!1),0===e.strm.avail_out))return w}return e.insert=0,t===l?(M(e,!0),0===e.strm.avail_out?T:F):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?w:k}(i,t):r[i.level].func(i,t);if(g!==T&&g!==F||(i.status=666),g===w||g===T)return 0===e.avail_out&&(i.last_flush=-1),d;if(g===k&&(1===t?a._tr_align(i):5!==t&&(a._tr_stored_block(i,0,0,!1),3===t&&(x(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),O(e),0===e.avail_out))return i.last_flush=-1,d}return t!==l?d:i.wrap<=0?1:(2===i.wrap?(N(i,255&e.adler),N(i,e.adler>>8&255),N(i,e.adler>>16&255),N(i,e.adler>>24&255),N(i,255&e.total_in),N(i,e.total_in>>8&255),N(i,e.total_in>>16&255),N(i,e.total_in>>24&255)):(B(i,e.adler>>>16),B(i,65535&e.adler)),O(e),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?d:1)},n.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==E&&69!==t&&73!==t&&91!==t&&103!==t&&t!==C&&666!==t?G(e,h):(e.state=null,t===C?G(e,-3):d):h},n.deflateSetDictionary=function(e,t){var n,r,a,s,c,u,l,f,g=t.length;if(!e||!e.state)return h;if(2===(s=(n=e.state).wrap)||1===s&&n.status!==E||n.lookahead)return h;for(1===s&&(e.adler=o(e.adler,t,g,0)),n.wrap=0,g>=n.w_size&&(0===s&&(x(n.head),n.strstart=0,n.block_start=0,n.insert=0),f=new i.Buf8(n.w_size),i.arraySet(f,t,g-n.w_size,n.w_size,0),t=f,g=n.w_size),c=e.avail_in,u=e.next_in,l=e.input,e.avail_in=g,e.next_in=0,e.input=t,j(n);n.lookahead>=A;){for(r=n.strstart,a=n.lookahead-(A-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+A-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--a;);n.strstart=r,n.lookahead=A-1,j(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=A-1,n.match_available=0,e.next_in=u,e.input=l,e.avail_in=c,n.wrap=s,d},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,i,a,o,s,c,u,l,d,h,f,g,p,v,m,_,y,S,b,I,A,P,D,E;n=e.state,r=e.next_in,D=e.input,i=r+(e.avail_in-5),a=e.next_out,E=e.output,o=a-(t-e.avail_out),s=a+(e.avail_out-257),c=n.dmax,u=n.wsize,l=n.whave,d=n.wnext,h=n.window,f=n.hold,g=n.bits,p=n.lencode,v=n.distcode,m=(1<<n.lenbits)-1,_=(1<<n.distbits)-1;e:do{g<15&&(f+=D[r++]<<g,g+=8,f+=D[r++]<<g,g+=8),y=p[f&m];t:for(;;){if(f>>>=S=y>>>24,g-=S,0==(S=y>>>16&255))E[a++]=65535&y;else{if(!(16&S)){if(!(64&S)){y=p[(65535&y)+(f&(1<<S)-1)];continue t}if(32&S){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}b=65535&y,(S&=15)&&(g<S&&(f+=D[r++]<<g,g+=8),b+=f&(1<<S)-1,f>>>=S,g-=S),g<15&&(f+=D[r++]<<g,g+=8,f+=D[r++]<<g,g+=8),y=v[f&_];n:for(;;){if(f>>>=S=y>>>24,g-=S,!(16&(S=y>>>16&255))){if(!(64&S)){y=v[(65535&y)+(f&(1<<S)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(I=65535&y,g<(S&=15)&&(f+=D[r++]<<g,(g+=8)<S&&(f+=D[r++]<<g,g+=8)),c<(I+=f&(1<<S)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(f>>>=S,g-=S,(S=a-o)<I){if(l<(S=I-S)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(P=h,(A=0)===d){if(A+=u-S,S<b){for(b-=S;E[a++]=h[A++],--S;);A=a-I,P=E}}else if(d<S){if(A+=u+d-S,(S-=d)<b){for(b-=S;E[a++]=h[A++],--S;);if(A=0,d<b){for(b-=S=d;E[a++]=h[A++],--S;);A=a-I,P=E}}}else if(A+=d-S,S<b){for(b-=S;E[a++]=h[A++],--S;);A=a-I,P=E}for(;2<b;)E[a++]=P[A++],E[a++]=P[A++],E[a++]=P[A++],b-=3;b&&(E[a++]=P[A++],1<b&&(E[a++]=P[A++]))}else{for(A=a-I;E[a++]=E[A++],E[a++]=E[A++],E[a++]=E[A++],2<(b-=3););b&&(E[a++]=E[A++],1<b&&(E[a++]=E[A++]))}break}}break}}while(r<i&&a<s);r-=b=g>>3,f&=(1<<(g-=b<<3))-1,e.next_in=r,e.next_out=a,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=a<s?s-a+257:257-(a-s),n.hold=f,n.bits=g}},{}],49:[function(e,t,n){"use strict";var r=e("../utils/common"),i=e("./adler32"),a=e("./crc32"),o=e("./inffast"),s=e("./inftrees"),c=1,u=2,l=0,d=-2,h=1,f=852,g=592;function p(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function m(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=h,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(f),t.distcode=t.distdyn=new r.Buf32(g),t.sane=1,t.back=-1,l):d}function _(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,m(e)):d}function y(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?d:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,_(e))):d}function S(e,t){var n,r;return e?(r=new v,(e.state=r).window=null,(n=y(e,t))!==l&&(e.state=null),n):d}var b,I,A=!0;function P(e){if(A){var t;for(b=new r.Buf32(512),I=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(c,e.lens,0,288,b,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(u,e.lens,0,32,I,0,e.work,{bits:5}),A=!1}e.lencode=b,e.lenbits=9,e.distcode=I,e.distbits=5}function D(e,t,n,i){var a,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new r.Buf8(o.wsize)),i>=o.wsize?(r.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i<(a=o.wsize-o.wnext)&&(a=i),r.arraySet(o.window,t,n-i,a,o.wnext),(i-=a)?(r.arraySet(o.window,t,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0}n.inflateReset=_,n.inflateReset2=y,n.inflateResetKeep=m,n.inflateInit=function(e){return S(e,15)},n.inflateInit2=S,n.inflate=function(e,t){var n,f,g,v,m,_,y,S,b,I,A,E,C,w,k,T,F,G,R,x,O,M,N,B,L=0,j=new r.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return d;12===(n=e.state).mode&&(n.mode=13),m=e.next_out,g=e.output,y=e.avail_out,v=e.next_in,f=e.input,_=e.avail_in,S=n.hold,b=n.bits,I=_,A=y,M=l;e:for(;;)switch(n.mode){case h:if(0===n.wrap){n.mode=13;break}for(;b<16;){if(0===_)break e;_--,S+=f[v++]<<b,b+=8}if(2&n.wrap&&35615===S){j[n.check=0]=255&S,j[1]=S>>>8&255,n.check=a(n.check,j,2,0),b=S=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&S)<<8)+(S>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&S)){e.msg="unknown compression method",n.mode=30;break}if(b-=4,O=8+(15&(S>>>=4)),0===n.wbits)n.wbits=O;else if(O>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<O,e.adler=n.check=1,n.mode=512&S?10:12,b=S=0;break;case 2:for(;b<16;){if(0===_)break e;_--,S+=f[v++]<<b,b+=8}if(n.flags=S,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=S>>8&1),512&n.flags&&(j[0]=255&S,j[1]=S>>>8&255,n.check=a(n.check,j,2,0)),b=S=0,n.mode=3;case 3:for(;b<32;){if(0===_)break e;_--,S+=f[v++]<<b,b+=8}n.head&&(n.head.time=S),512&n.flags&&(j[0]=255&S,j[1]=S>>>8&255,j[2]=S>>>16&255,j[3]=S>>>24&255,n.check=a(n.check,j,4,0)),b=S=0,n.mode=4;case 4:for(;b<16;){if(0===_)break e;_--,S+=f[v++]<<b,b+=8}n.head&&(n.head.xflags=255&S,n.head.os=S>>8),512&n.flags&&(j[0]=255&S,j[1]=S>>>8&255,n.check=a(n.check,j,2,0)),b=S=0,n.mode=5;case 5:if(1024&n.flags){for(;b<16;){if(0===_)break e;_--,S+=f[v++]<<b,b+=8}n.length=S,n.head&&(n.head.extra_len=S),512&n.flags&&(j[0]=255&S,j[1]=S>>>8&255,n.check=a(n.check,j,2,0)),b=S=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(_<(E=n.length)&&(E=_),E&&(n.head&&(O=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,f,v,E,O)),512&n.flags&&(n.check=a(n.check,f,E,v)),_-=E,v+=E,n.length-=E),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===_)break e;for(E=0;O=f[v+E++],n.head&&O&&n.length<65536&&(n.head.name+=String.fromCharCode(O)),O&&E<_;);if(512&n.flags&&(n.check=a(n.check,f,E,v)),_-=E,v+=E,O)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===_)break e;for(E=0;O=f[v+E++],n.head&&O&&n.length<65536&&(n.head.comment+=String.fromCharCode(O)),O&&E<_;);if(512&n.flags&&(n.check=a(n.check,f,E,v)),_-=E,v+=E,O)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;b<16;){if(0===_)break e;_--,S+=f[v++]<<b,b+=8}if(S!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}b=S=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;b<32;){if(0===_)break e;_--,S+=f[v++]<<b,b+=8}e.adler=n.check=p(S),b=S=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=m,e.avail_out=y,e.next_in=v,e.avail_in=_,n.hold=S,n.bits=b,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){S>>>=7&b,b-=7&b,n.mode=27;break}for(;b<3;){if(0===_)break e;_--,S+=f[v++]<<b,b+=8}switch(n.last=1&S,b-=1,3&(S>>>=1)){case 0:n.mode=14;break;case 1:if(P(n),n.mode=20,6!==t)break;S>>>=2,b-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}S>>>=2,b-=2;break;case 14:for(S>>>=7&b,b-=7&b;b<32;){if(0===_)break e;_--,S+=f[v++]<<b,b+=8}if((65535&S)!=(S>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&S,b=S=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(E=n.length){if(_<E&&(E=_),y<E&&(E=y),0===E)break e;r.arraySet(g,f,v,E,m),_-=E,v+=E,y-=E,m+=E,n.length-=E;break}n.mode=12;break;case 17:for(;b<14;){if(0===_)break e;_--,S+=f[v++]<<b,b+=8}if(n.nlen=257+(31&S),S>>>=5,b-=5,n.ndist=1+(31&S),S>>>=5,b-=5,n.ncode=4+(15&S),S>>>=4,b-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;b<3;){if(0===_)break e;_--,S+=f[v++]<<b,b+=8}n.lens[U[n.have++]]=7&S,S>>>=3,b-=3}for(;n.have<19;)n.lens[U[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,N={bits:n.lenbits},M=s(0,n.lens,0,19,n.lencode,0,n.work,N),n.lenbits=N.bits,M){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;T=(L=n.lencode[S&(1<<n.lenbits)-1])>>>16&255,F=65535&L,!((k=L>>>24)<=b);){if(0===_)break e;_--,S+=f[v++]<<b,b+=8}if(F<16)S>>>=k,b-=k,n.lens[n.have++]=F;else{if(16===F){for(B=k+2;b<B;){if(0===_)break e;_--,S+=f[v++]<<b,b+=8}if(S>>>=k,b-=k,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}O=n.lens[n.have-1],E=3+(3&S),S>>>=2,b-=2}else if(17===F){for(B=k+3;b<B;){if(0===_)break e;_--,S+=f[v++]<<b,b+=8}b-=k,O=0,E=3+(7&(S>>>=k)),S>>>=3,b-=3}else{for(B=k+7;b<B;){if(0===_)break e;_--,S+=f[v++]<<b,b+=8}b-=k,O=0,E=11+(127&(S>>>=k)),S>>>=7,b-=7}if(n.have+E>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;E--;)n.lens[n.have++]=O}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,N={bits:n.lenbits},M=s(c,n.lens,0,n.nlen,n.lencode,0,n.work,N),n.lenbits=N.bits,M){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,N={bits:n.distbits},M=s(u,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,N),n.distbits=N.bits,M){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=_&&258<=y){e.next_out=m,e.avail_out=y,e.next_in=v,e.avail_in=_,n.hold=S,n.bits=b,o(e,A),m=e.next_out,g=e.output,y=e.avail_out,v=e.next_in,f=e.input,_=e.avail_in,S=n.hold,b=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;T=(L=n.lencode[S&(1<<n.lenbits)-1])>>>16&255,F=65535&L,!((k=L>>>24)<=b);){if(0===_)break e;_--,S+=f[v++]<<b,b+=8}if(T&&!(240&T)){for(G=k,R=T,x=F;T=(L=n.lencode[x+((S&(1<<G+R)-1)>>G)])>>>16&255,F=65535&L,!(G+(k=L>>>24)<=b);){if(0===_)break e;_--,S+=f[v++]<<b,b+=8}S>>>=G,b-=G,n.back+=G}if(S>>>=k,b-=k,n.back+=k,n.length=F,0===T){n.mode=26;break}if(32&T){n.back=-1,n.mode=12;break}if(64&T){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&T,n.mode=22;case 22:if(n.extra){for(B=n.extra;b<B;){if(0===_)break e;_--,S+=f[v++]<<b,b+=8}n.length+=S&(1<<n.extra)-1,S>>>=n.extra,b-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;T=(L=n.distcode[S&(1<<n.distbits)-1])>>>16&255,F=65535&L,!((k=L>>>24)<=b);){if(0===_)break e;_--,S+=f[v++]<<b,b+=8}if(!(240&T)){for(G=k,R=T,x=F;T=(L=n.distcode[x+((S&(1<<G+R)-1)>>G)])>>>16&255,F=65535&L,!(G+(k=L>>>24)<=b);){if(0===_)break e;_--,S+=f[v++]<<b,b+=8}S>>>=G,b-=G,n.back+=G}if(S>>>=k,b-=k,n.back+=k,64&T){e.msg="invalid distance code",n.mode=30;break}n.offset=F,n.extra=15&T,n.mode=24;case 24:if(n.extra){for(B=n.extra;b<B;){if(0===_)break e;_--,S+=f[v++]<<b,b+=8}n.offset+=S&(1<<n.extra)-1,S>>>=n.extra,b-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===y)break e;if(E=A-y,n.offset>E){if((E=n.offset-E)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}C=E>n.wnext?(E-=n.wnext,n.wsize-E):n.wnext-E,E>n.length&&(E=n.length),w=n.window}else w=g,C=m-n.offset,E=n.length;for(y<E&&(E=y),y-=E,n.length-=E;g[m++]=w[C++],--E;);0===n.length&&(n.mode=21);break;case 26:if(0===y)break e;g[m++]=n.length,y--,n.mode=21;break;case 27:if(n.wrap){for(;b<32;){if(0===_)break e;_--,S|=f[v++]<<b,b+=8}if(A-=y,e.total_out+=A,n.total+=A,A&&(e.adler=n.check=n.flags?a(n.check,g,A,m-A):i(n.check,g,A,m-A)),A=y,(n.flags?S:p(S))!==n.check){e.msg="incorrect data check",n.mode=30;break}b=S=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;b<32;){if(0===_)break e;_--,S+=f[v++]<<b,b+=8}if(S!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}b=S=0}n.mode=29;case 29:M=1;break e;case 30:M=-3;break e;case 31:return-4;default:return d}return e.next_out=m,e.avail_out=y,e.next_in=v,e.avail_in=_,n.hold=S,n.bits=b,(n.wsize||A!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&D(e,e.output,e.next_out,A-e.avail_out)?(n.mode=31,-4):(I-=e.avail_in,A-=e.avail_out,e.total_in+=I,e.total_out+=A,n.total+=A,n.wrap&&A&&(e.adler=n.check=n.flags?a(n.check,g,A,e.next_out-A):i(n.check,g,A,e.next_out-A)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==I&&0===A||4===t)&&M===l&&(M=-5),M)},n.inflateEnd=function(e){if(!e||!e.state)return d;var t=e.state;return t.window&&(t.window=null),e.state=null,l},n.inflateGetHeader=function(e,t){var n;return e&&e.state&&2&(n=e.state).wrap?((n.head=t).done=!1,l):d},n.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?d:11===n.mode&&i(1,t,r,0)!==n.check?-3:D(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,l):d},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){"use strict";var r=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,c,u,l,d,h){var f,g,p,v,m,_,y,S,b,I=h.bits,A=0,P=0,D=0,E=0,C=0,w=0,k=0,T=0,F=0,G=0,R=null,x=0,O=new r.Buf16(16),M=new r.Buf16(16),N=null,B=0;for(A=0;A<=15;A++)O[A]=0;for(P=0;P<c;P++)O[t[n+P]]++;for(C=I,E=15;1<=E&&0===O[E];E--);if(E<C&&(C=E),0===E)return u[l++]=20971520,u[l++]=20971520,h.bits=1,0;for(D=1;D<E&&0===O[D];D++);for(C<D&&(C=D),A=T=1;A<=15;A++)if(T<<=1,(T-=O[A])<0)return-1;if(0<T&&(0===e||1!==E))return-1;for(M[1]=0,A=1;A<15;A++)M[A+1]=M[A]+O[A];for(P=0;P<c;P++)0!==t[n+P]&&(d[M[t[n+P]]++]=P);if(_=0===e?(R=N=d,19):1===e?(R=i,x-=257,N=a,B-=257,256):(R=o,N=s,-1),A=D,m=l,k=P=G=0,p=-1,v=(F=1<<(w=C))-1,1===e&&852<F||2===e&&592<F)return 1;for(;;){for(y=A-k,b=d[P]<_?(S=0,d[P]):d[P]>_?(S=N[B+d[P]],R[x+d[P]]):(S=96,0),f=1<<A-k,D=g=1<<w;u[m+(G>>k)+(g-=f)]=y<<24|S<<16|b,0!==g;);for(f=1<<A-1;G&f;)f>>=1;if(0!==f?(G&=f-1,G+=f):G=0,P++,0==--O[A]){if(A===E)break;A=t[n+d[P]]}if(C<A&&(G&v)!==p){for(0===k&&(k=C),m+=D,T=1<<(w=A-k);w+k<E&&!((T-=O[w+k])<=0);)w++,T<<=1;if(F+=1<<w,1===e&&852<F||2===e&&592<F)return 1;u[p=G&v]=C<<24|w<<16|m-l}}return 0!==G&&(u[m+G]=A-k<<24|64<<16),h.bits=C,0}},{"../utils/common":41}],51:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){"use strict";var r=e("../utils/common"),i=0,a=1;function o(e){for(var t=e.length;0<=--t;)e[t]=0}var s=0,c=29,u=256,l=u+1+c,d=30,h=19,f=2*l+1,g=15,p=16,v=7,m=256,_=16,y=17,S=18,b=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],I=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],D=new Array(2*(l+2));o(D);var E=new Array(2*d);o(E);var C=new Array(512);o(C);var w=new Array(256);o(w);var k=new Array(c);o(k);var T,F,G,R=new Array(d);function x(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function O(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function M(e){return e<256?C[e]:C[256+(e>>>7)]}function N(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function B(e,t,n){e.bi_valid>p-n?(e.bi_buf|=t<<e.bi_valid&65535,N(e,e.bi_buf),e.bi_buf=t>>p-e.bi_valid,e.bi_valid+=n-p):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function L(e,t,n){B(e,n[2*t],n[2*t+1])}function j(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function U(e,t,n){var r,i,a=new Array(g+1),o=0;for(r=1;r<=g;r++)a[r]=o=o+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=j(a[s]++,s))}}function W(e){var t;for(t=0;t<l;t++)e.dyn_ltree[2*t]=0;for(t=0;t<d;t++)e.dyn_dtree[2*t]=0;for(t=0;t<h;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*m]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function H(e){8<e.bi_valid?N(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function K(e,t,n,r){var i=2*t,a=2*n;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]}function z(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&K(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!K(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function V(e,t,n){var r,i,a,o,s=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],i=e.pending_buf[e.l_buf+s],s++,0===r?L(e,i,t):(L(e,(a=w[i])+u+1,t),0!==(o=b[a])&&B(e,i-=k[a],o),L(e,a=M(--r),n),0!==(o=I[a])&&B(e,r-=R[a],o)),s<e.last_lit;);L(e,m,t)}function J(e,t){var n,r,i,a=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,c=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=f,n=0;n<c;n++)0!==a[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)a[2*(i=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=o[2*i+1]);for(t.max_code=u,n=e.heap_len>>1;1<=n;n--)z(e,a,n);for(i=c;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],z(e,a,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,a[2*i]=a[2*n]+a[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,a[2*n+1]=a[2*r+1]=i,e.heap[1]=i++,z(e,a,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,a,o,s,c=t.dyn_tree,u=t.max_code,l=t.stat_desc.static_tree,d=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,v=t.stat_desc.max_length,m=0;for(a=0;a<=g;a++)e.bl_count[a]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<f;n++)v<(a=c[2*c[2*(r=e.heap[n])+1]+1]+1)&&(a=v,m++),c[2*r+1]=a,u<r||(e.bl_count[a]++,o=0,p<=r&&(o=h[r-p]),s=c[2*r],e.opt_len+=s*(a+o),d&&(e.static_len+=s*(l[2*r+1]+o)));if(0!==m){do{for(a=v-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[v]--,m-=2}while(0<m);for(a=v;0!==a;a--)for(r=e.bl_count[a];0!==r;)u<(i=e.heap[--n])||(c[2*i+1]!==a&&(e.opt_len+=(a-c[2*i+1])*c[2*i],c[2*i+1]=a),r--)}}(e,t),U(a,u,e.bl_count)}function Y(e,t,n){var r,i,a=-1,o=t[1],s=0,c=7,u=4;for(0===o&&(c=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++s<c&&i===o||(s<u?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[2*_]++):s<=10?e.bl_tree[2*y]++:e.bl_tree[2*S]++,a=i,u=(s=0)===o?(c=138,3):i===o?(c=6,3):(c=7,4))}function Z(e,t,n){var r,i,a=-1,o=t[1],s=0,c=7,u=4;for(0===o&&(c=138,u=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++s<c&&i===o)){if(s<u)for(;L(e,i,e.bl_tree),0!=--s;);else 0!==i?(i!==a&&(L(e,i,e.bl_tree),s--),L(e,_,e.bl_tree),B(e,s-3,2)):s<=10?(L(e,y,e.bl_tree),B(e,s-3,3)):(L(e,S,e.bl_tree),B(e,s-11,7));a=i,u=(s=0)===o?(c=138,3):i===o?(c=6,3):(c=7,4)}}o(R);var q=!1;function X(e,t,n,i){B(e,(s<<1)+(i?1:0),3),function(e,t,n,i){H(e),i&&(N(e,n),N(e,~n)),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}n._tr_init=function(e){q||(function(){var e,t,n,r,i,a=new Array(g+1);for(r=n=0;r<c-1;r++)for(k[r]=n,e=0;e<1<<b[r];e++)w[n++]=r;for(w[n-1]=r,r=i=0;r<16;r++)for(R[r]=i,e=0;e<1<<I[r];e++)C[i++]=r;for(i>>=7;r<d;r++)for(R[r]=i<<7,e=0;e<1<<I[r]-7;e++)C[256+i++]=r;for(t=0;t<=g;t++)a[t]=0;for(e=0;e<=143;)D[2*e+1]=8,e++,a[8]++;for(;e<=255;)D[2*e+1]=9,e++,a[9]++;for(;e<=279;)D[2*e+1]=7,e++,a[7]++;for(;e<=287;)D[2*e+1]=8,e++,a[8]++;for(U(D,l+1,a),e=0;e<d;e++)E[2*e+1]=5,E[2*e]=j(e,5);T=new x(D,b,u+1,l,g),F=new x(E,I,0,d,g),G=new x(new Array(0),A,0,h,v)}(),q=!0),e.l_desc=new O(e.dyn_ltree,T),e.d_desc=new O(e.dyn_dtree,F),e.bl_desc=new O(e.bl_tree,G),e.bi_buf=0,e.bi_valid=0,W(e)},n._tr_stored_block=X,n._tr_flush_block=function(e,t,n,r){var o,s,c=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return i;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return a;for(t=32;t<u;t++)if(0!==e.dyn_ltree[2*t])return a;return i}(e)),J(e,e.l_desc),J(e,e.d_desc),c=function(e){var t;for(Y(e,e.dyn_ltree,e.l_desc.max_code),Y(e,e.dyn_dtree,e.d_desc.max_code),J(e,e.bl_desc),t=h-1;3<=t&&0===e.bl_tree[2*P[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),o=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=o&&(o=s)):o=s=n+5,n+4<=o&&-1!==t?X(e,t,n,r):4===e.strategy||s===o?(B(e,2+(r?1:0),3),V(e,D,E)):(B(e,4+(r?1:0),3),function(e,t,n,r){var i;for(B(e,t-257,5),B(e,n-1,5),B(e,r-4,4),i=0;i<r;i++)B(e,e.bl_tree[2*P[i]+1],3);Z(e,e.dyn_ltree,t-1),Z(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,c+1),V(e,e.dyn_ltree,e.dyn_dtree)),W(e),r&&H(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(w[n]+u+1)]++,e.dyn_dtree[2*M(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){B(e,2,3),L(e,m,D),function(e){16===e.bi_valid?(N(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){(function(e){!function(e,t){"use strict";if(!e.setImmediate){var n,r,i,a,o=1,s={},c=!1,u=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,n="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick(function(){h(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(a="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",f,!1):e.attachEvent("onmessage",f),function(t){e.postMessage(a+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){h(e.data)},function(e){i.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(r=u.documentElement,function(e){var t=u.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):function(e){setTimeout(h,0,e)},l.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return s[o]=i,n(o),o++},l.clearImmediate=d}function d(e){delete s[e]}function h(e){if(c)setTimeout(h,0,e);else{var n=s[e];if(n){c=!0;try{!function(e){var n=e.callback,r=e.args;switch(r.length){case 0:n();break;case 1:n(r[0]);break;case 2:n(r[0],r[1]);break;case 3:n(r[0],r[1],r[2]);break;default:n.apply(t,r)}}(n)}finally{d(e),c=!1}}}}function f(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&h(+t.data.slice(a.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},4099:(e,t,n)=>{"use strict";n.d(t,{qN:()=>j,zO:()=>L,eS:()=>U,n6:()=>i,Us:()=>s,tq:()=>a,VZ:()=>W,mr:()=>K,sm:()=>H,C5:()=>z,uM:()=>Z,Wx:()=>Y,cR:()=>J,J9:()=>d,qv:()=>V,cx:()=>r,J$:()=>M,Bh:()=>I,FP:()=>b,sy:()=>x,FI:()=>m,qR:()=>N,yG:()=>D,o7:()=>E,nE:()=>O,yV:()=>R,Tt:()=>B,iR:()=>C,Vn:()=>c,E9:()=>o,rV:()=>G});var r=function(e){return e.ZoomFitBBox="ZoomFitBBox",e.ZoomFitBHorz="ZoomFitBHorz",e.ZoomFitBVert="ZoomFitBVert",e.ZoomFitHorz="ZoomFitHorz",e.ZoomFitVert="ZoomFitVert",e.ZoomFitPage="ZoomFitPage",e.ZoomFitRect="ZoomFitRect",e.ZoomXYZ="ZoomXYZ",e}({});var i=function(e){return e[e.NONE=-1]="NONE",e[e.PAGE_OPENED=0]="PAGE_OPENED",e[e.PAGE_CLOSED=1]="PAGE_CLOSED",e[e.DOC_WILL_CLOSE=2]="DOC_WILL_CLOSE",e[e.DOC_WILL_SAVE=3]="DOC_WILL_SAVE",e[e.DOC_SAVED=4]="DOC_SAVED",e[e.DOC_WILL_PRINT=5]="DOC_WILL_PRINT",e[e.DOC_PRINTED=6]="DOC_PRINTED",e[e.FIELD_KEY_STROKE=7]="FIELD_KEY_STROKE",e[e.FIELD_WILL_FORMAT=8]="FIELD_WILL_FORMAT",e[e.FIELD_VALUE_CHANGED=9]="FIELD_VALUE_CHANGED",e[e.FIELD_RECALCULATE_VALUE=10]="FIELD_RECALCULATE_VALUE",e[e.ANNOT_CURSOR_ENTER=11]="ANNOT_CURSOR_ENTER",e[e.ANNOT_CURSOR_EXIT=12]="ANNOT_CURSOR_EXIT",e[e.ANNOT_MOUSE_BUTTON_PRESSED=13]="ANNOT_MOUSE_BUTTON_PRESSED",e[e.ANNOT_MOUSE_BUTTON_RELEASED=14]="ANNOT_MOUSE_BUTTON_RELEASED",e[e.ANNOT_RECEIVE_INPUT_FOCUS=15]="ANNOT_RECEIVE_INPUT_FOCUS",e[e.ANNOT_LOSE_INPUT_FOCUS=16]="ANNOT_LOSE_INPUT_FOCUS",e[e.ANNOT_PAGE_OPENED=17]="ANNOT_PAGE_OPENED",e[e.ANNOT_PAGE_CLOSED=18]="ANNOT_PAGE_CLOSED",e[e.ANNOT_PAGE_VISIBLE=19]="ANNOT_PAGE_VISIBLE",e[e.ANNOT_PAGE_INVISIBLE=20]="ANNOT_PAGE_INVISIBLE",e}({}),a=Object.values({ANNOT_CURSOR_ENTER:11,ANNOT_CURSOR_EXIT:12,ANNOT_MOUSE_BUTTON_PRESSED:13,ANNOT_MOUSE_BUTTON_RELEASED:14,ANNOT_RECEIVE_INPUT_FOCUS:15,ANNOT_LOSE_INPUT_FOCUS:16,ANNOT_PAGE_OPENED:17,ANNOT_PAGE_CLOSED:18,ANNOT_PAGE_VISIBLE:19,ANNOT_PAGE_INVISIBLE:20});Object.values({FIELD_KEY_STROKE:7,FIELD_WILL_FORMAT:8,FIELD_VALUE_CHANGED:9,FIELD_RECALCULATE_VALUE:10}),Object.values({PAGE_OPENED:0,PAGE_CLOSED:1}),Object.values({DOC_WILL_CLOSE:2,DOC_WILL_SAVE:3,DOC_SAVED:4,DOC_WILL_PRINT:5,DOC_PRINTED:6});function o(e,t){var n;return null!==(n=e.TriggerEvent.values[t])&&void 0!==n?n:{value:-1}}var s=function(e){return e.goto="TypeGoto",e.launch="TypeLaunch",e.uri="TypeURI",e.named="TypeNamed",e.thread="TypeThread",e.submitForm="TypeSubmitForm",e.resetForm="TypeResetForm",e.javaScript="TypeJavaScript",e.importData="TypeImportData",e.hide="TypeHide",e.gotoE="TypeGoToE",e.gotoR="TypeGoToR",e.setOCGState="TypeSetOCGState",e.rendition="TypeRendition",e}({});function c(e,t){switch(t){case"TypeGoto":return e.ActionType.e_TypeGoto;case"TypeLaunch":return e.ActionType.e_TypeLaunch;case"TypeURI":return e.ActionType.e_TypeURI;case"TypeNamed":return e.ActionType.e_TypeNamed;case"TypeThread":return e.ActionType.e_TypeThread;case"TypeSubmitForm":return e.ActionType.e_TypeSubmitForm;case"TypeResetForm":return e.ActionType.e_TypeResetForm;case"TypeJavaScript":return e.ActionType.e_TypeJavaScript;case"TypeImportData":return e.ActionType.e_TypeImportData;case"TypeHide":return e.ActionType.e_TypeHide;case"TypeGoToE":return e.ActionType.e_TypeGoToE;case"TypeGoToR":return e.ActionType.e_TypeGoToR;case"TypeSetOCGState":return e.ActionType.e_TypeSetOCGState;case"TypeRendition":return e.ActionType.e_TypeRendition}return e.ActionType.e_TypeUnknown}function u(e,t){switch(t){case e.ActionType.e_TypeGoto:return"TypeGoto";case e.ActionType.e_TypeLaunch:return"TypeLaunch";case e.ActionType.e_TypeURI:return"TypeURI";case e.ActionType.e_TypeNamed:return"TypeNamed";case e.ActionType.e_TypeThread:return"TypeThread";case e.ActionType.e_TypeSubmitForm:return"TypeSubmitForm";case e.ActionType.e_TypeResetForm:return"TypeResetForm";case e.ActionType.e_TypeJavaScript:return"TypeJavaScript";case e.ActionType.e_TypeImportData:return"TypeImportData";case e.ActionType.e_TypeHide:return"TypeHide";case e.ActionType.e_TypeGoToE:return"TypeGoToE";case e.ActionType.e_TypeGoToR:return"TypeGoToR";case e.ActionType.e_TypeSetOCGState:return"TypeSetOCGState";case e.ActionType.e_TypeRendition:return"TypeRendition";default:throw new Error("Unknown gsdk action type: ".concat(t))}}var l=function(e){return e[e.NewWindowFlagFalse=0]="NewWindowFlagFalse",e[e.NewWindowFlagTrue=1]="NewWindowFlagTrue",e[e.NewWindowFlagNone=2]="NewWindowFlagNone",e}({});var d=function(e){return e.fdf="fdf",e.html="html",e.xfdf="xfdf",e.pdf="pdf",e.txt="txt",e.xml="xml",e}({}),h=n(2956),f=n(8925);var g=n(5578),p=n(7582);function v(e,t,n){if(!n.IsEmpty()){var r=n.GetAttachedFileName().toString(),i=n.GetFileAttachmentAnnotIndex(),a=n.GetPageIndex(),o=n.GetRelationship().toString(),s=n.GetTarget();return{attachedFileName:r,fileAttachmentAnnotIndex:i,pageIndex:a,relationship:o,target:v(e,t,s),get fileInfo(){return new Promise(function(n,o){return(0,g._)(function(){var s,c,u,l,d,h,g;return(0,p.Jh)(this,function(p){try{if(a>-1?(c=t.GetPage(a)).IsEmpty()||(u=c.GetAnnot(i)).IsEmpty()||(l=new e.FileAttachment(u),s=l.GetFileSpec()):(d=new e.PDFNameTree(t,e.PDFNameTreeType.e_EmbeddedFiles),(h=d.GetObj((0,f.Eo)(e,r)))&&(s=new e.FileSpec(t,h))),!s)return n(void 0),[2];g=function(e,t){var n=new Blob;return e.ExportToFileStream(t.StreamCallback.implement({Release:function(){},Flush:function(){return!0},GetSize:function(){return n.size},WriteBlock:function(e,r,i){var a=t.HEAPU8.buffer;return n=new Blob([n,a.slice(e,e+i)]),!0}})),n}(s,e),n({fileName:s.GetFileName().toString(),blob:g,description:s.GetDescription().toString()})}catch(e){o(e)}return[2]})})()})}}}}function m(e,t,n){if(!n.IsEmpty()){var i=function(e,t,n){var r=n.GetDestArray();if(!r||0===r.GetElementCount())return 0;var i=r.GetElement(0).GetDirectObject();if(!i)return 0;var a=i.GetType().value;if(2==a)return i.GetInteger();if(6!=a)return 0;var o=e.String,s=new o("Parent"),c=new o("Kids");try{var u=i.GetDict().GetElement(s);if(!u)return 0;var l=u.GetDict();if(!l)return 0;if(l.HasKey(c)){var d=l.GetElement(c).GetDirectObject().GetArray();if(!d||0===d.GetElementCount())return 0}}finally{s.delete(),c.delete()}return n.GetPageIndex(t)}(e,t,n);i<0&&(i=0);var a=function(e,t){switch(t){case e.ZoomMode.e_ZoomFitBBox:return"ZoomFitBBox";case e.ZoomMode.e_ZoomFitBHorz:return"ZoomFitBHorz";case e.ZoomMode.e_ZoomFitBVert:return"ZoomFitBVert";case e.ZoomMode.e_ZoomFitHorz:return"ZoomFitHorz";case e.ZoomMode.e_ZoomFitPage:return"ZoomFitPage";case e.ZoomMode.e_ZoomFitRect:return"ZoomFitRect";case e.ZoomMode.e_ZoomFitVert:return"ZoomFitVert";case e.ZoomMode.e_ZoomXYZ:return"ZoomXYZ";case void 0:case null:return"ZoomFitBHorz"}throw new Error("Incorrect zoomMode enumeration: ".concat(t))}(e,n.GetZoomMode()),o=n.GetLeft(),s=n.GetRight(),c=n.GetTop(),u=n.GetBottom(),l=n.GetZoomFactor();switch(a){case r.ZoomFitBBox:return{zoomMode:a,pageIndex:i};case r.ZoomFitBHorz:return{zoomMode:a,pageIndex:i,top:c};case r.ZoomFitBVert:return{zoomMode:a,pageIndex:i,left:o};case r.ZoomFitHorz:return{zoomMode:a,pageIndex:i,top:c};case r.ZoomFitPage:return{zoomMode:a,pageIndex:i};case r.ZoomFitRect:return{zoomMode:a,pageIndex:i,left:o,top:c,right:s,bottom:u};case r.ZoomFitVert:return{zoomMode:a,pageIndex:i,left:o};case r.ZoomXYZ:return{zoomMode:a,pageIndex:i,left:o,top:c,right:s,bottom:u,zoomFactor:l}}}}function _(e,t){return t.IsEmpty()?{}:{fileName:t.GetFileName().toString(),fileSize:t.GetFileSize(),description:t.GetDescription().toString(),modifiedDateTime:(0,f.Bx)(t.GetModifiedDateTime()),subtype:t.GetSubtype().toString(),isEmbedded:t.IsEmbedded()}}function y(e){return Array.from({length:e.GetSize()},function(t,n){return e.GetAt(n).toString()})}function S(e,t,n){var r=u(e,n.GetType());switch(r){case s.javaScript:var i=new e.JavaScriptAction(n);return{type:r,data:{javascript:(0,f.$h)(e,i.GetScript())}};case s.uri:return{type:r,data:{uri:new e.URIAction(n).GetURI().toString()}};case s.goto:var a=new e.GotoAction(n).GetDestination();return{type:r,data:{destination:m(e,t,a)}};case s.gotoR:var o=new e.RemoteGotoAction(n);return{type:r,data:{destination:m(e,t,o.GetDestination()),fileSpec:_(0,o.GetFileSpec()),newWindowFlag:o.GetNewWindowFlag().value}};case s.hide:var c=new e.HideAction(n);return{type:r,data:{fieldNames:y(c.GetFieldNames()),hideState:c.GetHideState()}};case s.launch:return{type:r,data:{fileSpec:_(0,new e.LaunchAction(n).GetFileSpec())}};case s.importData:return{type:r,data:{fileSpec:_(0,new e.ImportDataAction(n).GetFDFFileSpec())}};case s.resetForm:var l=new e.ResetFormAction(n),d=y(l.GetFieldNames());return{type:r,data:{flags:l.GetFlags(),fieldNames:d}};case s.submitForm:var h=new e.SubmitFormAction(n);return{type:r,data:{fieldNames:y(h.GetFieldNames()),flags:h.GetFlags(),address:h.GetURL().toString()}};case s.named:return{type:r,data:{name:new e.NamedAction(n).GetName().toString()}};case s.thread:var g=new e.ThreadAction(n),p=g.IsDestThreadInCurrentDoc(),S=g.GetDestinationThread(),b=g.GetDestinationThreadIndex(),I=g.GetDestinationThreadTitle().toString();return{type:r,data:{fileSpec:_(0,g.GetFileSpec()),isDestThreadInCurrentDoc:p,destThread:S,destThreadIndex:b,destThreadTitle:I}};case s.gotoE:var A=new e.EmbeddedGotoAction(n),P=A.GetDestinationName().toString(),D=A.GetDestination(),E=m(e,t,D),C=A.GetRootFile(),w=C.IsEmpty()?void 0:_(0,C),k=A.GetNewWindowFlag().value,T=A.GetTarget();return{type:r,data:{destinationName:P,destination:E,rootFile:w,newWindowFlag:k,target:v(e,t,T)}};case s.setOCGState:for(var F=function(t){var n=G.GetOCGStateArray(t),r=G.GetOCGState(t),i=n.GetSize();r===e.OCGState.e_OCGStateOn?x=Array.from({length:i},function(e,t){return n.GetAt(t).GetObjNum()}):O=Array.from({length:i},function(e,t){return n.GetAt(t).GetObjNum()})},G=new e.SetOCGStateAction(n),R=G.GetOCGStateCount(),x=[],O=[],M=0;M<R;M++)F(M);return{type:r,data:{visibleLayerNodeObjNums:x,hiddenLayerNodeObjNums:O}};case s.rendition:var N=new e.RenditionAction(n),B=N.GetJavaScript().toString(),L=N.GetRenditionCount(),j=Array.from({length:L},function(e,t){return{name:N.GetRendition(t).GetRenditionName().toString()}}),U=function(e,t){switch(t){case e.OperationType.e_OpTypeAssociate:return"Associate";case e.OperationType.e_OpTypeNone:return"None";case e.OperationType.e_OpTypePause:return"Pause";case e.OperationType.e_OpTypePlay:return"Play";case e.OperationType.e_OpTypeResume:return"Resume";case e.OperationType.e_OpTypeStop:return"Stop"}throw new Error("Invalid operation type: ".concat(t))}(e,N.GetOperationType());return{type:r,data:{javascript:B,renditions:j,operationType:U}};default:throw new Error("Unsupported action type: "+n.GetType().constructor.name)}}function b(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=n.GetDict().GetObjNum(),a=r?Array.from({length:n.GetSubActionCount()},function(r,i){var a=n.GetSubAction(i);return b(e,t,a)}):[];return(0,h._)({objNumber:i,subAction:a},S(e,t,n))}function I(e,t,n){var r=function(e,t){var n=[],r=function(e){var i;n.push(t(e)),null===(i=e.subAction)||void 0===i||i.forEach(r)};return r(e),n}(b(e,t,n,!(arguments.length>3&&void 0!==arguments[3])||arguments[3]),function(e){return{type:e.type,objectNumber:e.objNumber,data:e.data}});return r}var A=n(5843),P=n(8278);function D(e){var t=e.doc,n=e.gsdk,r=e.dict,i=e.createIfNotExists,a=void 0!==i&&i,o=new n.String("AA");try{var s=r.GetElement(o);if(s){var c=s.GetDict();return new n.AdditionalAction(t,c)}if(a){var u=n.PDFDictionary.Create();return r.SetAt(o,u),new n.AdditionalAction(t,u)}}finally{o.delete()}}function E(e){var t=e.gsdk,n=e.doc,r=e.query,i=e.trigger,a=e.useDict,o=void 0!==a&&a,s=e.createIfNotExists,c=void 0!==s&&s;switch(r.type){case"doc":if(o){var u=n.GetCatalog();return D({doc:n,gsdk:t,dict:u,createIfNotExists:c})}return new t.AdditionalAction(n,null);case"page":var l=n.GetPage(r.pageIndex);if(l.IsEmpty())throw new Error("The page index ".concat(r.pageIndex," you are trying to access does not exist and the additional action cannot be obtained!"));return(0,f.xF)(l),o?D({doc:n,gsdk:t,dict:l.GetDict(),createIfNotExists:c}):t.AdditionalAction.CreateFromPage(l);case"annot":var d;if((0,f.Pu)(r)){var h=r.annotId,g=h.pageIndex,p=h.objNumber;if(!(d=(0,P.Xc)(n,r.annotId)))throw new Error("The annot (page: ".concat(g,", objNumber: ").concat(p,") you are trying to access does not exist and the additional action cannot be obtained!"))}else d=r.annot;if(!d.IsEmpty()&&d.GetType()===t.AnnotType.e_Widget&&function(e){switch(e){case 7:case 8:case 9:case 10:return!0}return!1}(i)){var v=((0,A._)(d,t.Widget)?d:new t.Widget(d)).GetField();return o?D({doc:n,gsdk:t,dict:v.GetDict(),createIfNotExists:c}):new t.AdditionalAction(v)}return o?D({doc:n,gsdk:t,dict:d.GetDict(),createIfNotExists:c}):t.AdditionalAction.CreateFromAnnot(d);case"field":var m;if((0,f.Wm)(r)){var _=new t.Form(n),y=(0,f.Eo)(t,r.fieldName);if((m=_.GetField(0,y)).IsEmpty())throw new Error("The field ".concat(r.fieldName," you are trying to access does not exist and the additional action cannot be obtained!"));(0,f.xF)(_)}else if((0,f.uB)(r)){var S=(0,P.Xc)(n,r.widgetId);if(!S||S.IsEmpty()||S.GetType()!==t.AnnotType.e_Widget)throw new Error("The widget ".concat(JSON.stringify(r.widgetId)," you are trying to access does not exist and the additional action cannot be obtained!"));m=new t.Widget(S).GetField()}else m=r.field;return o?D({doc:n,gsdk:t,dict:m.GetDict(),createIfNotExists:c}):new t.AdditionalAction(m);default:throw new Error("Cannot obtain additional action by this owner: ".concat(JSON.stringify(r)))}}function C(e,t,n){var r={value:t},i=e.GetAction(r);if(!i||i.IsEmpty())return!1;if("number"!=typeof n)return e.RemoveAction(r),!0;for(var a=i.GetSubActionCount(),o=[i],s=0;s<a;s++)o.push(i.GetSubAction(s));var c=o.findIndex(function(e){return e.GetDict().GetObjNum()===n});if(-1===c)throw new Error("Action not found by this obj number: ".concat(n));if(0===c){if(o.shift(),0===o.length)return e.RemoveAction(r),!0;i.RemoveAllSubActions();var u=o.slice(1),l=o[0];u.forEach(function(e,t){l.InsertSubAction(t,e)}),e.SetAction(r,l)}else i.RemoveSubAction(c-1);return!0}function w(e){var t=e.gsdk,n=e.doc,i=e.data,a=e.assertPageIndex;switch(i.zoomMode){case r.ZoomXYZ:return o(function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(r){var i=t.GetPageCount(),a=n.pageIndex;if(isNaN(a)||a<0||a>=i){if(1===i)throw new Error("Incorrect page index: ".concat(a,". It should be 0"));throw new Error("Incorrect page index: ".concat(a,". It should be between [0,").concat(i-1,"]"))}}return e.Destination.CreateXYZ(t,n.pageIndex,n.left,n.top,n.zoomFactor)}(t,n,i,a));case r.ZoomFitPage:return o(function(e,t,n){return e.Destination.CreateFitPage(t,n.pageIndex)}(t,n,i));case r.ZoomFitHorz:return o(function(e,t,n){return e.Destination.CreateFitHorz(t,n.pageIndex,n.top)}(t,n,i));case r.ZoomFitVert:return o(function(e,t,n){return e.Destination.CreateFitVert(t,n.pageIndex,n.left)}(t,n,i));case r.ZoomFitRect:return o(function(e,t,n){return e.Destination.CreateFitRect(t,n.pageIndex,n.left,n.bottom,n.right,n.top)}(t,n,i));case r.ZoomFitBBox:return o(function(e,t,n){return e.Destination.CreateFitBBox(t,n.pageIndex)}(t,n,i));case r.ZoomFitBHorz:return o(function(e,t,n){return e.Destination.CreateFitBHorz(t,n.pageIndex,n.top)}(t,n,i));default:return o(function(e,t,n){return e.Destination.CreateFitBVert(t,n.pageIndex,n.left)}(t,n,i))}function o(e){if(e.IsEmpty())throw new Error("Failed to create 'Destination', please check the parameters: ".concat(JSON.stringify(i)));return e}}function k(e,t,n){var r=new e.FileSpec(t),i=n.buffer,a=n.fileName;if(i&&r.Embed(e.StreamCallback.implement({Release:function(){},GetSize:function(){return i.byteLength},ReadBlock:function(t,n,r){var a=i.slice(n,n+r);return e.HEAPU8.set(a,t),!0}})),r.SetFileName((0,f.Eo)(e,a)),n.description&&r.SetDescription((0,f.Ys)(e,n.description)),n.modifiedDateTime){var o=(0,f._8)(e,n.modifiedDateTime);r.SetModifiedDateTime(o)}return n.subtype&&r.SetSubtype((0,f.Ys)(e,n.subtype)),r}function T(e,t,n,r){var i=r.destination,a=r.destinationName,o=r.rootFile,s=r.newWindowFlag,c=r.target,u=new e.EmbeddedGotoAction(n);if(i){var d=new e.PDFDoc(null,!1),h=w({gsdk:e,doc:d,data:i,assertPageIndex:!1});u.SetDestination(h)}if(a&&u.SetDestinationName((0,f.Ys)(e,a)),!i&&!a)throw new Error("For a embedded goto action, either destination or destinationName is required!");if(o){var g=t;if(o.buffer){var p=o.buffer,v=p.byteLength,m=e._malloc(v);e.HEAPU8.set(new Uint8Array(p),m);var _=e.createPDFDocWithBuffer(m,v),y=_.Load((0,f.Ys)(e,""));if(y!==e.ErrorCode.e_ErrSuccess)throw new Error("Failed to load root file: ".concat(y));o.buffer=void 0,g=_}var S=k(e,g,o);u.SetRootFile(S)}switch(s){case l.NewWindowFlagFalse:case l.NewWindowFlagNone:case l.NewWindowFlagTrue:case void 0:u.SetNewWindowFlag(null!=s?s:l.NewWindowFlagNone);break;default:throw new Error("Unsupported new window flag: ".concat(s,", it should be one of ").concat(Object.values(l).join(", ")))}c&&u.SetTarget(F(e,t,c))}function F(e,t,n){var r=new e.EmbeddedGotoTarget(t);if(r.SetAttachedFileName((0,f.Eo)(e,n.attachedFileName)),r.SetFileAttachmentAnnotIndex(n.fileAttachmentAnnotIndex),r.SetPageIndex(n.pageIndex),r.SetRelationship((0,f.Ys)(e,n.relationship)),n.target){var i=F(e,t,n.target);i.SetTarget(i)}return r}function G(e){var t=e.gsdk,n=e.doc,r=e.action,i=e.data;switch(u(t,r.GetType())){case s.javaScript:!function(e,t,n){var r=n.javascript;if(void 0!==r){var i=new e.JavaScriptAction(t),a=(0,f.Eo)(e,r);i.SetScript(a),a.delete()}}(t,r,i);break;case s.uri:!function(e,t,n){var r=n.uri;if(void 0!==r){var i=new e.URIAction(t),a=(0,f.Ys)(e,r);i.SetURI(a),a.delete()}}(t,r,i);break;case s.launch:!function(e,t,n,r){var i=r.fileSpec;if(i){var a=new e.LaunchAction(n),o=k(e,t,i);a.SetFileSpec(o)}}(t,n,r,i);break;case s.resetForm:!function(e,t,n){var r=n.fieldNames,i=n.flags,a=new e.ResetFormAction(t);if(void 0!==i&&a.SetFlags(i),r){var o=new e.WStringArray;r.forEach(function(t){o.Add((0,f.Eo)(e,t))}),a.SetFieldNames(o)}}(t,r,i);break;case s.submitForm:!function(e,t,n){var r=n.flags,i=n.fieldNames,a=n.address,o=new e.SubmitFormAction(t);if(o.SetFlags(r),void 0!==a){var s=a;a.toLowerCase().startsWith("mailto:")||(s="mailto:".concat(a)),o.SetURL((0,f.Ys)(e,s))}if(i){var c=new e.WStringArray;i.forEach(function(t){c.Add((0,f.Eo)(e,t))}),o.SetFieldNames(c)}}(t,r,i);break;case s.importData:!function(e,t,n,r){var i=r.fileSpec;if(i){var a=new e.ImportDataAction(n),o=k(e,t,i);a.SetFDFFileSpec(o)}}(t,n,r,i);break;case s.goto:!function(e,t,n,r){var i=r.destination;if(i){var a=new e.GotoAction(n),o=w({gsdk:e,doc:t,data:i});a.SetDestination(o)}}(t,n,r,i);break;case s.gotoR:!function(e,t,n,r){var i=r.destination,a=r.fileSpec,o=r.newWindowFlag,s=new e.RemoteGotoAction(n);if(i){var c=new e.PDFDoc(null,!1),u=w({gsdk:e,doc:c,data:i,assertPageIndex:!1});s.SetDestination(u)}if(a){var l=k(e,t,a);s.SetFileSpec(l)}void 0!==o&&s.SetNewWindowFlag({value:o})}(t,n,r,i);break;case s.gotoE:T(t,n,r,i);break;case s.hide:!function(e,t,n){var r=n.fieldNames;if(r){var i=new e.HideAction(t),a=new e.WStringArray;r.forEach(function(t){var n=(0,f.Eo)(e,t);a.Add(n)}),i.SetHideState(n.hideState),i.SetFieldNames(a),a.delete()}}(t,r,i);break;case s.named:!function(e,t,n){var r=n.name;if(r){var i=new e.NamedAction(t),a=(0,f.Ys)(e,r);i.SetName(a)}}(t,r,i);break;case s.setOCGState:!function(e,t,n,r){if(r){var i=new e.SetOCGStateAction(n),a=new e.LayerTree(t),o=new e.LayerContext(t,e.UsageType.e_UsageView),s=new e.PDFDictionaryArray,c=new e.PDFDictionaryArray,u=function(e){var t=e.GetChildrenCount();if(t)for(var n=0;n<t;n++){var r=e.GetChild(n);u(r)}else{var i=o.IsVisible(e),a=e.GetDict();i?s.Add(a):c.Add(a)}};if(!a.IsEmpty())for(var l=a.GetRootNode(),d=l.GetChildrenCount(),h=0;h<d;h++){var f=l.GetChild(h);u(f)}i.InsertOCGStates(t,0,e.OCGState.e_OCGStateOn,s),i.InsertOCGStates(t,0,e.OCGState.e_OCGStateOff,c)}}(t,n,r,i);break;case s.thread:!function(e,t,n,r){if(r.isDestThreadInCurrentDoc){var i=new e.ThreadAction(n),a=new e.FileSpec(t);i.SetDestinationThreadIndex(a,r.destThreadIndex)}}(t,n,r,i)}return r}function R(e,t){var n={value:t.trigger};return function(e,t,n){var r=t.targetActionObjNumber,i=t.direction,a=t.trigger,o={value:a},s=x(e),c=s.findIndex(function(e){return e.GetDict().GetObjNum()===r});if(-1===c)throw new Error("Cannot found action by this obj number: ".concat(r));var u="down"===i?c+1:c-1;if(u<0||u>=s.length)return!1;if(0===u||0===c){e.RemoveAllSubActions(),null==n||n.RemoveAction(o);var l=0==c?u:c,d=s[l];null==n||n.SetAction(o,d),s.splice(l,1);for(var h=0;h<s.length;h++)d.InsertSubAction(h,s[h])}else{var f;e.RemoveAllSubActions(),f=[s[u],s[c]],s[c]=f[0],s[u]=f[1];for(var g=1;g<s.length;g++)e.InsertSubAction(g,s[g])}return!0}(e.GetAction(n),t,e)}function x(e){if(e.IsEmpty())return[];var t=[e];function n(e,t){var r=e.GetSubAction(t),i=Array.from({length:r.GetSubActionCount()},function(e,t){return n(r,t)});return[r].concat(i)}var r=Array.from({length:e.GetSubActionCount()},function(t,r){return n(e,r)}).flat(1/0).filter(function(e){return!e.IsEmpty()});return t.concat(r)}function O(e,t,n,r){var i=r.trigger,a=r.targetActionObjNumber,o=r.direction,s={value:i},c=n.GetAction(s),u=x(t),l=x(c),d=u.concat(l),h=d.findIndex(function(e){return e.GetDict().GetObjNum()===a});if(-1===h)throw new Error("Cannot found action by this obj number: ".concat(a));var f="down"===o?h+1:h-1;if(f<0||f>=d.length)return!1;var g,p=u.length;f<u.length?p=u.length+1:h<u.length&&(p=u.length-1),g=[d[f],d[h]],d[h]=g[0],d[f]=g[1];var v=d.slice(0,p),m=d.slice(p),_=M(v),y=M(m);return _?e.SetAction(_):e.RemoveAction(),y?n.SetAction(s,y):n.RemoveAction(s),!0}function M(e){var t=e[0];if(t)return t.RemoveAllSubActions(),e.slice(1).forEach(function(n,r){var i=e[r+1];i.RemoveAllSubActions(),t.InsertSubAction(r,i)}),t}function N(e,t){if(!e.IsEmpty()){if(e.GetDict().GetObjNum()===t)return{action:e,index:-1};var n=function(e){for(var r=e.GetSubActionCount(),i=0;i<r;i++){var a=e.GetSubAction(i);if(!a.IsEmpty()){if(a.GetDict().GetObjNum()===t)return{parent:e,action:a,index:i};var o=n(a);if(o)return o;(0,f.xF)(a)}}};return n(e)}}function B(e){return(0,g._)(function(e){var t,n,r,i,a,o,s,c,u,l,d;return(0,p.Jh)(this,function(h){switch(h.label){case 0:return t=e.gsdk,n=e.doc,r=e.additionalAction,i=e.trigger,a=e.actionData,o=e.validator,[4,(void 0===o?function(){return Promise.resolve(!0)}:o)()];case 1:return h.sent()?(s={value:i},c=(0,f.Ys)(t,"JS"),u=t.Action.Create(n,t.ActionType.e_TypeJavaScript),l=u.GetDict(),d=(0,f.Eo)(t,a.javascript),l.SetAtWString(c,d),r.SetAction(s,u),[2,!0]):[2,!1]}})}).apply(this,arguments)}var L="additional-action-api-channel-id",j="action-executor-action-id",U="annot-action-api-channel",W="bookmark-action-api-channel",H=function(e){return e.BUTTON="button",e.CHECK_BOX="checkbox",e.RADIO="radio",e.LIST_BOX="listbox",e.HIER_LIST_BOX="hier_listbox",e.STATIC_TEXT="static_text",e.EDIT_TEXT="edit_text",e.OK="ok",e.OK_CANCEL="ok_cancel",e.OK_CANCEL_OTHER="ok_cancel_other",e.CLUSTER="cluster",e.IMAGE="image",e.PROGRESS_BAR="progress_bar",e.LINK_TEXT="link_text",e.LINK_GROUP="link_group",e.POPUP="popup",e.GAP="gap",e.VIEW="view",e}({}),K="dialog_event_callback_channel_id",z="fxjse_action_callback_api_channel_id",V="ui-state-manager-channel-id",J=function(e){return e[e.Doc=0]="Doc",e[e.DocAndAnnot=1]="DocAndAnnot",e[e.DocAntStamps=2]="DocAntStamps",e[e.FieldsOnly=3]="FieldsOnly",e}({}),Y=function(e){return e[e.All=0]="All",e[e.CurrentView=1]="CurrentView",e[e.CurrentPage=2]="CurrentPage",e[e.Pages=3]="Pages",e[e.PortfolioSelected=4]="PortfolioSelected",e[e.PortfolioAll=5]="PortfolioAll",e}({}),Z="print-event-callback-api-channel"},8278:(e,t,n)=>{"use strict";function r(e,t){return!(!e||!t)&&(e===t||e.objNumber===t.objNumber&&e.pageIndex===t.pageIndex)}n.d(t,{Xc:()=>a,zR:()=>r});var i=n(8925);function a(e,t){var n=e.GetPage(t.pageIndex);if(!n.IsEmpty()){(0,i.xF)(n);for(var r=n.GetAnnotCount(),a=0;a<r;a++){var o=n.GetAnnot(a);if(o.GetDict().GetObjNum()===t.objNumber)return o;(0,i.xF)(o)}}}},7441:(e,t,n)=>{"use strict";n.d(t,{I:()=>c});var r=n(9227),i=n(7424),a=n(5991),o=n(4570),s=Math.pow(2,24),c=function(){function e(t,n,i,o){(0,r._)(this,e),(0,a._)(this,"r",void 0),(0,a._)(this,"g",void 0),(0,a._)(this,"b",void 0),(0,a._)(this,"a",void 0),this.r=t,this.g=n,this.b=i,this.a=o}return(0,i._)(e,[{key:"toCSS_Hex",value:function(){return"#".concat(u(this.r)).concat(u(this.g)).concat(u(this.b))}},{key:"toCSS_RGB",value:function(){return"rgb(".concat(this.r,",").concat(this.g,",").concat(this.b,")")}},{key:"toRGB",value:function(){return this.r<<16|this.g<<8|this.b}},{key:"toARGB",value:function(){return this.a*s+this.toRGB()}},{key:"toBGR",value:function(){return this.b<<16|this.g<<8|this.r}},{key:"toABGR",value:function(){return this.a*s+this.toBGR()}},{key:"toCSS_RGBA",value:function(){return"rgba(".concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.a/255,")")}},{key:"toHSL",value:function(){var e=this.r/255,t=this.g/255,n=this.b/255,r=Math.min(e,t,n),i=Math.max(e,t,n),a=i-r,o=0,s=0;return(o=0===a?0:i===e?(t-n)/a%6:i===t?(n-e)/a+2:(e-t)/a+4)<0&&(o+=360),s=(i+r)/2,{h:o,s:+(100*(0===a?0:a/(1-Math.abs(2*s-1)))).toFixed(1),l:s=+(100*s).toFixed(1)}}},{key:"toCSS_HSL",value:function(){var e=this.toHSL(),t=e.h,n=e.s,r=e.l;return"hsl(".concat(t,",").concat(n,"%,").concat(r,"%)")}},{key:"toCSS_HSLA",value:function(){var e=this.toHSL(),t=e.h,n=e.s,r=e.l;return"hsla(".concat(t,",").concat(n,"%,").concat(r,"%, ").concat(this.a/255,")")}},{key:"toCMYK",value:function(){return e.convertRGB2CMYK(this.r,this.g,this.b)}},{key:"toHSV",value:function(){return e.convertRGB2HSV(this.r,this.g,this.b)}},{key:"clone",value:function(){return new(0,this.constructor)(this.r,this.g,this.b,this.a)}},{key:"isSameAs",value:function(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}},{key:"asArray",value:function(){return[this.r,this.g,this.b,this.a]}}],[{key:"fromHSLA",value:function(t,n,r,i){var a=(0,o._)(e.convertHSL2rgb(t,n,r),3);return new e(a[0],a[1],a[2],i)}},{key:"fromRGBA",value:function(t,n){var r=(0,o._)(e.separateRGBNumber(t),3);return new e(r[0],r[1],r[2],n)}},{key:"fromARGB",value:function(t){var n=255&t>>24,r=16777215&t;return e.fromRGBA(r,n)}},{key:"fromRGB",value:function(t){return e.fromRGBA(t,255)}},{key:"fromBGR",value:function(t){var n=(255&t)<<16|(t>>8&255)<<8|t>>16&255;return e.fromRGB(n)}},{key:"convertHSL2rgb",value:function(e,t,n){e=Math.min(359,Math.max(0,e)),t=Math.min(100,Math.max(0,t)),n=Math.min(100,Math.max(0,n)),n/=100;var r,i,a,o,s=(t/=100)*(1-Math.abs(2*n-1)),c=s*(1-Math.abs(e/60%2-1)),u=n-s/2;if(e>=0&&e<60)r=(o=[s,c,0])[0],i=o[1],a=o[2];else if(e>=60&&e<120){var l;r=(l=[c,s,0])[0],i=l[1],a=l[2]}else if(e>=120&&e<180){var d;r=(d=[0,s,c])[0],i=d[1],a=d[2]}else if(e>=180&&e<240){var h;r=(h=[0,c,s])[0],i=h[1],a=h[2]}else if(e>=240&&e<300){var f;r=(f=[c,0,s])[0],i=f[1],a=f[2]}else{var g;r=(g=[s,0,c])[0],i=g[1],a=g[2]}return[r,i,a].map(function(e){return Math.round(255*(e+u))})}},{key:"convertRGB2CMYK",value:function(e,t,n){var r=e/255,i=t/255,a=n/255,o=1-Math.max(r,i,a);return{c:(1-r-o)/(1-o),m:(1-i-o)/(1-o),y:(1-a-o)/(1-o),k:o}}},{key:"convertRGB2HSV",value:function(e,t,n){var r=e/255,i=t/255,a=n/255,o=Math.max(r,i,a),s=o-Math.min(r,i,a);return{h:0===s?0:o===r?(i-a)/s*60%6:o===i?60*((a-r)/s+2):60*((r-i)/s+4),s:0===o?0:s/o,v:o}}},{key:"separateRGBNumber",value:function(e){return[e>>16&255,e>>8&255,255&e]}}]),e}();function u(e){var t=e.toString(16);return 1===t.length?"0"+t:t}},7426:(e,t,n)=>{"use strict";n.d(t,{E:()=>r});var r=function(e){return e[e.Pointer=0]="Pointer",e[e.Select=1]="Select",e[e.Cross=2]="Cross",e[e.HBeam=3]="HBeam",e[e.SizeAll=4]="SizeAll",e[e.SizeNESW=5]="SizeNESW",e[e.SizeNS=6]="SizeNS",e[e.SizeNWSE=7]="SizeNWSE",e[e.SizeWE=8]="SizeWE",e[e.SelectCopy=9]="SelectCopy",e[e.SelectDrag=10]="SelectDrag",e[e.SelectNoDrag=11]="SelectNoDrag",e[e.SelectCaption=12]="SelectCaption",e[e.VBeam=13]="VBeam",e[e.Hand=14]="Hand",e}({});new Map([[0,"pointer"],[1,"text"],[2,"crosshair"],[3,"text"],[13,"text"],[14,"grab"],[4,"move"],[5,"nesw-resize"],[6,"ns-resize"],[7,"nwse-resize"],[8,"col-resize"],[9,"copy"],[10,"move"],[11,"move"]])},8703:(e,t,n)=>{"use strict";n.d(t,{N:()=>o});var r=n(9227),i=n(7424),a=n(5991),o=function(){function e(){var t=this;(0,r._)(this,e),(0,a._)(this,"promise",void 0),(0,a._)(this,"resolve",void 0),(0,a._)(this,"reject",void 0),(0,a._)(this,"resolveValue",void 0),(0,a._)(this,"rejectReason",void 0),(0,a._)(this,"isSettled",!1),this.promise=new Promise(function(e,n){t.resolve=function(n){t.isSettled=!0,t.resolveValue=n,e(n)},t.reject=function(e){t.isSettled=!0,t.rejectReason=e,n(e)}})}return(0,i._)(e,[{key:"then",value:function(t,n){var r=new e;return this.promise.then(t,n).then(r.resolve,r.reject),r}},{key:"catch",value:function(t){var n=new e;return this.promise.catch(t).then(n.resolve,n.reject),n}},{key:"finally",value:function(t){var n=new e;return this.promise.finally(t).then(n.resolve,n.reject),n}}],[{key:"resolve",value:function(t){var n=new e;return n.resolve(t),n}},{key:"reject",value:function(t){var n=new e;return n.reject(t),n}}]),e}()},4213:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});var r={0:"Success, and no error occurs.",1:"File cannot be found or could not be opened.",2:"Format is invalid. For files, this may also mean that file is corrupted.",3:"Invalid password. Usually, this error may occur when loading a PDF document with password. When meet this, user should load document again with correct password.",4:"Error handle.",5:"Certificate error: PDF document is encrypted by digital certificate but current user does not have the correct certificate.",6:"Any unknown error occurs.",7:"Invalid license is used to initialize Foxit PDF SDK library.",8:"Parameter error: value of any input parameter for a function is invalid.",9:"Some types are not supported.",10:"Out-of-memory error occurs.",11:"PDF document is encrypted by some unsupported security handler.",12:"Content has not been parsed yet. Usually, this represents PDF page has not been parsed yet.",13:"Expected data or object is not found.",14:"The type of input object or current object is invalid.",15:"New data conflicts with existed data.",16:"Any unknown state occurs.",17:"Data is not ready. Usually this is used as an exception error code when loading document in asynchronous way.",18:"Data of current object is invalid.",19:"XFA loading error.",20:"Current object has not been loaded yet.",21:"Invalid or incorrect state.",22:"(For ConnectedPDF only) The loaded document is not a ConnectedPDF DRM document.",23:"(For ConnectedPDF only) Cannot connect to ConnectedPDF server.",24:"(For ConnectedPDF only) Input user token is invalid.",25:"(For ConnectedPDF only) Current user has no right to open the ConnectedPDF DRM document.",26:"(For ConnectedPDF only) The rights of Current user has expired.",27:"(For ConnectedPDF only) Current device is limited to open the ConnectedPDF DRM document.",28:"(For ConnectedPDF only) Cannot remove the security from ConnectedPDF server.",29:"(For ConnectedPDF only) Cannot get the ACL from ConnectedPDF server.",30:"(For ConnectedPDF only) Cannot set the ACL to ConnectedPDF server.",31:"(For ConnectedPDF only) Loaded document is already a ConnectedPDF document.",32:"(For ConnectedPDF only) Loaded document is already a ConnectedPDF DRM document.",33:"(For ConnectedPDF only) Cannot upload ConnectedPDF document info to ConnectedPDF server.",34:"(For ConnectedPDF only) Cannot upload ConnectedPDF DRM document info to ConnectedPDF server.",35:"(For ConnectedPDF only) The input ConnectedPDF DRM wrapper document is invalid.",36:"(For ConnectedPDF only) Cannot get client ID from ConnectedPDF server.",37:"(For ConnectedPDF only) Cannot get user token from ConnectedPDF server.",38:"(For ConnectedPDF only) Input ACL is invalid.",39:"(For ConnectedPDF only) Input client ID is invalid.",40:"(For OCR only) OCR engine has not been initialized successfully.",41:"(For OCR only) Not enough disk space.",42:"(For OCR only) The trial for OCR module is end.",43:"File or folder path does not exist.",44:"(For compliance only) Compliance engine has not been initialized successfully.",45:"(For compliance only) Invalid unlock code is used to initialize compliance engine.",46:"(For compliance only) Fail to initialize compliance engine.",47:"Time stamp server manager has not been initialized successfully.",48:"(For LTV only) LTV verify mode has not been set.",49:"(For LTV only) Revocation callback for LTV has not been set.",50:"(For LTV only) Fail to switch PDF verion.",51:"(For LTV only) Fail to check DTS.",52:"(For LTV only) Fail to load DSS.",53:"(For LTV only) Fail to load DTS.",54:"(For signature only) The signature being operated needs to be signed.",55:"(For compliance only) Compliance resource file(s) cannot be found or opened. Please check if compliance resource folder and files in this folder are valid.",56:"No default server has been set to time stamp server manager yet.",57:"Cannot use current default time stamp server. Please check if default time stamp server can be used.",58:'No "ConnectedPDF" module right.',59:'No "XFA" module right.',60:'No "Redaction" module right.',61:'No "RMS" module right.',62:'No "OCR" module right.',63:'No "Comparison" module right.',64:'No "Compliance" module right.',65:'No "Optimizer" module right.',66:'No "Conversion" module right.',67:"(For Office-to-PDF conversion only) Office COM has not been initialized successfully.",68:"(For Office-to-PDF conversion only) No Microsoft Office is installed in current system.",69:"(For Excel-to-PDF conversion only) Excel document does not have any content so it cannot be converted to PDF file.",70:'No "LayoutRecognition" module right.',71:"(For ConnectedPDF only) There is some error in response data.",72:"(For PDF Optimizer PDF) There are some objects not image type.",73:'No "AdvEdit" module right.',74:'No "3D" module right.'}},5953:(e,t,n)=>{"use strict";n.d(t,{d:()=>a});var r,i=n(5991),a=function(e){return e.pdf="pdf",e.xfdf="xfdf",e.fdf="fdf",e.xml="xml",e.html="html",e.json="json",e.csv="csv",e.text="text",e.xdp="xdp",e}({});r={},(0,i._)(r,"pdf","pdf"),(0,i._)(r,"xfdf","xfdf"),(0,i._)(r,"fdf","fdf"),(0,i._)(r,"xml","xml"),(0,i._)(r,"html","html"),(0,i._)(r,"json","json"),(0,i._)(r,"csv","csv"),(0,i._)(r,"text","txt"),(0,i._)(r,"xdp","xdp")},2920:(e,t,n)=>{"use strict";n(7990)},4046:(e,t,n)=>{"use strict"},1903:(e,t,n)=>{"use strict";n(4046)},9083:(e,t,n)=>{"use strict";n.d(t,{HD:()=>c,U:()=>o,mf:()=>s,qh:()=>a,y8:()=>u});var r=n(9256);function i(e){return"number"==typeof e}function a(e){return i(e)&&isFinite(e)}function o(e){return i(e)&&Math.floor(e)===e}function s(e){return"function"==typeof e}function c(e){return"string"==typeof e}function u(e){return!!e&&"object"===(void 0===e?"undefined":(0,r._)(e))&&"function"==typeof e.then}},342:(e,t,n)=>{"use strict";n.d(t,{dN:()=>i});var r=Math.pow(2,24);function i(e){var t;return e<16777216?t=255:(t=e/r&255,e&=16777215),{r:e>>16&255,g:e>>8&255,b:255&e,a:t}}},6739:(e,t,n)=>{"use strict";n.d(t,{B5:()=>_.B5,Dg:()=>I.D,E:()=>P.E,EI:()=>m.EI,Eo:()=>_.Eo,Fo:()=>A.F,GO:()=>f.G,HW:()=>b.HW,Il:()=>g.I,JT:()=>s.J,KQ:()=>m.KQ,Ki:()=>u.Z,N5:()=>v.N,N7:()=>h.N7,P6:()=>r.P6,Pu:()=>b.Pu,Qk:()=>c.Q,U:()=>o.U,Wm:()=>b.Wm,Ys:()=>_.Ys,ZT:()=>d.Z,bS:()=>m.bS,dD:()=>i.d,dN:()=>p.dN,dO:()=>y.d,e8:()=>I.e,eE:()=>E.eE,gt:()=>S.g,iB:()=>m.iB,mA:()=>a.mA,nl:()=>D.n,oM:()=>l.Z,qh:()=>o.qh,tZ:()=>r.tZ,tq:()=>E.tq,uB:()=>b.uB,xF:()=>_.xF});var r=n(5082),i=n(5573),a=(n(5854),n(332),n(8439)),o=(n(8650),n(9083)),s=n(896),c=n(8942),u=n(4028),l=n(8803),d=n(6861),h=n(2558),f=(n(443),n(6076)),g=n(7441),p=n(342),v=n(8703),m=(n(4046),n(1903),n(2920),n(7497)),_=n(7153),y=(n(1165),n(5953)),S=n(1312),b=n(5329),I=n(4759),A=n(7415),P=n(7426),D=n(4213),E=n(7994)},5573:(e,t,n)=>{"use strict";n.d(t,{d:()=>i});var r=n(8703);function i(){return new r.N}},1312:(e,t,n)=>{"use strict";function r(e){if(254==e.charCodeAt(0)&&255==e.charCodeAt(1)){for(var t="",n=2;n<e.length;n+=2)t+=String.fromCharCode((e.charCodeAt(n)<<8)+e.charCodeAt(n+1));return t}return e}n.d(t,{g:()=>r})},1827:(e,t,n)=>{"use strict";n.d(t,{t:()=>u});var r=n(9227),i=n(7424),a=n(5991),o=n(5347),s=n(5573),c=function(){function e(t){(0,r._)(this,e),(0,a._)(this,"task",void 0),(0,a._)(this,"cancelled",void 0),(0,a._)(this,"defer",void 0),this.task=t,this.cancelled=!1,this.defer=(0,s.d)()}return(0,i._)(e,[{key:"cancel",value:function(){this.defer.resolve(),this.cancelled=!0}},{key:"isCancelled",value:function(){return this.cancelled}},{key:"promise",get:function(){return this.defer.promise}},{key:"reject",value:function(e){this.defer.reject(e)}},{key:"resolve",value:function(e){this.defer.resolve(e)}}]),e}(),u=function(){function e(){(0,r._)(this,e),(0,a._)(this,"executing",void 0),(0,a._)(this,"insertions",[]),(0,a._)(this,"executions",[]),(0,a._)(this,"isRunning",!1)}return(0,i._)(e,[{key:"notifyExecute",value:function(){var e=this;if(!this.isRunning){this.isRunning=!0;var t=function(){var n,r=e.getAndPopNextExecution();if(r){var i=null===(n=e.executing)||void 0===n?void 0:n.promise,a=function(){if(e.executing=r,r.isCancelled())t();else{var n=r.task;Promise.resolve(function(){try{return n()}catch(e){return Promise.reject(e)}}()).then(function(e){r.resolve(e)},function(e){r.reject(e)}).finally(function(){t()})}};i?i.then(a,a):a()}else e.isRunning=!1};t()}}},{key:"execTasks",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0===e.length)return this.waitForCurrentRunningTasks();var n,r,i=e.map(function(e){return new c(l(e))});t?(n=this.executions).unshift.apply(n,(0,o._)(i)):(r=this.executions).push.apply(r,(0,o._)(i));var a=i[i.length-1].promise;return this.notifyExecute(),a}},{key:"execInverse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;return this.exec(e,t,n,!0)}},{key:"exec",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=("number"==typeof n?Array(n).fill(0).map(function(e,t){return[t]}):n).map(function(n){return(t=e).bind.apply(t,[r].concat((0,o._)(n)))});return this.execTasks(a,i)}},{key:"insert",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=t.map(l).map(function(e){return new c(e)});(r=this.insertions).push.apply(r,(0,o._)(i));var a=Promise.all(i.map(function(e){return e.promise}));return this.notifyExecute(),a}},{key:"resume",value:function(){}},{key:"cancel",value:function(){var e;this.insertions.forEach(function(e){e.cancel()}),this.executions.forEach(function(e){e.cancel()}),null===(e=this.executing)||void 0===e||e.cancel()}},{key:"waitForCurrentRunningTasks",value:function(){var e=this.insertions.concat(this.executions);return this.executing&&e.push(this.executing),Promise.all(e.map(function(e){return e.promise}))}},{key:"waitUntilQuiet",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return new Promise(function(n){var r=function(){setTimeout(function(){e.executions.length>0?r():n(e.waitForCurrentRunningTasks())},t)};r()})}},{key:"getRunningTaskCount",value:function(){return this.executions.filter(function(e){return!e.isCancelled()}).length}},{key:"getAndPopNextExecution",value:function(){var e;return this.insertions.length>0?(e=this.insertions[0],this.insertions.shift()):this.executions.length>0&&(e=this.executions[0],this.executions.shift()),e}}]),e}();function l(e){return"function"==typeof e?e:e.context?Array.isArray(e.args)?(t=e.task).bind.apply(t,[e.context].concat((0,o._)(e.args))):e.task.bind(e.context):e.task;var t}},92:(e,t,n)=>{"use strict";n.d(t,{P:()=>o});var r=n(9227),i=n(7424),a=n(5991),o=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,r._)(this,e),(0,a._)(this,"interval",void 0),(0,a._)(this,"retainLastTask",void 0),(0,a._)(this,"status",void 0),(0,a._)(this,"lastCompleteTime",void 0),(0,a._)(this,"lastTaskPromise",void 0),(0,a._)(this,"retainTaskTimmerId",void 0),this.interval=t,this.retainLastTask=n,this.status="idle",this.lastCompleteTime=0,this.lastTaskPromise=Promise.resolve()}return(0,i._)(e,[{key:"exec",value:function(e,t,n){var r=this,i=function(){if("cancelled"!==r.status){r.status="running";var i=e.apply(n,t||[])||Promise.resolve();r.lastTaskPromise=i.finally(function(){r.lastCompleteTime=Date.now(),"cancelled"!==r.status&&(r.status="idle")})}else r.status="idle"},a=Date.now();if("idle"===this.status)if(a-this.lastCompleteTime>=this.interval){var o=function(){return i(),r.lastTaskPromise};return this.lastTaskPromise.then(o,o)}return this.retainLastTask?new Promise(function(e){clearTimeout(r.retainTaskTimmerId);var t=r.interval-(Date.now()-r.lastCompleteTime)%r.interval;r.retainTaskTimmerId=setTimeout(function(){i(),e(r.lastTaskPromise)},t)}):this.lastTaskPromise}},{key:"waitForLastTask",value:function(){return this.lastTaskPromise}},{key:"cancel",value:function(){this.status="cancelled"}},{key:"isRunning",value:function(){return"running"===this.status}}]),e}()},5082:(e,t,n)=>{"use strict";n.d(t,{P6:()=>i.P,tZ:()=>r.t});var r=n(1827),i=n(92)},7153:(e,t,n)=>{"use strict";n.d(t,{B5:()=>s,Eo:()=>i,Ys:()=>a,xF:()=>o});var r=new(n(8703).N);function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,i=new e.WString(t);return o(i,n),i}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,i=new e.String(t);return o(i,n),i}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;"delete"in e&&"function"==typeof e.delete&&t.promise.finally(function(){try{if(e.isDeleted())return;e.delete()}catch(e){}})}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;"release"in e&&"function"==typeof e.release&&t.promise.finally(function(){try{e.release()}catch(e){}})}r.resolve()},7844:(e,t,n)=>{"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),n=new Date(t),r=n.getFullYear(),i=n.getMonth()+1,a=n.getDate(),o=n.getHours(),s=n.getMinutes(),c=n.getSeconds(),u=n.getMilliseconds(),l=-n.getTimezoneOffset()/60,d=Math.floor(l),h=Math.abs(60*(l-d));return new e.DateTime(r,i,a,o,s,c,u,d,h)}function i(e){if(e.IsValid()){var t=new Date(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.milliseconds),n=e.utc_hour_offset,r=e.utc_minute_offset/60;n<0&&(r=-r);var i=-t.getTimezoneOffset()/60;return Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())+60*(i-n-r)*60*1e3}}function a(e,t){try{return t.toString()}catch(r){t.GetBuffer||(t=t.UTF8Encode());var n=t.GetBuffer();return function(e){if(254==e.charCodeAt(0)&&255==e.charCodeAt(1)){for(var t="",n=2;n<e.length;n+=2)t+=String.fromCharCode((e.charCodeAt(n)<<8)+e.charCodeAt(n+1));return t}return e}(Array.from({length:t.GetLength()},function(t,r){var i=e.HEAP8[n+r]>>>0&255;return String.fromCharCode(i)}).join(""))}}n.d(t,{LY:()=>d,_8:()=>r,$h:()=>a,Bx:()=>i});var o=n(9227),s=n(7424),c=n(5991),u=n(5843),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"application/octet-stream";(0,o._)(this,e),(0,c._)(this,"blob",void 0),this.blob="string"==typeof t?new Blob([],{type:t}):t}return(0,s._)(e,[{key:"set",value:function(e,t){if(e<0)throw new Error("offset must be greater than 0");if(e===this.blob.size){var n=new Blob([this.blob,t],{type:this.blob.type});this.blob=n}else if(e>this.blob.size){var r=new Blob([this.blob,new ArrayBuffer(e-this.blob.size),t],{type:this.blob.type});this.blob=r}else{var i=(0,u._)(t,Blob)?t.size:t.byteLength,a=new Blob([this.blob.slice(0,e),t,this.blob.slice(e+i)],{type:this.blob.type});this.blob=a}}},{key:"sub",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blob.size;return new e(this.blob.slice(t,t+n))}},{key:"extract",value:function(){return this.blob}},{key:"size",get:function(){return this.blob.size}}]),e}(),d=function(){function e(t){var n=this,r=t.gsdk,i=t.mimeType,a=void 0===i?"application/octet-stream":i,s=t.wrapper,u=void 0===s?r.WriterCallback:s;(0,o._)(this,e),(0,c._)(this,"implement",void 0),(0,c._)(this,"raBlob",void 0),this.raBlob=new l(a);var d=0;this.implement=u.implement({Release:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("release",t)},Flush:function(){return!0},GetSize:function(){return d},WriteBlock:function(e,t,i){d+=i;var a,o=r.HEAPU8.buffer;return a=o.slice?o.slice(e,e+i):new Uint8Array(o,e,i).buffer,n.raBlob.set(t,a),!0}})}return(0,s._)(e,[{key:"size",get:function(){return this.raBlob.size}},{key:"getFile",value:function(){return this.raBlob.extract()}}]),e}()},2641:(e,t,n)=>{"use strict";n(8803),n(2645),n(6073),n(4470),n(8297),n(1327),(0,n(4028).Z)("$$ioc-component-instance-initialized")},6073:(e,t,n)=>{"use strict"},332:(e,t,n)=>{"use strict";n(2641),n(6073),n(6542),n(8297),n(1327)},2645:(e,t,n)=>{"use strict";n(5854)},887:(e,t,n)=>{"use strict";n.d(t,{Si:()=>a,sy:()=>s,vU:()=>o});var r=n(5347),i=n(9083);function a(e){(0,i.mf)(e.destroy)&&e.destroy()}function o(e,t){(0,i.mf)(e.pullout)&&e.pullout(t)}function s(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var o;(0,i.mf)(e.addDestroyHook)&&(o=e).addDestroyHook.apply(o,(0,r._)(n))}},4470:(e,t,n)=>{"use strict";n(6073)},6542:(e,t,n)=>{"use strict";n.d(t,{c:()=>u});var r=n(9227),i=n(7424),a=n(5991),o=n(9083),s=n(2862),c=n(887),u=function(){function e(){(0,r._)(this,e),(0,a._)(this,"map",new Map)}return(0,i._)(e,[{key:"getComponentInstance",value:function(e,t){if((0,o.HD)(e))return this.map.get(e);var n=e.$$ioc_instance_name;if((0,o.HD)(n)&&this.map.has(n))return this.map.get(n);e.length>0&&s.Z.getLogger(this+"").warn("Relying on other object instances through constructors is not a good practice",e);var r=1===e.length?new e(t):new e;return this.saveComponentInstance(e,r),r}},{key:"saveComponentInstance",value:function(e,t){var n;if((0,o.HD)(e)?n=e:(n=e.$$ioc_instance_name||this.generateInstanceName(),e.$$ioc_instance_name=n),this.map.has(n))throw new Error("[IoC] An unknown error has occurred: Duplicate requests to create instances of the same type: (".concat(e,")!"));this.map.set(n,t)}},{key:"onInject",value:function(e){var t=e.targetStrategy,n=e.injectInto,r=e.component,i=e.propertyName;t.level>this.level&&(0,c.sy)(r,function(){(0,c.vU)(n,i)})}},{key:"destroyComponents",value:function(){this.map.forEach(function(e){(0,c.Si)(e)}),this.map.clear()}},{key:"define",value:function(e){}}]),e}()},8297:(e,t,n)=>{"use strict";var r=n(4691),i=n(9227),a=n(7424),o=n(5467),s=n(9256),c=n(1327),u="object"===("undefined"==typeof window?"undefined":(0,s._)(window))?window:globalThis,l=function(e){function t(){return(0,i._)(this,t),(0,r._)(this,t,["shared",1/0])}return(0,o._)(t,e),(0,a._)(t,[{key:"destroyComponents",value:function(){}}]),t}(c.A),d=u.__SHARED_IOC_STRATEGY__||new l;u.__SHARED_IOC_STRATEGY__=d},1327:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(4691),i=n(9227),a=n(7424),o=n(5991),s=n(5467),c=n(4028),u=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"singleton",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_SAFE_INTEGER;return(0,i._)(this,t),e=(0,r._)(this,t),(0,o._)(e,"name",void 0),(0,o._)(e,"level",void 0),e.name=n,e.level=a,e}return(0,s._)(t,e),(0,a._)(t,[{key:"generateInstanceName",value:function(){return(0,c.Z)(this.name)}},{key:"registerComponentInstance",value:function(e){var t=e.constructor;this.saveComponentInstance(t,e)}},{key:"registerComponentInstanceByName",value:function(e,t){this.saveComponentInstance(t,e)}}]),t}(n(6542).c)},2574:(e,t,n)=>{"use strict";n.d(t,{P:()=>i});var r=n(9256);function i(e){if("object"!==(void 0===e?"undefined":(0,r._)(e))||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},8439:(e,t,n)=>{"use strict";n.d(t,{mA:()=>r.m});var r=n(2862);n(2919),n(2446)},1565:(e,t,n)=>{"use strict";n.d(t,{b:()=>w});var r=n(5578),i=n(4691),a=n(9227),o=n(7424),s=n(5991),c=n(5467),u=n(5843),l=n(2956),d=n(9149),h=n(5347),f=n(9256),g=n(7582),p=n(5713),v=n(5613),m=n(8439),_=n(896),y=n(9083),S=n(4028),b=n(2574),I=n(8703),A=n(4213),P="undefined"!=typeof WorkerGlobalScope&&(0,u._)(self,WorkerGlobalScope),D=m.mA.getLogger("MessageChannel"),E="function_bcd5156b98f2d";function C(e){return!!e&&e.tag==E&&"string"==typeof e.id}var w=function(e){function t(e,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,a._)(this,t),r=(0,i._)(this,t),(0,s._)(r,"eventTarget",void 0),(0,s._)(r,"channelId",void 0),(0,s._)(r,"receiver",void 0),(0,s._)(r,"returnCallbacks",void 0),(0,s._)(r,"callbackReturnCallbacks",void 0),(0,s._)(r,"invocationCallbacks",void 0),r.eventTarget=e,r.channelId=n,r.receiver=o,r.returnCallbacks=new Map,r.callbackReturnCallbacks=new Map,r.invocationCallbacks=new Map;var c=v.S.getInstance(e);return r.addDestroyHook(c.on(r.channelId,function(e){"return"===e.type?r.handleReturnMessage(e):"invoke"===e.type?r.handleInvokeMessage(e):"callback"===e.type?r.handleCallback(e):"callback-return"===e.type?r.handleCallbackReturn(e):"revoke-callback"===e.type&&r.revokeCallback(e)})),r}return(0,c._)(t,e),(0,o._)(t,[{key:"revokeCallback",value:function(e){var t=this.invocationCallbacks.get(e.invocationId);t&&(t.get(e.callbackId)&&t.delete(e.callbackId),0===t.size&&this.invocationCallbacks.delete(e.invocationId))}},{key:"handleCallback",value:function(e){return(0,r._)(function(){var t,n,r,i,a;return(0,g.Jh)(this,function(o){switch(o.label){case 0:if(t=this.invocationCallbacks.get(e.invocationId),!(n=null==t?void 0:t.get(e.callbackId)))return[2];o.label=1;case 1:return o.trys.push([1,5,,6]),r=n.apply(void 0,(0,h._)(e.args||[])),(0,y.y8)(r)?[4,r]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r,o.label=4;case 4:return this.eventTarget.postMessage({name:p.K,type:"callback-return",invocationId:e.invocationId,callbackId:e.callbackId,channelId:this.channelId,status:"resolve",value:i}),[3,6];case 5:return a=o.sent(),this.eventTarget.postMessage({name:p.K,type:"callback-return",invocationId:e.invocationId,callbackId:e.callbackId,channelId:this.channelId,status:"reject",reason:null==a?void 0:a.toString()}),[3,6];case 6:return[2]}})}).call(this)}},{key:"handleCallbackReturn",value:function(e){var t=this.callbackReturnCallbacks.get(e.invocationId+e.callbackId);t&&t(e)}},{key:"handleInvokeMessage",value:function(e){var t=this;var n=function(n){var r=new Map,i=t.serializeMessageData([n],r)[0];t.invocationCallbacks.set(e.invocationId,r),t.eventTarget.postMessage({type:"return",name:p.K,channelId:t.channelId,invocationId:e.invocationId,data:{status:"resolved",value:i}},t.collectTransferables([n]))},r=function(n){t.eventTarget.postMessage({type:"return",name:p.K,channelId:t.channelId,invocationId:e.invocationId,data:{status:"rejected",reason:n}})},i=this.deserializeMessageData(e.invocationId,e.args);try{var a,o=(a=this.receiver)[e.method].apply(a,(0,h._)(i));(0,y.y8)(o)?o.then(n,r):n(o)}catch(n){if(r(n),!P)throw n;!function(n){if("number"==typeof n){var r=getErrorCode(n);n=A.n[r.value],D.error("An error occurred while calling a remote method:",{receiver:t.receiver,invokeMessage:e,errorCode:r,reason:n})}else D.error("An error occurred while calling a remote method:",{receiver:t.receiver,invokeMessage:e,reason:n})}(n)}}},{key:"handleReturnMessage",value:function(e){var t=this.returnCallbacks.get(e.invocationId);t&&t(e)}},{key:"invoke",value:function(e,t){var n=this,r="message-channel-callback-".concat(this.channelId,"-").concat(e,"-").concat(Date.now(),"-").concat(Math.random()),i=new Map,a=this.serializeMessageData(t,i);this.invocationCallbacks.set(r,i),this.eventTarget.postMessage({type:"invoke",name:p.K,channelId:this.channelId,invocationId:r,method:e,args:a},this.collectTransferables(t));var o=new I.N;return this.returnCallbacks.set(r,function(e){var t=e.data;if("rejected"===t.status)o.reject(t.reason);else{var i=n.deserializeMessageData(r,[t.value])[0];o.resolve(i)}n.returnCallbacks.delete(r)}),o}},{key:"invokeCallback",value:function(e,t,n){var r=this,i=this.collectTransferables(n),a=new I.N;return this.eventTarget.postMessage({type:"callback",name:p.K,channelId:this.channelId,callbackId:t,invocationId:e,args:n},i),this.callbackReturnCallbacks.set(e+t,function(n){"resolve"===n.status?a.resolve(n.value):a.reject(n.reason),r.callbackReturnCallbacks.delete(e+t)}),a.promise}},{key:"remoteImplementation",get:function(){var e=this;return new Proxy({},{has:function(e){return"then"!==e&&"string"==typeof e},get:function(t,n,r){var i=e;if("symbol"!==(void 0===n?"undefined":(0,f._)(n))&&"then"!==n)return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i.invoke(n,t)}}})}},{key:"deserializeMessageData",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,i=function(t){if(C(t)){var r=n,i=t.id,a=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return r.invokeCallback(e,i,n)};return Object.assign(a,{revoke:function(){n.eventTarget.postMessage({type:"revoke-callback",name:p.K,channelId:n.channelId,invocationId:e,callbackId:i})}}),a}return t};return t.map(function(t){if(r.has(t))return r.get(t);if(Array.isArray(t)){var a,o=[];r.set(t,o);var s=t.map(function(t){return r.has(t)?r.get(t):(a=C(t)?i(t):n.deserializeMessageData(e,[t],r)[0],r.set(t,a),a);var a});return(a=o).push.apply(a,(0,h._)(s)),o}if((0,b.P)(t)){if(C(t)){var c=i(t);return r.set(t,c),c}var u={};r.set(t,u);var l=Object.getOwnPropertyDescriptors(t);for(var d in l){var g=t[d];if(C(g)&&g.isGetter){var p={get:i(g)};Object.defineProperty(u,d,p)}else if(r.has(g))u[d]=r.get(g);else if((0,y.mf)(g)){var v=i(g);r.set(g,v),u[d]=v}else if(g&&"object"===(void 0===g?"undefined":(0,f._)(g))){var m=n.deserializeMessageData(e,[g],r)[0];u[d]=m}else u[d]=g}return u}return t})}},{key:"serializeMessageData",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,i=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((0,y.mf)(e)){var r=(0,S.Z)("func");return t.set(r,e),{tag:E,id:r,isGetter:n}}return e};return e.map(function(e){if(r.has(e))return e;if(r.add(e),Array.isArray(e))return e.map(function(e){return(0,y.mf)(e)?i(e):n.serializeMessageData([e],t,r)[0]});if((0,b.P)(e)){var a=Object.getOwnPropertyDescriptors(e),o={};for(var s in a){var c=a[s];if(c.get)if("undefined"!=typeof window)o[s]=e[s];else{var u=(0,d._)((0,l._)({},c),{value:i(c.get,!0)});delete u.get,delete u.set,Object.defineProperty(o,s,u)}else(0,y.mf)(e[s])?o[s]=i(e[s]):c.writable?o[s]=n.serializeMessageData([e[s]],t,r)[0]:(c.value=n.serializeMessageData([e[s]],t,r)[0],Object.defineProperty(o,s,c))}return o}return i(e)})}},{key:"collectTransferables",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,r=[];return e.forEach(function(e){if(!n.has(e))if(n.add(e),function(e){return(0,u._)(e,Uint8Array)||(0,u._)(e,Uint16Array)||(0,u._)(e,Uint32Array)||(0,u._)(e,Int8Array)||(0,u._)(e,Int16Array)||(0,u._)(e,Int32Array)||(0,u._)(e,Uint8ClampedArray)}(e))r.push(e.buffer);else if(function(e){return(0,u._)(e,ArrayBuffer)||"undefined"!=typeof OffscreenCanvas&&(0,u._)(e,OffscreenCanvas)||(0,u._)(e,MessagePort)||globalThis.ReadableStream&&(0,u._)(e,globalThis.ReadableStream)||globalThis.WritableStream&&(0,u._)(e,globalThis.WritableStream)||globalThis.TransformStream&&(0,u._)(e,globalThis.TransformStream)||globalThis.VideoFrame&&(0,u._)(e,globalThis.VideoFrame)||globalThis.ImageBitmap&&(0,u._)(e,globalThis.ImageBitmap)}(e))r.push(e);else if(Array.isArray(e)){var i;(i=r).push.apply(i,(0,h._)(t.collectTransferables(e,n)))}else if((0,b.P)(e)){var a;(a=r).push.apply(a,(0,h._)(t.collectTransferables(Object.values(e),n)))}}),r}}]),t}(_.Z)},5613:(e,t,n)=>{"use strict";n.d(t,{S:()=>u});var r=n(4691),i=n(9227),a=n(7424),o=n(5991),s=n(5467),c=n(5713),u=function(e){function t(e){var n;(0,i._)(this,t),n=(0,r._)(this,t),(0,o._)(n,"eventTarget",void 0),(0,o._)(n,"channelListeners",void 0),n.eventTarget=e,n.channelListeners=new Map;var a=function(e){var t=e.data;if(t&&t.name===c.K){var r=n.channelListeners.get(t.channelId);r&&r(t)}};return n.eventTarget.addEventListener("message",a),n.addDestroyHook(function(){t.instances.delete(e),n.eventTarget.removeEventListener("message",a)}),n}return(0,s._)(t,e),(0,a._)(t,[{key:"on",value:function(e,t){var n=this;return this.channelListeners.set(e,t),function(){n.channelListeners.delete(e)}}}],[{key:"getInstance",value:function(e){return this.instances.has(e)?this.instances.get(e):new t(e)}}]),t}(n(896).Z);(0,o._)(u,"instances",new WeakMap)},3703:(e,t,n)=>{"use strict";n(8925)},4769:(e,t,n)=>{"use strict";n.d(t,{i:()=>v});var r=n(9227),i=n(7424),a=n(5991),o=n(5843),s=n(7582);function c(){if("undefined"!=typeof window){if(window.crypto)return e=new Uint32Array(1),window.crypto.getRandomValues(e),e[0]/4294967296;if(window.msCrypto)return function(){var e=new Uint32Array(1);return window.msCrypto.getRandomValues(e),e[0]/4294967296}()}var e;return Math["random"]()}var u="$$u8a",l="$$buffer",d="$$blob",h="$$file";function f(e){if("string"==typeof e&&""!==e.trim())return JSON.parse(e,function(e,t){switch(null==t?void 0:t.type){case u:var n=t.data,r=g(n);return URL.revokeObjectURL(n),new Uint8Array(r);case l:var i=t.data,a=g(i);return URL.revokeObjectURL(i),a;case h:var o=t.data,s=o.url,c=o.mime,f=o.name,p=g(s);return URL.revokeObjectURL(s),new File([p],f,{type:c});case d:var v=t.data,m=v.url,_=v.mime,y=g(m);return URL.revokeObjectURL(m),new Blob([y],{type:_})}return t})}function g(e){var t=new XMLHttpRequest;return t.responseType="arraybuffer",t.open("GET",e,!1),t.send(),t.response}var p=n(8703),v=function(){function e(t,n){(0,r._)(this,e),(0,a._)(this,"syncBaseUrl",void 0),(0,a._)(this,"clientId",void 0),this.syncBaseUrl=t,this.clientId=n}return(0,i._)(e,[{key:"send",value:function(e,t){var n=new XMLHttpRequest;return n.open("PUT",this.syncBaseUrl,!1),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("cache-control","no-cache"),n.send(JSON.stringify({id:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*c()|0;return("x"==e?t:3&t|8).toString(16)}),clientId:this.clientId,type:"SyncGeneratorInvoker",action:e,data:t})),n.responseText}},{key:"start",value:function(){this.send("start")}},{key:"wait",value:function(){return f(this.send("wait"))}},{key:"done",value:function(){var e=f(this.send("done")),t=(e.returnData,e.messages);if(t){var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if("worker-message"===s.status){var c=new MessageEvent("message",{data:s.data});globalThis.dispatchEvent(c)}}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}}},{key:"invokeSync",value:function(e){var t,n,r,i,a;return(0,s.Jh)(this,function(s){switch(s.label){case 0:if(this.start(),t=e(),!(0,o._)(t,p.N))throw new Error("Only asynchronous method calls driven by MessageChannel are supported!!");s.label=1;case 1:return t.isSettled?(this.done(),[2,t.resolveValue]):(n=this.wait(),r=n.status,i=n.data,"done"!==r?[3,2]:[2,i]);case 2:if("error"!==r)return[3,3];throw i;case 3:return"data"!==r?[3,5]:[4,i];case 4:return s.sent(),[3,6];case 5:"worker-message"===r&&(a=new MessageEvent("message",{data:i}),globalThis.dispatchEvent(a)),s.label=6;case 6:return[3,1];case 7:return[2]}})}},{key:"invokeSyncAndReturn",value:function(e){for(var t=this.invokeSync(e);;){var n=t.next(),r=n.done,i=n.value;if(r)return i}}}]),e}()},5713:(e,t,n)=>{"use strict";n.d(t,{K:()=>r});var r="message-channel-message-name-lnQiP2FiI"},7497:(e,t,n)=>{"use strict";n.d(t,{EI:()=>o.E,KQ:()=>i.K,bS:()=>r.b,iB:()=>a.i});var r=n(1565),i=n(5713),a=(n(3703),n(4769)),o=n(2390)},2390:(e,t,n)=>{"use strict";function r(e){return"function"==typeof e&&"revoke"in e&&"function"==typeof e.revoke}n.d(t,{E:()=>r})},8650:(e,t,n)=>{"use strict";n(1338)},1338:()=>{"use strict"},5329:(e,t,n)=>{"use strict";function r(e){return"annot"===e.type&&"annotId"in e}function i(e){return"field"===e.type&&"fieldName"in e}function a(e){return"field"===e.type&&"widgetId"in e}function o(e){switch(e.type){case"annot":if("annot"in e){var t=e.annot;return{type:"annot",annotId:{pageIndex:t.GetPage().GetIndex(),objNumber:t.GetDict().GetObjNum()}}}case"field":if("field"in e)return{type:"field",fieldName:e.field.GetName().toString()}}return e}n.d(t,{HW:()=>o,Pu:()=>r,Wm:()=>i,uB:()=>a})},2583:(e,t,n)=>{"use strict";n(8487)},5854:(e,t,n)=>{"use strict";n(8487),n(2583)},4759:(e,t,n)=>{"use strict";n.d(t,{D:()=>i,e:()=>r});var r="spell-checker-api-channel-id",i="custom-spell-checker-remote-api"},2558:(e,t,n)=>{"use strict";n.d(t,{N7:()=>f});var r=n(4691),i=n(9227),a=n(7424),o=n(5991),s=n(5467),c=n(9256),u=n(6861),l=n(896),d=Promise.resolve(),h=function(e){function t(){var e;return(0,i._)(this,t),e=(0,r._)(this,t),(0,o._)(e,"__data",{}),(0,o._)(e,"subscribers",{}),(0,o._)(e,"reducers",[]),(0,o._)(e,"filters",[]),e.addDestroyHook(function(){e.reducers.length=0,e.filters.length=0,e.subscribers={},e.clear()}),e}return(0,s._)(t,e),(0,a._)(t,[{key:"getCurrentValue",value:function(e,t){if(arguments.length>1&&!this.has(e))return t;var n=this.__data[e];return this.reducers.reduce(function(t,n){return n(t,e)},n)}},{key:"forEach",value:function(e){if("function"!=typeof e)throw new Error((void 0===e?"undefined":(0,c._)(e))+" is not a function!");for(var t in this.__data)e(this.getCurrentValue(t),t)}},{key:"has",value:function(e){return e in this.__data}},{key:"dispatch",value:function(e,t){var n=this;if(this.isDestroyed)return d;this.__data[e]=t;var r=this.subscribers[e]||[],i=this.getCurrentValue(e);return(0===this.filters.length||this.filters.some(function(e){return e(t)}))&&r.length?Promise.all(r.slice(0).map(function(t){return t.call(n,i,e)})):d}},{key:"unDispatch",value:function(e){this.isDestroyed||delete this.__data[e]}},{key:"remove",value:function(e){this.isDestroyed||(delete this.__data[e],this.subscribers[e]=[])}},{key:"subscribe",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.Z;if(this.isDestroyed)return function(){};var r,i=!1,a=this.subscribers[e]||(this.subscribers[e]=[]),o=function(){if(!i)return n.call(t,t.getCurrentValue(e),e)};return a.push(o),e in this.__data&&Promise.resolve().then(o),function(){if(i)return r;i=!0;var e=a.indexOf(o);return r=e>-1&&a.splice(e,1).length>0}}},{key:"subscribeNextOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.Z,r=this.has(e)?2:1,i=this.subscribe(e,function(a){if(0===--r)return i(),n.call(t,a,e)});return i}},{key:"subscribeOnce",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.Z,n=this.subscribe(e,function(e,r){return n&&n(),t.apply(this,[e,r])});return n}},{key:"takeWhile",value:function(e){var t=this;return new Promise(function(n){t.subscribeOnce(e,function(e){n(e)})})}},{key:"takeUntil",value:function(e,t){var n=this;return new Promise(function(r){var i=n.subscribe(e,function(e){t(e)&&(r(),i())})})}},{key:"reducer",value:function(e){var t=this;if(this.isDestroyed)return u.Z;if("function"!=typeof e)return u.Z;var n=e.bind(this);return this.reducers.push(n),function(){var e=t.reducers.indexOf(n);return e>-1&&t.reducers.splice(e,1).length>0}}},{key:"filter",value:function(e){var t=this;if(!this.isDestroyed){if("function"!=typeof e)return u.Z;var n=function(t){return e(t)};return this.filters.push(n),function(){var e=t.filters.indexOf(n);-1!==e&&t.filters.splice(e,1)}}}},{key:"clear",value:function(){this.__data={}}}]),t}(l.Z),f=function(e){function t(e){var n;return(0,i._)(this,t),n=(0,r._)(this,t),(0,o._)(n,"store",new h),(0,o._)(n,"key","k"),n.addDestroyHook(n.store),e&&n.dispatch(e),n}return(0,s._)(t,e),(0,a._)(t,[{key:"getCurrentValue",value:function(e){return this.store.has(this.key)?this.store.getCurrentValue(this.key):e}},{key:"dispatch",value:function(e){return this.store.dispatch(this.key,e)}},{key:"subscribe",value:function(e){return this.store.subscribe(this.key,function(t){return e(t)})}},{key:"subscribeOnce",value:function(e){return this.store.subscribeOnce(this.key,function(t){return e(t)})}},{key:"subscribeNextOne",value:function(e){return this.store.subscribeNextOne(this.key,e)}},{key:"takeWhile",value:function(){return this.store.takeWhile(this.key)}},{key:"takeUntil",value:function(e){return this.store.takeUntil(this.key,e)}},{key:"filter",value:function(e){return this.store.filter(e)}},{key:"reduce",value:function(e){return this.store.reducer(function(t){return e(t)})}},{key:"unDispatch",value:function(){this.store.unDispatch(this.key)}},{key:"remove",value:function(){this.store.remove(this.key)}}]),t}(l.Z)},7415:(e,t,n)=>{"use strict";n.d(t,{F:()=>c});var r=n(9227),i=n(7424),a=n(5991),o=Symbol("initialized"),s=o,c=function(){function e(){(0,r._)(this,e),(0,a._)(this,"stack",[]),(0,a._)(this,"position",0),(0,a._)(this,s,!1)}return(0,i._)(e,[{key:"initialized",get:function(){return this[o]}},{key:"initialize",value:function(e){if(this.initialized)throw new Error("Cannot initialize twice");this[o]=!0,this.stack.push(e),this.position=0}},{key:"save",value:function(e){if(!this.initialized)throw new Error("Cannot save before initialization");this.stack.push(e),this.position=this.stack.length-1}},{key:"current",value:function(){return this.stack[this.position]}},{key:"undo",value:function(){this.canUndo()&&this.position--}},{key:"redo",value:function(){this.canRedo()&&this.position++}},{key:"canUndo",value:function(){return this.position>0}},{key:"canRedo",value:function(){return this.position<this.stack.length}},{key:"reset",value:function(){this.stack.length=0,this[o]=!1,this.position=0}}]),e}()},443:(e,t,n)=>{"use strict";var r=n(7990),i=n.n(r),a=n(8366),o=n.n(a),s=n(4231),c=n.n(s),u=n(1434),l=n.n(u),d=n(7983),h=n.n(d),f=n(1128),g=n.n(f),p=n(579),v=n.n(p),m=n(7074),_=n.n(m),y=n(890),S=n.n(y),b=n(8990),I=n.n(b),A=n(5522),P=n.n(A),D=n(3765),E=n.n(D),C=n(5576),w=n.n(C),k=n(859),T=n.n(k),F=n(4883),G=n.n(F);i().locale(g()),i().locale(v()),i().locale(_()),i().locale(S()),i().locale(I()),i().locale(I()),i().locale(P()),i().locale(E()),i().locale(w()),i().locale(T()),i().locale(I()),i().locale(G()),i().extend(o()),i().extend(c()),i().extend(l()),i().extend(h())},8925:(e,t,n)=>{"use strict";n.d(t,{$h:()=>i.$h,B5:()=>r.B5,Bx:()=>i.Bx,Dg:()=>r.Dg,E:()=>r.E,EF:()=>a,EI:()=>r.EI,Eo:()=>r.Eo,Fo:()=>r.Fo,GO:()=>r.GO,HW:()=>r.HW,Il:()=>r.Il,JT:()=>r.JT,KQ:()=>r.KQ,Ki:()=>r.Ki,LY:()=>i.LY,N5:()=>r.N5,N7:()=>r.N7,P6:()=>r.P6,Pu:()=>r.Pu,Qk:()=>r.Qk,U:()=>r.U,Wm:()=>r.Wm,Ys:()=>r.Ys,ZT:()=>r.ZT,_8:()=>i._8,bS:()=>r.bS,dD:()=>r.dD,dN:()=>r.dN,dO:()=>r.dO,e8:()=>r.e8,eE:()=>r.eE,gt:()=>r.gt,iB:()=>r.iB,mA:()=>r.mA,nl:()=>r.nl,oM:()=>r.oM,qh:()=>r.qh,tZ:()=>r.tZ,tq:()=>r.tq,uB:()=>r.uB,xF:()=>r.xF});var r=n(6739),i=n(7844);function a(){return{x:96,y:96}}},4493:(e,t,n)=>{"use strict";r({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'"}),r({"&amp;":"&","&lt;":"<","&gt;":">","&nbsp;":"","&iexcl;":"","&cent;":"","&pound;":"","&curren;":"","&yen;":"","&brvbar;":"","&sect;":"","&uml;":"","&copy;":"","&ordf;":"","&laquo;":"","&not;":"","&shy;":"","&reg;":"","&macr;":"","&deg;":"","&plusmn;":"","&sup2;":"","&sup3;":"","&acute;":"","&micro;":"","&para;":"","&cedil;":"","&sup1;":"","&ordm;":"","&raquo;":"","&frac14;":"","&frac12;":"","&frac34;":"","&iquest;":"","&times;":"","&divide;":"","&forall;":"","&part;":"","&exist;":"","&empty;":"","&nabla;":"","&isin;":"","&notin;":"","&ni;":"","&prod;":"","&sum;":"","&minus;":"","&lowast;":"","&radic;":"","&prop;":"","&infin;":"","&ang;":"","&and;":"","&or;":"","&cap;":"","&cup;":"","&int;":"","&there4;":"","&sim;":"","&cong;":"","&asymp;":"","&ne;":"","&equiv;":"","&le;":"","&ge;":"","&sub;":"","&sup;":"","&nsub;":"","&sube;":"","&supe;":"","&oplus;":"","&otimes;":"","&perp;":"","&sdot;":"","&Alpha;":"","&Beta;":"","&Gamma;":"","&Delta;":"","&Epsilon;":"","&Zeta;":"","&Eta;":"","&Theta;":"","&Iota;":"","&Kappa;":"","&Lambda;":"","&Mu;":"","&Nu;":"","&Xi;":"","&Omicron;":"","&Pi;":"","&Rho;":"","&Sigma;":"","&Tau;":"","&Upsilon;":"","&Phi;":"","&Chi;":"","&Psi;":"","&Omega;":"","&alpha;":"","&beta;":"","&gamma;":"","&delta;":"","&epsilon;":"","&zeta;":"","&eta;":"","&theta;":"","&iota;":"","&kappa;":"","&lambda;":"","&mu;":"","&nu;":"","&xi;":"","&omicron;":"","&pi;":"","&rho;":"","&sigmaf;":"","&sigma;":"","&tau;":"","&upsilon;":"","&phi;":"","&chi;":"","&psi;":"","&omega;":"","&thetasym;":"","&upsih;":"","&piv;":"","&OElig;":"","&oelig;":"","&Scaron;":"","&scaron;":"","&Yuml;":"","&fnof;":"","&circ;":"","&tilde;":"","&ensp;":"","&emsp;":"","&thinsp;":"","&zwnj;":"","&zwj;":"","&lrm;":"","&rlm;":"","&ndash;":"","&mdash;":"","&lsquo;":"","&rsquo;":"","&sbquo;":"","&ldquo;":"","&rdquo;":"","&bdquo;":"","&dagger;":"","&Dagger;":"","&bull;":"","&hellip;":"","&permil;":"","&prime;":"","&Prime;":"","&lsaquo;":"","&rsaquo;":"","&oline;":"","&euro;":"","&trade;":"","&larr;":"","&uarr;":"","&rarr;":"","&darr;":"","&harr;":"","&crarr;":"","&lceil;":"","&rceil;":"","&lfloor;":"","&rfloor;":"","&loz;":"","&spades;":"","&clubs;":"","&hearts;":"","&diams;":""});function r(e){return Object.keys(e).reduce(function(t,n){return t[e[n]]=n,t},{})}},1165:(e,t,n)=>{"use strict";n(4493)},5435:(e,t,n)=>{"use strict";n.d(t,{n6:()=>h.n6,Us:()=>h.Us,dU:()=>d,mT:()=>a,pJ:()=>c,Un:()=>r,KH:()=>o,VW:()=>l,Yp:()=>s,J4:()=>T,Q9:()=>_,fS:()=>f,Hs:()=>g,aG:()=>i,U4:()=>B,rK:()=>k,N1:()=>F,D:()=>N,Ti:()=>O,Bz:()=>M,O5:()=>u,IQ:()=>J,BG:()=>p,Qd:()=>G,JR:()=>m,fj:()=>x,fP:()=>R,S0:()=>v,mX:()=>U,pj:()=>L,wM:()=>j,Db:()=>H,le:()=>W,Fy:()=>w,q$:()=>P,Y7:()=>C,R:()=>I,lG:()=>b,dS:()=>E,K4:()=>D,lM:()=>A,fD:()=>y,mw:()=>S,oe:()=>K,kA:()=>V,il:()=>h.E9});var r="form-field-api-channel-id",i=function(e){return e.NONE="none",e.CUT="cut",e.COPY="copy",e.PASTE="paste",e.DELETE="delete",e.SELECT_ALL="select-all",e}({}),a="filler-controller-channel-id",o="form-filler-editor-api-channel-id",s="form-filler-widget-property-api-channel-id",c="pdf-form-api-channel-id",u="submit-format-unsupported-destination-error",l="form-signature-api-channel-id",d="esign-cn-api-channel-id",h=n(4099),f=function(e){return e[e.Unknown=0]="Unknown",e[e.PushButton=1]="PushButton",e[e.CheckBox=2]="CheckBox",e[e.RadioButton=3]="RadioButton",e[e.Text=6]="Text",e[e.ListBox=5]="ListBox",e[e.ComboBox=4]="ComboBox",e[e.Sign=7]="Sign",e[e.Barcode=8]="Barcode",e}({}),g=function(e){return e[e.NONE=0]="NONE",e[e.PUSH_BUTTON_AND_IMAGE=1]="PUSH_BUTTON_AND_IMAGE",e[e.CHECK_BOX=2]="CHECK_BOX",e[e.RADIO_BUTTON=3]="RADIO_BUTTON",e[e.COMBO_BOX=4]="COMBO_BOX",e[e.LIST_BOX=5]="LIST_BOX",e[e.TEXT_AND_DATE=6]="TEXT_AND_DATE",e[e.SIGNATURE=7]="SIGNATURE",e[e.ALL_WIDGET_TYPES=8]="ALL_WIDGET_TYPES",e}({});var p=function(e){return e[e.Ordinary=0]="Ordinary",e[e.TimeStamp=3]="TimeStamp",e[e.PagingSeal=4]="PagingSeal",e}({}),v=function(e){return e[e.NO_ICON=0]="NO_ICON",e[e.NO_CAPTION=1]="NO_CAPTION",e[e.CAPTION_BELOW_ICON=2]="CAPTION_BELOW_ICON",e[e.CAPTION_ABOVE_ICON=3]="CAPTION_ABOVE_ICON",e[e.CAPTION_RIGHT=4]="CAPTION_RIGHT",e[e.CAPTION_LEFT=5]="CAPTION_LEFT",e[e.CAPTION_OVERLAY_ON_ICON=6]="CAPTION_OVERLAY_ON_ICON",e}({});var m=function(e){return e[e.left=0]="left",e[e.center=1]="center",e[e.right=2]="right",e}({}),_=function(e){return e[e.ReadOnly=1]="ReadOnly",e[e.Required=2]="Required",e[e.NoExport=4]="NoExport",e[e.Hidden=8]="Hidden",e[e.ButtonNoToggleToOff=16384]="ButtonNoToggleToOff",e[e.ButtonRadiosInUnison=33554432]="ButtonRadiosInUnison",e[e.TextMultiline=4096]="TextMultiline",e[e.TextPassword=8192]="TextPassword",e[e.TextDoNotSpellCheck=4194304]="TextDoNotSpellCheck",e[e.TextDoNotScroll=8388608]="TextDoNotScroll",e[e.TextComb=16777216]="TextComb",e[e.ComboEdit=262144]="ComboEdit",e[e.ChoiceMultiSelect=2097152]="ChoiceMultiSelect",e[e.CommitOnSelChange=67108864]="CommitOnSelChange",e}({}),y=function(e){return!!(1&e)},S=function(e){return!!(2&e)},b=function(e){return!!(4&e)},I=function(e){return!!(4096&e)},A=function(e){return!!(8192&e)},P=function(e){return!!(16777216&e)},D=function(e){return!!(4194304&e)},E=function(e){return!!(8388608&e)},C=function(e){return!!(262144&e)},w=function(e){return!!(2097152&e)},k=function(e){return e[e.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",e}({}),T=(n(8278),function(e){return e[e.NOT_CALCULATED=0]="NOT_CALCULATED",e[e.CALCULATE_WITH_FIELDS=1]="CALCULATE_WITH_FIELDS",e[e.FIMPLIFIED_FIELD_NOTATION=2]="FIMPLIFIED_FIELD_NOTATION",e[e.CUSTOM_CALCULATE_SCRIPT=3]="CUSTOM_CALCULATE_SCRIPT",e}({})),F=function(e){return e.NONE="none",e.NUMBER="number",e.PERCENTAGE="percentage",e.DATE="date",e.TIME="time",e.SPECIAL="special",e.CUSTOM="custom",e}({}),G=function(e){return e[e.ZIP_CODE=0]="ZIP_CODE",e[e.ZIP_CODE_4=1]="ZIP_CODE_4",e[e.PHONE_NUMBER=2]="PHONE_NUMBER",e[e.SOCIAL_SECURITY_NUMBER=3]="SOCIAL_SECURITY_NUMBER",e}({}),R=function(e){return e.UP="up",e.DOWN="down",e.ROLLOVER="rollover",e}({});var x=function(e){return e.NONE="none",e.RANGE="range",e.CUSTOM="custom",e}({}),O=function(e){return e.NONE="none",e.ALL="all",e.INCLUDE="include",e.EXCLUDE="exclude",e.CUSTOM="custom",e}({});var M=function(e){return e.left="left",e.right="right",e.top="top",e.bottom="bottom",e}({}),N=function(e){return e.NONE="none",e.CUSTOM="custom",e}({}),B=function(e){return e[e.LEFT_BUTTON=0]="LEFT_BUTTON",e[e.MIDDLE_BUTTON=1]="MIDDLE_BUTTON",e[e.RIGHT_BUTTON=2]="RIGHT_BUTTON",e}({});function L(e){var t=new Function("AFNumber_Format","AFNumber_Keystroke","return ".concat(e,";"));try{var n=function(e,t,n,r,i,a){return{category:F.NUMBER,decimalPlaces:e,separatorStyle:t,currencySymbol:i,isPrepend:a,useRedText:!!(1&n),showParentheses:!!(2&n)}};return t(n,n)}catch(e){return}}function j(e){var t=new Function("AFPercent_Format","AFPercent_Keystroke","return ".concat(e,";"));try{var n=function(e,t){return{category:F.PERCENTAGE,decimalPlaces:e,separatorStyle:t}};return t(n,n)}catch(e){return}}function U(e){var t=new Function("AFDate_FormatEx","AFDate_Format","AFDate_KeystrokeEx","AFDate_Keystroke","return ".concat(e,";")),n=function(e){return["m/d","m/d/yy","m/d/yyyy","mm/dd/yy","mm/dd/yyyy","mm/yy","mm/yyyy","d-mmm","d-mmm-yy","d-mmm-yyyy","dd-mmm-yy","dd-mmm-yyyy","yy-mm-dd","yyyy-mm-dd","mmm-yy","mmm-yyyy","mmmm-yy","mmmm-yyyy","mmm d, yyyy","mmmm d, yyyy","m/d/yy h:MM tt","m/d/yyyy h:MM tt","m/d/yy HH:MM","m/d/yyyy HH:MM"][e]},r=function(e){return e};try{var i=t(r,n,r,n);return{category:F.DATE,format:i}}catch(e){return}}function W(e){var t=new Function("AFTime_FormatEx","AFTime_Format","AFTime_Keystroke","return ".concat(e,";")),n=function(e){return"number"==typeof e?["HH:MM","h:MM tt","HH:MM:ss","h:MM:ss tt"][e]:e};try{var r=t(n,n,n);return{category:F.TIME,format:r}}catch(e){return}}function H(e){var t=new Function("AFSpecial_KeystrokeEx","AFSpecial_Format","AFSpecial_Keystroke","return ".concat(e,";"));try{var n=function(e){return e},r=t(n,n,n);return{category:F.SPECIAL,content:r}}catch(e){return}}function K(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.GetType().value;if(t&&(n===f.RadioButton||n===f.CheckBox)){for(var r="Off",i=e.GetControlCount(),a=0;a<i;a++){var o=e.GetControl(a);if(o.IsChecked()){r=o.GetExportValue().toString();break}}return r}return e.GetValue().toString()}var z=["ctrl","shift","alt","meta","command","leftButtonDown","rightButtonDown","middeButtonDown"];function V(e,t,n){var r=t.charCodeAt(0);if(0===e.length)return r===n.keyCode;var i=z.filter(function(t){return-1===e.indexOf(t)});return e.every(function(e){return n.flags[e]})&&i.every(function(e){return!n.flags[e]})&&r===n.keyCode}var J="submit-form-callback-api-channel"},1368:(e,t,n)=>{"use strict";n.d(t,{Y:()=>V});var r=n(5578),i=n(4691),a=n(9227),o=n(7424),s=n(5991),c=n(5467),u=n(4570),l=n(5347),d=n(7582),h=n(8925),f=n(5435),g=n(3850);function p(e,t){var n=e.EventFlags,r=0;return t.shift&&(r|=n.e_EventFlagShiftKey.value),t.meta&&(r|=n.e_EventFlagMetaKey.value),t.alt&&(r|=n.e_EventFlagAltKey.value),t.ctrl&&(r|=n.e_EventFlagControlKey.value),t.leftButtonDown&&(r|=n.e_EventFlagLeftButtonDown.value),t.rightButtonDown&&(r|=n.e_EventFlagRightButtonDown.value),t.middeButtonDown&&(r|=n.e_EventFlagMiddleButtonDown.value),r}var v=n(4099),m=function(e){function t(e){var n;return(0,a._)(this,t),n=(0,i._)(this,t),(0,s._)(n,"module",void 0),(0,s._)(n,"actionFilter",void 0),n.module=e,n.actionFilter=function(e){return Promise.resolve(function(){switch(e.type){case v.Us.goto:case v.Us.gotoE:case v.Us.gotoR:case v.Us.importData:case v.Us.launch:return!0}return!1}())},n}return(0,c._)(t,e),(0,o._)(t,[{key:"actionAPI",get:function(){return this.module.additionalActionAPI}},{key:"isReadonly",value:function(e){var t=e.GetFlags();if(!(64&~t))return!0;var n=e.GetField();return!n.IsEmpty()&&(!(1&~(t=n.GetFlags()))||void 0)}},{key:"mouseEnter",value:function(e,t){var n=e.GetWidget();if(!n.IsEmpty()&&!this.isReadonly(n))return this.actionAPI.triggerAction({type:"annot",annot:n},v.n6.ANNOT_CURSOR_ENTER,function(){return Promise.resolve(!0)})}},{key:"mouseExit",value:function(e,t){var n=e.GetWidget();if(!n.IsEmpty()&&!this.isReadonly(n))return this.actionAPI.triggerAction({type:"annot",annot:n},v.n6.ANNOT_CURSOR_EXIT,function(){return Promise.resolve(!0)})}},{key:"buttonPressed",value:function(e,t){var n=e.GetWidget();if(!n.IsEmpty()&&!this.isReadonly(n))return this.actionAPI.triggerAction({type:"annot",annot:n},v.n6.ANNOT_MOUSE_BUTTON_PRESSED,this.actionFilter)}},{key:"buttonReleased",value:function(e,t){if(t.button===f.U4.LEFT_BUTTON){var n=e.GetWidget();if(!n.IsEmpty()&&!this.isReadonly(n))return this.actionAPI.triggerAction({type:"annot",annot:n},v.n6.ANNOT_MOUSE_BUTTON_RELEASED,this.actionFilter)}}},{key:"focusOn",value:function(e){var t=e.GetWidget();if(!t.IsEmpty()&&!this.isReadonly(t))return this.actionAPI.triggerAction({type:"annot",annot:t},v.n6.ANNOT_RECEIVE_INPUT_FOCUS,this.actionFilter)}},{key:"focusLost",value:function(e){var t=e.GetWidget();if(!t.IsEmpty()&&!this.isReadonly(t))return this.actionAPI.triggerAction({type:"annot",annot:t},v.n6.ANNOT_LOSE_INPUT_FOCUS,this.actionFilter)}}]),t}(h.JT),_=n(776);function y(e){var t="",n=e.length;if(0==n)return"";for(var r=0,i="";n>r;){var a=e[r];switch(a){case"[":case"]":case"(":case")":case"{":case"}":case":":case";":case"<":case">":case"?":case"=":case"|":case"&":case"!":case"~":case"^":case"%":case"*":case"/":case"+":case"-":return 0==i.length?(r++,(t+=a)+y(e=e.substr(r))):(S(i)?t=i:(i=i.trim()).length>0&&(t+='AFMakeNumber(getField("'+i+'").value)'),i="",e=e.substr(r),r++,t+y(e));default:r++,i+=a}}return S(i)?t=i:(i=i.trim()).length>0&&(t+='AFMakeNumber(getField("'+i+'").value)'),i="",t}function S(e){var t=(e=e.trim()).indexOf("-");if(t>0)return!1;for(var n=!1,r=t+1,i=e.length;r<i;r++){var a=e[r];if(!(a>="0"&&a<="9")){if("."!=a||n){if(" "==a||"\t"==a||"\n"==a||"\r"==a)continue;return!1}n=!0}}return!0}function b(e){return I(e.GetWidget())}function I(e){var t=e.GetPage(),n=e.GetDict().GetObjNum();return{pageIndex:t.GetIndex(),objNumber:n}}var A=["HH:MM","h:MM tt","HH:MM:ss","h:MM:ss tt"];var P=function(){function e(t){(0,a._)(this,e),(0,s._)(this,"module",void 0),(0,s._)(this,"fieldFlagMapping",void 0),this.module=t,this.fieldFlagMapping={readonly:f.Q9.ReadOnly,required:f.Q9.Required,noExport:f.Q9.NoExport,buttonNoToggleToOff:f.Q9.ButtonNoToggleToOff,buttonRadiosInUnison:f.Q9.ButtonRadiosInUnison,textMultiline:f.Q9.TextMultiline,textPassword:f.Q9.TextPassword,textDoNotSpellCheck:f.Q9.TextDoNotSpellCheck,textDoNotScroll:f.Q9.TextDoNotScroll,choiceMultiSelect:f.Q9.ChoiceMultiSelect,comboEdit:f.Q9.ComboEdit,commitOnSelChange:f.Q9.CommitOnSelChange,textComb:f.Q9.TextComb}}return(0,o._)(e,[{key:"setName",value:function(e,t){return(0,r._)(function(){var n,r,i,a;return(0,d.Jh)(this,function(o){switch(o.label){case 0:return n=this.module.form,[4,this.getField(e)];case 1:return r=o.sent(),i=(0,g.Dp)(this.module.engine,t),n.RenameField(r,i),a=n.GetField(0,i),this.updateAllWidgetApOfField(a),[2]}})}).call(this)}},{key:"setAlignment",value:function(e,t){return(0,r._)(function(){var n;return(0,d.Jh)(this,function(r){switch(r.label){case 0:return[4,this.getField(e)];case 1:return(n=r.sent()).SetAlignment({value:t}),this.updateAllWidgetApOfField(n),[2]}})}).call(this)}},{key:"getAlignment",value:function(e){return this.getField(e).GetAlignment().value}},{key:"setFlag",value:function(e,t){var n=this.module.engine,r=this.getField(e),i=r.GetDict(),a=(0,g.n5)(n,"Ff"),o=i.GetElement(a),s=o?o.GetInteger():0;this.setFlagDirect(r,t,s)}},{key:"setFlagDirect",value:function(e,t,n){var r=(n^t)&(f.Q9.TextMultiline|f.Q9.TextPassword|f.Q9.Hidden|f.Q9.TextComb);e.SetFlags(t),(r||t&f.Q9.ButtonRadiosInUnison)&&this.updateAllWidgetApOfField(e)}},{key:"updateFlagByOptions",value:function(e,t){var n,r=this.module.engine,i=this.getField(e),a=i.GetDict(),o=(0,g.n5)(r,"Ff"),s=a.GetElement(o),c=(null==s?void 0:s.GetInteger())||0,u=c;for(var l in this.fieldFlagMapping)if(l in t){var d=!!t[l],h=this.fieldFlagMapping[l];d?c|=h:c&=~h}return this.setFlagDirect(i,c,u),(null===(n=a.GetElement(o))||void 0===n?void 0:n.GetInteger())||0}},{key:"getFlagValue",value:function(e){var t=this.module.engine,n=this.getField(e).GetDict(),r=(0,g.n5)(t,"Ff");try{var i=n.GetElement(r);return(null==i?void 0:i.GetInteger())||0}finally{r.delete()}}},{key:"getFlagOptions",value:function(e){var t=this.getFlagValue(e);return{readonly:(0,f.fD)(t),required:(0,f.mw)(t),noExport:(0,f.lG)(t),buttonNoToggleToOff:!!(t&f.Q9.ButtonNoToggleToOff),buttonRadiosInUnison:!!(t&f.Q9.ButtonRadiosInUnison),textMultiline:(0,f.R)(t),textPassword:(0,f.lM)(t),textDoNotSpellCheck:(0,f.K4)(t),textDoNotScroll:(0,f.dS)(t),textComb:(0,f.q$)(t),comboEdit:(0,f.Y7)(t),choiceMultiSelect:(0,f.Fy)(t),commitOnSelChange:!!(t&f.Q9.CommitOnSelChange)}}},{key:"setMaxLength",value:function(e,t){var n=this.getField(e);n.SetMaxLength(t),this.updateAllWidgetApOfField(n)}},{key:"getMaxLength",value:function(e){return this.getField(e).GetMaxLength()}},{key:"removeMaxLen",value:function(e){var t=this.getField(e);this.removeDictValue(t,"MaxLen"),this.updateAllWidgetApOfField(t)}},{key:"setDefaultValue",value:function(e,t){var n=this.module.engine,r=this.getField(e);if(t){var i=(0,g.Dp)(n,t);r.SetDefaultValue(i)}else this.removeDictValue(r,"DV");this.updateAllWidgetApOfField(r)}},{key:"getDefaultValue",value:function(e){return this.getField(e).GetDefaultValue().toString()}},{key:"clearDefaultValue",value:function(e){var t=this.getField(e);this.removeDictValue(t,"DV"),this.updateAllWidgetApOfField(t)}},{key:"getValue",value:function(e){return this.getField(e).GetValue().toString()}},{key:"setValue",value:function(e,t){var n=this.module.engine,r=this.module.focusOnWidget,i=this.getField(e);if(r){var a=r.GetField();if(i["operator=="](a))return!1}var o=(0,g.Dp)(n,t);return i.SetValue(o),this.updateAllWidgetApOfField(i),!0}},{key:"clearChoiceOptionItems",value:function(e){var t=this.module.engine,n=this.getField(e);this.assertFieldIsComboBoxOrListBox(n);var r=new t.ChoiceOptionArray;n.SetOptions(r),(0,_.Z)(r),this.updateAllWidgetApOfField(n)}},{key:"deleteChoiceOptionItems",value:function(e,t){var n=this.getField(e);this.assertFieldIsComboBoxOrListBox(n),n.OptionsItemChange(t,this.module.engine.OptionOperation.e_OptionDelete),this.updateAllWidgetApOfField(n)}},{key:"appendChoiceOptionItem",value:function(e,t){var n=this.module.engine,r=this.getField(e);this.assertFieldIsComboBoxOrListBox(r);var i=(0,g.Dp)(n,t.value+""),a=(0,g.Dp)(n,t.label);r.AppendOptionsItem(a,i),r.GetValue().toString()!==i.toString()&&r.SetValue(i)}},{key:"insertChoiceOptionItemAt",value:function(e,t,n){var r=this.module.engine,i=this.getField(e);this.assertFieldIsComboBoxOrListBox(i);var a=new r.ChoiceOption;a.option_value=(0,g.Dp)(r,n.value+""),a.option_label=(0,g.Dp)(r,n.label),a.selected=n.selected,a.default_selected=n.defaultSelected;var o=i.GetOptions();t<0||t>=o.GetSize()?o.Add(a):o.InsertAt(t,a),i.SetOptions(o),i.SetValue(a.option_value),this.updateAllWidgetApOfField(i)}},{key:"moveChoiceOption",value:function(e,t,n){if(t!==n){if(t<0||n<0)throw new Error("Invalid option index: srcIndex = ".concat(t,", destIndex = ").concat(n));var r=this.getField(e);this.assertFieldIsComboBoxOrListBox(r);for(var i=t>n?this.module.engine.OptionOperation.e_OptionUp:this.module.engine.OptionOperation.e_OptionDown,a=t>n?-1:1,o=t;o!==n;o+=a)r.OptionsItemChange(o,i);this.updateAllWidgetApOfField(r)}}},{key:"getOptionsSize",value:function(e){return this.getField(e).GetOptions().GetSize()}},{key:"selectOption",value:function(e,t){var n=this.getField(e);this.assertFieldIsComboBoxOrListBox(n);var r=n.GetOptions(),i=r.GetSize();if(t<0||t>=i)throw new Error("Invalid option index: ".concat(t));var a=r.GetAt(t);n.SetValue(a.option_value),this.updateAllWidgetApOfField(n)}},{key:"setAlternateName",value:function(e,t){var n=this.module.engine,r=this.getField(e);if(t){var i=(0,g.Dp)(n,t);r.SetAlternateName(i)}else this.removeDictValue(r,"TU");this.updateAllWidgetApOfField(r)}},{key:"getAlternateName",value:function(e){return this.getField(e).GetAlternateName().toString()}},{key:"setMappingName",value:function(e,t){var n=this.module.engine,r=this.getField(e);if(t){var i=(0,g.Dp)(n,t);r.SetMappingName(i)}else this.removeDictValue(r,"TM");this.updateAllWidgetApOfField(r)}},{key:"getMappingName",value:function(e){return this.getField(e).GetMappingName().toString()}},{key:"setTextColor",value:function(e,t){var n=this.getField(e),r=n.GetDefaultAppearance();r.text_color=t,n.SetDefaultAppearance(r);for(var i=n.GetControlCount(),a=0;a<i;a++){n.GetControl(a).SetDefaultAppearance(r)}this.updateAllWidgetApOfField(n)}},{key:"setChoiceOptionItems",value:function(e,t){var n=this.module.engine,r=this.getField(e);this.assertFieldIsComboBoxOrListBox(r);var i=new n.ChoiceOptionArray;t.filter(function(e){return!!e.value&&!!e.label}).forEach(function(e){var t=new n.ChoiceOption;t.option_value=(0,g.Dp)(n,e.value),t.option_label=(0,g.Dp)(n,e.label),t.selected=e.selected,t.default_selected=e.defaultSelected,i.Add(t),(0,_.Z)(t)}),r.SetOptions(i),this.updateAllWidgetApOfField(r)}},{key:"getChoiceOptions",value:function(e){var t=this.module.engine,n=this.getField(e),r=n.GetType();if(r!==t.FieldType.e_TypeComboBox&&r!==t.FieldType.e_TypeListBox)return[];for(var i=n.GetOptions(),a=[],o=i.GetSize(),s=0;s<o;s++){var c=i.GetAt(s);a.push({label:c.option_label.toString(),value:c.option_value.toString(),selected:c.selected,defaultSelected:c.default_selected})}return a}},{key:"updateChoiceOption",value:function(e,t,n){var r=this.module.engine,i=this.getField(e);this.assertFieldIsComboBoxOrListBox(i);var a=i.GetOptions(),o=a.GetSize();if(t<0||t>=o)throw new Error("Invalid option index: ".concat(t));var s=a.GetAt(t),c=!1;if("value"in n){var u=(0,g.Dp)(r,(n.value||"")+"");i.SetOptionValue(t,u),c=!0}if("label"in n){var l=(0,g.Dp)(r,(n.label||"")+"");i.SetOptionLabel(t,l),c=!0}"defaultSelected"in n&&(s.default_selected=n.defaultSelected||s.default_selected,a.InsertAt(t,s),a.RemoveAt(t+1),i.SetOptions(a),c=!0),n.selected&&(i.SetValue(s.option_value),c=!0),c&&this.updateAllWidgetApOfField(i)}},{key:"setDisplayValue",value:function(e,t){var n=this.module.engine,r=this.getField(e),i=r.GetValue();(r.SetValue((0,g.Dp)(this.module.engine,t)),this.updateAllWidgetApOfField(r),t)&&r.GetDict().SetAtWString((0,g.n5)(n,"V"),i)}},{key:"setCheckedByDefault",value:function(e,t){var n=this.getField(e),r=n.GetControl(0);if(r&&!r.IsEmpty()){var i=t?r.GetExportValue():(0,g.Dp)(this.module.engine,"Off");n.SetValue(i),i.delete()}}},{key:"isCheckedByDefault",value:function(e){var t=this.getField(e),n=t.GetControl(0);return!(!n||n.IsEmpty())&&n.GetExportValue().toString()===t.GetValue().toString()}},{key:"getControlCount",value:function(e){return this.getField(e).GetControlCount()}},{key:"getControlInfo",value:function(e,t){var n=this.getField(e),r=n.GetControl(t);if(!r.IsEmpty()){var i=n.GetType().value,a=r.GetWidget(),o=a.GetPage(),s=a.GetDict(),c=s.GetObjNum(),u=o.GetIndex();if(8!==i)s.HasKey((0,h.Ys)(this.module.engine,"PMD"))&&(i=8);return{pageIndex:u,index:r.GetIndex(),alignment:r.GetAlignment().value,exportValue:r.GetExportValue().toString(),widgetObjNum:c}}}},{key:"getDatetimeFormat",value:function(e){return function(e,t){var n=t.engine,r=t.doc,i=r.doc;if(r.JR,e.GetType()===n.FieldType.e_TypeTextField){var a=e.GetDict(),o=(0,v.yG)({doc:i,gsdk:n,dict:a,createIfNotExists:!1});if(o&&!o.IsEmpty()){var s=o.GetAction(n.TriggerEvent.e_TriggerFieldWillFormat);if(s&&!s.IsEmpty()){var c=new n.JavaScriptAction(s),u=(0,h.$h)(n,c.GetScript()).trim(),l=u.match(/AFDate_Format(Ex)?\("([\s\S]*?)"\)/),d=u.match(/AFTime_Format(Ex)?\(([\s\S]*?)\)/);return l?{format:l[2],functionName:u.indexOf("AFDate_FormatEx")>-1?"AFDate_FormatEx":"AFDate_Format"}:d?{format:A[d[2]]||d[2].replace(/"/g,""),functionName:u.indexOf("AFTime_FormatEx")>-1?"AFTime_FormatEx":"AFTime_Format"}:void 0}}}}(this.getField(e),this.module)}},{key:"getValidateActionInfo",value:function(e){var t=this.module.additionalActionAPI,n=this.getField(e),r=(0,u._)(t.getActions({type:"field",field:n},[f.n6.FIELD_VALUE_CHANGED]),1)[0];if(!r)return{type:f.fj.NONE};if(r.data.type!==v.Us.javaScript)return{type:f.fj.NONE};var i=r.data.data.javascript;e:if(i&&i.indexOf("AFRange_Validate")>-1)try{var a=new Function("AFRange_Validate","return ".concat(i,";"))(function(e,t,n,r){return{lowerCheck:e,lowerLimit:t,upperCheck:n,upperLimit:r}});if(!a)break e;return{type:f.fj.RANGE,range:a}}catch(e){break e}return{type:f.fj.CUSTOM,javascript:i}}},{key:"updateValidateAction",value:function(e,t){return(0,r._)(function(){var n,r,i,a,o,s;return(0,d.Jh)(this,function(c){switch(c.label){case 0:return n=this.module,n.engine,r=n.additionalActionAPI,[4,this.getField(e)];case 1:switch(i=c.sent(),a={type:"field",field:i},t.type){case f.fj.NONE:return[3,2];case f.fj.RANGE:return[3,4];case f.fj.CUSTOM:return[3,6]}return[3,8];case 2:return[4,r.removeAction(a,f.n6.FIELD_VALUE_CHANGED)];case 3:return c.sent(),[3,8];case 4:return o=t.range,s="AFRange_Validate(".concat(o.lowerCheck,",").concat(o.lowerLimit,", ").concat(o.upperCheck,", ").concat(o.upperLimit,")"),[4,r.overwriteJavaScriptAction(a,f.n6.FIELD_VALUE_CHANGED,{javascript:s})];case 5:return c.sent(),[3,8];case 6:return[4,r.overwriteJavaScriptAction(a,f.n6.FIELD_VALUE_CHANGED,{javascript:t.javascript})];case 7:c.sent(),c.label=8;case 8:return[2]}})}).call(this)}},{key:"updateFormatAction",value:function(e,t){return(0,r._)(function(){var n,r,i,a,o,s,c;return(0,d.Jh)(this,function(u){switch(u.label){case 0:return n=this.module,n.engine,r=n.additionalActionAPI,[4,this.getField(e)];case 1:return i=u.sent(),a={type:"field",field:i},t.category!==f.N1.NONE?[3,4]:[4,r.removeAction(a,f.n6.FIELD_WILL_FORMAT)];case 2:return u.sent(),[4,r.removeAction(a,f.n6.FIELD_KEY_STROKE)];case 3:return u.sent(),[3,20];case 4:switch(t.category){case f.N1.NUMBER:return[3,5];case f.N1.PERCENTAGE:return[3,6];case f.N1.DATE:return[3,7];case f.N1.TIME:return[3,8];case f.N1.SPECIAL:return[3,9];case f.N1.CUSTOM:return[3,14]}return[3,15];case 5:return c=(t.showParentheses?2:0)|(t.useRedText?1:0),o="AFNumber_Format(".concat(t.decimalPlaces,", ").concat(t.separatorStyle,", ").concat(c,',0, "').concat(t.currencySymbol,'",').concat(t.isPrepend,");"),s="AFNumber_Keystroke(".concat(t.decimalPlaces,", ").concat(t.separatorStyle,", ").concat(c,',0, "').concat(t.currencySymbol,'",').concat(t.isPrepend,");"),[3,15];case 6:return o="AFPercent_Format(".concat(t.decimalPlaces,", ").concat(t.separatorStyle,");"),s="AFPercent_Keystroke(".concat(t.decimalPlaces,", ").concat(t.separatorStyle,");"),[3,15];case 7:return s='AFDate_KeystrokeEx("'.concat(t.format,'");'),o='AFDate_FormatEx("'.concat(t.format,'");'),[3,15];case 8:return s='AFTime_Keystroke("'.concat(t.format,'");'),o='AFTime_FormatEx("'.concat(t.format,'");'),[3,15];case 9:switch(t.content){case f.Qd.ZIP_CODE:case f.Qd.ZIP_CODE_4:case f.Qd.PHONE_NUMBER:case f.Qd.SOCIAL_SECURITY_NUMBER:return[3,10]}return[3,11];case 10:return s="AFSpecial_Keystroke(".concat(t.content,");"),o="AFSpecial_Format(".concat(t.content,");"),[3,13];case 11:return s='AFSpecial_KeystrokeEx("'.concat(t.content,'");'),[4,r.removeAction(a,f.n6.FIELD_WILL_FORMAT)];case 12:return u.sent(),[3,13];case 13:return[3,15];case 14:return o=t.formatScript,s=t.keystrokeScript,[3,15];case 15:return void 0===o?[3,17]:[4,r.overwriteJavaScriptAction(a,f.n6.FIELD_WILL_FORMAT,{javascript:o})];case 16:u.sent(),u.label=17;case 17:return void 0===s?[3,19]:[4,r.overwriteJavaScriptAction(a,f.n6.FIELD_KEY_STROKE,{javascript:s})];case 18:u.sent(),u.label=19;case 19:this.updateAllWidgetApOfField(i),u.label=20;case 20:return[2]}})}).call(this)}},{key:"getFormatActionInfo",value:function(e){var t,n=this.module.additionalActionAPI,r={type:"field",field:this.getField(e)},i=!1,a=!1,o=!1,s=!1,c=!1,l=(0,u._)(n.getActions(r,[f.n6.FIELD_WILL_FORMAT]),1)[0],d=l&&l.data.type===v.Us.javaScript?l.data.data.javascript:void 0,h=(0,u._)(n.getActions(r,[f.n6.FIELD_KEY_STROKE]),1)[0],g=h&&h.data.type===v.Us.javaScript?h.data.data.javascript:void 0;if(d||g){if(g)i=g.indexOf("AFNumber_Keystroke")>-1,a=g.indexOf("AFDate_Keystroke")>-1,o=g.indexOf("AFPercent_Keystroke")>-1,s=g.indexOf("AFTime_Keystroke")>-1,c=g.indexOf("AFSpecial_Keystroke")>-1,t=g;else{if(!d)return;i=d.indexOf("AFNumber_Format")>-1,a=d.indexOf("AFDate_Format")>-1,o=d.indexOf("AFPercent_Format")>-1,s=d.indexOf("AFTime_Format")>-1,c=d.indexOf("AFSpecial_Format")>-1,t=d}return i?p((0,f.pj)(t)):o?p((0,f.wM)(t)):a?p((0,f.mX)(t)):s?p((0,f.le)(t)):c?p((0,f.Db)(t)):{category:f.N1.CUSTOM,formatScript:d,keystrokeScript:g}}function p(e){if(e)return Object.assign(e,{formatScript:d,keystrokeScript:g})}}},{key:"getCalculateActionInfo",value:function(e){var t=this.module.additionalActionAPI,n={type:"field",field:this.getField(e)},r=t.getActions(n,[f.n6.FIELD_RECALCULATE_VALUE]);if(0===r.length)return{type:f.J4.NOT_CALCULATED};var i=r[0].data;if(i.type!==v.Us.javaScript)return{type:f.J4.NOT_CALCULATED};var a=i.data.javascript,o={};if(a.indexOf("AFSimple_Calculate")>-1){var s=new Function("AFSimple_Calculate","".concat(a)),c=!1;try{s(function(e,t){Object.assign(o,{type:f.J4.CALCULATE_WITH_FIELDS,relation:e,fieldNames:t}),c=!0})}catch(e){!c&&a.trim()&&Object.assign(o,{type:f.J4.CUSTOM_CALCULATE_SCRIPT,javascript:a})}}else if(a.indexOf("BVCALC")>-1&&a.indexOf("EVCALC")>-1&&a.indexOf("AFMakeNumber")>-1){var l=(0,u._)(/\/\*\*\s+BVCALC\s+(.+?)\s+EVCALC\s+\*\*\//.exec(a)||[],2)[1];Object.assign(o,{type:f.J4.FIMPLIFIED_FIELD_NOTATION,javascript:l||""})}else Object.assign(o,{type:f.J4.CUSTOM_CALCULATE_SCRIPT,javascript:a});return o}},{key:"setCalculateAction",value:function(e,t){return(0,r._)(function(){var n,r,i,a,o;return(0,d.Jh)(this,function(s){switch(s.label){case 0:switch(n=this.module,r=n.additionalActionAPI,i=n.formAPI,a=this.getField(e),o={type:"field",field:a},t.type){case f.J4.NOT_CALCULATED:return[3,1];case f.J4.CALCULATE_WITH_FIELDS:return[3,2];case f.J4.CUSTOM_CALCULATE_SCRIPT:return[3,4];case f.J4.FIMPLIFIED_FIELD_NOTATION:return[3,6]}return[3,8];case 1:return r.removeAction(o,f.n6.FIELD_RECALCULATE_VALUE),i.removeFieldFromCalculationOrder(e),[3,9];case 2:return[4,r.overwriteJavaScriptAction(o,f.n6.FIELD_RECALCULATE_VALUE,{javascript:'AFSimple_Calculate("'.concat(t.relation,'", ').concat(JSON.stringify(t.fieldNames),")")})];case 3:case 5:case 7:return s.sent(),i.insertFieldIntoCalculationOrder(e),[3,9];case 4:return[4,r.overwriteJavaScriptAction(o,f.n6.FIELD_RECALCULATE_VALUE,t)];case 6:return[4,r.overwriteJavaScriptAction(o,f.n6.FIELD_RECALCULATE_VALUE,{javascript:"/** BVCALC ".concat(t.javascript," EVCALC **/event.value=").concat(y(t.javascript))})];case 8:throw new Error("Incorrect calculate type: ".concat(t.type));case 9:return i.recalculate(e),[2]}})}).call(this)}},{key:"getSelectionChangeActionInfo",value:function(e){var t=this.module.additionalActionAPI,n={type:"field",field:this.getField(e)},r=t.getActions(n,[f.n6.FIELD_KEY_STROKE]);if(0===r.length||r[0].data.type!==v.Us.javaScript)return{type:f.D.NONE};var i=r[0].data.data.javascript;return{type:f.D.CUSTOM,javascript:i}}},{key:"updateSelectionChangeAction",value:function(e,t){var n=this.module.additionalActionAPI,r={type:"field",field:this.getField(e)};switch(t.type){case f.D.NONE:n.removeAction(r,f.n6.FIELD_KEY_STROKE);break;case f.D.CUSTOM:n.overwriteJavaScriptAction(r,f.n6.FIELD_KEY_STROKE,{javascript:t.javascript})}}},{key:"removeDictValue",value:function(e,t){var n=this.module.engine,r=e.GetDict(),i=(0,g.n5)(n,t);r.RemoveAt(i)}},{key:"getField",value:function(e){return this.module.getField(e)}},{key:"getWidgetAndControl",value:function(e,t){return this.module.getWidgetAndControl(e,t)}},{key:"updateAllWidgetApOfField",value:function(e){this.module.updateAllWidgetApOfField(e)}},{key:"assertFieldIsComboBoxOrListBox",value:function(e){var t=this.module.engine.FieldType,n=e.GetType();if(n!==t.e_TypeComboBox&&n!==t.e_TypeListBox)throw new Error("This field type ".concat(n," is not comboBox or ListBox!"))}}]),e}(),D=n(8278),E=n(1761),C=n(9996);function w(e){var t;return!!e&&(!(null===(t=e.isDeleted)||void 0===t?void 0:t.call(e))&&!e.IsEmpty())}var k=h.mA.getLogger("FormFillerAssistCallback"),T=function(e){function t(e){var n;return(0,a._)(this,t),n=(0,i._)(this,t),(0,s._)(n,"formModule",void 0),(0,s._)(n,"needRefreshSync",void 0),(0,s._)(n,"hasCursor",void 0),(0,s._)(n,"mouseMoveEvent",void 0),(0,s._)(n,"focusOnWidgetRect",void 0),(0,s._)(n,"executor",void 0),(0,s._)(n,"lastRect",void 0),n.formModule=e,n.needRefreshSync=!1,n.hasCursor=!1,n.executor=new h.P6(100,!0),n}return(0,c._)(t,e),(0,o._)(t,[{key:"implementation",get:function(){return this.formModule.remoteAssistCallbackImpl}},{key:"actionEventHandler",get:function(){return this.formModule.actionEventHandler}},{key:"FocusGotOnControl",value:function(e){this.focusOnWidgetRect=void 0;var t=e.GetWidget();w(t)&&(this.focusOnWidgetRect=t.GetRect());var n=b(e);if(!(0,D.zR)(n,this.formModule.focusOnWidgetId)){var r=t.GetFlags(),i=!(1&~r&&2&~r&&32&~r)?void 0:this.formModule.getWidgetHandlerViewBBox(n.pageIndex,e);this.implementation.focusGotOnControl(n,i)}this.formModule.setFocusOnControl(n),this.actionEventHandler.focusOn(e)}},{key:"FocusLostFromControl",value:function(e,t){var n;this.focusOnWidgetRect=void 0;var r=e.GetField(),i=r.GetValue().toString(),a=t.toString();i!==a&&r.SetValue((0,g.Dp)(this.formModule.engine,a)),r.delete();var o=b(e);this.implementation.focusLostFromControl(o),o.objNumber===(null===(n=this.formModule.focusOnWidgetId)||void 0===n?void 0:n.objNumber)&&this.formModule.setFocusOnControl(void 0),this.actionEventHandler.focusLost(e)}},{key:"setCurrentMoveEvent",value:function(e){this.mouseMoveEvent=e}},{key:"OnAfterMousemoveEnter",value:function(e,t,n){if(this.mouseMoveEvent&&!n.IsEmpty()){var r=this.formModule,i=r.remoteAssistCallbackImpl,a=r.actionEventHandler,o=r.engine,s={objNumber:n.GetWidgetDict().GetObjNum(),pageIndex:t};i.mouseoverControl(s),this.formModule.setMouseOverControl(s),this.formModule.setMouseOverWidgetData({widgetId:s,control:n});try{n.GetField().GetType()===o.FieldType.e_TypeSignature&&a.mouseEnter(n,this.mouseMoveEvent)}catch(e){k.warn("trigger mouse exit actions failed:",e)}}}},{key:"OnAfterMousemoveExist",value:function(e,t,n){if(this.mouseMoveEvent&&!n.IsEmpty()){var r=this.formModule,i=r.remoteAssistCallbackImpl,a=r.actionEventHandler,o=r.mouseOverWidgetId,s=r.engine;if(o){i.mouseleaveControl(o),this.formModule.setMouseOverControl(void 0),this.formModule.setMouseOverWidgetData({widgetId:void 0,control:void 0});try{n.GetField().GetType()===s.FieldType.e_TypeSignature&&a.mouseExit(n,this.mouseMoveEvent)}catch(e){k.warn("trigger mouse exit actions failed:",e)}}}}},{key:"FieldDoActionNoJS",value:function(e,t,n){if(n.IsEmpty())return!0;var r=n.GetType(),i=this.formModule.engine;return r!==i.ActionType.e_TypeHide&&r!==i.ActionType.e_TypeSubmitForm&&r!==i.ActionType.e_TypeResetForm&&r!==i.ActionType.e_TypeURI&&(this.formModule.doc.DoAction_NoJs(n),!0)}},{key:"GetClipboardText",value:function(){return(0,g.Dp)(this.formModule.engine,globalThis.clipboardText||"")}},{key:"SetClipboardText",value:function(e){var t=globalThis.clipboardText=e.toString();this.implementation.setClipboardText(t)}},{key:"GetVersion",value:function(){return""}},{key:"AppendPopupMenuItem",value:function(e,t,n){var r={popupMenuId:e,itemId:this.transformMenuItem(t),defaultString:n.toString()};this.implementation.appendPopupMenuItem(r)}},{key:"CreatePopupMenu",value:function(e){var t=this.formModule.mouseOverWidgetId;t&&this.implementation.createPopupMenu(e,t)}},{key:"DestroyPopupMenu",value:function(e){this.implementation.destroyPopupMenu(e)}},{key:"EnablePopupMenuItem",value:function(e,t,n){this.implementation.enablePopupMenuItem(e,this.transformMenuItem(t),n)}},{key:"transformMenuItem",value:function(e){var t=this.formModule.engine.FormFillerPopupMenuItem;switch(e){case t.e_PopupMenuItemCopy:return f.aG.COPY;case t.e_PopupMenuItemCut:return f.aG.CUT;case t.e_PopupMenuItemDelete:return f.aG.DELETE;case t.e_PopupMenuItemNone:return f.aG.NONE;case t.e_PopupMenuItemPaste:return f.aG.PASTE;case t.e_PopupMenuItemSelectAll:return f.aG.SELECT_ALL}return f.aG.NONE}},{key:"ShowPopupMenu",value:function(e){this.implementation.showPopupMenu(e)}},{key:"Refresh",value:function(e,t,n){var r=this;if(!this.formModule.doc.isDynamicXFA())if(this.formModule.disableRefresh)this.formModule.fieldValueChanged=!0;else{var i=e.GetIndex();if(n){var a=this.formModule.doc.getPageFromCache(i);a&&a.releaseTextPageAndTextLinks()}t.Normalize();var o=function(){var e=t;return r.hasCursor&&r.focusOnWidgetRect&&e.Union(r.focusOnWidgetRect),r.implementation.refresh(i,{left:e.left,top:e.top,right:e.right,bottom:e.bottom})};if(this.lastRect&&(this.lastRect.Union(t),this.focusOnWidgetRect&&this.focusOnWidgetRect.Contains(this.lastRect)))this.executor.exec(function(){return o()});else{this.lastRect=t;var s=this.formModule.doc.JR;if(!this.needRefreshSync||!s.isSyncInvokerAvailable())return o();s.syncInvoker.invokeSyncAndReturn(function(){return o()})}}}},{key:"Release",value:function(){this.implementation.release()}},{key:"ReportInvalidValue",value:function(e,t){this.implementation.reportInvalidValue(e.toString(),t.toString())}},{key:"SetTimerCallback",value:function(e,t){var n=this,r=setInterval(function(){n.hasCursor=!0,n.formModule.engine.OnTimeout(t,r),n.hasCursor=!1},e);return r}},{key:"KillTimer",value:function(e){return this.hasCursor=!1,clearInterval(e),!1}},{key:"OnAfterDataChanged",value:function(e,t){var n=t.GetWidget(),r=n.GetPage(),i={objNumber:n.GetDict().GetObjNum(),pageIndex:r.GetIndex()};this.implementation.afterDataChange(i)}},{key:"SetCursor",value:function(e){this.formModule.hasCustomFillFormPermission()||(e=h.E.Hand),this.implementation.setCursor(e)}},{key:"FieldRequiredValue",value:function(e){console.log("FieldRequiredValue",e.toString());var t=this.formModule.doc.JR,n=t.jsMessages[E.C.IDS_JS_FIELDREQUIRED_INFO];if(void 0!==n){var r=n.replace("%s",e.toString());C.Z.bind(null,t.syncBaseUrl,t.id,"ActionCallback")("alert",{message:r,title:"",type:0,icon:1})}}},{key:"GetDocPermission",value:function(e){return this.formModule.doc.JR.getDocPermissions()}},{key:"BeginEdit",value:function(e){this.implementation.beginEdit()}},{key:"EndEdit",value:function(e){}}]),t}(h.JT),F=(h.mA.getLogger("FormFillerController"),function(e){function t(e){var n;return(0,a._)(this,t),n=(0,i._)(this,t),(0,s._)(n,"module",void 0),n.module=e,n}return(0,c._)(t,e),(0,o._)(t,[{key:"formFiller",get:function(){return this.module.formFiller}},{key:"getWidgetData",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.module.engine.FieldType.e_TypeUnknown,r=(this.module.engine,this.module.form.GetControlAtPoint(e,t,10,n));return r.IsEmpty()?{widgetId:void 0,control:void 0}:{widgetId:I(r.GetWidget()),control:r}}},{key:"hasFillFormPermission",value:function(){var e=this.module,t=e.engine,n=e.doc,r=t.UserPermissions,i=n.doc,a=n.JR.getDocPermissions();return-1===n.docPermissions&&(n.docPermissions=i.GetUserPermissions()),!!((-1===a?n.docPermissions:a&n.docPermissions)&(r.e_PermAnnotForm.value|r.e_PermFillForm.value|r.e_PermModify.value))}},{key:"checkWidgetGesturePermission",value:function(e){var t=this.module.engine;switch(e.GetType()){case t.FieldType.e_TypeTextField:case t.FieldType.e_TypeComboBox:case t.FieldType.e_TypeCheckBox:case t.FieldType.e_TypeListBox:return!1;case t.FieldType.e_TypePushButton:case t.FieldType.e_TypeSignature:return!0;default:return!1}}},{key:"canAnswerFormWidget",value:function(e){return!w(e)||(!!this.hasFillFormPermission()||this.checkWidgetGesturePermission(e.GetField()))}},{key:"mousedown",value:function(e){return(0,r._)(function(){var t,n,i,a,o,s,c,u,l,g,p,v,m,_,y,S,b,A,P,E;return(0,d.Jh)(this,function(C){switch(C.label){case 0:return t=this,n=this.module,i=n.formFiller,n.form,a=n.engine,o=n.remoteAssistCallbackImpl,s=n.focusOnWidgetId,[4,this.resolveMouseEvent2GSDKParams(e)];case 1:return c=C.sent(),u=c.cPage,l=c.point,g=c.flag,p=this.module.mouseOverWidgetData,v=p.widgetId,m=p.control,v||m||(h.tq?(_=this.getWidgetData(u,l,a.FieldType.e_TypeUnknown),v=_.widgetId,m=_.control):(y=this.getWidgetData(u,l,a.FieldType.e_TypeSignature),v=y.widgetId,m=y.control)),w(m)?(S=m.GetField(),b=S.GetFlags(),A=b&a.FieldFlags.e_FlagReadOnly.value,S.GetType()!==a.FieldType.e_TypeTextField?[3,4]:A?[4,this._setFocus(m)]:[3,3]):[3,5];case 2:return C.sent(),[2,!1];case 3:return[3,5];case 4:if(A)return[2,!1];C.label=5;case 5:return P=function(){return(0,r._)(function(){var t,n,r,c,p,_,y,S;return(0,d.Jh)(this,function(d){switch(d.label){case 0:if(!this.canAnswerFormWidget(m))return[2,!1];d.label=1;case 1:return d.trys.push([1,,2,5]),void 0!==e.button&&v&&o.mousedown(e,v),t=this.module.focusOnWidget,w(t)&&(n=I(t),r=t.GetField().GetType()===a.FieldType.e_TypeSignature,c=!v||!(0,D.zR)(n,v),r&&c&&this.removeFocus()),e.button===f.U4.LEFT_BUTTON?[2,i.OnLButtonDown(u,l,g)]:e.button===f.U4.RIGHT_BUTTON?(v&&this.module.setFocusOnControl(v),p=i.OnRButtonDown(u,l,g),m&&!(0,D.zR)(s,v)&&i.SetFocus(m),[2,p]):(e.button,f.U4.MIDDLE_BUTTON,[2,!1]);case 2:return!m||m.isDeleted()||m.IsEmpty()||(_=m.GetField()).GetType()!==a.FieldType.e_TypeSignature?[3,4]:(y=a.FieldFlags.e_FlagReadOnly.value,S=_.GetFlags(),(S&y)===y?[3,4]:[4,this._setFocus(m)]);case 3:d.sent(),d.label=4;case 4:return(0,h.xF)(l),[7];case 5:return[2]}})}).call(t)},v?[4,o.invokeInterceptor({widgetId:v,event:e},function(){return Promise.resolve(P())})]:[3,7];case 6:return(E=C.sent()).setelled?[2,E.value]:[2,!1];case 7:return[2,P()];case 8:return[2]}})}).call(this)}},{key:"mousemove",value:function(e){return(0,r._)(function(){var t,n,i,a,o,s,c,u,l,h;return(0,d.Jh)(this,function(f){switch(f.label){case 0:return t=this.module,n=t.formFiller,i=t.remoteAssistCallbackImpl,t.formFillerAssistCallback.setCurrentMoveEvent(e),[4,this.resolveMouseEvent2GSDKParams(e)];case 1:return a=f.sent(),o=a.cPage,s=a.point,c=a.flag,u=this.module.focusOnWidgetId,l=function(){return(0,r._)(function(){return(0,d.Jh)(this,function(e){try{return[2,n.OnMouseMove(o,s,c)]}finally{s.delete()}return[2]})})()},u?[4,i.invokeInterceptor({widgetId:u,event:e},function(){return l()})]:[2,l()];case 2:return(h=f.sent()).setelled?[2,h.value]:[2,!1]}})}).call(this)}},{key:"mouseup",value:function(e){return(0,r._)(function(){var t,n,i,a,o,s,c,u,l,h,g,p,v,m;return(0,d.Jh)(this,function(_){switch(_.label){case 0:return t=this,n=this.module,i=n.formFiller,a=n.remoteAssistCallbackImpl,o=n.engine,[4,this.resolveMouseEvent2GSDKParams(e)];case 1:return s=_.sent(),c=s.cPage,u=s.point,l=s.flag,h=this.getWidgetData(c,u),g=h.widgetId,p=h.control,v=function(){return(0,r._)(function(){var t,n,r,s,h,v,m,_;return(0,d.Jh)(this,function(d){switch(d.label){case 0:if(void 0!==e.button&&g&&a.mouseup(e,g),!this.canAnswerFormWidget(p))return[2,!1];d.label=1;case 1:if(d.trys.push([1,,2,5]),e.button===f.U4.LEFT_BUTTON){if(t=i.OnLButtonUp(c,u,l),n=this.module.focusOnWidget,r=w(n),t&&r){if(console.log(n.GetDict().GetObjNum()),!(1&~(s=n.GetFlags())&&2&~s&&32&~s))return[2,t];h=n.GetField(),(v=h.GetType())!==o.FieldType.e_TypeComboBox&&v!==o.FieldType.e_TypeListBox||w(m=n.GetControl())&&(_=this.module.getWidgetHandlerViewBBox(c.GetIndex(),m),this.module.remoteAssistCallbackImpl.updateFocusListBoxAndComboBoxVirtualBox(_))}return[2,t]}return e.button===f.U4.RIGHT_BUTTON?[2,i.OnRButtonUp(c,u,l)]:(e.button,f.U4.MIDDLE_BUTTON,[2,!1]);case 2:return!p||p.IsEmpty()?[3,4]:p.GetField().GetType()===o.FieldType.e_TypeSignature?[4,this.module.actionEventHandler.buttonReleased(p,e)]:[3,4];case 3:d.sent(),d.label=4;case 4:return u.delete(),[7];case 5:return[2]}})}).call(t)},g?[4,a.invokeInterceptor({widgetId:g,event:e},function(){return Promise.resolve(v())})]:[3,3];case 2:return(m=_.sent()).setelled?[2,m.value]:[2,!1];case 3:return[2,v()];case 4:return[2]}})}).call(this)}},{key:"mousewheel",value:function(e){return(0,r._)(function(){return(0,d.Jh)(this,function(e){return[2,!0]})})()}},{key:"keydown",value:function(e){return(0,r._)(function(){var t,n,r,i,a,o,s,c,u,l,g;return(0,d.Jh)(this,function(d){switch(d.label){case 0:return t=this,n=this.module,r=n.formFiller,i=n.remoteAssistCallbackImpl,a=this.resolveKeyboardEvent2GSDKParams(e),a.flags,o=a.keyCode,s=o.value,c=this.module.focusOnWidgetId,u=this.module.focusOnWidget,l=function(){if(!w(u)||!t.canAnswerFormWidget(u.GetControl()))return Promise.resolve();i.keydown(e,c);var n=e.flags,a=h.eE?(0,f.kA)(["command"],"Z",e):(0,f.kA)(["ctrl"],"Z",e),o=!a&&(h.eE?(0,f.kA)(["command"],"Y",e):(0,f.kA)(["ctrl"],"Y",e));return a?r.Undo():o&&r.Redo(),Promise.resolve(r.OnKeyDown(s,n))},c?[4,i.invokeInterceptor({widgetId:c,event:e},function(){return l()})]:[2,l()];case 1:return(g=d.sent()).setelled?[2,g.value]:[2,!1]}})}).call(this)}},{key:"keyup",value:function(e){return(0,r._)(function(){var t,n,r,i,a,o,s,c,u,l,h,f;return(0,d.Jh)(this,function(d){switch(d.label){case 0:return t=this,n=this.module,r=n.formFiller,i=n.remoteAssistCallbackImpl,a=this.resolveKeyboardEvent2GSDKParams(e),o=a.flags,s=a.keyCode,c=s.value,u=this.module.focusOnWidgetId,l=this.module.focusOnWidget,h=function(){return w(l)&&t.canAnswerFormWidget(l.GetControl())?(i.keyup(e,u),Promise.resolve(r.OnKeyUp(c,o))):Promise.resolve()},u?[4,i.invokeInterceptor({widgetId:u,event:e},function(){return h()})]:[2,h()];case 1:return(f=d.sent()).setelled?[2,f.value]:[2,!1]}})}).call(this)}},{key:"removeFocus",value:function(){return(0,r._)(function(){return(0,d.Jh)(this,function(e){return this.module.formAPI.removeFocus(),[2]})}).call(this)}},{key:"setFocus",value:function(e){return(0,r._)(function(){var t,n,r,i;return(0,d.Jh)(this,function(a){if(t=e.pageIndex,n=e.objNumber,r=this.module.getWidget(e),!(i=r.GetControl()))throw new Error("Control not found: page index: ".concat(t,", widget object number: ").concat(n));if(i.IsEmpty())throw new Error("Invalid control: page index: ".concat(t,", widget object number: ").concat(n));return[2,this._setFocus(i)]})}).call(this)}},{key:"_setFocus",value:function(e){return(0,r._)(function(){var t,n,r,i,a,o;return(0,d.Jh)(this,function(s){if(t=this.module,n=t.formFiller,r=t.engine,i=t.formFillerAssistCallback,n.SetFocus(e),a=e.GetField(),a.GetType()===r.FieldType.e_TypeSignature)i.FocusGotOnControl(e);else{if(!(o=this.module.focusOnWidget)||o.IsEmpty()||o.isDeleted())return[2];if(o.GetField().GetType()!==r.FieldType.e_TypeSignature)return[2];i.FocusLostFromControl(e,(0,h.Ys)(r,""))}return[2]})}).call(this)}},{key:"resolveMouseEvent2GSDKParams",value:function(e){return(0,r._)(function(){var t,n,r,i,a,o;return(0,d.Jh)(this,function(s){return t=this.module,n=t.doc,r=t.engine,i=n.doc.GetPage(e.page),a=new r.PointF(e.left,e.top),o=p(r,e.flags),[2,{cPage:i,point:a,flag:o}]})}).call(this)}},{key:"resolveKeyboardEvent2GSDKParams",value:function(e){var t=this.module.engine,n=p(this.module.engine,e.flags),r=t.VirtualKeyCode;return{flags:n,keyCode:r.values[e.keyCode]||r.e_VkeyUnknown}}},{key:"resolveConvertToFWLVitrualKeyCode",value:function(e,t){if(t)return e;var n=e;switch(e){case 35:n=16777233;break;case 36:n=16777232;break;case 37:n=16777234;break;case 38:n=16777235;break;case 39:n=16777236;break;case 40:n=16777237;break;case 46:n=16777223}return n}}]),t}(h.JT)),G=n(9256);var R=function(){function e(t){var n=this;(0,a._)(this,e),(0,s._)(this,"module",void 0),this.module=t,Object.getOwnPropertyNames(Object.getPrototypeOf(this)).forEach(function(e){if("constructor"!==e){var t=n[e];if("function"==typeof t){var r=n;n[e]=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if("object"===(void 0===(o=n[0])?"undefined":(0,G._)(o))&&"type"in o&&"input"===o.type){var a=t.apply(r,n);return r.module.remoteAssistCallbackImpl.input(n[0]),a}return t.apply(r,n);var o}}}})}return(0,o._)(e,[{key:"insertFromPaste",value:function(e){var t=this.module.formFiller;"data"in e&&(globalThis.clipboardText=e.data),t.OnPaste()}},{key:"selectAll",value:function(e){this.module.formFiller.OnSelectAll()}},{key:"deleteByCut",value:function(e){this.module.formFiller.OnCut()}},{key:"copy",value:function(e){this.module.formFiller.OnCopy()}},{key:"deleteContentForward",value:function(e){this.module.formFiller.OnDelete()}},{key:"deleteContentBackward",value:function(e){var t=this.module,n=t.formFiller,r=p(t.engine,e.flags);n.OnChar(8,r)}},{key:"insertText",value:function(e){var t,n=this.module,r=n.engine,i=n.formFiller,a=p(r,e.flags);null===(t=e.data)||void 0===t||t.split("").forEach(function(e){var t=e.codePointAt(0);i.OnChar(t,a)})}},{key:"replaceValue",value:function(e){var t=this.module.formFiller;t.OnSelectAll(),t.OnDelete(),null==e||e.split("").forEach(function(e){var n=e.codePointAt(0);t.OnChar(n,0)})}},{key:"enter",value:function(e){var t=this.module,n=t.formFiller,r=p(t.engine,e.flags);n.OnChar(13,r)}}]),e}(),x=function(){function e(t){(0,a._)(this,e),(0,s._)(this,"module",void 0),this.module=t}return(0,o._)(e,[{key:"BeforeFormReset",value:function(e){this.reset()}},{key:"AfterFormReset",value:function(e){this.module.refreshAfterValueChanged()}},{key:"BeforeFormImportData",value:function(e){this.reset()}},{key:"AfterFormImportData",value:function(e){this.module.refreshAfterValueChanged()}},{key:"reset",value:function(){this.module.disableRefresh=!0,this.module.fieldValueChanged=!1}}]),e}(),O=n(6306),M=n(5147);function N(e,t){if(!t.IsEmpty()){t.ConvertFormat(e.DIBFormat.e_DIBArgb);for(var n=t.GetWidth(),r=t.GetHeight(),i=t.GetBuffer(),a=r*t.GetPitch(),o=i+a,s=e.HEAPU8.slice(i,o),c=t.GetPitch(),u=0;u<r;u++)for(var l=0;l<n;l++){var d,h=u*c;d=[s[4*l+2+h],s[4*l+h]],s[4*l+h]=d[0],s[4*l+2+h]=d[1]}return{start:i,size:a,width:n,height:r,data:s.buffer}}}var B=function(){function e(t){(0,a._)(this,e),(0,s._)(this,"module",void 0),(0,s._)(this,"GSDK_STANDARD_IDs",void 0),this.module=t;var n=t.engine.StandardID;this.GSDK_STANDARD_IDs=[n.e_StdIDCourier,n.e_StdIDCourierB,n.e_StdIDCourierBI,n.e_StdIDCourierI,n.e_StdIDHelvetica,n.e_StdIDHelveticaB,n.e_StdIDHelveticaBI,n.e_StdIDHelveticaI,n.e_StdIDTimes,n.e_StdIDTimesB,n.e_StdIDTimesBI,n.e_StdIDTimesI,n.e_StdIDSymbol,n.e_StdIDZapfDingbats]}return(0,o._)(e,[{key:"getWidget",value:function(e){return this.module.getWidget(e)}},{key:"setInteger",value:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=this.module.engine,a=this.getWidget(e),o=(0,g.n5)(i,t),s=a.GetDict();void 0===n?s.RemoveAt(o):s.SetAtInteger(o,n),r&&(this.updateModifiedTime(a),a.ResetAppearanceStream(),this.module.rerenderWidgets(a))}},{key:"getInteger",value:function(e,t){var n=this.module.engine,r=this.getWidget(e),i=(0,g.n5)(n,t),a=r.GetDict().GetElement(i);return null==a?void 0:a.GetInteger()}},{key:"setRotation",value:function(e,t){var n=this.getWidget(e),r=this.module.engine.Rotation.values[t];n.SetMKRotation(r),this.updateModifiedTime(n),n.ResetAppearanceStream(),this.module.rerenderWidgets(n)}},{key:"getRotation",value:function(e){return this.getWidget(e).GetMKRotation().value}},{key:"getDirectionRTL",value:function(e){return this.getInteger(e,"MEOptions")||f.rK.LEFT_TO_RIGHT}},{key:"setDirectionRTL",value:function(e,t){var n=f.JR.left;return t===f.rK.RIGHT_TO_LEFT&&(n=f.JR.right),this.setInteger(e,"Q",n,!1),this.setInteger(e,"MEOptions",t)}},{key:"setAlignment",value:function(e,t){return this.setInteger(e,"Q",t)}},{key:"getAlignment",value:function(e){return this.getInteger(e,"Q")||0}},{key:"setBorderColor",value:function(e,t){var n=this.getWidget(e);void 0===t?n.RemoveMKEntry(this.module.engine.MKEntry.e_MKEntryBorderColor):n.SetMKBorderColor(t),this.updateModifiedTime(n),n.ResetAppearanceStream(),this.module.rerenderWidgets(n)}},{key:"getBorderColor",value:function(e){var t=this.getWidget(e);if(t.HasMKEntry(this.module.engine.MKEntry.e_MKEntryBorderColor))return t.GetMKBorderColor()}},{key:"setFillColor",value:function(e,t){var n=this.getWidget(e);void 0===t?n.RemoveMKEntry(this.module.engine.MKEntry.e_MKEntryBackgroundColor):n.SetMKBackgroundColor(t),this.updateModifiedTime(n),n.ResetAppearanceStream(),this.module.rerenderWidgets(n)}},{key:"getFillColor",value:function(e){var t=this.getWidget(e);if(t.HasMKEntry(this.module.engine.MKEntry.e_MKEntryBackgroundColor))return t.GetMKBackgroundColor()}},{key:"setNormalCaption",value:function(e,t){var n=(0,g.Dp)(this.module.engine,t),r=this.getWidget(e);r.SetMKNormalCaption(n),this.updateModifiedTime(r),r.ResetAppearanceStream(),this.module.rerenderWidgets(r)}},{key:"getNormalCaption",value:function(e){var t,n;return null!==(n=null===(t=this.getWidget(e).GetMKNormalCaption())||void 0===t?void 0:t.toString())&&void 0!==n?n:""}},{key:"setDefaultAppearance",value:function(e,t){var n=this.module.engine,r=this.getWidget(e),i=r.GetControl(),a=i.GetDefaultAppearance();if("number"==typeof t.textColor&&(a.text_color=t.textColor,a.flags|=n.DefAPFlags.e_FlagTextColor.value),"number"==typeof t.textSize&&(a.text_size=t.textSize,0!==a.text_size&&(a.flags|=n.DefAPFlags.e_FlagFontSize.value)),"string"==typeof t.fontName){var o,s=(0,O.T2)(t.fontName);if(void 0!==s)o=new n.Font(this.GSDK_STANDARD_IDs[s]);else{var c=this.module.doc.JR.getFontInfoByFontName(t.fontName);if(c){var u=c.charset,l=c.style;o=new n.Font((0,g.Dp)(n,t.fontName),l,u,0)}}o&&(a.font=o,a.flags|=n.DefAPFlags.e_FlagFont.value)}i.SetDefaultAppearance(a),this.updateModifiedTime(r),r.ResetAppearanceStream(),this.module.rerenderWidgets(r)}},{key:"getDefaultAppearance",value:function(e){var t=this.module.doc.doc,n="",r="",i=!1,a=!1,o="",s="",c=this.getWidget(e).GetControl().GetDefaultAppearance();return c.font.IsEmpty()||(n=c.font.GetName().toString(),r=c.font.GetBaseFontName(t).toString(),i=c.font.IsBold(),a=c.font.IsItalic(),s=c.font.GetFamilyName().toString(),o="".concat(s.replace(" ","").replace("-","")).concat(i?"Bold":"").concat(a?"Italic":"")),{textColor:c.text_color,textSize:c.text_size,font:{name:n,baseName:r,familyName:s,fullName:o,isBold:i,isItalic:a,isEmbedded:!c.font.IsEmpty()&&c.font.IsEmbedded(this.module.doc.doc)},flags:c.flags}}},{key:"setIconCaptionRelation",value:function(e,t){var n=this.module.engine,r=this.getWidget(e),i=n.MKIconCaptionRelation.values[t];switch(r.SetMKIconCaptionRelation(i),t){case f.S0.NO_CAPTION:var a=(0,h.Eo)(n,"");r.SetMKNormalCaption(a),r.SetMKDownCaption(a),r.SetMKRolloverCaption(a);break;case f.S0.NO_ICON:var o=n.MKEntry;r.RemoveMKEntry(o.e_MKEntryNormalIcon),r.RemoveMKEntry(o.e_MKEntryDownIcon),r.RemoveMKEntry(o.e_MKEntryRolloverIcon)}this.updateModifiedTime(r),r.ResetAppearanceStream(),this.module.rerenderWidgets(r)}},{key:"getIconCaptionRelation",value:function(e){return this.getWidget(e).GetMKIconCaptionRelation().value}},{key:"setHighlightingMode",value:function(e,t){var n=this.module.engine,r=this.getWidget(e),i=n.HighlightingMode.values[t];r.SetHighlightingMode(i),this.updateModifiedTime(r),r.ResetAppearanceStream(),this.module.rerenderWidgets(r)}},{key:"getHighlightingMode",value:function(e){return this.getWidget(e).GetHighlightingMode().value}},{key:"setMKCaption",value:function(e,t,n){var r=this.module.engine,i=this.getWidget(e),a=(0,g.Dp)(r,n||"");switch(t){case f.fP.UP:i.SetMKNormalCaption(a);break;case f.fP.DOWN:i.SetMKDownCaption(a);break;case f.fP.ROLLOVER:i.SetMKRolloverCaption(a);break;default:throw new Error("Invalid widget caption position: ".concat(t))}this.updateModifiedTime(i),i.ResetAppearanceStream(),this.module.rerenderWidgets(i)}},{key:"setMKIcon",value:function(e,t,n){var r=this.module.engine,i=this.getWidget(e),a=M.Z.createImage(r,n).GetFrameBitmap(0);switch(t){case f.fP.UP:i.SetMKNormalIconBitmap(a);break;case f.fP.DOWN:i.SetMKDownIconBitmap(a);break;case f.fP.ROLLOVER:i.SetMKRolloverIconBitmap(a);break;default:throw new Error("Invalid widget icon position: ".concat(t))}this.updateModifiedTime(i),i.ResetAppearanceStream(),this.module.rerenderWidgets(i)}},{key:"removeMKIcon",value:function(e,t){var n=this.module.engine.MKEntry,r=this.getWidget(e);switch(t){case f.fP.UP:r.RemoveMKEntry(n.e_MKEntryNormalIcon);break;case f.fP.DOWN:r.RemoveMKEntry(n.e_MKEntryDownIcon);break;case f.fP.ROLLOVER:r.RemoveMKEntry(n.e_MKEntryRolloverIcon);break;default:throw new Error("Invalid widget icon position: ".concat(t))}this.updateModifiedTime(r),r.ResetAppearanceStream(),this.module.rerenderWidgets(r)}},{key:"getMKIconOptions",value:function(e){var t,n=this.module.engine,r=this.getWidget(e),i=N(n,r.GetMKNormalIconBitmap()),a=N(n,r.GetMKDownIconBitmap()),o=N(n,r.GetMKRolloverIconBitmap());return t={},(0,s._)(t,f.fP.UP,i),(0,s._)(t,f.fP.DOWN,a),(0,s._)(t,f.fP.ROLLOVER,o),t}},{key:"getMKIcon",value:function(e,t){var n=this.module.engine,r=this.getWidget(e);switch(t){case f.fP.UP:return N(n,r.GetMKNormalIconBitmap());case f.fP.DOWN:return N(n,r.GetMKDownIconBitmap());case f.fP.ROLLOVER:return N(n,r.GetMKRolloverIconBitmap());default:throw new Error("Invalid push button state: ".concat(t))}}},{key:"getMKCaptionOptions",value:function(e){var t,n=this.getWidget(e),r=n.GetMKNormalCaption().toString(),i=n.GetMKDownCaption().toString(),a=n.GetMKRolloverCaption().toString();return t={},(0,s._)(t,f.fP.UP,r),(0,s._)(t,f.fP.DOWN,i),(0,s._)(t,f.fP.ROLLOVER,a),t}},{key:"getIconFitOptions",value:function(e){var t=this.getWidget(e).GetMKIconFit();return{isProportionalScaling:t.is_proportional_scaling,horizontalFraction:t.horizontal_fraction,verticalFraction:t.vertical_fraction,scaleWayType:t.scale_way_type.value,fitBounds:t.fit_bounds}}},{key:"setIconFitOptions",value:function(e,t){var n=this.module.engine,r=this.getWidget(e),i=new n.IconFit,a=n.ScaleWayType.values[t.scaleWayType],o=t.horizontalFraction,s=t.verticalFraction;i.Set(a,t.isProportionalScaling,o,s,t.fitBounds),r.SetMKIconFit(i),this.updateModifiedTime(r),r.ResetAppearanceStream(),this.module.rerenderWidgets(r)}},{key:"setExportValue",value:function(e,t){var n=this.module.engine,r=this.getWidget(e),i=r.GetControl(),a=(0,g.Dp)(n,t);i.SetExportValue(a),this.updateModifiedTime(r),a.delete()}},{key:"getExportValue",value:function(e){return this.getWidget(e).GetControl().GetExportValue().toString()}},{key:"updateModifiedTime",value:function(e){e.SetModifiedDateTime((0,h._8)(this.module.engine))}}]),e}(),L=function(){function e(t){(0,a._)(this,e),(0,s._)(this,"module",void 0),this.module=t}return(0,o._)(e,[{key:"gsdk",get:function(){return this.module.engine}},{key:"SetHighLight",value:function(e){this.module.highlightFormFields(e)}},{key:"IsHighLight",value:function(){return this.module.isHighlight()}},{key:"SetHighLightColor",value:function(e){var t=h.Il.fromBGR(e).toRGB();return this.module.setHighlightColor(t),!0}},{key:"GetHighLightColor",value:function(){var e=this.module.getHighlightColor();return h.Il.fromARGB(e).toBGR()}},{key:"EnableCalculate",value:function(e){this.module.enableCalculate(e)}},{key:"IsCalculateEnabled",value:function(){return this.module.isCalculateEnabled()}},{key:"OnCalculate",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.module.formAPI.calculate(),!0}},{key:"SubmitForm",value:function(e,t,n,r,i,a,o,s,c){var u=this.gsdk,l=v.J9.fdf;switch(e){case u.JSFileFormatType.e_FDF:l=v.J9.fdf;break;case u.JSFileFormatType.e_PDF:l=v.J9.pdf;break;case u.JSFileFormatType.e_XFDF:l=v.J9.xfdf;break;case u.JSFileFormatType.e_HTML:l=v.J9.html;break;case u.JSFileFormatType.e_TXT:l=v.J9.txt;break;case u.JSFileFormatType.e_XML:l=v.J9.xml;break;case u.JSFileFormatType.e_XDP:case u.JSFileFormatType.e_XFD:return!1}var d={format:l,fieldNames:Array.from({length:n.GetSize()},function(e,t){return n.GetAt(t).GetName().toString()}),destination:t.toString(),config:{includeOrExcludeFields:r,includeAnnots:o,urlEncoded:i}};return this.module.remoteSubmitFormCallbackImpl.submitForm(d),!0}}]),e}(),j=n(8843),U=n(3170);function W(e,t){switch(t){case f.fS.CheckBox:return e.FieldType.e_TypeCheckBox;case f.fS.ComboBox:return e.FieldType.e_TypeComboBox;case f.fS.ListBox:return e.FieldType.e_TypeListBox;case f.fS.PushButton:return e.FieldType.e_TypePushButton;case f.fS.RadioButton:return e.FieldType.e_TypeRadioButton;case f.fS.Sign:return e.FieldType.e_TypeSignature;case f.fS.Text:return e.FieldType.e_TypeTextField}return e.FieldType.e_TypeUnknown}function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"UTF-8",n=new FileReader,r=new h.N5;return n.onload=function(){r.resolve(n.result)},n.onerror=function(e){r.reject(e)},n.readAsText(e,t),r.promise}var K=function(){function e(t){(0,a._)(this,e),(0,s._)(this,"module",void 0),(0,s._)(this,"fileName",void 0),this.module=t,this.fileName="Untitled.pdf"}return(0,o._)(e,[{key:"init",value:function(e){this.fileName=e.fileName}},{key:"renameField",value:function(e,t,n){var r=this.module.form,i=this.module.getFieldByName(t),a=(0,g.Dp)(this.module.engine,n),o=r.ValidateFieldName_Field(i,a);if(!o)return-1;if(i.GetType()===this.module.engine.FieldType.e_TypeSignature&&!r.GetField(0,a).IsEmpty())return-1;var s=this.module.getWidgetAndControl(i,e).control;return(o=r.MoveControl(s,a))?0:-2}},{key:"removeField",value:function(e){var t=this.module.form,n=this.module.getFieldByName(e);t.RemoveField(n)}},{key:"getControlAtPoint",value:function(e,t,n){return(0,r._)(function(){var r,i,a,o,s,c,u,l,f;return(0,d.Jh)(this,function(d){switch(d.label){case 0:return r=this.module,i=r.doc,a=r.form,o=r.engine,[4,i.getPageByIndex(e)];case 1:if((s=d.sent()).isVirtual)throw new Error("Cannot handling virtual page ".concat(e));return[4,null==s?void 0:s.c_pagePromise];case 2:if(!(c=d.sent()))throw new Error("Page not exist: ".concat(e));return u=new o.PointF(t.x,t.y),(0,h.xF)(u),l=n?W(o,n):o.FieldType.e_TypeUnknown,(f=a.GetControlAtPoint(c,u,0,l)).IsEmpty()?[2]:[2,f]}})}).call(this)}},{key:"getWidgetIdAtPoint",value:function(e,t,n){return(0,r._)(function(){var r,i,a;return(0,d.Jh)(this,function(o){switch(o.label){case 0:return[4,this.getControlAtPoint(e,t,n)];case 1:return!(r=o.sent())||r.IsEmpty()||(i=r.GetWidget()).IsEmpty()?[2]:(a=i.GetDict().GetObjNum(),[2,{pageIndex:e,objNumber:a}])}})}).call(this)}},{key:"getWidget",value:function(e){var t,n,r=e.pageIndex,i=e.objNumber,a=this.module,o=a.doc,s=a.engine,c=o.getPageFromCache(r),u=null!==(t=null==c?void 0:c.page)&&void 0!==t?t:o.doc.GetPage(r),l=null==c?void 0:c.annotationIDArray.indexOf(i);if(void 0!==l&&l>-1)n=u.GetAnnot(l);else for(var d=u.GetAnnotCount(),h=0;h<d;h++){var f=u.GetAnnot(h);if(f.GetDict().GetObjNum()===i){n=f;break}}if(!n||n.IsEmpty())throw new Error("Widget not found! pageIndex: ".concat(r,", widget object num: ").concat(i));return new s.Widget(n)}},{key:"getFieldByWidgetObjNum",value:function(e,t){return this.getWidget({pageIndex:e,objNumber:t}).GetField()}},{key:"getFieldIdByWidgetObjNum",value:function(e,t){var n=this.getFieldByWidgetObjNum(e,t);if(!n.IsEmpty())return n.GetName().toString()}},{key:"getFieldInfoByWidgetObjNum",value:function(e,t){var n=this.getFieldByWidgetObjNum(e,t);return this.getFieldInfoByField(n)}},{key:"extractFieldType",value:function(e){var t=this.module.engine,n=e.GetType(),r=!1,i=!1;switch(n){case t.FieldType.e_TypePushButton:var a=e.GetControl(0);if(a.IsEmpty())return{type:f.fS.PushButton,isImage:r};var o=a.GetWidget();if(o.IsEmpty())return{type:f.fS.PushButton,isImage:r};var s=o.GetMKIconFit();return s&&(r=s.is_proportional_scaling),{type:f.fS.PushButton,isImage:r};case t.FieldType.e_TypeTextField:var c;return(c=this.extractJavaScript(e,f.n6.FIELD_WILL_FORMAT))||(c=this.extractJavaScript(e,f.n6.FIELD_KEY_STROKE)),c&&(i=["AFDate_","AFTime_"].some(function(e){return c.indexOf(e)>-1})),{type:f.fS.Text,isDateOrTime:i}}return{type:n.value}}},{key:"extractJavaScript",value:function(e,t){var n=this.module.engine,r=n.AdditionalAction.CreateFromField(e);if(!r.IsEmpty()){var i=r.GetAction({value:t});if(!i.IsEmpty()&&i.GetType()===n.ActionType.e_TypeJavaScript){var a=new n.JavaScriptAction(i);return(0,h.$h)(n,a.GetScript())}}}},{key:"getFieldInfoByField",value:function(e){if(!e.IsEmpty()){var t=this.module.engine,n=e.GetDict(),r=(0,h.Ys)(t,"Ff"),i=n.GetElement(r),a=(null==i?void 0:i.GetInteger())||0,o=e.GetControlCount(),s=e.GetType().value;Array.from({length:o}).some(function(n,r){var i=e.GetControl(r);if(i.IsEmpty())return!1;var a=i.GetWidgetDict();if(!a)return!1;if(8!==s&&a.HasKey((0,g.n5)(t,"PMD")))return s=8,!0;return!1});var c=e.GetName().toString();return{fieldType:this.extractFieldType(e),fieldName:c,objNumber:n.GetObjNum(),flags:a}}}},{key:"getFieldInfo",value:function(e){var t=this.module.getFieldByName(e);return this.getFieldInfoByField(t)}},{key:"getFieldNamesByPrefix",value:function(e){var t=this.module,n=t.engine,r=t.form,i=(0,h.Eo)(n,e),a=r.GetFieldCount(i);return Array.from({length:a},function(e,t){return r.GetField(t,i).GetName().toString()})}},{key:"getFieldAtPosition",value:function(e,t,n){return(0,r._)(function(){var r,i;return(0,d.Jh)(this,function(a){switch(a.label){case 0:return[4,this.getControlAtPoint(e,t,n)];case 1:return!(r=a.sent())||r.IsEmpty()||(i=r.GetField()).IsEmpty()?[2]:[2,i.GetName().toString()]}})}).call(this)}},{key:"fixPageFields",value:function(e){this.module.form.FixPageFields(e)}},{key:"addSignature",value:function(e){e.pdfRect;var t=e.pageIndex,n=e.rotate,r=this.module,i=r.doc.doc,a=r.doc,o=(r.engine,a.getPageFromCache(t)),s=i.GetPage(t),c=this.checkAndGenerateFieldParams(e),u=c.fieldName,l=c.fieldType,d=c.rect,h=s.AddSignature(d,u,l,!1,!1);if(h.IsEmpty())throw new Error("Create sginature failed for unknown reason!");var f=h.GetControl(0).GetWidget();"number"==typeof n&&f.SetMKRotation({value:n});var g=f.GetDict().GetObjNum();return o&&o._setAnnotIdAt(g,f.GetIndex()),{pageIndex:t,objNumber:g}}},{key:"addControl",value:function(e){var t=this,n=this.createControl(e);switch(e.fieldType.type){case f.fS.PushButton:var r;this.initPushButton(n);var i=null===(r=e.extra)||void 0===r?void 0:r.imagePath;"string"==typeof i&&this.initImage(n,i);break;case f.fS.RadioButton:this.initRadioButton(n,e.extra);break;case f.fS.CheckBox:this.initCheckBox(n,e.extra)}if(e.actions){var a={type:"annot",annot:n.GetWidget()};e.actions.forEach(function(e){var n=e.trigger,r=e.action;t.module.additionalActionAPI.appendAction(a,n,r)})}var o=n.GetWidget();o.ResetAppearanceStream();var s=o.GetDict().GetObjNum(),c=this.module.doc.getPageFromCache(e.pageIndex);return c&&c._setAnnotIdAt(s,o.GetIndex()),{pageIndex:e.pageIndex,objNumber:s}}},{key:"initPushButton",value:function(e){var t=e.GetWidget(),n=t.GetMKIconFit();n.horizontal_fraction=.5,n.vertical_fraction=.5,n.scale_way_type=this.module.engine.ScaleWayType.e_ScaleWayAlways,t.SetMKIconFit(n)}},{key:"initRadioButton",value:function(e,t){var n=null==t?void 0:t.normalCaption,r=e.GetWidget();"string"==typeof n&&r.SetMKNormalCaption((0,h.Eo)(this.module.engine,n))}},{key:"initCheckBox",value:function(e,t){var n=null==t?void 0:t.normalCaption,r=e.GetWidget();"string"==typeof n&&r.SetMKNormalCaption((0,h.Eo)(this.module.engine,n))}},{key:"checkAndGenerateFieldParams",value:function(e){var t,n=e.pdfRect,r=this.module,i=r.form,a=r.engine,o="fieldType"in e,s=o?W(a,e.fieldType.type):a.FieldType.e_TypeSignature;if(e.fieldName){if(t=(0,g.Dp)(a,e.fieldName),!i.ValidateFieldName(s,t))throw new Error("The name you have inputted has already been used in an existing field. Please choose a different name, or change the field type to match the existing field. ".concat(JSON.stringify(e.fieldName)));if(s===a.FieldType.e_TypeSignature)if(!i.GetField(0,t).IsEmpty())throw new Error("The name you have inputted has already been used in an existing field. Please choose a different name, or change the field type to match the existing field. ".concat(JSON.stringify(e.fieldName)))}else{var c=o?e.fieldType:{type:f.fS.Sign},u=this.generateFieldName(c,e.fieldTypeName);t=(0,g.Dp)(a,u)}var l=new a.CFX_FloatRect(n.left,n.bottom,n.right,n.top);return{fieldName:t,fieldType:o?s:a.SignatureType.e_SignatureTypeOrdinary,rect:l}}},{key:"createControl",value:function(e){var t=this.module,n=t.form,r=t.doc,i=t.engine;this.module.init();var a=this.checkAndGenerateFieldParams(e),o=a.fieldName,s=a.fieldType,c=a.rect;try{var u=r.doc.GetPage(e.pageIndex),l=n.AddControl(u,o,s,c);if("number"==typeof e.rotate)l.GetWidget().SetMKRotation({value:e.rotate});var d=new i.Font(i.StandardID.e_StdIDHelvetica),h=new i.DefaultAppearance(7,d,0,0);return l.SetDefaultAppearance(h),l}finally{c.delete()}}},{key:"initImage",value:function(e,t){var n=this.module,r=n.doc.JR,i=n.engine,a=r.createReaderCallback(t),o=new i.Image(a),s=e.GetWidget();s.SetMKIconCaptionRelation(i.MKIconCaptionRelation.e_MKRelationNoCaption),s.SetHighlightingMode(i.HighlightingMode.e_HighlightingInvert);var c=s.GetMKIconFit();c.is_proportional_scaling=!0,s.SetMKIconFit(c),s.SetMKNormalIconImage(o,0)}},{key:"addAAToDict",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.module,a=i.engine,o=i.form,s=i.doc.doc,c=(0,g.n5)(a,"AA"),u=e.GetElement(c),l=u?u.GetDict():a.PDFDictionary.Create();!u&&e.SetAt(c,l);var d=new a.AdditionalAction(s,l),h=a.TriggerEvent.values[n.trigger],f=d.GetAction(h);if(r&&!f.IsEmpty()?f.InsertSubAction(f.GetSubActionCount(),t):d.SetAction(h,t),n.trigger===j.Mp.calculate){for(var p=o.GetFieldsInCalculationOrder(),v=(0,g.Dp)(a,n.field),m=o.GetField(0,v),_=p.GetSize(),y=0;y<_;y++){if(p.GetAt(y).GetName().toString()===m.GetName().toString())return}p.Add(m),o.SetFieldsInCalculationOrder(p)}}},{key:"importFormFromFile",value:function(e,t,n){try{this.module.formFillerAssistCallback.needRefreshSync=!0;var r=this.module,i=r.form,a=r.engine,o=new U.a(a),s=a.StreamCallback.implement(o);switch(o.setGsdkStream(s),o.setFile(t),e){case h.dO.text:i.ImportFromTXT(s);break;case h.dO.csv:i.ImportFromCSV(s);break;case h.dO.json:break;case h.dO.xml:i.ImportFromXML(s);break;case h.dO.fdf:i.ImportFromFDF(s);break;case h.dO.xfdf:i.ImportFromXFDF(s)}}finally{this.module.formFillerAssistCallback.needRefreshSync=!1}}},{key:"exportToFile",value:function(e,t){var n,r,i=null===(n=t.isExcludeFields)||void 0===n||n,a=this.module,o=a.form,s=a.engine,c=new U.a(s),u=s.StreamCallback.implement(c);switch(c.setGsdkStream(u),e){case h.dO.text:o.ExportToTXT(u,this.module.iterateFieldsEx(t.fieldNames),!i),r=c.getBlob("text/plain,charset=UTF-8");break;case h.dO.csv:o.ExportToCSVWithFieldArray(u,this.module.iterateFieldsEx(t.fieldNames),!i),r=c.getBlob("text/csv,charset=UTF-8");break;case h.dO.xml:o.ExportToXMLWithFieldArray(u,this.module.iterateFieldsEx(t.fieldNames),!i),r=c.getBlob("application/xml");break;case h.dO.json:break;case h.dO.fdf:o.ExportToFDF(u,this.module.iterateFieldsEx(t.fieldNames),!i),r=c.getBlob("application/vnd.fdf");break;case h.dO.xfdf:o.ExportToXFDF(u,this.module.iterateFieldsEx(t.fieldNames),!i),r=c.getBlob("application/vnd.adobe.xfdf");break;default:throw new Error("Unsupported file format: ".concat(e))}if(!r)throw new Error("Failed to export form to file: format = ".concat(e));return r}},{key:"exportToTxt",value:function(e){return this.exportToFile(h.dO.text,e)}},{key:"exportToCSV",value:function(e){return this.exportToFile(h.dO.csv,e)}},{key:"exportToJSON",value:function(e){var t,n=null===(t=e.isExcludeFields)||void 0===t||t,r=[],i=!0,a=!1,o=void 0;try{for(var s,c=this.iterateFields(e.fieldNames,n)[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value,l=u.GetType().value,d=u.GetName().toString(),h=(0,f.oe)(u,!0);r.push({type:l,name:d,value:h})}}catch(e){a=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}var g=JSON.stringify(r);return new Blob([g],{type:"application/json"})}},{key:"exportToXML",value:function(e){return this.exportToFile(h.dO.xml,e)}},{key:"exportToFDF",value:function(e){return this.exportToFile(h.dO.fdf,e)}},{key:"exportToXFDF",value:function(e){return this.exportToFile(h.dO.xfdf,e)}},{key:"importFromCSV",value:function(e,t){return this.importFormFromFile(h.dO.csv,e,t)}},{key:"importFromTXT",value:function(e,t){return(0,r._)(function(){return(0,d.Jh)(this,function(n){return[2,this.importFormFromFile(h.dO.text,e,t)]})}).call(this)}},{key:"importFromJSON",value:function(e,t){return(0,r._)(function(){var n;return(0,d.Jh)(this,function(r){switch(r.label){case 0:return[4,H(e,t.encoding)];case 1:return n=r.sent(),[2,this._importFromJSON(JSON.parse(n),t)]}})}).call(this)}},{key:"_importFromJSON",value:function(e,t){return(0,r._)(function(){var n,r,i,a,o,s,c,u,l;return(0,d.Jh)(this,function(d){switch(d.label){case 0:t.progress&&t.progress(),n=!0,r=!1,i=void 0,d.label=1;case 1:d.trys.push([1,7,8,9]),a=e[Symbol.iterator](),d.label=2;case 2:return(n=(o=a.next()).done)?[3,6]:(s=o.value,c=s.name,u=s.value,[4,this._importFieldValue(c,u)]);case 3:return d.sent(),t.progress?[4,t.progress()]:[3,5];case 4:d.sent(),d.label=5;case 5:return n=!0,[3,2];case 6:return[3,9];case 7:return l=d.sent(),r=!0,i=l,[3,9];case 8:try{n||null==a.return||a.return()}finally{if(r)throw i}return[7];case 9:return this.afterImportForm(),[2]}})}).call(this)}},{key:"importFromXML",value:function(e,t){return this.importFormFromFile(h.dO.xml,e,t)}},{key:"importFromFDF",value:function(e,t){return this.importFormFromFile(h.dO.fdf,e,t)}},{key:"importFromXFDF",value:function(e,t){return this.importFormFromFile(h.dO.xfdf,e,t)}},{key:"_importFieldValue",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,r._)(function(){var r,i,a,o,s,c,u,l;return(0,d.Jh)(this,function(d){switch(d.label){case 0:if(r=this.module,i=r.form,a=r.engine,o=(0,h.Eo)(a,e),1!==i.GetFieldCount(o))return[2];if((s=i.GetField(0,o)).IsEmpty())return[2];if(c=(0,f.oe)(s,!0),u=Array.isArray(t)?t[0]:t,n)switch(s.GetType()){case a.FieldType.e_TypeCheckBox:case a.FieldType.e_TypeRadioButton:u=(0,h.gt)((null===(l=u.match(/\(([\s\S]*)\)/))||void 0===l?void 0:l[0])||"");break;default:u=(0,h.gt)(u)}return c===u?[3,2]:(s.SetValue((0,h.Eo)(a,u)),this.module.updateAllWidgetApOfField(s),[4,this.module.additionalActionAPI.triggerAction({type:"field",field:s},f.n6.FIELD_VALUE_CHANGED)]);case 1:d.sent(),d.label=2;case 2:return[2]}})}).call(this)}},{key:"afterImportForm",value:function(){return(0,r._)(function(){return(0,d.Jh)(this,function(e){switch(e.label){case 0:return[4,this.recalculateValue()];case 1:return e.sent(),[2]}})}).call(this)}},{key:"setAlignment",value:function(e){var t=this.module,n=t.form,r=t.engine;switch(e){case f.JR.left:n.SetAlignment(r.Alignment.e_AlignmentLeft);break;case f.JR.center:n.SetAlignment(r.Alignment.e_AlignmentCenter);break;case f.JR.right:n.SetAlignment(r.Alignment.e_AlignmentRight)}}},{key:"reset",value:function(){this.module.form.Reset()}},{key:"generateFieldName",value:function(e,t){var n=this,r=e.type,i=e.isImage,a=e.isDateOrTime;if(!t)throw new Error("The fieldTypeName must not empty: ".concat(t));for(var o=this.module,s=o.form,c=o.engine,u=(0,g.Dp)(c,""),l=s.GetFieldCount(u),d=Array(l).fill(0).map(function(e,t){return s.GetField(t,u)}).filter(function(e){return!e.IsEmpty()}).filter(function(e){if(!(e.GetType().value===r))return!1;if(r===f.fS.Text&&a)return(n.getScript(e)||"").indexOf("Date")>-1;if(r===f.fS.PushButton&&i){var t=e.GetControl(0);if(!t||t.IsEmpty())return;var o=t.GetWidget();if(!o||o.IsEmpty())return;return o.GetMKIconFit().is_proportional_scaling}return!0}).length,h=t+d,p=1;;){var v=(0,g.Dp)(c,h);if(0===s.GetFieldCount(v))break;h=t+(d+p),p++}return h}},{key:"getScript",value:function(e){var t=this.module,n=t.engine,r=t.form,i=e.GetDict().GetElement((0,g.n5)(n,"AA"));if(i){var a=i.GetDict();if(a){var o=new n.AdditionalAction(r.GetDocument(),a),s=o.GetAction(n.TriggerEvent.e_TriggerFieldKeyStroke);if(s.IsEmpty())(0,_.Z)(o);else{if(s.GetType()===n.ActionType.e_TypeJavaScript){var c=new n.JavaScriptAction(s),u=(0,h.$h)(n,c.GetScript());return(0,_.Z)(o,c),u}(0,_.Z)(o)}}}}},{key:"setDesignMode",value:function(e){this.module.setDesignMode(e)}},{key:"setAutoHighlightControl",value:function(e){this.module.setAutoHighlightControl(e)}},{key:"removeFocus",value:function(){var e=this.module,t=e.formFiller,n=e.focusOnWidget,r=e.formFillerAssistCallback;n&&(!n||n.isDeleted()||n.IsEmpty()||(n.GetField().GetType()===this.module.engine.FieldType.e_TypeSignature&&r.FocusLostFromControl(n.GetControl(),(0,h.Ys)(this.module.engine,"")),t.KillFocus()),this.module.setFocusOnControl(void 0))}},{key:"removeWidget",value:function(e){var t=this.module,n=t.doc,r=t.engine,i=t.form,a=t.focusOnWidgetId,o=this.getWidget(e);a&&(0,D.zR)(a,e)&&this.removeFocus();var s=o.GetField(),c=!1;if(s.GetType()===r.FieldType.e_TypeSignature){var u=new r.Signature(s);n.doc.RemoveSignature(u),c=!0}else{1===s.GetControlCount()?(i.RemoveField(s),c=!0):i.RemoveControl(o.GetControl())}var l=n.getPageFromCache(e.pageIndex);return l&&l.update(),{fieldRemoved:c}}},{key:"getFields",value:function(){var e=this.module,t=e.form,n=e.engine,r=(0,g.Dp)(n,""),i=t.GetFieldCount(r);return Array.from({length:i},function(e,n){var i=t.GetField(n,r);return{type:i.GetType().value,name:i.GetName().toString()}})}},{key:"getFieldsCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.module,n=t.form,r=t.engine,i=(0,h.Eo)(r,null!=e?e:"");return n.GetFieldCount(i)}},{key:"getAllWidgets",value:function(){var e=this,t=this.module,n=t.form,r=t.engine,i=(0,g.Dp)(r,""),a=n.GetFieldCount(i);return Array.from({length:a},function(t,r){var a=n.GetField(r,i),o=Array.from({length:a.GetControlCount()},function(t,n){var r=a.GetControl(n);if(!r.IsEmpty()){var i=r.GetWidget();if(!i.IsEmpty()){var o=i.GetPage();if(!o.IsEmpty()){var s=o.GetIndex(),c=i.GetDict().GetObjNum();o.delete();var u={pageIndex:s,objNumber:c},l=e.extractFieldType(a);return{widgetId:u,field:{name:a.GetName().toString(),type:l}}}}}}).filter(function(e){return!!e});return o}).flat()}},{key:"addTooltipsForAllFormFields",value:function(){var e=this.module,t=e.form,n=e.engine,r=(0,g.Dp)(n,""),i=t.GetFieldCount(r);Array.from({length:i},function(e,n){var i=t.GetField(n,r);i.SetAlternateName(i.GetName())})}},{key:"hasFieldsInCalculationOrder",value:function(){return this.module.form.GetFieldsInCalculationOrderCount()>0}},{key:"addFieldIntoCalculationOrder",value:function(e){var t=this.module,n=t.form,r=t.engine,i=(0,h.Eo)(r,e),a=n.GetField(0,i);if(!a.IsEmpty()){for(var o=n.GetFieldsInCalculationOrder(),s=o.GetSize(),c=0;c<s;c++){if(o.GetAt(c).GetName().toString()===e)return}o.Add(a),n.SetFieldsInCalculationOrder(o)}}},{key:"getFieldsInCalculationOrder",value:function(){return this.getFieldsInCalculationOrderSync()}},{key:"insertFieldIntoCalculationOrder",value:function(e){var t=this.module,n=t.form,r=t.engine,i=(0,h.Eo)(r,e),a=n.GetField(0,i);if(!a.IsEmpty()){var o=n.GetFieldsInCalculationOrderCount();n.InsertFieldInCalculationOrder(a,o)}}},{key:"removeFieldFromCalculationOrder",value:function(e){var t=this.module,n=t.form,r=t.engine,i=(0,h.Eo)(r,e),a=n.GetField(0,i);a.IsEmpty()||n.RemoveFieldInCalculationOrder(a)}},{key:"getFieldsInCalculationOrderSync",value:function(){var e=this.module.form.GetFieldsInCalculationOrder();return Array.from({length:e.GetSize()},function(t,n){return e.GetAt(n).GetName().toString()})}},{key:"setFieldsInCalculationOrder",value:function(e){var t=this.module,n=t.form,r=t.engine,i=new r.FieldArray;e.forEach(function(e){var t=n.GetField(0,(0,g.Dp)(r,e));t.IsEmpty()||i.Add(t)}),n.SetFieldsInCalculationOrder(i)}},{key:"calculate",value:function(e){var t,n=this;if(this.module.isCalculateEnabled()){var r=this.module,i=r.form,a=r.engine,o=(r.additionalActionAPI,r.doc.doc,i.GetFieldsInCalculationOrder()),s=Array.from({length:o.GetSize()},function(e,t){return o.GetAt(t)}).filter(function(e){return!e.IsEmpty()}).filter(function(e){switch(e.GetType()){case a.FieldType.e_TypeComboBox:case a.FieldType.e_TypeTextField:return!0}return!1}).filter(function(t){return n.fieldIsInPage(t,e)}),c=!0,u=!1,d=void 0;try{for(var h,f=s[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var g=h.value;this.recalculateGSDKField(g)}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}(t=this.module).updateAllWidgetApOfField.apply(t,(0,l._)(s))}}},{key:"recalculate",value:function(e){var t,n=this;if(this.module.isCalculateEnabled()){var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;if(!i.has(e))return 1;var n=i.get(e);if(!n)return 1;if(t.has(e))return t.get(e);t.set(e,0);var a=n.reduce(function(e,n){return e+r(n,t)},1);return t.set(e,a),a},i=this.resolveRelations(e),a=new Map;i.forEach(function(e,t){a.set(t,r(t))});var o=Array.from(a.entries()).sort(function(e,t){return e[1]>t[1]?1:-1}).map(function(e){return e[0]}).map(function(e){return n.module.getFieldByName(e)}),s=!0,c=!1,u=void 0;try{for(var d,h=o[Symbol.iterator]();!(s=(d=h.next()).done);s=!0){var f=d.value;this.recalculateGSDKField(f)}}catch(e){c=!0,u=e}finally{try{s||null==h.return||h.return()}finally{if(c)throw u}}(t=this.module).updateAllWidgetApOfField.apply(t,(0,l._)(o))}}},{key:"resolveRelations",value:function(e){var t,n=this,r=this.module,i=r.form,a=r.engine,o=(0,g.Dp)(a,""),s=i.GetFieldCount(o),c=new Map,u=new Map,l=Array.from({length:s},function(e,t){return i.GetField(t,o)});l.forEach(function(e){u.set(e.GetName().toString(),e)}),u.forEach(function(e,t){var r=n.getCalculateScript(e);if(r){var i=(n.describeCalculateRelation(r)||{}).fields;i&&0!==i.length&&c.set(t,i)}});var d=new Map;return c.forEach(function(t,n){n!==e?(t.includes(e)||t.some(function(e){return d.has(e)}))&&d.set(n,t):d.set(n,t)}),null===(t=c.get(e))||void 0===t||t.forEach(function(e){c.has(e)&&d.set(e,c.get(e))}),l.forEach(function(e){(0,h.xF)(e)}),d}},{key:"enableCalculate",value:function(e){this.module.enableCalculate(e)}},{key:"recalculateGSDKField",value:function(e){if(this.module.isCalculateEnabled()){var t=this.module,n=t.engine,r=t.doc.doc,i=this.getCalculateScript(e);i&&r.ExecuteFieldCalculate(e.GetName(),e.GetName(),(0,h.Eo)(n,"".concat(i,';\n                (function(field, newValue) {\n                    if(field.value !== newValue) {\n                        field.value = newValue;\n                    }\n                })(this.getField("').concat(e.GetName().toString().replace(/["]/g,'\\"'),'"), event.value)\n            ')),e.GetValue())}}},{key:"getCalculateScript",value:function(e){var t={type:"field",field:e},n=(0,u._)(this.module.additionalActionAPI.getActions(t,[f.n6.FIELD_RECALCULATE_VALUE]),1)[0];if(n){var r=n.data;if(r.type===v.Us.javaScript){var i=r.data.javascript;if(i)return i}}}},{key:"describeCalculateRelation",value:function(e){if(-1!==e.indexOf("AFSimple_Calculate")){var t;try{t=new Function("function AFSimple_Calculate(){return arguments;}; return ".concat(e))()}catch(e){return}if(t)return{relation:t[0],fields:t[1]}}}},{key:"fieldIsInPage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(!(t>=0))return!1;var n=this.module.doc.doc.GetPage(t);(0,h.xF)(n);var r=e.GetControlCount();return Array.from({length:r}).findIndex(function(n,r){return e.GetControl(r).GetWidget().GetPage().GetIndex()===t})>-1}},{key:"resetFieldsValue",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){};return(0,r._)(function(){var r,i,a,o,s,c;return(0,d.Jh)(this,function(u){if(r=this.module,i=r.form,a=r.engine,(o=!e||0===e.length)&&!t)return n(100),[2];this.module.formFillerAssistCallback.needRefreshSync=!0;try{s=a.ResetProgressCallbackWrapper.implement({ProgressNotify:function(e){n(e)}}),o&&t?i.Reset(s)||n(-1):(c=new a.WStringArray,null==e||e.forEach(function(e){c.Add((0,h.Eo)(a,e))}),i.ResetByName(c,!t,s)||n(-1),(0,h.xF)(c))}finally{this.module.formFillerAssistCallback.needRefreshSync=!1}return[2]})}).call(this)}},{key:"recalculateValue",value:function(){return(0,r._)(function(){var e,t,n,r,i,a,o,s,c;return(0,d.Jh)(this,function(u){switch(u.label){case 0:e=this.module.additionalActionAPI,t=this.getFieldsInCalculationOrderSync(),n=!0,r=!1,i=void 0,u.label=1;case 1:u.trys.push([1,6,7,8]),a=t[Symbol.iterator](),u.label=2;case 2:return(n=(o=a.next()).done)?[3,5]:(s=o.value,[4,e.triggerAction({type:"field",fieldName:s},f.n6.FIELD_RECALCULATE_VALUE)]);case 3:u.sent(),u.label=4;case 4:return n=!0,[3,2];case 5:return[3,8];case 6:return c=u.sent(),r=!0,i=c,[3,8];case 7:try{n||null==a.return||a.return()}finally{if(r)throw i}return[7];case 8:return[2]}})}).call(this)}},{key:"extractSubmitFormPayload",value:function(e,t){return(0,r._)(function(){var n,r,i,a,o,s,c,u,l,h,g,p,v,m,_;return(0,d.Jh)(this,function(d){switch(d.label){case 0:switch(n=e.format,r=e.fieldNames,i=e.config,a=!i.includeOrExcludeFields,o=!1!==i.includeNoValueFields,n){case"html":return[3,1];case"fdf":return[3,2];case"xfdf":return[3,3];case"pdf":return[3,4];case"txt":return[3,6];case"xml":return[3,7]}return[3,8];case 1:s=new URLSearchParams,c=!0,u=!1,l=void 0;try{for(h=this.iterateFields(r,a)[Symbol.iterator]();!(c=(g=h.next()).done);c=!0)p=g.value,t&&t(),v=p.GetName().toString(),m=(0,f.oe)(p,!0),(o||m)&&s.set(v,m)}catch(e){u=!0,l=e}finally{try{c||null==h.return||h.return()}finally{if(u)throw l}}return[2,new Blob([s.toString()],{type:"text/plain"})];case 2:return[2,this.exportToFDF({fieldNames:r,isExcludeFields:a,forceExportEmpty:!0})];case 3:return[2,this.exportToXFDF({fieldNames:r,isExcludeFields:a,forceExportEmpty:!0})];case 4:return _=[],[4,this.module.doc.getStream({writeStream:function(e){_.push(new Blob([e]))}},0)];case 5:return d.sent(),[2,new Blob(_,{type:"application/pdf"})];case 6:return[2,this.exportToTxt({fieldNames:r,isExcludeFields:a,forceExportEmpty:!0})];case 7:return[2,this.exportToXML({fieldNames:r,isExcludeFields:a,forceExportEmpty:!0})];case 8:throw new Error("Unsupported format: ".concat(n));case 9:return[2]}})}).call(this)}},{key:"submitForm",value:function(e){return(0,r._)(function(){var t,n,r,i,a,o,s,c,u,l,g;return(0,d.Jh)(this,function(d){switch(d.label){case 0:return t=this.module,n=t.doc.doc,r=t.engine,i=t.additionalActionAPI,a=e.params,o=e.progress,s=e.fetcher,c=e.triggerInfo,[4,this.extractSubmitFormPayload(a,o)];case 1:u=d.sent(),d.label=2;case 2:return d.trys.push([2,4,,5]),[4,s(a,u)];case 3:return l=d.sent(),[3,5];case 4:if((g=d.sent())===f.O5)return[2];throw g;case 5:return l.match(/\/JavaScript <<\/Before\s\(([\s\S]*?)\)>>/)?(c?i.executeJavaScript(c.query,c.trigger,{javascript:l}):n.ExecuteDocJavaScript(r.TriggerEvent.e_TriggerAnnotMouseButtonPressed,(0,h.Eo)(r,""),(0,h.Eo)(r,l)),[2,l]):[2,l]}})}).call(this)}},{key:"iterateFields",value:function(e){var t,n=arguments;return(0,d.Jh)(this,function(r){switch(r.label){case 0:return t=n.length>1&&void 0!==n[1]&&n[1],[5,(0,d.XA)(this.module.iterateFields(e,t))];case 1:return r.sent(),[2]}})}},{key:"duplicateField",value:function(e,t){var n=this.module,r=n.doc,i=n.form,a=n.engine,o=this.module.getWidget(e),s=o,c=s.GetField(),u=c.GetName(),l=o.GetPage();if(l.IsEmpty()&&(l=r.doc.GetPage(e.pageIndex)),l.IsEmpty())throw new Error("Cannot create multiple copies, the page does not exist: ".concat(e.pageIndex));var d=t.map(function(e){var t=e.left,n=e.right,r=e.top,o=e.bottom,s=new a.CFX_FloatRect(t,o,n,r);return i.AddControl(l,u,c.GetType(),s)}).map(function(e){return e.GetWidget().CopyPropertyFromOtherWidget(s),e}),h=d.map(function(e){var t=e.GetWidget().GetDict().GetObjNum();return{pageIndex:l.GetIndex(),objNumber:t}});d.splice(0,0,c.GetControl(0));var f=r.getPageFromCache(e.pageIndex);return null==f||f.update(),h}},{key:"getWidgetFromField",value:function(e,t){for(var n=0,r=e.GetControlCount();n<r;n++){var i=e.GetControl(n);if(!i.IsEmpty()){var a=i.GetWidget();if(!a.IsEmpty()){if(a.GetDict().GetObjNum()==t)return a;(0,h.xF)(a),(0,h.xF)(i)}}}}},{key:"copyControls",value:function(e,t){var n=this,r=this.module,i=r.engine,a=r.doc,o=r.form,s=a.doc,c=a.doc.GetPage(e);if(!c||c.IsEmpty())throw new Error("Cannot copy controls from page: ".concat(e,", this page is not exists!"));var u=[];t.forEach(function(e){var t,r,a=n.module.getFieldByName(e.fieldName,!1);if(w(a)&&(r=n.getWidgetFromField(a,e.objectNumber)),w(r))t=a.GetControl(0);else{var l=s.GetIndirectObject(e.objectNumber);if(!l)return;var d=s.GetIndirectObject(e.fieldObjNumber);if(!d)return;var f=l.GetDict(),p=d.GetDict();if(!w(t=o.AddControlByDict(c,p,f,(0,h.Eo)(i,e.fieldName))))return;r=t.GetWidget(),Promise.resolve().finally(function(){o.RemoveControl(t)})}if(w(t)&&w(r)){var v=e.pdfRect,m=v.left,_=v.right,y=v.top,S=v.bottom,b=new i.CFX_FloatRect(m,S,_,y),I=o.AddControl(c,(0,g.Dp)(i,e.fieldName),{value:e.fieldType},b);u.push(I),I.GetWidget().CopyPropertyFromOtherWidget(r),(0,h.xF)(b)}});var l=a.getPageFromCache(e);return null==l||l.update(),u.map(function(e){var t=e.GetWidget(),n=t.GetPage(),r=t.GetDict().GetObjNum();return{pageIndex:n.GetIndex(),objNumber:r}})}},{key:"cloneWidgets",value:function(e){return(0,r._)(function(){var t,n,r,i,a,o,s,c,u,l;return(0,d.Jh)(this,function(d){switch(d.label){case 0:t=this,n=this.module,r=n.engine,i=n.doc,a=n.form,o=[],s=i.doc.GetPageCount(),c=function(){e.forEach(function(e){var n=e.targetPageIndex,c=e.srcWidgetId,u=e.targetPDFRect,l=e.targetFieldName;if(n<0||n>=s)throw new Error("Cannot clone widget to page: ".concat(n,", the page index is invalid!"));if(!c||c.pageIndex<0||c.pageIndex>=s)throw new Error("Cannot clone widget: ".concat(c,", the WidgetId is invalid!"));var d=i.doc.GetPage(n);if(!d||d.IsEmpty())throw new Error("Cannot clone widget to page: ".concat(n,", this page is not exists!"));var f=t.module.getWidget(c);if(!f||f.IsEmpty())throw new Error("Cannot clone widget: ".concat(c,", this widget is not exists!"));var g,p=function(){if(u){var e=u.left,t=u.right,n=u.top,i=u.bottom,a=new r.CFX_FloatRect(e,i,t,n);return(0,h.xF)(a),a}return f.GetRect()}(),v=f.GetField();if(v.GetType()===r.FieldType.e_TypeSignature)throw new Error("Cannot clone widget: ".concat(c,", Not support signature field."));if(l){if(g=(0,h.Eo)(r,l),!a.ValidateFieldName(v.GetType(),g))throw new Error("Invalid field name: ".concat(l));(0,h.xF)(g)}else g=v.GetName();var m=a.AddControl(d,g,v.GetType(),p),_=m.GetWidget();_.CopyPropertyFromOtherWidget(f);var y=_.GetDict().GetObjNum();o.push({pageIndex:n,objNumber:y}),(0,h.xF)(m),(0,h.xF)(_)})},d.label=1;case 1:return d.trys.push([1,3,,4]),c(),u=Array.from(new Set(o.map(function(e){return e.pageIndex}))).map(function(e){var t=i.getPageFromCache(e);if(t)return t.update()}),[4,Promise.all(u)];case 2:return d.sent(),[3,4];case 3:throw l=d.sent(),o.forEach(function(e){t.removeWidget(e)}),l;case 4:return[2,o]}})}).call(this)}},{key:"duplicateWidget",value:function(e,t){var n,r=this.module,i=r.doc,a=r.form,o=r.engine,s=this.module.getWidget(e);if(!s)throw new Error("Cannot duplicate widget: ".concat(e,", this widget is not exists!"));var c=null===(n=i.getPageFromCache(e.pageIndex))||void 0===n?void 0:n.page;if(c||(c=s.GetPage(),(0,h.xF)(c)),!c)throw new Error("Cannot duplicate widget: ".concat(e,", this widget is not in a page!"));var u=s,l=u.GetField(),d=l.GetName(),f=c.GetHeight(),g=u.GetRect(),p=g.right-g.left,v=g.top-g.bottom,m=f-g.top,_=[],y=i.getPageCount();return t.forEach(function(e){if(e<0||e>=y)throw new Error("Invalid page index: ".concat(e,", page count: ").concat(y))}),t.forEach(function(e){var t=i.getPageFromCache(e),n=i.doc.GetPage(e),r=n.GetHeight(),s=g.left,c=r-m,f=c-v,y=s+p,S=new o.CFX_FloatRect(s,f,y,c),b=a.AddControl(n,d,l.GetType(),S).GetWidget();b.CopyPropertyFromOtherWidget(u),null==t||t.update(),(0,h.xF)(S),_.push({pageIndex:e,objNumber:b.GetDict().GetObjNum()})}),_}},{key:"setHighlightColor",value:function(e){this.module.setHighlightColor(e)}},{key:"setRequiredColor",value:function(e){this.module.setRequiredColor(e)}},{key:"getRequiredColor",value:function(){return this.module.getRequiredColor()}},{key:"isHighlight",value:function(){var e=this.module.isHighlight();return e}},{key:"highlightFormFields",value:function(e){this.module.highlightFormFields(e)}},{key:"getHighlightColor",value:function(){return this.module.getHighlightColor()}},{key:"onHighlightChanged",value:function(e){return this.module.onHighlightChanged(e)}},{key:"createSignatureBatch",value:function(e,t){var n,r=this.module,i=r.doc,a=r.form,o=r.engine;if("string"==typeof t){var s=(0,h.Eo)(o,t),c=a.GetField(0,s);if(c.IsEmpty())throw new Error("Cannot find field by name: ".concat(t));if(c.GetType()!==o.FieldType.e_TypeSignature)throw new Error("Field is not a signature field: ".concat(t));var u=new o.Signature(c);if(u.IsSigned())throw new Error("Signature field is signed: ".concat(t));if(!u.GetSignatureDict())throw new Error("Signature field has no V dictionary: ".concat(t));n=u}var l=e.map(function(e){var t,n=e.pageIndex,r=e.rect,a=i.getPageFromCache(n),o=null!==(t=null==a?void 0:a.page)&&void 0!==t?t:i.doc.GetPage(n);if(!o)throw new Error("Page not exists: "+n);return{page:o,rect:r}}).map(function(e,r){var i=e.page,a=e.rect,s=new o.CFX_FloatRect(a.left,a.bottom,a.right,a.top);s.Normalize();var c,u=new o.WString(""),l=function(){if(!n)throw new Error("Unknown error");c=i.AddSignatureWithExistedVDict(s,u,o.SignatureType.e_SignatureTypeOrdinary,!1,n)};switch(t){case 0:c=i.AddSignature(s,u,o.SignatureType.e_SignatureTypeOrdinary,!1);break;case 1:0===r?(c=i.AddSignature(s,u,o.SignatureType.e_SignatureTypeOrdinary,!1),n=c):l();break;default:l()}if(c)return{pageIndex:i.GetIndex(),objNumber:c.GetDict().GetObjNum()}}).filter(Boolean);return Array.from(new Set(l.map(function(e){return e.pageIndex}))).forEach(function(e){var t=i.getPageFromCache(e);t&&t.update()}),l}},{key:"getCaretPosition",value:function(){return this.module.getCaretPosition()}},{key:"getWidgetHandlerViewBBox",value:function(e,t){var n;if(!(n=(0,D.zR)(this.module.focusOnWidgetId,t)?this.module.focusOnWidget:this.module.getWidget(t))||n.IsEmpty())return{left:0,right:0,top:0,bottom:0};var r=n.GetControl();return r.IsEmpty()?{left:0,right:0,top:0,bottom:0}:this.module.getWidgetHandlerViewBBox(e,r)}}]),e}(),z=n(2277),V=function(e){function t(e,n){var r;(0,a._)(this,t),r=(0,i._)(this,t),(0,s._)(r,"doc",void 0),(0,s._)(r,"additionalActionAPI",void 0),(0,s._)(r,"engine",void 0),(0,s._)(r,"remoteAssistCallbackImpl",void 0),(0,s._)(r,"remoteSubmitFormCallbackImpl",void 0),(0,s._)(r,"focusOnWidgetId",void 0),(0,s._)(r,"focusOnWidget",void 0),(0,s._)(r,"mouseOverWidgetId",void 0),(0,s._)(r,"mouseOverWidgetData",void 0),(0,s._)(r,"designMode",void 0),(0,s._)(r,"isHighlighted",void 0),(0,s._)(r,"highlightColor",void 0),(0,s._)(r,"requiredColor",void 0),(0,s._)(r,"highlightStore",void 0),(0,s._)(r,"autoHighlightControl",void 0),(0,s._)(r,"actionEventHandler",void 0),(0,s._)(r,"bIsCalculateEnabled",void 0),(0,s._)(r,"disableRefresh",void 0),(0,s._)(r,"fieldValueChanged",void 0),r.doc=e,r.additionalActionAPI=n,r.mouseOverWidgetData={widgetId:void 0,control:void 0},r.designMode=f.Hs.NONE,r.isHighlighted=!0,r.highlightColor=9211135,r.requiredColor=6513663,r.highlightStore=new h.N7,r.autoHighlightControl=!0,r.bIsCalculateEnabled=!0,r.disableRefresh=!1,r.fieldValueChanged=!1,r.engine=r.doc.engine,r.remoteAssistCallbackImpl=r.doc.obtainRemoteAPI("form-filler-assist-callback-channel-id"),r.remoteSubmitFormCallbackImpl=r.doc.obtainRemoteAPI(f.IQ),r.formAPI=new K(r),r.addDestroyHook(r.doc.defineRemoteAPI(f.KH,new R(r)),r.doc.defineRemoteAPI(f.Un,r.fieldAPI=new P(r)),r.doc.defineRemoteAPI(f.pJ,r.formAPI),r.doc.defineRemoteAPI(f.VW,r.signatureAPI=new z.x(r)),r.doc.defineRemoteAPI(f.Yp,new B(r))),r.actionEventHandler=new m(r);var o=new T(r);o.ownsTo(r),r.formFillerAssistCallback=o;var c=h.oM.property(r,"form",function(){return r.initForm()}),u=h.oM.property(r,"formFiller",function(){return r.initFormFiller()});return r.addDestroyHook(c,u),r}return(0,c._)(t,e),(0,o._)(t,[{key:"init",value:function(){return h.oM.loadProperty(this,"form"),h.oM.loadProperty(this,"formFiller"),this.form}},{key:"render",value:function(e,t,n){this.doc.hasForm()&&this.formFiller&&this.formFiller.Render(e,t,n)}},{key:"reset",value:function(){h.oM.reset(this,"formFiller"),h.oM.reset(this,"form")}},{key:"toARGB",value:function(e,t){return(16777215&e|t<<24)>>>0}},{key:"toRGB",value:function(e){return 16777215&e}},{key:"initFormFiller",value:function(){var e=this.engine,t=e.FillerAssistCallback.implement(this.formFillerAssistCallback),n=new e.Filler(this.form,t);n.HighlightFormFields(this.isHighlighted),n.SetHighlightColor(this.toARGB(this.highlightColor,127)),n.SetRequiredColor(this.toARGB(this.requiredColor,128));var r=new F(this);return this.addDestroyHook(this.doc.defineRemoteAPI(f.mT,r),function(){n.KillFocus(),n.delete(),t.delete()}),r.ownsTo(this),n}},{key:"initForm",value:function(){var e=new this.engine.Form(this.doc.doc);return this.addDestroyHook(function(){"delete"in e&&"function"==typeof e.delete&&e.delete()}),this.highlightStore.dispatch({isHighlight:this.isHighlighted,highlightColor:this.toRGB(this.highlightColor),requiredColor:this.toRGB(this.requiredColor)}),this.initJSFormCallback(),this.initFormNotifyCallback(e),e}},{key:"initJSFormCallback",value:function(){if(!this.jsFormCallback){var e=new L(this);this.jsFormCallback=e;var t=this.engine.JSFormCallback.implement(e);this.doc.doc.SetJSFormCallback(t),this.addDestroyHook(function(){t.delete()})}}},{key:"initFormNotifyCallback",value:function(e){var t=this;if(!this.formNotifyCallback){this.formNotifyCallback=new x(this);var n=this.engine.FormNotifierCallback.implement(this.formNotifyCallback);e.SetFormNotifierCallback(n);var r=function(){t.refreshAfterValueChanged()};globalThis.addEventListener("error",r),this.addDestroyHook(function(){n.delete(),globalThis.removeEventListener("error",r)})}}},{key:"refreshAfterValueChanged",value:function(){this.disableRefresh&&(this.disableRefresh=!1,this.fieldValueChanged&&(this.fieldValueChanged=!1,this.refreshVisiblePages()))}},{key:"refreshVisiblePages",value:function(){this.remoteAssistCallbackImpl.refreshVisiblePages()}},{key:"resolveGSDKParams",value:function(e){return(0,r._)(function(){var t,n,r,i;return(0,d.Jh)(this,function(a){switch(a.label){case 0:return[4,this.doc.getPageByIndex(e.page)];case 1:return t=a.sent(),n=t.page,r=new this.engine.PointF(e.left,e.top),i=p(this.engine,e.flags),[2,{cPage:n,point:r,flag:i}]}})}).call(this)}},{key:"getWidgetAppearance",value:function(e){var t,n,r=this.engine.AppearanceType,i=e.GetDict().GetObjNum();return(null===(t=this.focusOnWidgetId)||void 0===t?void 0:t.objNumber)==i?r.e_AppearanceTypeDown:(null===(n=this.mouseOverWidgetId)||void 0===n?void 0:n.objNumber)===i?r.e_AppearanceTypeRollover:r.e_AppearanceTypeNormal}},{key:"setFocusOnControl",value:function(e){this.focusOnWidgetId=e;var t=e?this.getWidget(e):void 0;this.focusOnWidget=!t||t.IsEmpty()?void 0:t}},{key:"setMouseOverControl",value:function(e){this.mouseOverWidgetId=e}},{key:"setMouseOverWidgetData",value:function(e){var t=e.widgetId,n=e.control;this.mouseOverWidgetData={widgetId:t,control:n}}},{key:"shouldRender",value:function(e){return!0}},{key:"prerender",value:function(e){}},{key:"updateAllWidgetApOfField",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=[],i=!0,a=!1,o=void 0;try{for(var s,c=t[Symbol.iterator]();!(i=(s=c.next()).done);i=!0)for(var u=s.value,d=u.GetControlCount(),f=0;f<d;f++){var g=u.GetControl(f),p=g.GetWidget();p.IsEmpty()||(p.ResetAppearanceStream(),r.push(p),(0,h.xF)(p),(0,h.xF)(g))}}catch(e){a=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}this.rerenderWidgets.apply(this,(0,l._)(r))}},{key:"getWidgetAndControl",value:function(e,t){for(var n=e.GetControlCount(),r=0;r<n;r++){var i=e.GetControl(r),a=i.GetWidget();if(!a.IsEmpty())if(a.GetDict().GetObjNum()===t.objNumber)return{widget:a,control:i}}throw new Error("Widget and Control not found! ".concat(JSON.stringify(t)))}},{key:"getField",value:function(e){return"string"==typeof e?this.getFieldByName(e):"index"in e&&"name"in e?this.getFieldById(e):this.getFieldByWidgetId(e)}},{key:"getFieldById",value:function(e){var t=this.form,n=this.engine,r=(0,g.Dp)(n,e.name),i=t.GetField(e.index,r);if(i.IsEmpty())throw new Error("Field not found! ".concat(JSON.stringify(e)));return i}},{key:"getFieldByName",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.form,r=this.engine,i=(0,g.Dp)(r,e),a=n.GetField(0,i);if(a.IsEmpty()&&t)throw new Error("Field not found! ".concat(JSON.stringify(e)));return a}},{key:"getFieldIndex",value:function(e){for(var t=this.form,n=this.engine,r=(0,g.Dp)(n,e),i=t.GetFieldCount(r),a=0;a<i;a++){var o=t.GetField(a,r);if(!o.IsEmpty())if(o.GetName().toString()===e)return a}return-1}},{key:"setDesignMode",value:function(e){this.designMode=e,this.autoHighlightControl&&(e===f.Hs.NONE?(this.formFiller.SetForceRender(!1),this.formFiller.HighlightFormFields(this.isHighlighted)):(this.formFiller.SetForceRender(!0),this.formFiller.HighlightFormFields(!1)))}},{key:"isInEditDesignMode",value:function(){return this.designMode!==f.Hs.NONE}},{key:"getWidget",value:function(e){var t,n=e.pageIndex,r=e.objNumber,i=this.doc.getPageFromCache(n);if((t=(null==i?void 0:i.page)?i.page:this.doc.doc.GetPage(n)).IsEmpty())throw new Error("Widget not found! page index: ".concat(n,", widget obj num: ").concat(r));var a=null==i?void 0:i._getAnnotIndexById(r);if("number"==typeof a&&a>-1){var o=t.GetAnnot(a);if(!o.IsEmpty())return new this.engine.Widget(o)}for(var s=t.GetAnnotCount(),c=0;c<s;c++){var u=t.GetAnnot(c);if(!u.IsEmpty())if(u.GetDict().GetObjNum()===r)return new this.engine.Widget(u)}throw new Error("Widget not found! page index: ".concat(n,", widget obj num: ").concat(r))}},{key:"getFieldByWidgetId",value:function(e){return this.getWidget(e).GetField()}},{key:"rerenderWidgets",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.reduce(function(e,t){var n=t.GetPage().GetIndex();return e.has(n)||e.set(n,[]),e.get(n).push(t),e},new Map);return Promise.all(Array.from(i).map(function(t){var n=(0,u._)(t,2);return function(t,n){var r,i,a,o,s=n.map(function(e){return e.GetRect()}),c=(r=Math).min.apply(r,(0,l._)(s.map(function(e){return e.left}))),u=(i=Math).max.apply(i,(0,l._)(s.map(function(e){return e.right}))),d=(a=Math).max.apply(a,(0,l._)(s.map(function(e){return e.top}))),h=(o=Math).min.apply(o,(0,l._)(s.map(function(e){return e.bottom}))),f={left:c,right:u,top:d,bottom:h};return e.remoteAssistCallbackImpl.refresh(t,f)}(n[0],n[1])}))}},{key:"enableCalculate",value:function(e){this.bIsCalculateEnabled=e}},{key:"isCalculateEnabled",value:function(){return this.bIsCalculateEnabled}},{key:"setHighlightColor",value:function(e){this.highlightColor=e,this.formFiller.SetHighlightColor(this.toARGB(this.highlightColor,127)),this.dispatchHighlightChange()}},{key:"setRequiredColor",value:function(e){this.requiredColor=e,this.formFiller.SetRequiredColor(this.toARGB(this.requiredColor,128)),this.dispatchHighlightChange()}},{key:"isHighlight",value:function(){return this.isHighlighted}},{key:"highlightFormFields",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,r._)(function(){return(0,d.Jh)(this,function(n){return this.formFiller&&this.isHighlight()!==e?(this.isHighlighted=e,this.designMode!==f.Hs.NONE||(this.formFiller.HighlightFormFields(e),t&&this.dispatchHighlightChange()),[2]):[2]})}).call(this)}},{key:"getHighlightColor",value:function(){return this.toRGB(this.highlightColor)}},{key:"getRequiredColor",value:function(){return this.toRGB(this.requiredColor)}},{key:"onHighlightChanged",value:function(e){var t=this,n=this.highlightStore.subscribe(function(){return e(t.isHighlighted,t.toRGB(t.highlightColor),t.toRGB(t.requiredColor))});return function(){n(),(0,h.EI)(e)&&e.revoke()}}},{key:"dispatchHighlightChange",value:function(){this.highlightStore.dispatch({isHighlight:this.isHighlighted,highlightColor:this.toRGB(this.highlightColor),requiredColor:this.toRGB(this.requiredColor)})}},{key:"iterateFields",value:function(e){var t,n,r,i,a,o,s,c,u,l,f,g=arguments;return(0,d.Jh)(this,function(d){switch(d.label){case 0:t=g.length>1&&void 0!==g[1]&&g[1],r=(n=this).engine,i=n.form,a=(0,h.Eo)(r,""),o=i.GetFieldCount(a),s=0,d.label=1;case 1:return s<o?(c=i.GetField(s,a)).IsEmpty()?[3,5]:void 0!==e&&0!==e.length?[3,3]:[4,c]:[3,6];case 2:return d.sent(),[3,5];case 3:return u=c.GetName().toString(),l=e.indexOf(u),f=-1!==l,t&&f?[3,5]:t||f?[4,c]:[3,5];case 4:d.sent(),d.label=5;case 5:return s++,[3,1];case 6:return[2]}})}},{key:"iterateFieldsEx",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.engine,n=this.form;return e.map(function(e){var r=(0,h.Eo)(t,e),i=n.GetFieldCount(r);if(1===i){var a=n.GetField(0,r);if(!a.IsEmpty())return a}else for(var o=0;o<i;o++){var s=n.GetField(o,r);if(!s.IsEmpty()&&s.GetName().toString()===e)return s}}).filter(Boolean).reduce(function(e,t){return e.Add(t),e},new t.FieldArray)}},{key:"clearCache",value:function(){this.formFiller&&this.formFiller.ClearCache()}},{key:"setAutoHighlightControl",value:function(e){this.autoHighlightControl=e}},{key:"getCaretPosition",value:function(){var e=this.formFiller.GetCaretPos();return{x:e.x,y:e.y}}},{key:"getWidgetHandlerViewBBox",value:function(e,t){var n=this.formFiller.GetWidgetHandlerViewBBox(e,t);return{left:n.left,right:n.right,top:n.top,bottom:n.bottom}}},{key:"hasCustomFillFormPermission",value:function(){var e=this.engine.UserPermissions;return!!(this.doc.JR.getDocPermissions()&(e.e_PermAnnotForm.value|e.e_PermFillForm.value|e.e_PermModify.value))}}]),t}(h.JT)},2277:(e,t,n)=>{"use strict";n.d(t,{x:()=>p});var r=n(5578),i=n(9227),a=n(7424),o=n(5991),s=n(2956),c=n(4570),u=n(7582),l=n(8925),d=n(5435);n(7731);var h=n(3850),f=n(776),g=n(1696),p=(n(5318),function(){function e(t){(0,i._)(this,e),(0,o._)(this,"module",void 0),this.module=t}return(0,a._)(e,[{key:"isSigned",value:function(e){var t=this.module.engine,n=this.module.getField(e),r=new t.Signature(n);return(0,l.xF)(r),r.IsSigned()}},{key:"getSignatureType",value:function(e){var t,n=this.module.engine,r=this.module.getField(e),i=new n.Signature(r);(0,l.xF)(i);var a=null===(t=i.GetSignatureType())||void 0===t?void 0:t.value;return null!=a?a:d.BG.Ordinary}},{key:"getByteRange",value:function(e){var t=this.module.engine,n=this.module.getField(e),r=new t.Signature(n);if((0,l.xF)(r),r.IsSigned())return this.getByteRangeFromGSDKField(n)}},{key:"getFilter",value:function(e){var t=this.module.engine,n=this.module.getField(e),r=new t.Signature(n);if((0,l.xF)(r),r.IsSigned())return r.GetFilter().toString()}},{key:"getSubFilter",value:function(e){var t=this.module.engine,n=this.module.getField(e),r=new t.Signature(n);if((0,l.xF)(r),r.IsSigned())return r.GetSubFilter().toString()}},{key:"getSigner",value:function(e){var t=this.module.engine,n=this.module.getField(e),r=new t.Signature(n);if((0,l.xF)(r),r.IsSigned())try{return r.GetKeyValue(t.KeyName.e_KeyNameSigner).toString()}catch(e){}}},{key:"getSignatureInfo",value:function(e){var t;var n=this.module.engine,r=this.module.getField(e),i=new n.Signature(r);(0,l.xF)(i);var a,o=i.IsSigned(),c=null!==(a=null===(t=i.GetSignatureType())||void 0===t?void 0:t.value)&&void 0!==a?a:d.BG.Ordinary,u=i.GetFieldMDPAction().value,h=[];if(u>1)for(var f=i.GetFieldMDPActionFields(),g=0;g<f.GetSize();g++)h.push(f.GetAt(g).toString());var p={type:u,fieldNames:h};if(!o){var v={isSigned:!1,isXFA:!1,signatureType:c,mdpAction:p};return Object.assign(v,{lockAction:{type:p.type,fields:p.fieldNames}}),v}var m,_=i.GetFilter().toString(),y=i.GetSubFilter().toString(),S=i.GetSignTime();if(S.IsValid()){0;var b=S.ToUTCTime();m=Date.UTC(b.year,b.month-1,b.day,b.hour,b.minute,b.second,b.milliseconds)}var I={signTimeFormat:undefined};var A=i.GetAppearanceFlags(),P=i.IsTimeStamp(),D=this.getByteRangeFromGSDKField(i),E=function(e){try{return i.GetKeyValue(e).toString()}catch(e){return""}},C=E(n.KeyName.e_KeyNameLocation),w=E(n.KeyName.e_KeyNameReason),k=E(n.KeyName.e_KeyNameSigner),T=E(n.KeyName.e_KeyNameContactInfo),F=E(n.KeyName.e_KeyNameDN),G=E(n.KeyName.e_KeyNameText),R=i.GetControl(0),x={};if(!R.IsEmpty()){var O=R.GetWidget(),M=O.GetPage().GetIndex(),N=O.GetRect();Object.assign(x,{pageIndex:M,signTime:m,rect:{left:N.left,right:N.right,top:N.top,bottom:N.bottom}})}return(0,s._)({isSigned:!0,signatureType:c,mdpAction:p,filter:_,subfilter:y,signTimeUTC:m,apFlag:A,isTimeStamp:P,byteRange:D,location:C,reason:w,signer:k,contact:T,DN:F,text:G},x,I)}},{key:"getByteRangeFromGSDKField",value:function(e){var t=this.module.engine,n=e.GetDict().GetElement((0,h.n5)(t,"V")).GetDict().GetElement((0,h.n5)(t,"ByteRange")).GetArray(),r=[];if(n)for(var i=n.GetElementCount(),a=0;a<i;a++)r.push(n.GetElement(a).GetInteger());return r}},{key:"isInvisible",value:function(e){var t=e.GetDict(),n=(0,h.n5)(this.module.engine,"Rect");if(t){var r=t.GetElement(n);if(!r||r.GetRect().IsEmpty())return!1}return this.isDocTimeStamp(e)}},{key:"isDocTimeStamp",value:function(e){var t=this.getVDict(e);if(!t)return!1;var n=this.module.engine,r=(0,h.n5)(n,"Type"),i=t.GetElement(r);return i||(i=this.getElementFromInheritedElement(t,r)),!!i&&"DocTimeStamp"===i.GetString().toString()}},{key:"getVDict",value:function(e){var t=this.module.engine,n=e.GetDict();if(!n)return null;var r=(0,h.n5)(t,"V");if(n.HasKey(r))return n.GetElement(r).GetDict();var i,a=n.GetElement((0,h.n5)(t,"Parent")),o=null==a?void 0:a.GetDirect();return null==o||null===(i=o.GetDict())||void 0===i?void 0:i.GetElement(r).GetDict()}},{key:"getElementFromInheritedElement",value:function(e,t){var n,r=this.module.engine,i=(0,h.n5)(r,"Parent"),a=e.GetElement(i);return a&&a.GetType()===r.PDFObjectType.e_Reference&&a.GetDirectObject()&&a.GetDirectObject().GetDict()&&(n=a.GetDirectObject().GetDict().GetElement(t)),n}},{key:"getSignatureBitmap",value:function(e){var t=this.module.engine,n=this.module.getField(e);if(!n.IsEmpty()){var r=new t.Signature(n).GetBitmap();try{if(r.IsEmpty())return;return function(e,t){if(!t.IsEmpty()){t.ConvertFormat(e.DIBFormat.e_DIBArgb);var n,r=t.GetWidth(),i=t.GetHeight(),a=t.GetBuffer(),o=i*t.GetPitch(),s=a+o,c=e.HEAPU8;n=c.buffer.slice?c.buffer.slice(a,s):new Uint8Array(c.buffer,a,s).buffer;for(var u=new Uint8Array(n),l=t.GetPitch(),d=0;d<i;d++)for(var h=0;h<r;h++){var f,g=d*l;f=[u[4*h+2+g],u[4*h+g]],u[4*h+g]=f[0],u[4*h+2+g]=f[1]}return{start:a,size:o,width:r,height:i,buffer:n}}}(this.module.engine,r)}finally{(0,f.Z)(r)}}}},{key:"isLast",value:function(e){var t=this.module.getField(e);return new this.module.engine.Signature(t).IsLast()}},{key:"getFileSizeOfSignedVersion",value:function(e){var t=this.module.engine;if(!e.IsSigned())return 0;try{return new t.Signature(e).GetFileSizeOfSignedVersion()}catch(e){t.getErrorCode(e);return 0}}},{key:"getCertificationInfo",value:function(e,t){var n=this.module,r=n.engine,i=n.doc,a=i.JR,o=i.doc,s=this.module.getField(e),c=new r.Signature(s);if(!s.IsSigned())return{};try{for(var u=c.GetCerts(),l=u.GetSize(),d=o.GetDSSCerts(),h=d.GetSize(),f=new r.StringArray,g=0;g<l;g++){var p=u.GetAt(g);f.Add(p)}for(var v=0;v<h;v++){var m=d.GetAt(v);f.Add(m)}var _=t.map(function(e){return e.uniqueSerialNumber});return a.getAllTrustCert(_).forEach(function(e){f.Add(e.cert)}),this.getCertificateInfoFromBFS(f,u.GetAt(l-1))}catch(e){return console.error(r.getErrorCode(e)),{certificateException:!0,reason:"number"==typeof e?e:-1}}}},{key:"getCertificateInfoFromBFS",value:function(e,t){var n=this.module,r=n.engine,i=n.doc.JR;try{var a=(0,g.F5)(r,e,t,i);if(0===Object.keys(a).length)return{};var o=a[Object.keys(a)[0]],s=o.map(function(e){return e.issuerChain[0]}),c=o.map(function(e){return e.issuerInfo}).join(";"),u=o.map(function(e){return e.subjectChain[0]}),l=o.map(function(e){return e.subjectInfo}).join(";"),d=o.map(function(e){return e.serialNumber}).join(";"),h=o.map(function(e){return e.validPeriodFrom}).join(";"),f=o.map(function(e){return e.validPeriodTo}).join(";");return s.forEach(function(e,t){e.level=t,e.levelString="0_".concat(t)}),u.forEach(function(e,t){e.level=t,e.levelString="0_".concat(t),e.isLeafNode=t===u.length-1}),{issuerChain:s,issuerInfo:c,subjectChain:u,subjectInfo:l,serialNumber:d,validPeriodFrom:h,validPeriodTo:f}}catch(e){return{}}}},{key:"verifySignature_fv",value:function(e,t,n,i){return(0,r._)(function(){var r,a,s,c,l,d,h,p,v,m,_,y;return(0,u.Jh)(this,function(u){switch(u.label){case 0:return r=this.module,a=r.engine,s=r.doc.JR,[4,this.module.getField(e)];case 1:c=u.sent(),l=new a.Signature(c),d=l.GetName().toString(),u.label=2;case 2:return u.trys.push([2,4,5,6]),[4,(0,g.ew)(a,t,n,s)];case 3:return h=u.sent(),l.StartVerify(h,0).Continue(),i?(p=l.GetVerifyInfo(),v={},_=(0,g.O1)({engine:a,verifyInfo:p,options:v,trustedCertificateList:null!==(m=null==n?void 0:n.trustedCertificateList)&&void 0!==m?m:[],JR:s}),[2,(0,o._)({},d,_)]):[3,6];case 4:return y=u.sent(),console.error(y),[2,(0,o._)({},d,{verifyException:!0})];case 5:return(0,f.Z)(l),[7];case 6:return[2]}})}).call(this)}},{key:"getVerificationData",value:function(e){return(0,r._)(function(){var t,n,r,i,a,o;return(0,u.Jh)(this,function(s){switch(s.label){case 0:return t=this.module,n=t.engine,r=t.doc,i=t.doc,i.JR,i.doc,[4,this.module.getField(e)];case 1:if(!(a=s.sent()))throw new Error("Cannot find field by id: ".concat(JSON.stringify(e)));if(a.GetType()!==n.FieldType.e_TypeSignature)throw new Error("Cannot handle signature verification, the field specified by ".concat(JSON.stringify(e)," is not a signature!"));return[4,r.getOriginalStream()];case 2:return o=s.sent(),[2,this._getVerificationData(a,o)]}})}).call(this)}},{key:"getVerificationDataSync",value:function(e){var t=this.module,n=t.engine,r=t.doc,i=t.doc;i.JR,i.doc;if(e.GetType()!==n.FieldType.e_TypeSignature)throw new Error("Cannot handle signature verification, the field specified by ".concat(JSON.stringify(e.GetName().toString())," is not a signature!"));var a=r.getOriginalStreamSync();if(!a)throw new Error("Cannot obtain the original file stream!");return this._getVerificationData(e,a)}},{key:"_getVerificationData",value:function(e,t){var n=this.module,r=n.engine,i=(n.doc,n.doc);i.JR,i.doc;if(e.GetType()!==r.FieldType.e_TypeSignature)throw new Error("Cannot handle signature verification, the field specified by ".concat(JSON.stringify(e.GetName().toString())," is not a signature!"));var a=this.getByteRangeFromGSDKField(e);if(4!==a.length)return{isByteRangeError:!0,plainContent:null,signedData:null,hasDataOutOfScope:!1};for(var o=new Uint8Array(t),s=new Uint8Array(a[1]+a[3]),c=0,u=0;u<a.length;u+=2){var l=a[u],d=a[u+1];s.set(o.slice(l,l+d),c),c+=d}for(var h=a[2]-a[1]-2,f=a[0]+a[1]+1,g=[],p=f;p<f+h;p+=2){var v=parseInt(String.fromCharCode(o[p]),16)<<4,m=parseInt(String.fromCharCode(o[p+1]),16);g.push(v+m)}return{isByteRangeError:!1,plainContent:new Blob([s]),signedData:new Blob([new Uint8Array(g)]),hasDataOutOfScope:o.byteLength>a[2]+a[3]}}},{key:"setMDPAction",value:function(e,t){return(0,r._)(function(){var n,r,i,a,o,s,c,l;return(0,u.Jh)(this,function(u){switch(u.label){case 0:return[4,this.module.getField(e)];case 1:switch(n=u.sent(),r=this.module.engine,i=new r.Signature(n),a=function(){i.GetDict().RemoveAt((0,h.n5)(r,"Lock"))},t.type){case d.Ti.CUSTOM:return[3,2];case d.Ti.NONE:return[3,4]}return[3,5];case 2:return[4,this.module.additionalActionAPI.overwriteAction({type:"field",field:n},d.n6.FIELD_WILL_FORMAT,{type:d.Us.javaScript,data:{javascript:t.javascript}})];case 3:return u.sent(),a(),[2];case 4:return a(),this.module.additionalActionAPI.removeAction({type:"field",field:n},d.n6.FIELD_WILL_FORMAT),[2];case 5:if(o=t.fieldNames,s=t.type,!o)throw new Error("The value of the fieldNames parameter must be specified when MDPActionType (currently: ".concat(s,") is not NONE!"));return c=new r.WStringArray,o.forEach(function(e){c.Add((0,h.Dp)(r,e))}),l=function(){switch(s){case d.Ti.ALL:return r.FieldMDPAction.e_FieldMDPActionAll;case d.Ti.EXCLUDE:return r.FieldMDPAction.e_FieldMDPActionExclude;case d.Ti.INCLUDE:return r.FieldMDPAction.e_FieldMDPActionInclude}}(),i.SetFieldMDPActionFields(l,c),[2]}})}).call(this)}},{key:"getMDPAction",value:function(e){var t=this.module.getField(e),n=this.module.engine,r=new n.Signature(t),i=r.GetFieldMDPAction();if(!r.GetDict().HasKey((0,h.n5)(n,"Lock"))){var a=(0,c._)(this.module.additionalActionAPI.getActions({type:"field",field:t},[d.n6.FIELD_WILL_FORMAT]),1)[0];if((null==a?void 0:a.data)&&a.data.type===d.Us.javaScript){var o=a.data.data.javascript;return{type:d.Ti.CUSTOM,javascript:o}}return{type:d.Ti.NONE}}var s=r.GetFieldMDPActionFields(),u=Array.from({length:s.GetSize()},function(e,t){return s.GetAt(t).toString()});return{type:function(){switch(i){case n.FieldMDPAction.e_FieldMDPActionAll:return d.Ti.ALL;case n.FieldMDPAction.e_FieldMDPActionExclude:return d.Ti.EXCLUDE;case n.FieldMDPAction.e_FieldMDPActionInclude:return d.Ti.INCLUDE}return d.Ti.NONE}(),fieldNames:u}}},{key:"getPagingSealConfig",value:function(e){var t=this.module.engine,n=this.module.getField(e),r=new t.Signature(n).GetPagingSealSignature();if(!r.IsEmpty()){var i=r.GetPagingSealConfig(),a=[d.Bz.left,d.Bz.right,d.Bz.top,d.Bz.bottom][i.paging_seal_position.value-1];return{offset:i.offset,firstPagePercent:Math.round(100*i.first_page_percent)/100,position:a}}}}]),e}())},9963:(e,t,n)=>{"use strict";n.d(t,{l:()=>h});var r=n(5578),i=n(4691),a=n(9227),o=n(7424),s=n(5991),c=n(6905),u=n(9418),l=n(5467),d=n(7582),h=function(e){function t(e,n,r){var o;return(0,a._)(this,t),o=(0,i._)(this,t,[e,n,r]),(0,s._)(o,"pdfPage",void 0),(0,s._)(o,"annotIndex",void 0),(0,s._)(o,"engineWidget",void 0),o.pdfPage=n,o.annotIndex=r,o.engineWidget=o.annot,o}return(0,l._)(t,e),(0,o._)(t,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Widget(e)}},{key:"setValue",value:function(e){}},{key:"toJson",value:function(e){var n=this,i=this;return(0,r._)(function(){var r,a,o,s,l,h,f;return(0,d.Jh)(this,function(d){return r=(0,c._)((0,u._)(t.prototype),"toJson",n).call(i,e),(a=this.engineWidget.GetControl()).IsEmpty()?[2,r]:(o=this.pdfPage.pdfDoc,s=o.formModule,l=a.GetField(),h=s.formAPI.getFieldInfoByField(l),f=a.IsEmpty()?0:a.GetIndex(),[2,Object.assign(r,{controlIndex:f,field:h})])})}).call(this)}}]),t}(n(843).Z)},7118:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(5578),i=n(9227),a=n(7424),o=n(5991),s=n(7582),c=n(8925),u=n(5147),l=function(){function e(t,n,r){(0,i._)(this,e),(0,o._)(this,"engine",void 0),(0,o._)(this,"pageFormat",void 0),(0,o._)(this,"pdfdoc",void 0),(0,o._)(this,"doc",void 0),(0,o._)(this,"JR",void 0),this.JR=t,this.engine=n,this.pdfdoc=r,this.doc=this.pdfdoc.doc}return(0,a._)(e,[{key:"release",value:function(){if(this.pageFormat){if(this.pageFormat.utils&&(this.pageFormat.utils.delete(),this.pageFormat.utils=null),this.pageFormat.oldUtils){try{this.pageFormat.oldUtils.delete()}catch(e){}this.pageFormat.oldUtils=null}this.pageFormat.delete(),this.pageFormat=null}}},{key:"getPageFormat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:324,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:392,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,o=this.engine;this.release();var s=this.getPageFormatProvider(t,n,r,a),c=this.doc;i&&(c=i);var u=new o.PageFormat(s,c);if(s.delete(),u.IsEmpty())return u.delete(),{res:-1,old:null};this.pageFormat=u,this.pageFormat.isCurrentDoc=!i,this.pageFormat.localFormat=a;var l=this.getPageFormatType(e);if(u.StartCheckExistPageFormat(null,l)===o.PageFormatFindRetCode.e_Found){var d,h=this.getPageFormatUtil(u,e,!0);switch(e){case"background":d=this.getBackground(h);break;case"watermark":d=this.getWatermark(h);break;case"headerfooter":d=this.getHeaderfooter(h);break;case"batesNumbering":d=this.getBatesNumbering(h)}return{res:1,old:d}}return{res:0,old:null}}},{key:"getPageFormatThumb",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!this.pageFormat)return null;this.engine;var i=this.pageFormat,a=this.getPageFormatUtil(i,e,r);return a?(this.setPageFormat(e,a,n),null):null}},{key:"removeAllPageFormat",value:function(e){return(0,r._)(function(){var t,n,r,i,a;return(0,s.Jh)(this,function(o){switch(o.label){case 0:if(!this.pageFormat&&(this.getPageFormat(e),!this.pageFormat))return[2,-1];switch(t=this.engine,n=this.pageFormat,r=this.getPageFormatType(e),i=n.StartRemoveAll(null,r)){case t.PageFormatOperationRetCode.e_Success:return[3,1];case t.PageFormatOperationRetCode.e_Failed:return[3,4];case t.PageFormatOperationRetCode.e_NoChange:return[3,5]}return[3,6];case 1:return(a=this.getPageFormatUtil(n,e,!0))?(a.SetPageRange(0,this.doc.GetPageCount()-1),[4,this.pageFormatRemoveFinished(0,this.doc.GetPageCount()-1)]):[3,3];case 2:o.sent(),o.label=3;case 3:return i=1,[3,6];case 4:return i=-2,[3,6];case 5:return i=0,[3,6];case 6:return[2,i]}})}).call(this)}},{key:"addPageFormat",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,r._)(function(){var r,i,a,o,c;return(0,s.Jh)(this,function(s){switch(s.label){case 0:return this.pageFormat?"batesNumbering"!==e?[3,2]:[4,this.addBatesNumber(t)]:[2,-1];case 1:return[2,s.sent()];case 2:return r=this.engine,i=this.pageFormat,(a=this.getPageFormatUtil(i,e,n))?(this.setPageFormat(e,a,t),o=this.getPageFormatType(e),(c=n?i.StartUpdate(null,o):i.StartInsert(null,o))!==r.PageFormatOperationRetCode.e_Success?[3,4]:[4,this.pageFormatFinished(a,i.isCurrentDoc)]):[2,-2];case 3:return s.sent(),[2,1];case 4:return c===r.PageFormatOperationRetCode.e_Failed?[2,-3]:[2,0];case 5:return[2]}})}).call(this)}},{key:"addBatesNumber",value:function(e){return(0,r._)(function(){var t,n,r,i,a,o,c,u,l,d,h,f;return(0,s.Jh)(this,function(s){switch(s.label){case 0:if(t=this.engine,n=this.pageFormat,r=n.isCurrentDoc,i=n.utils,a=n.oldUtils){if(o=e.sourceDoc,c=o.fileName,u=o.newDoc,l=this.getPageFormatProvider(1,1,c,this.pageFormat.localFormat),u?(d=u,r=!1):(d=this.doc,r=!0),n=new t.PageFormat(l,d),l.delete(),n.IsEmpty())return n.delete(),[2,-1];(i=n.CreateBatesNumberUtils()).JoinBatesNumberUtils(a),this.setBatesNumbering(i,e)}return(h=n.StartInsert(null,t.PageFormatType.e_BatesNumber))!==t.PageFormatOperationRetCode.e_Success?[3,2]:[4,this.pageFormatFinished(i,r)];case 1:return s.sent(),f=i.GetRangeString(new t.WString("-")).toString(),this.pageFormat.oldUtils=i,[2,f];case 2:return h===t.PageFormatOperationRetCode.e_Failed?[2,-3]:[2,0];case 3:return[2]}})}).call(this)}},{key:"pageFormatRemoveFinished",value:function(e,t){return(0,r._)(function(){var n,r;return(0,s.Jh)(this,function(i){switch(i.label){case 0:n=e,i.label=1;case 1:return n<=t?[4,this.pdfdoc.getPageByIndex(n)]:[3,5];case 2:return(r=i.sent())?[4,r.reParsePage()]:[3,4];case 3:i.sent(),r.reloadAnnots(),i.label=4;case 4:return n++,[3,1];case 5:return this.pdfdoc.reloadLayer(),[2]}})}).call(this)}},{key:"pageFormatFinished",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,r._)(function(){var n,r,i,a,o,c;return(0,s.Jh)(this,function(s){switch(s.label){case 0:if(!t)return[2];if(n=e.GetPageRangeStart(),r=e.GetPageRangeEnd(),i=e.IsUseEvenPages(),a=e.IsUseOddPages(),!1===i&&!1===a)return[2];-1===n&&(n=0,r=this.doc.GetPageCount()-1,e.SetPageRange(n,r),e.SetEvenOddFlag(!0,!0)),o=n,s.label=1;case 1:if(!(o<=r))return[3,4];if(a!==i){if(i&&(o+1)%2!=0)return[3,3];if(a&&(o+1)%2==0)return[3,3]}return(c=this.pdfdoc.pageIndexMap[o])?[4,c.reParsePage()]:[3,3];case 2:s.sent(),c.reloadAnnots(),s.label=3;case 3:return o++,[3,1];case 4:return this.pdfdoc.reloadLayer(),[2]}})}).call(this)}},{key:"setPageFormat",value:function(e,t,n){switch(e){case"background":this.setBackground(t,n);break;case"watermark":this.setWatermark(t,n);break;case"headerfooter":this.setHeaderfooter(t,n);break;case"batesNumbering":this.setBatesNumbering(t,n)}}},{key:"setBackground",value:function(e,t){if(t){var n=this.engine,r=1===t.sourceType?n.PageFormatSourceType.e_Color:n.PageFormatSourceType.e_ImageFile,i=t.pageStart,a=t.pageEnd,o=t.pageEven,s=t.pageOdd,u=this.getGsdkPageFormatUnit(t.unit),l=this.getGsdkPageFormatAlign(t.vFrom,!0),d=this.getGsdkPageFormatAlign(t.hFrom,!1);if(e.SetSourceType(r),e.SetPageRange(i,a),e.SetEvenOddFlag(o,s),2===t.sourceType){if(t.file){var h=n.ReaderCallback.implement({Release:function(){(0,c.ZT)()},GetSize:function(){return t.file.size},ReadBlock:function(e,r,i){var a=new Uint8Array(t.file.getBuffer(r,i));return n.HEAPU8.set(a,e),!0}});e.SetImage(h)}else t.doc&&e.SetPDFDoc(t.doc.doc);e.SetSourcePageNumber(t.pageNumber),t.scaleCkd?e.SetScale(-t.scale/100):e.SetScale((t.absScale||100)/100)}else{var f=t.backgroundColor;if(f&&7===f.length){var g=this.convertString2Color(f);e.SetBackgroundColor(g)}e.SetScale(-t.scale/100)}e.SetPositionUnit(u),e.SetVerticalAlign(l),e.SetHorizontalAlign(d),e.SetVerticalValue(parseFloat(t.vDistance+"")),e.SetHorizontalValue(parseFloat(t.hDistance+"")),e.SetOpacity(t.opacity/100),e.SetRotation(parseFloat(t.rotate+"")),e.SetVisibleForPrintFlag(t.isPrint),e.SetDisplayOnScreenFlag(t.isScreen)}}},{key:"setWatermark",value:function(e,t){if(t){var n=this.engine,r=1===t.sourceType?n.PageFormatSourceType.e_Text:n.PageFormatSourceType.e_ImageFile,i=t.pageStart,a=t.pageEnd,o=t.pageEven,s=t.pageOdd,l=this.getGsdkPageFormatUnit(t.unit),d=this.getGsdkPageFormatAlign(t.vFrom,!0),h=this.getGsdkPageFormatAlign(t.hFrom,!1);if(e.SetSourceType(r),e.SetPageRange(i,a),e.SetEvenOddFlag(o,s),2===t.sourceType){if(t.file){var f=n.ReaderCallback.implement({Release:function(){(0,c.ZT)()},GetSize:function(){return t.file.size},ReadBlock:function(e,r,i){var a=new Uint8Array(t.file.getBuffer(r,i));return n.HEAPU8.set(a,e),!0}});e.SetImage(f)}else if(t.doc)e.SetPDFDoc(t.doc.doc);else if(t.bitmap){var g=u.Z.createImage(n,t.bitmap,!0);e.SetImage(g)}e.SetSourcePageNumber(t.pageNumber),t.scaleCkd?e.SetScale(-t.scale/100):e.SetScale(t.absScale/100)}else{var p="number"==typeof t.fontColor?t.fontColor:parseInt(t.fontColor.replace("#","0x"),16),v=new n.WString(t.fontName),m=new n.WString(t.text.replaceAll("\n","\r"));e.SetText(m),e.UnderlineText(t.underLine),e.SetTextColor(p),e.SetFontName(v),t.scaleCkd?e.SetScale(-t.scale/100):(e.SetScale(1),e.SetFontSize(parseFloat(t.fontSize)))}t.isMultiline?(e.SetMultiLineFlag(!0),e.SetRowSpace(t.rowSpace),e.SetColumnSpace(t.columnSpace)):(e.SetMultiLineFlag(!1),e.SetPositionUnit(l),e.SetVerticalAlign(d),e.SetHorizontalAlign(h),e.SetVerticalValue(parseFloat(t.vDistance)),e.SetHorizontalValue(parseFloat(t.hDistance))),e.SetOpacity(t.opacity/100),e.SetRotation(parseFloat(t.rotate)),e.SetShowOnTopFlag(2===t.appear),e.SetFixedPrintFlag(t.isKeep),e.SetVisibleForPrintFlag(t.isPrint),e.SetDisplayOnScreenFlag(t.isScreen)}}},{key:"setHeaderfooter",value:function(e,t){if(t){var n=this.engine,r="number"==typeof t.fontColor?t.fontColor:parseInt(t.fontColor.replace("#","0x"),16),i=new n.WString(t.fontName),a=new n.WString(t.leftHeaderText.replaceAll("\n","\r")),o=new n.WString(t.rightHeaderText.replaceAll("\n","\r")),s=new n.WString(t.centerHeaderText.replaceAll("\n","\r")),c=new n.WString(t.leftFooterText.replaceAll("\n","\r")),u=new n.WString(t.centerFooterText.replaceAll("\n","\r")),l=new n.WString(t.rightFooterText.replaceAll("\n","\r")),d=this.getGsdkPageNumberFormat(t.pageFormat),h=this.getGsdkDateFormat(t.dateFormat),f=t.pageStart,g=t.pageEnd,p=t.pageEven,v=t.pageOdd;e.SetEmbedFontFlag(t.fontEmbed),e.UnderlineText(t.underLine),e.SetTextColor(r),e.SetFontName(i),e.SetFontSize(parseFloat(t.fontSize)),e.SetMargin(n.HeaderFooterMargin.e_Left,t.marginLeft),e.SetMargin(n.HeaderFooterMargin.e_Right,t.marginRight),e.SetMargin(n.HeaderFooterMargin.e_Top,t.marginTop),e.SetMargin(n.HeaderFooterMargin.e_Bottom,t.marginBottom),e.SetText(n.HeaderFooterLocation.e_HeaderLeft,a),e.SetText(n.HeaderFooterLocation.e_HeaderMiddle,s),e.SetText(n.HeaderFooterLocation.e_HeaderRight,o),e.SetText(n.HeaderFooterLocation.e_FooterLeft,c),e.SetText(n.HeaderFooterLocation.e_FooterMiddle,u),e.SetText(n.HeaderFooterLocation.e_FooterRight,l),e.SetDateFormat(h),e.SetPageNumberFormat(d),e.SetPageNumberOffset(t.startPage),e.SetPageRange(f,g),e.SetEvenOddFlag(p,v),e.SetFixedPrintFlag(t.isKeep),e.SetShrinkFlag(t.isShrink)}}},{key:"setBatesNumbering",value:function(e,t){if(t){var n=this.engine,r=parseInt(t.fontColor.replace("#","0x"),16),i=new n.WString(t.fontName),a=new n.WString(t.leftHeaderText.replaceAll("\n","\r")),o=new n.WString(t.rightHeaderText.replaceAll("\n","\r")),s=new n.WString(t.centerHeaderText.replaceAll("\n","\r")),c=new n.WString(t.leftFooterText.replaceAll("\n","\r")),u=new n.WString(t.centerFooterText.replaceAll("\n","\r")),l=new n.WString(t.rightFooterText.replaceAll("\n","\r")),d=this.getGsdkPageNumberFormat(t.pageFormat),h=this.getGsdkDateFormat(t.dateFormat),f=t.pageStart,g=t.pageEnd,p=t.pageEven,v=t.pageOdd;e.SetEmbedFontFlag(t.fontEmbed),e.UnderlineText(t.underLine),e.SetTextColor(r),e.SetFontName(i),e.SetFontSize(parseFloat(t.fontSize)),e.SetMargin(n.HeaderFooterMargin.e_Left,t.marginLeft),e.SetMargin(n.HeaderFooterMargin.e_Right,t.marginRight),e.SetMargin(n.HeaderFooterMargin.e_Top,t.marginTop),e.SetMargin(n.HeaderFooterMargin.e_Bottom,t.marginBottom),e.SetText(n.HeaderFooterLocation.e_HeaderLeft,a),e.SetText(n.HeaderFooterLocation.e_HeaderMiddle,s),e.SetText(n.HeaderFooterLocation.e_HeaderRight,o),e.SetText(n.HeaderFooterLocation.e_FooterLeft,c),e.SetText(n.HeaderFooterLocation.e_FooterMiddle,u),e.SetText(n.HeaderFooterLocation.e_FooterRight,l),e.SetDateFormat(h),e.SetPageNumberFormat(d),e.SetPageNumberOffset(t.startPage),e.SetPageRange(f,g),e.SetEvenOddFlag(p,v),e.SetFixedPrintFlag(t.isKeep),e.SetShrinkFlag(t.isShrink)}}},{key:"getPageFormatType",value:function(e){var t,n=this.engine;switch(e){case"background":t=n.PageFormatType.e_Background;break;case"watermark":t=n.PageFormatType.e_Watermark;break;case"headerfooter":t=n.PageFormatType.e_HeaderFooter;break;case"batesNumbering":t=n.PageFormatType.e_BatesNumber}return t}},{key:"getPageFormatUtil",value:function(e,t,n){var r;if(e.utils&&(n||e.isUtilsCreated))return e.utils;switch(t){case"background":n?r=e.GetBackgroundUtils():(r=e.CreateBackgroundUtils(),e.isUtilsCreated=!0);break;case"watermark":n?r=e.GetWatermarkUtils():(r=e.CreateWatermarkUtils(),e.isUtilsCreated=!0);break;case"headerfooter":n?r=e.GetHeaderFooterUtils():(r=e.CreateHeaderFooterUtils(),e.isUtilsCreated=!0);break;case"batesNumbering":n?r=e.GetBatesNumberUtils():(r=e.CreateBatesNumberUtils(),e.isUtilsCreated=!0)}return r.IsEmpty()?null:(e.utils=r,r)}},{key:"getBackground",value:function(e){var t={sourceType:0,pageNumber:0,backgroundColor:"#000000",opacity:0,rotate:0,scale:0,isPrint:!1,isScreen:!1,unit:0,vFrom:0,hFrom:0,hDistance:0,vDistance:0,pageStart:0,pageEnd:0,pageEven:!1,pageOdd:!1},n=this.engine,r=this.convertColor2String(e.GetBackgroundColor()),i=e.GetSourceType().value===n.PageFormatSourceType.e_Color.value?1:2,a=this.getPageFormatUnit(e.GetPositionUnit().value),o=this.getPageFormatAlign(e.GetVerticalAlign().value),s=this.getPageFormatAlign(e.GetHorizontalAlign().value);return t.sourceType=i,t.pageNumber=e.GetSourcePageNumber(),t.backgroundColor=r,t.opacity=Math.floor(100*e.GetOpacity()),t.rotate=e.GetRotation(),t.scale=Math.round(100*e.GetScale()),t.isPrint=e.IsVisibleForPrint(),t.isScreen=e.IsDisplayOnScreen(),t.unit=a,t.vFrom=o,t.hFrom=s,t.hDistance=e.GetHorizontalValue(),t.vDistance=e.GetVerticalValue(),t.pageStart=e.GetPageRangeStart(),t.pageEnd=e.GetPageRangeEnd(),t.pageEven=e.IsUseEvenPages(),t.pageOdd=e.IsUseOddPages(),t}},{key:"getWatermark",value:function(e){var t={sourceType:0,pageNumber:0,text:"",fontSize:0,underLine:!1,fontColor:"#000000",fontName:"",opacity:0,rotate:0,scale:0,appear:0,isKeep:!1,isPrint:!1,isScreen:!1,unit:0,vFrom:0,hFrom:0,hDistance:0,vDistance:0,pageStart:0,pageEnd:0,pageEven:!1,pageOdd:!1},n=this.engine,r=this.convertColor2String(e.GetTextColor());parseInt(e.GetTextColor()).toString(16);var i=e.GetSourceType().value===n.PageFormatSourceType.e_Text.value?1:2,a=this.getPageFormatUnit(e.GetPositionUnit().value),o=this.getPageFormatAlign(e.GetVerticalAlign().value),s=this.getPageFormatAlign(e.GetHorizontalAlign().value);return t.sourceType=i,t.pageNumber=e.GetSourcePageNumber(),t.text=e.GetText().toString().replaceAll("\r","\n"),t.fontSize=parseInt(e.GetFontSize()),t.underLine=e.IsUnderline(),t.fontColor=r,t.fontName=e.GetFontName().toString(),t.opacity=Math.floor(100*e.GetOpacity()),t.rotate=e.GetRotation(),t.scale=Math.round(100*e.GetScale()),t.appear=!0===e.IsShowOnTop()?2:1,t.isKeep=e.IsFixedPrint(),t.isPrint=e.IsVisibleForPrint(),t.isScreen=e.IsDisplayOnScreen(),t.unit=a,t.vFrom=o,t.hFrom=s,t.hDistance=parseFloat(e.GetHorizontalValue()),t.vDistance=parseFloat(e.GetVerticalValue()),t.pageStart=e.GetPageRangeStart(),t.pageEnd=e.GetPageRangeEnd(),t.pageEven=e.IsUseEvenPages(),t.pageOdd=e.IsUseOddPages(),t}},{key:"getHeaderfooter",value:function(e){var t={fontSize:0,underLine:!1,fontEmbed:!1,fontColor:"#000000",fontName:"",leftHeaderText:"",centerHeaderText:"",rightHeaderText:"",leftFooterText:"",centerFooterText:"",rightFooterText:"",marginLeft:0,marginRight:0,marginTop:0,marginBottom:0,pageStart:0,pageEnd:0,pageEven:!1,pageOdd:!1,isKeep:!1,isShrink:!1,dateFormat:"",pageFormat:"",startPage:0},n=this.engine,r=this.convertColor2String(e.GetTextColor()),i=this.getPageNumberFormat(e.GetPageNumberFormat().value),a=this.getDateFormat(e.GetDateFormat().value);return t.fontSize=Math.floor(e.GetFontSize()),t.underLine=e.IsUnderline(),t.fontEmbed=e.IsEmbeddedFont(),t.fontColor=r,t.fontName=e.GetFontName().toString(),t.leftHeaderText=e.GetText(n.HeaderFooterLocation.e_HeaderLeft).toString().replaceAll("\r","\n"),t.centerHeaderText=e.GetText(n.HeaderFooterLocation.e_HeaderMiddle).toString().replaceAll("\r","\n"),t.rightHeaderText=e.GetText(n.HeaderFooterLocation.e_HeaderRight).toString().replaceAll("\r","\n"),t.leftFooterText=e.GetText(n.HeaderFooterLocation.e_FooterLeft).toString().replaceAll("\r","\n"),t.centerFooterText=e.GetText(n.HeaderFooterLocation.e_FooterMiddle).toString().replaceAll("\r","\n"),t.rightFooterText=e.GetText(n.HeaderFooterLocation.e_FooterRight).toString().replaceAll("\r","\n"),t.marginLeft=e.GetMargin(n.HeaderFooterMargin.e_Left),t.marginRight=e.GetMargin(n.HeaderFooterMargin.e_Right),t.marginTop=e.GetMargin(n.HeaderFooterMargin.e_Top),t.marginBottom=e.GetMargin(n.HeaderFooterMargin.e_Bottom),t.pageStart=e.GetPageRangeStart(),t.pageEnd=e.GetPageRangeEnd(),t.pageEven=e.IsUseEvenPages(),t.pageOdd=e.IsUseOddPages(),t.isKeep=e.IsFixedPrint(),t.isShrink=e.IsShrink(),t.dateFormat=a,t.pageFormat=i,t.startPage=e.GetPageNumberOffset(),t}},{key:"getBatesNumbering",value:function(e){var t={fontSize:0,underLine:!1,fontEmbed:!1,fontColor:"#000000",fontName:"",leftHeaderText:"",centerHeaderText:"",rightHeaderText:"",leftFooterText:"",centerFooterText:"",rightFooterText:"",marginLeft:0,marginRight:0,marginTop:0,marginBottom:0,pageStart:0,pageEnd:0,pageEven:!1,pageOdd:!1,isKeep:!1,isShrink:!1,dateFormat:"",pageFormat:"",startPage:0},n=this.engine,r=this.convertColor2String(e.GetTextColor()),i=this.getPageNumberFormat(e.GetPageNumberFormat().value),a=this.getDateFormat(e.GetDateFormat().value);return t.fontSize=Math.floor(e.GetFontSize()),t.underLine=e.IsUnderline(),t.fontEmbed=e.IsEmbeddedFont(),t.fontColor=r,t.fontName=e.GetFontName().toString(),t.leftHeaderText=e.GetText(n.HeaderFooterLocation.e_HeaderLeft).toString().replaceAll("\r","\n"),t.centerHeaderText=e.GetText(n.HeaderFooterLocation.e_HeaderMiddle).toString().replaceAll("\r","\n"),t.rightHeaderText=e.GetText(n.HeaderFooterLocation.e_HeaderRight).toString().replaceAll("\r","\n"),t.leftFooterText=e.GetText(n.HeaderFooterLocation.e_FooterLeft).toString().replaceAll("\r","\n"),t.centerFooterText=e.GetText(n.HeaderFooterLocation.e_FooterMiddle).toString().replaceAll("\r","\n"),t.rightFooterText=e.GetText(n.HeaderFooterLocation.e_FooterRight).toString().replaceAll("\r","\n"),t.marginLeft=e.GetMargin(n.HeaderFooterMargin.e_Left),t.marginRight=e.GetMargin(n.HeaderFooterMargin.e_Right),t.marginTop=e.GetMargin(n.HeaderFooterMargin.e_Top),t.marginBottom=e.GetMargin(n.HeaderFooterMargin.e_Bottom),t.pageStart=e.GetPageRangeStart(),t.pageEnd=e.GetPageRangeEnd(),t.pageEven=e.IsUseEvenPages(),t.pageOdd=e.IsUseOddPages(),t.isKeep=e.IsFixedPrint(),t.isShrink=e.IsShrink(),t.dateFormat=a,t.pageFormat=i,t.startPage=e.GetPageNumberOffset(),t}},{key:"convertColor2String",value:function(e){var t=e.toString(16);if(t.length<6)for(var n=6-t.length,r=0;r<n;r++)t="0"+t;return t="#"+t}},{key:"convertString2Color",value:function(e){var t=-1;return 7===e.length&&(e="0x"+e.substr(5,2)+e.substr(3,2)+e.substr(1,2),t=parseInt(e,16)),t}},{key:"getPageFormatUnit",value:function(e){var t=this.engine,n=0;switch(e){case t.PageFormatUnitType.e_Inches.value:n=1;break;case t.PageFormatUnitType.e_Percent.value:n=2;break;case t.PageFormatUnitType.e_Centimeters.value:n=3;break;case t.PageFormatUnitType.e_Millimeters.value:n=4;break;case t.PageFormatUnitType.e_Picas.value:n=5;break;case t.PageFormatUnitType.e_Points.value:n=6}return n}},{key:"getGsdkPageFormatUnit",value:function(e){var t=this.engine,n=0;switch(e){case 1:n=t.PageFormatUnitType.e_Inches;break;case 2:n=t.PageFormatUnitType.e_Percent;break;case 3:n=t.PageFormatUnitType.e_Centimeters;break;case 4:n=t.PageFormatUnitType.e_Millimeters;break;case 5:n=t.PageFormatUnitType.e_Picas;break;case 6:n=t.PageFormatUnitType.e_Points}return n}},{key:"getPageFormatAlign",value:function(e){var t=this.engine,n=0;switch(e){case t.PageFormatAlignType.e_Left.value:case t.PageFormatAlignType.e_Top.value:n=1;break;case t.PageFormatAlignType.e_HCenter.value:case t.PageFormatAlignType.e_VCenter.value:n=2;break;case t.PageFormatAlignType.e_Right.value:case t.PageFormatAlignType.e_Bottom.value:n=3}return n}},{key:"getGsdkPageFormatAlign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.engine;if(t){var r=0;switch(e){case 1:r=n.PageFormatAlignType.e_Top;break;case 2:r=n.PageFormatAlignType.e_VCenter;break;case 3:r=n.PageFormatAlignType.e_Bottom}return r}var i=0;switch(e){case 1:i=n.PageFormatAlignType.e_Left;break;case 2:i=n.PageFormatAlignType.e_HCenter;break;case 3:i=n.PageFormatAlignType.e_Right}return i}},{key:"getPageNumberFormat",value:function(e){var t=this.engine,n="";switch(e){case t.HeaderFooterPageNumberFormat.e_Number.value:n="1";break;case t.HeaderFooterPageNumberFormat.e_NumberOfTotal.value:n="1 of n";break;case t.HeaderFooterPageNumberFormat.e_NumberSlashTotal.value:n="1/n";break;case t.HeaderFooterPageNumberFormat.e_PageNumber.value:n="Page 1";break;case t.HeaderFooterPageNumberFormat.e_PageNumberOfTotal.value:case t.HeaderFooterPageNumberFormat.e_BatesNumber.value:n="Page 1 of n"}return n}},{key:"getGsdkPageNumberFormat",value:function(e){var t=this.engine,n=t.HeaderFooterPageNumberFormat.e_Number;switch(e){case"1":n=t.HeaderFooterPageNumberFormat.e_Number;break;case"1 of n":n=t.HeaderFooterPageNumberFormat.e_NumberOfTotal;break;case"1/n":n=t.HeaderFooterPageNumberFormat.e_NumberSlashTotal;break;case"Page 1":n=t.HeaderFooterPageNumberFormat.e_PageNumber;break;case"Page 1 of n":n=t.HeaderFooterPageNumberFormat.e_PageNumberOfTotal;break;case"Page 1 of n":n=t.HeaderFooterPageNumberFormat.e_BatesNumber}return n}},{key:"getDateFormat",value:function(e){var t=this.engine,n="";switch(e){case t.HeaderFooterDateFormat.e_MSlashD.value:n="m/d";break;case t.HeaderFooterDateFormat.e_MSlashDSlashYY.value:n="m/d/yy";break;case t.HeaderFooterDateFormat.e_MSlashDSlashYYYY.value:n="m/d/yyyy";break;case t.HeaderFooterDateFormat.e_MMSlashDDSlashYY.value:n="mm/dd/yy";break;case t.HeaderFooterDateFormat.e_MMSlashDDSlashYYYY.value:n="mm/dd/yyyy";break;case t.HeaderFooterDateFormat.e_DSlashMSlashYY.value:n="d/m/yy";break;case t.HeaderFooterDateFormat.e_DSlashMSlashYYYY.value:n="d/m/yyyy";break;case t.HeaderFooterDateFormat.e_DDSlashMMSlashYY.value:n="dd/mm/yy";break;case t.HeaderFooterDateFormat.e_DDSlashMMSlashYYYY.value:n="dd/mm/yyyy";break;case t.HeaderFooterDateFormat.e_MMSlashYY.value:n="mm/yy";break;case t.HeaderFooterDateFormat.e_MMSlashYYYY:n="mm/yyyy";break;case t.HeaderFooterDateFormat.e_MDotDDotYY.value:n="m.d.yy";break;case t.HeaderFooterDateFormat.e_MDotDDotYYYY.value:n="m.d.yyyy";break;case t.HeaderFooterDateFormat.e_MMDotDDDotYY.value:n="mm.dd.yy";break;case t.HeaderFooterDateFormat.e_MMDotDDDotYYYY.value:n="mm.dd.yyyy";break;case t.HeaderFooterDateFormat.e_MMDotYY.value:n="mm.yy";break;case t.HeaderFooterDateFormat.e_DDotMDotYYYY.value:n="d.m.yyyy";break;case t.HeaderFooterDateFormat.e_DDDotMMDotYY.value:n="dd.mm.yy";break;case t.HeaderFooterDateFormat.e_DDDotMMDotYYYY.value:n="dd.mm.yyyy";break;case t.HeaderFooterDateFormat.e_YYHyphenMMHyphenDD.value:n="yy-mm-dd";break;case t.HeaderFooterDateFormat.e_YYYYHyphenMMHyphenDD.value:n="yyyy-mm-dd"}return n}},{key:"getGsdkDateFormat",value:function(e){var t=this.engine,n=t.HeaderFooterDateFormat.e_MSlashD;switch(e){case"m/d":n=t.HeaderFooterDateFormat.e_MSlashD;break;case"m/d/yy":n=t.HeaderFooterDateFormat.e_MSlashDSlashYY;break;case"m/d/yyyy":n=t.HeaderFooterDateFormat.e_MSlashDSlashYYYY;break;case"mm/dd/yy":n=t.HeaderFooterDateFormat.e_MMSlashDDSlashYY;break;case"mm/dd/yyyy":n=t.HeaderFooterDateFormat.e_MMSlashDDSlashYYYY;break;case"d/m/yy":n=t.HeaderFooterDateFormat.e_DSlashMSlashYY;break;case"d/m/yyyy":n=t.HeaderFooterDateFormat.e_DSlashMSlashYYYY;break;case"dd/mm/yy":n=t.HeaderFooterDateFormat.e_DDSlashMMSlashYY;break;case"dd/mm/yyyy":n=t.HeaderFooterDateFormat.e_DDSlashMMSlashYYYY;break;case"mm/yy":n=t.HeaderFooterDateFormat.e_MMSlashYY;break;case"mm/yyyy":n=t.HeaderFooterDateFormat.e_MMSlashYYYY;break;case"m.d.yy":n=t.HeaderFooterDateFormat.e_MDotDDotYY;break;case"m.d.yyyy":n=t.HeaderFooterDateFormat.e_MDotDDotYYYY;break;case"mm.dd.yy":n=t.HeaderFooterDateFormat.e_MMDotDDDotYY;break;case"mm.dd.yyyy":n=t.HeaderFooterDateFormat.e_MMDotDDDotYYYY;break;case"mm.yy":n=t.HeaderFooterDateFormat.e_MMDotYY;break;case"d.m.yyyy":n=t.HeaderFooterDateFormat.e_DDotMDotYYYY;break;case"dd.mm.yy":n=t.HeaderFooterDateFormat.e_DDDotMMDotYY;break;case"dd.mm.yyyy":n=t.HeaderFooterDateFormat.e_DDDotMMDotYYYY;break;case"yy-mm-dd":n=t.HeaderFooterDateFormat.e_YYHyphenMMHyphenDD;break;case"yyyy-mm-dd":n=t.HeaderFooterDateFormat.e_YYYYHyphenMMHyphenDD}return n}},{key:"getPageFormatProvider",value:function(e,t){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=this.engine,s=o.PageformatUndoCallback.implement({CanUndoRedo:function(){return!1},OnAddUndo:function(e){},OnUndoRedoBegin:function(){},OnUndoRedoEnd:function(){}}),c=o.PageformatProgressBarCallback.implement({Create:function(){return 0},SetRange:function(e,t,n){},SetText:function(e,t){},SetCurrentValue:function(e,t){},PeekAndPump:function(e){},Destroy:function(e){},GetString:function(e){var t;switch(a||(a={fileName:"File Name",date:"1\\n1 of n\\n1/n\\nPage 1\\nPage 1 of n\\nBates Number",dateLocal:"%d\\n%d of %d\\n%d/%d\\nPage %d\\nPage %d of %d\\nBates Number"}),e){case o.PageFormatProgressBarStringResourceID.e_FileName:t=a.fileName;break;case o.PageFormatProgressBarStringResourceID.e_DateFormat:t="m/d\\nm/d/yy\\nm/d/yyyy\\nmm/dd/yy\\nmm/dd/yyyy\\nd/m/yy\\nd/m/yyyy\\ndd/mm/yy\\ndd/mm/yyyy\\nmm/yy\\nmm/yyyy\\nm.d.yy\\nm.d.yyyy\\nmm.dd.yy\\nmm.dd.yyyy\\nmm.yy\\nd.m.yyyy\\ndd.mm.yy\\ndd.mm.yyyy\\nyy-mm-dd\\nyyyy-mm-dd";break;case o.PageFormatProgressBarStringResourceID.e_PageNumberFormat:t=a.date;break;case o.PageFormatProgressBarStringResourceID.e_PageNumberFormatLocal:t=a.dateLocal;break;default:t=""}return new o.WString(t)}}),u=o.PageformatSysFontCallback.implement({IsStandardFont:function(e){return!1},GetScriptName:function(e,t){return new o.WString("")},GetFaceName:function(e){return new o.WString(e.toString())},GetFontTypeName:function(e){return new o.String("")},GetFontFaceNameBold:function(e,t){return!1},GetFontFaceNameItalic:function(e,t){return!1}}),l=o.PageFormatProviderCallback.implement({Release:function(){},GetPreviewRect:function(n){return new o.FX_RECT(0,0,e,t)},GetPage:function(e,t){n=e.GetPage(t);var i=r.pdfdoc.pageIndexMap[t];return i&&i.needReParse&&(i.notifyTouchup(n),n.StartParse(0,null,!0),i.needReParse=!1),n},OnPageChanged:function(e){},GetDocName:function(e){return new o.WString(i)}}),d=new o.PageFormatProvider(l);return d.SetProgressBarCallback(c),d.SetUndoCallback(s),d.SetSysFontCallback(u),d}}]),e}()},3170:(e,t,n)=>{"use strict";n.d(t,{a:()=>s});var r=n(9227),i=n(7424),a=n(5991),o=n(5843),s=function(){function e(t){(0,r._)(this,e),(0,a._)(this,"engine",void 0),(0,a._)(this,"fileSize",void 0),(0,a._)(this,"buffers",void 0),(0,a._)(this,"stream",void 0),(0,a._)(this,"readBlock",void 0),(0,a._)(this,"progress",void 0),this.engine=t,this.fileSize=0,this.buffers=[],this.progress=function(){},this.engine=t}return(0,i._)(e,[{key:"Release",value:function(){this.stream&&this.stream.delete()}},{key:"Flush",value:function(){return!0}},{key:"GetSize",value:function(){return this.fileSize}},{key:"ReadBlock",value:function(e,t,n){var r=new Uint8Array(this.readBlock(t,n));return this.engine.HEAPU8.set(r,e),this.progress(),!0}},{key:"WriteBlock",value:function(e,t,n){this.fileSize=Math.max(t+n,this.fileSize);var r,i=this.engine.HEAPU8.buffer;return r=this.engine.HEAPU8.subarray?new Uint8Array(this.engine.HEAPU8.subarray(e,e+n)):i.slice?new Uint8Array(i.slice(e,e+n)):new Uint8Array(i,e,n),this.buffers.push(r),this.progress(),!0}},{key:"GetPosition",value:function(){return 0}},{key:"getStream",value:function(){return{buffers:this.buffers,fileSize:this.fileSize}}},{key:"getBlob",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"application/octet-stream";return new Blob(this.buffers,{type:e})}},{key:"setGsdkStream",value:function(e){this.stream=e}},{key:"setFile",value:function(e){this.fileSize=this._getFileSize(e);var t=this._getFileSyncReader(e);this.readBlock=function(e,n){return t(e,n)}}},{key:"onProgress",value:function(e){this.progress=e}},{key:"_getFileSize",value:function(e){return(0,o._)(e,Blob)?e.size:e.byteLength}},{key:"_getFileSyncReader",value:function(e){return(0,o._)(e,Blob)?(e=new Blob([e]),function(t,n){return(new FileReaderSync).readAsArrayBuffer(e.slice(t,t+n))}):e.slice?function(t,n){return e.slice(t,t+n)}:function(t,n){return new Uint8Array(e,t,n).buffer}}}]),e}()},7674:(e,t,n)=>{"use strict";n.d(t,{g:()=>f});var r=n(4691),i=n(9227),a=n(7424),o=n(6905),s=n(9418),c=n(5467),u=n(5843),l=n(4099),d=n(8278),h=n(8925),f=function(e){function t(e){return(0,i._)(this,t),(0,r._)(this,t,[e])}return(0,c._)(t,e),(0,a._)(t,[{key:"overwriteAction",value:function(e,n,r){var i=this.doc,a=this.gsdk,c=(0,l.o7)({doc:i,gsdk:a,query:e,trigger:n,useDict:!1,createIfNotExists:!0});if(!c||c.IsEmpty())return Promise.resolve();var u=(0,o._)((0,s._)(t.prototype),"constructAction",this).call(this,r);return c.SetAction({value:n},u),Promise.resolve()}},{key:"overwriteJavaScriptAction",value:function(e,t,n,r){var i=this.doc,a=this.gsdk,o=(0,l.o7)({doc:i,gsdk:a,query:e,trigger:t,useDict:!0,createIfNotExists:!0}),s=(0,l.Tt)({gsdk:a,doc:i,additionalAction:o,actionData:n,trigger:t,validator:r});return Promise.resolve(s)}},{key:"appendAction",value:function(e,n,r){var i=this.doc,a=this.gsdk;if(r.type===l.Us.gotoE)throw new Error("Currently we don't support to create an embedded goto action (type: "+l.Us.gotoE+").");var c=(0,l.o7)({doc:i,gsdk:a,query:e,trigger:n,useDict:!1,createIfNotExists:!0});if(!c||c.IsEmpty())return Promise.resolve();var u={value:n},d=(0,o._)((0,s._)(t.prototype),"constructAction",this).call(this,r),h=c.GetAction(u);if(h.IsEmpty())c.SetAction(u,d);else{var f=h.GetSubActionCount();h.InsertSubAction(f,d)}return Promise.resolve()}},{key:"getActions",value:function(e,t){var n=this,r=this.doc,i=this.gsdk,a=Array.from(new Set(t.map(function(e){return{value:e}}))),o=this.optimizeOwner(e);return a.map(function(e){var t=(0,l.o7)({doc:r,gsdk:i,query:o,trigger:e.value,useDict:!0,createIfNotExists:!1});if(t&&!t.IsEmpty()){var a=t.GetAction(e);return a.IsEmpty()?void 0:{trigger:e.value,data:(0,l.FP)(n.gsdk,n.doc,a)}}}).filter(function(e){return!!e})}},{key:"removeAction",value:function(e,t,n){var r=this.doc,i=this.gsdk,a=(0,l.o7)({doc:r,gsdk:i,query:e,trigger:t,useDict:!0,createIfNotExists:!1});return!(!a||a.IsEmpty())&&(0,l.iR)(a,t,n)}},{key:"moveAction",value:function(e,t){var n=this.doc,r=this.gsdk,i=(0,l.o7)({doc:n,gsdk:r,query:e,trigger:t.trigger,useDict:!0,createIfNotExists:!1});return!(!i||i.IsEmpty())&&(0,l.yV)(i,t)}},{key:"updateAction",value:function(e,n,r,i){var a=this.doc,c=this.gsdk,u=(0,l.o7)({doc:a,gsdk:c,query:e,trigger:n,useDict:!0,createIfNotExists:!1});if(!u||u.IsEmpty())return Promise.resolve();var d=u.GetAction({value:n});if(!d)throw new Error("Action not exists: query: ".concat(JSON.stringify(e)));return(0,o._)((0,s._)(t.prototype),"updateActionData",this).call(this,d,r,i),Promise.resolve()}},{key:"triggerAction",value:function(e,n,r){var i=this,a=this.doc,c=this.gsdk,u=(0,l.o7)({doc:a,gsdk:c,query:e,trigger:n,useDict:!1,createIfNotExists:!1});if(u&&!u.IsEmpty()){var d=u.GetAction({value:n});if(!d.IsEmpty()){var f=this.optimizeOwner(e),g=(0,h.HW)(e);(0,o._)((0,s._)(t.prototype),"triggerGSDKAction",this).call(this,g,n,d,function(e){return i.executeJavaScript(f,n,e)},r)}}}},{key:"executeJavaScript",value:function(e,t,n){if(this.jrDoc.JR.isEnableJavaScript){var r=n.javascript,i=n.triggerOptions;if(r){var a,o,s=this.doc,c=this.gsdk,d=c.AnnotType,f=this.optimizeOwner(e),g=(0,l.E9)(c,t),p=null!==(a=null==i?void 0:i.isModifier)&&void 0!==a&&a,v=null!==(o=null==i?void 0:i.isShift)&&void 0!==o&&o,m=(0,h.Eo)(this.gsdk,r);switch(f.type){case"doc":case"page":s.ExecuteDocJavaScript(g,(0,h.Eo)(c,""),m);break;case"annot":if(f.annot.GetType()!==d.e_Widget)switch(f.annot.GetType()){case d.e_Screen:s.ExecuteScreenJavaScript(g,m,p,v,new c.Screen(f.annot));break;case d.e_Link:s.ExecuteLinkJavaScript(m);case d.e_Sound:}else{var _=(0,u._)(f.annot,c.Widget)?f.annot.GetField():new c.Widget(f.annot).GetField();s.ExecuteFieldJavaScript(_,g,new c.FieldActionData,m)}break;case"field":s.ExecuteFieldJavaScript(f.field,g,new c.FieldActionData,m)}0}}}},{key:"executeActions",value:function(e){var t=this;return this.jrDoc.actionExecutor.execute({trigger:l.n6.NONE,actions:e,executeJavaScript:function(e){return t.executeJavaScript({type:"doc"},l.n6.NONE,e)}})}},{key:"getAnnot",value:function(e){var t,n=this.jrDoc.pageIndexMap[e.pageIndex];if(n&&n.page){var r=n._getAnnotIndexById(e.objNumber);-1!==r&&(t=n.page.GetAnnot(r))}if(t||(t=(0,d.Xc)(this.doc,e)),!t)throw new Error("Annot or widget not found in this PDF document: ".concat(JSON.stringify(e)));return t}},{key:"getAnnotByIndex",value:function(e,t){var n=this.jrDoc.pageIndexMap[e];n&&n.page&&n.getAnnots()}},{key:"optimizeOwner",value:function(e){var t=this.jrDoc.formModule;return(0,h.Pu)(e)?{type:"annot",annot:this.getAnnot(e.annotId)}:(0,h.uB)(e)?{type:"field",field:t.getField(e.widgetId)}:(0,h.Wm)(e)?{type:"field",field:t.getFieldByName(e.fieldName)}:e}}]),t}(n(5369).y)},5028:(e,t,n)=>{"use strict";n.d(t,{R:()=>g});var r=n(5578),i=n(4691),a=n(9227),o=n(7424),s=n(5991),c=n(5467),u=n(7582),l=n(4099),d=n(8278),h=n(8925),f=n(5435),g=function(e){function t(e){var n;return(0,a._)(this,t),n=(0,i._)(this,t,[e]),(0,s._)(n,"jrDoc",void 0),n.jrDoc=e,n}return(0,c._)(t,e),(0,o._)(t,[{key:"appendAction",value:function(e,t){if(t.type===f.Us.gotoE)throw new Error("Currently we don't support to create an embedded goto action (type: "+f.Us.gotoE+").");var n=this.getAnnot(e),r=this.constructAction(t),i=n.GetAction();if(i.IsEmpty())n.SetAction(r);else{var a=i.GetSubActionCount();i.InsertSubAction(a,r)}return Promise.resolve()}},{key:"setAction",value:function(e,t){var n=this.getAnnot(e),r=this.constructAction(t);return n.SetAction(r),Promise.resolve()}},{key:"updateAction",value:function(e,t,n){var r=this.getAnnot(e);if(!r.GetDict().HasKey((0,h.Ys)(this.gsdk,"A")))return Promise.resolve();var i=r.GetAction();return this.updateActionData(i,t,n),Promise.resolve()}},{key:"removeAction",value:function(e,t){var n=this.getAnnot(e);if(!n.GetDict().HasKey((0,h.Ys)(this.gsdk,"A")))return Promise.resolve(!1);var r=n.GetAction();if(r.IsEmpty())return Promise.resolve(!1);if("number"!=typeof t)n.RemoveAction();else{var i=(0,l.qR)(r,t)||{index:-1},a=i.parent,o=i.action,s=i.index;if(!o)return Promise.resolve(!1);a&&s>-1?a.RemoveSubAction(s):n.RemoveAction()}return Promise.resolve(!0)}},{key:"getActionData",value:function(e){var t=this.getAnnot(e);if(!t.GetDict().HasKey((0,h.Ys)(this.gsdk,"A")))return Promise.resolve(void 0);var n=t.GetAction();if(n.IsEmpty())return Promise.resolve(void 0);var r=(0,l.FP)(this.gsdk,this.doc,n);return Promise.resolve(r)}},{key:"getAnnot",value:function(e){var t=this.doc,n=this.gsdk,r=(0,d.Xc)(t,e);if(!r)throw new Error("The annot ".concat(JSON.stringify(e)," you are trying to access does not exist!"));var i=r.GetType();switch(i){case n.AnnotType.e_Screen:return new n.Screen(r);case n.AnnotType.e_Link:return new n.Link(r);case n.AnnotType.e_Widget:return new n.Widget(r);case n.AnnotType.e_Sound:throw new Error("Not supported yet!");default:throw new Error("The currently specified annotation type (".concat(i.constructor.name,") does not support Action!"))}}},{key:"triggerAction",value:function(e,t){return(0,r._)(function(){var n,i,a,o,s,c,l,d,g;return(0,u.Jh)(this,function(p){return n=this,i=this.getAnnot(e),(a=i.GetDict()).HasKey((0,h.Ys)(this.gsdk,"A"))||a.HasKey((0,h.Ys)(this.gsdk,"Dest"))?!(o=i.GetAction())||o.IsEmpty()?[2]:(s=this.gsdk.AnnotType,l=null!==(c=null==t?void 0:t.trigger)&&void 0!==c?c:f.n6.ANNOT_MOUSE_BUTTON_RELEASED,d=i.GetPage(),(0,h.xF)(d),g={type:"annot",annot:i},[2,this.triggerGSDKAction(g,l,o,function(e){return(0,r._)(function(){var n,r,a,o,c,d,g,p;return(0,u.Jh)(this,function(u){if(!(n=e.javascript))return[2];switch(r=(0,h.Eo)(this.gsdk,n),i.GetType()){case s.e_Screen:a=(0,f.il)(this.gsdk,l),c=null!==(o=null==t?void 0:t.isModifier)&&void 0!==o&&o,g=null!==(d=null==t?void 0:t.isShift)&&void 0!==d&&d,p=new this.gsdk.Screen(i),(0,h.xF)(p),this.doc.ExecuteScreenJavaScript(a,r,c,g,p);break;case s.e_Link:this.doc.ExecuteLinkJavaScript(r)}return[2]})}).call(n)})]):[2]})}).call(this)}},{key:"moveActionAcross",value:function(e,t){return(0,r._)(function(){var n,r,i,a,o,s,c,d,h,f;return(0,u.Jh)(this,function(u){return n=t.trigger,r=this.jrDoc,i=r.engine,a=r.doc,o=this.getAnnot(e),s=o.GetAction(),c=Object.seal({type:"annot",annotId:e}),d=(0,l.o7)({gsdk:i,doc:a,query:c,trigger:n,useDict:!0,createIfNotExists:!0}),this.initializeActionState(c,o,s,d,n),(h=(0,l.nE)(o,s,d,t))&&(f=o.GetAction(),this.saveActionState(c,o,f,d,n)),[2,h]})}).call(this)}},{key:"undoOperation",value:function(){var e=this.undoActionOperation();return Promise.resolve(e)}},{key:"redoOperation",value:function(){var e=this.redoActionOperation();return Promise.resolve(e)}},{key:"getFullActionData",value:function(e){return(0,r._)(function(){var t,n,r,i;return(0,u.Jh)(this,function(a){switch(a.label){case 0:return t=this.jrDoc.actionAPIImpl.getActions({type:"annot",annotId:e},l.tq),[4,this.getActionData(e)];case 1:return(n=a.sent())?(-1===(r=t.findIndex(function(e){return e.trigger===f.n6.ANNOT_MOUSE_BUTTON_RELEASED}))?t.unshift({trigger:f.n6.ANNOT_MOUSE_BUTTON_RELEASED,data:n}):(i=t[r],n.subAction.push(i.data),t[r]={trigger:f.n6.ANNOT_MOUSE_BUTTON_RELEASED,data:n}),[2,t]):[2,t]}})}).call(this)}}]),t}(n(5369).y)},5369:(e,t,n)=>{"use strict";n.d(t,{y:()=>l});var r=n(5578),i=n(9227),a=n(7424),o=n(5991),s=n(7582),c=n(4099),u=n(8925),l=function(){function e(t){(0,i._)(this,e),(0,o._)(this,"jrDoc",void 0),(0,o._)(this,"undoRedoManager",void 0),(0,o._)(this,"doc",void 0),(0,o._)(this,"gsdk",void 0),this.jrDoc=t,this.undoRedoManager=new u.Fo,this.doc=t.doc,this.gsdk=t.engine}return(0,a._)(e,[{key:"resetUndoRedoManager",value:function(){this.undoRedoManager.reset()}},{key:"initializeActionState",value:function(e,t,n,r,i){if(!this.undoRedoManager.initialized){var a=r.GetAction({value:i}),o={owner:t,normalActions:(0,c.sy)(n),additionalAction:r,additionalActions:(0,c.sy)(a),trigger:i,query:e};this.undoRedoManager.initialize(o)}}},{key:"saveActionState",value:function(e,t,n,r,i){var a=r.GetAction({value:i}),o={owner:t,normalActions:(0,c.sy)(n),additionalAction:r,additionalActions:(0,c.sy)(a),trigger:i,query:e};this.undoRedoManager.save(o)}},{key:"undoActionOperation",value:function(){if(this.undoRedoManager.canUndo()){this.undoRedoManager.undo();var e=this.undoRedoManager.current();return e&&this.recoverActions(e),null==e?void 0:e.query}}},{key:"redoActionOperation",value:function(){if(this.undoRedoManager.canRedo()){this.undoRedoManager.redo();var e=this.undoRedoManager.current();return e&&this.recoverActions(e),null==e?void 0:e.query}}},{key:"recoverActions",value:function(e){var t=e.owner,n=e.normalActions,r=e.additionalActions,i=e.additionalAction,a=e.trigger,o=(0,c.J$)(n);if(o&&!o.IsEmpty()?t.SetAction(o):t.RemoveAction(),r){var s={value:a};i.RemoveAction(s);var u=(0,c.J$)(r);u&&!u.IsEmpty()?i.SetAction(s,u):i.RemoveAction(s)}}},{key:"constructAction",value:function(e){var t=this.gsdk,n=this.doc,r=(0,c.Vn)(t,e.type),i=t.Action.Create(n,r);return(0,c.rV)({gsdk:t,doc:n,action:i,data:e.data}),i}},{key:"updateActionData",value:function(e,t,n){var r=this.gsdk,i=this.doc,a=(0,c.qR)(e,t);if(!a)throw new Error("Action ".concat(t," not found!"));(0,c.rV)({gsdk:r,doc:i,action:a.action,data:n})}},{key:"triggerGSDKAction",value:function(e,t,n,i,a){return(0,r._)(function(){var o,l;return(0,s.Jh)(this,function(d){switch(d.label){case 0:return o=(0,c.Bh)(this.gsdk,this.doc,n),a?[4,o.reduce(function(e,t){return(0,r._)(function(){var n;return(0,s.Jh)(this,function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),[4,a(t)];case 2:return r.sent()&&n.push(t),[2,e]}})})()},Promise.resolve([]))]:[3,2];case 1:o=d.sent(),d.label=2;case 2:return l=(0,u.HW)(e),[2,this.jrDoc.actionExecutor.execute({query:l,trigger:t,actions:o,executeJavaScript:i})]}})}).call(this)}}]),e}()},8170:(e,t,n)=>{"use strict";n.d(t,{x:()=>h});var r=n(4691),i=n(9227),a=n(7424),o=n(5991),s=n(6905),c=n(9418),u=n(5467),l=n(4099),d=n(8925),h=function(e){function t(e){var n;return(0,i._)(this,t),n=(0,r._)(this,t,[e]),(0,o._)(n,"jrDoc",void 0),n.jrDoc=e,n}return(0,u._)(t,e),(0,a._)(t,[{key:"appendAction",value:function(e,t){var n=this.getBookmark(e),r=n.GetAction(),i=this.constructAction(t);if(!r||r.IsEmpty())n.SetAction(i);else{var a=i.GetSubActionCount();i.InsertSubAction(a,i)}return Promise.resolve()}},{key:"updateAction",value:function(e,t,n){var r=this.getBookmark(e).GetAction();return this.updateActionData(r,t,n),Promise.resolve()}},{key:"removeAction",value:function(e,t){var n=this.getBookmark(e);if(void 0!==t){var r=n.GetAction(),i=(0,l.qR)(r,t);if(!i)throw new Error("Cannot remove action with action object number: ".concat(t,". The specified action object does not exist!"));var a=i.parent,o=i.action;if(a&&o!==r){var s=Array.from({length:a.GetSubActionCount()},function(e,n){var r=a.GetSubAction(n);if(r.GetDict().GetObjNum()!==t)return r}).filter(function(e){return!e});a.RemoveAllSubActions(),s.forEach(function(e,t){a.InsertSubAction(t+1,e)})}else n.RemoveAction()}return Promise.resolve()}},{key:"getActionData",value:function(e){var t=this.getBookmark(e).GetAction();if(t.IsEmpty())return Promise.resolve(void 0);var n=(0,l.FP)(this.gsdk,this.doc,t);return Promise.resolve(n)}},{key:"triggerAction",value:function(e){var n=this,r=this.getBookmark(e),i=r.GetAction();if(i.IsEmpty())return Promise.resolve();var a={type:"bookmark",objNumber:e};return(0,s._)((0,c._)(t.prototype),"triggerGSDKAction",this).call(this,a,l.n6.NONE,i,function(e){return n.doc.ExecuteBookmarkJavaScript(r,(0,d.Eo)(n.gsdk,e.javascript)),Promise.resolve()})}},{key:"getBookmark",value:function(e){var t=this.jrDoc.rootBookmark;if(!t)throw new Error("Bookmark not load yet!");var n=t.getBookmarkById(e);if(!n)throw new Error("Bookmark not found: ".concat(e));return n.c_bookmark}}]),t}(n(5369).y)},5256:(e,t,n)=>{"use strict";n.d(t,{B:()=>c});var r=n(5578),i=n(9227),a=n(7424),o=n(5991),s=n(7582),c=function(){function e(t){(0,i._)(this,e),(0,o._)(this,"doc",void 0),this.doc=t}return(0,a._)(e,[{key:"sign",value:function(e){return(0,r._)(function(){return(0,s.Jh)(this,function(e){return[2]})})()}}]),e}()},1761:(e,t,n)=>{"use strict";n.d(t,{C:()=>r});var r=function(e){return e[e.ID_JS_EXPORT_ANONYANNOTS=0]="ID_JS_EXPORT_ANONYANNOTS",e[e.ID_JS_FILTER=1]="ID_JS_FILTER",e[e.ID_JS_STR_JSBUSY=2]="ID_JS_STR_JSBUSY",e[e.ID_JS_NOTSUPPORTMSG=3]="ID_JS_NOTSUPPORTMSG",e[e.ID_JS_RUN_ERR_WARN=4]="ID_JS_RUN_ERR_WARN",e[e.ID_JS_STR_RUN=5]="ID_JS_STR_RUN",e[e.ID_JS_STR_MEMDOC=6]="ID_JS_STR_MEMDOC",e[e.ID_JS_JSAFNUMBER_KEYSTROKE=7]="ID_JS_JSAFNUMBER_KEYSTROKE",e[e.ID_JS_JSPARSEDATE=8]="ID_JS_JSPARSEDATE",e[e.ID_JS_ARBMASK=9]="ID_JS_ARBMASK",e[e.ID_JS_JSRANGE1=10]="ID_JS_JSRANGE1",e[e.ID_JS_JSRANGE2=11]="ID_JS_JSRANGE2",e[e.ID_JS_JSRANGE3=12]="ID_JS_JSRANGE3",e[e.ID_JS_SECURITY_NAME=13]="ID_JS_SECURITY_NAME",e[e.ID_JS_ADDTOOLBUTTON_ADD_ONS=14]="ID_JS_ADDTOOLBUTTON_ADD_ONS",e[e.ID_JS_RUNTIMEERROR=15]="ID_JS_RUNTIMEERROR",e[e.ID_JS_ALERT=16]="ID_JS_ALERT",e[e.ID_JS_PARAMERROR=17]="ID_JS_PARAMERROR",e[e.ID_JS_AFNUMBER_KEYSTROKE=18]="ID_JS_AFNUMBER_KEYSTROKE",e[e.ID_JS_PARAM_TOOLONG=19]="ID_JS_PARAM_TOOLONG",e[e.ID_JS_PARSEDATE=20]="ID_JS_PARSEDATE",e[e.ID_JS_ATTENTION=21]="ID_JS_ATTENTION",e[e.ID_JS_SUBMITS=22]="ID_JS_SUBMITS",e[e.ID_JS_SUBMITF=23]="ID_JS_SUBMITF",e[e.ID_JS_NOTSUPPORT=24]="ID_JS_NOTSUPPORT",e[e.ID_JS_EVENT=25]="ID_JS_EVENT",e[e.ID_JS_UNHANDLED=26]="ID_JS_UNHANDLED",e[e.ID_JS_PRINT1=27]="ID_JS_PRINT1",e[e.ID_JS_PRINT2=28]="ID_JS_PRINT2",e[e.ID_JS_LAUNCHURL=29]="ID_JS_LAUNCHURL",e[e.ID_JS_PARAM_INCORRECT=30]="ID_JS_PARAM_INCORRECT",e[e.ID_JS_SAFEMODEL=31]="ID_JS_SAFEMODEL",e[e.ID_JS_RANGE_ERROR=32]="ID_JS_RANGE_ERROR",e[e.ID_JS_TYPE_ERROR=33]="ID_JS_TYPE_ERROR",e[e.ID_JS_REFERENCE_ERROR=34]="ID_JS_REFERENCE_ERROR",e[e.ID_JS_MISSING_ARG_ERROR=35]="ID_JS_MISSING_ARG_ERROR",e[e.ID_JS_NUMBER_OF_ARGS_ERROR=36]="ID_JS_NUMBER_OF_ARGS_ERROR",e[e.ID_JS_INVALID_SET_ERROR=37]="ID_JS_INVALID_SET_ERROR",e[e.ID_JS_INVALID_GET_ERROR=38]="ID_JS_INVALID_GET_ERROR",e[e.ID_JS_OUT_OF_MEMORY_ERROR=39]="ID_JS_OUT_OF_MEMORY_ERROR",e[e.ID_JS_NOT_ALLOWED_ERROR=40]="ID_JS_NOT_ALLOWED_ERROR",e[e.ID_JS_GENERAL_ERROR=41]="ID_JS_GENERAL_ERROR",e[e.ID_JS_RAISE_ERROR=42]="ID_JS_RAISE_ERROR",e[e.ID_JS_DEAD_OBJECT_ERROR=43]="ID_JS_DEAD_OBJECT_ERROR",e[e.ID_JS_BOOKMARK_INSERTPOS_ERROR=44]="ID_JS_BOOKMARK_INSERTPOS_ERROR",e[e.ID_JS_PLAYER_IS_OPEN=45]="ID_JS_PLAYER_IS_OPEN",e[e.ID_JS_PATH_INVALID=46]="ID_JS_PATH_INVALID",e[e.ID_JS_USER_CANCEL=47]="ID_JS_USER_CANCEL",e[e.ID_JS_NoSecurityHandle=48]="ID_JS_NoSecurityHandle",e[e.ID_GLWND_FILTER_ONLY_FDF=49]="ID_GLWND_FILTER_ONLY_FDF",e[e.ID_GLWND_FILTER_ONLY_XFDF=50]="ID_GLWND_FILTER_ONLY_XFDF",e[e.ID_GLWND_FILTER_ALL_FILE=51]="ID_GLWND_FILTER_ALL_FILE",e[e.ID_MPANNOT_FILTER_EXPORT_HIGHLIGHT=52]="ID_MPANNOT_FILTER_EXPORT_HIGHLIGHT",e[e.ID_JS_PARAMTOOLONG=53]="ID_JS_PARAMTOOLONG",e[e.IDS_JS_AFNUMBER_KEYSTROKE=54]="IDS_JS_AFNUMBER_KEYSTROKE",e[e.IDS_JS_DOCUMENT_PRINT=55]="IDS_JS_DOCUMENT_PRINT",e[e.IDS_JS_V8_OOM_ERROR_TITLE=56]="IDS_JS_V8_OOM_ERROR_TITLE",e[e.IDS_JS_V8_OOM_ERROR_INFO=57]="IDS_JS_V8_OOM_ERROR_INFO",e[e.IDS_JS_V8_FATAL_ERROR_TITLE=58]="IDS_JS_V8_FATAL_ERROR_TITLE",e[e.IDS_JS_V8_FATAL_ERROR_INFO=59]="IDS_JS_V8_FATAL_ERROR_INFO",e[e.IDS_JS_EXPORT_ANONYANNOTS=60]="IDS_JS_EXPORT_ANONYANNOTS",e[e.IDS_JS_STR_MONTHS=61]="IDS_JS_STR_MONTHS",e[e.IDS_JS_STR_FULLMONTHS=62]="IDS_JS_STR_FULLMONTHS",e[e.IDS_JS_STR_PDFFILTER=63]="IDS_JS_STR_PDFFILTER",e[e.IDS_JS_FIELDREQUIRED_INFO=64]="IDS_JS_FIELDREQUIRED_INFO",e[e.IDS_JS_STR_WEEKDAYS=65]="IDS_JS_STR_WEEKDAYS",e}({})},8341:(e,t,n)=>{"use strict";n.d(t,{Is:()=>v,zf:()=>D,yz:()=>g,i8:()=>_,aZ:()=>p});var r=n(5578),i=n(4570),a=n(5347),o=n(7582),s=n(5318);function c(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0;return u(e.ExportDataForChatGPT(t,null,n,r),i)}function u(e,t){for(var n=[],r=0;r<e.GetSize();r++){var i=e.GetAt(r);switch(i.type){case t.LRElementType.e_Section:var o,s=u(i.stSectionElement.element_array,t);(o=n).push.apply(o,(0,a._)(s));break;case t.LRElementType.e_Table:var c,h=l(i.stTableElement);(c=n).push.apply(c,(0,a._)(h));break;case t.LRElementType.e_List:var f,g=d(i.stListElement);(f=n).push.apply(f,(0,a._)(g));break;case t.LRElementType.e_Figure:break;case t.LRElementType.e_Paragraph:case t.LRElementType.e_Header:case t.LRElementType.e_Header_1:case t.LRElementType.e_Header_2:case t.LRElementType.e_Header_3:case t.LRElementType.e_Header_4:case t.LRElementType.e_Header_5:case t.LRElementType.e_Header_6:case t.LRElementType.e_Header_n:case t.LRElementType.e_Caption:for(var p=i.stTextElement.text_array,v=0;v<p.GetSize();v++){var m=p.GetAt(v),_=m.content.toString(),y=m.rect;n.push({is_table:!1,rect:{left:y.left,top:y.top,right:y.right,bottom:y.bottom},text_content:_})}case t.LRElementType.e_Unknow:}}return n}function l(e){for(var t=[],n=e.row_array,r=e.rect,i=0;i<n.GetSize();i++){for(var a=n.GetAt(i),o=[],s=0;s<a.cell_array.GetSize();s++){var c=a.cell_array.GetAt(s),u=c.rect,l="td";c.isHeader&&(l="th");var d="";c.nRowSpan>1&&(d+=' rowspan="'+c.nRowSpan+'"'),c.nColSpan>1&&(d+=' colspan="'+c.nColSpan+'"');var h=c.content.toString(),f="<"+l+d+">"+(h=h.replace("\n","<br/>"))+"</"+l+">";o.push({content:f,rect:{left:u.left,top:u.top,right:u.right,bottom:u.bottom}})}t.push({cells:o})}return[{is_table:!0,rect:{left:r.left,top:r.top,right:r.right,bottom:r.bottom},table_data:t}]}function d(e){for(var t=[],n=e.item_array,r=0;r<n.GetSize();r++){for(var i,o=n.GetAt(r),s=0;s<o.text_array.GetSize();s++){var c=o.text_array.GetAt(s),u=c.content.toString(),l=c.rect;t.push({is_table:!1,rect:{left:l.left,top:l.top,right:l.right,bottom:l.bottom},text_content:u})}var h=d(o.sublist);(i=t).push.apply(i,(0,a._)(h))}return t}var h={},f=["title","subject","creator","author","producer","keywords","lastModified","created"];function g(e,t){return(0,r._)(function(){var n,r,i,a,c,u,l,d,g,p,v;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,e.getPageCount()];case 1:return n=o.sent(),r=(null==t?void 0:t.start)||0,i=(null==t?void 0:t.end)||n,h[e.id]?[2,Promise.resolve(h[e.id].slice(r,i))]:(a=null==t?void 0:t.oldVersion,[4,s.ZP.loadWasmModule(s.AI)]);case 2:for(o.sent(),c=[],u=r;u<i;u++)c.push(m(e,u,a));return[4,Promise.all(c)];case 3:return l=o.sent(),a?[2,l]:[4,e.getPageByIndex(0,void 0,!1)];case 4:return d=o.sent(),g=d.page.GetJsonVerForChatGPT().toString(),p=e.getMetadata(),(v=f.reduce(function(e,t){var n;return e[t]=p[(n=t,n.charAt(0).toUpperCase()+n.slice(1).toLowerCase())],e},{})).pdfVersion="PDF-"+p.version/10,v.fastWebView=e.isLinearized()?"Yes":"No",v.taggedPDF=p.isTagged?"Yes":"No",v.page=p.count,[2,{gsdkVersion:e.engine.Library.GetVersion().toString(),jsonVersion:g,meta:v,pages:l}]}})})()}function p(e){return(0,r._)(function(){var t,n,r,i;return(0,o.Jh)(this,function(a){switch(a.label){case 0:return[4,s.ZP.loadWasmModule(s.AI)];case 1:return a.sent(),[4,e.getPageCount()];case 2:t=a.sent(),n=[],r=0,a.label=3;case 3:return r<t?[4,e.getPageByIndex(r)]:[3,7];case 4:return[4,a.sent().getPureTexts()];case 5:i=a.sent(),n.push(i),a.label=6;case 6:return r++,[3,3];case 7:return[2,n.join("")]}})})()}function v(e,t){return(0,r._)(function(){var n,r,i,a,s,c;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,e.getPageCount()];case 1:n=o.sent(),r="",i=!1,a=0,o.label=2;case 2:return a<n?[4,e.getPageByIndex(a)]:[3,6];case 3:return[4,(s=o.sent()).getPureTexts()];case 4:if(c=o.sent(),r+=c)return[3,6];t&&s.isScannedPage()&&(i=!0),o.label=5;case 5:return a++,[3,2];case 6:return t?[2,!r&&i]:[2,!r]}})})()}function m(e,t,n){return(0,r._)(function(){return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,e.getPageByIndex(t)];case 1:return[4,_(r.sent(),{left:0,right:0,bottom:0,top:0},!1,n)];case 2:return[2,r.sent()]}})})()}function _(e){return(0,r._)(function(e){var t,n,r,i,a,s,u,l=arguments;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return t=l.length>1&&void 0!==l[1]?l[1]:{left:0,top:0,right:0,bottom:0},n=l.length>2&&void 0!==l[2]&&l[2],r=l.length>3&&void 0!==l[3]&&l[3],[4,e.c_pagePromise];case 1:return[4,o.sent().IsParsed()];case 2:return o.sent(),[4,e.doParsePage()];case 3:return i=o.sent(),a=new e.engine.CFX_FloatRect(t.left,t.bottom,t.right,t.top),r?[2,c(i,!0,a,n,e.engine)]:(s=i.ExportJsonDataForChatGPT(!0,e.engine.PauseCallback.implement({NeedToPauseNow:function(){return!1}}),a,n),u=s.toString(),s.delete(),[2,{pageIndex:e.index,elements:JSON.parse(u)}])}})}).apply(this,arguments)}function y(e){for(var t=[],n=e.GetSize(),r=0;r<n;r++){var i=e.GetAt(r),a=i.rect,o={left:a.left,right:a.right,top:a.top,bottom:a.bottom};t.push({is_table:!1,rect:o,text_content:i.content.toString()})}return t}function S(e){for(var t=[],n=e.GetSize(),r=0;r<n;r++){var i,o=e.GetAt(r);(i=t).push.apply(i,(0,a._)(y(o.text_array)))}return t}function b(e,t){return(0,r._)(function(){var n,r;return(0,o.Jh)(this,function(i){return n=e.FetchPageForChatGPT(t),r=S(n),[2,Promise.resolve(r)]})})()}function I(e,t){return(0,r._)(function(){var n,r;return(0,o.Jh)(this,function(i){return n=e.FetchParagraphForChatGPT(t),r=S(n),[2,Promise.resolve(r)]})})()}function A(e,t){return(0,r._)(function(){var n,r;return(0,o.Jh)(this,function(i){return n=e.FetchCaptionForChatGPT(t),r=S(n),[2,Promise.resolve(r)]})})()}function P(e,t){return(0,r._)(function(){var n,r;return(0,o.Jh)(this,function(i){return n=e.FetchTableForChatGPT(t),r=function(e){for(var t=[],n=e.GetSize(),r=0;r<n;r++){for(var i=e.GetAt(r),a=i.rect,o={left:a.left,right:a.right,top:a.top,bottom:a.bottom},s=[],c=0;c<i.row_array.GetSize();c++){for(var u=i.row_array.GetAt(c),l=[],d=0;d<u.cell_array.GetSize();d++){var h=u.cell_array.GetAt(d),f=h.rect,g=f.left,p=f.right,v=f.top,m=f.bottom;l.push({content:h.content.toString(),rect:{left:g,right:p,top:v,bottom:m}})}s.push({cells:l})}t.push({is_table:!0,rect:o,table_data:s})}return t}(n),[2,Promise.resolve(r)]})})()}function D(e,t,n){return(0,r._)(function(){var r,a,c,u,l,d,h,f,g,p,v,m,_,y,S,D,E;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,s.ZP.loadWasmModule(s.AI)];case 1:if(o.sent(),r=n.type,a=n.pages,c=[],!(u={page:b,section:I,figure:A,table:P})[r])return[2,Promise.resolve()];for(l=u[r],d=new e.Range,a.split(",").filter(function(e){return!!e}).forEach(function(t){if(t.indexOf("-")>=0){var n=(0,i._)(t.split("-"),2),r=n[0],a=n[1];d.AddSegment(Number(r)-1,Number(a)-1,[e.RangeFilter.e_All,e.RangeFilter.e_Odd,e.RangeFilter.e_Even][0])}else d.AddSingle(Number(t)-1)}),h=[],f=d.GetSegmentCount(),g=0;g<f;g++)for(p=d.GetSegmentStart(g),v=d.GetSegmentEnd(g),m=p;m<=v;m++)h.push(m);_=h.length,y=0,o.label=2;case 2:return y<_?[4,t.getPageByIndex(h[y])]:[3,6];case 3:return[4,(S=o.sent()).doParsePage()];case 4:D=o.sent(),E=S.engine.PauseCallback.implement({NeedToPauseNow:function(){return!1}}),c.push(l(D,E)),o.label=5;case 5:return y++,[3,2];case 6:return[4,Promise.all(c)];case 7:return[2,o.sent()]}})})()}},825:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(9227),i=n(7424),a=function(){function e(){(0,r._)(this,e)}return(0,i._)(e,null,[{key:"findNextPageText",value:function(e,t){var n=e.engine,r=e.doc,i=t.startPageIndex,a=t.endPageIndex,o=t.currentPageIndex,s=t.pattern,c=t.flags,u=e.pageIndexMap[o],l=!1,d=null,h=!1;if(u?(d=u.page,h=u.needReParse):(d=r.GetPage(o),l=!0),!d)return{currentPageIndex:o,list:[],hasMore:!1};d.IsParsed()&&!h||d.StartParse(0,null,h),c=c||n.SearchFlags.e_SearchNormal.value;var f=new n.WString(s),g=[],p=d.GetAnnotCount();if(p>0)for(var v=0;v<p;v++){var m=d.GetAnnot(v);if(m.GetType()===n.AnnotType.e_Widget){var _=new n.TextSearch.CreateFromAnnot(m);_.SetPattern(f),_.SetSearchFlags(c),g=this.iterationPageFindNext(_,g),_.delete()}}var y=u&&!u.needReParse,S=y?u.getNormalTextPageSync():new n.TextPage(d,n.TextParseFlags.e_ParseTextNormal.value),b=new n.TextSearch(S);b.SetPattern(f),b.SetSearchFlags(c),g=this.iterationPageFindNext(b,g);var I=o<a;return o<a?o++:o=i,u&&u.needReParse&&u.clearCacheObejcts(),f.delete(),b.delete(),y||S.delete(),l&&d.delete(),g.length>0?{currentPageIndex:o,list:g,hasMore:I}:i===o?{currentPageIndex:o,list:[],hasMore:!1}:this.findNextPageText(e,{startPageIndex:i,endPageIndex:a,currentPageIndex:o,pattern:s,flags:c})}},{key:"findNext",value:function(e){if(e.FindNext()){for(var t=[],n=e.GetMatchRects(),r=0,i=n.GetSize();r<i;r++){var a=n.GetAt(r);t[r]={left:a.left,right:a.right,top:a.top,bottom:a.bottom}}return{pageIndex:e.GetMatchPageIndex(),startCharIndex:e.GetMatchStartCharIndex(),endCharIndex:e.GetMatchEndCharIndex(),sentenceStartIndex:e.GetMatchSentenceStartIndex(),sentence:e.GetMatchSentence().toString(),rectArray:t}}return null}},{key:"iterationPageFindNext",value:function(e,t){var n=this.findNext(e);return n?(t.push(n),this.iterationPageFindNext(e,t)):t}}]),e}()},5251:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(4691),i=n(9227),a=n(7424),o=n(5467),s=n(1550),c=n(9418);var u=n(2251);function l(e){var t="function"==typeof Map?new Map:void 0;return l=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return(0,s._)(e,arguments,(0,c._)(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),(0,u._)(r,e)},l(e)}var d="InvalidJRObjectError",h=function(e){function t(e){var n;return(0,i._)(this,t),(n=(0,r._)(this,t,[e])).name=d,n}return(0,o._)(t,e),(0,a._)(t,null,[{key:"is",value:function(e){return!!e&&e.name===d}}]),t}(l(Error))},952:(e,t,n)=>{"use strict";n.d(t,{Kq:()=>l,Xd:()=>d,cP:()=>u});var r=n(9227),i=n(5991),a=n(3850),o=function e(t,n,a){(0,r._)(this,e),(0,i._)(this,"fileData",void 0),(0,i._)(this,"byteRange",[]),(0,i._)(this,"filter",void 0),(0,i._)(this,"subfilter",void 0),this.fileData=t,this.filter=n,this.subfilter=a},s={},c=function(e,t){var n=!0;return e.StreamCallback.implement({Retain:function(){return c(e,t)},Release:function(){n=!0},Flush:function(){return!0},GetSize:function(){return t.totalSize},WriteBlock:function(r,i,a){for(var o=[],s=i;s<i+a;s++)o.push(e.HEAPU8[r+s-i]);if(n)n=!1,t.blob=0!=i?new Blob([new Uint8Array(i),new Uint8Array(o)]):new Blob([t.blob,new Uint8Array(o)]);else{var c=t.blob.size;i>=0&&i<c&&i+a<c?t.blob=new Blob([t.blob.slice(0,i),new Uint8Array(o),t.blob.slice(i+a,c)]):i>=0&&i<c&&i+a>c?t.blob=new Blob([t.blob.slice(0,i),new Uint8Array(o)]):i>=c&&(t.blob=new Blob([t.blob,new Uint8Array(i-c),new Uint8Array(o)]))}return t.totalSize=t.blob.size,!0},ReadBlock:function(n,r,i){var a=t.blob.slice(r,r+i),o=(new self.FileReaderSync).readAsArrayBuffer(a);return e.HEAPU8.set(new Uint8Array(o),n),!0}})},u=function(e,t,n,r,i){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"filter",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"filter",r=e.SignatureCallback.implement({Release:function(){},StartCalcDigest:function(t,n,r,i,a){var o=s[i.GetDict().GetObjNum()];if(o)for(var c=0;c<r;c+=2)o.byteRange.push(e.HEAP32[n/4+c]),o.byteRange.push(e.HEAP32[n/4+c+1]);return!0},ContinueCalcDigest:function(t,n){return e.ProgressiveState.e_Finished},GetDigest:function(t){var n=new Uint8Array([0,10,10,0]),r=new e.String,i=e._malloc(n.length);return e.HEAPU8.set(n,i),r.Load(i,n.length),r},Sign:function(t,n,r,i,a,o){var s=new Uint8Array([0,10,10,0]),c=e._malloc(s.length);e.HEAPU8.set(s,c);var u=new e.String;return u.Load(c,s.length),u},VerifySigState:function(t,n,r,i,a){return e.States.e_StateVerifyNoChange.value},IsNeedPadData:function(){return!1},CheckCertificateValidity:function(t,n,r){return e.CertValidity.e_CertValid}});e.Library.RegisterSignatureCallback((0,a.n5)(e,t),(0,a.n5)(e,n),r)}(e,r,i);var u={blob:new Blob([]),totalSize:0,getBuffer:function(e,t){var n=(new self.FileReaderSync).readAsArrayBuffer(this.blob.slice(e,e+t));return Array.from(new Uint8Array(n))}},l=t.GetDict().GetObjNum();s[l]=new o(u,r,i);try{t.StartSign({value:n},c(e,u),l).Continue()}catch(e){console.warn(e)}return l},l=function(e){var t=s[e],n=t.fileData.blob,r=t.byteRange;return delete s[e],{buffer:n,byteRange:r}};function d(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{path:"",buffer:null},r=n.path,i=n.buffer;if(r){var a=new XMLHttpRequest;a.open("GET",r,!1),a.responseType="arraybuffer",a.send(null),t=a.response}else t=i||new ArrayBuffer(0);var o=0,s=!1,c=0,u=0,l=e.StreamCallback.implement({Release:function(){console.log("Release file stream")},GetSize:function(){return s?u:t.byteLength},Flush:function(){return!0},WriteBlock:function(n,r,i){if(s&&(r+=c),t.byteLength<r+i){var a=t;if(t=new ArrayBuffer(r+i),0!==a.byteLength){var o=new Uint8Array(a);new Uint8Array(t).set(o)}}var u=new Uint8Array(t,r,i),l=e.HEAPU8.subarray(n,n+i);return u.set(l),!0},GetPosition:function(){return s?o-c:o},SetPosition:function(e){s&&(e+=c),o=e},IsEOF:function(){var e=s?u:t.byteLength;return o===e},ReadBlock:function(n,r,i){if(s&&(r+=c)+i>u)return!1;var a=new Uint8Array(t,r,i);return e.HEAPU8.set(a,n),!0},SetRange:function(e,t){c=e,u=t,s=!0},ClearRange:function(){s=!1}});return l.GetBuffer=function(){return t},l.GetBlob=function(){return new Blob([t],{type:"application/pdf"})},l}},4335:(e,t,n)=>{"use strict";n.d(t,{$h:()=>l,ZP:()=>d,tJ:()=>u});var r=n(9227),i=n(7424),a=n(5991),o=n(8925);function s(e,t){var n=Array.prototype.slice.call(t).join(",");throw new Error("Illegal operations on virtual page: ".concat(e,"(").concat(n,")"))}function c(e,t,n){var r=new e.Bitmap(t,n,e.DIBFormat.e_DIBRgb32,0,0);r.FillRect(4294638330,null);var i=r.GetBuffer(),a=r.GetHeight()*r.GetPitch(),o=i+a;return{buffer:e.HEAPU8.buffer.slice?e.HEAPU8.buffer.slice(i,o):new Uint8Array(e.HEAPU8.buffer,i,a).buffer,bitmap:r}}var u=800,l=300,d=function(){function e(t,n){(0,r._)(this,e),(0,a._)(this,"index",void 0),(0,a._)(this,"pdfDoc",void 0),(0,a._)(this,"isVirtual",void 0),(0,a._)(this,"id",void 0),(0,a._)(this,"width",void 0),(0,a._)(this,"height",void 0),(0,a._)(this,"engine",void 0),this.index=t,this.pdfDoc=n,this.isVirtual=!0,this.width=u,this.height=l,this.id=(0,o.Ki)("virtual_pdf_page"),this.engine=n.engine}return(0,i._)(e,[{key:"page",get:function(){return s(".page",arguments)}},{key:"preparse",value:function(){}},{key:"addJRAnnot",value:function(){s("addJRAnnot",arguments)}},{key:"clearEnginePage",value:function(){s("clearEnginePage",arguments)}},{key:"reloadAnnots",value:function(){}},{key:"hasAnnot",value:function(){return!1}},{key:"hasAnnots",value:function(){return Promise.resolve(!1)}},{key:"parsedPage",value:function(){s("parsedPage",arguments)}},{key:"reParsePage",value:function(){s("reParsePage",arguments)}},{key:"getIndex",value:function(){return this.index}},{key:"getObjNumber",value:function(){}},{key:"getWidth",value:function(){return Promise.resolve(this.width)}},{key:"getHeight",value:function(){return Promise.resolve(this.height)}},{key:"getAnnots",value:function(){return Promise.resolve([])}},{key:"getAnnotIDList",value:function(){return[]}},{key:"getAnnotById",value:function(){return Promise.resolve(void 0)}},{key:"getThumb",value:function(){var e;return e=this.height/this.width>1.29?258/this.height:200/this.width,this.getImageData(e)}},{key:"getNativeAnnotById",value:function(){s("getNativeAnnotById",arguments)}},{key:"getImageDataByTile",value:function(e,t,n,r){var i=c(this.engine,n,r),a=i.buffer;return i.bitmap.delete(),a}},{key:"getImageData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=Math.max(1,this.width*e),n=Math.max(1,this.height*e),r=c(this.engine,t,n),i=r.buffer;return r.bitmap.delete(),Promise.resolve({buffer:i,width:t,height:n})}},{key:"getRotation",value:function(){return 0}},{key:"setRotation",value:function(){}},{key:"destroy",value:function(){}},{key:"resetBitmapCache",value:function(){}},{key:"toJson",value:function(){return{id:this.id,index:this.index,width:this.width,height:this.height,rotation:0,annotCount:0,matrix:[1,0,0,1,0,0],objectNumber:-1,AA:{},mediaWidth:this.width,mediaHeight:this.height,isCropped:!1,isVirtual:!0,cropBox:{left:0,right:this.width,top:this.height,bottom:0}}}},{key:"getBitmap",value:function(e,t,n,r,i,a){if(n.width<1||n.height<1)return Promise.resolve({image:{buffer:void 0},isVirtual:!0});var o=c(this.engine,n.width,n.height),s=o.buffer;return o.bitmap.delete(),Promise.resolve({image:{buffer:s,x:n.x||0,y:n.y||0,width:n.width,height:n.height,isVirtual:!0},isVirtual:!0})}},{key:"renderAnnots",value:function(){}},{key:"getPageAndHighlightBitmap",value:function(e,t,n,r){return this.getBitmap(e,t,n,0,[],!0)}},{key:"getAnnotBitmap",value:function(){s("getAnnotBitmap",arguments)}},{key:"getAnnotBitmapByRange",value:function(){s("getAnnotBitmapByRange",arguments)}},{key:"getAnnotIdAtPoint",value:function(){s("getAnnotIdAtPoint",arguments)}},{key:"getAnnotIdAtDevicePoint",value:function(){s("getAnnotIdAtDevicePoint",arguments)}},{key:"getCharInfoAtPoint",value:function(){s("getCharInfoAtPoint",arguments)}},{key:"getNormalTextPage",value:function(){s("getNormalTextPage",arguments)}},{key:"getNormalTextPageSync",value:function(){s("getNormalTextPageSync",arguments)}},{key:"removeAnnotById",value:function(){s("removeAnnotById",arguments)}},{key:"removeAllAnnot",value:function(){}},{key:"addImage",value:function(){s("addImage",arguments)}},{key:"addAnnot",value:function(){s("addAnnot",arguments)}},{key:"markRedactAnnot",value:function(){s("markRedactAnnot",arguments)}},{key:"addAnnotGroup",value:function(){s("addAnnotGroup",arguments)}},{key:"getTextRectsAtRect",value:function(){s("getTextRectsAtRect",arguments)}},{key:"getTextContinuousRectsAtRect",value:function(){s("getTextContinuousRectsAtRect",arguments)}},{key:"getTextContinuousRectsAtPoints",value:function(){s("getTextContinuousRectsAtPoints",arguments)}},{key:"getTextContinuousCharsAtRect",value:function(){return Promise.resolve("")}},{key:"getDoubleClickTextRectAtPoint",value:function(){s("getDoubleClickTextRectAtPoint",arguments)}},{key:"getTextSearch",value:function(){s("getTextSearch",arguments)}},{key:"update",value:function(){return Promise.resolve({index:this.index,annotIds:[]})}},{key:"flattern",value:function(){s("flattern",arguments)}},{key:"getGraphicsObjectAtPoint_s",value:function(){return Promise.resolve([])}},{key:"getGraphicsObjectsCount",value:function(){return Promise.resolve(0)}},{key:"getGraphicsObjectByIndex",value:function(){s("getGraphicsObjectByIndex",arguments)}},{key:"getGraphicsObjectsInRect",value:function(){s("getGraphicsObjectsInRect",arguments)}},{key:"getGraphicsObjectAtPoint",value:function(){s("getGraphicsObjectAtPoint",arguments)}},{key:"checkPathObjects",value:function(){}},{key:"addWatermark",value:function(){s("addWatermark",arguments)}},{key:"pasteAnnot",value:function(){s("pasteAnnot",arguments)}},{key:"calcContentBBox",value:function(){return{}}},{key:"getBox",value:function(){return{}}},{key:"getAnnotIdArrayByOrder",value:function(){return Promise.resolve([])}},{key:"getPageDictionary",value:function(){return Promise.resolve({})}},{key:"clearDesignerAssitCache",value:function(){}},{key:"getSuggestedFormDesignerRect",value:function(){return Promise.resolve({left:0,right:0,top:0,bottom:0})}},{key:"getSnappedPoint",value:function(e){return e}},{key:"getTextRectCount",value:function(){return Promise.resolve(0)}},{key:"getTextByRectIndex",value:function(){s("getTextByRectIndex",arguments)}},{key:"normalize",value:function(){}}]),e}()},479:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(9227),i=n(7424),a=n(5991),o=n(9256),s=n(952),c=n(3850),u=n(7731),l=function(){function e(t,n,i){(0,r._)(this,e),(0,a._)(this,"engine",void 0),(0,a._)(this,"pdfPage",void 0),(0,a._)(this,"pdfDoc",void 0),(0,a._)(this,"xfaPage",void 0),(0,a._)(this,"engineField",void 0),this.engine=t,this.pdfPage=n,this.pdfDoc=this.pdfPage.pdfDoc,this.xfaPage=this.pdfPage.xfaPage,this.engineField=this.getSignatureField(i)}return(0,i._)(e,[{key:"getSignatureField",value:function(e){return this.xfaPage.GetWidget(e).GetSignature()}},{key:"sign",value:function(e,t){var n,r=this,i=this.engine,a=i.KeyName,l=Promise.resolve(),d=e.flag||256;if(e.fieldName){(n=this.engineField).GetSignatureType()===this.engine.SignatureType.e_SignatureTypePagingSeal&&(n=n.GetPagingSealSignature(),d=e.flag||128);var h=n.GetControl(0).GetWidget().GetPage().GetIndex();l=this.pdfDoc.getPageByIndex(h)}return l.then(function(l){n.CreateSigVDict(new i.String(e.filter),new i.String(e.subfilter)),n.SetFilter(new i.String(e.filter)),n.SetSubFilter(new i.String(e.subfilter)),e.signer&&n.SetKeyValue(a.e_KeyNameSigner,new i.WString(e.signer)),e.reason&&n.SetKeyValue(a.e_KeyNameReason,new i.WString(e.reason)),e.email&&n.SetKeyValue(a.e_KeyNameContactInfo,new i.WString(e.email)),e.distinguishName&&n.SetKeyValue(a.e_KeyNameDN,new i.WString(e.distinguishName)),e.location&&n.SetKeyValue(a.e_KeyNameLocation,new i.WString(e.location));var h,f=e.text||e.signer;0!=e.flag&&f&&256&d&&n.SetKeyValue(a.e_KeyNameText,new i.WString(f)),h=void 0!==e.signTime&&e.signTime>0?new Date(e.signTime):new Date;var g,p=new i.DateTime(h.getFullYear(),h.getMonth()+1,h.getDate(),h.getHours(),h.getMinutes(),h.getSeconds(),h.getMilliseconds(),-h.getTimezoneOffset()/60,0);if(n.SetSignTime(p),e.timeFormat){var v=e.timeFormat,m=v.format,_=v.timeZoneOptions;n.SetTimeDescription((0,c.n5)(i,(0,u.Z)(h,m,_)))}if((g=t&&t.image||e.inkSign)&&640&d&&("object"==(void 0===g?"undefined":(0,o._)(g))&&(g=g.url),g.length>0)){var y=r.pdfDoc.JR.createReaderCallback(g),S=new i.Image(y).GetFrameBitmap(0);n.SetBitmap(S),d|=128}n.SetDocPermission({value:e.docPermission||0});var b=new r.engine.SignatureAppearanceOptions;b.showLogo=!(1&~d);var I=e.fontName||"Helvetica",A=e.fontSize||0,P=e.iconFontName||"Helvetica",D=e.iconFontSize||0;if(b.fontName=new i.WString(P),b.fontSize=D,b.iconFontName=new i.WString(I),b.iconFontSize=A,n.SetSignatureAppearanceOptions(b),n.SetAppearanceFlags(d),e.defaultContentsLength&&n.SetDefaultContentsLength(e.defaultContentsLength),e.native){var E=(0,s.Xd)(i,{path:e.certificate,buffer:null}),C=(0,s.Xd)(i),w=n.StartSign_new(E,new i.WString(e.certPWD),{value:e.hashAlgorithm},C,0,null);if(w.Continue(),-1==w.GetRateOfProgress())throw new Error("Sign Error");return C.GetBlob()}var k=(0,s.cP)(r.engine,n,e.hashAlgorithm,e.filter,e.subfilter),T=(0,s.Kq)(k);return Promise.resolve(T)})}}]),e}()},8895:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(5578),i=n(9227),a=n(7424),o=n(5991),s=n(7582),c=n(9996),u=n(4271),l=function(){function e(t,n,r,a){(0,i._)(this,e),(0,o._)(this,"engine",void 0),(0,o._)(this,"clientId",void 0),(0,o._)(this,"pdfDoc",void 0),(0,o._)(this,"currFocus",{}),(0,o._)(this,"dpr",1),(0,o._)(this,"syncBaseUrl",void 0),(0,o._)(this,"pdfJR",void 0),this.engine=t,this.clientId=n,this.pdfDoc=r,this.syncBaseUrl=a,this.pdfJR=r.JR;var s=new URL(self.location.href);this.dpr=Number(s.searchParams.get("dpr"))||1}return(0,a._)(e,[{key:"Release",value:function(){}},{key:"InvalidateRect",value:function(e,t,n){(t.left||t.top||t.right||t.bottom)&&postMessage({workflow:"xfa",type:"InvalidateRect",msg:{pageIndex:e,rect:{left:t.left,top:t.top,right:t.right,bottom:t.bottom},flag:n.value}})}},{key:"DisplayCaret",value:function(e,t,n){postMessage({workflow:"xfa",type:"DisplayCaret",msg:{pageIndex:e,isVisible:t,rect:{left:n.left,top:n.top,right:n.right,bottom:n.bottom}}})}},{key:"GetPopupPos",value:function(e,t,n,r,i){var a=t===n,o=this.pdfDoc.xfaDoc.GetPage(e),s=o.GetHeight(),c=o.GetWidth(),u=r.bottom-r.top,l=i.right-i.left,h=i.bottom-i.top,f={left:0,top:h,right:l,bottom:0},g=r.left,p=s-r.top,v=(r.right,r.bottom,{left:f.left+g,top:f.top+p,right:f.right+g,bottom:f.bottom+p}),m=h+u,_={left:v.left,top:s-v.top+m,right:v.right,bottom:s-v.bottom+m},y=_.bottom>s;y&&(_.top-=h+u,_.bottom-=h+u);var S=h-u,b={left:f.left,top:f.top-S,right:f.right,bottom:f.bottom-S};if(y&&(S=a?d(h)/this.dpr:h+u,b.top-=S,b.bottom-=S),a){var I=d(i.right-i.left)/this.dpr;if(_.left+I>c){var A=d(_.left+I-c)/this.dpr;b.left-=A,b.right-=A}}return new this.engine.CFX_FloatRect(b.left,b.bottom,b.right,b.top)}},{key:"PopupMenu",value:function(){}},{key:"GetCurrentPage",value:function(){return(0,c.Z)(this.syncBaseUrl,this.clientId,"XFADocProvider","GetCurrentPageIndex")}},{key:"SetCurrentPage",value:function(e,t){return(0,c.Z)(this.syncBaseUrl,this.clientId,"XFADocProvider","SetCurrentPage",{doc:e,pageIndex:t})}},{key:"GetTitle",value:function(){}},{key:"ExportData",value:function(){}},{key:"ImportData",value:function(){(0,c.Z)(this.syncBaseUrl,this.clientId,"ActionCallback","alert",{message:"Importing data is currently not supported for dynamic XFA.",title:"",type:0,icon:3})}},{key:"GotoURL",value:function(){}},{key:"Print",value:function(e,t,n,r){(0,c.Z)(this.syncBaseUrl,this.clientId,"ActionCallback","print",{startPageIndex:t,endPageIndex:n,flags:r})}},{key:"GetHighlightColor",value:function(){return 2139917567}},{key:"SubmitData",value:function(e,t,n,r,i){postMessage({workflow:"xfa",type:"SubmitData",msg:{target:t.toString(),format:n.value,textEncoding:r.value,content:i.toString()}})}},{key:"SetFocus",value:function(e,t){var n;!e||e.IsEmpty()?(this.resetCurrFocus(),n={}):(this.currFocus.xfa_page=e.GetXFAPage(),this.currFocus.xfaWidgetIndex=e.GetIndex(),n={pageIndex:this.currFocus.xfa_page.GetIndex(),xfaWidget:(0,u.Z)(e,this.pdfJR,!1,this.engine),bRelayout:t}),postMessage({workflow:"xfa",type:"SetFocus",msg:n})}},{key:"PageViewEvent",value:function(e,t){return(0,r._)(function(){var n,r,i,a;return(0,s.Jh)(this,function(o){switch(o.label){case 0:return t!==this.engine.PageViewEventType.e_PageViewEventTypeAdded?[3,2]:[4,this.pdfDoc.getPageByIndex(e)];case 1:return r=o.sent(),n={pageViewEventType:t.value,pageIndex:e,pageJson:r.toJson()},[3,3];case 2:t===this.engine.PageViewEventType.e_PageViewEventTypeRemoved&&(i=-1===e?this.pdfDoc.xfaDoc.GetPageCount():e,this.pdfDoc.pageIndexMap[i]&&(a=this.pdfDoc.pageIndexMap[i],delete this.pdfDoc.pageIndexMap[i],delete this.pdfDoc.pageIndexPromise[i],this.pdfDoc.removePageCache(a)),n={pageViewEventType:t.value,pageIndex:i}),o.label=3;case 3:return postMessage({workflow:"xfa",type:"PageViewEvent",msg:n}),[2]}})}).call(this)}},{key:"SetChangeMark",value:function(e){postMessage({workflow:"xfa",type:"SetChangeMark"})}},{key:"WidgetEvent",value:function(e,t){this.resetCurrFocus()}},{key:"resetCurrFocus",value:function(){this.currFocus={}}},{key:"hasCurrFocus",value:function(){return this.currFocus.xfa_page&&void 0!==this.currFocus.xfaWidgetIndex}},{key:"handleSignature",value:function(e){var t;if(!e||e.IsEmpty())this.resetCurrFocus(),t={};else{this.currFocus.xfa_page=e.GetXFAPage(),this.currFocus.xfaWidgetIndex=e.GetIndex();var n=e.GetSignature().IsSigned();t={pageIndex:e.GetXFAPage().GetIndex(),xfaWidget:(0,u.Z)(e,this.pdfJR,!1,this.engine)},postMessage({workflow:"xfa",type:n?"Verify":"Sign",msg:t})}}},{key:"showMemu",value:function(e){var t,n=e.point,r=e.pageIndex,i=e.xfa_widget;if(!i||i.IsEmpty())this.resetCurrFocus(),t={};else{var a=i.GetSignature().IsSigned();t={point:n,pageIndex:r,xfaWidget:(0,u.Z)(i,this.pdfJR,!1,this.engine),isSigned:a}}postMessage({workflow:"xfa",type:"ShowMemu",msg:t})}}]),e}();function d(e){return 72*e/96}},1407:(e,t,n)=>{"use strict";n.d(t,{f:()=>r});var r=function(e){return e[e.Arc=3]="Arc",e[e.Barcode=0]="Barcode",e[e.CheckButton=2]="CheckButton",e[e.ChoiceList=7]="ChoiceList",e[e.DateTimeEdit=4]="DateTimeEdit",e[e.ExclGroup=15]="ExclGroup",e[e.Image=16]="Image",e[e.ImageEdit=8]="ImageEdit",e[e.Line=9]="Line",e[e.NumericEdit=5]="NumericEdit",e[e.PasswordEdit=10]="PasswordEdit",e[e.PushButton=1]="PushButton",e[e.RadioButton=11]="RadioButton",e[e.Rectangle=12]="Rectangle",e[e.Signature=6]="Signature",e[e.TextEdit=13]="TextEdit",e[e.Unknown=14]="Unknown",e}({})},4271:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(1407),i=n(9227),a=n(7424),o=n(2711),s=n(3850),c=(n(1696),n(7731),function(){function e(){(0,i._)(this,e)}return(0,a._)(e,null,[{key:"getSignatureInfo",value:function(e,t,n){var r,i=e.GetSignature();t.signatureType=null===(r=i.GetSignatureType())||void 0===r?void 0:r.value;var a=t.isSigned=i.IsSigned(),c=i.GetFieldMDPAction().value;t.lockAction={type:c};var u=t.lockAction.fields=[];if(c>1)for(var l=i.GetFieldMDPActionFields(),d=0;d<l.GetSize();d++)u.push(l.GetAt(d).toString());if(a){t.filter=i.GetFilter().toString(),t.subfilter=i.GetSubFilter().toString(),Object.keys(o._).forEach(function(e){var r=i.GetKeyValue(n.KeyName[e]).toString();t[o._[e]]=r});var h=i.GetSignTime();h.IsValid()&&(h=h.ToUTCTime(),t.signTime=Date.UTC(h.year,h.month-1,h.day,h.hour,h.minute,h.second,h.milliseconds)),t.apFlag=i.GetAppearanceFlags(),t.isTimeStamp=i.IsTimeStamp();var f=i.GetDict().GetElement((0,s.n5)(n,"V")).GetDict().GetElement((0,s.n5)(n,"ByteRange")).GetArray(),g=t.byteRange=[];if(f)for(var p=f.GetElementCount(),v=0;v<p;v++)g.push(f.GetElement(v).GetInteger())}}},{key:"getFileSizeOfSignedVersion",value:function(e,t){if(!e.IsSigned())return 0;var n=0;try{n=e.GetFileSizeOfSignedVersion()}catch(e){n=0;var r=t.getErrorCode(e);console.error(r)}return n}},{key:"isSignatureFieldInVisible",value:function(e,t,n){var r=t.GetDict(),i=((0,s.n5)(e,"Parent"),(0,s.n5)(e,"Rect"));if(r){var a=r.GetElement(i);if(a||(a=this.getElementFromInheritedElement(e,r,i)),a&&a.GetRect().IsEmpty())return!1}return this.isDocTimeStamp(e,r)||n}},{key:"isDocTimeStamp",value:function(e,t){var n=this.getVDict(e,t);if(n){(0,s.n5)(e,"Parent");var r=(0,s.n5)(e,"Type"),i=n.GetElement(r);if(i||(i=this.getElementFromInheritedElement(e,n,r)),i)return"DocTimeStamp"===i.GetString().toString()}return!1}},{key:"getElementFromInheritedElement",value:function(e,t,n){var r,i=(0,s.n5)(e,"Parent"),a=t.GetElement(i);return a&&a.GetType()===e.PDFObjectType.e_Reference&&a.GetDirectObject()&&a.GetDirectObject().GetDict()&&(r=a.GetDirectObject().GetDict().GetElement(n)),r}},{key:"getVDict",value:function(e,t){var n=null;if(!t)return n;var r=(0,s.n5)(e,"V");if(t.HasKey(r))n=t.GetElement(r).GetDict();else{var i=t.GetElement((0,s.n5)(e,"Parent"));i&&i.GetDirect()&&i.GetDirect().GetDict()&&(n=i.GetDirect().GetDict().GetElement(r).GetDict())}return n}}]),e}());function u(e,t){var n,i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e.IsEmpty())return null;var s=e.GetRect(),u=e.GetName({value:0}),l=e.GetName({value:1}),d=e.GetName({value:2}),h=e.GetValue();if(a)return{type:e.GetType().value,toolTip:e.GetToolTip().toString()};var f={index:e.GetIndex(),type:e.GetType().value,fieldName:u.toString(),captionName:l.toString(),fullName:d.toString(),rect:{left:s.left,top:s.top,right:s.right,bottom:s.bottom},value:t.getPDFString(h),isChecked:e.IsChecked(),presence:e.GetPresence().value,hAlign:null===(n=e.GetHAlign())||void 0===n?void 0:n.value,vAlign:null===(i=e.GetVAlign())||void 0===i?void 0:i.value,hasEdgeTop:e.HasEdge({value:0}),hasEdgeRight:e.HasEdge({value:1}),hasEdgeBottom:e.HasEdge({value:2}),hasEdgeLeft:e.HasEdge({value:3})};u.delete(),l.delete(),d.delete(),h.delete(),e.GetType().value===r.f.Signature&&c.getSignatureInfo(e,f,o);try{var g=e.GetToolTip();f.toolTip=g.toString(),g.delete()}catch(e){}return f.type,f}},5298:(e,t,n)=>{"use strict";n.d(t,{b:()=>r.bS});var r=n(8925)},1812:(e,t,n)=>{"use strict";n.d(t,{DE:()=>o,jI:()=>s});n(8925);var r=n(3397);const i={annotationUpdated:"annotation-updated",annotationIDUpdated:"annotation-id-updated",annotationAppearanceUpdated:"annotation-appearance-updated",annotationReplyAdd:"annotation-reply-add",annotationReplyAdded:"annotation-reply-add",annotationReviewStateAnnotAdd:"annotation-review-state-annot-add",annotationReviewStateAnnotAdded:"annotation-review-state-annot-add",annotationMarkedStateAnnotAdd:"annotation-marked-state-annot-add",annotationMarkedStateAnnotAdded:"annotation-marked-state-annot-add",annotationStatesCleared:"annotation-states-cleared",annotationRemoved:"annotation-removed",annotationMovedPosition:"annotation-moved-position",annotationPositionMoved:"annotation-moved-position",annotationOrderChanged:"annotation-order-changed",annotationAdded:"annotation-add",annotationAdd:"annotation-add",moveAnnotsToPages:"moveAnnotsToPages",annotationImported:"annotation-imported",annotationImportedEx:"annotation-imported-ex",annotationLoaded:"annotation-loaded",actionUpdated:"action-updated",actionAdd:"action-add",actionAdded:"action-add",actionRemove:"action-remove",actionRemoved:"action-remove",layerVisibleChange:"layer-visible-change",layerVisibleChanged:"layer-visible-change",layerRemoved:"layer-removed",layerMerged:"layer-merged",layerAdded:"layer-added",bookmarkAdded:"bookmark-added",structureBookmarkAdded:"structure-bookmark-added",bookmarkUpdated:"bookmark-updated",bookmarkRemoved:"bookmark-removed",stateAnnotNameUpdated:"state-annot-name-updated",pageInfoChange:"page-info-change",pageInfoChanged:"page-info-change",pageRotationChange:"page-rotation-change",beforePageRotationChanged:"before-page-rotation-changed",pageRotationChanged:"page-rotation-change",imageAdded:"image-added",watermarksAdded:"watermarks-added",watermarkAdded:"watermark-added",watermarkRemoved:"watermark-removed",graphicsUpdated:"graphics-updated",permissionChanged:"permission-changed",docPasswordChanged:(0,r.yR)("doc-password-changed"),drmEncryptSuccess:"drm-encrypt-success",drmEncryptSucceeded:"drm-encrypt-success",drmEncryptFailed:"drm-encrypt-failed",removePwdAndPerm:(0,r.yR)("remove-password-and-permission"),pwdAndPermRemoved:(0,r.yR)("remove-password-and-permission"),securityTypeChanged:"security-type-changed",pageMoved:"page-moved",pageRemoved:"page-removed",pageAdded:"page-added",insertPages:"import-pages",pagesInserted:"import-pages",importPages:"import-pages",documentAttachmentAdd:"document-attachment-add",docAttachmentAdded:"document-attachment-add",documentAttachmentModify:"document-attachment-modify",docAttachmentModified:"document-attachment-modify",documentAttachmentRemove:"document-attachment-remove",docAttachmentRemoved:"document-attachment-remove",applyRedaction:"apply-redaction",redactionApplied:"apply-redaction",removeReviewState:"remove-review-state",reviewStateRemoved:"remove-review-state",removeMarkedState:"remove-marked-state",markedStateRemoved:"remove-marked-state",formValueChanged:"form-value-changed",metaDataChanged:"meta-data-changed",docModified:"doc-modified",flattened:"flattened",flattenAnnotation:"flatten-annotation",headerFooterUpdated:"headerFooterUpdated",headerFooterAdded:"headerFooterAdded",calculationOrderUpdated:"calculationOrderUpdated",COChange:"COChange",COChanged:"COChange",pagesMoved:"pages-moved",pagesReverseStart:"pagesReverseStart",pagesReversed:"pagesReversed",pagesRemoved:"pages-removed",pagesRotated:"pages-rotated",pageMeasureScaleRatioChanged:" page-measure-scale-ratio-changed",obtainsPageFromEngine:"obtains-page-from-engine",pagesBoxChange:"pages-box-changed",pagesBoxChanged:"pages-box-changed",pagesLabelChange:"pages-label-change",pagesLabelChanged:"pages-label-change",pagesLabelNeedUpdate:"pages-label-need-change",pagesLabelNeedUpdated:"pages-label-need-change",pagesReplace:"pages-replace",pagesReplaced:"pages-replace",recognitionForm:"recognition-form",removeEmbeddedPageThumbnail:"remove-embedded-page-thumbnail",embeddedPageThumbnailRemoved:"remove-embedded-page-thumbnail",objectStartEdit:"object-start-edit",objectEndEdit:"object-end-edit",objectSelectionChanged:"object-selection-changed",objectAdded:"object-added",objectPropertyChanged:"object-property-changed",objectContentChanged:"object-content-changed",paragraphContentChanged:"paragraph-text-changed",paragraphTextOnActivate:"paragraph-text-on-activate",paragraphTextOnDeactivate:"paragraph-text-on-deactivate",paragraphTextEnterEdit:"paragraph-text-enter-edit",paragraphTextExitEdit:"paragraph-text-exit-edit",paragraphTextOnChar:"paragraph-text-on-char",findSuccess:"find-success",replaceSuccess:"replace-success",replaceAllSuccess:"replace-all-success",articleThreadAdded:"article-thread-added",articleThreadUpdated:"article-thread-updated",articleThreadRemoved:"article-thread-removed",articleBeadAdded:"article-bead-added",articleBeadRemoved:"article-bead-removed",articleBeadUpdated:"article-bead-updated",articleEnterReadMode:"article-enter-read-mode",articleOutReadMode:"article-out-read-mode",invalidRect:"invalidRect",xfaContentChanged:"xfa-content-changed",formReloaded:"formReloaded",formFieldImported:"form-field-imported",pagingSealUpdated:"paging-seal-updated",xfaFormImported:"xfa-form-imported",xfaFormReset:"xfa-form-reset",xfaFormRemoved:"xfa-form-removed",textSplited:"text-splited",formFieldPropertyUpdated:"form-field-property-updated",formFieldRenamed:"form-field-renamed",formFieldRemoved:"form-field-removed",formReset:"form-reset",formImported:"form-imported",tabOrderTypeUpdated:"tab-order-type-updated",pageAdditionalActionAdded:"page-additional-action-added",pageAdditionalActionUpdated:"page-additional-action-updated",pageAdditionalActionRemoved:"page-additional-action-removed",docAdditionalActionAdded:"doc-additional-action-added",docAdditionalActionUpdated:"doc-additional-action-updated",docAdditionalActionRemoved:"doc-additional-action-removed",docOpenActionUpdated:"doc-open-action-updated",docOpenActionRemoved:"doc-open-action-removed",formWidgetCreated:"form-widget-created",pdfDocCreated:"pdf-doc-created"};Object.assign({jrLicenseSuccess:"jr-license-success",srLicenseSuccess:"sr-license-success",beforeOpenFile:"before-open-file",openingFile:"opening-file",beforeLoadPDFDoc:"before-load-pdf-document",openFileSuccess:"open-file-success",openFileFailed:"open-file-failed",willCloseDocument:"will-close-document",documentClosed:"document-closed",renderFileSuccess:"render-file-success",renderFileFailed:"render-file-error",beforeRenderPage:"before-render-page",renderPageSuccess:"render-page-success",updateZoomMode:"update-zoom-mode",beforeZoomTo:"before-zoom-to",zoomToSuccess:"zoom-to-success",zoomToFailed:"zoom-to-failed",startChangeViewMode:"start-change-view-mode",changeViewModeSuccess:"change-view-mode-success",toggleFullScreen:"toggle-full-screen",changeViewModeFailed:"change-view-mode-failed",pagesLayoutRedrawBegin:"pages-layout-redraw-begin",pageLayoutRedraw:"page-layout-redraw",pagesLayoutRedrawEnd:"pages-layout-redraw-end",copyTextSuccess:"copy-text-success",copyTextFailed:"copy-text-failed",tapPage:"tap-page",tapAnnotation:"tap-annotation",pressPage:"press-page",pressAnnotation:"press-annotation",pressText:"press-text",rightClickPage:"right-click-page",rightClickAnnotation:"right-click-annotation",doubleTapPage:"double-tap-page",doubleTapAnnotation:"double-tap-annotation",activeAnnotationBefore:"active-annotation-before",activeAnnotation:"active-annotation",activeAnnotationAfter:"active-annotation-after",panActiveAnnotation:"pan-active-annotation",doubleTapActiveAnnotation:"double-tap-active-annotation",contextMenuActiveAnnotation:"contextmenu-action-annotation",activeMultipleAnnotations:"active-multiple-annotations",unActiveAnnotation:"unactive-annotation",updateActiveAnnotation:"update-action-annotation",updateActionAnnotation:"update-action-annotation",removeActiveAnnotationBefore:"remove-action-annotation-before",removeActionAnnotationBefore:"remove-action-annotation-before",removeActiveAnnotationSuccess:"remove-action-annotation-success",removeActionAnnotationSuccess:"remove-action-annotation-success",removeActiveAnnotationFailed:"remove-action-annotation-failed",removeActionAnnotationFailed:"remove-action-annotation-failed",beforeSwitchStateHandler:"before-switch-state-handler",switchStateHandler:"switch-state-handler",deactiveStateHandler:"deactive-state-handler",afterSwitchStateHandler:"after-switch-state-handler",redactAnnotAllApplyed:"applyed-all-redaction",redactAnnotApplyed:"applyed-redaction",pageNumberChange:"page-number-change",beforeDocumentRotation:"before-document-rotation",afterDocumentRotation:"after-document-rotation",snapModeChanged:"snap-mode-changed",createPageAreaRenderer:"create-page-area-renderer",destroyPageAreaRenderer:"destroy-page-area-renderer",startUpdatePageAreaRenderer:"start-update-page-area-renderer",createSnapshotArea:"create-snapshot-area",updateSnapshotArea:"update-snapshot-area",stabilizedSnapshotArea:"stabilized-snapshot-area",switchPageAreaRenderer:"switch-page-area-renderer",fitWidthResizeViewport:"fit-width-resize-viewport",signatureFieldMouseLButtonDown:"signature-field-Lbutton-down",signatureFieldMouseLButtonUp:"signature-field-LButton-up",signatureFieldMouseEnter:"signature-field-mouse-enter",signatureFieldMouseExit:"signature-field-mouse-exit",visiblePagesRenderCompleted:"completed-render-visible-pages",marqueeZoomIn:"marquee-zoom-in",marqueeZoomOut:"marquee-zoom-out",inkSignAdded:"inkSign-added",inkSignDeleted:"inkSign-deleted",changeReadSpeed:"changeReadSpeed",changeReadVolume:"changeReadVolume",pageMoved:"page-moved",pageRemoved:"page-removed",pageAdded:"page-added",customDataAdd:"custom-data-add",customDataImported:"custom-data-imported",customDataRemoved:"custom-data-removed",customDataUpdated:"custom-data-updated",distanceAnnotCreationStart:"distance-creation-start",perimeterAnnotCreationStart:"perimeter-creation-start",updateDistanceAnnot:"update-distance-annot",distanceAnnotCreationEnd:"distance-creation-end",distanceAnnotCreationCancel:"distance-creation-cancel",drawingAnnotCreationStart:"drawing-creation-start",drawingAnnotCreationEnd:"drawing-creation-end",drawingAnnotCreationCancel:"drawing-creation-cancel",addEditImage:"add-edit-image",InkImageSelected:"ink-image-selected",checkTheSearch:"check-the-search",activeElementChanged:"active-element-changed",cancelCreatingDistance:"cancel-creating-measurement",completeCreatingDistance:"complete-creating-measurement",eraserSuccess:"eraser-success",addAnnotSuccess:"add-annot-success",cancelAddAnnot:"cancel-add-annot",globalAnnotFlagChanged:"global-annot-flag-changed",toolbarTabsClicked:"toolbar-tabs-clicked",sideBarChanged:"sidebar-changed",showWhatsNew:"show-whats-new",disableScroll:"disable-scroll",enableScroll:"enable-scroll",updateScrollableStatus:"update-scrollable-status",selectText:"select-text",changeEnableJS:"change-enable-js",toggleEngineSr2JrSuccess:"toggle-engine-sr-to-jr-success",iconInited:"iconInited",iconAdded:"iconAdded",iconRemoved:"iconRemoved",annotationPermissionChanged:"annotation-premission-changed",startScrollingPage:"pdfui-start-scrolling-page",scrollingPage:"pdfui-scrolling-page",endScrollingPage:"pdfui-end-scrolling-page",designerAssistantStatusChanged:"form-designer-assistant-status-changed",mouseEnter:"mouse-enter",mouseLeave:"mouse-leave",setFromFieldHighlight:"set_form_field_highlight",AddFontMaps:"set_font_map",thumbnailClicked:"thumbnail-clicked",layerActionActived:"layer-action-actived",redeModeShowSidebar:"rede-mode-show-sidebar",gridToggle:"grid-toggle",snapGridToggle:"snap-grid-toggle",toggleCollaborationMode:"toggleCollaborationMode",findReplaceDialogVisibleChange:"find-replace-dialog-visible-change",showAllComments:"show-all-comments",hideAllComments:"hide-all-comments",focusOnControl:"focus-on-control",blurFromObject:"blur-from-object",documentWillPrint:"document-will-print",documentDidPrint:"document-did-print",documentWillSave:"document-will-save",documentDidSave:"document-did-save",verifyDocSignatureEvent:"verify-doc-signature",verifySignatureEvent:"verify-signature",clearSignatureEvent:"clear-signature",viewSignedVersionDocEvent:"view-signed-version",showFieldPropertiesEvent:"show-field-properties",showSignatureVerifyInfoEvent:"show-signature-tusted-info",compareSignedVersionEvent:"compare-signed-version",showCompareSignedVersionResultEvent:"show-compare-signed-version-result",eSignCnShowMultiPageStamp:"eSignCnShowMultiPageStamp",eSignCNAddDateStamp:"eSignCNAddDateStamp",eSignCNCloseStamp:"eSignCNCloseStamp",eSignCNChangePagingSeal:"eSignCNChangePagingSeal",eSignCNOpenProcessSeal:"eSignCNOpenProcessSeal",eSignCnApply:"eSignCnApply",eSignCNShowOfflineResult:"eSignCNShowOfflineResult",eSignCnExit:"eSignCnExit",tapField:"tap-field",tapGraphicsObject:"tap-graphics-object",spawnPageSuccess:" spawn-page-success",progressChanged:"progress-changed",togglePageContextMenu:"toggle-page-contextmenu",beforeRenderingVisiblePages:"before-rerendering-visible-pages",afterRenderingVisiblePages:"after-rerendering-visible-pages",localFontLoaded:"local-font-loaded",willToggleAutoScroll:"will-toggle-auto-scroll",showLoading:"show-loading",changeLanguageSuccess:"change-language-success"},i);var a=n(4099),o=function(e){return e[e.FIRST_CHILD=0]="FIRST_CHILD",e[e.LAST_CHILD=1]="LAST_CHILD",e[e.PREVIOUS_SIBLING=2]="PREVIOUS_SIBLING",e[e.NEXT_SIBLING=3]="NEXT_SIBLING",e[e.FIRST_SIBLING=4]="FIRST_SIBLING",e[e.LAST_SIBLING=5]="LAST_SIBLING",e}({}),s=a.cx},6076:(e,t,n)=>{"use strict";n.d(t,{G:()=>s});var r=n(9227),i=n(7424),a=n(5843),o=n(9256),s=function(){function e(t){(0,r._)(this,e),this.originfn=t,this.beforeHooks=[],this.afterHooks=[],this.thrownHooks=[],this.aroundHooks=[]}return(0,i._)(e,[{key:"before",value:function(e){return"function"==typeof e&&this.beforeHooks.push(e),this}},{key:"after",value:function(e){return"function"==typeof e&&this.afterHooks.push(e),this}},{key:"thrown",value:function(e){return"function"==typeof e&&this.thrownHooks.push(e),this}},{key:"around",value:function(e){return"function"==typeof e&&this.aroundHooks.push(e),this}},{key:"proxy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.before,n=e.after,r=e.thrown,i=e.around;return this.before(t),this.after(n),this.thrown(r),this.around(i),this}},{key:"extract",value:function(){var e=this,t=e.beforeHooks,n=e.afterHooks,r=e.thrownHooks,i=e.aroundHooks,o=e.originfn;function s(){for(var e=this,i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];t.forEach(function(t){return t.call(e,s)});try{var u=o.apply(this,s);return(0,a._)(u,Promise)?(u.then(function(t){n.forEach(function(n){return n.call(e,t,s)})}),u.catch(function(t){r.forEach(function(n){return n.call(e,t,s)})})):n.forEach(function(t){return t.call(e,u,s)}),u}catch(t){r.length,r.forEach(function(n){return n.call(e,t,s)})}}return s.origin=o,i.reduceRight(function(e,t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t(this,e,r)}},s)}}],[{key:"on",value:function(t){if("function"==typeof t)return new e(t);if((0,a._)(t,e))return new e(t.extract());throw new TypeError("Unexpected type: ".concat(void 0===t?"undefined":(0,o._)(t)))}}]),e}()},896:(e,t,n)=>{"use strict";n.d(t,{J:()=>s,Z:()=>c});var r=n(9227),i=n(7424),a=n(5843),o=n(5347),s=function(){function e(){(0,r._)(this,e),this.destroyHooks=[],this.isDestroyed=!1}return(0,i._)(e,[{key:"ownsTo",value:function(t){if(!(0,a._)(t,e))throw new Error("Cannot owns to non Disposable instance");var n=t.addDestroyHook(this);this.addDestroyHook(n)}},{key:"addDestroyHook",value:function(){for(var t,n=this,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(t=this.destroyHooks).push.apply(t,(0,o._)(i.filter(function(t){if("function"!=typeof t&&!(0,a._)(t,e))throw new Error("[Illegal Argument] Invalid destroy hook:".concat(t,", It's not a function!"));return!0}))),function(){i.forEach(function(e){var t=n.destroyHooks.indexOf(e);t>-1&&n.destroyHooks.splice(t,1)})}}},{key:"destroy",value:function(){this.destroyHooks.slice(0).forEach(function(t){try{"function"==typeof t?t():(0,a._)(t,e)&&t.destroy()}catch(e){throw e}}),this.destroyHooks=[],this.isDestroyed=!0}},{key:Symbol.dispose,value:function(){this.destroy()}}]),e}();const c=s},7994:(e,t,n)=>{"use strict";n.d(t,{eE:()=>y,tq:()=>m});var r=n(5843),i=(function(){if("undefined"==typeof window)return!1;var e=" -webkit- -moz- -o- -ms- ".split(" ");!!("ontouchstart"in window||navigator.maxTouchPoints||window.DocumentTouch&&(0,r._)(document,DocumentTouch))||function(e){!!window.matchMedia&&window.matchMedia(e).matches}(["(",e.join("touch-enabled),("),"heartz",")"].join(""))}(),navigator.userAgent.toLowerCase()),a="desktop"===globalThis.__FOXITWEBSDK_DEVICE_TYPE__,o="mobile"===globalThis.__FOXITWEBSDK_DEVICE_TYPE__,s="tablet"===globalThis.__FOXITWEBSDK_DEVICE_TYPE__,c=a||o||s,u=(/macintosh|mac os x/.test(i),/ipad|iphone|ipod/.test(i)),l=(/iphone/.test(i),/ipad/.test(i),/ipod/.test(i),/android/.test(i)),d=/blackberry/.test(i),h=/webos/.test(i),f=/silk|kindle/.test(i),g=/aliapp/.test(i),p=/teamsmobile-android/.test(i),v=c?s:!g&&/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(i),m=c?o:(!v||p)&&(/mobile/.test(i)||u||l||d||h||f),_=(!/(MI(.*|\s*)PAD).*/i.test(i)&&/MI(\s+|\d+?|HM|xiaomi).*/i.test(i),/HUAWEI/i.test(navigator.userAgent),/Linux/i.test(i)),y=(!_&&/Windows(\s+NT)?/i.test(i),/MacIntosh|(mac os)/i.test(i));/(cros\s|chromebook)/i.test(i)},8942:(e,t,n)=>{"use strict";n.d(t,{Q:()=>a});var r=n(9256),i={"[object Array]":"array","[object Boolean]":"boolean","[object Date]":"date","[object Error]":"error","[object Function]":"function","[object Number]":"number","[object Object]":"object","[object RegExp]":"regexp","[object String]":"string"};function a(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o=!0;"boolean"==typeof e&&(o=e,e=n[0],n=n.slice(1)),(null===e||"object"!==(void 0===e?"undefined":(0,r._)(e))&&"function"!=typeof e)&&(e={});for(var c=0,u=n.length;c<u;c++){var l=n[c];if(null!=l)for(var d in l){var h=e[d],f=l[d];if(e!==f){var g=void 0;if(o&&f&&(s(f)||(g=Array.isArray(f)))){var p=void 0;g?(g=!1,p=h&&Array.isArray(h)?h:[]):p=h&&s(h)?h:{},e[d]=a(o,p,f)}else void 0!==f&&(e[d]=f)}}}return e}function o(e,t){return null!=e&&{}.hasOwnProperty.call(e,t)}function s(e){if(!e||"object"!==function(e){if(null===e)return"null";switch(void 0===e?"undefined":(0,r._)(e)){case"object":case"function":return i[Object.prototype.toString(e)]||"object"}return void 0===e?"undefined":(0,r._)(e)}(e)||e.nodeType||null!=e&&e==e.window)return!1;if(e.constructor&&!o(e,"constructor")&&!o(e.constructor.prototype,"isPrototypeOf"))return!1;var t=void 0;for(t in e);return void 0===t||o(e,t)}},4028:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r="unique_"+Date.now(),i=0;const a=function(e){return[e||"",r,i++].join("_")}},8803:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(9227),i=n(7424),a={},o="__lazy__";const s=function(){function e(){(0,r._)(this,e)}return(0,i._)(e,null,[{key:"properties",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var r in n){var i=n[r];"function"==typeof i&&e.property(t,r,i)}}},{key:"property",value:function(t,n,r){var i=a;Object.getOwnPropertyDescriptor(t,o)||Object.defineProperty(t,o,{value:{},enumerable:!1,configurable:!1});var s=t[o][n]||{};t[o][n]=s,s.initialized=!1;var c=!1;Object.defineProperty(t,n,{get:function(){if(!s.initialized){if(c)throw new Error("The lazy property is not initialized and cannot be accessed at this time");c=!0;try{i=r()}catch(e){throw c=!1,e}s.initialized=!0,Promise.resolve().then(function(){(s.callbacks||[]).forEach(function(e){e(i)})}),c=!1}return i},enumerable:!0,configurable:!0});var u=function(){e.release(t,n)};return"function"===t.addDestroyHook&&t.addDestroyHook(u),u}},{key:"value",value:function(t){var n="lazy_variable_"+Math.ceil(Math.random()*Date.now()).toString(34),r={};return e.property(r,n,t),{reset:function(){return e.reset(r,n)},get value(){return r[n]},get initialized(){return e.isPropertyIntialized(r,n)}}}},{key:"loadProperty",value:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);if(n&&n.get)return n.get.call(e)}},{key:"release",value:function(e,t){o in e&&!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&delete e[o][t],Object.defineProperty(e,t,{get:function(){},enumerable:!1,configurable:!0})}},{key:"reset",value:function(e,t){var n=e[o];if(n){var r=n[t];r&&(r.initialized=!1)}}},{key:"isPropertyIntialized",value:function(e,t){var n=e[o];return!!(n&&n[t]&&n[t].initialized)}},{key:"hasProperty",value:function(e,t){var n=e[o];return!(!n||!(t in n))}},{key:"notNullProperty",value:function(t,n,r){return e.property(t,n,function(){var i=r();return null==i&&e.reset(t,n),i})}},{key:"get",value:function(t,n,r){e.isPropertyIntialized(t,n)&&r(t[n])}},{key:"onInitialized",value:function(t,n,r){if(e.isPropertyIntialized(t,n))return r(t[n]),function(){};var i=t[o][n]||{};return t[o][n]=i,i.callbacks=i.callbacks||[],i.callbacks.push(r),function(){var e=i.callbacks.indexOf(r);e>-1&&i.callbacks.splice(e,1)}}}]),e}()},4221:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(9227),i=n(7424),a=n(6574);const o=function(){function e(){(0,r._)(this,e)}return(0,i._)(e,[{key:"print",value:function(e,t){(0,a.Z)(e,t)}}]),e}()},5501:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(9227),i=n(7424),a=n(9256),o=n(3181);const s=function(){function e(){(0,r._)(this,e)}return(0,i._)(e,[{key:"format",value:function(e,t,n){var r,i=this,o=(new Error).stack;o&&(r="\n  "+o.split("\n").pop().trim());return[{type:"string",style:"color: ".concat(this.levelColor(t),";"),value:"[".concat(this.levelText(t),"]")},{type:"string",style:"color: magenta",value:"{".concat(e,"}")}].concat(n.map(function(e){return null==e?{type:void 0===e?"undefined":(0,a._)(e),style:"color: megenta;font-weight: bold",value:e+""}:"string"==typeof e?{type:void 0===e?"undefined":(0,a._)(e),style:"color: ".concat(i.levelColor(t)),value:e}:{type:void 0===e?"undefined":(0,a._)(e),value:e}})).concat({type:"string",style:"color: grey;",value:r})}},{key:"levelColor",value:function(e){switch(e){case o.jp:return"blue";case o.si:return"green";case o.RD:return"#FCDCA0";case o.Mk:return"red"}return"#000"}},{key:"levelText",value:function(e){switch(e){case o.jp:return"DEBUG";case o.si:return"INFO";case o.RD:return"WARN";case o.Mk:return"ERROR"}return"UNKNOWN LEVEL"}}]),e}()},9022:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(4691),i=n(9227),a=n(7424),o=n(5467),s=n(5347),c=n(3181);const u=function(e){function t(){return(0,i._)(this,t),(0,r._)(this,t,arguments)}return(0,o._)(t,e),(0,a._)(t,[{key:"print",value:function(e,t){var n=e.map(function(e){return"string"!==e.type?" %o":" %c"+e.value}).join("").trim(),r=e.map(function(e){return"string"===e.type?e.style:e.value});switch(r.splice(0,0,n),t){case c.jp:var i;(i=console).debug.apply(i,(0,s._)(r));break;case c.si:var a;(a=console).info.apply(a,(0,s._)(r));break;case c.RD:var o;(o=console).warn.apply(o,(0,s._)(r));break;case c.Mk:var u;(u=console).error.apply(u,(0,s._)(r));break;default:var l;(l=console).log.apply(l,(0,s._)(r))}}}]),t}(n(4221).Z)},2919:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>c});var r=n(9227),i=n(7424),a=n(3181),o=n(2446),s=function(){function e(t,n,i){(0,r._)(this,e),this.appender=t,this.layout=n,this.module=i,this.logOff=!1}return(0,i._)(e,[{key:"getMinLevel",value:function(){return void 0===this.minLevel?o.vc.logLevel:this.minLevel}},{key:"toggle",value:function(e){this.logOff="boolean"==typeof e?e:!this.logOff}},{key:"setLevel",value:function(e){this.minLevel=e}},{key:"doLog",value:function(e,t){if(!this.isLogOff(e)){var n=this.layout.format(this.module,e,t);this.appender.print(n,e)}}},{key:"log",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.doLog(e,n)}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.doLog(a.jp,t)}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.doLog(a.si,t)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.doLog(a.RD,t)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.doLog(a.Mk,t)}},{key:"isLogOff",value:function(e){return this.logOff||o.vc.logOff||e<this.getMinLevel()}}]),e}();const c=s},2862:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p,m:()=>g});var r=n(9227),i=n(7424),a=n(5843),o=n(3551),s=n(2919),c=n(9022),u=n(5501),l=n(6677),d=n(4221),h=n(2446),f={},g=function(){function e(){(0,r._)(this,e)}return(0,i._)(e,null,[{key:"toggleLogger",value:function(e){(0,h.oo)(e)}},{key:"setLogLevel",value:function(e){(0,h.Ub)(e)}},{key:"getLogger",value:function(e){return f[e]=f[e]||this.createLogger(e)}},{key:"createLogger",value:function(e){var t,n;if("complex"===h.vc.logLayout)t=new u.Z;else t=new o.Z;return n=h.vc.logAppenders.map(function(e){switch(e){case"console":return new c.Z;case"websocket":return new WebsocketAppender}}).filter(function(e){return(0,a._)(e,d.Z)}),new s.ZP(new l.Z(n),t,e)}}]),e}();const p=g},6677:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(4691),i=n(9227),a=n(7424),o=n(5467);const s=function(e){function t(e){var n;return(0,i._)(this,t),(n=(0,r._)(this,t)).appenders=e||[],n}return(0,o._)(t,e),(0,a._)(t,[{key:"print",value:function(e,t){this.appenders.forEach(function(n){return n.print(e,t)})}}]),t}(n(4221).Z)},3551:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(9227),i=n(7424),a=n(9256),o=n(3181);const s=function(){function e(){(0,r._)(this,e)}return(0,i._)(e,[{key:"format",value:function(e,t,n){return[{type:"string",value:"[".concat(this.levelText(t),"]")},{type:"string",value:"{".concat(e,"}")}].concat(n.map(function(e){return null==e?{type:void 0===e?"undefined":(0,a._)(e),value:e+""}:{type:void 0===e?"undefined":(0,a._)(e),value:e}}))}},{key:"levelText",value:function(e){switch(e){case o.jp:return"DEBUG";case o.si:return"INFO";case o.RD:return"WARN";case o.Mk:return"ERROR"}return"UNKNOWN LEVEL"}}]),e}()},2446:(e,t,n)=>{"use strict";n.d(t,{Ub:()=>a,oo:()=>o,vc:()=>i});var r=n(3181),i={logLevel:function(e){switch(e){case"debug":return r.jp;case"info":return r.si;case"warn":return r.RD;default:return r.Mk}}("warn"),logLayout:"complex",logAppenders:["console"]||0,logOff:!1,setLogLevel:a,toggleLogOff:o};function a(e){switch(e){case r.jp:case r.si:case r.RD:case r.Mk:i.logLevel=e}}function o(e){i.logOff="boolean"==typeof e?e:!i.logOff}},3181:(e,t,n)=>{"use strict";n.d(t,{Mk:()=>o,RD:()=>a,jp:()=>r,si:()=>i});var r=0,i=2,a=4,o=8},6861:(e,t,n)=>{"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]}n.d(t,{Z:()=>r})},6574:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";throw new Error("Method not implemented".concat(e?":"+e:""))}},8487:(e,t,n)=>{"use strict";Object.getOwnPropertyDescriptors||(Object.getOwnPropertyDescriptors=function(e){return Object.getOwnPropertyNames(e).reduce(function(t,n){return t[n]=Object.getOwnPropertyDescriptor(e,n),t},{})});var r=["isProxy","constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","apply","arguments","bind","call","caller",Symbol.hasInstance,"valueOf","__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__"];r.concat(["length","name","prototype"]),Date.now().toString(32)},2702:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(9227),i=n(7424),a=n(5347),o=n(5991),s=function(){function e(t){(0,r._)(this,e),(0,o._)(this,"pdf3D",void 0),this.pdf3D=t}return(0,i._)(e,[{key:"NotifyModelImportFailure",value:function(e,t){postMessage({workflow:"3D",type:"notifyModelImportFailure",msg:{isFromScript:e,failReason:t}})}}]),e}(),c=function(){function e(t){(0,r._)(this,e),this.pdfDoc=t;var n=this.engine=t.engine;this._m3DContext=new n.PDF3DContext(t.doc),this._annot3DCaches=[];var i=n.PDF3DEventHandlerProvider.implement(new s(this));this._m3DContext.Set3DEventHandlerProvider(i),this.hasCompositionProvider=!1,this.isDestroyed=!1}return(0,i._)(e,[{key:"render",value:function(){this.isDestroyed||(this._m3DContext.Update3D(),requestAnimationFrame(this.render.bind(this)))}},{key:"getCache",value:function(e){if(0===this._annot3DCaches.length)return null;var t=!0,n=!1,r=void 0;try{for(var i,a=this._annot3DCaches[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;for(var s in o)if(o.hasOwnProperty(s)){var c=o[s];if(c.offscreenCanvas.handle===e)return c}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}},{key:"setCanvas",value:function(e,t,n){this.canvas||(this.canvas={}),this.canvas[e]||(this.canvas[e]={}),this.canvas[e][t]=n}},{key:"getAnnot3D",value:function(e,t){var n,r=null===(n=this._annot3DCaches[e])||void 0===n?void 0:n[t];return r||(r=this._getAnnot3D(e,t),(this._annot3DCaches[e]=this._annot3DCaches[e]||{})[t]=r),r}},{key:"getMatchAnnot3DData",value:function(e,t){var n=this._m3DContext;if(!n||n.IsEmpty())return null;var r=this.pdfDoc.doc.GetPage(e);if(r.IsEmpty()||0===r.GetAnnotCount())return null;for(var i=n.GetPage3DAnnotArray(e),a=null,o=0;o<i.GetSize();o++){var s=(a=i.GetAt(o)).GetAnnotIndex(),c=r.GetAnnot(s);if(c.IsEmpty())a.delete();else{if(c.GetDict().GetObjNum()===t)return a;a.delete()}}return null}},{key:"_getAnnot3D",value:function(e,t){var n,r,i=this.engine,a=this._m3DContext;if(a&&!a.IsEmpty()){var o=this.getMatchAnnot3DData(e,t);if(o&&!o.IsEmpty()){var s=this.canvas[e][t]||(null===(n=this._annot3DCaches[e][t])||void 0===n?void 0:n.offscreenCanvas);if(!s)throw new Error("offscreenCanvas is null");var c={width:1,height:1,transferControlToOffscreen:function(){return s},appendChild:function(e){s=e}},u=i.Emval.toHandle(c),l=o.GetActivationState(),d=o.Get3DArtworkInstance(),h=o.GetRichMediaInstances(),f=[];d.IsEmpty()||h.Add(d);for(var g=0;g<h.GetSize();g++){for(var p=h.GetAt(g),v=i.Progressive.e_ToBeContinued;v==i.Progressive.e_ToBeContinued;)v=p.PrepareActivate(null);p.AllocAndActivateCanvasEmbedded(l,u),f.push(p),s&&s.handle&&(p.SetControllerTool(i.PDF3DControllerToolTag.e_ControllerToolTag_Rotate,s.handle),this.hasCompositionProvider&&(a.RequestUpdateForeground(s.handle),a.RequestUpdateBackground(s.handle)))}return this.canvas[e][t]=null,{offscreenCanvas:s||(null===(r=this._annot3DCaches[e][t])||void 0===r?void 0:r.offscreenCanvas),handle:u,annotData:o,richMediaInstances:h,richMediaInstanceList:f,handleObj:c,destroy:function(){h.delete(),d.delete(),o.delete(),f.forEach(function(e){e.delete()})}}}}}},{key:"destroyAnnot3D",value:function(e,t){var n,r=null===(n=this._annot3DCaches[e])||void 0===n?void 0:n[t];r&&(this._destroyAnnot3D(r),delete this._annot3DCaches[e][t])}},{key:"_destroyAnnot3D",value:function(e){e.destroy(),this.isDestroyed=!0}},{key:"destroy",value:function(){if(this._annot3DCaches.length){var e=!0,t=!1,n=void 0;try{for(var r,i=this._annot3DCaches[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];this._destroyAnnot3D(s)}}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this._annot3DCaches=[]}this._m3DContext.delete()}},{key:"setAnnot3DTool",value:function(e,t,n){var r,i=null===(r=this._annot3DCaches[e])||void 0===r?void 0:r[t];if(i)for(var a=i.offscreenCanvas,o=i.richMediaInstanceList,s=this.engine.PDF3DControllerToolTag,c=[s.e_ControllerToolTag_Rotate,s.e_ControllerToolTag_Spin,s.e_ControllerToolTag_Pan,s.e_ControllerToolTag_Zoom][n]||s.e_ControllerToolTag_Rotate,u=0;u<o.length;u++){o[u].SetControllerTool(c,a.handle)}}},{key:"process3DMouseEvent",value:function(e,t,n,r){var i,a=null===(i=this._annot3DCaches[e])||void 0===i?void 0:i[t];if(a){var o=this._m3DContext,s=this.engine,c=a.offscreenCanvas,u=new s.EmscriptenMouseEventStruct;u.Set(n.timeStamp,n.screenX,n.screenY,n.clientX,n.clientY,n.ctrlKey,n.shiftKey,n.altKey,n.metaKey,n.button,n.buttons,n.movementX,n.movementY,n.targetX,n.targetY,n.canvasX,n.canvasY),o.OnProcessMouseEvent(c.handle,{value:r},u)}}},{key:"process3DMouseWheelEvent",value:function(e,t,n,r){var i,a=null===(i=this._annot3DCaches[e])||void 0===i?void 0:i[t];if(a){var o=this._m3DContext,s=this.engine,c=a.offscreenCanvas,u=new s.EmscriptenMouseEventStruct;u.Set(n.timeStamp,n.screenX,n.screenY,n.clientX,n.clientY,n.ctrlKey,n.shiftKey,n.altKey,n.metaKey,n.button,n.buttons,n.movementX,n.movementY,n.targetX,n.targetY,n.canvasX,n.canvasY);var l=new s.EmscriptenWheelEventStruct;l.Set(u,parseInt(n.deltaX),parseInt(n.deltaY),parseInt(n.deltaZ),parseInt(n.deltaMode)),o.OnProcessWheelEvent(c.handle,{value:r},l)}}},{key:"LoadAnnot3DBitmap",value:function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=null===(r=this._annot3DCaches[e])||void 0===r?void 0:r[t];this.relocate(e,t,n,i),a||this.render()}},{key:"relocate",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=this.getAnnot3D(e,t,n);if(i){var a=this._m3DContext,o=i.offscreenCanvas.handle,s=n.right-n.left,c=n.bottom-n.top,u=0,l=0,d=s,h=c;if(r/90%2){d=c,h=s;var f=Math.max(s,c)/Math.min(s,c);if(s>c){var g=c*f;c=s,s=g}else{var p=s*f;s=c,c=p}u=(s-d)/2,l=(c-h)/2}var v=new this.engine.CFX_FloatRect(u,l,d,h);i.handleObj.width=s,i.handleObj.height=c,a.RelocateInPlace(o,v)}}},{key:"setDefaultView",value:function(e,t){var n,r=null===(n=this._annot3DCaches[e])||void 0===n?void 0:n[t];if(r)for(var i=r.richMediaInstances,a=r.offscreenCanvas,o=0;o<i.GetSize();o++){var s=i.GetAt(o);s.SetDefaultView(a.handle),s.delete()}}},{key:"pageRangeTwoDimensionToOne",value:function(e){return JSON.parse(JSON.stringify(e)).reduce(function(e,t){if(2===t.length){for(var n=[],r=t[0];r<t[1];r++)n.push(r);t=n}return e.concat(t)},[])}},{key:"update3DCacheAfterMovePages",value:function(e,t,n){for(var r,i=this,o=0;o<n;o++)this._annot3DCaches[o]||(this._annot3DCaches[o]={});var s=this.pageRangeTwoDimensionToOne(e).sort(function(e,t){return e-t}),c=s.map(function(e){return i._annot3DCaches[e]});s.sort(function(e,t){return t-e}).forEach(function(e){i._annot3DCaches.splice(e,1)}),(r=this._annot3DCaches).splice.apply(r,[t,0].concat((0,a._)(c)))}},{key:"update3DCache",value:function(e,t,n,r){if(r)if(n){var i=this._annot3DCaches[t];delete this._annot3DCaches[t],this.update3DCache(e+1,t,n,!1),i&&(this._annot3DCaches[e]=i)}else{var a=this._annot3DCaches[e];delete this._annot3DCaches[e],this.update3DCache(e,t-1,n,!1),a&&(this._annot3DCaches[t]=a)}else if(n)for(var o=t;o>=e;o--)this._annot3DCaches[o-1]&&(this._annot3DCaches[o]=this._annot3DCaches[o-1],delete this._annot3DCaches[o-1]);else for(var s=e;s<=t;s++)s<0||!this._annot3DCaches[s+1]||(this._annot3DCaches[s]=this._annot3DCaches[s+1],delete this._annot3DCaches[s+1])}},{key:"splice3DCache",value:function(e,t,n,r){var i=this._annot3DCaches,a=i[e];(i.splice(e,1),n)?u(i,e<t?t-1:t,a):u(i,r+1,a);return e}}]),e}();function u(e,t,n){t>e.length?e[t]=n:e.splice(t,0,n)}},1830:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(9227),i=n(7424),a=n(3023),o=n(843),s=n(821),c=n(8851),u=function(){function e(t,n){(0,r._)(this,e),this.engine=t,this.doc=n,this.attachments=new t.Attachments(n,new t.PDFNameTree(n,{value:3}))}return(0,i._)(e,[{key:"addFileSpec",value:function(e){var t=s.Z.createFileEx(this.engine,this.doc,null,e.data,(0,a.u)(e.data));return t?(this.setFileSpecProperity(t,e),t):null}},{key:"setFileSpecProperity",value:function(e,t){var n,r,i=this.engine;t.name&&t.name.length>0&&(n=new i.WString(t.name),e.SetFileName(n),n.delete()),t.description&&t.description.length>0&&(n=new i.String(t.description),e.SetDescription(n),n.delete()),t.creationDate?e.SetCreationDateTime(o.Z.ToDateTime(i,t.creationDate)):(r=o.Z.ToDateTime(i,Date.now()),e.SetCreationDateTime(r)),t.modificationDate?e.SetModifiedDateTime(o.Z.ToDateTime(i,t.modificationDate)):(r||(r=o.Z.ToDateTime(i,Date.now())),e.SetModifiedDateTime(r))}},{key:"addEmbeddedFileEx",value:function(e,t){if(!(e&&0!==e.length||(e=t.name)&&0!==e.length))return!1;if(-1!==this.getEmbeddedFileNames().indexOf(e))return!1;var n=this.engine,r=this.addFileSpec(t);if(!r)return!1;var i=new n.WString(e),a=this.attachments.AddEmbeddedFile(i,r);return i.delete(),a}},{key:"addEmbeddedFile",value:function(e,t){var n=this.engine,r=this.doc,i=new n.FileSpec(r,r.GetIndirectObject(t));if(i.IsEmpty())return!1;var a=new n.WString(e),o=this.attachments.AddEmbeddedFile(a,i);return a.delete(),a=null,o}},{key:"setEmbeddedFileEx",value:function(e,t){if(-1===this.getEmbeddedFileNames().indexOf(e))return!1;var n=new this.engine.WString(e),r=this.attachments.GetEmbeddedFile(n);if(t.data&&!s.Z.createFileEx(this.engine,this.doc,r,t.data,(0,a.u)(t.data)))return!1;return this.setFileSpecProperity(r,t),n.delete(),!0}},{key:"setEmbeddedFile",value:function(e,t){var n=this.engine,r=this.doc;return!new n.FileSpec(r,r.GetIndirectObject(t)).IsEmpty()&&(!!this.removeEmbeddedFile(e)&&this.addEmbeddedFile(e,t))}},{key:"removeEmbeddedFile",value:function(e){var t=new this.engine.WString(e),n=this.attachments.RemoveEmbeddedFile(t);return t.delete(),t=null,n}},{key:"removeAllEmbeddedFiles",value:function(){return this.attachments.RemoveAllEmbeddedFiles()}},{key:"getEmbeddedFileNames",value:function(){for(var e=this.attachments,t=e.GetCount(),n=[],r=0;r<t;r++){var i=e.GetKey(r).toString();n.push(i)}return n}},{key:"getEmbeddedFile",value:function(e,t){var n=new this.engine.WString(e),r=this.attachments.GetEmbeddedFile(n);if(n.delete(),r.IsEmpty())return null;var i=new s.Z(r,t),a=i.getFileName(),o=i.getCreationDateTime();o&&(o=(0,c.B)(o));var u=r.GetModifiedDateTime();u=u.IsValid()?(0,c.B)(u):null;var l=i.getDescription();return i.getStreamEx().then(function(e){return i=null,{name:a,creationDate:o,modificationDate:u,description:l,data:e}})}}]),e}()},2925:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r,i,a=n(9227),o=n(7424),s=n(9256),c="undefined",u=("undefined"==typeof URL?"undefined":(0,s._)(URL))===c?("undefined"==typeof webkitURL?"undefined":(0,s._)(webkitURL))===c?null:webkitURL:URL;("undefined"==typeof FileReaderSync?"undefined":(0,s._)(FileReaderSync))!==c?(r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.size;return(new FileReaderSync).readAsArrayBuffer(e.slice(t,t+n))},i=function(e){return new Blob([e])}):u?(r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.size,r=u.createObjectURL(e),i=new XMLHttpRequest;i.open("GET",r,!1),i.responseType="arraybuffer",i.send(null);var a=i.status;return a>=200&&a<300||304===a?(u.revokeObjectURL(r),(e=i.response).slice?e.slice(t,t+n):new Uint8Array(e,t,n).buffer):null},i=function(e){return new Blob([e])}):(r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength;return e.slice?e.slice(t,n):new Uint8Array(e,t,n).buffer},i=function(e){return e});const l=function(){function e(t){(0,a._)(this,e),this.size=t,this.blockSize=8388608,this.blocks=[],this.loadingBlocks=[],this.blobCache=[],this.loadingCache={}}return(0,o._)(e,[{key:"push",value:function(e,t){for(var n=this.blocks,r=Math.max(0,e),i=Math.min(e+t,this.size),a=[],o=n.length;o--;){var s=n[o],c=s[0],u=s[1];c<=i&&u>=r&&(r=Math.min(r,c),i=Math.max(i,u),a.push(o))}for(var l=0,d=a.length;l<d;l++)n.splice(a[l],1);n.push([r,i])}},{key:"avail",value:function(e,t){for(var n=e,r=e+t,i=this.blocks,a=i.length;a--;){var o=i[a],s=o[0],c=o[1];if(s<=n&&c>=r)return!0}return!1}},{key:"full",value:function(){1===this.blocks.length&&0===this.blocks[0][0]&&(this.blocks[0][1],this.size)}},{key:"checkLoadBuffer",value:function(e,t){for(var n=e,r=e+t,i=this.loadingBlocks,a=i.length;a--;){var o=i[a],s=o[0],c=o[1];if(s<=n&&c>=r)return!0}return!1}},{key:"loadingBuffer",value:function(e,t){for(var n=this.loadingBlocks,r=Math.max(0,e),i=Math.min(e+t,this.size),a=[],o=n.length;o--;){var s=n[o],c=s[0],u=s[1];c<=i&&u>=r&&(r=Math.min(r,c),i=Math.max(i,u),a.push(o))}for(var l=0,d=a.length;l<d;l++)n.splice(a[l],1);n.push([r,i])}},{key:"addBuffer",value:function(e,t,n){for(var a=new Uint8Array(n),o=this.blockSize,s=this.blobCache,c=e%o,u=0,l=o-c,d=Math.floor(e/o),h=Math.floor((e+t)/o);d<=h;d++){var f=s[d],g=void 0;f&&(g=r(f)),g||(g=new ArrayBuffer(o));var p=new Uint8Array(g);p.set(a.slice(u,l),c),s[d]=i(p),c=0,u+=o,l+=o}this.push(e,t)}},{key:"getBuffer",value:function(e,t){e+t>this.size&&(t=this.size-e);for(var n=new ArrayBuffer(t),i=this.blockSize,a=this.blobCache,o=Math.floor(e/i),s=Math.floor((e+t)/i),c=e%i,u=Math.min(t,i-c),l=0,d=u,h=o,f=s;h<=f;h++){var g=a[h],p=void 0;if(g&&(p=r(g,c,u)),!p)return null;new Uint8Array(n,l,d-l).set(new Uint8Array(p)),c=0,t-=u,l+=u,d+=u=Math.min(t,i-c)}return n}},{key:"_getBufferCacheKey",value:function(e,t){return[e,t].join("-")}},{key:"destroy",value:function(){for(var e=this.blobCache.length;e--;)delete this.blobCache[e]}}]),e}()},3023:(e,t,n)=>{"use strict";n.d(t,{_:()=>a,u:()=>i});var r=n(5843),i=function(e){return(0,r._)(e,Blob)?(e=new Blob([e]),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.size;return(new FileReaderSync).readAsArrayBuffer(e.slice(t,t+n))}):(ArrayBuffer.isView(e)&&(e=e.buffer),e.slice?function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.byteLength;return e.slice(t,t+n)}:function(t,n){return new Uint8Array(e,t,n).buffer})},a=function(e){return(new FileReaderSync).readAsArrayBuffer(e.slice(0,e.size))}},2711:(e,t,n)=>{"use strict";n.d(t,{_:()=>r});n(2863),n(3850),n(1301),n(1696),n(7731),n(5318);var r={e_KeyNameSigner:"signer",e_KeyNameLocation:"location",e_KeyNameReason:"reason",e_KeyNameContactInfo:"contact",e_KeyNameDN:"DN",e_KeyNameText:"text"}},6205:(e,t,n)=>{"use strict";n(2711),n(3850),n(6306)},8043:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(9227),i=n(7424),a=n(3850),o=function(){function e(t){(0,r._)(this,e),this.pdfDoc=t,this.doc=t.doc,this.engine=t.engine,this.c_articles=new t.engine.Articles(this.doc),this.articles=this.getArticles()}return(0,i._)(e,[{key:"destroy",value:function(){this.c_articles.delete(),this.c_articles=null,this.articles=null}},{key:"getArticles",value:function(){this.engine;for(var e=this.c_articles.GetArticles(),t=e.GetSize(),n=[],r=0;r<t;r++){var i=e.GetAt(r),a=new s(this.pdfDoc,i,r);n.push(a)}return n}},{key:"toJson",value:function(){for(var e=this.articles,t=[],n=0;n<e.length;n++){var r=e[n];t.push(r.toJson())}return t}},{key:"updateBeadRect",value:function(e,t,n){return this.getThreadInfo(e).getBeadInfo(t).update({rect:n})}},{key:"getThreadInfo",value:function(e){var t,n=0;for(this.engine;n<this.articles.length;n++){var r=this.articles[n];if(r.c_thread.GetDict().GetObjNum()===e){(t=r).index=n;break}}return t}},{key:"insertThread",value:function(e){var t=e.author,n=e.keywords,r=e.subject,i=e.title,a=new this.engine.Thread(this.doc),o=this.articles.length,c=this.c_articles.InsertArticle(o,a);if(c){var u=new s(this.pdfDoc,a,o);c=u.update({author:t,keywords:n,subject:r,title:i}),this.articles.push(u)}return c}},{key:"updateThread",value:function(e){return this.getThreadInfo(e.objNum).update(e)}},{key:"removeThread",value:function(e){var t=this.getThreadInfo(e);if(!t)return!1;var n=t.index,r=(t.thread,this.c_articles.RemoveArticle(n));return r&&this.articles.splice(n,1),r}},{key:"mergeThread",value:function(e,t){var n=this.getThreadInfo(e),r=this.getThreadInfo(t);return n.children.reverse().forEach(function(e){var t=e.toJson(),n=t.pageIndex,i=t.rect;r.insertBead(n,i,0)}),r.toJson()}},{key:"insertBead",value:function(e,t,n,r){return this.getThreadInfo(t).insertBead(e,n,r)}},{key:"removeBead",value:function(e,t){return this.getThreadInfo(e).removeBead(t)}}]),e}(),s=function(){function e(t,n,i){(0,r._)(this,e),this.pdfDoc=t,this.doc=t.doc,this.engine=t.engine,this.c_thread=n,this.children=this.getChildren(),this.index=i}return(0,i._)(e,[{key:"getChildren",value:function(){for(var e=this.c_thread.GetBeads(),t=e.GetSize(),n=[],r=0;r<t;r++){var i=e.GetAt(r),a=new c(this,i,r);n.push(a)}return n}},{key:"getThreadInfoJson",value:function(){var e=this.c_thread,t=e.GetDict().GetObjNum(),n=e.GetThreadInfo();return{objNum:t,author:n.author.toString(),keywords:n.keywords.toString(),subject:n.subject.toString(),title:n.title.toString()}}},{key:"toJson",value:function(){var e=this.getThreadInfoJson();return e.no=this.index+1,e.children=this.children.map(function(e){return e.toJson()}),e}},{key:"update",value:function(e){var t=e.author,n=e.keywords,r=e.subject,i=e.title,o=this.engine,s=this.c_thread,c=s.GetThreadInfo();void 0!==t&&(c.author=(0,a.Dp)(o,t)),void 0!==n&&(c.keywords=(0,a.Dp)(o,n)),void 0!==r&&(c.subject=(0,a.Dp)(o,r)),void 0!==i&&(c.title=(0,a.Dp)(o,i));var u=s.SetThreadInfo(c);return u?this.getThreadInfoJson():u}},{key:"getBeadInfo",value:function(e){var t,n=0;for(this.engine;n<this.children.length;n++){var r=this.children[n];if(r.c_bead.GetDict().GetObjNum()===e){(t=r).index=n;break}}return t}},{key:"insertBead",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=t.left,r=t.bottom,i=t.right,a=t.top,o=arguments.length>2?arguments[2]:void 0,s=this.engine,u=this.c_thread,l=new s.Bead(this.doc);void 0===o&&(o=this.children.length);var d=new c(this,l,o),h=d.update({pageIndex:e,rect:{left:n,bottom:r,right:i,top:a}}),f=u.InsertBead(o,l);return f&&(this.children.splice(o,0,d),this.children.forEach(function(e,t){e.index=t})),f?h:f}},{key:"removeBead",value:function(e){var t=this.getBeadInfo(e);if(!t)return!1;var n=t.index,r=this.c_thread.RemoveBead(n);return r&&(this.children.splice(n,1),this.children.forEach(function(e,t){e.index=t})),r}}]),e}(),c=function(){function e(t,n,i){(0,r._)(this,e);var a=t.pdfDoc;this.parentThread=t,this.pdfDoc=a,this.doc=a.doc,this.engine=a.engine,this.c_bead=n,this.index=i}return(0,i._)(e,[{key:"toJson",value:function(){var e=this.c_bead,t=e.GetBeadInfo(),n=[this.parentThread.index+1,this.index+1].join("-"),r=e.GetDict().GetObjNum(),i=t.page_index,a=t.rect;return{objNum:r,no:n,pageIndex:i,rect:{left:a.left,right:a.right,bottom:a.bottom,top:a.top}}}},{key:"update",value:function(e){var t=e.pageIndex,n=e.rect,r=this.engine,i=this.c_bead,a=i.GetBeadInfo();if(void 0!==t&&(a.page_index=t),void 0!==n){var o=n.left,s=n.bottom,c=n.right,u=n.top,l=r.CFX_FloatRect;a.rect=new l(o,s,c,u)}var d=i.SetBeadInfo(a);return d?this.toJson():d}}]),e}();const u=o},6142:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(9227),i=n(7424),a=n(5991),o=n(9256),s=n(776),c=n(6131),u=n(1606),l=n(7292),d=n(8843),h=n(1812),f=n(3850);const g=function(){function e(t,n,i,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:n;(0,r._)(this,e),this.doc=t,this.engine=t.engine,this.id=n,this.appBookmarkId=c,this.c_bookmark=i,this.c_doc=a,this.deep=o,this.parent=s,this.children=[],s?this.root=s.root:(this.root=this,this.bookmarkMap=new Map),this.root.bookmarkMap.set(this.appBookmarkId,this),this.updateInfo()}return(0,i._)(e,[{key:"getFormatedColor",value:function(){var e=this.c_bookmark;if(e.GetDict().HasKey((0,f.n5)(this.engine,"C"))){var t=e.GetColor();if(0!==t)return"#"+t.toString(16).substr(2)}}},{key:"updateInfo",value:function(){var e=this.c_bookmark;this.title=e.GetTitle().toString(),this.color=this.getFormatedColor();var t=this.c_bookmark.GetStyle();this.isItalic=!!(1&t),this.isBold=!!(2&t),this.dst=e.GetDestination(),this.dst.IsEmpty()?(this.pageIndex=null,this.pageTop=0,this.pageLeft=0,this.zoomMode=this.engine.ZoomMode.e_ZoomFitHorz,this.zoomFactor=0):(this.pageIndex=this.dst.GetPageIndex(this.c_doc),this.pageTop=this.dst.GetTop(),this.pageLeft=this.dst.GetLeft(),this.zoomMode=this.dst.GetZoomMode()||this.engine.ZoomMode.e_ZoomFitHorz,this.zoomFactor=this.dst.GetZoomFactor())}},{key:"updateDestination",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dst||this.c_bookmark.GetDestination();this.dst=e,e.IsEmpty()?(this.pageIndex=null,this.pageTop=0,this.pageLeft=0,this.zoomMode=this.engine.ZoomMode.e_ZoomFitHorz,this.zoomFactor=0):(this.pageIndex=e.GetPageIndex(this.c_doc),this.pageTop=e.GetTop(),this.pageLeft=e.GetLeft(),this.zoomMode=e.GetZoomMode(),this.zoomFactor=e.GetZoomFactor())}},{key:"destroy",value:function(){this.root.bookmarkMap.delete(this.appBookmarkId),this.dst.delete(),this.c_bookmark.delete(),this.children.forEach(function(e){return e.destroy()}),this.children=null,this.c_destination=null,this.c_doc=null,this.engine=null,this.c_bookmark=null}},{key:"removeChild",value:function(e){var t=this.children;for(var n in t){var r=t[n];if(r.id==e||r.appBookmarkId==e)return t.splice(n,1),r;var i=r.removeChild(e);if(i)return i}}},{key:"insert",value:function(t){var n,r=t.title,i=t.destination,a=t.color,c=t.style,u=t.newBookmarkId,l=this.engine.BookmarkPosition,d=l.values[t.relationship],h=new this.engine.WString(r||"");switch(d){case l.e_PosFirstChild:case l.e_PosPrevSibling:case l.e_PosNextSibling:n=this.c_bookmark.Insert(h,d);break;case l.e_PosLastChild:this.getChildren();var f=this.children,g=f[f.length-1];n=g?g.c_bookmark.Insert(h,l.e_PosNextSibling):this.c_bookmark.Insert(h,l.e_PosFirstChild);break;case l.e_PosFirstSibling:n=this.parent.c_bookmark.Insert(h,l.e_PosFirstChild);break;case l.e_PosLastSibling:this.parent.getChildren();var p=this.parent.children,v=p[p.length-1];n=v?v.c_bookmark.Insert(h,l.e_PosNextSibling):this.parent.c_bookmark.Insert(h,l.e_PosFirstChild)}(0,s.Z)(h);var m={destination:i,type:"TypeGoto"};"ZoomXYZ"===i.zoomMode&&(!isFinite(i.zoomFactor)||i.zoomFactor<0)&&(i.zoomFactor=0);var _=this.doc.JR.actionManager,y=_.create(this.c_doc,m.type);n.SetAction(y),_.get(y,this.c_doc,this.doc.JR).create(m);var S=this.deep,b=this.parent;d!==l.e_PosFirstChild&&d!==l.e_PosLastChild||(S=this.deep+1,b=this);var I=n.GetDict().GetObjNum(),A=I;"number"==typeof u&&(A=u);var P=new e(this.doc,I,n,this.c_doc,S,b,A),D=b.children.indexOf(this);switch(d){case l.e_PosFirstChild:this.children.unshift(P);break;case l.e_PosLastChild:this.children.push(P);break;case l.e_PosPrevSibling:b.children.splice(D,0,P);break;case l.e_PosNextSibling:b.children.splice(D+1,0,P);break;case l.e_PosFirstSibling:b.children.unshift(P);break;case l.e_PosLastSibling:b.children.push(P)}var E={};return a>=0&&(E.color=a),"object"!==(void 0===c?"undefined":(0,o._)(c))&&"number"!=typeof c||(E.style=c),Object.keys(E).length>0&&P.setProperty(E),P}},{key:"appendBookmarkTree",value:function(e){var t=this.insert({relationship:h.DE.LAST_CHILD,title:e.title,destination:e.destination,color:e.color,style:e.style,newBookmarkId:e.newBookmarkId});Array.isArray(e.children)&&e.children.forEach(function(e){t.appendBookmarkTree(e)})}},{key:"getBookmarkById",value:function(e){if(e==this.id||e===this.appBookmarkId)return this;var t=this.root.bookmarkMap;if(t&&t.has(e))return t.get(e);var n=this.children;for(var r in n){var i=n[r].getBookmarkById(e);if(i)return i}}},{key:"remove",value:function(){var e=this.c_doc.RemoveBookmark(this.c_bookmark);return this.destroy(),e}},{key:"getProperties",value:function(){var e=this.gsdkZoomModeToJsZoomMode(this.zoomMode);return{title:this.title,color:this.color,style:{bold:this.isBold,italic:this.isItalic},destination:{left:this.pageLeft,top:this.pageTop,pageIndex:this.pageIndex,zoomMode:e,zoomFactor:this.zoomFactor}}}},{key:"gsdkZoomModeToJsZoomMode",value:function(e){if(!e)return h.jI.ZoomFitHorz;var t,n=this.engine.ZoomMode;return(t={},(0,a._)(t,n.e_ZoomFitBBox.value,h.jI.ZoomFitBBox),(0,a._)(t,n.e_ZoomFitBHorz.value,h.jI.ZoomFitBHorz),(0,a._)(t,n.e_ZoomFitBVert.value,h.jI.ZoomFitBVert),(0,a._)(t,n.e_ZoomFitHorz.value,h.jI.ZoomFitHorz),(0,a._)(t,n.e_ZoomFitPage.value,h.jI.ZoomFitPage),(0,a._)(t,n.e_ZoomFitRect.value,h.jI.ZoomFitRect),(0,a._)(t,n.e_ZoomFitVert.value,h.jI.ZoomFitVert),(0,a._)(t,n.e_ZoomXYZ.value,h.jI.ZoomXYZ),t)[e.value]}},{key:"setProperty",value:function(e){var t=this.getProperties();if("object"===(0,o._)(e.style)){var n=e.style,r=n.italic,i=n.bold,a=r?d.ZN.italic:d.ZN.normal,s=i?d.ZN.bold:d.ZN.normal;e.style=a|s}for(var c in e)if("title"==c){var l=new this.engine.WString(e[c]);this.c_bookmark.SetTitle(l),l.delete(),this.title=this.c_bookmark.GetTitle().toString()}else if("style"==c&&"number"==typeof e[c]){this.c_bookmark.SetStyle(e[c]);var h=this.c_bookmark.GetStyle();this.isItalic=!!(1&h),this.isBold=!!(2&h)}else if("color"==c&&e[c]>=0)this.c_bookmark.SetColor(e[c]),this.color=this.getFormatedColor();else if("destination"==c){var f=e[c],g=u.Z.create(this.engine,this.c_doc,f);this.c_bookmark.SetDestination(g),this.updateDestination(g)}return{oldProperties:t,newProperties:this.getProperties()}}},{key:"toJson",value:function(){if(this.c_bookmark.IsEmpty())return[];var t=[];this.children=[];var n={};if(this.c_bookmark.HasChild())for(var r=this.c_bookmark.GetFirstChild();!r.IsEmpty();){var i=r.GetDict().GetObjNum();if(n[i])break;n[i]=!0;var a=new e(this.doc,i,r,this.c_doc,this.deep+1,this);r=r.GetNextSibling(),t.push(a.toJson()),this.children.push(a)}return{id:this.id,deep:this.deep,title:this.title,color:this.color,isBold:this.isBold,isItalic:this.isItalic,children:t,page:this.pageIndex,top:this.pageTop,left:this.pageLeft}}},{key:"getInfo",value:function(){return{id:this.appBookmarkId,deep:this.deep,title:this.title,color:this.color,style:{bold:this.isBold,italic:this.isItalic},page:this.pageIndex,top:this.pageTop,left:this.pageLeft,zoomFactor:this.zoomFactor,zoomMode:this.gsdkZoomModeToJsZoomMode(this.zoomMode),hasChild:this.c_bookmark.HasChild()}}},{key:"getChildren",value:function(){var t=[];if(this.c_bookmark.IsEmpty())return t;if(this.c_bookmark.HasChild()){for(var n=this.children.reduce(function(e,t){return e.set(t.id,t),e},new Map),r=[],i=this.c_bookmark.GetFirstChild();!i.IsEmpty();){var a=i.GetDict().GetObjNum(),o=n.get(a);o?(o.updateInfo(),n.delete(a)):o=new e(this.doc,i.GetDict().GetObjNum(),i,this.c_doc,this.deep+1,this),i=i.GetNextSibling(),t.push(o.getInfo()),r.push(o)}n.forEach(function(e){e.destroy()}),this.children=r}return t}},{key:"moveTo",value:function(e,t){var n,r=e.parent,i=this.engine.BookmarkPosition,a=e.c_bookmark;if(i.values[t]===i.e_PosLastSibling){r.getChildren();var o=r.children,s=o[o.length-1];n=s?this.c_bookmark.MoveTo(s.c_bookmark,i.e_PosNextSibling):this.c_bookmark.MoveTo(a,i.e_PosFirstChild)}else n=this.c_bookmark.MoveTo(a,i.values[t]);if(!n)return!1;switch(this._removeFromParentChildrenList(),i.values[t]){case i.e_PosFirstChild:0===e.children.length?e.getChildren():e.children.unshift(this),this.parent=e;break;case i.e_PosLastChild:0===e.children.length?e.getChildren():e.children.push(this),this.parent=e;break;case i.e_PosFirstSibling:case i.e_PosLastSibling:case i.e_PosPrevSibling:case i.e_PosNextSibling:r._insertChildRelativeTo(e,this,t)}return!0}},{key:"_indexOfChildId",value:function(e){return this.children.findIndex(function(t){return t.id===e||t.appBookmarkId===e})}},{key:"_removeFromParentChildrenList",value:function(){var e=this.parent,t=e._indexOfChildId(this.id);-1!==t&&e.children.splice(t,1)}},{key:"_insertChildRelativeTo",value:function(e,t,n){0===this.children.length&&this.getChildren();var r=this.engine.BookmarkPosition;t._removeFromParentChildrenList();var i=this._indexOfChildId(e.id);if(-1===i)throw new Error("Cannot insert bookmark that relative to ".concat(e.id,",  it's not child of ").concat(this.id));switch(r.values[n]){case r.e_PosFirstSibling:this.children.unshift(t);break;case r.e_PosLastSibling:this.children.push(t);break;case r.e_PosPrevSibling:this.children.splice(i,0,t);case r.e_PosNextSibling:this.children.splice(i+1,0,t);break;default:return}t.parent=this}},{key:"getDestination",value:function(){var e=new this.engine.String("A");if(!this.c_bookmark.GetDict().HasKey(e)){var t=this.c_bookmark.GetDestination();return t.IsEmpty()?void 0:{destination:new u.Z(t,this.doc,this.engine).toJson(),objNumber:null,subAction:[],subActionCount:0,type:"TypeGoto"}}(0,s.Z)(e)}},{key:"setDestination",value:function(e){var t=this.c_bookmark.GetDict(),n=new this.engine.String("A");t.HasKey(n)&&t.RemoveAt(n),(0,s.Z)(n);var r=u.Z.create(this.engine,this.c_doc,e.destination);return this.c_bookmark.SetDestination(r),this.updateDestination(r),{destination:new u.Z(r,this.doc,this.engine).toJson(),objNumber:null,subAction:[],subActionCount:0,type:"TypeGoto"}}},{key:"getAction",value:function(){var e=new this.engine.String("Dest");if(!this.c_bookmark.GetDict().HasKey(e)){var t=this.c_bookmark.GetAction();return t.IsEmpty()?void 0:this.doc.JR.actionManager.get(t,this.doc,this.doc.JR).toJson()}(0,s.Z)(e)}},{key:"setAction",value:function(e){var t=this.doc.JR.actionManager,n=t.create(this.c_doc,e.type),r=this.c_bookmark.GetAction();if(r.IsEmpty())this.c_bookmark.SetAction(n);else{var i=r.GetSubActionCount();r.InsertSubAction(i,n),this.c_bookmark.SetAction(r)}var a=this.c_bookmark.GetDict(),o=new this.engine.String("Dest");a.HasKey(o)&&a.RemoveAt(o),(0,s.Z)(o),t.get(n,this.c_doc,this.doc.JR).create(e)}},{key:"moveAction",value:function(e){for(var t=e.action,n=e.direction,r=this.c_bookmark.GetAction(),i=r.GetSubActionCount(),a=this.c_bookmark,o=[r],s=0;s<i;s++)o.push(r.GetSubAction(s));var c=o.findIndex(function(e){return e.GetDict().GetObjNum()===t.objNumber});if(-1!=c){var u=n?c+1:c-1;if(0==u||0==c){a.RemoveAction(),o[0].RemoveAllSubActions();var l=0==c?u:c;a.SetAction(o[l]),o.splice(l,1),r=a.GetAction();for(var d=0;d<o.length;d++)r.InsertSubAction(d,o[d])}else{var h;r.RemoveAllSubActions(),h=[o[u],o[c]],o[c]=h[0],o[u]=h[1];for(var f=1;f<o.length;f++)r.InsertSubAction(f,o[f])}}}},{key:"removeAction",value:function(e){if(e){var t=this.c_bookmark.GetAction();return t=(0,c.Z)(this.engine,this.c_doc,t,e.objNumber),e.objNumber&&t?(this.c_bookmark.SetAction(t),!0):this.c_bookmark.RemoveAction()}return this.c_bookmark.RemoveAction()}},{key:"getCanonicalString",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e){var r=new this.engine.WString(e),i=this.engine.TextSearchUtils.CanonicalFindText(r,t,n),a=i.canonical_text?i.canonical_text.toString():"";return r.delete(),a}}},{key:"search",value:function(e,t,n){var r=this,i=!t.wholeWordsOnly&&!t.caseSensitive&&t.stemming,a=this.c_bookmark.GetTitle().toString(),o=a,s=null;if(t.isIgnoreDiacritics||t.isIgnoreAsia){var c=new this.engine.WString(o),u=this.engine.TextSearchUtils.CanonicalFindText(c,t.isIgnoreAsia,t.isIgnoreDiacritics);o=u.canonical_text?u.canonical_text.toString():"";var d=u.text_index_of_len_array,h=[];s=[];for(var f=0;f<=d.GetSize();f++)h[f]=0===f?0:h[f-1]+d.GetAt(f-1),s[h[f]]=f;for(var g=0;g<s.length;g++)void 0===s[g]&&(s[g]=s[g-1]);c.delete()}t.caseSensitive||(o=o.toLowerCase()),e.forEach(function(e){var c=e;t.caseSensitive||(c=c.toLowerCase()),(t.isIgnoreDiacritics||t.isIgnoreAsia)&&(c=r.getCanonicalString(c,t.isIgnoreAsia,t.isIgnoreDiacritics));var u,d=o.indexOf(c,0);if(i){var h=(u=(0,l.nT)(r.engine,c,a)).next();h.done?d=-1:(d=h.value.index,c=h.value.oriWord)}for(;-1!==d;){var f=r.getCanonicalString(o[d-1]),g=r.getCanonicalString(o[d+c.length]),p=i?c.length:e.length;if(!t.wholeWordsOnly||!(/[0-9a-zA-Z]/.test(f)&&void 0!==f||/[0-9a-zA-Z]/.test(g)&&void 0!==g)){var v=null,m=null,_=d;s?(v=(0,l.Tg)(a,s[d]),m=(0,l.xF)(a,s[d]+p),_=s[d]):(v=(0,l.Tg)(a,d),m=(0,l.xF)(a,d+p)),n.push({startText:v,endText:m,word:a.substr(_,p),type:"bookmark",index:n.length,id:r.id});break}if(i){var y=u.next();y.done?d=-1:(d=y.value.index,c=y.value.oriWord)}else d=o.indexOf(c,d+1)}}),this.children.forEach(function(r){return r.search(e,t,n)})}}]),e}()},4033:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(9227),i=n(7424),a=n(8925);const o=function(){function e(t){(0,r._)(this,e),this.id=(0,a.Ki)("pdf_object"),this.pdfDoc=t}return(0,i._)(e,[{key:"toJson",value:function(){return{id:this.id}}}]),e}()},2863:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__=__webpack_require__(5578),_swc_helpers_call_super__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__(4691),_swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(9227),_swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__(7424),_swc_helpers_get__WEBPACK_IMPORTED_MODULE_55__=__webpack_require__(6905),_swc_helpers_get_prototype_of__WEBPACK_IMPORTED_MODULE_56__=__webpack_require__(9418),_swc_helpers_inherits__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(5467),_swc_helpers_instanceof__WEBPACK_IMPORTED_MODULE_61__=__webpack_require__(5843),_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_57__=__webpack_require__(2956),_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_59__=__webpack_require__(9149),_swc_helpers_object_without_properties__WEBPACK_IMPORTED_MODULE_62__=__webpack_require__(1730),_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_52__=__webpack_require__(4570),_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_54__=__webpack_require__(5347),_swc_helpers_type_of__WEBPACK_IMPORTED_MODULE_58__=__webpack_require__(9256),_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__=__webpack_require__(7582),_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8925),_shared_consts__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7189),_PDFPage_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8871),_PDFDictionary_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4033),_BufferBlock_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2925),_PDFBookmark_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(6142),_PDFLayer_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(9482),_pdf_jr_Form_Form__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(6205),_shared_cipherType__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(3404),_shared_keyUsageType__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(6216),_object_PDFObject__WEBPACK_IMPORTED_MODULE_53__=__webpack_require__(895),_PDFFontMgr__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(6928),_error_code__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(4075),_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(3850),_headerFooter_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(1183),_signature_callback_ts__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(952),_share_objects_delete_js__WEBPACK_IMPORTED_MODULE_60__=__webpack_require__(776),_share_RendererHelper__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(6867),_base_FileSpec__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(821),_annot_Annot__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(843),_Attachments__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(1830),_base_Image_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(5147),_share_signature_util__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(1696),_shared_IndexDBCache_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(9960),_share_InvalidJRObjectError_ts__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(5251),_virtual_VirtualJRPDFPage_ts__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(4335),_annot_annotType__WEBPACK_IMPORTED_MODULE_63__=__webpack_require__(4748),_share_createSummarizeComments_util__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(6781),_PDFArticle__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(8043),_PDFPortfolio__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(8076),_shared_formatDate_js__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(7731),_pageEditor_DefaultFont__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(9754),_xfa_XFADocProvider__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(8895),_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(5318),_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(5567),_xfa_SignatureField__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(479),_pdf_doc_lr_chatWithDoc__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(8341),_Form_filler_FormFillerJRModule__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(1368),_shared_message_channel_MessageChannel__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(5298),_shared_permission_CallNoPermission__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(5401),_search_DocTextSearch__WEBPACK_IMPORTED_MODULE_64__=__webpack_require__(825),_foxitsoftware_web_action__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(4099),_action_api_AdditionalActionAPIJRImpl__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(7674),_action_api_AnnotActionAPIJRImpl__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(5028),_Form_filler_annot_JRWidget__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(9963),_foxitsoftware_web_annot__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(8278),_foxitsoftware_web_form__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(5435),_esigncn_EsignCNAPIJRImpl__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__(5256),_action_api_BookmarkActionAPIJRImpl__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(8170),_PageFormat__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(7118),noop=function(){},logger=_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.mA.getLogger("pdf-jr.PDFDoc"),continueExport=null,eSignCNOptType={SELF_SIGN:0,INIT_SIGN:1,FLOW_SIGN:2,FLOW_END_SIGN:3},MIP_LABEL_ID_METADATA_BEGIN_FLAG="MSIP_LABEL_",MIP_LABEL_ID_METADATA_END_FLAG="_SITEID",MIP_ENCRYPT_OBJ_NUM_KEY="ENCRPYT_KEY",encryptedEngineDocForMIP=null,engineDocForMIP=null;function rshift(e,t){return Math.floor(e/Math.pow(2,t))}function and(e,t){var n=2147483648,r=2147483647;return(~~(e/n)&~~(t/n))*n+(e&r&(t&r))}function getPrintRange(e,t){var n=[];if(!e)return n;var r=e.GetElement(t);if(!r)return n;r=r.GetDirectObject().GetArray();for(var i=0;i<r.GetElementCount();i++){var a=r.GetElement(i);n.push(a.GetInteger())}return n}var mipInstance=null;function getMIPInstance(e){return mipInstance||(e.initMIP(),mipInstance=new e.MIP),mipInstance}var PDFDoc=function(Disposable1){function PDFDoc1(e,t){var n,r=t.getBuffer,i=t.size,a=t.release,o=void 0===a?noop:a,s=t.async,c=void 0!==s&&s,u=t.isCreate,l=void 0!==u&&u,d=t.isCreatePortfolio,h=void 0!==d&&d,f=t.initOpenOptions,g=void 0===f?{}:f,p=t.destroyCallback,v=void 0===p?noop:p,m=t.buffer,_=t.docId,y=t.doc,S=t.ReadBlockOption,b=t.isDecryptMipFlow,I=t.fileName;(0,_swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_46__._)(this,PDFDoc1),(n=(0,_swc_helpers_call_super__WEBPACK_IMPORTED_MODULE_47__._)(this,PDFDoc1)).fileName=I,n.isLoaded=!1,n.docDeferred=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)(),n.docPromise=n.docDeferred.promise;var A=i;n.id=_||(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.Ki)("pdf_doc"),n.JR=e;var P,D=n.engine=e.engine;if(n.async=c,n.readerBlockLoading=0,n.initOpenOptions=g,n.destroyCallback=v,n.colors={background:null,foreground:null},n.ReadBlockOption=S,n.mIsDynamicXFA=!1,n.mHasXFALicense=!1,n.isXFAHighlighted=!0,n.thumbQueue=new _foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.tZ,n.isHttpLoad=!1,n.isDecryptMipFlow=b,n.docPermissions=-1,y)n.doc=y,n.docDeferred.resolve(n.doc);else if(l)n.doc=b?engineDocForMIP:new D.PDFDoc,n.docDeferred.resolve(n.doc);else if(h){var E=D.Portfolio.CreatePortfolio();n.doc=E.GetPortfolioPDFDoc(),n.docDeferred.resolve(n.doc)}else if(m)if(b)n.doc=engineDocForMIP;else{A=m.byteLength;var C=n.buffer=D._malloc(A);D.HEAPU8.set(new Uint8Array(m),C),n.doc=D.createPDFDocWithBuffer(C,A),n.docDeferred.resolve(n.doc)}else if(n.getBuffer=r,c){var w=0,k=!1,T=0,F=0,G=n.asyncBlock=new _BufferBlock_js__WEBPACK_IMPORTED_MODULE_4__.Z(i);P=D.AsyncReaderCallback.implement({Release:function(){o()},GetSize:function(){return k?F:A},ReadBlock:function(e,t,i){if(!G.avail(t,i))return G.checkLoadBuffer(t,i)||(G.loadingBuffer(t,i),n.readerBlockLoading++,r(t,i).then(function(e){G.addBuffer(t,i,e),n.readerBlockLoading--})),!1;var a=G.getBuffer(t,i);if(!a)return G.checkLoadBuffer(t,i)||(G.loadingBuffer(t,i),n.readerBlockLoading++,r(t,i).then(function(e){G.addBuffer(t,i,e),n.readerBlockLoading--})),!1;if(k&&(t+=T)+i>F)return!1;var o=new Uint8Array(a,t,i);return D.HEAPU8.set(o,e),!0},IsDataAvail:function(e,t){return G.avail(e,t)},AddDownloadHint:function(e,t){var i=2097152,a=e+t+i;return a=a>=A?A-e:t+i,G.checkLoadBuffer(e,t)||G.avail(e,t)||(G.loadingBuffer(e,a),n.readerBlockLoading++,r(e,a).then(function(t){G.addBuffer(e,a,t),n.readerBlockLoading--})),!0},GetPosition:function(){return k?w-T:w},SetPosition:function(e){k&&(e+=T),w=e},SetRange:function(e,t){T=e,F=t,k=!0},ClearRange:function(){k=!1}}),n.doc=D.createPDFDocWithReaderCallback(P,!0)}else{var R=!1;if(g&&g.isHttp){var x=0,O=!1,M=0,N=0;P=D.AsyncReaderCallback.implement({Release:function(){o()},GetSize:function(){return O?N:A},ReadBlock:function(e,t,i){var a;if(S&&S.url)return a=n.getDocStreamBuffer(t,i,A,!1),D.HEAPU8.set(a,e),!0;if(O){if((t+=M)+i>N)return!1;a=new Uint8Array(r(t,i),t,i)}else a=new Uint8Array(r(t,i));return D.HEAPU8.set(a,e),!0},IsDataAvail:function(e,t){return!0},AddDownloadHint:function(e,t){return!0},GetPosition:function(){return O?x-M:x},SetPosition:function(e){O&&(e+=M),x=e},SetRange:function(e,t){M=e,N=t,O=!0},ClearRange:function(){O=!1}}),n.doc=D.createPDFDocWithReaderCallback(P,!0),(R=n.doc.IsLinearized())?n.isHttpLoad=!0:(n.doc.delete(),P.delete(),n.isHttpLoad=!1)}if(!R){var B=0,L=!1,j=0,U=0;P=D.ReaderCallback.implement({Release:function(){o()},GetSize:function(){return L?U:A},ReadBlock:function(e,t,i){var a;if(S&&S.url)return 0!==i&&(a=n.getDocStreamBuffer(t,i,A,!1),D.HEAPU8.set(a,e),!0);if(L){if((t+=j)+i>U)return!1;a=new Uint8Array(r(t,i),t,i)}else a=new Uint8Array(r(t,i));return D.HEAPU8.set(a,e),!0},GetPosition:function(){return L?B-j:B},SetPosition:function(e){L&&(e+=j),B=e},SetRange:function(e,t){j=e,U=t,L=!0},ClearRange:function(){L=!1}}),n.doc=D.createPDFDocWithReaderCallback(P,!1)}}return n.pageCache={},n.pageIndexMap={},n.pageIndexPromise={},n.dictionaryCache={},n.dictionaryMap={},n.blockRanges=[],n.renderFlags=0,n.readerCallback=P,n.beforeSaveHooks=[],n.curFileId="",n.taskProgressMap={},n.fixPages=[],_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.fE.clear(),_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.$E.clear(),n.actionAPIImpl=new _action_api_AdditionalActionAPIJRImpl__WEBPACK_IMPORTED_MODULE_38__.g(n),n.annotActionAPIImpl=new _action_api_AnnotActionAPIJRImpl__WEBPACK_IMPORTED_MODULE_39__.R(n),n.bookmarkActionAPIImpl=new _action_api_BookmarkActionAPIJRImpl__WEBPACK_IMPORTED_MODULE_43__.x(n),n.defineRemoteAPI(_foxitsoftware_web_action__WEBPACK_IMPORTED_MODULE_37__.eS,n.annotActionAPIImpl),n.defineRemoteAPI(_foxitsoftware_web_action__WEBPACK_IMPORTED_MODULE_37__.VZ,n.bookmarkActionAPIImpl),n.defineRemoteAPI(_foxitsoftware_web_action__WEBPACK_IMPORTED_MODULE_37__.zO,n.actionAPIImpl),n.defineRemoteAPI(_foxitsoftware_web_form__WEBPACK_IMPORTED_MODULE_42__.dU,new _esigncn_EsignCNAPIJRImpl__WEBPACK_IMPORTED_MODULE_48__.B(n)),n.formModule=new _Form_filler_FormFillerJRModule__WEBPACK_IMPORTED_MODULE_34__.Y(n,n.actionAPIImpl),n.formModule.ownsTo(n),n.actionExecutor=n.obtainRemoteAPI(_foxitsoftware_web_action__WEBPACK_IMPORTED_MODULE_37__.qN),n.addDestroyHook(function(){n.annotActionAPIImpl.resetUndoRedoManager()}),n}return(0,_swc_helpers_inherits__WEBPACK_IMPORTED_MODULE_45__._)(PDFDoc1,Disposable1),(0,_swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_49__._)(PDFDoc1,[{key:"getId",value:function(){return this.id}},{key:"getDocStreamBuffer",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=this.ReadBlockOption;if(a&&a.url){var o=a.chunk,s=void 0===o?1048576:o,c=a.url,u=a.headers,l=parseInt(e/s),d=parseInt((e+t)/s),h=function(e,t){var n=new XMLHttpRequest;for(var r in n.open("GET",c,i),n.responseType="arraybuffer",u)n.setRequestHeader(r,u[r]);var a="bytes=".concat(e,"-").concat(t);return"string"==typeof e&&void 0===t&&(a=e),n.setRequestHeader("Range",a),i?new Promise(function(e,t){n.onreadystatechange=function(){4==n.readyState&&e(n.response)},n.send(null)}):(n.send(null),n.response)};if(this.docReadBlockCache||(this.docReadBlockCache={uint8Array:new Uint8Array(this.doc.GetFileSize()),array:[],test:[]}),i){for(var f=[],g=[],p=function(){var e=g,t=e[e.length-1],n=e[0]*s,i=t*s+s;f.push(h(n,i).then(function(t){e.forEach(function(e){r.docReadBlockCache.array[e]=t.slice(e*s,e*s+s)}),r.docReadBlockCache.uint8Array.set(new Uint8Array(t),n)})),g=[]},v=l;v<=d;v++){if(!this.docReadBlockCache.array[v]){var m=g[g.length-1];void 0===m||v-m===1?g.push(v):(p(),g=[])}v===d&&(p(),g=[])}return Promise.all(f).then(function(){return r.docReadBlockCache.uint8Array.slice(e,e+t)})}for(var _=l;_<=d;_++)if(!this.docReadBlockCache.array[_]){var y=_*s,S=h(y,y+s>n?n-1:y+s-1);this.docReadBlockCache.array[_]=S,this.docReadBlockCache.uint8Array.set(new Uint8Array(S),y)}return this.docReadBlockCache.uint8Array.slice(e,e+t)}}},{key:"beforeSave",value:function(e){this.beforeSaveHooks.push(e)}},{key:"isLinearized",value:function(){return this.doc.IsLinearized()}},{key:"createCertificateFile",value:function(e){var t=this.engine,n=new t.SG_DATASTRUCT;n.cwName=new t.WString(e.cwName||""),n.cwOU=new t.WString(e.cwOU||""),n.cwON=new t.WString(e.cwON||""),n.cwMail=new t.WString(e.cwMail||""),n.csCR=new t.String(e.csCR||""),n.nKA="number"==typeof e.nKA?e.nKA:0,n.nUDF="number"==typeof e.nUDF?e.nUDF:_shared_keyUsageType__WEBPACK_IMPORTED_MODULE_9__.Z.SignatureAndEncryption,n.cwSavePass=new t.WString(e.cwSavePass||"");var r=function(e){var n=0;return t.WriterCallback.implement({Release:function(){},Flush:function(){return!0},GetSize:function(){return n},WriteBlock:function(r,i,a){n+=a;var o,s=t.HEAPU8.buffer;return o=s.slice?s.slice(r,r+a):new Uint8Array(s,r,a).buffer,e.push(o),!0}})},i=[],a=r(i),o=r([]);t.CreateOpenSSLCert(n,a,o);var s=new Blob(i,{type:"application/x-pkcs12"});return this.JR.getCertificateInfo(s,e.cwSavePass)}},{key:"getCertificateSerials",value:function(){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var e,t,n,r,i;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(a){switch(a.label){case 0:return[4,_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_30__.ZP.loadWasmModule(_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_30__.v6)];case 1:return a.sent(),e=this.engine,t=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)(),n=new Set,r=e.CertificateSecurityCallback.implement({Release:function(){t.resolve(Array.from(n))},GetDecryptionKey:function(t,r){for(var i=e.GetSerials(t,r),a=0;a<i.GetSize();a++)n.add(i.GetAt(a).toString());return new e.String("")}}),i=new e.String("Adobe.PubSec"),e.Library.RegisterSecurityCallback(i,r),this.doc.Load(new e.String("")),e.Library.UnregisterSecurityCallback(i),[2,t.promise]}})}).call(this)}},{key:"parseByCertificate",value:function(e){var t=this.engine,n=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)(),r=e.pfxFile,i=e.password,a=(new FileReaderSync).readAsArrayBuffer(r),o=t.StreamCallback.implement({GetSize:function(){return a.byteLength},GetPosition:function(){return 0},ReadBlock:function(e,n,r){var i=new Uint8Array(a,n,r);return t.HEAPU8.set(i,e),!0}}),s=t.CertificateSecurityCallback.implement({Release:function(){},GetDecryptionKey:function(e,n){return new t.Envelope.CreateWithDataBuffer(e,n).GetDecryptionKey(o,new t.String(i))}}),c=new t.String("Adobe.PubSec");t.Library.RegisterSecurityCallback(c,s);var u=this.doc.Load(new t.String(""));return t.Library.UnregisterSecurityCallback(c),n.resolve({code:u.value}),n.promise}},{key:"parseByPassword",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.isLoaded)return Promise.resolve({code:0});void 0===e&&(e=this.initOpenOptions.password||""),n=Object.assign({},this.initOpenOptions,n);var r,i=this.engine,a=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)(),o=function(){setTimeout(function(){t.parseByPassword(e,n).then(function(e){a.resolve(e)})},200)};if(this.readerBlockLoading)return o(),a.promise;if(this.otherData=n,e){var s=new i.String(e);r=this.doc.Load(s),s.delete()}else if(n.encryptPassword){var c=new i.String(n.encryptPassword);r=this.doc.LoadByAsymmetricEncryption(c),c.delete()}else{var u=new i.String(e);r=this.doc.Load(u),u.delete()}if(r===i.ErrorCode.e_ErrIsAlreadyCDRM&&n.cdrm){var l=new i.String(e),d=new i.String(n.cdrm.appID),h=new i.String(n.cdrm.userToken),f=new i.String(n.cdrm.contentKey),g=n.cdrm.encrptType,p=n.cdrm.hasPermission;void 0===p&&(p=!0),r=this.doc.LoadCDRM(l,d,h,f,g,p),l.delete(),d.delete(),h.delete(),f.delete()}if(r===i.ErrorCode.e_ErrSuccess){0,this.password=e;var v=Promise.resolve(),m=Array.isArray(n.fdf);if(m||n.fdf&&n.fdf.file){var _=[n.fdf];m&&(_=n.fdf),v=Promise.all(_.map(function(e){var n=e.file,r=e.type;t.importFromFDF(n,r)}))}this.isLoaded=!0,v.then(function(e){t.mHasXFALicense=t.engine.Library.HasModuleLicenseRight({value:2}),t.isHttpLoad&&t.doc.HasForm(),t.mIsXFA=t.doc.IsXFA();var n=Promise.resolve();return t.mIsXFA&&(n=_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_30__.ZP.loadWasmModule(_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_30__.LK)),n.then(function(){if(t.JR.isEnableLoadJSEngine&&(t.mInitJse=t.JR.initializeFxjse(),t.mInitJse&&t.doc.InitializeDocumentProvider()),0===r.value&&t.mHasXFALicense&&t.mIsXFA){t.JR.registerXFAAppProvider();var e=t.xfaDocProvider=new _xfa_XFADocProvider__WEBPACK_IMPORTED_MODULE_29__.Z(t.engine,t.JR.id,t,t.JR.syncBaseUrl);t.XFADocHandler=t.engine.DocProviderCallback.implement(e);var n=t.xfaDoc=new t.engine.XFADoc(t.doc,t.XFADocHandler);n.StartLoad(null);if(t.mIsDynamicXFA=n.GetType()==t.engine.XFADocType.e_Dynamic,!t.mIsDynamicXFA){var i=t.doc.GetCatalog(),o=new t.engine.String("NeedsRendering");i.HasKey(o)&&i.GetElement(o).GetBoolean()&&(t.mIsDynamicXFA=!0),o.delete()}}t.mHasXFALicense&&t.mInitJse||(t.mIsDynamicXFA=t.mIsXFA&&!t.doc.IsStaticXFA()),t.docDeferred.resolve(t.doc),a.resolve({code:r.value}),0==r.value&&t.doc.HasForm()&&t.loadForm()})})}else if(r===i.ErrorCode.e_ErrDataNotReady)o();else if(r===i.ErrorCode.e_ErrSecurityHandler){var y,S=(null===(y=n.webPluginSecurity)||void 0===y?void 0:y.map(function(e){return e.filter}))||[],b=formateDictToJson(this.doc.GetEncryptDict());"FoxitDRM"===b.Filter&&n.drm?(this.JR.registerDRMSecurityCallback(),o()):"FOPN_foweb"===b.Filter&&n.fileOpen?(n.fileOpen.$$ptr=this.doc.Handle(),this.JR.registerOpenFileSecurityCallback(n.fileOpen),o()):S.includes(b.Filter)?(n.fileOpen={},n.fileOpen.$$ptr=this.doc.Handle(),n.fileOpen.fileName=this.oriFile.name,n.fileOpen.webPluginSecurity=n.webPluginSecurity.filter(function(e){return e.filter===b.Filter})[0],this.JR.registerOpenFileSecurityCallback(n.fileOpen),o()):a.resolve({code:r.value,encryptDict:b})}else this.JR.unRegisterSecurityCallback("FOPN_foweb"),a.resolve({code:r.value});return a.promise}},{key:"customProtectDoc",value:function(e){if(!this.JR.customWebPluginSecurityCallback)return!1;try{var t=this.engine,n=new t.CustomSecurityHandler,r=new t.CustomEncryptData(!0,new t.String(e),new t.String(" "));return n.Initialize(r,this.JR.customWebPluginSecurityCallback),this.doc.SetSecurityHandler(n),!0}catch(e){return console.err(e),!1}}},{key:"getCurFileSymbolId",value:function(){return this.curFileId}},{key:"getFadeOutBackground",value:function(e){var t=this.engine,n=_base_Image_js__WEBPACK_IMPORTED_MODULE_19__.Z.createImage(t,e),r=new t.Image,i=n.GetFrameBitmap(0).FadeOutBackground();r.AddFrame(i);var a=[],o=t.StreamCallback.implement({Release:function(){},Flush:function(){return!0},GetSize:function(){return 0},WriteBlock:function(e,n,r){var i,o=t.HEAPU8.buffer;return i=o.slice?o.slice(e,e+r):new Uint8Array(o,e,r).buffer,a=a.concat(i),!0}});return r.SaveAs(o,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(t,".png")),a}},{key:"getConvertToMono",value:function(e){var t=this.engine,n=_base_Image_js__WEBPACK_IMPORTED_MODULE_19__.Z.createImage(t,e),r=new t.Image,i=n.GetFrameBitmap(0).ConvertToMono();r.AddFrame(i);var a=[],o=t.StreamCallback.implement({Release:function(){},Flush:function(){return!0},GetSize:function(){return 0},WriteBlock:function(e,n,r){var i,o=t.HEAPU8.buffer;return i=o.slice?o.slice(e,e+r):new Uint8Array(o,e,r).buffer,a=a.concat(i),!0}});return r.SaveAs(o,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(t,".png")),a}},{key:"updatePageCache",value:function(e){var t=e.id,n=this.pageCache[t];n&&n.destroy(),this.pageCache[t]=e}},{key:"removePageCache",value:function(e){var t=e.id,n=this.pageCache[t];n&&n.destroy(),n!==e&&e.destroy(),delete this.pageCache[t]}},{key:"updatePageIndexMap",value:function(e,t){this.pageIndexMap[e]=t}},{key:"getPageById",value:function(e){return this.pageCache[e]||null}},{key:"getAllLoadedPages",value:function(){var e=[];for(var t in this.pageCache)e.push(this.pageCache[t]);return e}},{key:"extractPrintPages",value:function(e){var t,n=this.engine,r=e.reverse,i=e.type,a=e.bleed,o=e.rangeType,s=e.docs,c=e.range;switch(parseInt(i)){case 1:t=n.PrintWhatType.e_PrintWhatDocumentAndMarkups;break;case 2:t=n.PrintWhatType.e_PrintWhatDocumentAndStamps;break;case 3:t=n.PrintWhatType.e_PrintWhatFormFieldsOnly;break;default:t=n.PrintWhatType.e_PrintWhatDocument}var u,l,d,h=new _foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.LY({gsdk:n,mimeType:"application/pdf"});if("selectedPDF"===o||"allPDF"===o){if(s.length<1)return!1;s.forEach(function(e){if(u){var t=e.oriFile?e.oriFile.name:"temp.pdf",r=new n.WString(t);u.InsertDocument(d,e.doc,n.InsertDocOptions.e_InsertDocOptionAttachments.value|n.InsertDocOptions.e_InsertDocOptionBookmark.value,r)}else u=e.doc;d=u.GetPageCount()}),c=[[0,d-1]]}else u=this.doc,d=u.GetPageCount(),l=this.pdfLayer;var f=this._generateRange(c,n,d),g=f.ranges,p=(f.addCount,new n.ProcessPrintSetting);p.print_what_type=t,p.bleed_marks=!!a,p.reverse_pages=!!r,p.page_index_range=g,l&&(p.layer_context=l.layer_context);var v=null;e.useWorkFlow&&(v=n.PauseCallback.implement({NeedToPauseNow:function(){return!0}}),postMessage({workflow:"printEx",type:"printEx",msg:{state:"start",progress:0}}));for(var m=u.StartExtractPrintPages(h.implement,p,v),_=-1;100!==_;){if(-1===(_=m.GetRateOfProgress()))return!1;e.useWorkFlow&&postMessage({workflow:"printEx",type:"printEx",msg:{state:100!=_?"progress":"end",progress:_}}),m.Continue()}return p.delete(),h.getFile()}},{key:"getPageFormat",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:324,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:392,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.engine;return this.docPromise.then(function(c){return t.pageFormat&&t.pageFormat.release(),t.pageFormat=new _PageFormat__WEBPACK_IMPORTED_MODULE_44__.Z(t.JR,s,t),t.pageFormat.getPageFormat(e,n,r,i,a,o)})}},{key:"getPageFormatThumb",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:324,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:392,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;return this.docPromise.then(function(c){return r.pageFormat?r.pageFormat.getPageFormatThumb(e,t,n,i,a,o,s):null})}},{key:"removeAllPageFormat",value:function(e){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(t){switch(t.label){case 0:return this.pageFormat?[3,2]:[4,this.getPageFormat(e)];case 1:if(t.sent(),!this.pageFormat)return[2,-1];t.label=2;case 2:return[2,this.pageFormat.removeAllPageFormat(e)]}})}).call(this)}},{key:"addPageFormat",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(r){switch(r.label){case 0:return this.pageFormat?[4,this.pageFormat.addPageFormat(e,t,n)]:[2,-1];case 1:return[2,r.sent()]}})}).call(this)}},{key:"setAllBoxesByIndexes",value:function(e,t,n,r,i,a,o){var s=this,c=this.engine;return this.docPromise.then(function(u){return Promise.all(e.map(function(e){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var s,l,d,h,f,g,p,v,m,_,y,S;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(b){switch(b.label){case 0:return s=JSON.parse(JSON.stringify(a)),(l=this.pageIndexMap[e])?d=l.page||u.GetPage(e):(d=u.GetPage(e),(l=new _PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z(e,this)).page=d,this.updatePageIndexMap(e,l),this.updatePageCache(l)),h=l.getBox(0),f=h.right-h.left,g=h.top-h.bottom,p=["cropBox","artBox","trimBox","bleedBox"],o?[4,l.calcContentBBox(0)]:[3,2];case 1:v=b.sent(),p.forEach(function(e){s[e]=v}),b.label=2;case 2:return _="number"==typeof n?n:g,(m="number"==typeof t?t:f)>f||_>g?(h={left:0,right:m,bottom:0,top:_},p.forEach(function(e){var t=s[e];t&&(t.right=m-f+t.right,t.top=_-g+t.top)})):r=i=0,(y=s.cropBox)&&y.right-y.left>=10&&y.top-y.bottom>=10&&(p.forEach(function(e){if("cropBox"!==e){var t=s[e];if(!t)return;var n=y.right-y.left,r=t.right-t.left,i=y.top-y.bottom,a=t.top-t.bottom;r>n&&(t.left=y.left,t.right=y.right),a>i&&(t.bottom=y.bottom,t.top=y.top),t.left=Math.max(y.left,t.left),t.bottom=Math.max(y.bottom,t.bottom),t.right=Math.min(y.right,t.right),t.top=Math.min(y.top,t.top);var o=t.right-t.left,c=t.top-t.bottom;if(o<=0)throw new Error("Incorrect ".concat(e," size, width must be greater then 0, but actual ").concat(o,", ").concat(e,": ").concat(JSON.stringify(t)));if(c<=0)throw new Error("Incorrect ".concat(e," size, height must be greater then 0, but actual ").concat(c,", ").concat(e,": ").concat(JSON.stringify(t)))}}),s.cropBox&&l.setBox(1,s.cropBox),s.trimBox&&l.setBox(2,s.trimBox),s.artBox&&l.setBox(3,s.artBox),s.bleedBox&&l.setBox(4,s.bleedBox)),l.setBox(0,h),d.Reload(!1),(r>0||i>0)&&(S=new c.Matrix(1,0,0,1,Math.floor(r),Math.floor(i)),d.Transform(S,!0),d.StartParse(0,null,!0),S.delete()),[2,l.toJson()]}})}).call(s)}))})}},{key:"getAllBoxes",value:function(e){var t=this,n={};return this.docPromise.then(function(e){return[e.GetPageCount(),e]}).then(function(r){for(var i=(0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_52__._)(r,2),a=i[0],o=i[1],s=0,c=0,u=a;u--;){var l=o.GetPage(u),d=new _PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z(u,t);d.page=l;var h=d.getBox(0),f=h.right-h.left,g=h.top-h.bottom;u===e&&(n={mediaBox:h,cropBox:d.getBox(1),trimBox:l.GetBox(t.engine.BoxType.e_TrimBox).IsEmpty()?{}:d.getBox(2),artBox:l.GetBox(t.engine.BoxType.e_ArtBox).IsEmpty()?{}:d.getBox(3),bleedBox:l.GetBox(t.engine.BoxType.e_BleedBox).IsEmpty()?{}:d.getBox(4),width:f,height:g,pdfPage:d}),s=0===s||s>f?f:s,c=0===c||c>g?g:c}return n.minWidth=s,n.minHeight=c,n.pdfPage.calcContentBBox(0)}).then(function(e){return n.calcBox=e,delete n.pdfPage,n})}},{key:"getPDFDocInfo",value:function(){return this.docPromise.then(function(e){var t=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)(),n=e.GetInfo();return t.resolve(n),t.promise})}},{key:"getPageCount",value:function(){return this.docPromise.then(function(e){return e.GetPageCount()})}},{key:"getIndirectObject",value:function(e){return this.docPromise.then(function(t){var n=t.GetIndirectObject(e);return new _object_PDFObject__WEBPACK_IMPORTED_MODULE_53__.Z(t,n)})}},{key:"getPagesWidthHeight",value:function(){return this.docPromise.then(function(e){return[e.GetPageCount(),e]}).then(function(e){for(var t=(0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_52__._)(e,2),n=t[0],r=t[1],i=[],a=n;a--;){var o=r.GetPage(a);i[a]={width:o.GetWidth(),height:o.GetHeight()}}return i})}},{key:"getPageFromCache",value:function(e){return this.pageIndexMap[e]}},{key:"getPageByIndex",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.pageIndexMap[e];if(i)return n&&(i.id=n,this.updatePageCache(i)),Promise.resolve(i);if(this.pageIndexPromise[e])return this.pageIndexPromise[e];var a=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)();return i=new _PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z(e,this),r&&i.preparse(),this.pageIndexPromise[e]=i.c_pagePromise.then(function(){n&&(i.id=n),t.updatePageIndexMap(e,i),t.updatePageCache(i),delete t.pageIndexPromise[e],a.resolve(i)}).catch(function(n){_share_InvalidJRObjectError_ts__WEBPACK_IMPORTED_MODULE_22__.Z.is(n)?(i=new _virtual_VirtualJRPDFPage_ts__WEBPACK_IMPORTED_MODULE_23__.ZP(e,t),t.updatePageIndexMap(e,i),t.updatePageCache(i),delete t.pageIndexPromise[e],a.resolve(i)):a.reject(n)}),a.promise}},{key:"hasAnnots",value:function(e){return this.getPageByIndex(e).then(function(e){return e.hasAnnots()})}},{key:"getAllPageAnnotCount",value:function(){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var e,t;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(n){switch(n.label){case 0:return e=this,[4,this.getPageCount()];case 1:return t=n.sent(),[2,Promise.all(Array(t).fill(0).map(function(t,n){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(e){switch(e.label){case 0:return[4,this.getPageByIndex(n)];case 1:return[2,e.sent().hasAnnots()]}})}).call(e)}))]}})}).call(this)}},{key:"getAllAnnotsData",value:function(){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var e,t,n,r,i;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(a){switch(a.label){case 0:return e=this,t=function(e,t){var n,r=t.map(function(e){return e.getId()});return r.reduceRight(function(e,t,n){return r.indexOf(t)!==n&&e.push(n),e},[]).forEach(function(e){t[e].destroy(),t.splice(e,1)}),(n=e._needDestroyAnnots).push.apply(n,(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_54__._)(t)),t},n=function(t,n){var r=t.page.GetAnnot(n);return r.IsEmpty()?null:e.JR.annotManager.get(r,t,n)},[4,this.docPromise];case 1:return r=a.sent(),i=r.GetPageCount(),[2,Promise.all(Array(i).fill(0).map(function(r,i){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var e,r,a,o,s,c,u;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,this.getPageByIndex(i,null,!1)];case 1:return(e=l.sent())?(r=e.page,0===(a=r.GetAnnotCount())?[2,[]]:(o=new Array(a).fill(1).map(function(t,r){return n(e,r)}),s=t(e,o.filter(function(e){return"unknowntype"!=e.getType()})),[2,this.getAnnotsData(s,e)])):[2,[]];case 2:return c=l.sent(),u=this.engine.getErrorCode(c),console.error(u),[3,3];case 3:return[2]}})}).call(e)}))]}})}).call(this)}},{key:"getAnnotsData",value:function(e,t){var n={};e.map(function(e,t){var r=e.annot;if(0===r.GetType().value)return!1;var i=r.GetDict(),a=i.GetObjNum(),o=n[a]=n[a]||{},s=a;o.index=t,o.id=s,o.objectNumber=s;var c=e.engine,u=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(c,"IRT");if(i.HasKey(u)){var l=i.GetElement(u).GetDict().GetObjNum(),d=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(c,"RT"),h=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(c,"State"),f=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(c,"StateModel"),g=n[l]=n[l]||{};if(i.HasKey(h)&&i.HasKey(f)){var p=i.GetElement(f).GetString().toString(),v=r.GetModifiedDateTime(),m=0;switch(v.IsValid()&&(v=v.ToUTCTime(),m=Date.UTC(v.year,v.month-1,v.day,v.hour,v.minute,v.second,v.milliseconds)),p){case"Marked":(g.markedStates=g.markedStates||[]).push({index:t,id:s,time:m,objectNumber:s});break;case"Review":(g.reviewStates=g.reviewStates||[]).push({index:t,id:s,time:m,objectNumber:s})}}else if(i.HasKey(d)){if("Group"===i.GetElement(d).GetString().toString())g.isGroupHeader=!0,g.isGroup=!0,(g.groupElements=g.groupElements||[]).push({index:t,id:s,objectNumber:s}),o.isGroup=!0,o.groupHeader=g;else g.hasReplies=!0,(g.replies=g.replies||[]).push({index:t,id:s,content:r.GetContent().toString(),objectNumber:s})}else{g.hasReplies=!0,(g.replies=g.replies||[]).push({index:t,id:s,content:r.GetContent().toString(),objectNumber:s})}}});var r,i=e.map(function(e){if(0!==e.annot.GetType().value)return e&&e.toJson(n)}).filter(Boolean);t&&!t.isVirtual&&(r=i).push.apply(r,(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_54__._)(t.getFakeAnnots()));return i}},{key:"getPage",value:function(e){}},{key:"getPDFPageByPageIndex",value:function(e){}},{key:"getPermission",value:function(){return this.stdCipherOptions?this.stdCipherOptions.permission:this.doc.GetUserPermissions()}},{key:"getMetadata",value:function(){for(var e=this.engine,t=new e.Metadata(this.doc),n={Title:getMetadataValues(t,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(e,"Title")),Author:getMetadataValues(t,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(e,"Author")),Subject:getMetadataValues(t,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(e,"Subject")),Keywords:getMetadataValue(t,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(e,"Keywords")),Creator:getMetadataValues(t,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(e,"Creator")),Producer:getMetadataValues(t,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(e,"Producer")),Trapped:getMetadataValues(t,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(e,"Trapped")),CreationDate:formatMetadataDate(getMetadataValues(t,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(e,"CreationDate"))),ModDate:formatMetadataDate(getMetadataValues(t,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(e,"ModDate"))),pdfaid:getMetadataValues(t,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(e,"pdfaid")),isTagged:this.doc.IsTaggedPDF(),isLinearized:this.doc.IsLinearized(),version:this.doc.GetFileVersion(),count:this.doc.GetPageCount()},r={},i=t.GetCustomerKeys(),a=0;a<i.GetSize();a++){var o=i.GetAt(a),s=t.GetValues(o),c=s.GetSize()>0?s.GetAt(0).toString():"";r[o.toString()]=c}for(var u={},l=t.GetAllRdfXMLKeys(),d=0;d<l.GetSize();d++){var h=l.GetAt(d).toString().split(":");if(!["CreateDate","Keywords","ModifyDate","Producer"].includes(h[1])){var f=t.GetRdfXMLString((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(e,h[0]),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(e,h[1]));u[h[1]]=f.toString()}}return t.delete(),t=null,n.allXMLKey=u,n.custom=r,n}},{key:"setMetadataValue",value:function(e,t){var n,r=this.engine,i=new r.WString(e.toString());n="CreationDate"===e||"ModDate"===e?this.ToDateTime(t):new r.WString(t.toString());var a=new r.Metadata(this.doc);if("CreationDate"===e)a.SetCreationDateTime(n);else if("ModDate"===e)a.SetModifiedDateTime(n);else{var o=a.GetValues(i);o.RemoveAll(),o.Add(n),a.SetValues(i,o)}a.delete(),a=null}},{key:"ToDateTime",value:function(e){var t=new Date(e),n=t.getFullYear(),r=t.getMonth()+1,i=t.getDate(),a=t.getHours(),o=t.getMinutes(),s=t.getSeconds(),c=t.getMilliseconds(),u=-t.getTimezoneOffset()/60;return new this.engine.DateTime(n,r,i,a,o,s,c,u,0)}},{key:"saveTouchupData",value:function(){var e=this.touchup;e&&e.generateContent()}},{key:"movePageTo",value:function(e,t){var n=this;return this.saveTouchupData(),this.docPromise.then(function(r){var i=n.getPageById(e);return i.parsedPage().then(function(e){var a,o,s,c=i.index,u=r.MovePageTo(e,t);u&&(c<t?(a=c,o=t,s=!1):(a=t,o=c,s=!0),n.updatePageIndex(a,o,s,!0));return u})})}},{key:"insertPage",value:function(e,t,n){var r=this;return this.docPromise.then(function(i){var a=i.InsertPage(e,t,n);if(!a)return!1;var o,s=a.GetIndex(),c=o=new _PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z(s,r);o.page=a,o._c_pagePromise=Promise.resolve(a),o.isCPageDeleted=!1;var u=i.GetPageCount()-1;return r.updatePageIndex(s+1,u,!0,!1),r.updatePageIndexMap(s,c),r.updatePageCache(o),o.toJson()})}},{key:"removePage",value:function(e){var t=this,n=this,r=(this.touchup,n.doc.GetPageCount());return this.JR.asyncOperation(function(){return t.doc.RemovePage(e)}).then(function(t){if(t){if(n.pageIndexMap[e]){var i=n.pageIndexMap[e];delete n.pageIndexMap[e],delete n.pageIndexPromise[e],n.removePageCache(i)}var a=r-1-1;n.updatePageIndex(e,a)}return t})}},{key:"cleanupRemovedPages",value:function(e,t){for(var n=t-e+1,r=this.doc.GetPageCount()+n,i=t;i>=e;i--)this.cleanupRemovedPage(i,r),r--}},{key:"cleanupRemovedPage",value:function(e,t){var n=this.touchup;if(n&&delete n.editPages[e],this.pageIndexMap[e]){var r=this.pageIndexMap[e];delete this.pageIndexMap[e],delete this.pageIndexPromise[e],this.removePageCache(r)}var i=t-1-1;this.updatePageIndex(e,i)}},{key:"showNameTreePageAtTheEnd",value:function(){var e=this;return this.saveTouchupData(),this.docPromise.then(function(t){var n=t.GetPageCount()-1,r=t.GetPage(n),i=new _PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z(n,e);return i.page=r,e.updatePageIndexMap(n,i),e.updatePageCache(i),i.toJson()})}},{key:"hideNameTreePage",value:function(e){this.saveTouchupData();var t=this.doc.GetPageCount(),n=e;if(e<0&&(n=t),this.pageIndexMap[n]){var r=this.pageIndexMap[n];delete this.pageIndexMap[n],delete this.pageIndexPromise[n],this.removePageCache(r)}return e>=0&&this.updatePageIndex(e,t-1),!0}},{key:"updatePageIndex",value:function(e,t,n,r){if(r)if(n){var i=this.pageIndexMap[t];delete this.pageIndexMap[t],this.updatePageIndex(e+1,t,n,!1),i&&(this.pageIndexMap[e]=i,this.pageIndexMap[e].index=e)}else{var a=this.pageIndexMap[e];delete this.pageIndexMap[e],this.updatePageIndex(e,t-1,n,!1),a&&(this.pageIndexMap[t]=a,this.pageIndexMap[t].index=t)}else if(n)for(var o=t;o>=e;o--)this.pageIndexMap[o-1]&&(this.pageIndexMap[o]=this.pageIndexMap[o-1],delete this.pageIndexMap[o-1],delete this.pageIndexPromise[o-1],this.pageIndexMap[o].index=o);else for(var s=e;s<=t;s++)s<0||!this.pageIndexMap[s+1]||(this.pageIndexMap[s]=this.pageIndexMap[s+1],delete this.pageIndexMap[s+1],delete this.pageIndexPromise[s+1],this.pageIndexMap[s].index=s);this.update3DCache(e,t,n,r)}},{key:"update3DCache",value:function(){}},{key:"splice3DCache",value:function(){}},{key:"destroyAll3DCache",value:function(){}},{key:"update3DCacheAfterMovePages",value:function(){}},{key:"destroy",value:function(){var e=this;if(!this.isDestroyed){(0,_swc_helpers_get__WEBPACK_IMPORTED_MODULE_55__._)((0,_swc_helpers_get_prototype_of__WEBPACK_IMPORTED_MODULE_56__._)(PDFDoc1.prototype),"destroy",this).call(this),this.beforeSaveHooks=[],this.destroyAll3DCache();var t=this.pageCache,n=[];for(var r in t)n.push(t[r].destroy()),delete t[r];this.pdfLayer&&this.pdfLayer.delete(),this.pdfLayer=null,this.attachments=null,this.asyncBlock&&this.asyncBlock.destroy(),this.password=null,this.stdCipherOptions=null,this.passwordType=null,this.JR.unRegisterSecurityCallback("FOPN_foweb"),this.destroyCallback(),this.docPromise=null,this.docDeferred.promise=null,this.otherData=null;var i=this.rootBookmark;i&&i.destroy(),this.rootBookmark=null,this.buffer&&this.engine._free(this.buffer),this.buffer=null,this.getBuffer=null,this.mInitJse&&this.doc.FinalizeDocumentProvider();var a=Promise.all(n).then(function(t){var n=e.doc;try{n.ClearRenderCache()}catch(e){}n&&n.delete(),e.doc=null,e.readerCallback&&e.readerCallback.delete(),e.readerCallback=null});return this.destroyHooks=[],(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.EY)(),this.xfaDoc&&(this.xfaDoc.delete&&this.xfaDoc.delete(),this.xfaDoc=null),this.XFADocHandler&&(this.XFADocHandler.delete&&this.XFADocHandler.delete(),this.XFADocHandler=null),a}}},{key:"destroyPage",value:function(e){var t=this.getPageById(e),n=-1;return t&&(n=t.index,t.destroy(),delete this.pageCache[e],delete this.pageIndexMap[n]),n}},{key:"getInfos",value:function(){return{fileSize:this.doc.GetFileSize()}}},{key:"getFileID",value:function(){var e=this.doc,t=this.engine,n=[],r=e.GetTrailer();if(r){var i=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(t,"ID"),a=r.GetElement(i);if(a)for(var o=a.GetArray(),s=0;s<2;s++){for(var c=o.GetElement(s).GetString().GetBuffer(),u="",l=0;l<16;l++){var d=t.HEAP8[c+l]>>>0&255;(d=d.toString(16)).length<2&&(d="0"+d),u+=d}n.push(u)}}return n}},{key:"toJson",value:function(){var e,t=this.doc,n=this.engine,r=t.GetPageCount(),i=t.GetFileSize(),a=this.doc.GetOpenAction();a.IsEmpty()||(e=(a=this.JR.actionManager.get(a,this.doc,this.JR)).toJson(),a.destroy());var o=this.getFileID(),s=(t.GetTrailer(),t.GetUserPermissions()),c=s,u=!0,l=n.PasswordType.e_PwdNoPassword;try{var d,h=t.GetSecurityHandler();if(!1===(null===(d=this.isDecryptMipFlow)||void 0===d?void 0:d.isFullControl))u=!1;else if(h.IsEmpty())u=!0;else{var f=n.EncryptType;switch(h.GetSecurityType()){case f.e_EncryptNone:u=!0;break;case f.e_EncryptPassword:u=(l=t.GetPasswordType())==n.PasswordType.e_PwdOwner;break;case f.e_EncryptFoxitDRM:case f.e_EncryptCDRM:u=t.GetDRMEncryptData().is_owner;break;case f.e_EncryptCertificate:u=!!(2&c);break;case f.e_EncryptCustom:case f.e_EncryptRMS:case f.e_EncryptUnknown:default:u=!0}}}catch(e){u=!1}var g=t.IsXFA()?1:0,p=this.isDynamicXFA(),v={},m=t.GetCatalog(),_=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(n,"Names"),y=m.HasKey(_);p?g=2:y&&(v=this.getNameTree(2));var S=[];if(y){var b=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(n,"AP"),I=m.GetElement(_).GetDict(),A=I&&I.GetElement(b);if(A&&A.GetDirectObject()){var P=A.GetDirectObject().GetDict().GetElement(_);if(P)for(var D=P.GetArray(),E=D&&D.GetElementCount(),C=0;C<E;C+=2){var w=void 0,k=D.GetElement(C).GetString();try{w=k.toString()}catch(e){for(var T="",F=k.GetBuffer(),G=0,R=k.GetLength();G<R;G++){var x=this.engine.HEAP8[F+G]>>>0&255;T+=String.fromCharCode(x)}w=this.JR.pdfNameDecoding(T)}var O=D.GetElement(C+1).GetDirectObject();O&&S.push({name:w,objNum:O.GetObjNum()})}}}var M=!0,N=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(n,"AcroForm");if(m.HasKey(N)){var B=m.GetElement(N).GetDirectObject();if(B&&B.GetType()==n.PDFObjectType.e_Dictionary){var L=B.GetDict(),j=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(n,"SigFlags");if(L.HasKey(j)){var U=L.GetElement(j).GetInteger();1&U||2&U||(M=!1)}}}else M=!1;var W=[];if(M)for(var H=t.GetSignatureCount(),K=0;K<H;K++){var z=t.GetSignature(K);if(z.IsSigned()){u=!1;var V=4294963392;switch(z.GetDocPermission().value){case 0:V=4294967292;break;case 1:V=4294965972;break;case 2:V=4294966740;break;case 3:V=4294966772}W.push(V)}}if(8&c&&(c=(1024|c)>>>0),this.isOwner=u,this.canGetXFA()){this.isOwner=!1,u=!1,c&=2320,s&=2320,r=this.xfaDoc.GetPageCount()}var J=this.isCompareDoc(),Y=new n.Metadata(this.doc),Z=getMetadataValues(Y,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(n,"pdfaid"));Z&&(c&=-257,c&=-33,c&=-1033),Y.delete();var q=this.curFileId,X=t.GetCatalog().GetDict().GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(n,"Threads")),Q=!(!X||0===X.GetDirectObject().GetArray().GetElementCount());return{curFileSymbolId:q,id:this.id,fileSize:i,sigPerms:W,fileID:o,pageCount:r,userPermissions:c,oriPerm:s,action:e,jsNameTree:v,isOwner:u,passwordType:l.value,icons:S,isTagged:t.IsTaggedPDF(),isPortfolio:t.IsPortfolio(),isCompareDoc:J,pdfaid:Z,fileType:g,hasArticle:Q}}},{key:"getStream",value:function(e,t){var n=this,r=e.writeStream,i=e.endAllOperations,a=void 0===i||i;this.beforeSaveHooks.forEach(function(e){return e(a)});var o=this.engine,s=Promise.resolve();return this.JR.isLicenseEvaluation()&&(s=_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_30__.ZP.loadWasmModule(_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_30__.LQ)),16&~t||(s=s.then(function(){return _web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_30__.ZP.loadWasmModule(_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_30__.sg)})),s.then(function(e){return n.docPromise.then(function(e){var n=0,i=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)(),a=o.WriterCallback.implement({Release:function(){a.delete()},Flush:function(){return i.resolve(n),!0},GetSize:function(){return n},WriteBlock:function(e,t,i){n=Math.max(t+i,n);var a,s=o.HEAPU8.buffer;return a=s.slice?s.slice(e,e+i):new Uint8Array(s,e,i).buffer,r(a,t,i),!0}});return o.saveDoc(e,a,t),i.promise})})}},{key:"importFromFDF",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r||(r=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)());var i=new this.engine.Range(0,this.doc.GetPageCount()-1,this.engine.RangeFilter.e_All);try{this.JR.setFontCacheEnabled(!1);var a=this.doc.ImportFromFDF(e,n,i);this.JR.setFontCacheEnabled(!0),r.resolve(a)}catch(i){if(17==(i=this.engine.getErrorCode(i)).value)return void setTimeout(function(){t.importFromFDF(e,n,r)},200);console.warn(i)}finally{i.delete(),i=null,logger.info("ImportFromFDF","finally")}return r.promise}},{key:"getRootBookmark",value:function(){var e=this;return this.rootBookmark?Promise.resolve(this.rootBookmark):this.docPromise.then(function(t){if(e.rootBookmark)return e.rootBookmark;var n=t.GetRootBookmark();return n.IsEmpty()&&(n=t.CreateRootBookmark()),e.rootBookmark=new _PDFBookmark_js__WEBPACK_IMPORTED_MODULE_5__.Z(e,n.GetDict().GetObjNum(),n,t,-1,null),e.rootBookmark})}},{key:"getBookmarks",value:function(){return this.getRootBookmark(!0).then(function(e){return e?e.toJson():null})}},{key:"getBookmarkChildren",value:function(e){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(t){return[2,this.getRootBookmark(!1).then(function(t){if(!t)return[];var n=null==e?t:t.getBookmarkById(e);return n?n.getChildren():[]})]})}).call(this)}},{key:"getBlankPageIndexes",value:function(){return this.docPromise.then(function(e){for(var t=e.GetBlankPageIndexes(),n=[],r=t.GetSize();r--;)n[r]=t.GetAt(r);return n})}},{key:"createRootBookmark",value:function(){var e=this;return this.docPromise.then(function(t){if(!e.rootBookmark){var n=t.CreateRootBookmark(),r=new _PDFBookmark_js__WEBPACK_IMPORTED_MODULE_5__.Z(e,n.GetDict().GetObjNum(),n,t,-1,null);e.rootBookmark=r}return e.rootBookmark.toJson()})}},{key:"addBookmarksFromStructureRoles",value:function(e,t){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var n,r,i,a,o,s,c,u,l,d,h,f,g,p,v;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(m){switch(m.label){case 0:return[4,this.docPromise];case 1:n=m.sent(),!0===(r=n.GetRootBookmark()).IsEmpty()&&(r=n.CreateRootBookmark()),i=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(this.engine,t),a=r.Insert(i,this.engine.BookmarkPosition.e_PosLastChild),o=new this.engine.WStringArray,s=!0,c=!1,u=void 0;try{for(l=e[Symbol.iterator]();!(s=(d=l.next()).done);s=!0)h=d.value,o.Add((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(this.engine,h))}catch(e){c=!0,u=e}finally{try{s||null==l.return||l.return()}finally{if(c)throw u}}return a.AddBookmarksFromStructureRoles(o,null),this.rootBookmark?[3,3]:[4,this.getRootBookmark(!1)];case 2:m.sent(),m.label=3;case 3:return f=a.GetDict().GetObjNum(),g=f,p=this.rootBookmark.deep+1,v=new _PDFBookmark_js__WEBPACK_IMPORTED_MODULE_5__.Z(this,f,a,n,p,this.rootBookmark,g),this.rootBookmark.children.push(v),[2,a.GetDict().GetObjNum()]}})}).call(this)}},{key:"insertBookmark",value:function(e){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var t,n,r;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(i){switch(i.label){case 0:return this.rootBookmark?[3,2]:[4,this.getRootBookmark()];case 1:i.sent(),i.label=2;case 2:if("number"==typeof(t=e.newBookmarkId)&&this.rootBookmark.getBookmarkById(t))throw new Error("Duplicate bookmark id: ".concat(t));return[4,"number"==typeof(n=e.destId)?this.rootBookmark.getBookmarkById(n):this.getRootBookmark()];case 3:if(!(r=i.sent()))throw new Error("Failed to insert bookmark. The destination bookmark node ID (".concat(n,") does not exist or has not been loaded."));if(r===this.rootBookmark)switch(e.relationship){case this.engine.BookmarkPosition.e_PosFirstChild.value:case this.engine.BookmarkPosition.e_PosLastChild.value:break;default:throw new Error('When inserting a bookmark into the root, the relationship must be either "BookmarkPosition.e_PosFirstChild" or "BookmarkPosition.e_PosLastChild".')}return[2,r.insert(e).appBookmarkId]}})}).call(this)}},{key:"insertBookmarkTree",value:function(e){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var t,n,r,i;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(a){switch(a.label){case 0:return delete(t=(0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_57__._)({},e)).children,[4,this.insertBookmark(t)];case 1:return n=a.sent(),this.rootBookmark?[3,3]:[4,this.getRootBookmark()];case 2:a.sent(),a.label=3;case 3:return r=this.rootBookmark.getBookmarkById(n),i=e.children,Array.isArray(i)&&i.forEach(function(e){r.appendBookmarkTree(e)}),[2,n]}})}).call(this)}},{key:"setBookmarkProperty",value:function(e,t){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var n,r,i,a;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(o){switch(o.label){case 0:return this.rootBookmark?[3,2]:[4,this.getRootBookmark()];case 1:o.sent(),o.label=2;case 2:if(!(n=this.rootBookmark.getBookmarkById(e)))throw new Error("Failed update bookmark properties. The destination bookmark node ID's (".concat(e,") does not exist or has not been loaded."));return r=n.setProperty(t),i=r.oldProperties,a=r.newProperties,[2,{oldProperties:i,newProperties:a}]}})}).call(this)}},{key:"getBookmarkProperties",value:function(e){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var t;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(n){switch(n.label){case 0:return this.rootBookmark?[3,2]:[4,this.getRootBookmark()];case 1:n.sent(),n.label=2;case 2:return(t=this.rootBookmark.getBookmarkById(e))?[2,t.getProperties(e)]:[2]}})}).call(this)}},{key:"getBookmarkData",value:function(e){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var t;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(n){switch(n.label){case 0:return this.rootBookmark?[3,2]:[4,this.getRootBookmark()];case 1:n.sent(),n.label=2;case 2:return(t=this.rootBookmark.getBookmarkById(e))?[2,t.getInfo()]:[2]}})}).call(this)}},{key:"removeBookmark",value:function(e){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var t;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(n){switch(n.label){case 0:return this.rootBookmark?[3,2]:[4,this.getRootBookmark()];case 1:n.sent(),n.label=2;case 2:if(this.rootBookmark.id==e?(t=this.rootBookmark,this.rootBookmark=null):t=this.rootBookmark.removeChild(e),!t)throw new Error("Failed to delete bookmark, The destination bookmark node's ID (".concat(e,") does not exist or has not been loaded."));return[2,t.remove()]}})}).call(this)}},{key:"getLayerNodes",value:function(){var e=this.engine,t=this;return this.docPromise.then(function(n){var r=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)(),i=new _PDFLayer_js__WEBPACK_IMPORTED_MODULE_6__.Z(n,e);t.pdfLayer&&t.pdfLayer.delete(),t.pdfLayer=i;var a=i.toJson();return r.resolve(a),r.promise})}},{key:"getRootLayerNodeChildrenCount",value:function(){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var e,t,n,r;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(i){switch(i.label){case 0:return e=this.engine,[4,this.docPromise];case 1:if(t=i.sent(),(n=new e.LayerTree(t)).IsEmpty())return[2,0];r=n.GetRootNode();try{return[2,r.GetChildrenCount()]}finally{n.delete(),r.delete()}return[2]}})}).call(this)}},{key:"getAllLayerNodeChildrenCount",value:function(){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var e,t,n,r;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(i){switch(i.label){case 0:return e=this.engine,[4,this.docPromise];case 1:if(t=i.sent(),(n=new e.LayerTree(t)).IsEmpty())return[2,0];if(!(r=n.GetOCGs()))return[2,0];try{return[2,r.GetElementCount()]}finally{n.delete()}return[2]}})}).call(this)}},{key:"createLayerNodes",value:function(e){return new _PDFLayer_js__WEBPACK_IMPORTED_MODULE_6__.Z(this.doc,this.engine,e)}},{key:"getRedaction",value:function(){var e=this.engine,t=this;return this.docPromise.then(function(n){if(!e.Library.HasModuleLicenseRight({value:3}))return Promise.reject(_error_code__WEBPACK_IMPORTED_MODULE_11__.v.noRedactionLicense);if(!t.c_redaction)try{t.c_redaction=new e.Redaction(n)}catch(t){isNaN(t)||(t=e.getErrorCode(t)),console.warn(t)}return t.c_redaction})}},{key:"applyRedaction",value:function(){var e=this,t=this.engine.PauseCallback.implement({NeedToPauseNow:function(){return!0}}),n="applyRedaction",r=n;postMessage({workflow:n,type:r,msg:{state:"start",progress:0}});for(var i={},a={},o=[],s=0;s<this.doc.GetPageCount();s++)o.push(this.getPageByIndex(s).then(function(e){return a[e.index]=e,e.getAnnots()}));return Promise.all(o).then(function(a){var o=function(t){var n=e.pageCache[t];i[n.index]||(i[n.index]={}),a[n.index].forEach(function(e){var t=e.annot.GetDict().GetObjNum();t&&(i[n.index][t]=e)})};for(var s in e.pageCache)o(s);return e.getRedaction().then(function(i){for(var a=[],o=i.StartApplyAll(t),s=-1;100!==s;){if(-1===(s=o.GetRateOfProgress()))return postMessage({workflow:n,type:r,msg:{state:"error",progress:-1}}),!1;100!=s&&postMessage({workflow:n,type:r,msg:{state:"progress",progress:s}}),o.Continue()}for(var c in e.pageCache){var u=e.pageCache[c];a.push(u.update(!0))}return Promise.all(a)}).then(function(e){for(var t=[],a=0;a<e.length;a++){var o=e[a],s=o.index,c=i[s],u=[];for(var l in c){var d=c[l];(-1===o.annotIds.indexOf(Number(l))||d.annot.IsEmpty())&&u.push(l)}t.push({pageIndex:s,removedAnnotIds:u})}return postMessage({workflow:n,type:r,msg:{state:"end",progress:100}}),t}).catch(function(t){return-6===t.error||isNaN(t)||(t=e.engine.getErrorCode(t)),Promise.reject(t)})})}},{key:"exportAnnotsToFile",value:function(e,t,n){var r=new this.engine.AnnotArray;if(0!==Object.keys(n).length){var i,a=function(e){var t=i.getPageById(e);if(!t)throw new Error("page not loaded: "+e);n[e].forEach(function(e){var n=t._getAnnotIndexById(e),i=t.page.GetAnnot(n);!i.IsEmpty()&&i.IsMarkup()&&r.Add(i)})};for(var o in n)i=this,a(o)}this.doc.ExportAnnotsToFile(e,r,t)}},{key:"exportToFDF",value:function(e,t,n){var r=this,i=2===t||0!==Object.keys(n).length,a=0,o=[],s=(i?this.engine.StreamCallback:this.engine.WriterCallback).implement({Release:function(){},Flush:function(){return!0},GetSize:function(){return a},WriteBlock:function(e,t,n){a+=n;var i,s=r.engine.HEAPU8.buffer;return i=s.slice?s.slice(e,e+n):new Uint8Array(s,e,n).buffer,o.push(i),!0}});if(2===t||0!==Object.keys(n).length)this.exportAnnotsToFile(s,e,n);else{var c=this.engine,u=new c.FDFDoc(e),l=new c.Range(0,this.doc.GetPageCount(),c.RangeFilter.e_All);this.doc.ExportToFDF(u,t,l),l.delete(),l=null,u.SaveAs(s)}return new Blob(o,{type:["application/vnd.adobe.fdf","application/vnd.xfdf"][e]})}},{key:"exportToStardardXml",value:function(e,t,n){var r,i=this.engine,a=this.doc,o=null,s=i.ExportToImageCallback.implement({Release:noop,GetPDFProducer:function(){return new i.WString("")},GetPDFDocAuthor:function(){return new i.WString("")},GetStreamCallbackForImage:function(e){var n=e.toString();return-1!=n.indexOf("\\")&&(n=n.replace("\\","/")),0==n.indexOf("/")&&(n=n.substr(1,n.length-1)),o&&o.byteLength>0&&t({fileName:n,imgBuffer:o,percent:r?r.GetRateOfProgress():0}),o=new ArrayBuffer,i.StreamCallback.implement({Release:function(){},Flush:function(){return!0},GetSize:function(){return o.byteLength},ReadBlock:function(e,t,n){if(o&&o.byteLength>0){var r=new Uint8Array(o,t,n);return i.HEAPU8.set(r,e),!0}return!1},WriteBlock:function(e,t,n){if(o.byteLength<t+n){var r=o;if(o=new ArrayBuffer(t+n),0!==r.byteLength){var a=new Uint8Array(r);new Uint8Array(o).set(a)}}var s=new Uint8Array(o,t,n),c=i.HEAPU8.subarray(e,e+n);return s.set(c),!0}})}}),c=0,u=[],l=i.WriterCallback.implement({Release:noop,Flush:function(){return!0},GetSize:function(){return c},WriteBlock:function(e,t,n){c+=n;var r,a=i.HEAPU8.buffer;return r=a.slice?a.slice(e,e+n):new Uint8Array(a,e,n).buffer,u.push(r),!0}}),d=new i.WString(e),h=new i.WString(e),f=i.PauseCallback.implement({NeedToPauseNow:function(){return!0}}),g=new i.Range;if(n&&n.string){var p=n.string,v=n.filter;p.split(",").filter(function(e){return!!e}).forEach(function(e){if(e.indexOf("-")>=0){var t=(0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_52__._)(e.split("-"),2),n=t[0],r=t[1];g.AddSegment(Number(n)-1,Number(r)-1,{all:i.RangeFilter.e_All,even:i.RangeFilter.e_Odd,odd:i.RangeFilter.e_Even}[v||"all"])}else g.AddSingle(Number(e)-1)})}else for(var m=0;m<this.doc.GetPageCount();m++)g.AddSingle(m);r=a.StartExportToXML(l,h,d,s,f,g),t({percent:r.GetRateOfProgress()}),continueExport={exportImageCallback:s,pauseCallback:f};for(var _=i.ProgressiveState.e_ToBeContinued;continueExport&&_===i.ProgressiveState.e_ToBeContinued;)_=r.Continue(),t({percent:r.GetRateOfProgress()});t({imgBuffer:o,xmlBuffer:u,fileName:e,percent:100}),this.cancelExport()}},{key:"exportToTxt",value:function(e,t,n){var r=this.engine,i=new r.Range;if(t&&t.string){var a=t.string,o=t.filter;a.split(",").filter(function(e){return!!e}).forEach(function(e){if(e.indexOf("-")>=0){var t=(0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_52__._)(e.split("-"),2),n=t[0],a=t[1];i.AddSegment(Number(n)-1,Number(a)-1,{all:r.RangeFilter.e_All,even:r.RangeFilter.e_Odd,odd:r.RangeFilter.e_Even}[o])}else i.AddSingle(Number(e)-1)})}var s,c=new r.ExportProvider,u=0,l=[],d=r.StreamCallback.implement({Release:function(){d.delete()},Flush:function(){return!0},GetSize:function(){return u},ReadBlock:function(){return!0},WriteBlock:function(e,t,n){u+=n;var i,a=r.HEAPU8.buffer;return i=a.slice?a.slice(e,e+n):new Uint8Array(a,e,n).buffer,l.push(i),!0}});"convert-pdf-to-accessible-txt"===e?(s=r.ExportAccessibilityTextCallback.implement({Release:function(){},GetEntryKey:function(){return new r.WString("")},GetTxtFileStream:function(){return d}}),c.SetExportAccessibilityTextCallback(s)):(s=r.ExportTextCallback.implement({Release:function(){},GetTxtFileStream:function(){return d}}),c.SetExportTextCallback(s));var h=r.PauseCallback.implement({NeedToPauseNow:function(){return!0}}),f=new r.ExportMgr(c,this.doc),g=f.StartExportPDFToText(i,h);continueExport={range:i,exportTextCallback:s,pauseCallback:h,exportProvider:c,exportMgr:f};for(var p=r.ProgressiveState.e_ToBeContinued;continueExport&&p===r.ProgressiveState.e_ToBeContinued;)p=g.Continue(),n({percent:g.GetRateOfProgress()});n({buffer:l,percent:100}),this.cancelExport()}},{key:"generateImageExportSetting",value:function(e,t,n){var r=null,i=function(e){if(!(["png","jpeg","jpeg2000","tiff","bmp"].indexOf(t.format)<0)){e.SetImageColorSpace({value:t.imageColorSpace});var n=[0,72,96,150,300,600,1200,2400].indexOf(t.imageResolution);n>=0?e.SetImageResolution({value:n}):(e.SetImageResolution({value:-1}),e.SetCustomResolution(t.imageResolution)),"tiff"===t.format&&e.SetImageConvertType({value:t.imageConvertType})}};switch(t.format){case"png":(r=new e.PNGExportSetting).SetInterlace({value:t.pngInterlace}),i(r);break;case"jpeg":case"jpeg2000":(r=new e.JPEGExportSetting("jpeg2000"===t.format)).SetImageGrayscaleQuality({value:t.imageGrayscaleQuality}),r.SetImageColorQuality({value:t.imageColorQuality}),"jpeg2000"===t.format&&r.SetImageTile(t.imageTile),i(r);break;case"tiff":(r=new e.TIFFExportSetting).SetMonochromeCompressType({value:t.monochromeCompressType}),r.SetGrayscaleCompressType({value:t.grayscaleCompressType}),r.SetColorCompressType({value:t.colorCompressType}),i(r);break;case"bmp":i(r=new e.BMPExportSetting)}if(r){if(n)return r.SetImageSettingType(e.ImageSettingType.e_PageToImage),r;switch(t.type){case"pageToImage":r.SetImageSettingType(e.ImageSettingType.e_PageToImage);break;case"imageObjsOfPage":r.SetImageSettingType(e.ImageSettingType.e_ImageObjsOfPage),r.SetImageMinInch({value:t.imageMinInch})}return r}}},{key:"exportToImage",value:function(e,t,n,r){var i=this.engine,a=this.generateImageExportSetting(i,e),o=new i.Range;if(n&&n.string){var s=n.string,c=n.filter;s.split(",").filter(function(e){return!!e}).forEach(function(e){if(e.indexOf("-")>=0){var t=(0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_52__._)(e.split("-"),2),n=t[0],r=t[1];o.AddSegment(Number(n)-1,Number(r)-1,{all:i.RangeFilter.e_All,even:i.RangeFilter.e_Odd,odd:i.RangeFilter.e_Even}[c])}else o.AddSingle(Number(e)-1)})}var u=null,l=null,d=i.ExportImageCallback.implement({Release:function(){},GetDeviceCapsX:function(){return e.dpi&&e.dpi.x||96},GetDeviceCapsY:function(){return e.dpi&&e.dpi.y||96},CallBackError:function(){return!0},GetImageFileStream:function(e,n){u&&u.byteLength>0&&r({fileName:l,buffer:u,percent:p?p.GetRateOfProgress():0}),u=new ArrayBuffer;var a=t.lastIndexOf("."),o=t.substr(0,a),s=t.substr(a);return l=n<=0?o+"_Page"+e.toString()+s:o+"_Page"+e.toString()+"_Image"+n.toString()+s,i.StreamCallback.implement({Release:function(){},Flush:function(){return!0},GetSize:function(){return u.byteLength},ReadBlock:function(e,t,n){if(u&&u.byteLength>0){var r=new Uint8Array(u,t,n);return i.HEAPU8.set(r,e),!0}return!1},WriteBlock:function(e,t,n){if(u.byteLength<t+n){var r=u;if(u=new ArrayBuffer(t+n),0!==r.byteLength){var a=new Uint8Array(r);new Uint8Array(u).set(a)}}var o=new Uint8Array(u,t,n),s=i.HEAPU8.subarray(e,e+n);return o.set(s),!0}})}}),h=i.PauseCallback.implement({NeedToPauseNow:function(){return!0}}),f=new i.ExportProvider;f.SetExportImageCallback(d);var g=new i.ExportMgr(f,this.doc),p=g.StartExportPDFToImage(a,o,h);r({percent:p.GetRateOfProgress()}),continueExport={imageExportSetting:a,engineRange:o,exportImageCallback:d,pauseCallback:h,exportProvider:f,exportMgr:g};for(var v=i.ProgressiveState.e_ToBeContinued;continueExport&&v===i.ProgressiveState.e_ToBeContinued;)v=p.Continue(),r({percent:p.GetRateOfProgress()});r({buffer:u,fileName:l,percent:100}),this.cancelExport()}},{key:"exportImageObjectToImage",value:function(e,t,n,r){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var i,a,o,s,c,u,l,d,h,f,g,p;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(v){switch(v.label){case 0:return i=this.engine,a=this.generateImageExportSetting(i,t,e),o=this.doc.GetPage(e.index),[4,new _PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z(e.index,this).getGraphicsObjectAtPoint(e.selectPosition,0,3)];case 1:for(s=v.sent(),c=s.graphicsObject,u=null,l=i.ExportImageCallback.implement({Release:function(){},GetDeviceCapsX:function(){return t.dpi&&t.dpi.x||96},GetDeviceCapsY:function(){return t.dpi&&t.dpi.y||96},CallBackError:function(){return!0},GetImageFileStream:function(){u&&u.byteLength>0&&r({fileName:n,buffer:u,percent:g?g.GetRateOfProgress():0}),u=new ArrayBuffer;var e=i.StreamCallback.implement({Release:function(){e.delete()},Flush:function(){return!0},GetSize:function(){return u.byteLength},ReadBlock:function(e,t,n){if(u&&u.byteLength>0){var r=new Uint8Array(u,t,n);return i.HEAPU8.set(r,e),!0}return!1},WriteBlock:function(e,t,n){if(u.byteLength<t+n){var r=u;if(u=new ArrayBuffer(t+n),0!==r.byteLength){var a=new Uint8Array(r);new Uint8Array(u).set(a)}}var o=new Uint8Array(u,t,n),s=i.HEAPU8.subarray(e,e+n);return o.set(s),!0}});return e}}),d=i.PauseCallback.implement({NeedToPauseNow:function(){return!0}}),(h=new i.ExportProvider).SetExportImageCallback(l),f=new i.ExportMgr(h,this.doc),g=f.StartExportImageObjToImage(c,o,a,d),r({percent:g.GetRateOfProgress()}),continueExport={imageExportSetting:a,exportImageCallback:l,pauseCallback:d,exportProvider:h,exportMgr:f},p=i.ProgressiveState.e_ToBeContinued;continueExport&&p===i.ProgressiveState.e_ToBeContinued;)p=g.Continue(),r({percent:g.GetRateOfProgress()});return r({buffer:u,fileName:n,percent:100}),this.cancelExport(),[2]}})}).call(this)}},{key:"cancelExport",value:function(){if(continueExport){for(var e in continueExport)continueExport[e]=null;continueExport=null}}},{key:"loadForm",value:function(){return this.formModule.init()}},{key:"resetForm",value:function(){return this.formModule.reset()}},{key:"setOpenAction",value:function(e,t){var n=this.doc,r=this.engine,i=(0,_foxitsoftware_web_action__WEBPACK_IMPORTED_MODULE_37__.Vn)(r,e),a=r.Action.Create(n,i);return(0,_foxitsoftware_web_action__WEBPACK_IMPORTED_MODULE_37__.rV)({gsdk:r,doc:n,action:a,data:t}),n.SetOpenAction(a)}},{key:"executeJavaScript",value:function(e){return this.doc.ExecuteDocJavaScript({value:-1},(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.Eo)(this.engine,""),(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.Eo)(this.engine,e))}},{key:"doDocOpenAction",value:function(){if(this.JR.isEnableJavaScript){this.JR.setJsPlugIns();var e=this.doc,t=this.engine,n=this.getJsFromNameTree();n&&e.ExecuteDocJavaScript({value:-1},(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.Eo)(t,""),(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.Eo)(t,n));var r=e.GetOpenAction();if(!r.IsEmpty()){var i=(0,_foxitsoftware_web_action__WEBPACK_IMPORTED_MODULE_37__.Bh)(this.engine,e,r),a=i.find(function(e){return e.type===_foxitsoftware_web_action__WEBPACK_IMPORTED_MODULE_37__.Us.goto});return this.actionExecutor.execute({query:{type:"doc"},actions:i,executeJavaScript:function(n){0!==n.javascript.length&&e.ExecuteDocJavaScript({value:-1},(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.Eo)(t,""),(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.Eo)(t,n.javascript))}}).then(function(e){return a})}}}},{key:"getDocOpenActionData",value:function(){var e=this.doc.GetOpenAction();if(!e.IsEmpty())return(0,_foxitsoftware_web_action__WEBPACK_IMPORTED_MODULE_37__.FP)(this.engine,this.doc,e)}},{key:"removeOpenAction",value:function(){return this.doc.RemoveOpenAction()}},{key:"getJsFromNameTree",value:function(){var e=this.engine,t=this.doc.GetCatalog(),n=this.isDynamicXFA(),r=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.Ys)(e,"Names"),i=t.HasKey(r);if(n||!i)return"";var a=this.getNameTree(2);return Object.keys(a).filter(function(e){return"!ADBE::0200_VersChkCode_XFACheck"!==e}).map(function(e){return a[e]}).join("\n")}},{key:"getSecurityType",value:function(){return this.doc.GetSecurityHandler().GetSecurityType().value}},{key:"setCertificateAndPermission",value:function(e,t,n){var r=this.engine,i=new FileReaderSync,a=new r.EnvelopeArray;e.forEach(function(e){var t=e.cerFile,n=e.permission,o=i.readAsArrayBuffer(t),s=r.StreamCallback.implement({GetSize:function(){return o.byteLength},GetPosition:function(){return 0},ReadBlock:function(e,t,n){var i=new Uint8Array(o,t,n);return r.HEAPU8.set(i,e),!0}}),c=null;if(n){var u=n.print,l=n.change,d=n.accessibility,h=n.copy;(c=new r.CertPermission).bEnableCopy=h,c.bEnableTextAccess=d,c.printPer={value:u},c.changePer={value:l}}var f=new r.Envelope(s,c);a.Add(f)});var o=r.CipherType.e_CipherNone;t===_shared_cipherType__WEBPACK_IMPORTED_MODULE_8__.Z.AES128||t===_shared_cipherType__WEBPACK_IMPORTED_MODULE_8__.Z.AES256?o=r.CipherType.e_CipherAES:t===_shared_cipherType__WEBPACK_IMPORTED_MODULE_8__.Z.RC4&&(o=r.CipherType.e_CipherRC4);var s=new r.CertificateSecurityHandler;return s.Initialize(a,o,n),this.doc.SetSecurityHandler(s),!0}},{key:"setPasswordAndPermission",value:function(e,t,n,r,i){var a=this,o=this.engine;return this.docPromise.then(function(s){var c,u;if(r==_shared_cipherType__WEBPACK_IMPORTED_MODULE_8__.Z.None)c=o.CipherType.e_CipherNone,u=0;else if(r==_shared_cipherType__WEBPACK_IMPORTED_MODULE_8__.Z.RC4)c=o.CipherType.e_CipherRC4,u=16;else if(r==_shared_cipherType__WEBPACK_IMPORTED_MODULE_8__.Z.AES128)c=o.CipherType.e_CipherAES,u=16;else{if(r!=_shared_cipherType__WEBPACK_IMPORTED_MODULE_8__.Z.AES256)throw new Error("cipher error");c=o.CipherType.e_CipherAES,u=32}var l,d,h,f,g,p,v=s.GetEncryptionType(),m=s.GetSecurityHandler(),_=m.GetSecurityType();try{v!==o.EncryptType.e_EncryptNone&&1===_.value?((d=s.GetStdEncryptData()).cipher=c,d.is_encrypt_metadata=i,d.key_length=u,d.user_permissions=n,l=new o.StdSecurityHandler(m)):(d=new o.StdEncryptData(i,n,c,u),l=new o.StdSecurityHandler)}catch(e){d=new o.StdEncryptData(i,n,c,u),l=new o.StdSecurityHandler}r==_shared_cipherType__WEBPACK_IMPORTED_MODULE_8__.Z.AES256?(l.SetAES256ModifyFlags(7),-1===e?(h=new o.WString(""),f=new o.WString(t),l.InitializeW(d,h,f)):(h=new o.WString(e),f=new o.WString(t),l.InitializeW(d,h,f)),h.delete(),f.delete()):(g=new o.String(-1===e?"":e),p=new o.String(t),l.Initialize(d,g,p),g.delete(),p.delete());var y=s.SetSecurityHandler(l);return y&&(a.stdCipherOptions={isEncryptMetadata:i,permission:n,cipherType:r}),d.delete(),l.delete(),y})}},{key:"removeSecurity",value:function(){var e=this;return this.docPromise.then(function(t){return e.registerDRMSecurityCallback=!1,t.RemoveSecurity()})}},{key:"checkPassword",value:function(e){var t=this,n=this.engine;return this.docPromise.then(function(r){var i=new n.String(e),a=r.CheckPassword(i);return i.delete(),t.isOwner=3==a.value,a.value})}},{key:"getStdCipherOptions",value:function(){var e=this;return this.docPromise.then(function(t){if(e.stdCipherOptions)return e.stdCipherOptions;var n={},r=t.GetSecurityHandler();if(!r||r.IsEmpty())return n;if(1==r.GetSecurityType().value){var i=t.GetStdEncryptData();n.isEncryptMetadata=i.is_encrypt_metadata,n.permission=i.user_permissions,0===i.cipher.value?n.cipherType=_shared_cipherType__WEBPACK_IMPORTED_MODULE_8__.Z.None:1===i.cipher.value?n.cipherType=_shared_cipherType__WEBPACK_IMPORTED_MODULE_8__.Z.RC4:2===i.cipher.value&&(16===i.key_length?n.cipherType=_shared_cipherType__WEBPACK_IMPORTED_MODULE_8__.Z.AES128:n.cipherType=_shared_cipherType__WEBPACK_IMPORTED_MODULE_8__.Z.AES256)}return n})}},{key:"getUserPassword",value:function(e){var t,n=this,r=this.engine;return this.docPromise.then(function(e){return t=e,n.getStdCipherOptions()}).then(function(i){if(i.cipherType===_shared_cipherType__WEBPACK_IMPORTED_MODULE_8__.Z.AES256)return n.password||"";var a,o=new r.String(e);try{a=t.GetUserPassword(o).toString()}catch(e){a=n.password||""}return o.delete(),a})}},{key:"getFileVersion",value:function(){return this.docPromise.then(function(e){return e.GetFileVersion()})}},{key:"setRenderFlag",value:function(e){this.renderFlags=e}},{key:"getRenderFlags",value:function(){return this.renderFlags}},{key:"drmEncrypt",value:function(e){var t=this.engine;return this.docPromise.then(function(e){var n=e.GetSecurityHandler();if(n&&!n.IsEmpty()){var r=n.GetSecurityType();if(r!==t.EncryptType.e_EncryptUnknown&&r!==t.EncryptType.e_EncryptNone){var i=new Error("This document has been encrypted and cannot be encrypted again!");return i.error=-1,Promise.reject(i)}}return e}).then(function(n){var r=new t.String(e.subFilter),i=new t.DRMEncryptData(e.isEncryptMetadata,r,t.CipherType.values[e.cipher],e.keyLength,e.isOwner,e.userPermissions);r.delete();var a=new t.DRMSecurityHandler;if(e.values){var o=e.values;for(var s in o){var c=new t.String(s),u=new t.WString(o[s]);a.SetDRMValue(c,u)}}if(a.Initialize(i,new t.String(e.fileId),new t.String(e.initialKey)))return i.delete(),[n,a];i.delete();var l=new Error("Document encryption failed!");return l.error=2,Promise.reject(l)}).then(function(e){var t=(0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_52__._)(e,2),n=t[0],r=t[1];return n.SetSecurityHandler(r)})}},{key:"getTemplates",value:function(){var e=this.doc.GetCatalog();if(!e)return null;var t=this.engine,n=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(t,"Names"),r=e.GetElement(n);if(!r)return null;var i=r.GetDict();if(!i)return null;var a=new Array,o=i.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(t,"Templates"));if(o){var s=o.GetDict();if(s){var c=s.GetElement(n);if(c){var u=c.GetArray();if(u)for(var l=u.GetElementCount(),d=0;d<l;d+=2){var h=u.GetElement(d).GetString(),f=this.JR.getPDFString(h);if(f&&""!==f&&d+1<l){var g=u.GetElement(d+1);g.GetType()===this.engine.PDFObjectType.e_Reference&&(g=g.GetDirectObject());var p={name:f,objNum:g.GetObjNum()};a.push(p)}}}}}var v=[],m=i.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(t,"Pages"));if(m){var _=m.GetDict();if(_){var y=_.GetElement(n);if(y){var S=y.GetArray();if(S)for(var b=S.GetElementCount(),I=0;I<b;I+=2){var A=S.GetElement(I).GetString(),P=this.JR.getPDFString(A);if(P&&""!==P&&I+1<b){var D=S.GetElement(I+1);D.GetType()===this.engine.PDFObjectType.e_Reference&&(D=D.GetDirectObject());var E={name:P,objNum:D.GetObjNum()};v.push(E)}}}}}return{visibleArr:v,invisibleArr:a}}},{key:"removeTemplate",value:function(e){var t=this.doc.GetCatalog();if(!t)return!0;var n=this.engine,r=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(n,"Names"),i=t.GetElement(r);if(!i)return!0;var a=i.GetDict();if(!a)return!0;var o=a.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(n,"Templates")),s=o?o.GetDict():null;if(s){var c=s.GetElement(r);if(c){var u=c.GetArray();if(u)for(var l=u.GetElementCount(),d=0;d<l;d+=2){var h=u.GetElement(d).GetString().toString();if(h&&""!==h&&h===e&&d+1<l){u.RemoveAt(d),u.RemoveAt(d);break}}}}var f=a.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(n,"Pages")),g=f?f.GetDict():null;if(g){var p=g.GetElement(r);if(p){var v=p.GetArray();if(v)for(var m=v.GetElementCount(),_=0;_<m;_+=2){var y=v.GetElement(_).GetString().toString();if(y&&""!==y&&y===e&&_+1<m){v.RemoveAt(_),v.RemoveAt(_);break}}}}return!0}},{key:"hideTemplate",value:function(e,t){var n=this.doc.GetCatalog();if(!n)return!1;var r=this.engine,i=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)("Names"),a=n.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,"Names"));if(!a)return!1;var o=a.GetDict();if(!o)return!1;var s=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,"Templates"),c=o.GetElement(s),u=c?c.GetDict():null;u||(u=this.engine.PDFDictionary.Create(),o.SetAtReference(s,u,this.doc));var l=u.GetElement(i);l||(l=this.engine.PDFArray.Create(),u.SetAt(i,l));var d=l.GetArray(),h=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,"Pages"),f=o.GetElement(h),g=f?f.GetDict():null;g||(g=this.engine.PDFDictionary.Create(),o.SetAtReference(h,g,this.doc));var p=g.GetElement(i);p||(p=this.engine.PDFArray.Create(),g.SetAt(i,p));var v=p.GetArray(),m=v,_=d,y="Page";t&&(m=d,_=v,y="Template");var S=new this.engine.WString(e.name);if(m.AddString(S),S.delete(),e.objNum){var b=this.engine.PDFObject.CreateReference(this.doc,e.objNum);m.AddElement(b)}for(var I=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,"Type"),A=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,y),P=_.GetElementCount(),D=0;D<P;D+=2){var E=_.GetElement(D).GetString().toString();if(E&&""!==E&&E===e.name&&D+1<P){if(!e.objNum){_.RemoveAt(D),_.RemoveAt(D);break}var C=_.GetElement(D+1);if(C.GetType()===this.engine.PDFObjectType.e_Reference&&(C=C.GetDirectObject()),C.GetObjNum()===e.objNum){(C=C.GetDict()).SetAtName(I,A),_.RemoveAt(D),_.RemoveAt(D);break}}}}},{key:"spawnPage",value:function(e,t,n,r,i){var a=t.name,o=this.doc.GetPageCount();(-1===n||n>o)&&(n=o);var s=new this.engine.WString(a);if(this.doc.SpawnPage(s,n,r,i)){var c,u=c=new _PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z(n,this);c.page=this.doc.GetPage(n);var l=this.doc.GetPageCount()-1;return this.updatePageIndex(n+1,l,!0,!1),this.updatePageIndexMap(n,u),this.updatePageCache(c),c.toJson()}}},{key:"hasForm",value:function(){try{var e=this.engine,t=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(e,"AcroForm"),n=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(e,"Fields");return this.doc.GetCatalog().GetElement(t).GetDict().GetElement(n).GetDirectObject().GetArray().GetElementCount()>0}catch(e){return!1}}},{key:"reloadPageAnnots",value:function(e){var t=this;e.forEach(function(e){t.pageIndexMap[e]&&t.pageIndexMap[e].reloadAnnots()})}},{key:"getFontBufferByName",value:function(e){for(var t=this.doc.GetFontCount(),n=0;n<t;n++){var r=this.doc.GetFont(n);if(r.GetName().toString()==e)return _PDFFontMgr__WEBPACK_IMPORTED_MODULE_10__.Z.getWoffDataBuffer(r.GetWoffData(this.doc),this.engine)}}},{key:"getStructureRoles",value:function(){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var e,t,n,r,i,a;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(o){if(e=this.doc,!e.IsTaggedPDF())return[2];for(t=[],n=e.GetStructureRoles(),r=n.GetSize(),i=0;i<r;i++)a=n["operator[]"](i).toString(),t.push(a);return[2,t]})}).call(this)}},{key:"getPageSizes",value:function(e,t){if(this.canGetXFA())return this.getXFAPageSizes(e,t);var n={},r=this.doc,i=r.GetAllPageBasicInfo(),a=i.GetSize();if(a!==r.GetPageCount()){var o=this.engine,s=o.ErrorCode.e_ErrDataNotReady;function h(e,t){var n,i=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)();try{n=r.GetPageBasicInfo(t)}catch(u){var a=o.getErrorCode(u);if(a===o.ErrorCode.e_ErrUnknown)n={width:_virtual_VirtualJRPDFPage_ts__WEBPACK_IMPORTED_MODULE_23__.tJ,height:_virtual_VirtualJRPDFPage_ts__WEBPACK_IMPORTED_MODULE_23__.$h,rotation:{value:0}};else{if(a===s)return setTimeout(function(){h(e,t).then(i.resolve,i.reject)},30),i.promise;var c;try{if((c=r.GetPage(t)).IsEmpty())return c.delete(),i.reject(a.value),i.promise;n={width:c.GetWidth(),height:c.GetHeight(),rotation:{value:c.GetRotation&&c.GetRotation().value||0}}}catch(e){return i.reject(a.value),c&&c.delete(),i.promise}}}return e[t]={width:n.width,height:n.height,rotation:n.rotation.value},i.resolve(),i.promise}for(var c=[],u=e;u<e+t;u++)c.push(h(n,u));return Promise.all(c).then(function(){return n})}for(var l=0;l<a;l++){var d=i.GetAt(l);n[l]={width:d.width,height:d.height,rotation:d.rotation.value}}return n}},{key:"getXFAPageSizes",value:function(e,t){var n={},r=this.engine,i=this.xfaDoc,a=r.ErrorCode.e_ErrDataNotReady;function o(e,t){var n,s,c=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)();try{(s=i.GetPage(t)).IsEmpty()||(n={width:s.GetWidth(),height:s.GetHeight(),rotation:{value:0}})}catch(i){var u=r.getErrorCode(i);if(u!==r.ErrorCode.e_ErrUnknown)return u!==a?(c.reject(u.value),s&&s.delete(),c.promise):(setTimeout(function(){o(e,t).then(c.resolve,c.reject)},30),c.promise);n={width:_virtual_VirtualJRPDFPage_ts__WEBPACK_IMPORTED_MODULE_23__.tJ,height:_virtual_VirtualJRPDFPage_ts__WEBPACK_IMPORTED_MODULE_23__.$h,rotation:{value:0}}}return e[t]={width:n.width,height:n.height,rotation:n.rotation.value},c.resolve(),c.promise}for(var s=[],c=e;c<e+t;c++)s.push(o(n,c));return Promise.all(s).then(function(){return n})}},{key:"_generateRange",value:function(e,t,n){var r,i=0;return e.forEach(function(e){if(1===e.length){var a=e[0];(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.U)(a)||(a=0),a<0?a=0:a>n-1&&(a=n-1),i++,r?r.AddSingle(a):r=new t.Range(a)}else if(2===e.length){var o=e[0];(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.U)(o)||(o=0),o<0?o=0:o>n-1&&(o=n-1);var s=e[1];(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.U)(s)||(s=0),s<0?s=0:s>n-1&&(s=n-1),o>s&&(o=+s,o-=s=o-s),r?o===s?(i++,r.AddSingle(o)):(i+=s-o+1,r.AddSegment(o,s,0)):o===s?(i++,r=new t.Range(o)):(i+=s-o+1,r=new t.Range(o,s,0))}}),{ranges:r,addCount:i}}},{key:"copyPages",value:function(e,t){var n=this,r=this.engine,i=this.doc,a=i.GetPageCount();(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.U)(t)||(t=0);var o=this._generateRange(e,r,a),s=o.ranges,c=o.addCount,u=[],l=new r.String(""),d=i.StartImportPages(t,i,0,l,s);l.delete();for(var h=[],f=0;f<c;f++)h.push(t+f);return 100===d.GetRateOfProgress()&&h.map(function(e){var t,r=i.GetPage(e),a=r.GetIndex(),o=t=new _PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z(a,n);t.page=r,n.updatePageIndex(a+1,i.GetPageCount()-1,!0,!1),n.updatePageIndexMap(a,o),n.updatePageCache(t),u.push(t.toJson())}),s&&s.delete(),u}},{key:"saveCopyPagesData",value:function(e){var t=this.engine,n=this.doc;this.pageEditor&&this.pageEditor.generateContent();for(var r=n.GetPageCount(),i=0,a=[],o=t.WriterCallback.implement({Release:noop,Flush:function(){return!0},GetSize:function(){return i},WriteBlock:function(e,n,r){i+=r;var o,s=t.HEAPU8.buffer;return o=s.slice?s.slice(e,e+r):new Uint8Array(s,e,r).buffer,a.push(o),!0}}),s=this._generateRange(e,t,r),c=s.ranges,u=(s.addCount,t.ExtractPagesOptions.e_ExtractPagesOptionAnnotation.value|t.ExtractPagesOptions.e_ExtractPagesOptionOCProperties.value),l=n.StartExtractPages(o,u,c,null),d=-1;100!==d;){if(-1===(d=l.GetRateOfProgress()))return;l.Continue()}for(var h=new Uint8Array(i),f=0,g=0,p=a.length;g<p;g++){var v=a[g];h.set(new Uint8Array(v),f),f+=v.byteLength}h=h.slice(0),getDB().set("COPY_PAGES_BUFFERS",h)}},{key:"pastePages",value:function(e){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var t,n,r,i,a,o,s,c,u,l,d;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(h){switch(h.label){case 0:return t=this,n=this.engine,[4,getDB().get("COPY_PAGES_BUFFERS")];case 1:if(r=h.sent(),r.byteLength,i=new PDFDoc1(this.JR,{buffer:r}),a=new n.String(""),i.doc.Load(a)!==n.ErrorCode.e_ErrSuccess)throw"pastePages fail: source doc load error";for(o=new n.String(""),s=new n.Range,c=i.doc.GetPageCount(),u=0;u<c;u++)s.AddSingle(u);if(this.doc.StartImportPages(e,i.doc,0,o,s).GetErrorCode()===n.ErrorCode.e_ErrFormat)throw"format error";return l=this.doc.GetPageCount()-1,d=Array.from(Array(c).keys(),function(n){var r=n+e,i=new _PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z(r,t);return i.page=t.doc.GetPage(r),t.updatePageIndex(r+1,l,!0,!1),t.updatePageIndexMap(r,i),t.updatePageCache(i),i.toJson()}),[2,d]}})}).call(this)}},{key:"_renderThumbnailToBitmap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=this.engine;e.IsParsed()||e.StartParse(0,null,!1);var r=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.EF)(),i=76.5*r.x/72+.5|0,a=99*r.y/72+.5|0,o=new n.Bitmap(i,a,n.DIBFormat.e_DIBArgb,0,0),s=new n.Renderer(o,!1);s.SetRenderContentFlags(t);var c=e.GetDisplayMatrix(0,0,i,a,{value:0});return s.StartRender(e,c,null).Continue(),s.delete(),o}},{key:"_calcStep",value:function(e){var t=10;return e>1e3?t=e/100:e>100&&(t=e/10),t}},{key:"embedAllPageThumbnail",value:function(){var e,t,n,r,i,a,o,s,c;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(u){switch(u.label){case 0:this._embedCancel=!1,e=this.doc,t=e.GetPageCount(),n=e.GetPage(0).LoadThumbnail(),r=n.IsEmpty(),i=this._calcStep(t),a=0,o=0,u.label=1;case 1:if(!(o<t))return[3,4];if(this._embedCancel)throw{msg:"cancel",status:r};return s=e.GetPage(o),c=this._renderThumbnailToBitmap(s),s.SetThumbnail(c),c.delete(),a<=o+1||t===o+1?(a+=i,[4,(o+1)/t]):[3,3];case 2:u.sent(),u.label=3;case 3:return o++,[3,1];case 4:return[2,r]}})}},{key:"removeEmbeddedPageThumbnail",value:function(){var e,t,n,r,i,a,o;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(s){switch(s.label){case 0:this._removeEmbeddedCancel=!1,e=this.doc,t=e.GetPageCount(),n=e.GetPage(0).LoadThumbnail(),r=n.IsEmpty(),i=this._calcStep(t),a=0,o=0,s.label=1;case 1:if(!(o<t))return[3,4];if(this._removeEmbeddedCancel)throw{msg:"cancel",status:!r};return e.GetPage(o).RemoveThumbnail(),a<=o+1||t===o+1?(a+=i,[4,(o+1)/t]):[3,3];case 2:s.sent(),s.label=3;case 3:return o++,[3,1];case 4:return[2,!r]}})}},{key:"cancelEmbedAllPageThumbnail",value:function(){this._embedCancel=!0}},{key:"cancelRemoveEmbeddedPageThumbnail",value:function(){this._removeEmbeddedCancel=!0}},{key:"_isFullPage",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this).doc.GetPageCount();return e.length===t&&(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_54__._)(Array(t).keys()).every(function(t){return t===e[t]})}},{key:"importPagesFromPDFDocs",value:function(e){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(e){var t,n,r,i,a,o,s,c,u,l=arguments;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(d){switch(d.label){case 0:return t=this,n=l.length>1&&void 0!==l[1]?l[1]:[],r=l.length>2&&void 0!==l[2]?l[2]:"",i=this.engine,a=new i.String(r),o=n.reverse().reduce(function(n,o){var s=n.successfulCount,c=n.errs,u=o.srcDoc,l=o.srcPages,d=(u.oriFile?u.oriFile.name:void 0)||"temp.pdf",h=new i.Range,f=u.doc.GetPageCount();l.sort(function(e,t){return e>t?1:-1}),new Set(l).size!==f&&l.forEach(function(e){return h.AddSingle(e)});var g=new i.LayerTree(u.doc),p=0;if(!g.IsEmpty()){var v=g.GetRootNode();v.GetChildrenCount()>0&&r&&(p=i.ImportPageFlags.e_ImportFlagWithLayers.value),v.delete()}g.delete();var m=u.doc.GetPage(0);m.IsParsed()||m.StartParse(0,null,!1);for(var _=t.doc.StartImportPages(e,u.doc,p,a,h),y=-1;y<100;){if(-1===(y=_.GetRateOfProgress()))return{successfulCount:s,errs:(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_54__._)(c).concat([{name:d,err:"rate of progress is -1"}])};_.Continue()}return{successfulCount:s+l.length,errs:c}},{successfulCount:0,errs:[]}),s=o.successfulCount,c=o.errs,a.delete(),u=Array.from(Array(s).keys()).map(function(t){return t+e}).map(function(e){var n=t.doc.GetPage(e),r=n.GetIndex(),i=new _PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z(r,t);return i.page=n,t.updatePageIndex(r+1,t.doc.GetPageCount()-1,!0,!1),t.updatePageIndexMap(r,i),t.updatePageCache(i),i.toJson()}),[4,this.getBookmarks()];case 1:return[2,{bookmarks:d.sent(),pagesJson:u,errs:c}]}})}).apply(this,arguments)}},{key:"exportPagesToPDFDocs",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=this.engine,o=new a.String(r),s=new a.WString(i),c=this._isFullPage(e),u=null;c||(u=new a.Range,e.forEach(function(e){return u.AddSingle(e)}));var l=n.reverse().map(function(e){var n=e.destDoc,r=e.destIndex,i=n.oriFile?n.oriFile.name:"temp.pdf";if(c)try{return n.doc.InsertDocument(r,t.doc,a.InsertDocOptions.e_InsertDocOptionAttachments.value|a.InsertDocOptions.e_InsertDocOptionBookmark.value,s),{name:i,doc:n}}catch(e){return{name:i,err:e}}for(var l=n.doc.StartImportPages(r,t.doc,0,o,u),d=-1;d<100;){if(-1===(d=l.GetRateOfProgress()))return{name:i,err:"rate of progress is -1"};l.Continue()}return{name:i,doc:n}});return o.delete(),s.delete(),l}},{key:"startImportPages",value:function(e,t){var n=this,r=t.size,i=t.getBuffer,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_shared_consts__WEBPACK_IMPORTED_MODULE_1__.cm,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=this.engine,d=l.ReaderCallback.implement({Release:function(){release()},GetSize:function(){return r},ReadBlock:function(e,t,n){var r=new Uint8Array(i(t,n));return l.HEAPU8.set(r,e),!0}}),h=l.createPDFDocWithReaderCallback(d,!1),f=new l.String(a);h.Load(f);var g=h.GetPageCount(),p=g-1,v=this.doc.GetPageCount();(c=Math.min(p,c))<0&&(c=(c+g)%g),(u=Math.min(p,u))<0&&(u=(u+g)%g);var m=Math.min(c,u),_=Math.max(c,u),y=new l.String(s),S=new l.Range(m,_,0);e<0&&(e=e%v+v),e=Math.max(0,Math.min(v,e));for(var b=this.doc.StartImportPages(e,h,o,y,S),I=[],A=0;A<=_-m;A++)I.push(e+A);var P=[];return 100===b.GetRateOfProgress()&&I.map(function(e){var t,r=n.doc.GetPage(e),i=r.GetIndex(),a=t=new _PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z(i,n);t.page=r,n.updatePageIndex(i+1,n.doc.GetPageCount()-1,!0,!1),n.updatePageIndexMap(i,a),n.updatePageCache(t),P.push(t.toJson())}),P}},{key:"extractPages",value:function(e,t,n){var r=t.writeStream,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_shared_consts__WEBPACK_IMPORTED_MODULE_1__.cm,a=this.engine,o=new a.PDFDoc,s=new a.String("");o.Load(s);var c,u=this.doc;n&&(c=a.ReaderCallback.implement({Release:function(){release()},GetSize:function(){return n.size},ReadBlock:function(e,t,r){var i=new Uint8Array(n.getBuffer(t,r));return a.HEAPU8.set(i,e),!0}}),u=a.createPDFDocWithReaderCallback(c,!1),s=new a.String(i||""),u.Load(s));var l=u.GetPageCount(),d=new a.String("");e.reverse().forEach(function(e){if(1===e.length){if(e[0]>=l||isNaN(e[0]))return;e[0]<0&&(e[0]=e[0]%l+l);var t=new a.Range((e[0]+l)%l);o.StartImportPages(0,u,0,d,t)}else if(2===e.length){if(isNaN(e[0])||isNaN(e[1]))return;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]);if(n<0&&(n=n%l+l),r<0&&(r=r%l+l),n>=l)return;r=Math.min(r,l-1);var i=new a.Range((n+l)%l,(r+l)%l,0);o.StartImportPages(0,u,0,d,i)}});var h=0,f=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)();return o.GetPageCount()>0?a.saveDoc(o,a.WriterCallback.implement({Release:function(){},Flush:function(){return f.resolve(h),!0},GetSize:function(){return h},WriteBlock:function(e,t,n){h+=n;var i,o=a.HEAPU8.buffer;return i=o.slice?o.slice(e,e+n):new Uint8Array(o,e,n).buffer,r(i,t,n),!0}}),a.SaveFlags.e_SaveFlagNormal.value):f.reject(new Error("Cannot extract pages on none page document")),f.promise}},{key:"getHeaderFooter",value:function(e){var t=this;e||(e=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)());try{if(!this.doc.HasHeaderFooter())return e.resolve(null);var n=this.doc.GetEditableHeaderFooter(),r=n.page_range,i={start:r.start_number,end:r.end_number,filter:r.filter.value},a=n.content,o={TopLeft:a.header_left_content.toString(),TopCenter:a.header_center_content.toString(),TopRight:a.header_right_content.toString(),BottomLeft:a.footer_left_content.toString(),BottomCenter:a.footer_center_content.toString(),BottomRight:a.footer_right_content.toString()},s=n.page_margin;e.resolve({font:this.JR.getPDFString(n.font.GetBaseFontName(this.doc)),textSize:n.text_size,textColor:n.text_color,hasTextShrinked:n.has_text_shrinked,hasFixedSized:n.has_fixedsize_for_print,ranges:i,margin:{left:s.left,right:s.right,top:s.top,bottom:s.bottom},startPageNumber:n.start_page_number,contents:o,contentFormats:{},underline:n.is_underline})}catch(n){isNaN(n)||(n=this.engine.getErrorCode(n)),n.value&&17==n.value?setTimeout(function(){t.getHeaderFooter(e)},200):e.reject(n)}return e.promise}},{key:"addHeaderFooter",value:function(e,t){var n=this,r=this.doc;t||(t=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)());try{var i=(0,_headerFooter_js__WEBPACK_IMPORTED_MODULE_13__.Z)(this.engine,r,e);r.AddHeaderFooter(i),i.delete(),this.getHeaderFooter(t)}catch(r){isNaN(r)||17!=this.engine.getErrorCode(r).value?t.reject(r):setTimeout(function(){n.addHeaderFooter(e,t)},200)}return t.promise}},{key:"updateHeaderFooter",value:function(e,t){var n=this,r=this.doc;t||(t=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)());try{var i=(0,_headerFooter_js__WEBPACK_IMPORTED_MODULE_13__.Z)(this.engine,r,e);r.UpdateHeaderFooter(i),this.getHeaderFooter(t)}catch(r){if("number"==typeof r){var a=this.engine.getErrorCode(r).value;if("number"==typeof a&&17==a)return void setTimeout(function(){n.updateHeaderFooter(e,t)},200)}t.reject(r)}return t.promise}},{key:"removeHeaderFooter",value:function(e){var t=this;e||(e=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)());try{this.doc.RemoveAllHeaderFooters(),e.resolve()}catch(n){if(17!=this.engine.getErrorCode(n).value)throw n;setTimeout(function(){t.removeHeaderFooter(e)},200)}return e.promise}},{key:"getAnnotsRawData",value:function(e){var t=this;try{var n=this.engine,r=[];for(var i in e){var a=e[i];r.push(this.getPageByIndex(a.page))}return Promise.all(r).then(function(n){var r=[];for(var i in e){var a=e[i],o=a.page=t.pageIndexMap[a.page];a.iterator=r.length,r.push(o.getAnnotById(a.index))}return Promise.all(r)}).then(function(t){var r=[];for(var i in e){var a=t[e[i].iterator].annot,o=a.GetDict(),s={};switch(a.GetType().value){case 13:var c=o.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(n,"AP"));if(c){var u=c.GetDirectObject().GetDict().GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(n,"N"));u&&(s.N=retriveDict(n,s,"",u.GetDirectObject()))}break;case 17:var l=o.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(n,"FS"));l&&(s.FS=retriveDict(n,s,"",l.GetDirectObject()));break;case 18:var d=o.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(n,"Sound"));d&&(s.Sound=retriveDict(n,s,"",d.GetDirectObject()))}r.push({index:i,raw:s})}return r})}catch(e){throw console.error(engine.getErrorCode(e)),new Error(e)}}},{key:"generateHashData",value:function(e){var t=e.data;var n=function(e,t){var n=new e.String,r=e._malloc(t.length);return e.HEAPU8.set(t,r),n.Load(r,t.length),n}(this.engine,t);return this.engine.Library.GenerateHashData(this.engine.CryptType.e_Crypt_SHA256,n,n.GetLength()).toString()}},{key:"checkMDPPermission",value:function(e){var t=this.engine,n=e.GetFieldMDPAction().value;switch(n){case t.FieldMDPAction.e_FieldMDPActionInclude.value:case t.FieldMDPAction.e_FieldMDPActionExclude.value:var r=e.GetFieldMDPActionFields(),i=Array.from({length:r.GetSize()},function(e,t){return r.GetAt(t).toString()}),a=n===t.FieldMDPAction.e_FieldMDPActionExclude.value,o=this.formModule.iterateFields(i,a),s=!0,c=!1,u=void 0;try{for(var l,d=o[Symbol.iterator]();!(s=(l=d.next()).done);s=!0){l.value.SetFlags(1)}}catch(e){c=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(c)throw u}}break;case t.FieldMDPAction.e_FieldMDPActionAll.value:var h=this.formModule.iterateFields([],!0),f=!0,g=!1,p=void 0;try{for(var v,m=h[Symbol.iterator]();!(f=(v=m.next()).done);f=!0){v.value.SetFlags(1)}}catch(e){g=!0,p=e}finally{try{f||null==m.return||m.return()}finally{if(g)throw p}}}}},{key:"sign",value:function(e,t){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var n,r,i,a,o,s,c,u,l,d,h,f,g,p,v,m,_,y,S,b,I,A,P,D,E,C,w,k;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(T){switch(T.label){case 0:return n=this,r=this.engine,i=r.KeyName,this.isDynamicXFA()?[2,this.getPageByIndex(e.pageIndex).then(function(r){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(n){switch(n.label){case 0:return!1?[4,_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_30__.ZP.loadWasmModule(_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_30__.v6)]:[3,2];case 1:n.sent(),n.label=2;case 2:return this.JR.isLicenseEvaluation()?[4,_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_30__.ZP.loadWasmModule(_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_30__.LQ)]:[3,4];case 3:n.sent(),n.label=4;case 4:return[2,new _xfa_SignatureField__WEBPACK_IMPORTED_MODULE_32__.Z(this.engine,r,e.widgetIndex).sign(e,t)]}})}).call(n)})]:Array.isArray(e.fieldNames)&&e.fieldNames.length?(o=[],this.JR.isLicenseEvaluation()&&o.push(_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_30__.ZP.loadWasmModule(_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_30__.LQ)),s=this.formModule.form,c=e.shareVDictType||0,u=e.flag||256,0===c?[2,Promise.resolve()]:(l=void 0!==e.signTime&&e.signTime>0?new Date(e.signTime):new Date,d=new r.DateTime(l.getFullYear(),l.getMonth()+1,l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds(),-l.getTimezoneOffset()/60,0),(h=t&&t.image||e.inkSign)&&640&u&&("object"==(void 0===h?"undefined":(0,_swc_helpers_type_of__WEBPACK_IMPORTED_MODULE_58__._)(h))&&(h=h.url),h.length>0&&(g=this.JR.createReaderCallback(h),p=new r.Image(g),f=p.GetFrameBitmap(0),u|=128)),(v=new this.engine.SignatureAppearanceOptions).showLogo=!!(!0&u),m=e.fontName||"Helvetica",_=e.fontSize||0,y=e.iconFontName||"Helvetica",S=e.iconFontSize||0,v.fontName=new r.WString(y),v.fontSize=S,v.iconFontName=new r.WString(m),v.iconFontSize=_,b=function(t){var a=t.GetControl(0).GetWidget().GetPage().GetIndex();return n.getPageByIndex(a).then(function(){if(0===c)t.CreateSigVDict(new r.String(e.filter),new r.String(e.subfilter));else if("string"==typeof c){var n=s.GetField(0,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(r,c)),a=new r.Signature(n);if(e.filter=a.GetFilter().toString(),e.subfilter=a.GetSubFilter().toString(),!e.filter||!e.subfilter)throw new Error("filter and subfilter in V dictionary can't be null.");e.signer=a.GetKeyValue(i.e_KeyNameSigner).toString(),e.reason=a.GetKeyValue(i.e_KeyNameReason).toString(),e.email=a.GetKeyValue(i.e_KeyNameContactInfo).toString(),e.distinguishName=a.GetKeyValue(i.e_KeyNameDN).toString(),e.location=a.GetKeyValue(i.e_KeyNameLocation).toString(),e.text=a.GetKeyValue(i.e_KeyNameText).toString()}t.SetFilter(new r.String(e.filter)),t.SetSubFilter(new r.String(e.subfilter)),e.signer&&t.SetKeyValue(i.e_KeyNameSigner,new r.WString(e.signer)),e.reason&&t.SetKeyValue(i.e_KeyNameReason,new r.WString(e.reason)),e.email&&t.SetKeyValue(i.e_KeyNameContactInfo,new r.WString(e.email)),e.distinguishName&&t.SetKeyValue(i.e_KeyNameDN,new r.WString(e.distinguishName)),e.location&&t.SetKeyValue(i.e_KeyNameLocation,new r.WString(e.location));var o=e.text||e.signer;0!=e.flag&&o&&256&u&&t.SetKeyValue(i.e_KeyNameText,new r.WString(o)),t.SetSignTime(d),f&&t.SetBitmap(f),t.SetDocPermission({value:e.docPermission||0}),t.SetSignatureAppearanceOptions(v),t.SetAppearanceFlags(u),e.defaultContentsLength&&t.SetDefaultContentsLength(e.defaultContentsLength),t.GenerateSignAppearance(),t.ResetSignAppearance()})},e.fieldNames.forEach(function(e,t){var i=s.GetField(0,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(r,e));if(i.IsEmpty()||i.GetType()!==r.FieldType.e_TypeSignature)throw new Error("Failed to sign doc, field is not exist or incorrect type: ".concat(e));var c=new r.Signature(i);0===t&&(n.checkMDPPermission(c),a=c),o.push(b(c))}),[2,Promise.all(o).then(function(){var t=(0,_signature_callback_ts__WEBPACK_IMPORTED_MODULE_14__.cP)(r,a,e.hashAlgorithm,e.filter,e.subfilter),n=(0,_signature_callback_ts__WEBPACK_IMPORTED_MODULE_14__.Kq)(t);return Promise.resolve(n)})])):(A=!1,P=Promise.resolve(),D=e.flag||256,(E=e.fieldName)?[4,this.formModule.getField(E)]:[3,2]);case 1:if((C=T.sent()).IsEmpty()||C.GetType()!==r.FieldType.e_TypeSignature)throw new Error("Failed to sign doc, field is not exist or incorrect type: ".concat(E));I=new r.Signature(C),I.GetSignatureType()===this.engine.SignatureType.e_SignatureTypePagingSeal?(I=I.GetPagingSealSignature(),D=e.flag||128):this.checkMDPPermission(I),w=I.GetControl(0).GetWidget().GetPage().GetIndex(),P=this.getPageByIndex(w),T.label=2;case 2:return k=!this.isOwner,[2,P.then(function(e){return!1}).then(function(e){return n.JR.isLicenseEvaluation()&&_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_30__.ZP.loadWasmModule(_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_30__.LQ)}).then(function(a){if(!I){if(e.pagingSigConfig){var o=n.addPagingSealSignature({pagingSigConfig:e.pagingSigConfig}).pagingSig;I=o,D=e.flag||128}else{var s=n.doc.GetPage(e.pageIndex);if(s.IsEmpty())return"NoPage";var c=new r.WString(E),u=e.rect;I=s.AddSignature(new r.CFX_FloatRect(u.left,u.bottom,u.right,u.top),c,{value:0},k)}A=!0}I.CreateSigVDict(new r.String(e.filter),new r.String(e.subfilter)),I.SetFilter(new r.String(e.filter)),I.SetSubFilter(new r.String(e.subfilter)),e.signer&&I.SetKeyValue(i.e_KeyNameSigner,new r.WString(e.signer)),e.reason&&I.SetKeyValue(i.e_KeyNameReason,new r.WString(e.reason)),e.email&&I.SetKeyValue(i.e_KeyNameContactInfo,new r.WString(e.email)),e.distinguishName&&I.SetKeyValue(i.e_KeyNameDN,new r.WString(e.distinguishName)),e.location&&I.SetKeyValue(i.e_KeyNameLocation,new r.WString(e.location));var l,d=e.text||e.signer;0!=e.flag&&d&&256&D&&I.SetKeyValue(i.e_KeyNameText,new r.WString(d)),l=void 0!==e.signTime&&e.signTime>0?new Date(e.signTime):new Date;var h,f=new r.DateTime(l.getFullYear(),l.getMonth()+1,l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds(),-l.getTimezoneOffset()/60,0);if(I.SetSignTime(f),e.timeFormat){var g=e.timeFormat,p=g.format,v=g.timeZoneOptions;I.SetTimeDescription((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,(0,_shared_formatDate_js__WEBPACK_IMPORTED_MODULE_27__.Z)(l,p,v)))}if((h=t&&t.image||e.inkSign)&&640&D&&("object"==(void 0===h?"undefined":(0,_swc_helpers_type_of__WEBPACK_IMPORTED_MODULE_58__._)(h))&&(h=h.url),h.length>0)){var m=n.JR.createReaderCallback(h),_=new r.Image(m).GetFrameBitmap(0);I.SetBitmap(_),D|=128}I.SetDocPermission({value:e.docPermission||0});var y=new n.engine.SignatureAppearanceOptions;y.showLogo=!!(!0&D);var S=e.fontName||"Helvetica",b=e.fontSize||0,P=e.iconFontName||"Helvetica",C=e.iconFontSize||0;if(y.fontName=new r.WString(P),y.fontSize=C,y.iconFontName=new r.WString(S),y.iconFontSize=b,y.textColor=I.GetDefaultAppearance().text_color,I.SetSignatureAppearanceOptions(y),I.SetAppearanceFlags(D),e.defaultContentsLength&&I.SetDefaultContentsLength(e.defaultContentsLength),e.native){var w=(0,_signature_callback_ts__WEBPACK_IMPORTED_MODULE_14__.Xd)(r,{path:e.certificate}),T=(0,_signature_callback_ts__WEBPACK_IMPORTED_MODULE_14__.Xd)(r),F=I.StartSign_new(w,new r.WString(e.certPWD),{value:e.hashAlgorithm},T,0,null);if(F.Continue(),-1==F.GetRateOfProgress())throw new Error("Sign Error");return T.GetBlob()}var G=(0,_signature_callback_ts__WEBPACK_IMPORTED_MODULE_14__.cP)(n.engine,I,e.hashAlgorithm,e.filter,e.subfilter);if(A){if(e.pagingSigConfig){for(var R=[],x=e.pagingSigConfig.pageRange[0]-1;x<e.pagingSigConfig.pageRange[1];x++)R.push(n.getPageByIndex(x).then(function(e){if(e)return e.reParsePage().then(function(){e.reloadAnnots()})}));return Promise.all(R).then(function(e){return(0,_signature_callback_ts__WEBPACK_IMPORTED_MODULE_14__.Kq)(G)})}return n.getPageByIndex(e.pageIndex).then(function(e){return e.reloadAnnots()}).then(function(e){return(0,_signature_callback_ts__WEBPACK_IMPORTED_MODULE_14__.Kq)(G)})}var O=(0,_signature_callback_ts__WEBPACK_IMPORTED_MODULE_14__.Kq)(G);return Promise.resolve(O)})]}})}).call(this)}},{key:"signForESignCN",value:function(e){var t=this,n=1,r=2;this.loadForm();var i=function(e){var i,a,o=function(e,n){return"pagingSignature"===(e.config.pagingSigConfig?"pagingSignature":"normalSignature")?function(e){var n;return n=e.config.pagingSigConfig.pagingSigObjNum?e.config.pagingSigConfig.pagingSigObjNum:t.addPagingSealSignature({pagingSigConfig:e.config.pagingSigConfig}).pagingSigObjNum,t.getPagingSealSignature({sigObjNum:n})}(e):function(e,n){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var t,r,i,a,o;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(s){return t=this,r=function(e){if(e.fieldName)return e.fieldName;for(var n,r=t.doc.GetPage(e.pageIndex),i=r.GetAnnotCount(),a=0;a<i;a++){var o=r.GetAnnot(a);o.GetDict().GetObjNum()===e.fieldId&&(n=o.GetDict().GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(t.engine,"T")).GetWideString().toString())}return n},i=e.fields[n],a=r(i),(o=this.loadForm().getField(a).engineField).GetSignatureType()===this.engine.SignatureType.e_SignatureTypePagingSeal&&(o=o.GetPagingSealSignature()),[2,o]})}).call(t)}(e,n)},s=function(e){var n=e.CreateSigVDict((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(t.engine,""),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(t.engine,""));return t.doc.AddIndirectObject(n),n},c=function(e,n,r){var i=e.GetDict(),a=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(t.engine,"V");i.SetAtReference(a,r,t.doc),e.ResetSignAppearance()},u=function(e,n,r){var i=n.config.flag||256,a=n.fields[r].inkSign?n.fields[r].inkSign:n.config.inkSign;if(a&&128&i){if(e.GetSignatureType()===t.engine.SignatureType.e_SignatureTypePagingSeal)!function(e,n){var r=t.JR.createReaderCallbackByBuffer(n),i=new t.engine.Image(r).GetFrameBitmap(0);e.SetBitmap(i),e.GenerateAppearance()}(e,a);else{var o;o="string"==typeof a?t.JR.createReaderCallback(a):t.JR.createReaderCallbackByBuffer(a);var s=new t.engine.Image(o).GetFrameBitmap(0);e.SetBitmap2AP(s),e.SetAppearanceFlags(i);var c=new t.engine.SignatureAppearanceOptions;c.showLogo=!1,e.SetSignatureAppearanceOptions(c),0===r?e.GenerateSignAppearance():e.ResetSignAppearance()}}},l=function(e,n){var r=e.GetDict(),i=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.n6)(t.engine,t.doc,n);i&&r.SetAtReference((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(t.engine,"Signer"),i,t.doc)},d=function(n){var r=n.GetDict();r.SetAtString((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(t.engine,"FoxitSignFT"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(t.engine,"FoxitSignDate")),eSignCNOptType.FLOW_SIGN===e.config.optType&&r.SetAtString((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(t.engine,"FST"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(t.engine,"FullSignature"))},h=e.fields;h=function(n){for(var r=0,i=0;i<n.length;i++){o(e,i).GetSignatureType()===t.engine.SignatureType.e_SignatureTypePagingSeal&&(r=i)}if(r>0){var a=n.splice(r,1);n.unshift(a[0])}return n}(h);for(var f=[],g=0;g<h.length;g++){var p=o(e,g);f.push(p),0===g?(i=p,a=s(p)):c(p,0,a),u(p,e,g),e.config.optType===eSignCNOptType.SELF_SIGN&&h[g].foxitSignFieldType===n&&d(p),[eSignCNOptType.FLOW_SIGN,eSignCNOptType.FLOW_END_SIGN].includes(e.config.optType)&&(h[g].foxitSignFieldType===n&&(d(p),l(p,e.config.signIndex),(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.h2)(t.doc,t.engine,p,e.config.signIndex)),h[g].foxitSignFieldType===r&&l(p,e.config.signIndex))}return i}(e),a=function(e,n){!function(e,n){n.config.optType===eSignCNOptType.SELF_SIGN&&t.setESignCNSelfSignMode();var r=t.engine.KeyName;if(n.config.signer||n.config.phone){var i=n.config.signer||n.config.phone;e.SetKeyValue(r.e_KeyNameSigner,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(t.engine,i))}n.config.reason=n.config.reason?n.config.reason:"",e.SetKeyValue(r.e_KeyNameReason,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(t.engine,n.config.reason));var a=n.config.signer||n.config.phone||"";e.SetKeyValue(r.e_KeyNameContactInfo,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(t.engine,a)),n.config.distinguishName&&e.SetKeyValue(r.e_KeyNameDN,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(t.engine,n.config.distinguishName)),n.config.location=n.config.location?n.config.location:"",e.SetKeyValue(r.e_KeyNameLocation,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(t.engine,n.config.location));var o=n.config.text||n.config.signer,s=n.config.flag||256;o&&256&s&&e.SetKeyValue(r.e_KeyNameText,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(t.engine,o));var c=new Date,u=new t.engine.DateTime(c.getFullYear(),c.getMonth()+1,c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds(),-c.getTimezoneOffset()/60,0);e.SetSignTime(u),e.SetAppearanceFlags(s),e.SetFilter((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(t.engine,n.config.filter)),e.SetSubFilter((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(t.engine,n.config.subfilter)),n.config.docPermission&&e.SetDocPermission({value:n.config.docPermission})}(e,n),function(e,n){if(n.config.signer||n.config.phone){var r={signerName:n.fields[n.fields.length-1].signerName,operatorName:n.fields[n.fields.length-1].operatorName,authType:n.fields[n.fields.length-1].authType,email:n.config.signer,phone:n.config.phone,authTime:n.fields[n.fields.length-1].authTime,signType:n.fields[n.fields.length-1].signType,willAuthType:n.fields[n.fields.length-1].willAuthType,willAuthTime:n.fields[n.fields.length-1].willAuthTime,signId:n.config.signId};"in"===n.fields[n.fields.length-1].signType&&(r=Object.assign(r,{companyId:n.fields[n.fields.length-1].companyId,companyName:n.fields[n.fields.length-1].companyName,samlResponse:n.fields[n.fields.length-1].samlResponse})),t.addAuditTrail(e,r)}else console.error("pdf-jr/PDFDoc.js signForESignCN error: signer can't be null",n.config)}(e,n);var r=function(e,n){var r=(0,_signature_callback_ts__WEBPACK_IMPORTED_MODULE_14__.cP)(t.engine,e,n.config.hashAlgorithm,n.config.filter,n.config.subfilter);return(0,_signature_callback_ts__WEBPACK_IMPORTED_MODULE_14__.Kq)(r)}(e,n);return r}(i,e);return a}},{key:"setESignCNSelfSignMode",value:function(){var e=this.doc.GetCatalog(),t=new this.engine.String("ESignSelfMode"),n=new this.engine.String("1");e.SetAtString(t,n)}},{key:"setESignCNFlowSignMode",value:function(e){var t;switch(e){case 1:t="external";break;case 2:t="internal";break;default:t=""}if(!t)throw Error("invalid modeValue");var n=this.doc.GetCatalog(),r=new this.engine.String("ESignMode"),i=new this.engine.String(t);return n.SetAtString(r,i),!0}},{key:"getESignCNFlowSignMode",value:function(){var e=this.doc.GetCatalog(),t=new this.engine.String("ESignMode"),n=e.GetElement(t);return n&&n.GetString().toString()}},{key:"getESignCNMode",value:function(e){var t=e.GetSignatureDict(),n=new this.engine.String("Signer"),r=t.GetElement(n);if(!r)return"";var i=new this.engine.String("AuthMethod");r.GetType()===this.engine.PDFObjectType.e_Reference&&(r=r.GetDirectObject());var a=r.GetDict().GetElement(i),o=new this.engine.String("Subtype"),s="out";if(a.GetType()===this.engine.PDFObjectType.e_Array)for(var c=a.GetArray(),u=c.GetElementCount(),l=0;l<u;l++){var d=c.GetElement(l);if(d)if(d.GetType()===this.engine.PDFObjectType.e_Reference&&(d=d.GetDirectObject()),d.GetType()===this.engine.PDFObjectType.e_Dictionary&&(d=d.GetDict()),"SAML_Response"===d.GetElement(o).GetString().toString()){s="in";break}}return s}},{key:"addPagingSealSignature",value:function(e){var t,n=this,r=e.pagingSigConfig,i=e.refresh,a=void 0===i||i,o=r.inkSign,s=r.pageRange,c=r.width,u=r.height,l=r.sealPosition,d=void 0===l?this.engine.PagingSealPosition.e_PagingSealPositionRight:l,h=r.sealOffset,f=r.firstPagePercent,g=r.isOnPerforation,p=void 0!==g&&g,v=r.isDisplayMultipleSeal,m=void 0!==v&&v,_=r.pageCountForEachSeal,y=void 0===_?3:_,S=!this.isOwner;switch(d){case"right":default:t=this.engine.PagingSealPosition.e_PagingSealPositionRight;break;case"left":t=this.engine.PagingSealPosition.e_PagingSealPositionLeft;break;case"top":t=this.engine.PagingSealPosition.e_PagingSealPositionTop;break;case"bottom":t=this.engine.PagingSealPosition.e_PagingSealPositionBottom}var b=s[2]||0;switch(b){case 1:b=this.engine.RangeFilter.e_Even;break;case 2:b=this.engine.RangeFilter.e_Odd;break;default:b=this.engine.RangeFilter.e_All}var I=new this.engine.Range(s[0],s[1],b);try{var A=this.doc.AddPagingSealSignature(I,c,u,S),P=new this.engine.PagingSealConfig(t,h,f,p,m,y);A.SetPagingSealConfig(P);var D=A.GetDict().GetObjNum();if(o&&this.setSignatureAP({pagingSig:A,inkSignBuffer:o}),A.GenerateAppearance(),a)for(var E,C=function(e){E.getPageByIndex(e).then(function(e){return e.reParsePage(),e}).then(function(t){t.reloadAnnots(),e===s[1]-1&&n.reloadLayer()})},w=s[0]-1;w<s[1];w++)E=this,C(w);return{pagingSigObjNum:D,addedObjNums:this.getAllPagingSealSignatures(D),pagingSig:A}}catch(e){return console.error("add pagingSeal error",e),null}}},{key:"getAllPagingSealSignatures",value:function(e){var t=this.doc.GetSignatureCount();if(!t)return[];if(e){for(var n={},r=0;r<t;r++){var i=this.doc.GetSignature(r),a=i.GetSignatureType();if(!i.IsEmpty()&&a===this.engine.SignatureType.e_SignatureTypePagingSeal){var o=i.GetPagingSealSignature();if(!o.IsEmpty()){var s=o.GetDict().GetObjNum(),c=n[s]||[];c.push(i.GetDict().GetObjNum()),n[s]=c,i.delete()}}}var u=Object.values(n).find(function(t){return t.includes(e)});return Array.from(new Set(u))}for(var l=[],d=0;d<t;d++){var h=this.doc.GetSignature(d);h.GetSignatureType()===this.engine.SignatureType.e_SignatureTypePagingSeal&&l.push(h.GetDict().GetObjNum()),h.delete()}return Array.from(new Set(l))}},{key:"getPageObjNumOfSig",value:function(e){var t=new this.engine.String("P"),n=e.GetDict().GetElement(t);n.GetType()===this.engine.PDFObjectType.e_Reference&&(n=n.GetDirectObject()),n.GetType()===this.engine.PDFObjectType.e_Dictionary&&(n=n.GetDict());var r=n.GetObjNum();return t.delete(),r}},{key:"getAllPagingSigsInfo",value:function(e){var t=this.engine,n=this.doc,r=n.GetSignatureCount(),i=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.J5)(t,n);if(!r)return[];for(var a={},o=0;o<r;o++){var s=this.doc.GetSignature(o),c=this.getPageObjNumOfSig(s),u=i.indexOf(c),l=s.GetSignatureType();if(!s.IsEmpty()&&l===this.engine.SignatureType.e_SignatureTypePagingSeal){var d=s.GetPagingSealSignature();if(!d.IsEmpty()){var h=d.GetDict().GetObjNum(),f=a[h]||[],g={objNum:s.GetDict().GetObjNum(),pageIndex:u};f.push(g),a[h]=f}}}a=Object.values(a),e&&(a=a.filter(function(t){return t.some(function(t){return t.objNum===e})}));var p=[];return a.filter(function(e){return e.filter(function(e){var t="".concat(e.pageIndex,"-").concat(e.objNum);return-1===p.indexOf(t)&&(p.push(t),!0)})})}},{key:"updatePagingSealSignature",value:function(e){for(var t,n=function(e){t.getPageByIndex(e).then(function(e){return e.reParsePage(),e}).then(function(t){t.reloadAnnots(),e===r.doc.GetPageCount()-1&&r.reloadLayer()})},r=this,i=e.pagingSigObjNum,a=e.pagingSigConfig,o=this.removePagingSealSignature({pagingSigObjNum:i,refresh:!1}).removedObjNums,s=this.addPagingSealSignature({pagingSigConfig:a,refresh:!1}),c=s.pagingSigObjNum,u=s.addedObjNums,l=0;l<this.doc.GetPageCount();l++)t=this,n(l);return{pagingSigObjNum:c,removedObjNums:o,addedObjNums:u}}},{key:"updatePagingSealInfo",value:function(e){var t,n=function(e){t.getPageByIndex(e).then(function(e){return e.reParsePage(),e}).then(function(t){t.reloadAnnots(),e===r.doc.GetPageCount()-1&&r.reloadLayer()})},r=this,i=e.pagingSigObjNum,a=e.pagingSigConfig,o=this.getPagingSealSignature({sigObjNum:i}),s=o.GetPagingSealConfig(),c=s.paging_seal_position,u=(a=Object.assign({},{offset:Math.round(s.offset),firstPagePercent:s.first_page_percent,position:c},a)).offset,l=a.firstPagePercent,d=a.isOnPerforation,h=void 0!==d&&d,f=a.isDisplayMultipleSeal,g=void 0!==f&&f,p=a.pageCountForEachSeal,v=void 0===p?3:p,m=new this.engine.PagingSealConfig(c,u,l,h,g,v);o.SetPagingSealConfig(m),o.GenerateAppearance();for(var _=0;_<this.doc.GetPageCount();_++)t=this,n(_);return this.getAllPagingSealSignatures(i)}},{key:"removePagingSealSignature",value:function(e){var t=this,n=e.pagingSigObjNum,r=e.refresh,i=void 0===r||r,a=this.getAllPagingSealSignatures(n),o=this.getPagingSealSignature({sigObjNum:n});if(this.doc.RemoveSignature(o),i)for(var s,c=function(e){s.getPageByIndex(e).then(function(e){return e.reParsePage(),e}).then(function(n){n.reloadAnnots(),e===t.doc.GetPageCount()-1&&t.reloadLayer()})},u=0;u<this.doc.GetPageCount();u++)s=this,c(u);return{removedObjNums:a}}},{key:"getPagingSealSignature",value:function(e){var t,n=e.sigObjNum,r=this.doc.GetSignatureCount();if(r)for(var i=0;i<r;i++){var a=this.doc.GetSignature(i);if(a.GetDict().GetObjNum()===n&&a.GetSignatureType()===this.engine.SignatureType.e_SignatureTypePagingSeal){t=a.GetPagingSealSignature();break}}return t}},{key:"isESignCNFile",value:function(){for(var e,t=this.doc.GetCatalog(),n=new this.engine.String("ESignMode"),r=t.GetElement(n),i=!!r&&r.GetString().toString(),a=this.doc.GetPageCount(),o=0;o<a;o++)for(var s=this.doc.GetPage(o),c=s.GetAnnotCount(),u=0;u<c;u++){var l=s.GetAnnot(u);if(l){var d=l.GetType();if(this.engine.AnnotType.e_Widget==d){var h=l.GetDict();if(h){var f=this.getSignatureFTValue(h);if(f)if("Sig"==f.GetString().toString()){var g=!1,p=new this.engine.String("V"),v=h.GetElement(p);if(v&&v.GetType()===this.engine.PDFObjectType.e_Reference&&v.GetDirectObject()&&(g=!!(v=v.GetDirectObject().GetDict())),g){var m=new this.engine.String("Signer");if(e=!!v.GetElement(m))break}}}}}}return i||e}},{key:"assignSignerForESignCN",value:function(e){var t=this,n=this.doc,r=this.engine,i=e.configInfo,a=e.recipients,o=function(e,i,a,o){var c=n.GetCatalog(),u=function(e){var r=new t.engine.PDFArray.Create;return e.forEach(function(e){r.AddReference(e,n)}),r}(e),l=s(u,a,i);c.SetAtReference((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,"DocESign"),l,n);var d="outer"===o?"external":"internal";c.SetAtString((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,"ESignMode"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,d))},s=function(e,t,i){var a=new r.PDFDictionary.Create;return a.SetAtString((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,"Type"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,"DocESign")),a.SetAt((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,"Signers"),e),a.SetAtInteger((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,"Ordered"),t),a.SetAtReference((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,"FlowSignConfigInfo"),i,n),n.AddIndirectObject(a),a},c=function(e,i){var a=e.docStore,o=e.processId,s=e.taskName,c=[],u=function(e,t,i){var a=new r.PDFDictionary.Create;return a.SetAtInteger((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,"DocStore"),e),a.SetAtString((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,"ProcessID"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,t)),a.SetAtString((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,"TaskName"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,i)),n.AddIndirectObject(a),a}(a,o,s);return i.forEach(function(e){var i=function(e){var i={Email:e.email,Phone:e.mobile,Company:e.company};"inner"===e.signMode&&(i.EnterpriseId=e.companyId,i.Enterprise=e.companyName);var a=new t.engine.PDFArray.Create;return Object.keys(i).forEach(function(e){if(i[e]){var t=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.Np)(n,r,{type:"AuthMethod",subType:e,id:i[e]});a.AddReference(t,n)}}),a}(e),a=function(e,t){var i=e.color,a=e.signOrder,o=e.name,s=e.authType,c=e.freeRectItem,u=new r.PDFDictionary.Create;return u.SetAtName((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,"Type"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,"Signer")),u.SetAtName((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,"Name"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,o)),u.SetAtInteger((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,"SignOrder"),a),u.SetAtString((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,"Color"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,i)),u.SetAt((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,"AuthMethod"),t),u.SetAtName((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,"AuthType"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,s)),u.SetAtBoolean((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,"FreeRectItem"),!!c),n.AddIndirectObject(u),u}(e,i);if(c.push(a),!e.freeRectItem){var o=function(e,t,i){var a=e.fields,o=[];return a.forEach(function(e){var a=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.z4)(n,r,{objNumber:e.id,pageIndex:e.pageIndex});a&&(a.SetAtString((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,"FST"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,e.fieldType)),a.SetAtReference((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,"FlowSignConfigInfo"),t,n),a.SetAtReference((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,"Signer"),i,n),o.push(a))}),o}(e,u,a);!function(e,i){var a=new t.engine.PDFArray.Create;i.forEach(function(e){a.AddReference(e,n)}),e.SetAt((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,"Annots"),a)}(a,o)}}),{signersArray:c,flowSignConfigInfoDict:u}}(i,a),u=c.signersArray,l=c.flowSignConfigInfoDict,d=function(e){var t=new Set(e.map(function(e){return e.signOrder}));return t.size===e.length?_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.Yv.ORDERED:1===t.size?_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.Yv.UNORDERED:_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.Yv.PARTIAL}(a);!function(e,t,n,r){o(e,t,n,r)}(u,l,d,a[0].signMode)}},{key:"getSignatureFTValue",value:function(e){var t=new this.engine.String("FT"),n=new this.engine.String("Parent"),r=e.GetElement(t);if(!r){var i=e.GetElement(n);i&&i.GetType()===this.engine.PDFObjectType.e_Reference&&i.GetDirectObject()&&i.GetDirectObject().GetDict()&&(r=i.GetDirectObject().GetDict().GetElement(t))}return r}},{key:"addAuditTrail",value:function(e,t){t.authTime=t.authTime?t.authTime:"",t.authType=t.authType?t.authType:"",t.signerName=t.signerName?t.signerName:"",t.operatorName=t.operatorName?t.operatorName:"",t.phone=t.phone?t.phone:"";var n=this.doc,r=e.GetSignatureDict();return this.add_doc_audit_trail(n,r,t),!0}},{key:"updatePropAuthDictForESignCN",value:function(e){var t=e.fieldName,n=e.willingnessInfo,r=this.loadForm().getField(t).engineField.GetDict(),i=new this.engine.String("Prop_Auth"),a=r.GetElement(i);if(a&&a.GetType()===this.engine.PDFObjectType.e_Reference&&(a=a.GetDirectObject()).GetType()===this.engine.PDFObjectType.e_Dictionary){a=a.GetDict();var o=new this.engine.String("AuthAddData"),s=JSON.stringify(n),c=new this.engine.WString(s);a.SetAtWString(o,c)}}},{key:"add_new_enents_to_prop_events",value:function(e,t,n){var r=n.realName,i=new this.engine.String("Prop_Events"),a=t.GetElement(i);if(a&&a.GetType()==this.engine.PDFObjectType.e_Array){new this.engine.String("EventType"),new this.engine.String("Message");var o=new this.engine.String("Time"),s=a.GetArray();if(s){var c=new this.engine.String("EventType"),u=new this.engine.String("Message"),l=(new this.engine.PDFArray.Create,new this.engine.PDFDictionary.Create),d=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e?new Date(e):new Date,r=n.getFullYear(),i=t?"0".concat(n.getMonth()+1).slice(-2):n.getMonth()+1,a=t?"0".concat(n.getDate()).slice(-2):n.getDate(),o=t?"0".concat(n.getHours()).slice(-2):n.getHours(),s=t?"0".concat(n.getMinutes()).slice(-2):n.getMinutes(),c=t?"0".concat(n.getSeconds()).slice(-2):n.getSeconds(),u=n.getMilliseconds();return{year:r,month:i,day:a,hour:o,minute:s,second:c,milliseconds:u}}(),h=d.year,f=d.month,g=d.day,p=d.hour,v=d.minute,m=d.second,_=d.milliseconds,y=new this.engine.DateTime(h,parseInt(f),parseInt(g),parseInt(p),parseInt(v),parseInt(m),_,0,0),S=new this.engine.String("Info"),b=new this.engine.WString("".concat(r,"").concat(h,"-").concat(f,"-").concat(g," ").concat(p,":").concat(v,":").concat(m,"XXX"));l.SetAtDateTime(o,y),l.SetAtString(c,S),l.SetAtWString(u,b),e.AddIndirectObject(l),s.AddReference(l,e)}}}},{key:"getSignatureSignTimeStamp",value:function(e){var t=function(e){return"0".concat(e).slice(-2)},n=e.GetSignTime(),r="".concat(n.year,"-").concat(t(n.month),"-").concat(t(n.day)," ").concat(t(n.hour),":").concat(t(n.minute),":").concat(t(n.second));return new Date(r).getTime()}},{key:"add_doc_audit_trail",value:function(e,t,n){var r,i=(0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_57__._)({},{INDIVIDUAL_TELECOM_3_FACTOR:"",INDIVIDUAL_BANKCARD_4_FACTOR:"",INDIVIDUAL_ARTIFICIAL:"",FACEAUTH_ZMXY:"",FACEAUTH_TECENT_CLOUD:"",FACEAUTH_ESIGN:"e",FACEAUTH_DING_TALK:"",FACEAUTH_WE_CHAT_FACE:"",ORGANIZATION_INFO_AUTH:"",ORGANIZATION_TRANSFER_RANDOM_AMOUNT:"",ORGANIZATION_REVERSE_PAYMENT:"",ORGANIZATION_ZMXY:"",LEGAL_REP_SIGN_AUTHORIZE:"",LEGAL_REP_AUTH:""},{CODE_SMS:"",FACE_ZHIMA_XY:"",FACE_TECENT_CLOUD_H5:"",FACE_FACE_LIVENESS_RECOGNITION:"e",VIDEO_AUDIO_VIDEO_DUAL:"",EMAIL:""}),a=n.signerName,o=n.operatorName,s=n.authType,c=n.authTime,u=n.willAuthType,l=n.willAuthTime,d=n.email,h=n.phone,f=(n.signType,n.samlResponse),g=n.companyId,p=n.companyName,v=n.signId,m=i[s]?i[s]:s,_=u&&i[u]?i[u]:u,y=new this.engine.String("Signer"),S=new this.engine.String("AuthMethod"),b=new this.engine.String("AuthName"),I=new this.engine.String("OperatorName"),A=new this.engine.String("Email"),P=new this.engine.String("Phone"),D=new this.engine.String("EnterpriseId"),E=new this.engine.String("Enterprise"),C=new this.engine.String("SAML_Response"),w=(new this.engine.String("SignID"),new this.engine.String("Type")),k=new this.engine.String("Name"),T=new this.engine.String("Subtype"),F=new this.engine.String("ID"),G=new this.engine.String(a),R=o?new this.engine.String(o):null,x=d?new this.engine.String(d):null,O=h?new this.engine.String(h):null,M=f?new this.engine.String(f):null,N=g?new this.engine.String(g):null,B=p?new this.engine.String(p):null,L=t.GetElement(y);if(L){L.GetType()===this.engine.PDFObjectType.e_Reference&&(L=L.GetDirectObject());var j=L.GetDict().GetElement(S);j&&j.GetType()===this.engine.PDFObjectType.e_Array&&(r=j.GetArray())}else{var U=new this.engine.PDFDictionary.Create;U.SetAtName(w,y),U.SetAtString(k,G),r=new this.engine.PDFArray.Create,U.SetAt(S,r),e.AddIndirectObject(U),t.SetAtReference(y,U,e)}var W=new this.engine.PDFDictionary.Create;if(W.SetAtString(w,S),W.SetAtName(T,b),W.SetAtString(F,G),e.AddIndirectObject(W),r.AddReference(W,e),R){var H=new this.engine.PDFDictionary.Create;H.SetAtString(w,S),H.SetAtName(T,I),H.SetAtString(F,R),e.AddIndirectObject(H),r.AddReference(H,e)}if(d){var K=new this.engine.PDFDictionary.Create;K.SetAtString(w,S),K.SetAtName(T,A),K.SetAtString(F,x),e.AddIndirectObject(K),r.AddReference(K,e)}if(h){var z=new this.engine.PDFDictionary.Create;z.SetAtString(w,S),z.SetAtName(T,P),z.SetAtString(F,O),e.AddIndirectObject(z),r.AddReference(z,e)}if(M){var V=new this.engine.PDFDictionary.Create;V.SetAtString(w,S),V.SetAtName(T,C),V.SetAtString(F,M),e.AddIndirectObject(V),r.AddReference(V,e)}if(N){var J=new this.engine.PDFDictionary.Create;J.SetAtString(w,S),J.SetAtName(T,D),J.SetAtString(F,N),e.AddIndirectObject(J),r.AddReference(J,e)}if(B){var Y=new this.engine.PDFDictionary.Create;Y.SetAtString(w,S),Y.SetAtName(T,E),Y.SetAtString(F,B),e.AddIndirectObject(Y),r.AddReference(Y,e)}var Z=new this.engine.PDFDictionary.Create,q=new this.engine.PDFDictionary.Create,X=new this.engine.PDFArray.Create,Q=new this.engine.String("R"),$=new this.engine.String("TrustedMode"),ee=new this.engine.String("OS"),te=new this.engine.String("Foxit PDF Editor Cloud"),ne=new this.engine.String("alpine-release:3.11.6");q.SetAtName(k,te),q.SetAtInteger(Q,30913),q.SetAtBoolean($,!0),X.AddName(ne),q.SetAt(ee,X);var re=new this.engine.String("App");if(e.AddIndirectObject(q),Z.SetAtReference(re,q,e),v){var ie=new this.engine.PDFDictionary.Create,ae=new this.engine.String("SignId"),oe=new this.engine.String(v);ie.SetAtString(ae,oe);var se=new this.engine.String("Evidence");e.AddIndirectObject(ie),Z.SetAtReference(se,ie,e)}e.AddIndirectObject(Z);var ce=new this.engine.PDFDictionary.Create,ue=new this.engine.String("Method"),le=new this.engine.String("Time"),de=new this.engine.String("AuthAddData"),he=m,fe=new this.engine.String(he);ce.SetAtName(ue,fe);var ge=c?new this.engine.String(c):null;if(ge&&ce.SetAtString(le,ge),_){var pe=JSON.stringify({willingnessType:_,willingnessDate:l,status:""}),ve=new this.engine.WString(pe);ce.SetAtWString(de,ve)}e.AddIndirectObject(ce);var me=new this.engine.String("Prop_Build");t.SetAtReference(me,Z,e);var _e=new this.engine.String("Prop_Auth");t.SetAtReference(_e,ce,e)}},{key:"getSignIdForEvidence",value:function(){for(var e=this,t=[],n=this.doc,r=[],i=n.GetSignatureCount(),a=[],o=0;o<i;o++){var s=n.GetSignature(o);if(s.IsSigned()){var c=s.GetSignatureDict(),u=new this.engine.String("Signer"),l=new this.engine.String("Name"),d=c.GetElement(u);if(d)if(d.GetType()===this.engine.PDFObjectType.e_Reference&&(d=d.GetDirectObject()),d.GetDict().GetElement(l))if("out"===this.getESignCNMode(s)){var h=c.GetObjNum();a.includes(h)||(r.push(s),a.push(h))}}}try{r.sort(function(e,t){return e.GetFileSizeOfSignedVersion()-t.GetFileSizeOfSignedVersion()})}catch(t){console.error("pdf-jr/PDFDoc.js getDocAuditTrail  s.GetFileSizeOfSignedVersion error:",t),r.sort(function(t,n){return e.getSignatureSignTimeStamp(t)-e.getSignatureSignTimeStamp(n)})}var f=new this.engine.String("DocESign");return!!n.GetCatalog().GetElement(f)&&(r=r.slice(1)),r.forEach(function(n){var r={};r.fieldId=n.GetDict().GetObjNum();var i=n.GetSignatureDict(),a=new e.engine.String("Prop_Build"),o=new e.engine.String("Evidence"),s=new e.engine.String("SignId"),c=i.GetElement(a);if(c){c.GetType()==e.engine.PDFObjectType.e_Reference&&(c=c.GetDirectObject());var u=c.GetDict();if(u){var l=u.GetElement(o);if(!l)return;if(l.GetType()==e.engine.PDFObjectType.e_Reference&&(l=l.GetDirectObject()),l.GetType()==e.engine.PDFObjectType.e_Dictionary&&(l=l.GetDict()),l){var d=l.GetElement(s);if(d){var h=d.GetString().toString();r.signId=h}}}}t.push(r)}),t}},{key:"isESignCNSignature",value:function(e,t){var n=this;return this.getPageByIndex(t).then(function(t){return t.getAnnotById(e)}).then(function(e){var t,r={},i=e.annot.GetDict(),a=new n.engine.String("Signer"),o=!!i.GetElement(a),s=new n.engine.Signature(n.doc,i);t=s.IsSigned();var c=s.GetSignatureDict();if((r=o?t?{isESignCNSignature:!!c.GetElement(a),isSigned:t}:{isESignCNSignature:!0,isSigned:t}:{isESignCNSignature:!!t&&!!c.GetElement(a),isSigned:t}).isESignCNSignature){var u=s.GetSignatureType();r.isPagingSig=u===n.engine.SignatureType.e_SignatureTypePagingSeal}return r})}},{key:"getDocAuditTrail",value:function(e,t){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var e,n,r,i,a,o,s,c,u,l,d,h,f,g,p,v,m,_,y,S,b,I,A,P,D,E,C,w,k,T,F,G,R,x,O,M,N,B,L,j,U,W,H,K,z,V,J,Y,Z,q,X,Q,$,ee,te,ne,re,ie,ae,oe,se,ce,ue,le,de,he,fe,ge,pe,ve,me,_e,ye,Se,be;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(Ie){switch(Ie.label){case 0:for(e=this,n=function(t,n,i,a){if(t.length<1)return null;var o=[],s=new a.String("DocESign");!!r.GetCatalog().GetElement(s)&&n.forEach(function(e,t){if(i.indexOf(e.id)<0){var n={fieldId:e.id,pageIndex:e.pageIndex,assignUserName:e.company?"".concat(e.company,"").concat(e.assignUserName,""):e.assignUserName,assignUserEmail:e.assignUserEmail,flowSignOrder:t+1};o.push(n)}});var c=[];return o.length>0&&o.forEach(function(t){var n=e.getPageByIndex(t.pageIndex).then(function(e){e.getAnnotById(t.fieldId).then(function(e){t.signatureName=e.annot.GetField().GetName().toString()})});c.push(n)}),Promise.all(c).then(function(){var e={};return e.base={pageNumbers:t[0].build.pageNumbers,hash:t[0].hash||"",type:t[0].build.type},e.auth=t.map(function(e){var t=(0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_59__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_57__._)({},e.certfile,e.auth),{signerName:e.signer.signerName,operatorName:e.signer.operatorName,companyId:e.signer.companyId,companyName:e.signer.companyName,fileSizeOfSignedVersion:e.fileSizeOfSignedVersion,fieldId:e.fieldId,SAMLResponse:e.signer.SAMLResponse,email:e.signer.email,phone:e.signer.phone,byteRangeHash:e.byteRangeHash,signedHash:e.signedHash});return e.assignUserName&&(t.assignUserName=e.assignUserName),e.assignUserEmail&&(t.assignUserEmail=e.assignUserEmail),t}),e.certfile=t.map(function(e,t){var n=(0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_59__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_57__._)({},e.auth,e.certfile),{signerName:e.signer.signerName,operatorName:e.signer.operatorName,fileSizeOfSignedVersion:e.fileSizeOfSignedVersion,fieldId:e.fieldId,byteRangeHash:e.byteRangeHash,signedHash:e.signedHash});return e.assignUserName&&(n.assignUserName=e.assignUserName),e.assignUserEmail&&(n.assignUserEmail=e.assignUserEmail),n}),"signFlow"===t[0].build.type&&(e.base.startSignDate=t[0].certfile.signDate,e.base.endSignDate=t[t.length-1].certfile.signDate),e.illegalSignatures=o,e})},r=this.doc,i=[],a=[],o=[],s=r.GetSignatureCount(),c=[],u=0;u<s;u++)(l=r.GetSignature(u)).IsSigned()&&(d=l.GetSignatureDict(),h=new this.engine.String("Signer"),f=new this.engine.String("Name"),(g=d.GetElement(h))&&(g.GetType()===this.engine.PDFObjectType.e_Reference&&(g=g.GetDirectObject()),p=g.GetDict(),p.GetElement(f)&&(o.push(l.GetDict().GetObjNum()),v=d.GetObjNum(),c.includes(v)||(a.push(l),c.push(v)))));try{a.sort(function(e,t){return e.GetFileSizeOfSignedVersion()-t.GetFileSizeOfSignedVersion()})}catch(t){console.error("pdf-jr/PDFDoc.js getDocAuditTrail  s.GetFileSizeOfSignedVersion error:",t),a.sort(function(t,n){return e.getSignatureSignTimeStamp(t)-e.getSignatureSignTimeStamp(n)})}m=0,Ie.label=1;case 1:if(!(m<a.length))return[3,5];_=a[m],y={};try{y.fileSizeOfSignedVersion=_.GetFileSizeOfSignedVersion()}catch(e){console.error("pdf-jr/PDFDoc.js getDocAuditTrail  s.GetFileSizeOfSignedVersion error:",e),y.fileSizeOfSignedVersion=this.getSignatureSignTimeStamp(_)}return y.hash="",[4,this.getByteRangeHash(_)];case 2:return S=Ie.sent(),[4,this.getAfterSignFileHash(_)];case 3:if(b=Ie.sent(),0===m&&(y.hash=S||""),y.byteRangeHash=S,y.signedHash=b,I=_.GetSignatureDict(),A=_.GetDict(),y.fieldId=A.GetObjNum(),P={},D=new this.engine.String("AuthMethod"),E=new this.engine.String("Signer"),C=void 0,!(w=I.GetElement(E)))return[2];if(w.GetType()===this.engine.PDFObjectType.e_Reference&&(w=w.GetDirectObject()),C=w.GetDict(),k=C.GetElement(D),T=new this.engine.String("Subtype"),F=new this.engine.String("ID"),k.GetType()===this.engine.PDFObjectType.e_Array)for(G=k.GetArray(),R=G.GetElementCount(),x=0;x<R;x++)(O=G.GetElement(x))&&(O.GetType()===this.engine.PDFObjectType.e_Reference&&(O=O.GetDirectObject()),O.GetType()===this.engine.PDFObjectType.e_Dictionary&&(O=O.GetDict()),M=O.GetElement(T),"AuthName"===(N=M.GetString()).toString()&&(B=O.GetElement(F),P.signerName=B.GetString().toString()),"OperatorName"===N.toString()?(L=O.GetElement(F),P.operatorName=L.GetString().toString()):"EnterpriseId"===N.toString()?(j=O.GetElement(F),P.companyId=j.GetString().toString()):"Enterprise"===N.toString()?(U=O.GetElement(F),P.companyName=U.GetString().toString()):"SAML_Response"===N.toString()?(W=O.GetElement(F),P.SAMLResponse=W.GetString().toString()):"Email"===N.toString()?(H=O.GetElement(F),P.email=H.GetString().toString()):"Phone"===N.toString()&&(K=O.GetElement(F),P.phone=K.GetString().toString()));if(y.signer=P,z=new this.engine.String("Prop_Build"),V=I.GetElement(z)){if(J={},Y=r.GetPageCount(),J.pageNumbers=Y,V.GetType()==this.engine.PDFObjectType.e_Reference&&(V=V.GetDirectObject()),Z=V.GetDict()){if(q=new this.engine.String("App"),!(X=Z.GetElement(q)))return[2];if(X.GetType()==this.engine.PDFObjectType.e_Reference&&(X=X.GetDirectObject()),X.GetType()==this.engine.PDFObjectType.e_Dictionary&&(X=X.GetDict()),X){if(Q=new this.engine.String("Name"),$=new this.engine.String("R"),ee=new this.engine.String("TrustedMode"),te=new this.engine.String("OS"),(ne=X.GetElement(Q))&&(J.name=ne.GetString().toString()),(re=X.GetElement($))&&(J.version=re.GetInteger()),(ie=X.GetElement(ee))&&(J.trustedModeValue=ie.GetBoolean()),ae=X.GetElement(te))for(oe=ae.GetArray(),se=oe.GetElementCount(),ce=0;ce<se;ce++)(ue=oe.GetElement(ce))&&(J.os=ue.GetString().toString());le=new this.engine.String("DocESign"),de=r.GetCatalog(),he=de.GetElement(le),J.type=he?"signFlow":"signSelf"}}y.build=J}if(fe=new this.engine.String("Prop_Auth"),ge=I.GetElement(fe)){if(pe={},ge.GetType()==this.engine.PDFObjectType.e_Reference&&(ge=ge.GetDirectObject()),ge.GetType()==this.engine.PDFObjectType.e_Dictionary&&(ge=ge.GetDict()),ve=new this.engine.String("Method"),me=new this.engine.String("Time"),_e=new this.engine.String("AuthAddData"),(ye=ge.GetElement(ve))&&(pe.method=ye.GetString().toString()),(Se=ge.GetElement(me))&&(pe.time=Se.GetString().toString()),be=ge.GetElement(_e),pe.additionalInfo=null,be)try{pe.additionalInfo=JSON.parse(be.GetWideString().toString())}catch(e){console.error("pdf-jr/PDFDoc.js getDocAuditTrail error:",e)}pe.mode=this.getESignCNMode(_),y.auth=pe}y.certfile=this.getcertfileinfo(_),y.auth.serialNumber=y.certfile.serialNumber,i.push(y),Ie.label=4;case 4:return m++,[3,1];case 5:return[2,n(i,t,o,this.engine)]}})}).call(this)}},{key:"getByteRangeHash",value:function(e){var t=this,n=_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.fE.get(e);if(n)return Promise.resolve(n);var r=e.GetSignatureDict(),i=function(e,t){var n=t.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(e,"ByteRange")).GetArray(),r=[];if(n){for(var i=n.GetElementCount(),a=0;a<i;a++)r.push(n.GetElement(a).GetInteger());return r}}(this.engine,r),a=Promise.resolve();return i&&(a=this.getOriginalStream()),a.then(function(r){if(r){var a=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.gM)(r,i);return n=t.generateDocHash(a),_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.fE.set(e,n),n}})}},{key:"getAfterSignFileHash",value:function(e){var t=this;if(e.IsSigned()){var n=_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.$E.get(e);if(n)return Promise.resolve(n);var r=e.GetFileSizeOfSignedVersion();return this.getOriginalStream().then(function(n){var i=new Uint8Array(n).slice(0,r),a=t.generateDocHash(new Uint8Array(i));return _share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.$E.set(e,a),a})}}},{key:"getcertfileinfo",value:function(e){var t={};if(t.signatureName=e.GetName().toString(),this.doc&&e){var n=new this.engine.String("SerialNumber"),r=new this.engine.String("Subject"),i=new this.engine.String("Issuer"),a=new this.engine.String("ValidPeriodFrom"),o=new this.engine.String("ValidPeriodTo"),s=new this.engine.String(";");t.format="",t.serialNumber="";try{var c=e.GetCertificateInfo(n).toString().split(s);if(c){var u=c.pop();t.serialNumber=u.toString()}t.format="X.509"}catch(e){console.error("getcertfileinfo error: ",e)}t.subject="";try{var l=e.GetCertificateInfo(r).toString().split(s);if(l){var d=l.pop(),h=JSON.parse(d.toString());t.subject=h.CN||""}}catch(e){console.error("getcertfileinfo error: ",e)}t.issuer="";try{var f=e.GetCertificateInfo(i).toString().split(s);if(f){var g=f.pop(),p=JSON.parse(g.toString());t.issuer=p.CN||p.O||""}}catch(e){console.error("getcertfileinfo error: ",e)}t.validPeriodFrom="";try{var v=e.GetCertificateInfo(a).toString().split(s);if(v){var m=v.pop();t.validPeriodFrom=m.toString()}}catch(e){console.error("getcertfileinfo error: ",e)}t.valid_period_to="";try{var _=e.GetCertificateInfo(o).toString().split(s);if(_){var y=_.pop();t.validPeriodTo=y.toString()}}catch(e){console.error("getcertfileinfo error: ",e)}var S=e.GetSignTime();t.signDate="".concat(S.year,"-").concat(b(S.month),"-").concat(b(S.day)," ").concat(b(S.hour),":").concat(b(S.minute),":").concat(b(S.second)),t.mode=this.getESignCNMode(e)}return t;function b(e){return"0".concat(e).slice(-2)}}},{key:"geAssignInfoForESignCNV0",value:function(){var e=function(e){if("FoxitSignDate"===(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.FN)(n,e,"FoxitSignFT","string"))return!1;var t=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.FN)(n,e,"Signer","pdfDict");return!!t&&!!(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.FN)(n,t,"AuthMethod","pdfArray")},t=function(e,t,i){var a=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.$U)(n,r,e,t,i),o=function(e){var t=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.qQ)(n,r,e);return t.signerDictObjNum=e.GetObjNum(),t}((0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.FN)(n,e,"Signer","pdfDict")),s=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.FN)(n,e,"FlowSignConfigInfo","pdfDict"),c=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.PB)(n,r,s);return(0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_57__._)({},a,o,c)},n=this.engine,r=this.doc,i=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.Lg)(r),a=[],o=this.getAllPagingSigsInfo(),s=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.J5)(n,r);return i.forEach(function(n){var r=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.Ox)(n);(r=r.filter(e)).forEach(function(e){var n=t(e,s,o);a.push(n)})}),(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.ol)(n,r,a)}},{key:"getAssignInfoForESignCN",value:function(){var e=this.engine,t=this.doc,n=this.JR;if(!(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.uJ)(e,t))return{};if((0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.pw)(e,t))return this.geAssignInfoForESignCNV0();var r=this.getAllPagingSigsInfo(),i=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.lo)(e,t),a=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.lm)(e,t),o=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.J5)(e,t),s=[];return i.forEach(function(i,a){var c=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.a_)(e,t,i,o,r,n);c.sort=a+1,s.push(c)}),s.some(function(e){return e.freeRectItem})&&(s=(0,_share_eSignCN_util__WEBPACK_IMPORTED_MODULE_31__.KL)(e,t,s,i,o,n)),{configInfo:a,recipients:s}}},{key:"getOrderOfSignFlowFile",value:function(){var e=new this.engine.String("DocESign"),t=new this.engine.String("Signers"),n=(new this.engine.String("AuthType"),new this.engine.String("AuthMethod")),r=new this.engine.String("ID"),i=new this.engine.String("Subtype"),a=this.doc.GetCatalog().GetElement(e),o=[];if(a){a.GetType()==this.engine.PDFObjectType.e_Reference&&(a=a.GetDirectObject());var s=a.GetDict().GetElement(t);if(s.GetType()==this.engine.PDFObjectType.e_Array)for(var c=s.GetArray(),u=c.GetElementCount(),l=0;l<u;l++){var d=c.GetElement(l);if(d){d.GetType()==this.engine.PDFObjectType.e_Reference&&(d=d.GetDirectObject()),d.GetType()==this.engine.PDFObjectType.e_Dictionary&&(d=d.GetDict());var h,f=d.GetElement(n),g={};if(f.GetType()==this.engine.PDFObjectType.e_Array)for(var p=f.GetArray(),v=p.GetElementCount(),m=0;m<v;m++){var _=p.GetElement(m);if(_){_.GetType()==this.engine.PDFObjectType.e_Reference&&(_=_.GetDirectObject()),_.GetType()==this.engine.PDFObjectType.e_Dictionary&&(_=_.GetDict());var y=_.GetElement(i).GetString().toString();if(["Email","Phone","Company"].includes(y)){var S=_.GetElement(r),b=S&&S.GetString().toString();g[y]=b}}}h="".concat(g.Email?g.Email:"").concat(g.Phone?g.Phone:"").concat(g.Company?g.Company:""),o.push(h)}}}return Array.from(new Set(o))}},{key:"setSignatureAP",value:function(e){var t=this,n=e.pageIndex,r=e.annotId,i=e.inkSignBuffer,a=e.pagingSig,o=e.pagingSigObjNum;return o&&(a=this.getPagingSealSignature({sigObjNum:o})),a?function(e,n){var r=t.JR.createReaderCallbackByBuffer(n),i=new t.engine.Image(r).GetFrameBitmap(0);return e.SetBitmap(i),e.GenerateAppearance(),!0}(a,i):this.getPageByIndex(n).then(function(e){return e.getAnnotById(r)}).then(function(e){var n=e.annot.GetField().GetName().toString(),r=t.loadForm().getField(n).engineField,a=t.JR.createReaderCallbackByBuffer(i),o=new t.engine.Image(a).GetFrameBitmap(0);r.SetBitmap2AP(o),r.SetAppearanceFlags(128);var s=new t.engine.SignatureAppearanceOptions;return s.showLogo=!1,r.SetSignatureAppearanceOptions(s),r.ResetSignAppearance(),!0}).catch(function(e){console.error("setSignatureAP",e)})}},{key:"getFlowSignInfo",value:function(){for(var e=this,t=this.doc,n={initiator:{email:null,phone:null,name:null}},r=[],i=t.GetSignatureCount(),a=0;a<i;a++){var o=t.GetSignature(a);if(o.IsSigned()){var s=t.GetCatalog(),c=new this.engine.String("DocESign");if(s.GetElement(c)){var u=o.GetSignatureDict(),l=new this.engine.String("Signer"),d=new this.engine.String("Name"),h=u.GetElement(l);if(h)h.GetType()===this.engine.PDFObjectType.e_Reference&&(h=h.GetDirectObject()),h.GetDict().GetElement(d)&&r.push(o)}}}try{r.sort(function(e,t){return e.GetFileSizeOfSignedVersion()-t.GetFileSizeOfSignedVersion()})}catch(t){console.error("pdf-jr/PDFDoc.js getDocAuditTrail  s.GetFileSizeOfSignedVersion error:",t),r.sort(function(t,n){return e.getSignatureSignTimeStamp(t)-e.getSignatureSignTimeStamp(n)})}if(r&&r.length>0){var f=r[0].GetSignatureDict(),g=new this.engine.String("Signer"),p=new this.engine.String("AuthMethod"),v=new this.engine.String("ID"),m=new this.engine.String("Subtype"),_=f.GetElement(g);if(!_)return;_.GetType()===this.engine.PDFObjectType.e_Reference&&(_=_.GetDirectObject());var y=_.GetDict().GetElement(p);if(y.GetType()===this.engine.PDFObjectType.e_Array)for(var S=y.GetArray(),b=S.GetElementCount(),I=0;I<b;I++){var A=S.GetElement(I);if(A){A.GetType()===this.engine.PDFObjectType.e_Reference&&(A=A.GetDirectObject()),A.GetType()===this.engine.PDFObjectType.e_Dictionary&&(A=A.GetDict());var P=A.GetElement(v),D=A.GetElement(m);"Phone"===D.GetString().toString()&&(n.initiator.phone=P.GetString().toString()),"Email"===D.GetString().toString()&&(n.initiator.email=P.GetString().toString()),"AuthName"===D.GetString().toString()&&(n.initiator.name=P.GetString().toString()),"SAML_Response"===D.GetString().toString()&&(n.initiator.samlResponse=P.GetString().toString()),"EnterpriseId"===D.GetString().toString()&&(n.initiator.companyId=P.GetString().toString())}}}return n}},{key:"attachFile",value:function(e){}},{key:"getFontsInfo",value:function(){for(var e=this.doc,t=[],n=0,r=e.GetFontCount();n<r;n++){var i=e.GetFont(n),a=i.GetFontType(e).value;t.push({isEmbedded:i.IsEmbedded(e),isBold:i.IsBold(),isItalic:i.IsItalic(),baseFontName:this.JR.getPDFString(i.GetBaseFontName(e)),fontType:1===a?"Type1":2===a?"TrueType":3===a?"Type3":4===a?"TrueType(CID)":"",name:this.JR.getPDFString(i.GetName()),familyName:this.JR.getPDFString(i.GetFamilyName()),index:n,docId:this.id,encodingType:i.getEncodingType(e).toString(),actualFontName:i.getActualFontName(e).toString(),actualFontStyle:i.getActualFontStyle(e).toString()})}return t}},{key:"getAdditionalActions",value:function(){var e=this.engine,t=this.doc.GetCatalog().GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(e,"AA")),n={};if(!t)return n;for(var r=new e.AdditionalAction(this.doc,t.GetDict()),i=e.TriggerEvent,a=2;a<7;a++){var o=r.GetAction(i.values[a]);o.IsEmpty()||(n[a]=this.JR.actionManager.get(o,this,this.JR).toJson())}return(0,_share_objects_delete_js__WEBPACK_IMPORTED_MODULE_60__.Z)(r),n}},{key:"syncDataCache",value:function(e){var t=[];for(var n in e)t.push(this.getPageByIndex(e[n],n));return Promise.all(t)}},{key:"setColors",value:function(e){Object.assign(this.colors,e)}},{key:"setPageDisplayPreferences",value:function(e){this.pageDisplayPreferences=e}},{key:"setOriginalStream",value:function(e){this.oriFile=e}},{key:"getOriginalStream",value:function(){return this._getOriginalStream(!0).promise}},{key:"getOriginalStreamSync",value:function(){return this._getOriginalStream(!1).resolveValue}},{key:"_getOriginalStream",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=new _foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.N5;if("string"==typeof this.oriFile.url){var n=this.oriFile,r=new XMLHttpRequest;if(r.open(n.type||"GET",n.url,e,n.user,n.password),r.responseType="arraybuffer",n.headers){var i=n.headers;for(var a in i)r.setRequestHeader(a,i[a])}r.onreadystatechange=function(){4===r.readyState&&(r.status>=200&&r.status<300||304===r.status?t.resolve(r.response):t.reject(r))},r.send(n.data)}else if((0,_swc_helpers_instanceof__WEBPACK_IMPORTED_MODULE_61__._)(this.oriFile,Blob)){var o=this.ReadBlockOption;if(o&&o.url)this.getDocStreamBuffer(0,this.oriFile.size,this.oriFile.size,!1),t.resolve(this.docReadBlockCache.uint8Array);else if(e){var s=new FileReader;s.onload=function(e){t.resolve(new Uint8Array(e.target.result))},s.readAsArrayBuffer(this.oriFile)}else{var c=(new FileReaderSync).readAsArrayBuffer(this.oriFile);defer.resolve(new Uint8Array(c))}}else t.resolve(new Uint8Array(this.oriFile).slice(0).buffer);return t}},{key:"moveAnnotsToPage",value:function(e,t,n){var r=this;return Promise.all([this.getPageById(e),this.getPageById(t)]).then(function(e){var t=(0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_52__._)(e,2),i=t[0],a=t[1];return a.isVirtual?[]:Promise.all([i.parsedPage(),a.parsedPage()]).then(function(e){var t=function(e){var t=i._getAnnotIndexById(Number(e)),a=s.GetAnnot(t),o=n[e].rect,c=a.GetDict(),l=c.GetObjNum();if(Object.keys(o).length){var h=new u.CFX_FloatRect(o.left,o.bottom,o.right,o.top),v=a.GetRect(),m=v.Width()/2,_=v.Height()/2,y=new u.Matrix;y.Translate(-v.left-m,-v.bottom-_,!1),y.Rotate(-d*Math.PI/2,!1),y.Translate(v.left+m,v.bottom+_,!1),y.SetReverse(y);var S=a.GetRect();y.TransformRect(S),h.right=h.left+S.Width(),h.top=h.bottom+S.Height();var b=a.GetType().value,I=o.left-S.left,A=o.bottom-S.bottom;switch(b){case 3:var P,D=(360+90*d)%360,E=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(u,"Rotate"),C=c.GetElement(E);P=C?C.GetInteger():0,c.SetAt(E,u.PDFObject.CreateFromInteger((P+D)%360));var w=new u.FreeText(a);if("FreeTextCallout"==w.GetIntent().toString()){for(var k=w.GetCalloutLinePoints(),T=0,F=k.GetSize();T<F;T++){var G=k.GetAt(T);(G=y.TransformPoint(G.x,G.y)).x+=I,G.y+=A,k.SetAt(T,G)}w.SetCalloutLinePoints(k);var R=w.GetInnerRect();y.TransformRect(R),R.left+=I,R.right+=I,R.top+=A,R.bottom+=A;var x=new u.CFX_FloatRect(R.left-h.left,R.bottom-h.bottom,h.right-R.right,h.top-R.top);c.SetAtRect((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(u,"RD"),x),c.SetAtRect((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(u,"Rect"),h),a.ResetAppearanceStream()}break;case 4:var O=new u.Line(a),M=O.GetStartPoint();(M=y.TransformPoint(M.x,M.y)).x+=I,M.y+=A,O.SetStartPoint(M);var N=O.GetEndPoint();(N=y.TransformPoint(N.x,N.y)).x+=I,N.y+=A,O.SetEndPoint(N);break;case 7:case 8:[u.PolyLine,u.Polygon].find(function(e,t){if(7==b&&0==t)return!1;var n=new e(a),i=n.GetPath();if(i.GetPointCount()>0){var o=new r.engine.Path,s=i.GetPointCount();o.IncreasePointCount(s);for(var c=0;c<s;c++){var u=i.GetPoint(c),l=y.TransformPoint(u.x,u.y);l.x+=I,l.y+=A,o.SetPoint(c,l,i.GetPointType(c))}n.SetPath(o)}else{for(var d=n.GetVertexes(),h=0,f=d.GetSize();h<f;h++){var g=d.GetAt(h);(g=y.TransformPoint(g.x,g.y)).x+=I,g.y+=A,d.SetAt(h,g)}n.SetVertexes(d)}return!0});break;case 9:case 10:case 11:case 12:for(var B=function(e,t){var n=j.GetAt(e),r=new u.QuadPoints;[n.first,n.second,n.third,n.fourth].forEach(function(e,t){var n=y.TransformPoint(e.x,e.y);switch(n.x+=I,n.y+=A,t){case 0:r.first=n;break;case 1:r.second=n;break;case 2:r.third=n;break;case 3:r.fourth=n}}),U.Add(r)},L=new u.TextMarkup(a),j=L.GetQuadPoints(),U=new u.QuadPointsArray,W=0,H=j.GetSize();W<H;W++)B(W);L.SetQuadPoints(U);break;case 15:for(var K=new u.Ink(a),z=K.GetInkList(),V=z.GetPointCount(),J=0;J<V;J++){var Y=z.GetPoint(J),Z=y.TransformPoint(Y.x,Y.y);Z.x+=I,Z.y+=A;var q=z.GetPointType(J);z.SetPoint(J,Z,q)}K.SetInkList(z);break;case 13:var X,Q=(360-90*d)%360,$=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(u,"Rotate"),ee=c.GetElement($);X=ee?360-ee.GetInteger():0,new u.Stamp(a).SetRotation((X+Q)%360);break;case 17:var te=a.GetFlags();a.SetFlags(24|te);break;case 20:p=!0;var ne=(4+d)%4,re=new u.Widget(a),ie=re.GetMKRotation().value;4===ie&&(ie=0);var ae=4-((-ie-ne)%4+4)%4,oe=u.Rotation.e_Rotation0;switch(ae){case 1:oe=u.Rotation.e_Rotation90;break;case 2:oe=u.Rotation.e_Rotation180;break;case 3:oe=u.Rotation.e_Rotation270}re.SetMKRotation(oe)}26!==b&&c.SetAtRect((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(u,"Rect"),h),a.ResetAppearanceStream()}c.RemoveAt((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(u,"P")),f.AddElement(u.PDFObject.CreateReference(r.doc,l)),g[l]=e},o=(0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_52__._)(e,2),s=o[0],c=o[1],u=r.engine,l=s.GetRotation().value,d=c.GetRotation().value-l,h=getAnnotsArray(u,s),f=getAnnotsArray(u,c),g={},p=!1;for(var v in n)t(v);for(var m in g)for(var _=h.GetElementCount(),y=0;y<_;y++){var S=h.GetElement(y).GetDirectObject().GetDict(),b=S.GetObjNum();if(g[b]){h.RemoveAt(y);break}var I=S.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(u,"NM")),A=I&&I.GetString().toString();if(g[b]==A&&I){h.RemoveAt(y);break}}return p&&r.formModule.clearCache(),i.reloadAnnots(),a.reloadAnnots(),a.getAnnots(null,g).then(function(e){return e.forEach(function(e){e.updateModifyTime()}),e})})})}},{key:"setTabOrderType",value:function(e){for(var t=this.doc.GetPageCount(),n=this.engine,r=function(){switch(e){case"row":return n.OrderType.e_Row;case"column":return n.OrderType.e_Column;case"structure":return n.OrderType.e_Structure}return n.OrderType.e_None}(),i=0;i<t;i++){var a=this.doc.GetPage(i),o=new n.TabOrderMgr(a);o.SetOrderType(r),o.delete(),a.delete()}}},{key:"getTabOrderType",value:function(){var e=this,t=this.doc.GetPageCount(),n=this.engine,r=Array.from({length:t},function(t,r){var i=e.doc.GetPage(r),a=new n.TabOrderMgr(i),o=a.GetOrderType();return a.delete(),i.delete(),o}),i=new Set(r);if(1===i.size)switch(Array.from(i)[0]){case n.OrderType.e_Row:return"row";case n.OrderType.e_Column:return"column";case n.OrderType.e_Structure:return"structure"}return"none"}},{key:"setTabOrder",value:function(e,t){var n=this,r=Object.freeze({none:"e_None",row:"e_Row",column:"e_Column",structure:"e_Structure"});return this.getPageByIndex(e).then(function(e){if(e.isVirtual)return[];var i=n.engine.OrderType[r[t]||r.none],a=new n.engine.TabOrderMgr(e.page);a.SetOrderType(i);for(var o=a.GetFirstAnnot(),s=[];!o.IsEmpty();)s.push(o.GetDict().GetObjNum()),o=a.GetNextAnnot(o);return a.delete(),s})}},{key:"getTabOrder",value:function(e){var t=this,n=this.engine;return this.getPageByIndex(e).then(function(e){if(e.isVirtual)return"e_None";var r=new t.engine.TabOrderMgr(e.page),i=r.GetOrderType();switch(i){case n.OrderType.e_Row:i="e_Row";break;case n.OrderType.e_Column:i="e_Column";break;case n.OrderType.e_Structure:i="e_Structure";break;default:i="e_None"}return r.delete(),i})}},{key:"setStructureOrder",value:function(e,t){var n=this,r=this.engine;return this.getPageByIndex(e).then(function(e){return e.isVirtual?[]:e.getAnnots(t).then(function(t){var i=new n.engine.TabOrderMgr(e.page),a=new r.AnnotArray;return t.forEach(function(e){a.Add(e.annot)}),i.AdjustStructureOrder(a),i.delete(),e.reloadAnnots()})})}},{key:"renderTemplatesByObjNum",value:function(e){var t=this.engine,n=this.doc.GetTemplateSize(e),r=new t.Bitmap(n.x,n.y,t.DIBFormat.e_DIBRgb32,0,0);r.FillRect(4294967295,null);var i=(0,_share_RendererHelper__WEBPACK_IMPORTED_MODULE_15__.I)(t,r);return i.RenderTemplates(this.doc,e,r),(0,_share_RendererHelper__WEBPACK_IMPORTED_MODULE_15__.v)(t,r,i)}},{key:"getPageIndexByObjNum",value:function(e){return this.doc.GetPageIndex(e)}},{key:"getFileSpecDict",value:function(e){for(var t=this.doc,n=this.engine,r=new n.PDFNameTree(t,n.PDFNameTreeType.e_EmbeddedFiles),i=null,a=0,o=r.GetCount();a<o;a++){var s=r.GetName(a);if(s.GetLength()){if(s.toString()===e){i=r.GetObj(s),s.delete(),s=null;break}s.delete(),s=null}}return i}},{key:"getNameTree",value:function(e){for(var t={value:e},n=this.doc,r=this.engine,i={},a=new r.PDFNameTree(n,t),o=0,s=a.GetCount();o<s;o++){var c=a.GetName(o);if(c.GetLength()){var u=a.GetObj(c);if(u){var l=c.toString();if(t.value===r.PDFNameTreeType.e_JavaScript.value){var d=new r.Action(n,u.GetDict());if(d.IsEmpty())continue;var h=new r.JavaScriptAction(d),f=h.GetScript();i[l]=this.JR.getPDFString(f),d=null,h=null,f=null}else if(4===t.value||5===t.value){var g=u.GetDict().GetObjNum();i[l]=g,g=null}else if(t.value===r.PDFNameTreeType.e_EmbeddedFiles.value){var p=new r.FileSpec(n,u),v=new _base_FileSpec__WEBPACK_IMPORTED_MODULE_16__.Z(p,this);i[l]=v.toJson(),i[l].name=l,v=null}c.delete(),c=null}}}return a.delete(),a=null,i}},{key:"updateJSNameTree",value:function(e,t,n){var r=this.doc,i=this.engine;if("add"===e){var a=i.Action.Create(r,i.ActionType.e_TypeJavaScript);new i.JavaScriptAction(a).SetScript(new i.WString("event.target.buttonImportIcon()")),this.addNameTreeObj(2,t,a.GetDict().GetObjNum())}else{for(var o=new i.PDFNameTree(r,{value:2}),s=0,c=o.GetCount();s<c;s++){var u=o.GetName(s);if(u.GetLength()){var l=o.GetObj(u);if(l){var d=u.toString(),h=new i.Action(r,l.GetDict());if(!h.IsEmpty()&&d==t){var f=new i.JavaScriptAction(h);f.SetScript((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(i,n)),h=null,f=null,u.delete(),u=null}}}}o.delete(),o=null}}},{key:"addNameTreeObj",value:function(e,t,n){var r=this.engine,i=this.doc,a=new r.PDFNameTree(i,{value:e}),o=new r.WString(t),s=i.GetIndirectObject(n).GetDirectObject(),c=a.Add(o,s);return o.delete(),o=null,c}},{key:"removeNameTreeObj",value:function(e,t){var n=this.engine,r=this.doc,i=new n.PDFNameTree(r,{value:e}),a=new n.WString(t),o=i.RemoveObj(a);return a.delete(),a=null,o}},{key:"replaceNameTreeObj",value:function(e,t,n){var r=this.engine,i=this.doc,a=new r.PDFNameTree(i,{value:e}),o=new r.WString(t),s=i.GetIndirectObject(n).GetDirectObject(),c=a.SetObj(o,s);return o.delete(),o=null,c}},{key:"renameNameTreeObj",value:function(e,t,n){var r=this.engine,i=this.doc,a=new r.PDFNameTree(i,{value:e}),o=new r.WString(t),s=new r.WString(n),c=a.Rename(o,s);return o.delete(),o=null,s.delete(),s=null,c}},{key:"nameTreeTemplatesToPages",value:function(e){var t=this.engine,n=this.doc,r=new t.WString(e),i=n.InsertPageFromTemplate(r);return r.delete(),r=null,i}},{key:"nameTreePagesToTemplates",value:function(e){var t=this.engine,n=this.doc,r=new t.WString(e);return n.RemovePageFromTemplate(r),r.delete(),r=null,!0}},{key:"addFileSpec",value:function(e,t,n){var r=this.engine,i=this.doc,a=_base_FileSpec__WEBPACK_IMPORTED_MODULE_16__.Z.createFile(r,i,t),o=new r.WString(e);return a.SetFileName(o),o.delete(),o=null,a.SetModifiedDateTime(_annot_Annot__WEBPACK_IMPORTED_MODULE_17__.Z.ToDateTime(r,n)),a.GetDict().GetObjNum()}},{key:"setFileSpecDesc",value:function(e,t){var n=this.engine,r=this.doc;if(!t)return!0;var i=new n.FileSpec(r,r.GetIndirectObject(t));if(!i.IsEmpty()){var a=new n.String(e);i.SetDescription(a),a.delete(),a=null}return!0}},{key:"getArticle",value:function(){return!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.article||(this.article=new _PDFArticle__WEBPACK_IMPORTED_MODULE_25__.Z(this)),this.article}},{key:"getFileSpecStream",value:function(e,t){return e<1?Promise.reject():this._getFileSpecStream(this.doc.GetIndirectObject(e),t)}},{key:"getFileSpecStreamByName",value:function(e,t){if(0===e.length)return Promise.reject();var n=this.getFileSpecDict(e);return n?this._getFileSpecStream(n,t):Promise.reject()}},{key:"_getFileSpecStream",value:function(e,t){var n=this.engine,r=this.doc,i=new n.FileSpec(r,e);if(i.IsEmpty())return Promise.reject();var a=new _base_FileSpec__WEBPACK_IMPORTED_MODULE_16__.Z(i,this),o=a.getStream(t);return a=null,o}},{key:"attachments",get:function(){return this._attachments||(this._attachments=new _Attachments__WEBPACK_IMPORTED_MODULE_18__.Z(this.engine,this.doc)),this._attachments},set:function(e){this._attachments=e}},{key:"addEmbeddedFile",value:function(e,t){return this.attachments.addEmbeddedFileEx(e,t)}},{key:"setEmbeddedFile",value:function(e,t){return this.attachments.setEmbeddedFileEx(e,t)}},{key:"getEmbeddedFile",value:function(e){return this.attachments.getEmbeddedFile(e,this)}},{key:"getFormControlPage",value:function(e){for(var t=this,n=[],r=0;r<this.doc.GetPageCount();r++)n.push(this.getPageByIndex(r));return Promise.all(n).then(function(n){for(var r=0;r<n.length;r++){var i=t.pageIndexMap[r].page.GetDict().GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(t.engine,"Annots"));if(i&&(i=i.GetDirectObject()))for(var a=i.GetArray(),o=0;o<a.GetElementCount();o++){var s=a.GetElement(o);if(s&&((s=s.GetDirectObject())&&s.GetDict().GetObjNum()==e))return r}}})}},{key:"getPDFDictInfo",value:function(){var e=this.dictionaryMap[this.id];if(e)return e.toJson();var t=this;return this.docPromise.then(function(e){var n=e.GetInfo(),r=new _PDFDictionary_js__WEBPACK_IMPORTED_MODULE_3__.Z(t);return t.updateDictCache(n,r),t.updateDictMap(t.id,r),r.toJson()})}},{key:"getPageLabels",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this,r=this.engine;return this.docPromise.then(function(e){return e.GetPageCount()}).then(function(n){return Promise.all(t.map(function(r){if(r>0&&r<n)return e.getPageByIndex(r).then(function(e){if(e.isVirtual){var n=t.indexOf(r);t.split(n,1)}})}))}).then(function(){return e.docPromise}).then(function(e){n.pageLabels=n.pageLabels||new r.PageLabels(e);var i=[],a=e.GetPageCount();if(!t||!t.length){for(var o=0;o<a;o++){var s=n.pageLabels.GetPageLabelTitle(o);i.push(s.toString())}return i}return t.forEach(function(e){if(e<0||e>=a)i.push("");else{var t=n.pageLabels.GetPageLabelTitle(e);i.push(t.toString())}}),i})}},{key:"startFormDesignerAssit",value:function(){for(var e in this.isDesignerMode=!0,this.pageCache){this.pageCache[e].resetBitmapCache()}}},{key:"stopFormDesignerAssit",value:function(){for(var e in this.isDesignerMode=!1,this.pageCache){this.pageCache[e].resetBitmapCache()}}},{key:"updateDictCache",value:function(e,t){var n=t.id;this.dictionaryCache[n]=e}},{key:"updateDictMap",value:function(e,t){this.dictionaryMap[e]=t}},{key:"hasKey",value:function(e,t){var n=this.dictionaryCache[e];if(!n)return!1;var r=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(this.engine,t);return n.HasKey(r)}},{key:"setAt",value:function(e,t,n){var r=this.dictionaryCache[e],i=this.engine,a=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(i,t);switch(void 0===n?"undefined":(0,_swc_helpers_type_of__WEBPACK_IMPORTED_MODULE_58__._)(n)){case"string":return r.SetAtString(a,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(i,n)),!0;case"number":return n%1==0?(r.SetAtInteger(a,n),!0):!isNaN(n)&&(r.SetAtFloat(a,n),!0);case"boolean":return r.SetAtBoolean(a,n),!0}return!1}},{key:"getAt",value:function(e,t){var n=this.dictionaryCache[e],r=this.engine;try{var i=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,t),a=n.GetElement(i);switch(a.GetType().value){case 1:return a.GetBoolean();case 2:return a.GetFloat();case 3:return a.GetString().toString()}}catch(e){throw new Error("The specified key does not exist in the dictionary or the value type is unaccepted")}}},{key:"autoRecognitionForm",value:function(e){var t=this.doc.AutoRecognitionForm(!1,e.isSetTooltip),n=[];return this.getAllLoadedPages().forEach(function(e){n.push(e.index)}),this.reloadPageAnnots(n),t}},{key:"isStaticXFA",value:function(){return this.doc.IsStaticXFA()}},{key:"isDynamicXFA",value:function(){return this.mIsDynamicXFA}},{key:"isXFA",value:function(){return this.doc.IsXFA()}},{key:"removeXFA",value:function(){return this.doc.RemoveXFA()}},{key:"reversePages",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.engine;return this.docPromise.then(function(r){if(!Array.isArray(t))return[];if(t.length<2)return[];if(!t.every(function(e){return"number"==typeof e}))return[];for(var i=function(e,t,n,r){var i=new t.Range;return i.AddSingle(n),e.MovePagesTo(i,r)},a=0,o=t.length-1;a<o;a++,o--){var s=i(r,n,a,o);if(s&&(s=i(r,n,o-1,a)),s){var c=e.pageIndexMap[a],u=function(t,n){var r;return(0,_swc_helpers_instanceof__WEBPACK_IMPORTED_MODULE_61__._)(t,_PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z)&&(t.index=n,r=t.id),e.pageIndexMap[n]=t,r};u(e.pageIndexMap[o],a),u(c,o)}}return t})}},{key:"movePagesTo",value:function(e,t){var n=this,r=this.engine,i=new r.Range;return e.forEach(function(e){"object"!==(void 0===e?"undefined":(0,_swc_helpers_type_of__WEBPACK_IMPORTED_MODULE_58__._)(e))?i.AddSingle(e):1===e.length?i.AddSingle(e[0]):2===e.length&&i.AddSegment(e[0],e[1],r.RangeFilter.e_All)}),this.docPromise.then(function(r){var a,o=r.GetPageCount(),s=t;e[0]<t&&(s=t-1),s<0&&(s=0),s>=o&&(s=o-1);var c=r.MovePagesTo(i,s);if(!c)return c;(a=Math).max.apply(a,(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_54__._)(e).concat([t]));for(var u=0;u<o;u++)n.pageIndexMap[u]||(n.pageIndexMap[u]={});var l,d=Object.values(n.pageIndexMap);return e.map(function(e){return d[e]}).forEach(function(e,n){var r=d.indexOf(e);if(d.splice(r,1),0===n)r<t?d.splice(t-1,0,e):d.splice(t,0,e);else{var i=d.indexOf(l);d.splice(i+1,0,e)}l=e}),c=[],d.forEach(function(e,t){var r;(0,_swc_helpers_instanceof__WEBPACK_IMPORTED_MODULE_61__._)(e,_PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z)?(e.index=t,r=e.id):e=null,c.push(r),n.pageIndexMap[t]=e}),n.update3DCacheAfterMovePages(e,s,o),c})}},{key:"startReplacePages",value:function(e,t,n,r){var i=this,a=this.engine,o=new a.Range,s=this.doc;s.GetPageCount();r.forEach(function(e){"object"!==(void 0===e?"undefined":(0,_swc_helpers_type_of__WEBPACK_IMPORTED_MODULE_58__._)(e))?o.AddSingle(e):1===e.length?o.AddSingle(e[0]):2===e.length&&o.AddSegment(e[0],e[1],a.RangeFilter.e_All)});var c=[],u=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)(),l=0,d="",h=a.StreamCallback.implement({Release:function(){},Flush:function(){return u.resolve(l),!0},GetSize:function(){return l},WriteBlock:function(e,t,n){l+=n;var r,i=a.HEAPU8.buffer;return r=i.slice?i.slice(e,e+n):new Uint8Array(i,e,n).buffer,c.push(r),!0},ReadBlock:function(e,t,n){var r=(new FileReaderSync).readAsArrayBuffer(new Blob(c).slice(t,t+n));return r=new Uint8Array(r),a.HEAPU8.set(r,e),!0}}),f=a.PauseCallback.implement({NeedToPauseNow:function(){return!1}});try{s.StartReplacePages(e,t,n.doc,o,h,f)}catch(e){d=e}if(d)return{error:d};for(var g=r.length,p=0;p<t;p++){var v=p+e;if(this.pageIndexMap[v]){var m=this.pageIndexMap[v];delete this.pageIndexMap[v],delete this.pageIndexPromise[v],delete this.pageCache[m.id]}}t!==g&&Object.keys(this.pageIndexMap).reverse().map(function(n,r){+n>=e+t-1&&(i.pageIndexMap[+n+g-t]=i.pageIndexMap[+n],i.pageIndexMap[+n+g-t].index=+n+g-t,delete i.pageIndexMap[+n])});var _=new Array(g).fill(0).map(function(t,n){return e+n}).map(function(e){var t=s.GetPage(e),n=t.GetIndex(),r=new _PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z(n,i);return r.page=t,i.updatePageIndexMap(n,r),i.updatePageCache(r),r.toJson()});return o&&o.delete(),_}},{key:"setPageTransition",value:function(e,t,n,r){var i=this.JR.engine,a=new i.PDFDictionary.Create,o=new i.String("S"),s=new i.String(e);if(a.SetAtName(o,s),"Split"===e){var c=new i.String("Dm"),u=new i.String("M"),l=new i.String("H"),d=new i.String("V"),h=new i.String("I"),f=new i.String("O");"Horizontal Inward"===t?(a.SetAtName(c,l),a.SetAtName(u,h)):"Horizontal Outward"==t?(a.SetAtName(c,l),a.SetAtName(u,f)):"Vertical Inward"==t?(a.SetAtName(c,d),a.SetAtName(u,h)):(a.SetAtName(c,d),a.SetAtName(u,f)),c.delete(),u.delete(),l.delete(),d.delete(),h.delete(),f.delete()}else if("Blinds"===e){var g=new i.String("Dm"),p=new i.String("H"),v=new i.String("V");"Horizontal"===t?a.SetAtName(g,p):a.SetAtName(g,v),g.delete(),p.delete(),v.delete()}else if("Box"==e){var m=new i.String("M"),_=new i.String("I"),y=new i.String("O");"Inward"===t?a.SetAtName(m,_):a.SetAtName(m,y),m.delete(),_.delete(),y.delete()}else if("Wipe"===e||"Glitter"===e||"Cover"===e||"Uncover"===e){var S=new i.String("Di"),b=0;b="Right"===t?0:"Right Up"===t?1:"Up"===t?2:"Left Up"===t?3:"Left"===t?4:"Left Down"===t?5:"Down"===t?6:7,a.SetAtInteger(S,45*b),S.delete()}else if("Push"==e){var I=new i.String("Di"),A=0;A="Right"===t?0:"Up"===t?1:"Left"===t?2:3,a.SetAtInteger(I,45*A),I.delete()}else if("Fly"===e){var P=new i.String("Di"),D=0;D="Right"===t?0:"Up"===t?1:"Left"===t?2:3,a.SetAtInteger(P,90*D),P.delete()}var E=new i.String("D");"Fast"===n?a.SetAtFloat(E,.333328):"Medium"===n&&a.SetAtFloat(E,.666656);var C=this.doc,w=new i.String("Trans");if(C.AddIndirectObject(a),"NoTransition"!==e)for(var k=0;k<r.length;k++){C.GetPage(r[k]).GetDict().SetAtReference(w,a,C)}else for(var T=0;T<r.length;T++){C.GetPage(T).GetDict().RemoveAt(w)}return o.delete(),s.delete(),E.delete(),w.delete(),!0}},{key:"getPageTransitionByIndex",value:function(e){var t,n=this.JR.engine,r=this.doc.GetPage(e).GetDict(),i="NoTransition",a=new n.String("Trans"),o=r.GetElement(a);if(null===o)return{transName:"NoTransition",direction:"",speed:""};o.GetType()===n.PDFObjectType.e_Reference&&(o=o.GetDirectObject()),o.GetType()==n.PDFObjectType.e_Dictionary&&(t=o.GetDict());var s=new n.String("S"),c=t.GetElement(s);c&&"R"===(i=c.GetString().toString())&&(i="NoTransition");var u="",l=new n.String("Dm"),d=t.GetElement(l);if("Split"===i){var h=new n.String("M"),f=t.GetElement(h);u=d&&"V"===d.GetString().toString().toLocaleUpperCase()?f&&"O"===f.GetString().toString().toLocaleUpperCase()?"Vertical Outward":"Vertical Inward":f&&"O"===f.GetString().toString().toLocaleUpperCase()?"Horizontal Outward":"Horizontal Inward",h.delete()}else if("Blinds"===i)u=d&&"V"===d.GetString().toString().toLocaleUpperCase()?"Vertical":"Horizontal";else if("Box"===i){var g=new n.String("M"),p=t.GetElement(g);u=p&&"O"===p.GetString().toString().toLocaleUpperCase()?"Outward":"Inward",g.delete()}else if("Wipe"==i||"Glitter"==i||"Cover"==i||"Uncover"==i){var v=new n.String("Di"),m=t.GetElement(v);if(null===m)u="Right";else switch(m.GetInteger()/45%8){case 0:u="Right";break;case 1:u="Right Up";break;case 2:u="Up";break;case 3:u="Left Up";break;case 4:u="Left";break;case 5:u="Left Down";break;case 6:u="Down";break;case 7:u="Right Down"}v.delete()}else if("Push"===i){var _=new n.String("Di"),y=t.GetElement(_);if(null===y)u="Right";else switch(y.GetInteger()/45%8){case 0:u="Right";break;case 1:default:u="Up";break;case 2:u="Left";break;case 3:u="Down"}_.delete()}else if("Fly"==i){var S=new n.String("Di"),b=t.GetElement(S);if(null===b)u="Right";else switch(b.GetInteger()){case 0:u="Right";break;case 90:default:u="Up";break;case 180:u="Left";break;case 270:u="Down"}S.delete()}var I="";if("NoTransition"!==i){var A=new n.String("D");if(null===t.GetElement(A))I="Slow";else{var P=t.GetElement(A).GetFloat();I=P-.333328<.001&&P-.333328>-.001?"Fast":P-.666656<.001&&P-.666656>-.001?"Medium":"Slow"}A.delete()}return a.delete(),s.delete(),l.delete(),{transName:i,direction:u,speed:I}}},{key:"getStampTypeByPageIndex",value:function(e){var t=this.JR.engine,n=this.doc.GetPage(e).GetDict(),r=new t.String("PieceInfo"),i=n.GetElement(r);if(!i)return!1;var a=i.GetDict(),o=new t.String("FXSConfi"),s=a.GetElement(o);if(!s)return!1;var c=s.GetDict(),u=new t.String("Private"),l=c.GetElement(u);if(!l)return!1;var d=l.GetDict(),h=new t.String("Dynamic"),f=new t.String("Favorite"),g=new t.String("DefaultW"),p=new t.String("DefaultH"),v=d.GetElement(h),m=d.GetElement(f),_=d.GetElement(g),y=d.GetElement(p);return{isDynamic:v.GetBoolean(),isFavorite:m.GetBoolean(),width:_.GetFloat(),height:y.GetFloat()}}},{key:"removePages",value:function(e){var t=this,n=pageRangeTwoDimensionToOne(e).sort(function(e,t){return t-e}),r=this.touchup;r&&(n.forEach(function(e){delete r.editPages[e]}),r.generateContent());try{var i=[];return n.forEach(function(e){i.push(t.removePage(e))}),syncPromisesTask(i).then(function(e){return!0})}catch(e){return console.warn(e),!1}}},{key:"insertBlankPages",value:function(e,t,n){var r=this;this.saveTouchupData();var i=pageRangeTwoDimensionToOne(e).sort(function(e,t){return e-t}),a=[];return i.forEach(function(e,i){a.push(r.insertPage(e+i,t,n))}),syncPromisesTask(a)}},{key:"insertBlankPages2",value:function(e,t,n){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var r,i,a,o,s,c,u,l,d,h;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(f){switch(f.label){case 0:this.saveTouchupData(),r=pageRangeTwoDimensionToOne(e).sort(function(e,t){return e-t}),i=[],a=!0,o=!1,s=void 0,f.label=1;case 1:f.trys.push([1,6,7,8]),c=r[Symbol.iterator](),f.label=2;case 2:return(a=(u=c.next()).done)?[3,5]:(l=u.value,[4,this.insertPage(l,t,n)]);case 3:d=f.sent(),i.push(d),f.label=4;case 4:return a=!0,[3,2];case 5:return[3,8];case 6:return h=f.sent(),o=!0,s=h,[3,8];case 7:try{a||null==c.return||c.return()}finally{if(o)throw s}return[7];case 8:return[2,i]}})}).call(this)}},{key:"rotatePages",value:function(e,t){var n=pageRangeTwoDimensionToOne(e),r=[];return pageIndexesToPages(this,n).then(function(e){return e.forEach(function(e){r.push(e.setRotation(t))}),Promise.all(r)})}},{key:"moveBookmark",value:function(e,t,n){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var r,i;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(a){switch(a.label){case 0:return this.rootBookmark?[3,2]:[4,this.getRootBookmark()];case 1:a.sent(),a.label=2;case 2:return r=this.rootBookmark.getBookmarkById(e),i=this.rootBookmark.getBookmarkById(t),[2,r.moveTo(i,n)]}})}).call(this)}},{key:"getFolioTreeRoot",value:function(){if(this.doc.IsPortfolio()){var e=this.engine.Portfolio.CreatePortfolio(this.doc),t=e.GetRootNode();if(!t.IsEmpty()){var n,r=t.GetNodeType();return r==this.engine.PortfolioNodeType.e_TypeFolder&&(t=new this.engine.PortfolioFolderNode(t),n=this.portfolioFolderNodeToJSON(t)),r==this.engine.PortfolioNodeType.e_TypeFile&&(t=new this.engine.PortfolioFileNode(t),n=this.portfolioFileNodeToJSON(t)),e.delete(),n}e.delete()}}},{key:"getFolioFileInfo",value:function(){if(!this.doc.IsPortfolio())return{};var e=this.engine.Portfolio.CreatePortfolio(this.doc);try{return{initialFileSpecKeyName:e.GetInitialFileSpecKeyName().toString(),initialViewMode:e.GetInitialViewMode().value}}finally{e.delete()}}},{key:"getPortfolioFileStream",value:function(e,t){var n=t.writeStream,r=this.JR.GetJSObjectFromPtr(e);return new _base_FileSpec__WEBPACK_IMPORTED_MODULE_16__.Z(r.GetFileSpec(),this).getStream(n)}},{key:"getPortfolioSubNodes",value:function(e){var t=[],n=this.JR.GetJSObjectFromPtr(e);if(!n)throw new Error("Nonexistent portfolio folder node!");var r=n.GetNodeType();if(r!==this.engine.PortfolioNodeType.e_TypeFolder)return t;for(var i=n.GetSortedSubNodes(),a=i.GetSize(),o=0;o<a;o++){var s=i.GetAt(o);(r=s.GetNodeType())==this.engine.PortfolioNodeType.e_TypeFolder&&(s=new this.engine.PortfolioFolderNode(s),t.push(this.portfolioFolderNodeToJSON(s))),r==this.engine.PortfolioNodeType.e_TypeFile&&(s=new this.engine.PortfolioFileNode(s),t.push(this.portfolioFileNodeToJSON(s)))}return t}},{key:"removeSubNode",value:function(e,t){var n=this.JR.GetJSObjectFromPtr(e);if(!n)throw new Error("Nonexistent portfolio folder node!");if(n.GetNodeType()!==this.engine.PortfolioNodeType.e_TypeFolder)return!1;var r=this.JR.GetJSObjectFromPtr(t);if(!r)throw new Error("Nonexistent portfolio node!");n.RemoveSubNode(r)}},{key:"portfolioFolderNodeToJSON",value:function(e){var t=gsdkDateToLocal(e.GetCreationDateTime()),n=gsdkDateToLocal(e.GetModifiedDateTime());return{type:1,fileName:e.GetName().toString(),description:e.GetDescription().toString(),creationDateTime:t?t.getTime():-1,modifiedDateTime:n?n.getTime():t,handle:this.JR.SetJSObjectRef(e)}}},{key:"portfolioFileNodeToJSON",value:function(e){var t=e.GetFileSpec(),n=gsdkDateToLocal(t.GetCreationDateTime()),r=gsdkDateToLocal(t.GetModifiedDateTime()),i=e.GetKeyName().toString();return{type:0,fileName:t.GetFileName().toString(),fileSize:t.GetFileSize(),description:t.GetDescription().toString(),creationDateTime:n?n.getTime():-1,modifiedDateTime:r?r.getTime():n,subtype:t.GetSubtype().toString(),keyName:i,handle:this.JR.SetJSObjectRef(e)}}},{key:"pdfPortfolio",get:function(){if(this.doc.IsPortfolio())return this._pdfPortfolio||(this._pdfPortfolio=new _PDFPortfolio__WEBPACK_IMPORTED_MODULE_26__.Z(this,this.engine)),this._pdfPortfolio},set:function(e){this._pdfPortfolio=e}},{key:"isCPDF",value:function(){return this.doc.IsCPDF()}},{key:"getDocURI",value:function(){return this.isCPDF()?this.doc.GetDocURI().toString():null}},{key:"getVersionID",value:function(){return this.isCPDF()?this.doc.GetVersionID().toString():null}},{key:"convertToCPDF",value:function(e,t,n,r){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var i,a,o,s,c,u,l,d,h;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(f){switch(f.label){case 0:if([e,t,n,r].some(function(e){return"string"!=typeof e||0===e.length}))throw"[ERROR] All arguments must be string.";if(i=this.engine,a={endPoint:new i.String(t)},s=function(e){return e.split("\r\n").reduce(function(e,t){var n=t.split(": ");return 2===n.length&&(e[n[0]]=n[1]),e},{})},c=function(e,t,n){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var r,a,o,c,u,l,d,h;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(f){switch(f.label){case 0:return r=function(e){var t=e.GetURL().toString(),n=s(e.GetHTTPHeader().toString());switch(e.GetUsageType()){case i.RequestUsageType.e_RequestUsagePOST:return{url:t,headers:n,method:"post",body:e.GetRequestData().toString()};case i.RequestUsageType.e_RequestUsagePUT:return{url:t,headers:n,method:"put",body:e.GetRequestData().toString()};case i.RequestUsageType.e_RequestUsageGET:return{url:t,headers:n,method:"get",params:e.GetRequestData().toString()};case i.RequestUsageType.e_RequestUsageNone:default:throw"[ERROR] Not valid request."}},a=r(t),o=a.url,c=(0,_swc_helpers_object_without_properties__WEBPACK_IMPORTED_MODULE_62__._)(a,["url"]),[4,fetch(o,c)];case 1:return[4,f.sent().json()];case 2:if(u=f.sent(),l=new i.ResponseParser,d=function(e){return e!==i.ErrorCode.e_ErrSuccess},u&&210007===u.ret&&"TOKEN_ERROR"===u.message)throw new Error("Token Error");if(h=l.Parse(new i.String(JSON.stringify(u)),n),d(h))throw"[ERROR] Fail to parse response for ".concat(e);if(h=l.GetResultStatus(),d(h))throw"[ERROR] Response result status: ".concat(h.value.toString());return[2,l]}})})()},this.isCPDF())throw"[ERROR] Already a ConnectedPDF file, so no need to do conversion.";return u=i.ConnectedPDF.GenerateRequestToCheckEndpoint(a.endPoint),[4,c("CheckEndPoint",u,i.ResponsePurposeType.e_ResponsePurposeCheckServer)];case 1:if(!(o=f.sent()).IsValidCPDFServer())throw"[FAILED] ".concat(a.endPoint," is not a valid CPDF server.");return(l=new i.ConnectedPDFClientInfo).device_id=new i.String("Device ID"),l.device_name=new i.String("Device Name"),l.device_model=new i.String("Device Model"),l.mac_address=new i.String("MAC Address"),l.os=new i.String("OS"),l.product_name=new i.String("Product Name"),l.product_vendor=new i.String("Product Vendor"),l.product_version=new i.String("1.0.0.0"),l.product_language=new i.String("en-us"),u=i.ConnectedPDF.GenerateRequestToGetClientID(l),[4,c("GetClientID",u,i.ResponsePurposeType.e_ResponsePurposeClientID)];case 2:return o=f.sent(),d=o.GetClientID(),h=new i.ConnectedPDF(d,new i.String(n),new i.String(""),i.CPDFEncryptType.e_CPDFEncryptTypeAES,this.doc),u=h.GenerateRequestToConvertToCPDF(a.endPoint,new i.String(r),new i.WString(e)),[4,c("ConvertToCPDF",u,i.ResponsePurposeType.e_ResponsePurposeCommon)];case 3:if(o=f.sent(),!h.UpdateInfoToPDFDoc(u))throw"[FAILED] Fail to convert to Connected PDF file.";return[2]}})}).call(this)}},{key:"removeCDocId",value:function(e,t,n,r){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var i,a,o,s,c,u,l,d,h;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(f){switch(f.label){case 0:if([e,t,n,r].some(function(e){return"string"!=typeof e||0===e.length}))throw"[ERROR] All arguments must be string.";return a=this.engine,o={endPoint:new a.String(t)},s=function(e){return e.split("\r\n").reduce(function(e,t){var n=t.split(": ");return 2===n.length&&(e[n[0]]=n[1]),e},{})},c=function(e,t,n){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var r,i,o,c,u,l,d,h,f;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(g){switch(g.label){case 0:return r=function(e){var t=e.GetURL().toString(),n=s(e.GetHTTPHeader().toString());switch(e.GetUsageType()){case a.RequestUsageType.e_RequestUsagePOST:return{url:t,headers:n,method:"post",body:e.GetRequestData().toString()};case a.RequestUsageType.e_RequestUsagePUT:return{url:t,headers:n,method:"put",body:e.GetRequestData().toString()};case a.RequestUsageType.e_RequestUsageGET:return{url:t,headers:n,method:"get",params:e.GetRequestData().toString()};case a.RequestUsageType.e_RequestUsageNone:default:throw"[ERROR] Not valid request."}},i=r(t),o=i.url,c=(0,_swc_helpers_object_without_properties__WEBPACK_IMPORTED_MODULE_62__._)(i,["url"]),[4,fetch(o,c)];case 1:return u=g.sent(),l=new a.ResponseParser,d=function(e){return e!==a.ErrorCode.e_ErrSuccess},[4,u.json()];case 2:if(f=g.sent(),h=l.Parse(new a.String(JSON.stringify(f)),n),d(h))throw"[ERROR] Fail to parse response for ".concat(e);if(h=l.GetResultStatus(),d(h))throw"[ERROR] Response result status: ".concat(h.value.toString());return[2,l]}})})()},u=a.ConnectedPDF.GenerateRequestToCheckEndpoint(o.endPoint),[4,c("CheckEndPoint",u,a.ResponsePurposeType.e_ResponsePurposeCheckServer)];case 1:if(!(i=f.sent()).IsValidCPDFServer())throw"[FAILED] ".concat(o.endPoint," is not a valid CPDF server.");return(l=new a.ConnectedPDFClientInfo).device_id=new a.String("Device ID"),l.device_name=new a.String("Device Name"),l.device_model=new a.String("Device Model"),l.mac_address=new a.String("MAC Address"),l.os=new a.String("OS"),l.product_name=new a.String("Product Name"),l.product_vendor=new a.String("Product Vendor"),l.product_version=new a.String("1.0.0.0"),l.product_language=new a.String("en-us"),u=a.ConnectedPDF.GenerateRequestToGetClientID(l),[4,c("GetClientID",u,a.ResponsePurposeType.e_ResponsePurposeClientID)];case 2:return i=f.sent(),d=i.GetClientID(),(h=new a.ConnectedPDF(d,new a.String(n),new a.String(""),a.CPDFEncryptType.e_CPDFEncryptTypeAES,this.doc)).RemoveDocumentID(),h.RemoveVersionID(),[2]}})}).call(this)}},{key:"saveAsReload",value:function(){var e=this,t=[];return this.getStream({writeStream:function(e){t.push(e)}},0).then(function(n){for(var r=new Uint8Array(n),i=0,a=0,o=t.length;a<o;a++){var s=t[a];r.set(new Uint8Array(s),i),i+=s.byteLength}r=r.slice(0);var c=new PDFDoc1(e.JR,{buffer:r,docId:e.id});return c.parseByPassword(""),c})}},{key:"getAllPages",value:function(){var e=this;return this.getPageCount().then(function(t){for(var n=[],r=0;r<t;r++)n.push(e.getPageByIndex(r).then(function(e){return e.page.IsParsed()||e.parsedPage(),e}));return Promise.all(n)})}},{key:"getDestinationsArray",value:function(){var e=this;return this.docPromise.then(function(t){var n=new e.engine.CNP_Destinations(t),r=new e.engine.WStringArray,i=new e.engine.Int32Array,a=new e.engine.Int32Array;n.GetAllDestinations(r,i,a);for(var o=[],s=0;s<r.GetSize();s++){var c=r.GetAt(s),u=i.GetAt(s),l={title:c.toString(),page:u};o.push(l)}return o})}},{key:"removeMetadata",value:function(e){var t=this.engine,n=new t.WString(e.toString()),r=new t.Metadata(this.doc),i=r.RemoveCustomerKey(n);return n=null,r=null,i}},{key:"setViewPreference",value:function(e,t){var n=this.engine,r=this.doc.GetCatalog(),i=this.getVPDict(),a=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(n,e),o=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(n,t+"");switch(e){case"PageMode":"FullScreen"===(h=getDictName(this.JR,n,r,"PageMode","UseNone"))?i.SetAtName((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(n,"NonFullScreenPageMode"),o):r.SetAtName(a,o);break;case"PageLayout":"Default"==t?r.RemoveAt(a):r.SetAtName(a,o);break;case"Lang":"none"==t?r.RemoveAt(a):r.SetAtString(a,o);break;case"HideToolbar":case"HideMenubar":case"HideWindowUI":case"CenterWindow":case"DisplayDocTitle":case"PickTrayByPDFSize":i.SetAtBoolean(a,t);break;case"PrintScaling":case"Duplex":case"Direction":i.SetAtName(a,o);break;case"NumCopies":if("Default"==t)i.RemoveAt(a);else{var s=+t;i.SetAtInteger(a,s)}break;case"PrintPageRange":var c=n.PDFArray.Create(),u=new Set;(t=t.replace(/ /g,"")).split(",").forEach(function(e){if(e.indexOf("-")>0)for(var t,n,r=e.split("-"),i=(t=Math).min.apply(t,(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_54__._)(r))-1,a=(n=Math).max.apply(n,(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_54__._)(r))-1,o=i;o<=a;o++)u.add(o);else""!==e&&(e=+e-1,u.add(e))}),u.forEach(function(e){e>=0&&c.AddInteger(e)}),i.SetAt(a,c);break;case"FullScreen":var l=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(n,"PageMode"),d=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(n,"NonFullScreenPageMode");if(t){var h=getDictName(this.JR,n,r,"PageMode","UseNone");r.SetAtString(l,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(n,"FullScreen")),i.SetAtName(d,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(n,h))}else{var f=getDictName(this.JR,n,i,"NonFullScreenPageMode");r.SetAtString(l,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(n,f)),i.RemoveAt(d)}}}},{key:"getVPDict",value:function(){var e=this.engine,t=this.doc.GetCatalog(),n=t.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(e,"ViewerPreferences"));return n?n=n.GetDict():(n=e.PDFDictionary.Create(),t.SetAt((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(e,"ViewerPreferences"),n)),n}},{key:"getViewerPreference",value:function(){var e=this,t=this.engine,n=this.doc.GetCatalog(),r=getDictName(this.JR,t,n,"PageLayout"),i=getDictName(this.JR,t,n,"PageMode","UseNone"),a=getDictName(this.JR,t,n,"Lang"),o={},s=n.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(t,"ViewerPreferences"));return s&&(s=s.GetDict()),[["HideToolbar",!1],["HideMenubar",!1],["HideWindowUI",!1],["FitWindow",!1],["CenterWindow",!1],["DisplayDocTitle",!1],["NonFullScreenPageMode"],["PickTrayByPDFSize",!1],["PrintScaling","AppDefault"],["Duplex","Simplex"],["NumCopies"],["Direction","L2R"]].forEach(function(n){var r=(0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_52__._)(n,2),i=r[0],a=r[1];o[i]=getDictName(e.JR,t,s,i,a)}),o.PrintPageRange=getPrintRange(s,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(t,"PrintPageRange")),{pageLayout:r,uiLayout:i,language:a,viewerPreference:o}}},{key:"getEmbeddedFontData",value:function(){for(var e=this.doc.GetEmbeddedFontData(),t=e.nonstandard_font_name_array,n=e.standard_font_name_array,r=[],i=[],a=0;a<t.GetSize();a++){var o=t.GetAt(a);i.push(o.toString())}for(var s=0;s<n.GetSize();s++){var c=n.GetAt(s);r.push(c.toString())}return{standard:r,nostandard:i}}},{key:"computeAuditSpace",value:function(){var e=this;return _web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_30__.ZP.loadWasmModule(_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_30__.sg).then(function(){e.doc;var t=e.engine,n=new t.FX_AuditSpaceSize,r=(t.Optimizer.ComputeAuditSpace(e.doc,n),{});for(var i in n){var a=n[i];"function"!=typeof a&&(r[i]=a)}return r})}},{key:"getStreamBySpecifiedDoc",value:function(e,t){var n=this.engine,r=Promise.resolve(e);return e||(r=this.docPromise),r.then(function(e){var r=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)(),i=new ArrayBuffer,a=0,o=!1,s=0,c=0,u=n.WriterCallback.implement({Release:function(){u.delete()},Flush:function(){return r.resolve(i),!0},GetSize:function(){return o?c:i.byteLength},WriteBlock:function(e,t,r){if(o&&(t+=s),i.byteLength<t+r){var a=i;if(i=new ArrayBuffer(t+r),0!==a.byteLength){var c=new Uint8Array(a);new Uint8Array(i).set(c)}}var u=new Uint8Array(i,t,r),l=n.HEAPU8.subarray(e,e+r);return u.set(l),!0},GetPosition:function(){return o?a-s:a},SetPosition:function(e){o&&(e+=s),a=e},IsEOF:function(){var e=o?c:i.byteLength;return a===e},ReadBlock:function(e,t,r){if(o&&(t+=s)+r>c)return!1;var a=new Uint8Array(i,t,r);return n.HEAPU8.set(a,e),!0},SetRange:function(e,t){s=e,c=t,o=!0},ClearRange:function(){o=!1}});return n.saveDoc(e,u,t),r.promise})}},{key:"optimizer",value:function optimizer(option,portfolioNodeHandle){var doc=this.doc;portfolioNodeHandle&&this.pdfPortfolio&&(doc=this.pdfPortfolio.getPDFDocByNodeHandle(portfolioNodeHandle));var engine=this.engine,opSetting=new engine.OptimizerSettings;if(option.DC_Algorithm){var imgSetting=new engine.ImageSettings;imgSetting.SetStretchMode(engine.ImageStretchMode[option.DC_Algorithm]),imgSetting.SetCompressionMode(engine.ImageCompressMode.e_ImageCompressjpeg2000),imgSetting.SetQuality(engine.ImageCompressQuality[option.CC_Level]),imgSetting.SetImageDPI(+option.DC_DPISet),imgSetting.SetImageDPILimit(+option.DC_DPIAbove),"e_ImageCompressjpeg2000"===option.CC_Algorithm&&imgSetting.SetTitleSize(+option.compressiontileSize),opSetting.SetColorGrayImageSettings(imgSetting)}if(option.DM_Algorithm){var monoSetting=new engine.MonoImageSettings;monoSetting.SetCompressionMode(engine.MonoImageCompressMode.e_ImageCompressjbig2),monoSetting.SetStretchMode(engine.MonoStretchMode[option.DM_Algorithm]),monoSetting.SetImageDPI(+option.DM_DPISet),monoSetting.SetImageDPILimit(+option.DM_DPIAbove),-1===["e_ImageCompressjbig2","e_ImageCompressHigh"].indexOf(option.CM_Algorithm)&&(option.CM_Level=""),"e_ImageCompressQualityLossless"===option.CM_Level||"e_ImageCompressQualityLossy"===option.CM_Level?monoSetting.SetQuality(engine.MonoImageCompressQuality[option.CM_Level]):option.CM_Level&&monoSetting.SetQuality(engine.ImageCompressQuality[option.CM_Level]),opSetting.SetMonoImageSettings(monoSetting)}if(option.unembededFonts&&option.unembededFonts.length>0){var unembeddedFontSettings=new engine.UnembeddedFontSettings,wsArray=new this.engine.WStringArray;option.unembededFonts.forEach(function(e){wsArray.Add((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(engine,e))}),unembeddedFontSettings.SetUnembeddedFontNameArray(wsArray),opSetting.SetUnembeddedFontSettings(unembeddedFontSettings)}if(option.D_IntList){var D_IntList_Arr=option.D_IntList.split(",")||[];D_IntList_Arr=D_IntList_Arr.map(function(e){return engine.DiscardObjectsOptions[e].value}),D_IntList_Arr=D_IntList_Arr.join("|"),D_IntList_Arr=eval(D_IntList_Arr),opSetting.SetDiscardObjectsOptions(D_IntList_Arr)}if(option.D_IntList_User){var D_IntList_User_Arr=option.D_IntList_User.split(",")||[];D_IntList_User_Arr=D_IntList_User_Arr.map(function(e){return engine.DiscardUserDataOptions[e].value}),D_IntList_User_Arr=D_IntList_User_Arr.join("|"),D_IntList_User_Arr=eval(D_IntList_User_Arr),opSetting.SetDiscardUserDataOptions(D_IntList_User_Arr)}var isSaveFlagLinearized=doc.IsLinearized();if(option.CL_IntList){var CL_IntList_Arr=option.CL_IntList.split(",")||[];isSaveFlagLinearized=CL_IntList_Arr.indexOf("e_SaveFlagLinearized")>-1,CL_IntList_Arr.splice(CL_IntList_Arr.indexOf("e_SaveFlagLinearized"),1),CL_IntList_Arr=CL_IntList_Arr.map(function(e){return engine.CleanUpOptions[e].value}),CL_IntList_Arr=CL_IntList_Arr.join("|"),CL_IntList_Arr=eval(CL_IntList_Arr),CL_IntList_Arr&&opSetting.SetCleanUpOptions(CL_IntList_Arr)}for(var streamCallback=engine.ImageCompressionCallback.implement({Release:function(){},GetTempFileStream:function(){var e=0,t=engine.StreamCallback.implement({Release:function(){t.delete()},Flush:function(){return!0},GetSize:function(){return e},ReadBlock:function(e,t,n){return!1},WriteBlock:function(t,n,r){return e+=r,!0}});return t}}),pauseCallback=engine.PauseCallback.implement({NeedToPauseNow:function(){return!0}}),progressive=engine.Optimizer.Optimize(doc,opSetting,streamCallback,pauseCallback),optimize_state=engine.ProgressiveState.e_ToBeContinued;optimize_state===engine.ProgressiveState.e_ToBeContinued;)optimize_state=progressive.Continue();var linearizedFlag=engine.SaveFlags.e_SaveFlagLinearized.value|engine.SaveFlags.e_SaveFlagRemoveRedundantObjects.value;return this.getStreamBySpecifiedDoc(doc,isSaveFlagLinearized?linearizedFlag:engine.SaveFlags.e_SaveFlagRemoveRedundantObjects.value).then(function(e){return[e]})}},{key:"optimizeScannedPDF",value:function(e,t){var n=e.pageRange,r=e.scannedImageCompressMode,i=void 0===r?"e_ImageCompressHigh":r,a=e.quality,o=void 0===a?80:a,s=e.scannedMonoImageCompressMode,c=void 0===s?"e_MonoImageCompressjbig2LossLess":s,u=this.doc,l=this.engine,d=new l.OptimizeScannedPDFSettings;if(n.length>0){var h=new l.Range;n.forEach(function(e){return h.AddSingle(e)}),d.SetOptimizedPages(h)}d.SetColorGrayImageCompressionMode(l.ScannedImageCompressMode[i]),["e_ImageCompressjpeg","e_ImageCompressHigh"].indexOf(i)>-1&&d.SetColorGrayImageCompressionQuality(o),d.SetMonoImageCompressionMode(l.ScannedMonoImageCompressMode[c]);var f=l.ImageCompressionCallback.implement({Release:function(){},GetTempFileStream:function(){var e=new ArrayBuffer,t=l.StreamCallback.implement({Release:function(){t.delete()},Flush:function(){return!0},GetSize:function(){return e.byteLength},ReadBlock:function(t,n,r){var i=new Uint8Array(e,n,r);return l.HEAPU8.set(i,t),!0},WriteBlock:function(t,n,r){if(e.byteLength<n+r){var i=e;if(e=new ArrayBuffer(n+r),0!==i.byteLength){var a=new Uint8Array(i);new Uint8Array(e).set(a)}}var o=new Uint8Array(e,n,r),s=l.HEAPU8.subarray(t,t+r);return o.set(s),!0}});return t}}),g=l.PauseCallback.implement({NeedToPauseNow:function(){return!0}});try{for(var p=l.Optimizer.OptimizeScannedPDF(u,d,f,g),v=-1,m=0;v<100;){if(v=p.GetRateOfProgress(),t&&t(v),3===m)return!1;if(-1===v)throw new Error("optimizeScannedPDF error");0===v?m+=1:p.Continue()}return this.getStreamBySpecifiedDoc(u,0).then(function(e){return[e]})}catch(e){return!1}}},{key:"importAsLayer",value:function(e){var t=e.sourcePdfDoc,n=e.sourceFileName,r=e.sourcePageIndex,i=void 0===r?0:r,a=e.importType,o=void 0===a?"e_ImportToCreateNewLayer":a,s=e.newLayerName,c=e.targetLayerName,u=e.targetPageIndex,l=void 0===u?0:u,d=e.targetFileName,h=e.rotateAngle,f=void 0===h?0:h,g=e.isAbsoluteScale,p=void 0!==g&&g,v=e.scale,m=void 0===v?1:v,_=e.verticalOffsetFrom,y=void 0===_?"e_OffsetFromCenter":_,S=e.horizontalOffsetFrom,b=void 0===S?"e_OffsetFromCenter":S,I=e.verticalOffset,A=void 0===I?0:I,P=e.horizontalOffset,D=void 0===P?0:P,E=e.opacity,C=void 0===E?100:E,w=e.appearBehindTarget,k=void 0!==w&&w,T=this.engine;this.doc.GetInfo();y=T.OffsetFrom[y],b=T.OffsetFrom[b],o=T.ImportAsLayerOperationType[o];var F=new T.ImportAsLayerSetting(o,new T.WString(s),new T.WString(c),f,p,m,y,A,b,D,C,k);try{this.doc.ImportAsLayer(l,new T.WString(d),t,new T.WString(n),i,F),this.getPageByIndex(l).then(function(e){e.reParsePage()});var G=this.pdfLayer.layer_context,R=this.pdfLayer.layer_tree.IsEmpty(),x=new _PDFLayer_js__WEBPACK_IMPORTED_MODULE_6__.Z(this.doc,T);return R||x.layer_context.CopyStates(G),this.pdfLayer=x,this.pdfLayer.toJson()}catch(e){throw new Error("ImportAsLayer error: "+e)}}},{key:"previewImportLayer",value:function(e){var t=e.sourcePdfDoc,n=e.sourcePageIndex,r=void 0===n?0:n,i=e.importType,a=void 0===i?"e_ImportToCreateNewLayer":i,o=e.targetPageIndex,s=void 0===o?0:o,c=e.rotateAngle,u=void 0===c?0:c,l=e.isAbsoluteScale,d=void 0!==l&&l,h=e.scale,f=void 0===h?1:h,g=e.verticalOffsetFrom,p=void 0===g?"e_OffsetFromCenter":g,v=e.horizontalOffsetFrom,m=void 0===v?"e_OffsetFromCenter":v,_=e.verticalOffset,y=void 0===_?0:_,S=e.horizontalOffset,b=void 0===S?0:S,I=e.opacity,A=void 0===I?100:I,P=e.appearBehindTarget,D=void 0!==P&&P,E=this.engine,C=this.doc.GetPage(s);C.StartParse(E.ParseFlags.e_ParsePageNormal.value,null,!0);var w=C.GetWidth(),k=C.GetHeight(),T=E.DIBFormat.e_DIBArgb,F=new E.Bitmap(w,k,T,0,0);F.FillRect(0,null);var G=E.Rotation.e_Rotation0,R=C.GetDisplayMatrix(0,0,w,k,G),x=new E.Renderer(F,!0),O=E.ContentFlag.e_RenderPage.value|E.ContentFlag.e_RenderAnnot.value;if(!t){var M=this.pdfLayer;return x.SetLayerContext(M.layer_context),x.SetRenderContentFlags(O),x.StartRender(C,R,null),(0,_share_RendererHelper__WEBPACK_IMPORTED_MODULE_15__.v)(E,F,x)}p=E.OffsetFrom[p],m=E.OffsetFrom[m],a=E.ImportAsLayerOperationType[a];var N=new E.ImportAsLayerSetting(a,new E.WString(""),new E.WString,u,d,f,p,y,m,b,A,D),B=t.GetPage(r);B.StartParse(E.ParseFlags.e_ParsePageNormal.value,null,!1);var L=C.GetBox(E.BoxType.e_MediaBox),j=B.GetBox(E.BoxType.e_MediaBox),U=new E.Matrix(1,0,0,1,0,0),W=3.14*N.rotate_angle/180,H=new E.Matrix(1,0,0,1,0,0);H.Rotate(W,!1),H.TransformRect(j),U.Concat(H.a,H.b,H.c,H.d,H.e,H.f,!1);var K=new E.Matrix(1,0,0,1,0,0);if(0==N.is_absolute_scale){var z=L.Width()/j.Width(),V=L.Height()/j.Height(),J=parseFloat(z)<parseFloat(V)?z:V;K.Scale(J,J,!1)}K.Scale(N.scale,N.scale,!1),K.TransformRect(j),U.Concat(K.a,K.b,K.c,K.d,K.e,K.f,!1);var Y=new E.PointF,Z=new E.PointF,q=N.horizontal_offset;switch(N.horizontal_offset_from){case E.OffsetFrom.e_OffsetFromLeft:Y.x=j.left,Z.x=L.left;break;case E.OffsetFrom.e_OffsetFromCenter:Y.x=j.left+j.Width()/2,Z.x=L.left+L.Width()/2;break;case E.OffsetFrom.e_OffsetFromRight:Y.x=j.right,Z.x=L.right,q=0-N.horizontal_offset}var X=N.vertical_offset;switch(N.vertical_offset_from){case E.OffsetFrom.e_OffsetFromTop:Y.y=j.top,Z.y=L.top,X=0-N.vertical_offset;break;case E.OffsetFrom.e_OffsetFromCenter:Y.y=j.top-j.Height()/2,Z.y=L.top-L.Height()/2;break;case E.OffsetFrom.e_OffsetFromBottom:Y.y=j.bottom,Z.y=L.bottom}U.Translate(Z.x-Y.x+q,Z.y-Y.y+X,!1);var Q=U;return Q.Concat(R.a,R.b,R.c,R.d,R.e,R.f,!1),x.SetRenderContentFlags(E.ContentFlag.e_RenderPage.value),x.SetRenderLayer(!1),x.StartRender(B,Q,null),(0,_share_RendererHelper__WEBPACK_IMPORTED_MODULE_15__.v)(E,F,x)}},{key:"isCompareDoc",value:function(){var e=this.doc.GetCatalog();if(!e)return!1;if(!e.HasKey(new this.engine.String("PieceInfo")))return!1;var t=e.GetElement(new this.engine.String("PieceInfo"));return!!t&&(t.GetDict()&&t.GetDict().HasKey(new this.engine.String("ComparePDF")))}},{key:"reloadLayer",value:function(){return this.pdfLayer&&this.pdfLayer.delete(),this.pdfLayer=new _PDFLayer_js__WEBPACK_IMPORTED_MODULE_6__.Z(this.doc,this.engine),!0}},{key:"exportMeasureData",value:function(e){var t=e.label,n=void 0===t?"label":t,r=e.type,i=void 0===r?"type":r,a=e.value,o=void 0===a?"value":a,s=e.unit,c=void 0===s?"unit":s,u=e.distance,l=void 0===u?"distance":u,d=e.perimeter,h=void 0===d?"perimeter":d,f=e.area,g=void 0===f?"area":f,p=this.doc,v=this.engine,m=new v.ExportMeasureSetting;m.label_colunm_name=new v.WString(n),m.type_colunm_name=new v.WString(i),m.value_colunm_name=new v.WString(o),m.unit_colunm_name=new v.WString(c),m.type_distance_name=new v.WString(l),m.type_perimeter_name=new v.WString(h),m.type_area_name=new v.WString(g);for(var _=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)(),y=0,S=[],b=v.WriterCallback.implement({Release:function(){b.delete(),_.resolve(S)},Flush:function(){return _.resolve(S),!0},GetSize:function(){return y},WriteBlock:function(e,t,n){y+=n;var r,i=v.HEAPU8.buffer;return r=i.slice?i.slice(e,e+n):new Uint8Array(i,e,n).buffer,S.push(r),!0}}),I=v.PauseCallback.implement({NeedToPauseNow:function(){return!0}}),A=p.StartExportMeasureDataToCSV(m,b,I),P=(A.GetRateOfProgress(),v.ProgressiveState.e_ToBeContinued);v.ProgressiveState.e_ToBeContinued==P;)P=A.Continue(),A.GetRateOfProgress().toString();return _.promise}},{key:"setRenderConfigLineWeight",value:function(e){this.renderConfigLineWeight=e}},{key:"searchBookmark",value:function(e,t){var n=this;return this.getBookmarks().then(function(r){if(!n.rootBookmark)return[];var i=[];return n.rootBookmark.search(e,t,i),i})}},{key:"searchDoc",value:function(e,t,n,r){var i=this;if("number"==typeof e)return-1==e?this.searchBookmark(t,n):this.getPageByIndex(e).then(function(e){return e.search(t,n,r)});var a=[];return e.forEach(function(e){if(-1==e)return a.push(i.searchBookmark(t,n));a.push(i.getPageByIndex(e).then(function(e){return e.search(t,n,r)}))}),Promise.all(a).then(function(t){return t.reduce(function(t,n,r){return t[e[r]]=n,t},{})})}},{key:"convertToTextMarkup",value:function(e){var t=this,n=[],r={};return e.forEach(function(e){if("form"!==e.type&&!e.isMetaData){var i=t.pageIndexMap[e.pageIndex];i&&(r[e.pageIndex]=1,n.push(i.addAnnot({flags:4,type:"highlight",rect:{left:0,right:0,top:0,bottom:0},coords:e.rects})))}}),Promise.all(n).then(function(e){return Object.keys(r)})}},{key:"generateDocHash",value:function(e){var t=function(e,t){var n=new Uint8Array(t),r=new e.String,i=e._malloc(n.length);return e.HEAPU8.set(n,i),r.Load(i,n.length),e._free(i),r}(this.engine,e),n=this.engine.Library.GenerateHashData(this.engine.CryptType.e_Crypt_SHA256,t,t.GetLength()).toString();return t.delete(),n}},{key:"redactSearch",value:function(e,t,n,r,i){var a=this,o=[],s=[];return e.forEach(function(e){if(!e.isMetaData){t<0&&(t+=e.word.length);var c=e.charIndex+t,u=-1==n?e.word.length:n,l="";r.find(function(t){if(t.word.toLowerCase()==e.word.toLowerCase())return l=t.overlay,!0}),s.push(e.pageIndex);var d=a.pageIndexMap[e.pageIndex];"form"===e.type?o.push(d.markRedactByAnnotId(e.id,c,u,l,i)):o.push(d.markRedact(c,u,l,i))}}),Promise.all(o).then(function(e){return s})}},{key:"removePDFAID",value:function(){return new this.engine.Metadata(this.doc).RemovePDFAID()}},{key:"isScannedDoc",value:function(){return this.getAllPages().then(function(e){for(var t=0;t<e.length;t++)for(var n=e[t].page,r=n.GetGraphicsObjectCount(),i=0;i<r;i++){var a=n.GetGraphicsObjectBI(i).GetType().value;if(2!==a&&3!==a)return!1}return!0})}},{key:"getCompareFileFilterNums",value:function(){for(var e={Text:0,Images:0,Annotation:0,Formatting:0},t=this.doc.GetPageCount(),n=2;n<t;n++){var r=this.doc.GetPage(n).GetDict().GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(this.engine,"Annots"));if(r)for(var i=r.GetArray(),a=i.GetElementCount(),o=0;o<a;o++){var s=i.GetElement(o).GetDict().GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(this.engine,"OC"));if(s){var c=s.GetDict();if(c){var u=c.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(this.engine,"VE")).GetArray(),l=u.GetElementCount();if(!(l<=1)){var d=u.GetElement(l-1);if(d)if(!d.GetArray())e[d.GetDict().GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(this.engine,"Name")).GetString().toString()]++}}}}}return Object.keys(e).reduce(function(e,t){return e[t]=Math.floor(e[t]/2),e},e)}},{key:"createSummarizeComments",value:function(e){var t=this,n=e.writeStream,r=void 0===n?function(){}:n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)(),o=i.layoutType,s=i.commentType,c=i.paperSizeType,u=i.fontSizeType,l=i.sortCommentsByType,d=i.pagesContainingNoComments,h=i.pageIndexes,f=i.color,g=i.opacity,p=i.fileName,v=i.annotTypesInfo,m=i.summarizeCommentsShowInfo,_=void 0===m?{}:m,y=this.engine,S=(0,_share_createSummarizeComments_util__WEBPACK_IMPORTED_MODULE_24__.jj)(y,o),b=(0,_annot_annotType__WEBPACK_IMPORTED_MODULE_63__.M)(y,s),I=(0,_share_createSummarizeComments_util__WEBPACK_IMPORTED_MODULE_24__.Ii)(y,u),A=(0,_share_createSummarizeComments_util__WEBPACK_IMPORTED_MODULE_24__.MW)(y,l),P=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(y,p),D=(0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_52__._)(h,2),E=D[0],C=D[1],w=void 0===C?E:C;try{var k=new y.AnnotationSummary(this.doc),T=new y.AnnotationSummarySettings;T.SetSummaryLayout(S);var F="All"===s;T.SetAnnotType(b,F);var G=(0,_share_createSummarizeComments_util__WEBPACK_IMPORTED_MODULE_24__.ZX)(c),R=new y.CFX_FloatRect(0,0,G[0],G[1]);T.SetPageRect(R),R.delete(),T.SetFontSize(I),T.SetSortType(A),T.SetStartPage(E),T.SetEndPage(w),T.EnableOutputNoAnnotationPage(d),"SeparatePagesWithLine"!==o&&"SinglePageWithLine"!==o||(T.SetConnectorLineColor(f),T.SetConnectorLineOpacity(g)),T.SetFileTitle(P),v.forEach(function(e){var n=e.type,r=e.annotThumbnail,i=(0,_annot_annotType__WEBPACK_IMPORTED_MODULE_63__.M)(y,n),a=(0,_share_createSummarizeComments_util__WEBPACK_IMPORTED_MODULE_24__.Yh)(y,r,t.JR);T.SetAnnotThumbnail(i,a)});var x=y.AnnotationSummaryCallback.implement({Release:function(){x.delete()},GetCurrentLocaleID:function(){return y.LocaleID.e_LocaleIDUnspecified.value},GetLocalFontName:function(){return new _share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp(y,"Helvetica")},LoadString:function(e){return(0,_share_createSummarizeComments_util__WEBPACK_IMPORTED_MODULE_24__.SU)(y,e,_)}});k.SetCallback(x);var O=0,M=y.WriterCallback.implement({Release:function(){M.delete()},Flush:function(){return a.resolve(O),!0},GetSize:function(){return O},WriteBlock:function(e,t,n){O=Math.max(t+n,O);var i,a=y.HEAPU8.buffer;return i=a.slice?a.slice(e,e+n):new Uint8Array(a,e,n).buffer,r(i,t,n),!0}}),N=y.PauseCallback.implement({NeedToPauseNow:function(){return!1}});k.StartSummarize(M,T,N),k.delete(),T.delete()}catch(e){var B=this.engine.getErrorCode(e);console.error(B)}return a.promise}},{key:"addJSAA",value:function(e,t){var n=this.doc,r=this.engine,i=n.GetCatalog(),a=i.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,"AA"));a||(a=r.PDFDictionary.Create(),i.SetAt((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(r,"AA"),a));var o=new r.AdditionalAction(n,a.GetDict()),s=this.JR.actionManager.create(n,"TypeJavaScript"),c=new r.JavaScriptAction(s);c.SetScript((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(r,t)),e=r.TriggerEvent.values[e],o.SetAction(e,c)}},{key:"addAA",value:function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=this.doc,o=this.engine,s=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(o,"AA"),c=e.GetElement(s);if(c){var u=c.GetDict();r=new o.AdditionalAction(a,u)}else{var l=o.PDFDictionary.Create();e.SetAt(s,l),r=new o.AdditionalAction(a,l)}var d=o.TriggerEvent.values[n.trigger],h=r.GetAction(d);if(i&&!h.IsEmpty()){var f=h.GetSubActionCount();h.InsertSubAction(f,t)}else r.SetAction(d,t)}},{key:"hasOwnerPassword",value:function(){return this.doc.HasOwnerPassword()}},{key:"getText",value:function(e,t,n){var r=n.taskProgress,i=this,a=this.engine,o=new a.PDFDoc,s=new a.String("");o.Load(s);var c=this.doc,u=c.GetPageCount(),l=new a.String("");e.forEach(function(e,t){var n=new a.Range((e+u)%u);o.StartImportPages(t,c,0,l,n)}),this.taskProgressMap[t]=!1;var d="",h=0,f=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(i.taskProgressMap[t])return delete i.taskProgressMap[t],r({percent:h,content:d});var s=o.GetPage(n),c=a.FlattenOptions.e_FlattenAll.value;s.Flatten(!0,c),i.resetForm();var u=a.ParseFlags.e_ParsePageNormal.value;s.StartParse(u,null,!1);var l=a.TextParseFlags.e_ParseTextNormal.value,g=new a.TextPage(s,l),p=a.TextOrderFlag.e_TextStreamOrder,v=g.GetText(p).toString();if(d.length>0?d=d+"\r\n"+v:d+=v,g.delete(),s.delete(),h=Math.round((n+1)/e.length*1e4)/100,n>=e.length-1)return delete i.taskProgressMap[t],o.delete(),r({percent:100,content:d});r({percent:h,content:d}),f(++n)};f()}},{key:"cancelTaskProgress",value:function(e){this.taskProgressMap.hasOwnProperty(e)&&(this.taskProgressMap[e]=!0)}},{key:"verifyDocSignature",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_30__.ZP.loadWasmModule(_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_30__.v6).then(function(){var n=t.is_verify_signature,r=void 0===n||n,i=t.use_expired_tst,a=void 0===i||i,o=t.ignore_doc_info,s=void 0!==o&&o,c=t.time_type,u=void 0===c?0:c,l=t.isCertTrusted,d=t.isCertTrustedRoot,h=t.trustedCertificateList,f=void 0===h?[]:h,g=t.isCertifiedMap,p=void 0===g?{}:g,v={},m=e.engine,_=m.TimeType.values[u]||m.TimeType.e_SignatureCreationTime;try{var y=new m.LTVVerifier(e.doc,r,a,s,_),S=(0,_share_signature_util__WEBPACK_IMPORTED_MODULE_20__.dX)({engine:m,isCertTrusted:l,isCertTrustedRoot:d,trustedCertificateList:f,JR:e.JR});y.SetTrustedCertStoreCallback(S),y.SetVerifyMode(m.VerifyMode.e_VerifyModeAcrobat);var b=y.Verify();(0,_share_signature_util__WEBPACK_IMPORTED_MODULE_20__.zF)(v,p,m,b),y=null}catch(e){var I=m.getErrorCode(e);console.error(I)}return v})}},{key:"clearAllDesignerAssistCache",value:function(){var e=this.pageIndexMap;for(var t in e){var n=this.pageIndexMap[t];n&&n.clearDesignerAssitCache()}}},{key:"compareWith",value:function(e,t,n){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var r,i,a,o,s,c,u,l,d,h,f,g,p,v;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(m){switch(m.label){case 0:return this.engine.Library.HasModuleLicenseRight({value:6})?[4,getRange(t.basePageRange,this)]:[2,Promise.reject(_error_code__WEBPACK_IMPORTED_MODULE_11__.v.noeCompareLicense)];case 1:return r=m.sent(),[4,getRange(t.otherPageRange,e)];case 2:if(i=m.sent(),a=r.from,o=r.end-r.from+1,s=i.from,c=i.end-i.from+1,u=initComparisonOptions(t.options,this.engine),l=function(e,t){return t||(e.oriFile?e.oriFile.name:void 0)||""},d=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(this.engine,l(this,t.baseFileName)),h=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(this.engine,l(e,t.otherFileName)),f=new this.engine.Comparison(this.doc,e.doc),g=this.JR.getPDFDocById(t.newTemplateId)||this,p=this.JR.getPDFDocById(t.oldTemplateId)||e,v=new this.engine.ComparisonStringResource,t.stringResource)for(var _ in t.stringResource)v[_]=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(this.engine,t.stringResource[_]);return[2,f.GenerateComparedDoc(a,s,o,c,u,d,h,g.doc,p.doc,v,n)]}})}).call(this)}},{key:"getStringHashSHA256Data",value:function(e){var t=this.engine,n=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(t,e);return t.Library.GenerateHashData(t.CryptType.e_Crypt_SHA256,n,n.GetLength()).toString().toLowerCase()}},{key:"signForESignUS",value:function(){for(var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=this.engine,a=this.doc,o=i.KeyName,s=0,c=r.length;s<c;s++){var u=r[s],l=u.rect,d=u.pageIndex,h=u.buffer,f=u.FoxitSignSubtype,g=n.documentID,p=n.FoxitSignFT,v=n.FoxitSignTxnID,m=n.showLogo,_=a.GetPage(d),y=new i.WString("Foxit_eSign_Signature_Field".concat(a.GetSignatureCount(),"_DOCUMENTID_").concat(this.getStringHashSHA256Data(g+""))),S=_.AddSignature(new i.CFX_FloatRect(l.left,l.bottom,l.right,l.top),y,{value:0},!0);if(S.IsEmpty())throw new Error("AddSignatureFailed");var b=void 0;b="string"==typeof h?this.JR.createReaderCallback(h):this.JR.createReaderCallbackByBuffer(h);var I=new i.Image(b).GetFrameBitmap(0);S.SetBitmap2AP(I),S.SetAppearanceFlags(128);var A=new i.SignatureAppearanceOptions;A.showLogo=m,S.SetSignatureAppearanceOptions(A),S.GenerateSignAppearance(),S.ResetSignAppearance();var P=S.GetDict(),D=new i.String("V");0===s?(t=S,e=S.CreateSigVDict((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(i,""),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(i,"")),a.AddIndirectObject(e),e.SetAtString((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(i,"FoxitSignTxnID"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(i,v))):P.SetAtReference(D,e,a),P.SetAtName((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(i,"FoxitSignFT"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(i,p)),P.SetAtName((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(i,"FoxitSignSubtype"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(i,f))}var E=a.GetCatalog(),C=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(i,"AcroForm");if(E.HasKey(C)){var w=E.GetElement(C).GetDirectObject();if(w.GetType()==i.PDFObjectType.e_Dictionary){var k=w.GetDict(),T=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(i,"FoxitSign");if(!k.HasKey(T)){var F=new i.PDFDictionary.Create,G=n.FoxitSignEndpoint,R=n.FoxitSignVersion;a.AddIndirectObject(F),k.SetAtReference(T,F,a),F.SetAtString((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(i,"FoxitSignEndpoint"),(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(i,G)),F.SetAtInteger((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(i,"FoxitSignVersion"),R)}}}var x=n.email,O=n.phone,M=n.reason,N=n.distinguishName,B=n.location,L=(n.text,n.filter),j=n.subfilter;(x||O)&&t.SetKeyValue(o.e_KeyNameSigner,new i.WString(x||O)),M&&t.SetKeyValue(o.e_KeyNameReason,new i.WString(M)),N&&t.SetKeyValue(o.e_KeyNameDN,new i.WString(N)),t.SetKeyValue(o.e_KeyNameLocation,new i.WString(B||""));var U=new Date,W=new i.DateTime(U.getFullYear(),U.getMonth()+1,U.getDate(),U.getHours(),U.getMinutes(),U.getSeconds(),U.getMilliseconds(),-U.getTimezoneOffset()/60,0);t.SetSignTime(W),t.SetFilter(new i.String(L)),t.SetSubFilter(new i.String(j));var H=(0,_signature_callback_ts__WEBPACK_IMPORTED_MODULE_14__.cP)(this.engine,t,0,L,j);return(0,_signature_callback_ts__WEBPACK_IMPORTED_MODULE_14__.Kq)(H)}},{key:"getFontCount",value:function(){return this.doc?this.doc.GetFontCount():null}},{key:"getFont",value:function(e){if(!this.doc)return null;if(e>=this.doc.GetFontCount()||e<0)return null;var t=this.doc.GetFont(e);return{isEmpty:t.IsEmpty(),name:t.GetName().toString(),familyName:t.GetFamilyName().toString(),isBold:t.IsBold(),isItalic:t.IsItalic(),ascent:t.GetAscent(),descent:t.GetDescent()}}},{key:"drawTextString",value:function(e){var t=e.text,n=e.name,r=e.size,i=void 0===r?12:r,a=e.color,o=e.width,s=void 0===o?200:o,c=e.height,u=void 0===c?100:c,l=e.offsetX,d=void 0===l?0:l,h=e.offsetY,f=void 0===h?0:h;if(t){var g=this.doc,p=this.engine,v=s,m=u;t=new p.WString(t);var _=(new _pageEditor_DefaultFont__WEBPACK_IMPORTED_MODULE_28__.Z)._getStandardID(n,p),y=new p.Font(_),S=new p.Bitmap(v,m,p.DIBFormat.e_DIBArgb,0,0);S.FillRect(0,null);var b=new p.Matrix(1,0,0,-1,0,m),I=new p.Renderer(S,!1),A=new p.GraphState;I.DrawTextString(g,t,A,Math.max(d,0),f||i,y,i,b,a||4294901760,0);return function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=t.GetWidth(),a=t.GetHeight(),o=new e.Image;o.AddFrame(t);var s=[],c=e.StreamCallback.implement({Release:function(){c.delete()},Flush:function(){return!0},GetSize:function(){return 0},WriteBlock:function(t,n,r){var i,a=e.HEAPU8.buffer;return i=a.slice?new Uint8Array(a.slice(t,t+r)):new Uint8Array(a,t,r),s.push(i),!0}});o.SaveAs(c,(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.Dp)(e,".png")),r&&(o.delete(),t.delete(),n.delete());var u="image/png";return{type:u,blob:new Blob(s,{type:u}),width:i,height:a}}(p,S,I)}}},{key:"getLastSaveFlags",value:function(){return this.doc.GetLastSaveFlags()}},{key:"addAnnots",value:function(){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n={};(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(e){var t=e.page;(n[t]=n[t]||[]).push(e)});var r=0,i=Promise.resolve(),a=[],o=Object.keys(n),s=25/(o.length+1);return o.forEach(function(o){i=i.then(function(){return e.getPageByIndex(o).then(function(e){var i=n[o],c=o,u=Promise.resolve(),l=[],d=[],h=!1;return t(r+=s),i.forEach(function(t){var n,r=t.groupElements||[];r.length?u=u.then(function(){return e.addAnnotGroup([t].concat((0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_54__._)(r)),0)}).then(function(e){var t;n=e[0],(t=l).push.apply(t,(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_54__._)(e))}):t.type&&t.rect?u=u.then(function(){return e.addAnnot(t)}).then(function(e){var t;n=e[0],(t=l).push.apply(t,(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_54__._)(e))}):h||(u=u.then(function(){return e.getAnnots()}).then(function(e){d=e,h=!0})),u.then(function(){var e=n||l.find(function(e){return e.getName()===t.name})||d.find(function(e){return e.getName()===t.name});if(e){var r,i=t.replies;if(i&&e.addReply)(r=l).push.apply(r,(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_54__._)(i.map(function(t){return e.addReply(t)})));var a=t.states;if(a&&e.addStateFromJSON){var o,s=[_shared_consts__WEBPACK_IMPORTED_MODULE_1__.R3.MARKED,_shared_consts__WEBPACK_IMPORTED_MODULE_1__.R3.UNMARKED];(o=l).push.apply(o,(0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_54__._)(a.map(function(t){var n=(t.state||t).toLowerCase();return s.includes(n)?e.addMarkedState(t):e.addReviewState(t)})))}}})}),u.then(function(){t(r+=s),a.push({page:c,annots:l.map(function(e){return e.getId()})})})})})}),i.then(function(){return a})}},{key:"hasXFALicense",value:function(){return this.mHasXFALicense}},{key:"canGetXFA",value:function(){return this.mInitJse&&this.isDynamicXFA()&&this.hasXFALicense()}},{key:"hasRedactAnnot",value:function(e){var t,n=this.pageIndexMap[e],r=!1;if(n?t=n.page:(t=this.doc.GetPage(e),r=!0),t.IsEmpty())return!1;var i=t.GetAnnotCount();if(0===i)return!1;for(var a=0;a<i;a++){var o=t.GetAnnot(a);if(!o.IsEmpty()&&o.GetType()===this.engine.AnnotType.e_Redact)return r&&t.delete(),!0}return r&&t.delete(),!1}},{key:"isRedactExist",value:function(){for(var e=this.doc.GetPageCount(),t=0;t<e;t++)if(this.hasRedactAnnot(t))return!0;return!1}},{key:"getAllWordCount",value:function(){var e=this.engine.PauseCallback.implement({NeedToPauseNow:function(){return!0}}),t="getWordCount",n=t;postMessage({workflow:t,type:n,msg:{state:"start",progress:0}});for(var r=this.doc.StartCalculatingWordCount(e),i=-1,a=0;100!==i;){if(-1===(i=r.GetRateOfProgress()))return postMessage({workflow:t,type:n,msg:{state:"error",progress:-1}}),a;100===i&&(a=this.doc.GetWordCount()),postMessage({workflow:t,type:n,msg:{state:100!=i?"progress":"end",progress:i}}),r.Continue()}return a}},{key:"has3DAnnots",value:function(){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var e,t,n;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(r){switch(r.label){case 0:return this.engine.Library.HasModuleLicenseRight({value:12})?[4,_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_30__.ZP.loadWasmModule(_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_30__.AB)]:[2,Promise.resolve(_shared_permission_CallNoPermission__WEBPACK_IMPORTED_MODULE_36__.Z)];case 1:if(r.sent(),(e=new this.engine.PDF3DContext(this.doc)).IsEmpty())return[2,!1];for(t=this.doc.GetPageCount(),n=0;n<t;n++)if(e.GetPage3DAnnotArray(n).GetSize()>0)return e.delete(),[2,!0];return e.delete(),[2,!1]}})}).call(this)}},{key:"getPDF3D",value:function(){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var e,t;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(n){switch(n.label){case 0:e=this;try{t=this.engine.Library.HasModuleLicenseRight({value:12})}catch(e){t=!1}return t?[4,_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_30__.ZP.loadWasmModule(_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_30__.AB)]:[2,Promise.reject(_shared_permission_CallNoPermission__WEBPACK_IMPORTED_MODULE_36__.Z)];case 1:return n.sent(),[2,this._pdf3dPromise=this._pdf3dPromise||Promise.resolve().then(__webpack_require__.bind(__webpack_require__,2702)).then(function(t){return new t.default(e)}).then(function(t){return e.update3DCache=t.update3DCache.bind(t),e.splice3DCache=t.splice3DCache.bind(t),e.destroyAll3DCache=t.destroy.bind(t),e.update3DCacheAfterMovePages=t.update3DCacheAfterMovePages.bind(t),t})]}})}).call(this)}},{key:"getPageRotation",value:function(e){try{if(this.canGetXFA())return 0;var t=this.doc.GetPage(e);if(t.IsEmpty())return 0;var n=t.GetRotation();return t.delete(),n.value}catch(e){return 0}}},{key:"getPageSize",value:function(e){var t=this;if(this.canGetXFA())return this.thumbQueue.exec(function(n){return t.getXFAPageSize(e)});var n={},r=this.engine,i=this.doc,a=r.ErrorCode.e_ErrDataNotReady;function o(e){var t,s=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)();try{t=i.GetPageBasicInfo(e)}catch(n){var c=r.getErrorCode(n);if(c===r.ErrorCode.e_ErrUnknown)t={width:_virtual_VirtualJRPDFPage_ts__WEBPACK_IMPORTED_MODULE_23__.tJ,height:_virtual_VirtualJRPDFPage_ts__WEBPACK_IMPORTED_MODULE_23__.$h,rotation:{value:0}};else{if(c===a)return setTimeout(function(){o(e).then(s.resolve,s.reject)},30),s.promise;var u;try{if((u=i.GetPage(e)).IsEmpty())return u.delete(),s.reject(c.value),s.promise;t={width:u.GetWidth(),height:u.GetHeight(),rotation:{value:u.GetRotation&&u.GetRotation().value||0}},u.delete()}catch(e){return s.reject(c.value),u&&u.delete(),s.promise}}}return n={width:t.width,height:t.height,rotation:t.rotation.value},s.resolve(),s.promise}return this.thumbQueue.exec(function(t){return o(e).then(function(e){return n})})}},{key:"getXfaWidgetData",value:function(e){if(this.mHasXFALicense&&this.mIsXFA&&this.xfaDoc){var t=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.Eo)(this.engine,e),n=this.xfaDoc.GetWidgetByFullName(t);if(!n.IsEmpty())return{type:n.GetType().value}}}},{key:"getXFAPageSize",value:function(e){var t=this.engine,n=this.xfaDoc,r=t.ErrorCode.e_ErrDataNotReady,i={};return function e(a){var o,s,c=(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.dD)();try{(s=n.GetPage(a)).IsEmpty()||(o={width:s.GetWidth(),height:s.GetHeight(),rotation:{value:0}},s.delete())}catch(n){var u=t.getErrorCode(n);if(u!==t.ErrorCode.e_ErrUnknown)return u!==r?(c.reject(u.value),s&&s.delete(),c.promise):(setTimeout(function(){e(a).then(c.resolve,c.reject)},30),c.promise);o={width:_virtual_VirtualJRPDFPage_ts__WEBPACK_IMPORTED_MODULE_23__.tJ,height:_virtual_VirtualJRPDFPage_ts__WEBPACK_IMPORTED_MODULE_23__.$h,rotation:{value:0}}}return i={width:o.width,height:o.height,rotation:o.rotation.value},c.resolve(),c.promise}(e).then(function(e){return i})}},{key:"getThumbTemp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return this.doPageFun(e,function(e){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(r){return[2,e.getThumb(t,n)]})})()})}},{key:"calcPageContentBBoxTemp",value:function(e,t){return this.doPageFun(e,function(e){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(n){return[2,e.calcContentBBox(t)]})})()})}},{key:"getPageMediaBoxSize",value:function(e){return this.doPageFun(e,function(e){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(t){return[2,e.getMediaBoxSize()]})})()})}},{key:"getBitmapByPageIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:["page"],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"view",o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{hotAnnot:0,hideAnnots:[],dpr:1};return this.doPageFun(e,function(e){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var u;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(l){switch(l.label){case 0:return e&&e.isVirtual?[2,null]:[4,e.getBitmap(t,n,r,i,a,""===o,s,c)];case 1:return(u=l.sent()).bitmap.delete(),u.renderer.delete(),u.progressive.delete&&u.progressive.delete(),[2,u.image]}})})()})}},{key:"doPageFun",value:function(e,t){var n=this;return this.thumbQueue.exec(function(r){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var n,r,i;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),n=this.pageIndexMap[e],r=!1,n||(n=new _PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z(e,this),r=!0),[4,t(n)];case 1:return i=a.sent(),n.needReParse&&n.clearCacheObejcts(),r?[4,n.destroy()]:[3,3];case 2:a.sent(),a.label=3;case 3:return[2,i];case 4:return a.sent(),[2,{}];case 5:return[2]}})}).call(n)})}},{key:"findNextPageText",value:function(e){return this.canGetXFA()?{hasMore:!1,list:[]}:_search_DocTextSearch__WEBPACK_IMPORTED_MODULE_64__.Z.findNextPageText(this,e)}},{key:"createMessageChannel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new _shared_message_channel_MessageChannel__WEBPACK_IMPORTED_MODULE_35__.b(globalThis,e+this.getId(),t);return n.ownsTo(this),n}},{key:"obtainRemoteAPI",value:function(e){return this.createMessageChannel(e).remoteImplementation}},{key:"defineRemoteAPI",value:function(e,t){var n=this.createMessageChannel(e,t);return function(){return n.destroy()}}},{key:"executeAction",value:function(e,t){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var n,r,i,a,o,s;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(c){return n=this,r={value:t},(i=(0,_foxitsoftware_web_action__WEBPACK_IMPORTED_MODULE_37__.o7)({doc:this.doc,gsdk:this.engine,query:e,trigger:t,useDict:!1,createIfNotExists:!1}))?(a=i.GetAction(r)).IsEmpty()?[2]:((0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.xF)(a),i.DoJSAction(r),o=(0,_foxitsoftware_web_action__WEBPACK_IMPORTED_MODULE_37__.Bh)(this.engine,this.doc,a),s=o.filter(function(e){return e.type!==_foxitsoftware_web_action__WEBPACK_IMPORTED_MODULE_37__.Us.javaScript}),[2,this.actionExecutor.execute({trigger:options.trigger,query:options.owner,actions:s,executeJavaScript:function(e){e.javascript&&n.doc.ExecuteDocJavaScript(r,(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.Eo)(n.engine,""),(0,_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.Eo)(n.engine,e.javascript))}})]):[2]})}).call(this)}},{key:"queryObject",value:function(e){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var t,n,r,i,a,o,s,c,u;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(l){switch(l.label){case 0:switch(e.type){case"doc":return[3,1];case"annot":return[3,2];case"field":return[3,3];case"page":return[3,4];case"bookmark":return[3,5]}return[3,7];case 1:return[2,this.doc];case 2:return"annot"in e?[2,e.annot]:(n=e.annotId,r=n.pageIndex,i=n.objNumber,(null===(t=this.pageCache[r])||void 0===t?void 0:t.page)?(a=this.pageCache[r]).isVirtual()?[2]:[2,a.getAnnotById(i)]:[2,(0,_foxitsoftware_web_annot__WEBPACK_IMPORTED_MODULE_41__.Xc)(this.doc,e.annotId)]);case 3:return"fieldName"in e||"widgetId"in e?(o=e.fieldName||e.widgetId)?[2,this.formModule.getField(o)]:[2]:[2,e.field];case 4:return[2,(null===(s=this.pageCache[e.pageIndex])||void 0===s?void 0:s.page)||this.doc.GetPage(e.pageIndex)];case 5:return[4,this.getRootBookmark()];case 6:return c=l.sent(),[2,null==(u=c.getBookmarkById(e.objNumber))?void 0:u.c_bookmark];case 7:return[2]}})}).call(this)}},{key:"exportXFAForm",value:function(e){var t=this.engine,n=this.xfaDoc,r=0,i=[],a=t.WriterCallback.implement({Release:noop,Flush:function(){return!0},GetSize:function(){return r},WriteBlock:function(e,n,a){r+=a;var o,s=t.HEAPU8.buffer;return o=s.slice?s.slice(e,e+a):new Uint8Array(s,e,a).buffer,i.push(new Uint8Array(o)),!0}});n.ExportData(a,{value:"xdp"==e?1:0});var o=new Blob(i,{type:"application/octet-stream"});return{blob:o,transfers:[o]}}},{key:"importXFAForm",value:function(e,t){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var n,r,i,a;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(o){switch(o.label){case 0:return[4,e.arrayBuffer()];case 1:return n=o.sent(),i=(r=this).engine,r.xfaDoc,a=i.ReaderCallback.implement({Release:function(){noop()},GetSize:function(){return e.size},ReadBlock:function(e,t,r){var a=new Uint8Array(n.slice(t,r));return i.HEAPU8.set(a,e),!0}}),[2,this.importFormFromXFAData(a,"xdp"==t)]}})}).call(this)}},{key:"importFormFromXFAData",value:function(e,t){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var n;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(r){return this.xfaDocProvider.SetFocus(null,!0),this.xfaDoc.KillFocus(),n=this.xfaDoc.ImportData(e,t),this.reloadPages(),[2,n]})}).call(this)}},{key:"reloadPages",value:function(){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var e;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(t){switch(t.label){case 0:return e=this,this.pageIndexMap={},[4,Promise.all(Object.keys(this.pageCache).map(function(t){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var e,n,r,i;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(a){switch(a.label){case 0:return e=this.pageCache[t],n=e.index,r=e.id,e.destroy(),delete this.pageIndexPromise[n],[4,this.getPageByIndex(n,r)];case 1:return[4,(i=a.sent()).c_pagePromise];case 2:return a.sent(),i.page&&i.reloadAnnots(),[2]}})}).call(e)}))];case 1:return t.sent(),[2]}})}).call(this)}},{key:"resetXFAForm",value:function(){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(e){return this.xfaDoc.ResetForm(),this.reloadPages(),[2]})}).call(this)}},{key:"highlightXFAFields",value:function(e){this.isXFAHighlighted=e}},{key:"createAIDoc",value:function(e,t,n){var r,i=this;if(n)r=Promise.resolve(this.JR.requestData("GET",!1,n));else if(e.length>0){var a=[];r=this.extractPages(e,{writeStream:function(e,t,n){a.push(e)}}).then(function(){return new Blob(a,{type:"application/pdf"}).arrayBuffer()})}else{var o=[];r=new Promise(function(e){i.getStream({writeStream:function(e){o.push(e)}}).then(function(t){e(new Uint8Array(new Uint8Array(o.flatMap(function(e){return Array.from(new Uint8Array(e))})).buffer))})})}return r.then(function(e){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var n,r,i;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(a){switch(a.label){case 0:return[4,(n=new PDFDoc1(this.JR,{buffer:e})).parseByPassword()];case 1:return a.sent(),[4,n.getPageCount()];case 2:r=a.sent(),a.label=3;case 3:if(!(r>0&&t))return[3,5];n.copyPages([[r-1]],r),a.label=4;case 4:return r--,[3,3];case 5:return t&&n.setViewPreference("PageLayout","TwoColumnLeft"),i=[],[2,n.getStream({writeStream:function(e){i.push(e)}},0).then(function(){n.destroy();var e=new Blob(i,{type:"application/pdf"});return{buffer:e,transfers:[e]}})]}})}).call(i)})}},{key:"getLRText",value:function(e){var t=this;if(this.graphicsInfos||(this.graphicsInfos={},this.pageTextBlocks={}),this.pageTextBlocks[e]){var n=this.graphicsInfos[e];return this.getPageByIndex(e).then(function(r){return r.parsedPagePromise.then(function(r){for(var i in n){var a=n[i];a.pObjectsToRemove.forEach(function(e){r.RemoveGraphicsObject(e)}),a.pObjectsToRemove=[]}return Promise.resolve(t.pageTextBlocks[e])})})}var r=this.pageTextBlocks[e]=[];return this.graphicsInfos[e]=[],_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_30__.ZP.loadWasmModule(_web_pdf_jr_WasmModuleMgr__WEBPACK_IMPORTED_MODULE_30__.AI).then(function(){return t.getPageByIndex(e)}).then(function(n){return n.parsedPagePromise.then(function(i){var a=new n.engine.CFX_FloatRect(0,0,0,0),o=i.ExportDataForChatGPT(!1,n.engine.PauseCallback.implement({NeedToPauseNow:function(){return!1}}),a,!1),s=function(n){for(var a=n.graphicsobject_array,o=n.content,s=0;s<a.GetSize();s++){var c=a.GetAt(s);if(!(c.Handle?s&&c.Handle()==a.GetAt(s-1).Handle():s&&c.$$.ptr==a.GetAt(s-1).$$.ptr))if(c.GetType().value==t.engine.GraphicsObjectType.e_TypeText.value){var u=c.GetTextObject(),l=u.GetTextState(i);if(l.textmode==t.engine.Mode.e_ModeInvisible)continue;for(var d=u.GetRect(),h=t.graphicsInfos[e],f=u.GetColorState().GetFillColor().ConvertToRGB({value:0}).GetValue(),g=[],p=0;p<f.GetSize();p++)g.push(255*f.GetAt(p)|0);f=3==g.length?g[0]<<16|g[1]<<8|g[2]:g[1]<<16|g[2]<<8|g[3];var v=l.font,m=Math.max(l.font_horizontal_size,l.font_vertical_size,l.font_size),_=u.GetMatrix(),y=[[_.a,_.b],[_.c,_.d]],S=Math.atan2(y[1][0],y[0][0]);S=180*S/Math.PI;var b=h[h.length-1],I=b||{},A=I.font,P=I.fontSize,D=I.color,E=I.pObjectsToRemove,C=I.rect,w=I.rotate;if(s){var k=A&&A.IsBold()==v.IsBold()&&D==f&&P==m&&w==S;if(k||s>1||!__webpack_require__.g.seperateProperties){E.push(u),b.rect={left:Math.min(C.left,d.left),bottom:Math.min(C.bottom,d.bottom),right:Math.max(C.right,d.right),top:Math.max(C.top,d.top)},S==w&&S&&w||(b.rotate=0),A.IsBold()!=v.IsBold()&&(b.isBold=!1),A.IsItalic()!=v.IsItalic()&&(b.isItalic=!1),b.autoReturn=!0;continue}k||(b.skipOverlapChecking=!0,b.autoReturn=!1)}else r.push(o.toString()),h.push({rect:{left:d.left,right:d.right,top:d.top,bottom:d.bottom},font:v,pObjectsToRemove:[u],color:f,fontSize:m,rotate:S,autoReturn:!1,isBold:v.IsBold(),isItalic:v.IsItalic()})}}},c=function(e){for(var t=0;t<e.GetSize();t++){var n=e.GetAt(t);s(n)}},u=function(e){for(var t=0;t<e.GetSize();t++){var n=e.GetAt(t);c(n.text_array),u(n.sublist.item_array)}},l=function(e){for(var t=0;t<e.GetSize();t++){var n=e.GetAt(t);c(n.cell_array)}},d=function(e){for(var t=0;t<e.GetSize();t++){var n=e.GetAt(t);switch({}.type=n.type.value){case 14:d(n.stSectionElement.element_array);break;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:c(n.stTextElement.text_array);break;case 13:c(n.stFigureElement.text_array);break;case 11:u(n.stListElement.item_array);break;case 12:l(n.stTableElement.row_array)}}};return d(o),r})})}},{key:"translateText",value:function(e,t){var n=this,r=this.engine;this.lrTextObjectsRemoved||(this.lrTextObjectsRemoved={});var i=function(e,t){var n=Math.max(e.left,t.left),r=Math.max(e.bottom,t.bottom),i=Math.min(e.right,t.right),a=Math.min(e.top,t.top);return n<i&&a>r};return this.getPageByIndex(e).then(function(a){return Promise.all([a.calcContentBBox(0),a.parsedPagePromise]).then(function(a){var o=(0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_52__._)(a,2),s=o[0],c=o[1],u=n.graphicsInfos[e];if(n.lrTextObjectsRemoved[e]&&n.pageTextBlocks[e]){for(var l=[],d=c.GetGraphicsObjectCount(),h=0;h<d;h++){var f=c.GetGraphicsObjectBI(h);1===f.GetType().value&&l.push(f)}l.forEach(function(e){return c.RemoveGraphicsObject(e)})}for(var g in u){var p=u[g];p.pObjectsToRemove.forEach(function(e){c.RemoveGraphicsObject(e)}),p.pObjectsToRemove=[],n.lrTextObjectsRemoved[e]=1;var v=new r.RichTextStyle;if(p.font){p.font;v.font=p.font,v.is_bold=p.isBold,v.is_italic=p.isItalic}if(v.text_color=p.color||0,v.mark_style=r.TextScriptType.e_Normal,v.text_size=p.fontSize,g==t.length)return!1;var m=t[g],_=new r.WString(m||" "),y=p.rect,S=y.left,b=y.right,I=y.top,A=y.bottom,P=new r.CFX_FloatRect(S,A,b,I),D=c.AddText(_,P,v,(360-p.rotate)%360,p.autoReturn),E=D.rect,C=!1;if((E.left-s.left<-15||E.right-s.right>15||E.top-s.top>15||E.bottom-s.bottom<-15)&&(C=!0),!C&&!p.skipOverlapChecking)for(var w in u)if(w!=g){var k=u[w];if(i(k.rect,E)){C=!0;break}}if(C){for(var T=D.graphicsobject_array,F=0;F<T.GetSize();F++){var G=T.GetAt(F);c.RemoveGraphicsObject(G)}v.text_size=0,c.AddText(_,P,v,(360-p.rotate)%360,!0)}}return c.GenerateContent(),!0})})}},{key:"exportAITranslation",value:function(){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var e,t,n,r,i,a,o;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(s){switch(s.label){case 0:return e=[],[4,this.getStream({writeStream:function(t){e.push(t)}},0)];case 1:return s.sent(),[2,{buffer:t=new Blob(e,{type:"application/pdf"}),transfers:[t]}];case 2:for(n=s.sent(),r=[],i=1;i<=n;i+=2)r.push([i]);return a=[],this.extractPages(r,{writeStream:function(e,t,n){a.push(e)}}),[2,{buffer:o=new Blob(a,{type:"application/pdf"}),transfers:[o]}]}})}).call(this)}},{key:"saveAIBookmark",value:function(e,t){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var n,r;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(i){switch(i.label){case 0:return n=this.rootBookmark,"override"!=t?[3,2]:(this.rootBookmark=null,this.doc.CreateRootBookmark(),[4,this.getRootBookmark()]);case 1:n=i.sent(),i.label=2;case 2:return r=function(e){var t=e.content,n=e.rect,i=e.color,a=void 0===i?0:i,o=e.style,s=void 0===o?0:o,c=e.page_index,u=e.children;return{title:t,destination:{left:n[2],top:n[0],zoomMode:"ZoomXYZ",pageIndex:c},color:a,style:s,relationship:3,children:u.map(r)}},e.map(function(e){n.appendBookmarkTree(r(e))}),[2]}})}).call(this)}},{key:"updateEncryptedEngineDocForMIP",value:function(e){if((0,_swc_helpers_instanceof__WEBPACK_IMPORTED_MODULE_61__._)(e,Array)){var t=this.engine,n=function(e){var t=e.reduce(function(e,t){return e+t.byteLength},0),n=new Uint8Array(t),r=0,i=!0,a=!1,o=void 0;try{for(var s,c=e[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value;n.set(new Uint8Array(u),r),r+=u.byteLength}}catch(e){a=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}return n.buffer}(e),r=t.ReaderCallback.implement({Release:function(){noop()},GetSize:function(){return n.byteLength},ReadBlock:function(e,r,i){var a=new Uint8Array(n.slice(r,r+i));return t.HEAPU8.set(a,e),!0}});(encryptedEngineDocForMIP=t.createPDFDocWithReaderCallback(r,!1)).Load(new t.String(""))}else!0!==e?(encryptedEngineDocForMIP=null,engineDocForMIP=null):encryptedEngineDocForMIP=this.doc}},{key:"GetUnprotectedPDFDoc",value:function(e,t,n){var r=this.engine,i=getMIPInstance(r),a=r.ReaderCallback.implement({Release:function(){noop()},GetSize:function(){return e.byteLength},ReadBlock:function(t,n,i){var a=new Uint8Array(e.slice(n,n+i));return r.HEAPU8.set(a,t),!0}});return engineDocForMIP=i.GetUnprotectedPDFDoc(this.doc,a,Number(t),Boolean(n)),this.fileName}},{key:"StartSaveRawDataTobeEncrypted",value:function(e){var t,n,r=[],i=this.engine,a=getMIPInstance(i),o=(t=r,n=0,i.WriterCallback.implement({Release:function(){},Flush:function(){return!0},GetSize:function(){return n},WriteBlock:function(e,r,a){n+=a;var o,s=i.HEAPU8.buffer;return o=s.slice?s.slice(e,e+a):new Uint8Array(s,e,a).buffer,t.push(o),!0}}));return a.StartSaveRawDataTobeEncrypted(this.doc,e,o),r}},{key:"StartSaveasFromMIPEncryptedPDF",value:function(e,t){var n,r,i=[],a=this.engine,o=getMIPInstance(a),s=a.ReaderCallback.implement({Release:function(){noop()},GetSize:function(){return e.byteLength},ReadBlock:function(t,n,r){var i=new Uint8Array(e.slice(n,n+r));return a.HEAPU8.set(i,t),!0}}),c=(n=i,r=0,a.WriterCallback.implement({Release:function(){},Flush:function(){return!0},GetSize:function(){return r},WriteBlock:function(e,t,i){r+=i;var o,s=a.HEAPU8.buffer;return o=s.slice?s.slice(e,e+i):new Uint8Array(s,e,i).buffer,n.push(o),!0}}));return o.StartSaveasFromMIPEncryptedPDF(encryptedEngineDocForMIP,engineDocForMIP||this.doc,s,c,new a.WString(t)),i}},{key:"StartSaveasFromMIPLabel",value:function(e,t,n,r,i,a){var o,s=this.engine,c=new s.MIPMetadataArray,u=new s.MIPMetadata,l=getMIPInstance(s),d=!0,h=!1,f=void 0;try{for(var g,p=n[Symbol.iterator]();!(d=(g=p.next()).done);d=!0){var v=g.value;Object.entries(v).forEach(function(e){var t=(0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_52__._)(e,2),n=t[0],r=t[1];o=new s.WString(n),u.key=o,o=new s.WString(r),u.value=o,c.Add(u)})}}catch(e){h=!0,f=e}finally{try{d||null==p.return||p.return()}finally{if(h)throw f}}var m=s.ReaderCallback.implement({Release:function(){noop()},GetSize:function(){return t.byteLength},ReadBlock:function(e,n,r){var i=new Uint8Array(t.slice(n,n+r));return s.HEAPU8.set(i,e),!0}}),_=s.ReaderCallback.implement({Release:function(){noop()},GetSize:function(){return e.byteLength},ReadBlock:function(t,n,r){var i=new Uint8Array(e.slice(n,n+r));return s.HEAPU8.set(i,t),!0}}),y=0,S=[],b=s.WriterCallback.implement({Release:function(){},Flush:function(){return!0},GetSize:function(){return y},WriteBlock:function(e,t,n){y+=n;var r,i=s.HEAPU8.buffer;return r=i.slice?i.slice(e,e+n):new Uint8Array(i,e,n).buffer,S.push(r),!0}});try{l.StartSaveasFromMIPLabel(this.doc,m,c,r,i,_,b,new s.WString(a)),this.updateEncryptedEngineDocForMIP(S)}catch(e){console.error(e)}}},{key:"getAppliedMIPLabelID",value:function(){for(var e="",t=new this.engine.Metadata(this.doc).GetCustomerKeys(),n=0;n<t.GetSize();n++){var r=t.GetAt(n);if(r&&r.toString){var i=(r=r.toString()).toUpperCase();if(i.includes(MIP_LABEL_ID_METADATA_BEGIN_FLAG)&&i.includes(MIP_LABEL_ID_METADATA_END_FLAG)){var a=r.length,o=MIP_LABEL_ID_METADATA_BEGIN_FLAG.length,s=MIP_LABEL_ID_METADATA_END_FLAG.length;e=r.substring(o,a-s);break}}}return e}},{key:"removeAppliedMIPLabel",value:function(){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var e,t,n,r,i,a,o,s;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(c){if(!this.getAppliedMIPLabelID())return[2,!1];for(e=this.engine,t=new e.Metadata(this.doc),n=t.GetCustomerKeys(),r=0,i=0;i<n.GetSize();i++)(a=n.GetAt(i))&&a.toString&&((o=a.toString().toUpperCase()).includes(MIP_ENCRYPT_OBJ_NUM_KEY)&&(s=t.GetValues(a)).length>0&&(r=parseInt(s[0],10)),o.includes(MIP_LABEL_ID_METADATA_BEGIN_FLAG)&&t.RemoveCustomerKey(a));return r>0&&this.doc.DeleteIndirectObject(r),[2,!0]})}).call(this)}},{key:"checkIsMIPProtected",value:function(){return""!==this.doc.GetPayLoadData().file_name.toString()&&this.checkMIPLabelIsApplied()}},{key:"checkMIPLabelIsApplied",value:function(){return""!==this.getAppliedMIPLabelID()}},{key:"exportConteInRect",value:function(e){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var t,n;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(r){return t=this,n="",[2,Promise.all(e.map(function(e){var r=(0,_swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_52__._)(e,2),i=r[0],a=r[1];return t.getPageByIndex(i).then(function(e){return n||(n=e.page.GetJsonVerForChatGPT().toString()),(0,_pdf_doc_lr_chatWithDoc__WEBPACK_IMPORTED_MODULE_33__.i8)(e,a,!0)})})).then(function(e){return{gsdkVersion:t.engine.Library.GetVersion().toString(),jsonVersion:n,meta:t.getMetadata(),pages:e}})]})}).call(this)}},{key:"enumAttachmentAnnot",value:function(){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var e,t,n;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(r){switch(r.label){case 0:return[4,this.getPageCount()];case 1:e=r.sent(),t=[],n=0,r.label=2;case 2:return n<e?[4,this.getPageByIndex(n)]:[3,7];case 3:return[4,r.sent().getAnnots()];case 4:return[4,r.sent().filter(function(e){return"fileattachment"==e.getType()})];case 5:r.sent().map(function(e){var n=e.getFileSpec(),r=new _base_FileSpec__WEBPACK_IMPORTED_MODULE_16__.Z(n,e);return t.push({description:r.getDescription(),dict:{},fileName:r.getFileName(),fileSize:r.getFileSize(),isEmbedded:r.isEmbedded(),modifiedDateTime:r.getModifiedDateTime(),objNum:r.getDict().GetObjNum(),subtype:r.getSubtype()})}),r.label=6;case 6:return n++,[3,2];case 7:return[2,t]}})}).call(this)}},{key:"loadInsertPage",value:function(e){var t=this.doc.GetPage(e),n=e,r=new _PDFPage_js__WEBPACK_IMPORTED_MODULE_2__.Z(n,this);r.page=t;var i=this.doc.GetPageCount()-1;return this.updatePageIndex(n+1,i,!0,!1),this.updatePageIndexMap(n,r),this.updatePageCache(r),r.toJson()}},{key:"executeSignatureJavaScript",value:function(e,t){var n=this.doc.GetPage(e);if(t>=n.GetAnnotCount())return!1;var r=n.GetAnnot(t);if(r.IsEmpty())return!1;if(r.GetType()!==this.engine.AnnotType.e_Widget)return!1;var i=new this.engine.Widget(r);i.GetAction;var a=i.GetField();return!a.IsEmpty()&&new this.engine.AdditionalAction(a).DoJSAction(this.engine.TriggerEvent.e_TriggerFieldWillFormat)}},{key:"DoAction_NoJs",value:function(e){var t=(0,_foxitsoftware_web_action__WEBPACK_IMPORTED_MODULE_37__.Bh)(this.engine,this.doc,e,!1);return this.actionExecutor.execute({actions:t,executeJavaScript:function(){}})}},{key:"getSignaturesInfo",value:function(){var e={unsignCount:0,firstUnsignedName:"",signedNames:[]};if(!this.doc.HasForm())return e;var t=this.doc.GetSignatureCount();if(0===t)return e;for(var n=0,r="",i=[],a=0;a<t;a++){var o=this.doc.GetSignature(a);o.IsSigned()?i.push(o.GetName().toString()):(0===n&&(r=o.GetName().toString()),n++)}return{unsignCount:n,firstUnsignedName:r,signedNames:i}}},{key:"getDocUndoData",value:function(e){return this.docUndoData?this.docUndoData[e]:null}},{key:"createDocUndoData",value:function(e){return this.docUndoData||(this.docUndoData={}),this.docUndoData[e]={bEdit:!1},this.docUndoData[e]}},{key:"getDocUndo",value:function(e){var t=this.getDocUndoData(e);return t?t.bEdit?t.editUndo:t.normalUndo:null}}]),PDFDoc1}(_foxitsoftware_web_common__WEBPACK_IMPORTED_MODULE_0__.JT);function getRange(e,t){return(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_50__._)(function(){var n,r,i;return(0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_51__.Jh)(this,function(a){switch(a.label){case 0:return e||(e={}),[4,t.getPageCount()];case 1:return n=a.sent(),r=getByDefault(e.from,0),i=getByDefault(e.end,n-1),[2,{from:r,end:i}]}})})()}function initComparisonOptions(e,t){var n=new t.ComparisonOptions;if(!e)return n;var r=e.textOnly,i=e.compareTable,a=e.detectPage,o=e.lineThickness,s=e.markingColor,c=e.opacity;if(n.bIsText=getByDefault(r,!1),n.bIsCompareTable=getByDefault(i,!1),n.bDetectPage=getByDefault(a,!1),o){var u=o.delete,l=o.insert,d=o.replace,h=function(e){return e>0&&isFinite(e)};h(u)&&(n.nDeleteThickness=getByDefault(u,2)),h(l)&&(n.nInsertThickness=getByDefault(l,2)),h(d)&&(n.nReplaceThickness=getByDefault(d,2))}if(s){var f=s.delete,g=s.insert,p=s.replace,v=function(e){return e>=0&&e<=16777215};v(f)&&(n.deleteColor=f),v(g)&&(n.insertColor=g),v(p)&&(n.replaceColor=p)}if(c){var m=function(e){return e>=0&&e<=100},_=c.delete,y=c.insert,S=c.replace;m(_)&&(n.nDeleteOpacity=Math.round(_)),m(y)&&(n.nInsertOpacity=Math.round(y)),m(_)&&(n.nReplaceOpacity=Math.round(S))}return n}function getByDefault(e,t){return null==e?t:e}function getDictName(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Default";if(!n)return i;var a=n.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(t,r));return a?1===a.GetType().value?a.GetBoolean():e.getPDFString(a.GetString()):i}function getAnnotsArray(e,t){var n=t.GetDict(),r=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(e,"Annots"),i=n.GetElement(r);return i||(i=e.PDFArray.Create(),n.SetAt(r,i)),i.GetDirectObject().GetArray()}function getTemplateObject(e,t,n){var r=(0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(t.engine,"Names"),i=e.GetElement(r),a=null;if(i)for(var o=i.GetArray(),s=o.GetElementCount(),c=0;c<s;c+=2){var u=o.GetElement(c).GetString();if(n===t.JR.getPDFString(u)&&c+1<s){a=o.GetElement(c+1);break}}return a}function getMetadataValues(e,t){for(var n=e.GetValues(t),r="",i=0,a=n.GetSize();i<a;i++)r=n.GetAt(i).toString();return r}function getMetadataValue(e,t){if(e.GetValue)return e.GetValue(t).toString()}function formateDictToJson(e){var t={};if(e)for(var n=0;n=e.MoveNext(n);){var r=e.GetKey(n).toString(),i=formatDictObjToJson(e.GetValue(n));t[r]=i}return t}function formatDictObjToJson(e){var t;switch(e.GetType().value){case 1:t=e.GetBoolean();break;case 2:t=e.GetFloat();break;case 3:t=e.GetString().toString();break;case 4:t=e.GetName().toString();break;case 5:for(var n=e.GetArray(),r=[],i=n.GetElementCount();i--;)r[i]=formatDictObjToJson(n.GetElement(i));t=r;break;case 6:t=formateDictToJson(e.GetDict());break;case 8:t=null;break;default:t=e.toString()}return t}function retriveDict(e,t,n,r){var i,a="",o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];switch(r.GetType().value){case 1:return r.GetString().toString();case 2:var s=r.GetString().toString();return Math.abs(parseInt(s)-parseFloat(s))<.001?parseInt(s):parseFloat(s);case 3:var c=r.GetString(),u=c.GetBuffer();a="<";for(var l=0;l<c.GetLength();l++){var d=e.HEAPU8[u+l];a+=o[(240&d)>>4],a+=o[15&d]}return a+=">";case 4:return"/"+r.GetName().toString();case 5:a=[];for(var h=r.GetArray(),f=h.GetElementCount(),g=0;g<f;g++)a.push(retriveDict(e,t,n,h.GetElement(g)));return a;case 7:a={};var p=r.GetStream();i=p.GetDictionary();var v=p.GetDataSize(!0);if(v){var m=e._malloc(v);r.GetStream().GetData(!0,v,m);for(var _="",y=m;y<m+v;y++){var S=e.HEAP8[y];_+=o[(240&S)>>4],_+=o[15&S]}e._free(m),a.stream=_}case 6:a=a||{},i||(i=r.GetDict()),i||(i=r);var b=i.GetElement((0,_share_constants_string_js__WEBPACK_IMPORTED_MODULE_12__.n5)(e,"Type"));if(b&&"OCG"==b.GetString().toString())return{};for(var I=i.MoveNext(0);I;){var A=i.GetKey(I),P=i.GetElement(A);a[A.toString()]=retriveDict(e,t,A.toString(),P),I=i.MoveNext(I),A.delete()}return a;case 8:return null;case 9:var D=r.GetDirectObject().GetObjNum();return a=D+"R",t[D]=retriveDict(e,t,n,r.GetDirectObject()),a}return a}function getPDFNameTree(e,t,n){for(var r={},i=new t.PDFNameTree(n,e),a=0,o=i.GetCount();a<o;a++){var s=i.GetName(a);if(s.GetLength()){var c=i.GetObj(s);if(c){var u=s.toString();if(e.value===t.PDFNameTreeType.e_JavaScript.value){var l=new t.Action(n,c.GetDict());if(l.IsEmpty())continue;var d=new t.JavaScriptAction(l),h=d.GetScript();r[u]=h.toString(),l=null,d=null,h=null}else if(4===e.value||5===e.value){var f=c.GetDict().GetObjNum();r[u]=f,f=null}s.delete(),s=null}}}return r}function pageRangeTwoDimensionToOne(e){return e.reduce(function(e,t){if(2===t.length){for(var n=[],r=t[0];r<t[1];r++)n.push(r);t=n}return e.concat(t)},[])}function pageIndexesToPages(e,t){var n=[];return t.forEach(function(t){n.push(e.getPageByIndex(t))}),Promise.all(n)}function syncPromisesTask(e){var t=[];return e.reduce(function(n,r,i){return n.then(function(n){return r.then(function(n){return t[i]=n,i==e.length-1?t:r})})},Promise.resolve())}function getDB(){if(getDB._db)return getDB._db;var e="CopyPages_cache",t=new _shared_IndexDBCache_js__WEBPACK_IMPORTED_MODULE_21__.Z(e,"FoxitPDFSDKForWeb_"+e);return t.clear(),getDB._db=t,t}function formatMetadataDate(e,t){return e?-1!=e.indexOf("D:")?e:(0,_shared_formatDate_js__WEBPACK_IMPORTED_MODULE_27__.K)(e):e}__webpack_require__.g.seperateProperties=0;const __WEBPACK_DEFAULT_EXPORT__=PDFDoc},6928:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(5843);const i={addFont:function(e,t){var n;if((0,r._)(e,Uint8Array))n=e.buffer;else{if(e.GetLength()<1)return;var i=e.GetBuffer(),a=e.GetLength(),o=i+a;n=t.HEAPU8.buffer.slice?t.HEAPU8.buffer.slice(i,o):new Uint8Array(t.HEAPU8.buffer,i,a).buffer}return{buffer:n}},revokeAllURL:function(){},getWoffDataBuffer:function(e,t){if(!(e.GetLength()<1)){var n=e.GetBuffer(),r=e.GetLength(),i=n+r;return{buffer:t.HEAPU8.buffer.slice?t.HEAPU8.buffer.slice(n,i):new Uint8Array(t.HEAPU8.buffer,n,r).buffer}}}}},9482:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r,i,a=n(9227),o=n(7424),s=n(5843),c=n(3850),u=function(){function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"e_UsageView";if((0,a._)(this,e),this.c_doc=t,this.c_engine=r=n,this.layer_tree=i=new n.LayerTree(t),this.layer_context=new n.LayerContext(t,n.UsageType[o]),!this.layer_tree.IsEmpty()){var s=this.layer_tree.GetRootNode();this.rootLayerNode=new d(t,"00",s,this.layer_context,-1,!0)}}return(0,o._)(e,[{key:"setLayerNodeVisiable",value:function(e,t){var n=this.getLayerNodeById(e),r=this.layer_context.SetVisible(n.layer_node,t);return r&&(n.visible=t),r}},{key:"getLayerNodeByIdBAK",value:function(e){var t=(e=e.toString()).split("-");try{for(var n=this.rootLayerNode,r=0;r<t.length;r++)n=n.children[t[r]];return n}catch(e){return null}}},{key:"getLayerNodeById",value:function(e,t){var n;if(t||(t=this.rootLayerNode),t.id===e+"")n=t;else if(t.children&&t.children.length>0)for(var r=0;r<t.children.length;r++){var i=t.children[r];if(n=this.getLayerNodeById(e,i))break}return n}},{key:"toJson",value:function(){return this.layer_tree.IsEmpty()?[]:this.rootLayerNode.toJson()}},{key:"delete",value:function(){this.layer_tree.delete(),this.layer_context.delete(),this.rootLayerNode&&this.rootLayerNode.delete()}},{key:"removeLayerNode",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.getLayerNodeById(e);if(!r)return!1;var i=r.parent;if(!i)return!1;var a=i.removeChild(e),o=Promise.resolve(a);return a&&r.hasLayer&&(o=this.getPagesByLayer(r,t).then(function(e){return e.forEach(function(e){var t=e.page;r.removeGraphics(t,n)}),a})),o}},{key:"addChild",value:function(e,t){return this.getLayerNodeById(e).addChild(t)}},{key:"addGraphicObject",value:function(e,t,n){return this.getLayerNodeById(e).addGraphicObject(t,n)}},{key:"removeGraphicObject",value:function(e,t,n){return this.getLayerNodeById(e).removeGraphicsObject(t,n)}},{key:"getLayersByPage",value:function(e){var t=[],n=function(r){if(r.hasLayer&&r.isInPage(e.page)&&t.push(r),r.children&&r.children.length>0)for(var i=0;i<r.children.length;i++){var a=r.children[i];n(a)}};return n(this.rootLayerNode),t}},{key:"setLayerName",value:function(e,t){return this.getLayerNodeById(e).setName(t)}},{key:"setLayerDefaultState",value:function(e,t){var n=this.getLayerNodeById(e),r=this.layer_tree.setLayerDefaultState(n.layer_node,this.c_doc,+t);return r&&(n.state=t),r}},{key:"setLayerLocked",value:function(e,t){var n=this.getLayerNodeById(e);return this.layer_tree.setLayerLocked(n.layer_node,this.c_doc,t?1:0),n.isLocked=t,!0}},{key:"setLayerIntent",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.getLayerNodeById(e),i=new this.c_engine.StringArray;i.Add(new this.c_engine.String(0==t?"View":"Design"));var a=r.layer_node.SetIntent(i,n);return a&&(r.intent=t),a}},{key:"setLayerViewUsage",value:function(e,t){return this.getLayerNodeById(e).setViewUsage(t)}},{key:"setLayerPrintUsage",value:function(e,t){return this.getLayerNodeById(e).setPrintUsage(t)}},{key:"setLayerExportUsage",value:function(e,t){return this.getLayerNodeById(e).setExportUsage(t)}},{key:"flattenLayers",value:function(e){var t=[],n=function(e){if(e&&e.hasLayer&&!1===e.visible&&t.push(e),e.children&&e.children.length>0)for(var r=0;r<e.children.length;r++)n(e.children[r])};return n(this.rootLayerNode),e.getAllPages().then(function(e){e.forEach(function(e){var n=e.page;t.forEach(function(e){e.getGraphicsObjects(n).forEach(function(e){n.RemoveGraphicsObject(e)}),e.removeGraphics(n)}),n.GenerateContent()})}),this.rootLayerNode.removeAllChild(),e.doc.GetCatalog().RemoveAt(new r.String("OCProperties")),!0}},{key:"mergeLayers",value:function(e,t,n){var r=this,i=this.getLayerNodeById(n),a=t.map(function(e){return r.getLayerNodeById(e)});return e.getAllPages().then(function(t){return t.forEach(function(e){var t=e.page;a.forEach(function(e){var n=e.getGraphicsObjects(t);n&&n.length>0&&n.forEach(function(n){i.addGraphics(t,n),e.layer_node.RemoveGraphicsObject(n)})}),t.GenerateContent()}),a.forEach(function(t){t.getRelatedAnnots().forEach(function(e){return e.SetRelatedLayerNode(i.layer_node)}),r.removeLayerNode(t.id,e,!1)}),!0})}},{key:"getPagesByLayer",value:function(e,t){return t.getAllPages().then(function(t){var n=[];return t.forEach(function(t){var r=t.page;e.isInPage(r)&&n.push(t)}),n})}},{key:"moveTo",value:function(e,t,n){var r=this.getLayerNodeById(e),i=this.getLayerNodeById(t);return r.layer_node.MoveTo(i.layer_node,n)}}]),e}(),l={0:"e_StateON",1:"e_StateOFF",2:"e_StateUnchanged",3:"e_StateUndefined"},d=function(){function e(t,n,r,i,o){var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];(0,a._)(this,e),this.c_doc=t,this.id=n,this.isRoot=s,this.layer_node=r,this.name=r.GetName().toString(),this.hasLayer=r.HasLayer(),this.deep=o,this.layer_context=i,this.visible=i.IsVisible(r),this.isLocked=r.IsLocked(),this.children=this.getChildren()}return(0,o._)(e,[{key:"getChildren",value:function(){for(var t=[],n=this.layer_node.GetChildrenCount(),r=0;r<n;r++)try{var i=this.layer_node.GetChild(r),a=void 0;a=this.isRoot||""===this.id?r+"":this.id+"-"+r;var o=new e(this.c_doc,a,i,this.layer_context,this.deep+1);o.parent=this,t.push(o)}catch(e){console.warn(e)}return t}},{key:"removeChild",value:function(e){for(var t,n,r=!1,i=0;i<this.children.length;i++){var a=this.children[i];if(a.id===e){t=a,n=i;break}}return t&&(r=this.layer_node.RemoveChild(n))&&(this.children=this.getChildren()),r}},{key:"removeAllChild",value:function(){var e=this.layer_node;this.children.forEach(function(t,n){e.RemoveChild(0)}),this.children=[]}},{key:"addChild",value:function(e){var t=e.index,n=e.name,i=e.hasLayer;return void 0===t&&(t=this.children.length),this.layer_node.AddChild(t,new r.WString(n),Boolean(i)),this.children=this.getChildren(),this.children[t].toJson()}},{key:"removeGraphics",value:function(e){for(var t,n,i=this.layer_node,a=(this.parent.layer_node,i.GetGraphicsObjects(e)),o=function(e,t){for(var n=r.GraphicsObjectType.e_TypeAll,i=r.GraphicsObjectType.e_TypeFormXObject,a=e.GetFirstGraphicsObjectPosition(n);a;a=e.GetNextGraphicsObjectPosition(a,n)){var s=e.GetGraphicsObject(a);if(s===t||s.Handle()===t.Handle())return e;if(s.GetType()===i){var c=s.GetFormXObject(),u=o(c.GetGraphicsObjects(),t);if(u)return u}}},s=[],c=0;c<a.GetSize();c++){var u=a.GetAt(c);if(t&&n.indexOf(u.Handle())>-1)t.RemoveGraphicsObject(u);else{var l=o(e,u);l.RemoveGraphicsObject(u),-1===s.indexOf(l)&&s.push(l),t=l,n=[];for(var d=r.GraphicsObjectType.e_TypeAll,h=(r.GraphicsObjectType.e_TypeFormXObject,t.GetFirstGraphicsObjectPosition(d));h;h=t.GetNextGraphicsObjectPosition(h,d)){var f=t.GetGraphicsObject(h);n.push(f.Handle())}}}e.GenerateContent(),s.forEach(function(e){return e.GenerateContent()})}},{key:"addGraphics",value:function(e,t){return this.layer_node.AddGraphicsObject(e,t)}},{key:"getGraphicsObjects",value:function(e){for(var t=[],n=this.layer_node.GetGraphicsObjects(e),r=0;r<n.GetSize();r++){var i=n.GetAt(r);t.push(i)}return t}},{key:"isInPage",value:function(e){return this.layer_node.IsInPage(e)}},{key:"setName",value:function(e){if(!e)return!1;var t=this.layer_node.SetName(new r.WString(e));return t&&(this.name=e),t}},{key:"setViewUsage",value:function(e){var t=l[e];return!!t&&this.layer_node.SetViewUsage(r.UsageState[t])}},{key:"setPrintUsage",value:function(e){var t=l[e];if(!t)return!1;var n=this.layer_node.GetPrintUsage(),i=n.subtype;return n.Set(i,r.UsageState[t]),this.layer_node.SetPrintUsage(n)}},{key:"setExportUsage",value:function(e){var t=l[e];return!!t&&this.layer_node.SetExportUsage(r.UsageState[t])}},{key:"getRelatedAnnots",value:function(){if(!this.hasLayer)return[];var e=this.layer_node;try{for(var t=e.GetRelatedAnnots(),n=[],r=0;r<t.GetSize();r++){var i=t.GetAt(r);n.push(i)}return n}catch(e){}return[]}},{key:"addGraphicObject",value:function(e,t){var n=this.c_doc.GetPage(e),r=n.GetGraphicsObjectBI(t),i=this.layer_node.AddGraphicsObject(n,r);return n.GenerateContent(),i}},{key:"removeGraphicsObject",value:function(e,t){var n=this.c_doc.GetPage(e),r=n.GetGraphicsObjectBI(t),i=this.layer_node.RemoveGraphicsObject(r);return n.GenerateContent(),i}},{key:"toJson",value:function(){var e=this.layer_node,t=this.layer_context,n=t.IsVisible(e);if(e.IsEmpty())return[];for(var a=[],o=this.children.length,u=0;u<o;u++){var l=this.children[u];a.push(l.toJson())}var d={isRoot:this.isRoot,id:this.id,name:this.name,deep:this.deep,hasLayer:this.hasLayer,isLocked:this.isLocked,children:a,visible:n};if(this.hasLayer){var h,f=e.GetIntent();h="View"===(h=f.GetSize()>0?f.GetAt(0).toString():e.HasIntent((0,c.n5)(r,"View"))?"View":"Design")?0:1;var g,p=i.getDefaultState(e),v=e.GetPrintUsage().print_state.value,m=e.GetViewUsage().value,_={min:e.GetZoomUsage().min_factor,max:e.GetZoomUsage().max_factor},y=e.GetExportUsage().value,S=t.GetUsageType().value,b=e.GetDict().GetObjNum(),I=e.isOCMD(),A=[];if(1===I)if(g=e.getOCMDTypeP().toString(),e.hasVE()){var P=e.GetDict().GetElement((0,c.n5)(r,"VE")).GetArray(),D=function(e){for(var t=[],n=0;n<e.GetElementCount();n++){var r=e.GetElement(n);switch(r.GetType().value){case 5:t.push(D(r.GetArray()));break;case 9:t.push(r.GetDirectObject().GetObjNum());break;default:t.push(r.GetString().toString())}}return t},E=function(e){var t,n=e[0];return"Or"===n?t="||":"Not"===n?t="!":"And"===n&&(t="&&"),"("+e.join(t).replace(/(Or\|\|)|(Not)|(And\&\&)/,"")+")"},C=D(P);C=C.map(function(e){return(0,s._)(e,Array)?E(e):e}),g=C=E(C)}else{for(var w=e.getOCMDLayersP(),k=0;k<w.GetSize();k++){var T=w.GetAt(k);A.push(T)}"AllOn"===g?g=A.join("&&"):"AnyOn"===g&&(g=A.join("||"))}Object.assign(d,{intent:h,state:p?1:0,printUsage:v,viewUsage:m,zoomUsage:_,exportUsage:y,usageType:S,objNum:b,isOcmd:I,ocmdType:g,ocmdLayers:A})}return d}},{key:"delete",value:function(){this.layer_node.delete(),this.children.forEach(function(e){e.delete()}),this.children=[]}}]),e}();const h=u},8871:(e,t,n)=>{"use strict";n.d(t,{Z:()=>oe});var r=n(5578),i=n(9227),a=n(7424),o=n(5843),s=n(2956),c=n(1730),u=n(4570),l=n(5347),d=n(9256),h=n(7582),f=n(8925),g=n(2019),p=n(4748);function v(e,t){return new(0,e.CFX_FloatRect)(t.left,t.bottom,t.right,t.top)}var m=n(6950),_=n(5147),y=function(){function e(){(0,i._)(this,e)}return(0,a._)(e,null,[{key:"createTextWatermark",value:function(e,t,n,r,i){var a=new e.WString(n),o=new e.Watermark(t,a,r,i);return a.delete(),o}},{key:"createBitmapWatermark",value:function(e,t,n,r){var i=_.Z.createImage(e,n).GetFrameBitmap(0);return new e.Watermark(t,i,r)}}]),e}(),S=function(){function e(){(0,i._)(this,e)}return(0,a._)(e,null,[{key:"createWatermarkSettings",value:function(e,t,n,r,i,a,o,s,c){var u=e.Position,l=e.WatermarkSettingsFlags,d={TopLeft:u.e_PosTopLeft,TopCenter:u.e_PosTopCenter,TopRight:u.e_PosTopRight,CenterLeft:u.e_PosCenterLeft,Center:u.e_PosCenter,CenterRight:u.e_PosCenterRight,BottomLeft:u.e_PosBottomLeft,BottomCenter:u.e_PosBottomCenter,BottomRight:u.e_PosBottomRight},h={0:l.e_FlagASPageContents,1:l.e_FlagASAnnot,2:l.e_FlagOnTop,4:l.e_FlagNoPrint,8:l.e_FlagInvisible};return new e.WatermarkSettings(d[t],n,r,h[i].value,a,o,s,c)}}]),e}(),b=function(){function e(){(0,i._)(this,e)}return(0,a._)(e,null,[{key:"createWatermarkTextProperties",value:function(e,t,n,r,i,a,o){var s=e.StandardID,c=[s.e_StdIDCourier,s.e_StdIDCourierB,s.e_StdIDCourierBI,s.e_StdIDCourierI,s.e_StdIDHelvetica,s.e_StdIDHelveticaB,s.e_StdIDHelveticaBI,s.e_StdIDHelveticaI,s.e_StdIDTimes,s.e_StdIDTimesB,s.e_StdIDTimesBI,s.e_StdIDTimesI,s.e_StdIDSymbol,s.e_StdIDZapfDingbats],u={normal:e.FontStyle.e_FontStyleNormal,underline:e.FontStyle.e_FontStyleUnderline},l={left:e.Alignment.e_AlignmentLeft,center:e.Alignment.e_AlignmentCenter,right:e.Alignment.e_AlignmentRight},d=new e.Font(c[t]),h=new e.WatermarkTextProperties(d,n,r,u[i.toLocaleLowerCase()],a,l[o.toLocaleLowerCase()]);return d.delete(),h}}]),e}(),I=n(3850),A=n(776),P=n(7189),D=n(843),E=n(9134),C=n(4033),w=n(6867),k=n(5991),T=function(){function e(t){(0,i._)(this,e),(0,k._)(this,"page",void 0),(0,k._)(this,"modified",void 0),(0,k._)(this,"currentBitmapPromise",void 0),(0,k._)(this,"currentRotate",void 0),(0,k._)(this,"currentScale",void 0),this.page=t,this.modified=!0,this.currentRotate=0,this.currentScale=1}return(0,a._)(e,[{key:"reset",value:function(){this.currentBitmapPromise&&(this.currentBitmapPromise.then(function(e){e.bitmap.delete()}),this.currentBitmapPromise=void 0),this.modified=!0}},{key:"setCurrentRotate",value:function(e){this.currentRotate=e}},{key:"setCurrentScale",value:function(e){this.currentScale=e}},{key:"getCurrentImageData",value:function(){return!this.modified&&this.currentBitmapPromise||(this.currentBitmapPromise=this.page.getBitmap(this.currentScale,this.currentRotate,void 0,["page","annot"],"print","",!1,{hotAnnot:0,hideAnnots:[],dpr:1}).then(function(e){return e.renderer.delete(),e.progressive.delete(),delete e.renderer,delete e.progressive,e}),this.modified=!1),this.currentBitmapPromise}}]),e}(),F=n(6131),G=function(e){return e.EndPoint="end-point",e.MidPoint="mid-point",e.IntersectionPoint="intersection-point",e.NearestPoint="nearest-point",e}({}),R=n(5251),x=n(7292),O=n(6306),M=n(2715),N=n(4691),B=n(6905),L=n(9418),j=n(5467),U=n(8643),W=function(e){function t(e,n,r){var a;(0,i._)(this,t),(a=(0,N._)(this,t,[e,n,r])).engineWidget=a.annot,a.page=n;var o=n.pdfDoc.formModule.form;return o&&o.hasWidgetChanged(e.GetDict().GetObjNum())&&e.ResetAppearanceStream(),a}return(0,j._)(t,e),(0,a._)(t,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Widget(e)}},{key:"destroy",value:function(){(0,B._)((0,L._)(t.prototype),"destroy",this).call(this),this.engineWidget=null}},{key:"updateMKProperty",value:function(e,t){var n,r,i=this.engineWidget,a=i.GetDict(),s=this.pdfPage.doc,c=this.engine,u=!0;switch(e){case"alignment":var l=(0,I.n5)(c,"Q");void 0===t?a.RemoveAt(l):a.SetAtInteger(l,t);break;case"directionRTL":var h=(0,I.n5)(c,"MEOptions");void 0===t?a.RemoveAt(h):a.SetAtInteger(h,t);break;case"lineSpace":var f=(0,I.n5)(c,"LS");if(void 0===t)a.RemoveAt(f);else{var g=this.engine.PDFArray.Create();g.AddInteger(t[0]),g.AddFloat(t[1]),a.SetAt(f,g)}break;case"borderColor":0===t?i.RemoveMKEntry(c.MKEntry.e_MKEntryBorderColor):i.SetMKBorderColor(t);break;case"fillColor":0==t?i.RemoveMKEntry(c.MKEntry.e_MKEntryBackgroundColor):i.SetMKBackgroundColor(t);break;case"normalCaption":r=new c.WString(t),i.SetMKNormalCaption(r),r.delete();break;case"downCaption":r=new c.WString(t),i.SetMKDownCaption(r),r.delete();break;case"rotation":var p=c.Rotation.e_Rotation0;switch(t){case 1:p=c.Rotation.e_Rotation90;break;case 2:p=c.Rotation.e_Rotation180;break;case 3:p=c.Rotation.e_Rotation270}i.SetMKRotation(p);break;case"rolloverCaption":r=new c.WString(t),i.SetMKRolloverCaption(r),r.delete();break;case"normalIcon":n="I";case"downIcon":n||(n="IX");case"rolloverIcon":n||(n="RI");var v=(0,I.n5)(c,"MK"),m=a.GetElement(v);if(m&&m.GetDict()?m=m.GetDict():(m=c.PDFDictionary.Create(),a.SetAtReference(v,m,s)),n=(0,I.n5)(c,n),"number"==typeof t)m.SetAtReference(n,s.GetIndirectObject(t),s);else if("object"==(void 0===t?"undefined":(0,d._)(t)))if(t)if(t.height>0&&t.width>0){var y=new c.String(t.stream),S=this.doc.CreateIcon(y,t.width,t.height);m.SetAtReference(n,S,s)}else if((0,o._)(t,Uint8Array)){var b=_.Z.createImage(c,t);if(b){var A=b.GetFrameBitmap(0);i.SetMKNormalIconBitmap(A)}else u=!1}else m.RemoveAt(n);else m.RemoveAt(n);for(var P=i.GetField(),D=P.GetControlCount(),E=m.GetElement(n),C=E?E.GetDirectObject().GetObjNum():0,w=0;C&&w<D;w++){var k=P.GetControl(w).GetWidget();if(!k.IsEmpty()){var T=k.GetDict();if(T.GetObjNum()!=a.GetObjNum()){var F=T.GetElement(v);F&&F.GetDict()?F=F.GetDict():(F=c.PDFDictionary.Create(),T.SetAtReference(v,F,s)),F.SetAtReference(n,s.GetIndirectObject(C),s),k.ResetAppearanceStream()}}}}var G=this.pdfPage.pdfDoc.form,R=i.GetField().GetName().toString(),x=G.getField(R),O=x.engineField,M=O.GetDict(),N=O.GetValue();return x.label.length>0&&O.SetValue((0,I.Dp)(c,x.label)),i.ResetAppearanceStream(),x.label.length>0&&M.SetAtWString((0,I.n5)(c,"V"),N),u}},{key:"setAS",value:function(e){if(e){var t=this.engineWidget.GetDict(),n=this.engine,r=(0,I.n5)(n,"AS"),i=new n.WString(e);t.SetAt(r,n.PDFObject.CreateFromName(i)),(0,A.Z)(i)}}},{key:"toJson",value:function(e){var n=(0,B._)((0,L._)(t.prototype),"toJson",this).call(this,e),r=this.engineWidget,i=r.GetField(),a=r.GetControl(),o=r.GetAction(),s="";o.IsEmpty()||(s=this.JR.actionManager.get(o,this.doc,this.JR).toJson());var c,u,l,d,h=this.engine,f=["Off"],g="Off",p={},v=0,m=0,_=[];if(!r.IsEmpty()){var y=r.GetDict();v=(v=y.GetElement((0,I.n5)(h,"Q")))?v.GetInteger():0,p=(0,U.S)(this.JR,this.page.doc,y);var S=(0,I.n5)(h,"AS");if(y.HasKey(S)){var b=this.engineWidget.GetAppearanceOnStateName();try{f.push(b.toString())}catch(e){f.push(this.JR.getHexString(b))}g=this.JR.getPDFString(this.engineWidget.GetAppearanceState())}S=(0,I.n5)(h,"AP"),d=y.HasKey(S);var A=y.GetElement((0,I.n5)(h,"MK"));A&&A.GetDict()&&((c=A.GetDict().GetElement((0,I.n5)(h,"I")))&&(c=c.GetDirectObject().GetObjNum()),(u=A.GetDict().GetElement((0,I.n5)(h,"RI")))&&(u=u.GetDirectObject().GetObjNum()),(l=A.GetDict().GetElement((0,I.n5)(h,"IX")))&&(l=l.GetDirectObject().GetObjNum()));var P=y.GetElement((0,I.n5)(h,"MEOptions"));P&&(m=P.GetInteger());var D=y.GetElement((0,I.n5)(h,"LS"));if(D){var E=D.GetArray();2===E.GetElementCount()&&(_.push(E.GetElement(0).GetInteger()),_.push(Number(E.GetElement(1).GetFloat().toFixed(1))))}}var C=r.GetHighlightingMode();C&&(C=C.value);var w,k=0;k=r.HasMKEntry(h.MKEntry.e_MKEntryBackgroundColor)?4278190080|r.GetMKBackgroundColor():0,w=r.HasMKEntry(h.MKEntry.e_MKEntryBorderColor)?4278190080|r.GetMKBorderColor():0;var T,F=r.GetMKDownCaption().toString(),G=r.GetMKIconCaptionRelation().value,R=r.GetMKIconFit(),x=r.GetMKNormalCaption().toString(),O=r.GetMKRolloverCaption().toString(),M=r.GetMKRotation().value,N="",j=0;i.IsEmpty()||(N=i.GetName().toString(),j=i.GetType().value,T=a.GetIndex(),this.engineWidget.GetDict().HasKey((0,I.n5)(this.engine,"PMD"))&&(j=8));var W,H,K,z=!1;if(!i.IsEmpty()){H=a.GetDefaultAppearance();try{H.font.IsEmpty()||(z=H.font.IsEmbedded(this.pdfPage.doc),W=H.font.GetName().toString(),K=(K=H.font.GetFamilyName().toString()).replace(" ","").replace("-",""),H.font.IsBold()&&(K+="Bold"),H.font.IsItalic()&&(K+="Italic"))}catch(e){isNaN(e)||(e=h.getErrorCode(e)),console.warn(e)}}return Object.assign(n,{highlightingMode:C,fillColor:k,iconFit:{fitBounds:R.fit_bounds,horizontalFraction:R.horizontal_fraction,isProportionalScaling:R.is_proportional_scaling,scaleWayType:R.scale_way_type?R.scale_way_type.value:R.scale_way_type,verticalFraction:R.vertical_fraction},MKBorderColor:w,downCaption:F,normalCaption:x,rolloverCaption:O,captionRelation:G,rotation:M,field:N,control:T,fieldType:j,action:s,AA:p,ApStates:f,ApState:g,normalIcon:c,rolloverIcon:u,downIcon:l,hasAP:d,alignment:v,directionRTL:m,lineSpace:_},H?{DA:{flags:H.flags,textColor:H.text_color,textSize:H.text_size,isEmbedded:z,fontName:W,fullName:K}}:{})}},{key:"setAction",value:function(e,t,n){var r,i=this.engine,a=this.JR.actionManager,o=this.engineWidget,s=this.annot.GetPage().GetDocument();if(r=a.create(s,t.type),-1==e)try{var c=o.GetAction();if(c.IsEmpty())o.SetAction(r);else{var u=c.GetSubActionCount();c.InsertSubAction(u,r)}}catch(e){isNaN(e)||(e=i.getErrorCode(e)),console.warn(e)}else{var l=o.GetField(),d=this.pdfPage.pdfDoc.form,h=e>10&&e<17?o.GetDict():l.GetDict();d.addAAToDict(h,r,{trigger:e,field:l.GetName().toString()},n)}var f=a.get(r,this.doc,this.JR);return f.create(t),this.updateModifyTime(),f}},{key:"setDefaultAppearance",value:function(e){var t,n=this.engine,r=JSON.parse(e),i=this.engineWidget,a=i.GetControl(),o=void 0!==r.fontName?n.DefAPFlags.e_FlagFont.value:0,s=void 0!==r.textColor?n.DefAPFlags.e_FlagTextColor.value:0,c=void 0!==r.textSize?n.DefAPFlags.e_FlagFontSize.value:0;if(r.fontName){var u=mapFontName2StdID(r.fontName);if(u){var l=[n.StandardID.e_StdIDCourier,n.StandardID.e_StdIDCourierB,n.StandardID.e_StdIDCourierBI,n.StandardID.e_StdIDCourierI,n.StandardID.e_StdIDHelvetica,n.StandardID.e_StdIDHelveticaB,n.StandardID.e_StdIDHelveticaBI,n.StandardID.e_StdIDHelveticaI,n.StandardID.e_StdIDTimes,n.StandardID.e_StdIDTimesB,n.StandardID.e_StdIDTimesBI,n.StandardID.e_StdIDTimesI,n.StandardID.e_StdIDSymbol,n.StandardID.e_StdIDZapfDingbats];t=new this.engine.Font(l[u])}else t=new this.engine.Font((0,I.Dp)(n,r.fontName),0,n.Charset.e_CharsetANSI,0)}else t=new this.engine.Font(0);var d=new this.engine.DefaultAppearance(o|s|c,t,r.textSize?r.textSize:0,r.textColor?r.textColor:0);try{a.SetDefaultAppearance(d)}catch(e){return isNaN(e)||(e=n.getErrorCode(e)),void console.warn(e)}i.ResetAppearanceStream(),this.updateModifyTime()}},{key:"getWidgetMkOption",value:function(){var e=this.engine,t=this.engineWidget.GetMKIconCaptionRelation();switch(t){case e.MKIconCaptionRelation.e_MKRelationNoIcon:t="e_MKRelationNoIcon";break;case e.MKIconCaptionRelation.e_MKRelationNoCaption:t="e_MKRelationNoCaption";break;case e.MKIconCaptionRelation.e_MKRelationCaptionBelowIcon:t="e_MKRelationCaptionBelowIcon";break;case e.MKIconCaptionRelation.e_MKRelationCaptionAboveIcon:t="e_MKRelationCaptionAboveIcon";break;case e.MKIconCaptionRelation.e_MKRelationCaptionRight:t="e_MKRelationCaptionRight";break;case e.MKIconCaptionRelation.e_MKRelationCaptionLeft:t="e_MKRelationCaptionLeft";break;case e.MKIconCaptionRelation.e_MKRelationCaptionOvrlayOnIcon:t="e_MKRelationCaptionOvrlayOnIcon";break;default:t=""}var n=this.engineWidget.GetHighlightingMode();switch(n){case e.HighlightingMode.e_HighlightingNone:n="e_HighlightingNone";break;case e.HighlightingMode.e_HighlightingInvert:n="e_HighlightingInvert";break;case e.HighlightingMode.e_HighlightingOutline:n="e_HighlightingOutline";break;case e.HighlightingMode.e_HighlightingPush:n="e_HighlightingPush";break;case e.HighlightingMode.e_HighlightingToggle:n="e_HighlightingToggle";break;default:n=""}var r=this.engineWidget.GetMKNormalCaption().toString(),i=this.engineWidget.GetMKDownCaption().toString(),a=this.engineWidget.GetMKRolloverCaption().toString();return{labelIcon:{up:{label:r,icon:this.bitmapParseBlob(this.engineWidget.GetMKNormalIconBitmap())},down:{label:i,icon:this.bitmapParseBlob(this.engineWidget.GetMKDownIconBitmap())},rollover:{label:a,icon:this.bitmapParseBlob(this.engineWidget.GetMKRolloverIconBitmap())}},layout:t,behavior:n}}},{key:"setWidgetIconCaptionRelation",value:function(e){e=e||"e_MKRelationNoIcon";var t=this.engine.MKIconCaptionRelation[e];this.engineWidget.SetMKIconCaptionRelation(t),this.engineWidget.ResetAppearanceStream()}},{key:"setWidgetHighlighting",value:function(e){e=e||"e_HighlightingPush";var t=this.engine.HighlightingMode[e];this.engineWidget.SetHighlightingMode(t),this.engineWidget.ResetAppearanceStream()}},{key:"setWidgetMkCaption",value:function(e,t){switch(e=e||"up",t=(0,I.Dp)(this.engine,t||""),e){case"up":this.engineWidget.SetMKNormalCaption(t);break;case"down":this.engineWidget.SetMKDownCaption(t);break;case"rollover":this.engineWidget.SetMKRolloverCaption(t)}this.engineWidget.ResetAppearanceStream()}},{key:"setWidgetMkIcon",value:function(e,t){var n;switch(e=e||"up",t&&(n=_.Z.createImage(this.engine,t).GetFrameBitmap(0)),e){case"up":t?this.engineWidget.SetMKNormalIconBitmap(n):this.engineWidget.RemoveMKEntry(this.engine.MKEntry.e_MKEntryNormalIcon);break;case"down":t?this.engineWidget.SetMKDownIconBitmap(n):this.engineWidget.RemoveMKEntry(this.engine.MKEntry.e_MKEntryDownIcon);break;case"rollover":t?this.engineWidget.SetMKRolloverIconBitmap(n):this.engineWidget.RemoveMKEntry(this.engine.MKEntry.e_MKEntryRolloverIcon)}this.engineWidget.ResetAppearanceStream()}},{key:"getWidgetIconFitOption",value:function(){var e=this.engine,t=this.engineWidget.GetMKIconFit(),n=t.scale_way_type,r=t.is_proportional_scaling,i=t.fit_bounds,a=t.horizontal_fraction,o=t.vertical_fraction;switch(n){case e.ScaleWayType.e_ScaleWayAlways:n="e_ScaleWayAlways";break;case e.ScaleWayType.e_ScaleWayBigger:n="e_ScaleWayBigger";break;case e.ScaleWayType.e_ScaleWaySmaller:n="e_ScaleWaySmaller";break;case e.ScaleWayType.e_ScaleWayNever:n="e_ScaleWayNever";break;default:n="e_ScaleWayAlways"}return{scale_way_type:n,is_proportional_scaling:r+"",fit_bounds:i,horizontal_fraction:a=(100*a).toFixed(0),vertical_fraction:o=(100*o).toFixed(0)}}},{key:"setWidgetIconFitOption",value:function(e){var t=new this.engine.IconFit,n=this.engine.ScaleWayType[e.scale_way_type],r=e.is_proportional_scaling,i=e.horizontal_fraction,a=e.vertical_fraction,o=e.fit_bounds;i=parseFloat(i/100),a=parseFloat(a/100),t.Set(n,"true"===r,i,a,o),this.engineWidget.SetMKIconFit(t),this.engineWidget.ResetAppearanceStream()}},{key:"bitmapParseBlob",value:function(e){var t=this.engine,n="";if(!e.IsEmpty()){e.ConvertFormat(t.DIBFormat.e_DIBArgb);var r,i=e.GetWidth(),a=e.GetHeight(),o=e.GetBuffer(),s=a*e.GetPitch(),c=o+s;r=t.HEAPU8.buffer.slice?t.HEAPU8.buffer.slice(o,c):new Uint8Array(t.HEAPU8.buffer,o,s).buffer;var u=new Uint8Array(r),l=0,d=0,h=e.GetPitch();for(l=0;l<a;l++)for(d=0;d<i;d++){var f,g=l*h;f=[u[4*d+2+g],u[4*d+g]],u[4*d+g]=f[0],u[4*d+2+g]=f[1]}n={start:o,size:s,width:i,height:a,buffer:r}}return n}},{key:"removeAction",value:function(e,t){var n=this,r=this.engine,i=this.pdfPage.pdfDoc.form.engineForm.GetDocument(),a=this.engineWidget;if(this.updateModifyTime(),"-1"==e){var o=a.GetAction();return o=(0,F.Z)(r,i,o,t),t&&o?(a.SetAction(o),[this.JR.actionManager.get(o,this,this.JR).toJson()]):(a.RemoveAction(),[])}e=r.TriggerEvent.values[e];var s=a.GetField(),c=a.GetDict(),u=s.GetDict(),l=[c,u];return c.GetObjNum()==u.GetObjNum()&&(l=[c,null]),l.map(function(a){if(a){var o,s=(0,I.n5)(r,"AA"),c=a.GetElement(s);if(c){var u=c.GetDict();if(o=new r.AdditionalAction(i,u),t){var l=o.GetAction(e);if(l.IsEmpty())return;if(l=(0,F.Z)(r,i,l,t))return o.SetAction(e,l),n.JR.actionManager.get(l,n,n.JR).toJson();o.RemoveAction(e)}else o.RemoveAction(e)}}})}},{key:"moveAction",value:function(e){var t=e.trigger,n=e.action,r=e.direction,i=this.engine;t=i.TriggerEvent.values[t];var a=this.pdfPage.pdfDoc.doc,o=this.annot,s=o.GetDict();if(s)if(14!==Number(e.trigger)){var c,u=(0,I.n5)(i,"AA"),l=s.GetElement(u);if(l){var d=l.GetDict(),h=(c=new i.AdditionalAction(a,d)).GetAction(t);if(!h.IsEmpty()){for(var f=h.GetSubActionCount(),g=[h],p=0;p<f;p++)g.push(h.GetSubAction(p));var v=g.findIndex(function(e){return e.GetDict().GetObjNum()===n.objNumber});if(-1!=v){var m=r?v+1:v-1;if(0==m||0==v){c.RemoveAction(t);var _=0==v?m:v;h=g[_],c.SetAction(t,h),g[0].RemoveAllSubActions(),g.splice(_,1);for(var y=0;y<g.length;y++)h.InsertSubAction(y,g[y])}else{var S;h.RemoveAllSubActions(),S=[g[m],g[v]],g[v]=S[0],g[m]=S[1];for(var b=1;b<g.length;b++)h.InsertSubAction(b,g[b])}this.updateModifyTime()}}}}else{for(var A=o.GetAction(),P=A.GetSubActionCount(),D=[A],E=0;E<P;E++)D.push(A.GetSubAction(E));var C=D.findIndex(function(e){return e.GetDict().GetObjNum()===n.objNumber});if(-1==C)return;var w=r?C+1:C-1;if(0==w||0==C){o.RemoveAction(),D[0].RemoveAllSubActions();var k=0==C?w:C;o.SetAction(D[k]),D.splice(k,1),A=o.GetAction();for(var T=0;T<D.length;T++)A.InsertSubAction(T,D[T])}else{var F;A.RemoveAllSubActions(),F=[D[w],D[C]],D[C]=F[0],D[w]=F[1];for(var G=1;G<D.length;G++)A.InsertSubAction(G,D[G])}}}}]),t}(D.Z);const H=W;var K=function(e){return e.EDIT_GRAPHICS_OBJECT="edit-graphics-object",e}({}),z=f.mA.getLogger("jr-pdf-page-batch-processor"),V=function(){function e(t){(0,i._)(this,e),(0,k._)(this,"page",void 0),(0,k._)(this,"startedKind",void 0),this.page=t,this.startedKind=new Set}return(0,a._)(e,[{key:"onObtainsNativePage",value:function(e){var t=this;e.GenerateContent=f.GO.on(e.GenerateContent).around(function(e,n,r){if(!t.isStarted(K.EDIT_GRAPHICS_OBJECT))return n.apply(e,r);z.debug("Ignore GenerateContent method calls in batch operations")}).extract()}},{key:"start",value:function(e){this.startedKind.add(e)}},{key:"flush",value:function(e){return(0,r._)(function(){var t;return(0,h.Jh)(this,function(n){switch(n.label){case 0:return[4,this.page.c_pagePromise];case 1:return t=n.sent(),e===K.EDIT_GRAPHICS_OBJECT&&t.GenerateContent(),[2]}})}).call(this)}},{key:"end",value:function(e){return(0,r._)(function(){return(0,h.Jh)(this,function(t){return this.isStarted(e)&&this.flush(e),[2]})}).call(this)}},{key:"isStarted",value:function(e){return this.startedKind.has(e)}}]),e}(),J=n(4271);function Y(e){var t=e||{},n=t.xfa_page,r=t.xfaWidgetIndex;if(!n||!r)return null;var i=n.GetWidget(r);return!i||i.IsEmpty()?null:i}var Z=n(1407),q=function(){function e(t,n){(0,i._)(this,e),(0,k._)(this,"engine",void 0),(0,k._)(this,"pdfPage",void 0),(0,k._)(this,"pdfDoc",void 0),(0,k._)(this,"xfaDoc",void 0),(0,k._)(this,"pdfJR",void 0),(0,k._)(this,"isLButtonDown",void 0),this.engine=t,this.pdfPage=n,this.pdfDoc=n.pdfDoc,this.xfaDoc=n.pdfDoc.xfaDoc,this.isLButtonDown=!1,this.pdfJR=n.pdfDoc.JR}return(0,a._)(e,[{key:"getAllXFAWidgets",value:function(){return(0,r._)(function(){var e,t,n,r,i,a;return(0,h.Jh)(this,function(o){switch(o.label){case 0:return this.pdfDoc.canGetXFA()?[4,this.pdfPage._getXFAPage(this.pdfPage.index)]:[2,[]];case 1:for(e=o.sent(),t=e.GetWidgetCount(),n=[],r=0;r<t;r++)(i=e.GetWidget(r)).IsEmpty()||(a=(0,J.Z)(i,this.pdfJR,!1,this.engine),n.push(a));return[2,n]}})}).call(this)}},{key:"triggerXFAWidgetEvent",value:function(e){return(0,r._)(function(){var t,n,r,i,a,o,s,c,u,l,d,f,g,p,v,m,_,y,S;return(0,h.Jh)(this,function(h){switch(h.label){case 0:if(!this.pdfDoc.canGetXFA())return[2];switch(t=this.engine,n=e.type,r=e.point,i=e.keyCode,a=e.inputChar,o=e.flags,s=e.permission,n){case"OnLButtonDown":case"OnLButtonUp":case"OnRButtonDown":case"OnRButtonUp":case"OnMouseMove":case"OnLButtonDoubleClick":case"Contextmenu":return[3,1];case"OnKeyDown":case"OnKeyUp":return[3,6];case"OnChar":return[3,7]}return[3,8];case 1:return r?("OnLButtonDown"===n?this.isLButtonDown=!0:"OnLButtonUp"===n&&(this.isLButtonDown=!1),c=this.pdfDoc.xfaDocProvider,this.isLButtonDown&&"OnMouseMove"===n?(u=Y(c.currFocus),[3,5]):[3,2]):[2];case 2:return function(e,t,n,r){var i=Y(t);if(!i||i.IsEmpty())return!1;if(i.GetXFAPage().GetIndex()!==r)return!1;var a=i.OnHitTest(new n.PointF(e[0],e[1]));return n.HitTestArea.e_HitTestAreaClient===a}(r,c.currFocus,t,this.pdfPage.index)?(u=c.currFocus.xfa_page.GetWidget(c.currFocus.xfaWidgetIndex),[3,5]):[3,3];case 3:return[4,this.getXFAWidgetAtDevicePoint(r)];case 4:u=h.sent(),h.label=5;case 5:if(!u||u.IsEmpty()){if("OnLButtonDown"===n)c.SetFocus(null,!0),this.xfaDoc.KillFocus();else{if("Contextmenu"===n)return this.xfaDoc.KillFocus(),[2,c.showMemu({point:r,pageIndex:this.pdfPage.index,xfa_widget:u})];(l=Y(c.currFocus))&&l.OnLButtonUp(new t.PointF(r[0],r[1]),o)}return[2]}if(u&&u.GetType().value===Z.f.Signature)switch(c.SetFocus(null,!0),this.xfaDoc.KillFocus(),n){case"OnLButtonUp":return[2,c.handleSignature(u)];case"Contextmenu":return[2,c.showMemu({point:r,pageIndex:this.pdfPage.index,xfa_widget:u})]}else if(this.isCheckOnly(s))return[2];return d=new t.PointF(r[0],r[1]),"OnLButtonUp"===n?((f=Y(c.currFocus))&&f.OnLButtonUp(d,o),[2]):(g=u[n]&&u[n](d,o),"OnMouseMove"===n?(p=u.OnHitTest(d),v=!0,p===t.HitTestArea.e_HitTestAreaClient&&(v=u.IsAccessOpen()),[2,{result:g,hitTestArea:p.value,pageIndex:this.pdfPage.index,xfaWidget:(0,J.Z)(u,this.pdfJR,!0,this.engine),isAccessOpen:v}]):[2,{result:g}]);case 6:return(m=this.pdfDoc.xfaDocProvider).hasCurrFocus()?(_=m.currFocus.xfa_page.GetWidget(m.currFocus.xfaWidgetIndex),[2,{result:_[n](i,o),pageIndex:this.pdfPage.index,xfaWidget:(0,J.Z)(_,this.pdfJR,!1,this.engine)}]):[2];case 7:if(!(y=this.pdfDoc.xfaDocProvider).hasCurrFocus())return[2];if(S=y.currFocus.xfa_page.GetWidget(y.currFocus.xfaWidgetIndex),a)for(var b in a)S.OnChar(a.charCodeAt(b),o);else"number"==typeof i&&S.OnChar(i,o);return[2,{pageIndex:this.pdfPage.index,xfaWidget:(0,J.Z)(S,this.pdfJR,!1,this.engine)}];case 8:return[2]}})}).call(this)}},{key:"isCheckOnly",value:function(e){return!(e&this.engine.UserPermissions.e_PermFillForm.value||e&this.engine.UserPermissions.e_PermAnnotForm.value)}},{key:"getXFAWidgetAtDevicePoint",value:function(e){return(0,r._)(function(){var t,n,r,i;return(0,h.Jh)(this,function(a){switch(a.label){case 0:return this.pdfDoc.canGetXFA()?(t=this.engine,[4,this.pdfPage._getXFAPage(this.pdfPage.index)]):[2];case 1:return n=a.sent(),r=n.GetDisplayMatrix(0,0,n.GetWidth(),n.GetHeight(),t.Rotation.e_Rotation0),i=new t.PointF(e[0],e[1]),[2,n.GetWidgetAtDevicePoint(r,i,10)]}})}).call(this)}},{key:"getXFAWidgetByIndex",value:function(e){return(0,r._)(function(){return(0,h.Jh)(this,function(t){switch(t.label){case 0:return this.pdfDoc.canGetXFA()?[4,this.pdfPage._getXFAPage(this.pdfPage.index)]:[2];case 1:return[2,t.sent().GetWidget(e)]}})}).call(this)}}]),e}(),X=n(5318),Q=n(9963),$=(n(2863),n(5435)),ee="bitmap render fail",te=256,ne=32,re=f.mA.getLogger("pdf-jr.PDFPage"),ie={None:0,phone:1,date:2,security:3,email:4,credit:5,bank:6,driving:7},ae={"United States":0,China:1,"Hong Kong/Taiwan":2,France:3,Germany:4,Japan:5,Korea:6,Brazil:7,Spain:8,Turkey:9,Canada:10,Norway:11,Denmark:12,Finland:13,Iceland:14,Sweden:15,"United Kingdom":16,Ireland:17};const oe=function(){function e(t,n){(0,i._)(this,e),this.isVirtual=!1,this.id=(0,f.Ki)("pdf_page"),this.index=t,this.pdfDoc=n,this.doc=n.doc,this.xfaDoc=n.xfaDoc;var r=this.JR=n.JR;this.annotManager=r.annotManager;var a=this.engine=n.engine;this.progressiveContinueState=a.ProgressiveState.e_ToBeContinued,this.progressiveFinishState=a.ProgressiveState.e_Finished,this.isCPageDeleted=!0,this.isCPageParsed=!1,this.fullyBitmap=new T(this),this.annotationIDArray=[],this.isAnnotLoaded=!1,this.jrAnnots=[],this.preparsed=!1,this.fakeAnnots=[],this.batchProcessor=new V(this),this._needDestroyAnnots=[],this.needReParse=!1,n.isDynamicXFA()&&(this.xfaWidgetHandler=new q(a,this)),this.edittingAnnots=new Set,this.textLinks=[],this.isTextLinksLoaded=!1}return(0,a._)(e,[{key:"setAnnotIsEditing",value:function(e,t){t?this.edittingAnnots.add(e):this.edittingAnnots.delete(e)}},{key:"annotIsEditting",value:function(e){return this.edittingAnnots.has(e)}},{key:"fixPageFields",value:function(e,t){if(void 0!==this.pdfDoc.fixPages[this.index])return!1;if(!t.some(function(e){return e&&"widget"==e.getType()&&e.engineWidget.GetField().IsEmpty()}))return this.pdfDoc.fixPages[this.index]=!1,!1;this.pdfDoc.loadForm();var n=this.pdfDoc.formModule.form,r=n.GetControlCount(e);if(!this.pdfDoc.needFixPageFields){for(var i=0,a=0;a<t.length;a++)((0,o._)(t[a],H)||(0,o._)(t[a],Q.l))&&i++;i!=r&&(this.pdfDoc.needFixPageFields=!0)}if(!this.doc.HasForm()||this.pdfDoc.needFixPageFields){for(var s=!1,c=0;c<t.length;c++)if((0,o._)(t[c],H)||(0,o._)(t[c],Q.l)){s=!0,this.pdfDoc.needFixPageFields=!0;break}if(this.pdfDoc.fixPages=this.pdfDoc.fixPages||[],s&&!this.pdfDoc.fixPages[this.index])return n.FixPageFields(this.index),this.pdfDoc.fixPages[this.index]=!0,!0}return this.pdfDoc.fixPages[this.index]=!1,!1}},{key:"preparse",value:function(){var e=this;this.preparsed=!0,this.preparseJsonPromise=this.parsedPage().then(function(){return e.toJson()},function(e){if(!R.Z.is(e))throw e})}},{key:"addJRAnnot",value:function(e,t){this.jrAnnots[t]&&this._needDestroyAnnots.push(this.jrAnnots[t]),this.jrAnnots[t]=e,this.annotationIDArray[t]=e.getId()}},{key:"c_pagePromise",get:function(){var e=this;return this.isCPageDeleted&&(this.isCPageDeleted=!1,this._c_pagePromise=this._getPage(this.index).then(function(t){return e.pdfDoc.canGetXFA()?e.xfaPage=t:e.page=t,t})),this._c_pagePromise},set:function(e){this._c_pagePromise=null,this.isCPageDeleted=!0}},{key:"parsedPagePromise",get:function(){return this.isCPageParsed||(this.isCPageParsed=!0,this._parsedPagePromise=this.doParsePage()),this._parsedPagePromise},set:function(e){e!==this._parsedPagePromise&&(this.isCPageParsed=!1,this._parsedPagePromise=null)}},{key:"clearEnginePage",value:function(){var e=this,t=[];return this.isCPageDeleted||(t.push(this._c_pagePromise.then(function(t){if(t.delete(),e.jrAnnots.forEach(function(e){e.destroy()}),e.jrAnnots[void 0]){try{e.jrAnnots[void 0].destroy()}catch(e){}delete e.jrAnnots[void 0]}e.jrAnnots.length=0,e.page=null})),this.c_pagePromise=null),this.isCPageParsed&&(this.parsedPagePromise=null),this.fullyBitmap.reset(),Promise.all(t)}},{key:"_getPage",value:function(e){var t=this;if(this.pdfDoc.canGetXFA())return this._getXFAPage(e);var n,r,i=(0,f.dD)(),a=this.engine.ErrorCode.e_ErrDataNotReady;try{n=this.doc.GetPage(e)}catch(e){if((r=this.engine.getErrorCode(e))!==a)return i.reject(r.value),i.promise}return this.pdfDoc.readerBlockLoading||r===a?(n&&n.delete(),setTimeout(function(){t._getPage(e).then(function(e){i.resolve(e)},function(e){i.reject(e)})},100),i.promise):(n.IsEmpty()?(n.delete(),i.reject(new R.Z("Cannot get page by index: "+e))):i.resolve(n),i.promise.then(function(e){return t.batchProcessor.onObtainsNativePage(e),e}))}},{key:"_getXFAPage",value:function(e){var t,n,r=this,i=(0,f.dD)(),a=this.engine.ErrorCode.e_ErrDataNotReady;try{t=this.xfaDoc.GetPage(e)}catch(e){if((n=this.engine.getErrorCode(e))!==a)return i.reject(n.value),i.promise}return this.pdfDoc.readerBlockLoading||n===a?(t&&t.delete(),setTimeout(function(){r._getXFAPage(e).then(function(e){i.resolve(e)},function(e){i.reject(e)})},100),i.promise):(t.IsEmpty()?(t.delete(),i.reject(new R.Z("Cannot get page by index: "+e))):i.resolve(t),i.promise)}},{key:"_prepareAnnotations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page;return this.isAnnotLoaded=!0,this._getAnnotationIdArray(e)}},{key:"reloadAnnots",value:function(){this.page.UpdateAnnotList(),this.annotationIDArray=this._prepareAnnotations()}},{key:"_getAnnotIndexById",value:function(e){return this.annotationIDArray.indexOf(Number(e))}},{key:"hasAnnot",value:function(e){return this._getAnnotIndexById(e)>-1}},{key:"_setAnnotIdAt",value:function(e,t){if(t>=this.annotationIDArray.length&&this.annotationIDArray.indexOf(e)>-1)throw new Error("Duplicated annotation id: "+e);this.annotationIDArray[t]=e}},{key:"parsedPage",value:function(){return this.parsedPagePromise}},{key:"doParsePage",value:function(){var e=this;return this.c_pagePromise.then(function(t){if(e.pdfDoc.canGetXFA())return t;if(!e.needReParse&&(!t.IsParsed||t.IsParsed()))return t;try{e.needReParse&&e.notifyTouchup(t);var n=t.StartParse(0,null,e.needReParse);if(e.needReParse&&e.releaseTextPageAndTextLinks(),e.needReParse=!1,!(0,g.Z)(n,e.progressiveContinueState,e.progressiveFinishState))throw t.delete(),new Error("parse page fail")}catch(e){throw t.delete(),new Error("parse page fail")}return e.pdfDoc.mIsXFA&&!e.pdfDoc.hasXFALicense()||(e.annotationIDArray=e._prepareAnnotations(t)),t})}},{key:"reParsePage",value:function(){var e=this;return this.parsedPagePromise=this.c_pagePromise.then(function(t){if(!(0,g.Z)(t.StartParse(0,null,!0),e.progressiveContinueState,e.progressiveFinishState))throw t.delete(),new Error("parse page fail");return e.notifyTouchup(t),e.releaseTextPageAndTextLinks(),t})}},{key:"getIndex",value:function(){}},{key:"getObjNumber",value:function(){}},{key:"getWidth",value:function(){return this.c_pagePromise.then(function(e){return e.GetWidth()})}},{key:"getHeight",value:function(){return this.c_pagePromise.then(function(e){return e.GetHeight()})}},{key:"getAnnotsImageDataByTile",value:function(){}},{key:"hasAnnots",value:function(){return this.c_pagePromise.then(function(e){return 0!==e.GetAnnotCount()})}},{key:"getAnnots",value:function(e,t,n){return this.getAnnotsEx(e,t,n,!1)}},{key:"getAnnotsEx",value:function(e,t,n,r){var i=this;if(this.pdfDoc.canGetXFA())return Promise.resolve([]);var a=function(e){var t,n=e.map(function(e){return e.getId()});return n.reduceRight(function(e,t,r){return n.indexOf(t)!==r&&e.push(r),e},[]).forEach(function(t){e[t].destroy(),e.splice(t,1)}),(t=i._needDestroyAnnots).push.apply(t,(0,l._)(e)),e};return this.c_pagePromise.then(function(o){var s=o.GetAnnotCount();if(0===s)return[];if(!n&&i.isAnnotLoaded||i.reloadAnnots(),!e){var c=new Array(s).fill(1).map(function(e,n){return i._getAnnotByIndex(o,n,t)});return!r&&i.fixPageFields(o,c)?i.getAnnotsEx(e,t,!0,!0):t&&Object.keys(t).length?a(c.filter(function(e){return!!e})):a(c.filter(function(e){return"unknowntype"!=e.getType()}))}var u=e.map(function(e){var n=i._getAnnotIndexById(e);return-1===n?null:i._getAnnotByIndex(o,n,t)}).filter(function(e){return!!e&&"unknowntype"!=e.getType()});return a(u)})}},{key:"setAction",value:function(e,t){var n=this.JR,r={17:n.engine.TriggerEvent.e_TriggerPageOpened,18:n.engine.TriggerEvent.e_TriggerPageClosed},i=n.engine,a=r[e],o=i.AdditionalAction.CreateFromPage(this.page),s=n.actionManager,c=s.create(this.doc,t.type),u=o.GetAction(a);if(u.IsEmpty())o.SetAction(a,c);else{var l=u.GetSubActionCount();u.InsertSubAction(l,c),o.SetAction(a,u)}s.get(c,this.doc,n).create(t)}},{key:"getAction",value:function(e){var t=this.JR,n={open:t.engine.TriggerEvent.e_TriggerPageOpened,close:t.engine.TriggerEvent.e_TriggerPageClosed};if(!Object.keys(n).includes(e))throw new Error("trigger type must be ".concat(Object.keys(n).toSting()));var r=t.engine.AdditionalAction.CreateFromPage(this.page).GetAction(n[e]);return!r.IsEmpty()&&t.actionManager.get(r,this.doc,t).toJson()}},{key:"removeAction",value:function(e,t){var n=this.JR,r=n.engine,i={17:n.engine.TriggerEvent.e_TriggerPageOpened,18:n.engine.TriggerEvent.e_TriggerPageClosed}[e],a=r.AdditionalAction.CreateFromPage(this.page);if(t){var o=a.GetAction(i),s=(0,F.Z)(this.engine,this.doc,o,t.objNumber);return t.objNumber&&s?(a.SetAction(i,s),!0):a.RemoveAction(i)}return a.RemoveAction(i)}},{key:"moveAction",value:function(e){for(var t=e.trigger,n=e.action,r=e.direction,i=this.JR,a=i.engine,o={17:i.engine.TriggerEvent.e_TriggerPageOpened,18:i.engine.TriggerEvent.e_TriggerPageClosed},s=a.AdditionalAction.CreateFromPage(this.page),c=o[t],u=s.GetAction(c),l=u.GetSubActionCount(),d=[u],h=0;h<l;h++)d.push(u.GetSubAction(h));var f=d.findIndex(function(e){return e.GetDict().GetObjNum()===n.objNumber});if(-1!=f){var g=r?f+1:f-1;if(0==g||0==f){s.RemoveAction(c),d[0].RemoveAllSubActions();var p=0==f?g:f;s.SetAction(c,d[p]),d.splice(p,1),u=s.GetAction(c);for(var v=0;v<d.length;v++)u.InsertSubAction(v,d[v])}else{var m;u.RemoveAllSubActions(),m=[d[g],d[f]],d[f]=m[0],d[g]=m[1];for(var _=1;_<d.length;_++)u.InsertSubAction(_,d[_])}}}},{key:"getAnnotIDList",value:function(){return this.annotationIDArray}},{key:"_getAnnotByIndex",value:function(e,t,n){var r=e.GetAnnot(t);return r.IsEmpty()||n&&!(r.GetDict().GetObjNum()in n)?null:this.annotManager.get(r,this,t)}},{key:"getAnnotById",value:function(e){var t=this;return this.getNativeAnnotById(e).then(function(e){return e.IsEmpty()?null:t.annotManager.get(e,t,e.GetIndex())})}},{key:"getThumb",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.c_pagePromise.then(function(r){var i=r.GetWidth(),a=r.GetHeight();switch(t){case 90:case 270:var o;i=(o=[a,i])[0],a=o[1]}var s=P.pj/i,c=P.YP/a,u=Math.min(s,c)*n;return e.getImageData(u,t,u,0,0,e.getWidth(),e.getHeight(),0,0,!0)})}},{key:"getMediaBoxBitmap",value:function(e,t){var n=this.page,r=this.engine,i=n.GetBox(r.BoxType.e_MediaBox);i.Normalize(),i.IsEmpty()&&(i=new RectF(0,0,612,792));var a=i.right-i.left,o=i.top-i.bottom,s=0,c=0,u=n.GetBox(r.BoxType.e_CropBox);u.Normalize();var l=a,d=o;u.IsEmpty()||(s=Math.max(s,u.left-i.left),c=Math.max(c,i.top-u.top),l=u.right-u.left,d=u.top-u.bottom);var h=a/l,f=o/d;return this.getImageData(h,0,f,s/h/(l/e),c/f/(d/t),e/h,t/f,l/h/(l/e),d/f/(d/t))}},{key:"getNativeAnnotById",value:function(e){var t=this._getAnnotIndexById(e);if(-1==t)throw new Error("Annotation not found: ".concat(e));return this.c_pagePromise.then(function(e){return e.GetAnnot(t)})}},{key:"getImageDataByTile",value:function(e,t,n,r){var i,a,o=this,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6?arguments[6]:void 0,d=this.engine,h=(this.progressiveContinueState,this.progressiveFinishState,this);return Promise.all([this.getWidth(),this.getHeight()]).then(function(e){var t=(0,u._)(e,2),n=t[0],r=t[1];i=n*s,a=r*s}).then(function(){return o.parsedPage()}).then(function(e){return e=o.xfaPage||o.page,[ce(d,n,r,de(e)),e,d]}).then(function(e){var t=(0,u._)(e,3),n=t[0],r=t[1],i=t[2],a=(0,w.I)(i,n);return a.SetRenderEnhanceThinLines(!0),h.pdfDoc.pdfLayer&&h.pdfDoc.pdfLayer.layer_context&&a.SetLayerContext(h.pdfDoc.pdfLayer.layer_context),[a,n,r,i]}).then(function(n){var r=(0,u._)(n,4),s=r[0],d=r[1],f=r[2],g=r[3];return ue({x:-e,y:-t,width:i,height:a,rotate:c,pdfDoc:h.pdfDoc},g,f,d,s,l,!0,o.JR.getJPXDownSample()),[s,d,g]}).then(function(e){var t=(0,u._)(e,3),n=t[0],r=t[1],i=t[2];return(0,w.v)(i,r,n)})}},{key:"getImageData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.getWidth(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this.getHeight(),c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,d=arguments.length>9&&void 0!==arguments[9]&&arguments[9],h=this.engine,f=this.progressiveContinueState,p=this.progressiveFinishState;return Promise.all([this.parsedPage(),o,s]).then(function(e){var i=(0,u._)(e,3),a=i[0],o=i[1],s=i[2],c=Math.max(1,o*t),l=Math.max(1,s*r);switch(n){case 90:case 270:var d=c;c=l,l=d}var f=de(a),g=null;if((g=f?new h.Bitmap(c,l,h.DIBFormat.e_DIBArgb,0,0):new h.Bitmap(c,l,h.DIBFormat.e_DIBRgb32,0,0)).FillRect(f?16777215:4294967295,null),g.IsEmpty())throw g.delete(),a.delete(),new Error("create bitmap fail");return[g,a,h]}).then(function(e){var t=(0,u._)(e,3),n=t[0],r=t[1],i=t[2],a=new i.Renderer(n,!0);if(a.IsEmpty())throw a.delete(),n.delete(),r.delete(),new Error("render bitmap fail");return d&&a.SetRenderAnnotsForThumbnail(!0),[a,n,r,i]}).then(function(t){var r=(0,u._)(t,4),o=r[0],s=r[1],d=r[2],h=r[3],v=(0,E.q)(h,n),m=(d=e.xfaPage||e.page).GetDisplayMatrix(i,a,c||s.GetWidth(),l||s.GetHeight(),v);if(!(0,g.Z)(e.pdfDoc.canGetXFA()?o.StartRenderXFAPage(d.Handle?d.Handle():d,m,!1,null):o.StartRender(d,m,null),f,p))throw o.delete(),s.delete(),d.delete(),new Error("render page image fail");return[o,s,d,h]}).then(function(e){var t,n=(0,u._)(e,4),r=n[0],i=n[1],a=(n[2],n[3]),o=i.GetBuffer(),s=i.GetWidth(),c=i.GetHeight(),l=c*i.GetPitch(),d=o+l;return t=a.HEAPU8.buffer.slice?a.HEAPU8.buffer.slice(o,d):new Uint8Array(a.HEAPU8.buffer,o,l).buffer,r.delete(),i.delete(),{buffer:t,width:s,height:c}})}},{key:"getRotation",value:function(){return this.c_pagePromise.then(function(e){return e.GetRotation().value})}},{key:"setRotation",value:function(e){var t=this;return this.c_pagePromise.then(function(n){return Promise.all([n.SetRotation(t.engine.Rotation[["e_Rotation0","e_Rotation90","e_Rotation180","e_Rotation270"][e]||"e_Rotation0"]),n])}).then(function(e){var t=(0,u._)(e,2);t[0];return t[1].GetRotation().value})}},{key:"getPageImage",value:function(){}},{key:"getVisibleContentBox",value:function(){}},{key:"getPureTexts",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.doParsePage().then(function(n){return e.getNormalTextPageSync().GetText(t).toString()})}},{key:"getPageTexts",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\r\n",r=this.engine.PDF2TextFlags,i={normal:r.e_PDF2TextFlagsNormal.value,autoRotate:r.e_PDF2TextFlagsAutoRotate.value,autoWidth:r.e_PDF2TextFlagsAutoWidth.value,keepColumn:r.e_PDF2TextFlagsKeepColumn.value,noHyphen:r.e_PDF2TextFlagsNoHyphen.value,decomposeLigature:r.e_PDF2TextFlagsDecomposeLigature.value},a=i.normal;Object.keys(e).forEach(function(t){!0===e[t]&&(a|=i[t])});for(var o=this.page.GetPageText(a,t),s=[],c=0;c<o.GetSize();c++)s.push(o.GetAt(c)+"");return s.join(n)}},{key:"getImages",value:function(){}},{key:"getShapes",value:function(){}},{key:"getShadings",value:function(){}},{key:"destroy",value:function(){var e=this;return this.doc=null,this.pdfDoc=null,this.isCPageDeleted?Promise.resolve():this.c_pagePromise.then(function(t){if(e.c_pagePromise=null,e.jrAnnots.forEach(function(e){try{e.destroy()}catch(e){}}),e.jrAnnots[void 0]){try{e.jrAnnots[void 0].destroy()}catch(e){}delete e.jrAnnots[void 0]}e.jrAnnots=[],e._needDestroyAnnots.forEach(function(e){try{e.destroy()}catch(e){}}),e._needDestroyAnnots=[];try{if(!t.IsEmpty())return e.releaseTextPageAndTextLinks(),t.ClearRenderCache&&t.ClearRenderCache(),t.delete()}catch(e){}return Promise.resolve()})}},{key:"resetBitmapCache",value:function(){this.fullyBitmap.reset()}},{key:"executeOpenAction",value:function(){return this.pdfDoc.actionAPIImpl.triggerAction({type:"page",pageIndex:this.index},$.n6.PAGE_OPENED)}},{key:"executeCloseAction",value:function(){return this.pdfDoc.actionAPIImpl.triggerAction({type:"page",pageIndex:this.index},$.n6.PAGE_CLOSED)}},{key:"toJson",value:function(){var e=this;if(this.pdfDoc.canGetXFA())return this.toXFAJson();var t=this.page,n=this.engine,r=this.engine.CFX_FloatRect,i=t.GetBox(n.BoxType.e_MediaBox);i.Normalize(),i.IsEmpty()&&(i=new r(0,0,612,792));var a,o=!1,s=t.GetBox(n.BoxType.e_CropBox);s.Normalize(),s.IsEmpty()?a=i:((a=s).Intersect(i),o=!0);var c,u=n.Rotation;switch(t.GetRotation()){case u.e_Rotation0:c=new n.Matrix(1,0,0,1,-a.left,-a.bottom);break;case u.e_Rotation90:c=new n.Matrix(0,-1,1,0,-a.bottom,a.right);break;case u.e_Rotation180:c=new n.Matrix(-1,0,0,-1,a.right,a.top);break;case u.e_Rotation270:c=new n.Matrix(0,1,-1,0,a.top,-a.left);break;default:c=new n.Matrix}var l,d=t.GetDict().GetObjNum(),h={};try{l=t.GetDict().GetElement((0,I.n5)(n,"AA"))}catch(e){re.info(n.getErrorCode(e))}if(l&&l.GetDict()){var f=new n.AdditionalAction(this.doc,l.GetDict());if(!f.IsEmpty())[this.engine.TriggerEvent.e_TriggerPageOpened,this.engine.TriggerEvent.e_TriggerPageClosed].forEach(function(t){try{var n=f.GetAction(t);n.IsEmpty()||(h[t.value]=e.JR.actionManager.get(n,e.doc,e.JR).toJson())}catch(t){isNaN(t)||(t=e.engine.getErrorCode(t)),console.warn(t)}});f.delete()}var g,p=[c.GetA(),c.GetB(),c.GetC(),c.GetD(),c.GetE(),c.GetF()];return c.delete(),g=this.pdfDoc.mIsXFA&&!this.pdfDoc.hasXFALicense()?0:t.GetAnnotCount(),{id:this.id,index:t.GetIndex(),width:t.GetWidth(),height:t.GetHeight(),rotation:t.GetRotation().value,userUnit:t.GetUserUnitSize(),annotCount:g,matrix:p,objectNumber:d,AA:h,mediaWidth:i.Width(),mediaHeight:i.Height(),isCropped:o,cropBox:{left:a.left,right:a.right,top:a.top,bottom:a.bottom}}}},{key:"toXFAJson",value:function(){var e=this.xfaPage,t=e.GetWidth(),n=e.GetHeight();return{id:this.id,index:e.GetIndex(),width:t,height:n,rotation:0,annotCount:0,matrix:[1,0,0,1,0,0],objectNumber:-1,AA:{},mediaWidth:t,mediaHeight:n,isCropped:!1,cropBox:{left:0,right:t,top:n,bottom:0}}}},{key:"getMediaBoxSize",value:function(){return(0,r._)(function(){var e,t,n,r;return(0,h.Jh)(this,function(i){switch(i.label){case 0:return[4,this.c_pagePromise];case 1:return i.sent(),this.pdfDoc.canGetXFA()?(n=this.xfaPage,e=n.GetWidth(),t=n.GetHeight()):((r=this.page.GetBox(this.engine.BoxType.e_MediaBox)).Normalize(),r.IsEmpty()&&(r=new RectF(0,0,612,792)),e=r.Width(),t=r.Height()),[2,{mediaWidth:e,mediaHeight:t}]}})}).call(this)}},{key:"getBitmap",value:function(e,t,n){return(0,r._)(function(){var e,t,n,r,i,a,o,s,c,u,l,d,f,g,p,v,m,_,y,S,b,I,A,P,D,E,C,k,T,F,G,R,x,O,M=arguments;return(0,h.Jh)(this,function(h){switch(h.label){case 0:return e=M.length>0&&void 0!==M[0]?M[0]:1,t=M.length>1&&void 0!==M[1]?M[1]:0,n=M.length>2?M[2]:void 0,r=M.length>3&&void 0!==M[3]?M[3]:["page"],i=M.length>4&&void 0!==M[4]?M[4]:"view",a=M.length>5?M[5]:void 0,o=M.length>6&&void 0!==M[6]&&M[6],s=M.length>7&&void 0!==M[7]?M[7]:{hotAnnot:0,hideAnnots:[],dpr:1},c=M.length>8?M[8]:void 0,u=this.engine,l=-1!==r.indexOf("page"),"view"===i&&l&&(this.fullyBitmap.setCurrentRotate(t),this.fullyBitmap.setCurrentScale(e)),d=this.getRenderFlags(r),f=-1===r.indexOf("annot")&&r.indexOf("stamps")>-1,g=-257&d&-33,[4,this.parsedPage()];case 1:return p=h.sent(),v=n?n.x:0,m=n?n.y:0,_=this.getRenderBitmapSize(p,n,e,t),y=_.renderWidth,S=_.renderHeight,b=_.bitmapWidth,I=_.bitmapHeight,d=this.checkUserPermissionAndUpdateRenderFlags(p,d),A=this.getTransparencyFlag(p,d,l),P="view"===i&&"number"==typeof this.pdfDoc.colors.background&&"number"==typeof this.pdfDoc.colors.foreground,D=ce(u,b,I,A,P&&l?this.pdfDoc.colors.background:void 0),E=(0,w.I)(u,D),this.setRenderConfig(E,i,P),G=ue({x:-v,y:-m,width:y,height:S,rotate:t,usage:i,pdfDoc:this.pdfDoc},u,this.xfaPage||this.page,null,E,d,a,this.JR.getJPXDownSample(),!l),C=G[0],k=G[1],T=G[2],R=s.hideAnnots||[],l&&0===R.length?F=C.GetRateOfProgress():this.page&&(c&&(c=new u.CFX_FloatRect(c.left,c.bottom,c.right,c.top)).Normalize(),this.renderAllAnnots(D,p,E,T,d,f,g,s,c),c&&c.delete(),F=100,k=2,C={delete:function(){}}),100!=F&&2!=k||this.pdfDoc.canGetXFA()||((l&&0===R.length||"print"==i)&&this.renderAnnots(E,i,T,d),this.renderFocusAnnot(D,T,s)),x=this.pdfDoc.canGetXFA()?0:p.GetRotation().value,(O=(0,w.v)(u,D,E,!1)).rate=2==k?100:F,O.x=v,O.y=m,O.scale=e,o||(O.isFirst=Math.abs(this.scale-e)>1e-6||this.rotate!=t||this.pageRotation!=x,this.scale=e,this.rotate=t,this.pageRotation=x),[2,{image:O,getBitmapBuffer:w.v,engine:u,bitmap:D,renderer:E,usage:i,matrix:T,renderFlags:d,page:this,x:v,y:m,progressive:C}]}})}).apply(this,arguments)}},{key:"getRenderFlags",value:function(e){for(var t=0,n=this.engine,r={page:n.ContentFlag.e_RenderPage.value,annot:n.ContentFlag.e_RenderAnnot.value,form:te,noHighlight:8,onlyHighlight:4,hideMarkup:16,stamps:ne},i=0,a=e.length;i<a;i++)e[i]in r&&(t|=r[e[i]]);return t}},{key:"getTransparencyFlag",value:function(e,t,n){var r=de(e);return n||(r=8&t?1:!(4&t)),r}},{key:"setLayerRenderConfig",value:function(e,t,n){var r=this.engine,i=t;if("print"===n){var a=new r.LayerContext(this.doc,r.UsageType.e_UsagePrint);i&&i.layer_context&&a.MergeStates(i.layer_context),e.SetLayerContext(a)}else i&&i.layer_context&&e.SetLayerContext(i.layer_context)}},{key:"setRenderConfig",value:function(e,t,n){e.SetRenderEnhanceThinLines(!0),this.setLayerRenderConfig(e,this.pdfDoc.pdfLayer,t),e.SetForceHalftone(!0),n&&"view"!==t&&(e.SetColorMode(this.engine.ColorMode.e_ColorModeCustom),e.SetMappingModeColors(le(this.pdfDoc.colors.background),le(this.pdfDoc.colors.foreground)))}},{key:"getRenderBitmapSize",value:function(e,t,n,r){var i,a,o=e.GetWidth()*n,s=e.GetHeight()*n;if(t)i=t.width,a=t.height;else switch(r){case 90:case 270:i=s,a=o;break;default:i=o,a=s}return{renderWidth:o,renderHeight:s,bitmapWidth:i=parseInt(i),bitmapHeight:a=parseInt(a)}}},{key:"checkUserPermissionAndUpdateRenderFlags",value:function(e,t){if(!this.pdfDoc.isOwner&&!this.pdfDoc.canGetXFA()){var n=e.GetDocument(),r=n.GetPasswordType(),i=this.engine;if(r==i.PasswordType.e_PwdUser)0==(n.GetUserPermissions()&(i.UserPermissions.e_PermFillForm.value|i.UserPermissions.e_PermAnnotForm.value))&&(t|=te);n.delete()}return t}},{key:"isRectIntersect",value:function(e,t){return!(e.right<t.left||e.left>t.right||e.bottom>t.top||e.top<t.bottom)}},{key:"renderAllAnnots",value:function(e,t,n,r,i,a,o,s,c){var u=this.engine,l=t.GetAnnotCount();n.SetScreenDPIScale(s.dpr||1);for(var d=[],h=[],f=[],g=[],p=[],v=0;v<l;v++){var m=t.GetAnnot(v),_=m.GetRect();if(!c||this.isRectIntersect(c,_)){var y=m.GetType();y===u.AnnotType.e_Redact?p.push(m):y===u.AnnotType.e_Screen?h.push(m):y===u.AnnotType.e_Link?f.push(m):y===u.AnnotType.e_Widget?g.push(m):d.push(m)}}g.length&&(d=d.concat(g)),f.length&&(d=d.concat(f)),h.length&&(d=d.concat(h)),p.length&&(d=d.concat(p)),this.pdfDoc.formModule.isInEditDesignMode()?n.SetForceRenderWidget(!0):n.SetForceRenderWidget(!1);for(var S=0;S<d.length;S++){var b=d[S];try{var I=b.GetType().value,A=b.GetFlags();if(0===I||2&A||32&A)if(!(20===I&&this.pdfDoc.formModule.isInEditDesignMode()))continue;if(8&i&&9==I)continue;if(4&i&&9!==I)continue;if(-1!==s.hideAnnots.indexOf(b.GetDict().GetObjNum()))continue;if(a&&I!==u.AnnotType.e_Stamp.value)continue;var P=!0;if(9!==I){var D=b.GetAppearanceGraphicsObjects(u.AppearanceType.e_AppearanceTypeNormal);if(!D.IsEmpty())if(D.GetMaxBlendType()>u.BlendMode.e_BlendNormal.value){P=!1,n.SetRenderContentFlags(1|o);var E=b.GetRect();r.TransformRect(E);var C=new u.FX_RECT(E.left,E.bottom,E.right,E.top);e.FillRect(4294967295,C),n.SetClipRect(C),n.StartRender(t,r,null),n.SetRenderContentFlags(o),n.ClearClips(),C.delete()}}P&&n.RenderAnnot(b,r)}catch(e){isNaN(e)||(e=u.getErrorCode(e)),console.warn(e)}}this.pdfDoc.formModule.render(t,r,n),d.forEach(function(e){e.delete()})}},{key:"renderFocusAnnot",value:function(e,t,n){if(n.hotAnnot){var r=this.engine,i=n.hotAnnot,a=(0,w.I)(r,e);a.SetRenderAnnotAppearanceType(r.AppearanceType.e_AppearanceTypeRollover);var o=this._getAnnotIndexById(i),s=this.page.GetAnnot(o);0,a.RenderAnnot(s,t),s.delete(),a.delete()}}},{key:"getAnnotsBitmap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:["annot","form"],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"view",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{hideAnnots:[],hotAnnot:0,dpr:1},s=arguments.length>7?arguments[7]:void 0,c=this.engine,u=this.getRenderFlags(i),l=-1===i.indexOf("annot")&&i.indexOf("stamps")>-1,d=-257&u&-33,h=this.page,f=r?r.x:0,g=r?r.y:0,p=this.getRenderBitmapSize(h,r,t,n),v=p.renderWidth,m=p.renderHeight,_=p.bitmapWidth,y=p.bitmapHeight;u=this.checkUserPermissionAndUpdateRenderFlags(h,u);var S=this.getTransparencyFlag(h,u,!1),b="view"===a&&"number"==typeof this.pdfDoc.colors.background&&"number"==typeof this.pdfDoc.colors.foreground,I=0;e&&(I=c._malloc(e.byteLength),c.HEAPU8.set(new Uint8Array(e),I));var A,P,D=ce(c,_,y,S,void 0,e,null),E=(0,w.I)(c,D);this.setRenderConfig(E,a,b);var C=ue({x:-f,y:-g,width:v,height:m,rotate:n,usage:a,pdfDoc:this.pdfDoc},c,this.xfaPage||this.page,null,E,u,!0,this.JR.getJPXDownSample(),!0);C[0],C[1],P=C[2],s&&(s=new c.CFX_FloatRect(s.left,s.bottom,s.right,s.top)).Normalize(),this.renderAllAnnots(D,h,E,P,u,l,d,o,s),s&&s.delete(),A={delete:function(){}},this.pdfDoc.canGetXFA()||this.renderFocusAnnot(D,P,o);var k=this.pdfDoc.canGetXFA()?0:h.GetRotation().value,T=(0,w.v)(c,D,E,!1);return T.rate=100,T.x=f,T.y=g,T.scale=t,T.isFirst=Math.abs(this.scale-t)>1e-6||this.rotate!=n||this.pageRotation!=k,this.scale=t,this.rotate=n,this.pageRotation=k,D.delete(),E.delete(),A.delete&&A.delete(),I&&c._free(I),T}},{key:"getBitmapByMatrix",value:function(e,t,n){}},{key:"renderAnnots",value:function(e,t,n,r){var i="print"===t,a=this.engine,o=-257&r&-33,s=!!(r&a.ContentFlag.e_RenderAnnot.value),c=!s&&!!(r&ne),u=!!(r&te),l=!!(r&a.ContentFlag.e_RenderPage.value),d=this.page,h=d.GetAnnotCount();i&&u&&!l&&e.SetRenderContentFlags(1),e.SetRenderFormField(u);for(var f=0;f<h;f++){var g=d.GetAnnot(f);try{var p=g.GetType().value,v=p===a.AnnotType.e_Widget.value;if("print"==t){var m=g.GetFlags();if(2&m||!(4&m)||18==p)continue;if(c){if(v)e.SetRenderFormField(!0);else if(p!==a.AnnotType.e_Stamp.value)continue}else if(!s&&!v)continue;e.RenderAnnot(g,n)}else{var _=this.engine.AnnotType;-1!=[_.e_UnknownType,_.e_PSInk,_.e_Movie,_.e_PrinterMark,_.e_TrapNet,_.e_3D].map(function(e){return e.value}).indexOf(p)&&e.RenderAnnot(g,n)}}catch(e){isNaN(e)||(e=a.getErrorCode(e)),console.warn(e)}finally{g.delete()}}i&&u&&!l&&e.SetRenderContentFlags(o)}},{key:"getPageAndHighlightBitmap",value:function(){var e,t,n,r,i,a=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0,d=this.engine,h=c?c.x:0,f=c?c.y:0,p=this.progressiveContinueState,v=this.progressiveFinishState,m=this;return this.parsedPage().then(function(e){return i=e,Promise.all([a.getWidth(),a.getHeight()])}).then(function(i){var a=(0,u._)(i,2),s=a[0],l=a[1];n=s*o,r=l*o,e=c?c.width:n,t=c?c.height:r}).then(function(){return[ce(d,e,t,de(i)),i,d]}).then(function(e){var t=(0,u._)(e,3),n=t[0],r=t[1],i=t[2],a=(0,w.I)(i,n);return a.SetRenderEnhanceThinLines(!0),m.pdfDoc.pdfLayer&&m.pdfDoc.pdfLayer.layer_context&&a.SetLayerContext(m.pdfDoc.pdfLayer.layer_context),[a,n,r,i]}).then(function(e){var t=(0,u._)(e,4),i=t[0],o=t[1],c=t[2],d=t[3];return function(e,t,n,r,i,a,o){var s=e.x,c=e.y,u=e.width,l=e.height,d=e.rotate,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[],f=(0,E.q)(t,d);switch(d){case 270:case 90:var p=u;u=l,l=p}var v=n.GetDisplayMatrix(s,c,u,l,f);i.SetRenderContentFlags(t.ContentFlag.e_RenderPage.value);if(!(0,g.Z)(i.StartRender(n,v,null),a,o))throw i.delete(),r.delete(),new Error(ee);for(var m=t.AnnotType.e_Highlight,_=0,y=n.GetAnnotCount();_<y;_++){var S=n.GetAnnot(_),b=S.GetType();b!==m&&0!=b.value||-1!==h.indexOf(S.GetUniqueID().toString())||i.RenderAnnot(S,v)}}({x:-h,y:-f,width:n,height:r,rotate:s},d,a.xfaPage||a.page,o,i,p,v,l),c.ClearRenderCache&&c.ClearRenderCache(),[i,o,d]}).then(function(e){var t=(0,u._)(e,3),n=t[0],r=t[1],i=t[2];return(0,w.v)(i,r,n)})}},{key:"getAnnotBitmapEx",value:function(e,t,n,r,i,a){var o,s,c,l,d,h,f,g=this,p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{hotAnnot:0,hideAnnots:[],dpr:1},v=this.engine,m=r?r.x:0,_=r?r.y:0;return this.parsedPage().then(function(n){o=n;var r=g._getAnnotIndexById(e);if(-1==r)throw new Error("Annotation not found: ".concat(e));var i=o.GetAnnot(r);if(i.IsEmpty())throw i.delete(),new Error("Annotation is empty");return l=o.GetWidth()*t,d=o.GetHeight()*t,h=i}).then(function(){var e=h.GetRect();return s=Math.max(r?r.width+0:(e.right-e.left)*t,1),c=Math.max(r?r.height+0:(e.top-e.bottom)*t,1),{bitmap:ce(v,s,c,!0),renderer:{delete:function(){}},progressive:{delete:function(){}}}}).then(function(e){f=e;var t=e.bitmap,n=(0,w.I)(v,t);if(i===P.Qk.ROLLOVER){a||h.GetFlags();h.SetEnableToggleNoView(!!(256&a))}return i&&n.SetRenderAnnotAppearanceType(v.AppearanceType[i===P.Qk.ROLLOVER?"e_AppearanceTypeRollover":i===P.Qk.DOWN?"e_AppearanceTypeDown":"e_AppearanceTypeNormal"]),[n,t,h]}).then(function(e){var t=(0,u._)(e,3),r=t[0],a=t[1],s=t[2];switch(n){case 90:case 270:var c;c=l,l=d,d=c}var h=g.pdfDoc.pdfLayer;if(h&&h.layer_context&&!h.layer_tree.IsEmpty()){s.GetRelatedLayerNode();r.SetLayerContext(h.layer_context)}var y=o.GetDisplayMatrix(-m,-_,l,d,(0,E.q)(v,n));if(i===P.Qk.NORMAL){var S=g.getRenderFlags(["noHighlight","annot","form"]),b=-257&S&-33;g.renderAllAnnots(a,o,r,y,S,!1,b,p,s.GetRect())}else{if(!r.RenderAnnot(s,y))return r.delete(),{buffer:new ArrayBuffer(0),width:0,height:0,x:m,y:_}}var I=(0,w.v)(v,a,r);return I.x=m,I.y=_,f.renderer.delete(),f.progressive.delete(),I})}},{key:"getAnnotBitmap",value:function(e,t,n,r,i,a){var o,s,c,l,d,h,f,g=this,p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{hotAnnot:0,hideAnnots:[],dpr:1},v=this.engine,m=r?r.x:0,_=r?r.y:0,y=this.parsedPage().then(function(n){o=n;var r=g._getAnnotIndexById(e);if(-1==r)throw new Error("Annotation not found: ".concat(e));var i=o.GetAnnot(r);if(i.IsEmpty())throw i.delete(),new Error("Annotation is empty");return l=o.GetWidth()*t,d=o.GetHeight()*t,h=i}).then(function(){if(20==h.GetType().value){var e=h.GetRect();return s=Math.max(r?r.width+0:(e.right-e.left)*t,1),c=Math.max(r?r.height+0:(e.top-e.bottom)*t,1),{bitmap:ce(v,s,c,!0),renderer:{delete:function(){}},progressive:{delete:function(){}}}}return g.getBitmap(t,n,r,["noHighlight","form"],"view",!1,!1,p)});return i===P.Qk.NORMAL?y.then(function(e){return e.image}):y.then(function(e){f=e;var t=e.bitmap,n=(0,w.I)(v,t);if(i===P.Qk.ROLLOVER){a||h.GetFlags();h.SetEnableToggleNoView(!!(256&a))}return i&&n.SetRenderAnnotAppearanceType(v.AppearanceType[i===P.Qk.ROLLOVER?"e_AppearanceTypeRollover":i===P.Qk.DOWN?"e_AppearanceTypeDown":"e_AppearanceTypeNormal"]),[n,t,h]}).then(function(e){var t=(0,u._)(e,3),r=t[0],i=t[1],a=t[2];switch(n){case 90:case 270:var s;s=l,l=d,d=s}var c=g.pdfDoc.pdfLayer;if(c&&c.layer_context&&!c.layer_tree.IsEmpty()){a.GetRelatedLayerNode();r.SetLayerContext(c.layer_context)}var h=o.GetDisplayMatrix(-m,-_,l,d,(0,E.q)(v,n));if(!r.RenderAnnot(a,h))return r.delete(),{buffer:new ArrayBuffer(0),width:0,height:0,x:m,y:_};var p=(0,w.v)(v,i,r);return p.x=m,p.y=_,f.renderer.delete(),f.progressive.delete(),p})}},{key:"getAnnotBitmapByRange",value:function(e,t,n,r){var i,a,s,c,l,d=this,h=this.engine,f=r?r.x:0,g=r?r.y:0;return this.parsedPage().then(function(e){return i=e,Promise.all([d.getWidth(),d.getHeight()])}).then(function(e){var n=(0,u._)(e,2),i=n[0],o=n[1];return c=i*t,l=o*t,a=r?r.width:c,s=r?r.height:l,[a,s,c,l]}).then(function(e){var t=(0,u._)(e,4),n=t[0],r=t[1],i=t[2],a=t[3];return[ce(h,n,r,!0),i,a]}).then(function(e){var t=(0,u._)(e,3),n=t[0],r=t[1],i=t[2],a=(0,w.I)(h,n);return a.SetRenderEnhanceThinLines(!0),[a,n,r,i]}).then(function(t){for(var r=(0,u._)(t,4),a=r[0],s=r[1],c=r[2],l=r[3],p=i.GetDisplayMatrix(-f,-g,c,l,d.transformRotateValue(h,n)),v=[],m=0,_=e.length;m<_;m++){var y=e[m];if((0,o._)(y,Array))for(var S=y[0],b=y[1];S<=b;S++)v.push(i.GetAnnot(S));else v.push(i.GetAnnot(y))}for(var I=0,A=v.length;I<A;I++){var P=v[I];a.RenderAnnot(P,p)}return(0,w.v)(h,s,a)})}},{key:"getAnnotIdAtPoint",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.parsedPage().then(function(i){var a=new n.engine.PointF(e,t),o=i.GetAnnotAtPoint(a,r);return a.delete(),o.IsEmpty()?-1:o.GetUniqueID().toString()})}},{key:"getAnnotIdAtDevicePoint",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;return this.parsedPage().then(function(a){var o=n.engine,s=new o.Matrix;i&&s.Set(i[0],i[1],i[2],i[3],i[4],i[5]);var c=new o.PointF(e,t),u=a.GetAnnotAtDevicePoint(c,r,s);return(0,A.Z)(c,s),u.IsEmpty()?-1:u.GetUniqueID().toString()})}},{key:"getAnnotObjectNumAtPoint",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.parsedPage().then(function(i){var a=new n.engine.PointF(e,t),o=i.GetAnnotAtPoint(a,r);return a.delete(),o.IsEmpty()?-1:o.GetDict().GetObjNum()})}},{key:"getAnnotObjectNumAtDevicePoint",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;return this.parsedPage().then(function(a){var o=n.engine,s=new o.Matrix;i&&s.Set(i[0],i[1],i[2],i[3],i[4],i[5]);var c=new o.PointF(e,t),u=a.GetAnnotsAtDevicePoint(c,r,s),l=u.GetSize();if(0===l)return-1;for(var d=-1,h=0;h<l;h++){var f=u.GetAt(h);if(!f.IsEmpty()){if(f.GetType()==n.engine.AnnotType.e_Link)return f.GetDict().GetObjNum();if(f.GetType()==n.engine.AnnotType.e_Watermark)continue;-1===d&&(d=f.GetDict().GetObjNum())}}return d})}},{key:"getCharInfoAtPoint",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.getNormalTextPage().then(function(i){var a=i.GetIndexAtPos(e,t,r);if(-1===a)return null;if(!i.GetTextRectCount(a,1))return null;var o=i.GetTextRect(0),s=i.GetBaselineRotation(0),c=n.getSelectedRectArray(i,a,a);return c.length&&(0===s.value||2===s.value?(o.top=c[0].top,o.bottom=c[0].bottom):(o.left=c[0].left,o.right=c[0].right)),{charIndex:a,left:o.left,right:o.right,top:o.top,bottom:o.bottom,rotation:s.value}})}},{key:"getNormalTextPage",value:function(e){var t=this;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.textPage?(this.releaseTextPageAndTextLinks(),this.parsedPage().then(function(n){var r=t.engine;return t.textPage=new r.TextPage(n,e||r.TextParseFlags.e_ParseTextNormal.value)})):Promise.resolve(this.textPage)}},{key:"getNormalTextPageSync",value:function(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.textPage)return this.textPage;this.releaseTextPageAndTextLinks();var e=this.engine;return this.textPage=new e.TextPage(this.page,e.TextParseFlags.e_ParseTextNormal.value)}},{key:"releaseTextPageAndTextLinks",value:function(){var e;this.releaseTextLinks(),null===(e=this.textPage)||void 0===e||e.delete(),this.textPage=null}},{key:"releaseTextLinks",value:function(){this.isTextLinksLoaded&&(this.textLinks.forEach(function(e){e.delete()}),this.textLinks=[],this.isTextLinksLoaded=!1)}},{key:"removeAnnotById",value:function(e){var t=this;return this.getNativeAnnotById(e).then(function(n){return!(!n||n.GetType()===t.engine.AnnotType.e_Widget)&&t.parsedPage().then(function(r){return!!r.RemoveAnnot(n)&&(t.edittingAnnots.delete(e),t.update().then(function(e){return!0}))})})}},{key:"removeAllAnnot",value:function(){var e=this;return this.edittingAnnots.clear(),this.parsedPage().then(function(t){for(var n=t.GetAnnotCount();n--;){var r=t.GetAnnot(n);r.GetType()!==e.engine.AnnotType.e_Widget&&t.RemoveAnnot(r)}return e.update()})}},{key:"_getAnnotationIdArray",value:function(e){var t=e.GetAnnotCount();return Array(t).fill(void 0).map(function(t,n){var r=e.GetAnnot(n);try{return r.IsEmpty()?null:r.GetDict().GetObjNum()}finally{r.delete()}}).filter(function(e){return!!e})}},{key:"normalize",value:function(){return this.parsedPage().then(function(e){var t=e.GetAnnotCount(),n=Array(t).fill(void 0).map(function(t,n){return e.GetAnnot(n)}),r=n.map(function(e){if(!e.IsEmpty())return e.GetUniqueID().toString()});r.forEach(function(e,t){e&&(r.indexOf(e,t+1)>-1&&n[t].SetUniqueID((0,m.Z)()))})})}},{key:"getAnnotObjNumByNM",value:function(e){return this.parsedPage().then(function(t){for(var n=t.GetAnnotCount(),r=0;r<n;r++){var i=t.GetAnnot(r);if(!i.IsEmpty()&&i.GetUniqueID().toString()===e)return i.GetDict().GetObjNum()}return 0})}},{key:"addImage",value:function(e,t,n,r,i){var a=this,o=this.engine,s=_.Z.createImage(o,e);if(!s||s.IsEmpty())return Promise.resolve();var c=new o.PointF(t.x,t.y);return this.parsedPage().then(function(e){var u=e.GetRotation().value;switch(u){case 1:case 3:var l=r;r=n,n=l}var d;e.AddImage(s,0,c,n,r,!0);c.delete(),s.delete(),a.notifyTouchup(e),e.StartParse(0,null,!0),a.releaseTextPageAndTextLinks();var h=e.GetLastGraphicsObjectPosition(o.GraphicsObjectType.e_TypeImage);if(d=e.GetGraphicsObject(h),0!==u||0!==i){var f=u*Math.PI/2+i/180*Math.PI,g=d.GetRect(),p={x:(g.right+g.left)/2,y:(g.top+g.bottom)/2},v=d.GetMatrix();v.RotateAt(f,-p.x,-p.y,0),d.SetMatrix(v),g=d.GetRect(),v.Translate(t.x-g.left,t.y-g.bottom,0),d.SetMatrix(v),e.GenerateContent(),e.StartParse(0,null,!0),a.releaseTextPageAndTextLinks(),v.delete(),h=e.GetLastGraphicsObjectPosition(o.GraphicsObjectType.e_TypeImage),d.delete(),d=e.GetGraphicsObject(h)}return d&&a.JR.graphicsObjectManager.get(d,e,a)})}},{key:"notifyTouchup",value:function(e){if(this.pdfDoc.touchup){var t=new this.engine.TouchupEditorPageArray,n=this.engine.TUEditorPage.Create(e,100);t.Add(n),this.pdfDoc.touchup.jrMgr.OnPageContentChange(t),n.delete(),t.delete()}}},{key:"markRedactAnnot",value:function(e,t){var n=this,r=this.engine;return this.pdfDoc.getRedaction().then(function(i){return n.c_pagePromise.then(function(e){return[i,e]}).then(function(i){var a,o=i[0],s=i[1];try{for(var c=new r.RectFArray,u=0,l=e.length;u<l;u++){var d=e[u],h=new r.CFX_FloatRect(d.left,d.bottom,d.right,d.top);c.Add(h),h.delete()}if(a=o.MarkRedactAnnot(s,c),t){var f,g=t.name,p=t.color,v=t.applyFillColor,_=t.isAutoFontSize,y=t.textColor,S=t.textSize,b=t.fontName,A=t.justification,P=t.isRepeat,E=t.overlayText,C=t.redactionCode,w=t.defaultAppearance;g||(g=(0,m.Z)()),a.SetUniqueID((0,I.Dp)(r,g)),void 0!==p&&a.SetBorderColor(p),void 0!==v&&a.SetApplyFillColor(v),_&&a.SetAutoFontSize(_);var k=[r.StandardID.e_StdIDCourier,r.StandardID.e_StdIDCourierB,r.StandardID.e_StdIDCourierBI,r.StandardID.e_StdIDCourierI,r.StandardID.e_StdIDHelvetica,r.StandardID.e_StdIDHelveticaB,r.StandardID.e_StdIDHelveticaBI,r.StandardID.e_StdIDHelveticaI,r.StandardID.e_StdIDTimes,r.StandardID.e_StdIDTimesB,r.StandardID.e_StdIDTimesBI,r.StandardID.e_StdIDTimesI,r.StandardID.e_StdIDSymbol,r.StandardID.e_StdIDZapfDingbats];if(void 0!==b){var T=(0,O.T2)(b);f=T?new r.Font(k[T]):new r.Font((0,I.Dp)(r,b),0,r.Charset.e_CharsetANSI,0)}else f=new r.Font(r.StandardID.e_StdIDHelvetica);y=void 0===y?w.textColor:y,S=void 0===S?w.textSize:parseFloat(S);var F=(f?r.DefAPFlags.e_FlagFont.value:0)|r.DefAPFlags.e_FlagTextColor.value|((!_&&S)>0?r.DefAPFlags.e_FlagFontSize.value:0),G=new r.DefaultAppearance(F,f,S,y||16711680);if(a.SetDefaultAppearance(G),"0"===A&&a.SetOverlayTextAlignment(r.Alignment.e_AlignmentLeft),"1"===A&&a.SetOverlayTextAlignment(r.Alignment.e_AlignmentCenter),"2"===A&&a.SetOverlayTextAlignment(r.Alignment.e_AlignmentRight),void 0!==P&&a.SetRepeat(P),void 0!==E&&a.SetOverlayText((0,I.Dp)(r,E)),C){var R=new r.Int32Array;C.forEach(function(e){return R.Add(e)}),a.SetOverlayCode(R)}else a.RemoveOverlayCode()}else a.SetUniqueID((0,I.Dp)(r,(0,m.Z)()));D.Z.updateModifyTime(r,a),a.SetTitle((0,I.Dp)(r,n.JR.userName)),a.ResetAppearanceStream(),c.delete()}catch(e){return isNaN(e)||(e=r.getErrorCode(e)),console.log(e),[]}var x=a.GetPopup();return[n.annotManager.get(a,n,a.GetIndex()),n.annotManager.get(x,n,x.GetIndex())]}).then(function(e){return n.update().then(function(t){return e.forEach(function(e){n._setAnnotIdAt(e.getId(),e.getIndex())}),e})})})}},{key:"addAnnotGroup",value:function(e,t){var n=this;return this.parsedPage().then(function(r){var i=n.engine,a=new i.MarkupArray,o=[];return e.forEach(function(e,s){s!==t&&(e.noPopup=!0);var c=(0,p.M)(i,e.type),u=v(i,e.rect),l=r.AddAnnot(c,u),d=new i.Markup(l);a.Add(d),d.delete();var h=n.annotManager.get(l,n,l.GetIndex());o=o.concat(h.create(e))}),r.SetAnnotGroup(a,t),a.delete(),o}).then(function(e){return e.forEach(function(e){n._setAnnotIdAt(e.getId(),e.getIndex())}),e})}},{key:"getTextRects",value:function(e){var t=this;return Promise.all(e.map(function(e){return t.getTextRectsAtRect(e)})).then(function(e){return e.reduce(function(e,t){return e.concat(t)},[])})}},{key:"getTextRectsAtRect2",value:function(e){var t=this;return e.right-e.left<.5||e.top-e.bottom<.5?Promise.resolve([]):this.parsedPage().then(function(n){try{var r=t.engine.CFX_FloatRect,i=t.getNormalTextPageSync(),a=[],o=i.GetIndexAtPos((e.right+e.left)/2,(e.bottom+e.top)/2+2,2),s=i.GetTextRectCount(o,2),c=0;s>0&&(c=i.GetBaselineRotation(0).value);var u=i.GetTextInRect(new r(e.left,e.bottom,e.right,e.top)).toString();return a.push({left:e.left,right:e.right,top:e.top,bottom:e.bottom,rotation:c,text:u,texts:u}),a}catch(e){isNaN(e)||(e=t.engine.getErrorCode(e)),console.warn(e)}})}},{key:"getTextRectsAtRect",value:function(e){var t=this;return e.right-e.left<.5||e.top-e.bottom<.5?Promise.resolve([]):this.parsedPage().then(function(n){try{var r=t.engine.CFX_FloatRect,i=t.getNormalTextPageSync(),a=new r(e.left,e.bottom,e.right,e.top),o=i.GetTextRectArrayByRect(a);a.delete();var s=[],c=[],u=o.GetSize();if(0==u)return s;for(var l=0;l<u;l++){var d=o.GetAt(l),h=d.left,f=d.right,g=i.GetIndexAtPos((d.right+d.left)/2,(d.bottom+d.top)/2+2,2),p=i.GetTextRectCount(g,2),v=0;p>0&&(v=i.GetBaselineRotation(0).value);var m=i.GetIndexAtPos(h,d.top,4),_=i.GetIndexAtPos(f,d.bottom,4);-1===_&&(_=i.GetIndexAtPos(d.right,d.bottom,4));var y=i.GetChars(m,_-m+1).toString();c.push(y),s.push({left:d.left,right:d.right,top:d.top,bottom:d.bottom,rotation:v,text:y})}return s.length>0&&(s[0].texts=c.join("\r\n")),s}catch(e){isNaN(e)||(e=t.engine.getErrorCode(e)),console.warn(e)}})}},{key:"getTextContinuousRectsAtRect",value:function(e){var t=this;return e.right-e.left<.5||e.top-e.bottom<.5?Promise.resolve([]):this.getTextRectsAtRect(e).then(function(e){try{var n=e.length;if(n<2)return e;var r=e[0],i=e[n-1],a=t.engine,o=t.getNormalTextPageSync(),s=Math.min((r.top-r.bottom)/2,3),c=new a.PointF(r.left+s,r.top-s),u=o.GetIndexAtPos(c.x,c.y,s);if(c.delete(),u<0)return e;var l,d=Math.min((i.top-i.bottom)/2,3),h=new a.PointF(i.right-d,i.bottom+d),f=o.GetIndexAtPos(h.x,h.y,d);if(h.delete(),f<0)return e;f<u&&(l=u,u=f,f=l);for(var g=[],p=0,v=o.GetTextRectCount(u,f-u+1);p<v;p++){var m=o.GetTextRect(p);g[p]={left:m.left,top:m.top,right:m.right,bottom:m.bottom,rotation:o.GetBaselineRotation(p).value}}return g}catch(e){isNaN(e)||(e=t.engine.getErrorCode(e)),console.warn(e)}})}},{key:"getTextByIndex",value:function(e,t){var n=this;return this.parsedPage().then(function(r){var i=n.getNormalTextPageSync();e=e<0?0:e;var a=-1==t?-1:t-e+1;return-1!=t&&e>t&&(a=e-t+1,e=t),i.GetChars(e,a).toString()})}},{key:"getTextContinuousRectsAtPoints",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return this.pdfDoc.canGetXFA()?Promise.resolve([]):this.parsedPage().then(function(s){var c=r.getNormalTextPageSync(),u=c.GetIndexAtPos(e[0],e[1],n);-1!==u&&(i=u);var l=c.GetIndexAtPos(t[0],t[1],n);if(-1!==l&&(a=l),-1===a&&-1===i){var d={};return d.left=Math.min(e[0],t[0]),d.right=Math.max(e[0],t[0]),d.top=Math.max(e[1],t[1]),d.bottom=Math.min(e[1],t[1]),r.getTextRectsAtRect(d)}return-1!==i&&-1===a&&(a=i),-1!==a&&-1===i&&(i=a),o&&(i=c.CharIndexFromTextIndex(i),a=c.CharIndexFromTextIndex(a)),r.getResultArrayFromTextStartAndEnd(c,i,a)})}},{key:"getTextIndexAtPoint",value:function(e,t){var n=this;return this.parsedPage().then(function(r){return n.getNormalTextPageSync().GetIndexAtPos(e[0],e[1],t)})}},{key:"getTextRectsByIndexes",value:function(e,t){var n=this;return this.parsedPage().then(function(r){for(var i=n.getNormalTextPageSync(),a=[],o=-1==t?-1:t-e+1,s=i.GetTextRectCount(e,o),c=0;c<s;c++){var u=i.GetTextRect(c),l=u.left,d=u.top,h=u.right,f=u.bottom;a.push({left:l,top:d,right:h,bottom:f,rotation:i.GetBaselineRotation(c).value})}return a.length&&(a[0].start=e,a[0].end=t,a[0].text=i.GetChars(e,o).toString()),a})}},{key:"getTextContinuousCharsAtRect",value:function(e,t){var n=this;return this.getTextRectsAtRect(e).then(function(r){var i=r.length;if(!i)return"";var a=r[0],o=r[i-1],s=n.engine,c=n.getNormalTextPageSync();try{if(t){var u=new s.CFX_FloatRect(e.left,e.bottom,e.right,e.top),l=c.GetTextInRect(u).toString();return u.delete(),l}var d=Math.min((a.top-a.bottom)/2,3),h=a.left+d,f=a.top-d,g=c.GetIndexAtPos(h,f,d);if(g<0)return"";var p,v=Math.min((o.top-o.bottom)/2,3),m=o.right-v,_=o.bottom-v,y=c.GetIndexAtPos(m,_,v);return y<0&&(y=c.GetIndexAtPos(m,_+v,v)),y<0?"":(y<g&&(p=g,g=y,y=p),c.GetChars(g,y-g+1).toString())}finally{}})}},{key:"getResultArrayFromTextStartAndEnd",value:function(e,t,n){var r,i=[],a=t,o=n;n<t&&(t=(r=[n,t])[0],n=r[1]);for(var s=e.GetTextRectCount(t,n-t+1),c=0;c<s;c++){var u=e.GetTextRect(c),l=u.left,d=u.top,h=u.right,f=u.bottom;i.push({left:l,top:d,right:h,bottom:f,rotation:e.GetBaselineRotation(c).value})}var g=this.getSelectedRectArray(e,t,n);if(i.length&&g.length&&i.length===g.length)for(var p=0;p<i.length;p++)0==i[p].rotation||2==i[p].rotation?(i[p].top=g[p].top,i[p].bottom=g[p].bottom):(i[p].left=g[p].left,i[p].right=g[p].right);return i.length&&(i[0].start=a,i[0].end=o,i[0].text=e.GetChars(t,n-t+1).toString()),i}},{key:"getSelectedRectArray",value:function(e,t,n){for(var r=[],i=t;i<n+1;){var a=e.GetLineStart(i),o=e.GetLineEnd(i);-1===a&&(a=i),-1===o&&(o=i);var s=e.GetRectArray(a,o-a+1),c=o;c>n&&(c=n);var u=e.GetRectArray(i,c-i+1);if(s.GetSize())for(var l=s.GetAt(0),d=0;d<u.GetSize();d++){var h=u.GetAt(d),f=h.left,g=h.top,p=h.right,v=h.bottom;g=l.top,v=l.bottom,r.push({left:f,top:g,right:p,bottom:v})}i=c+1}return r}},{key:"getDoubleClickTextRectAtPoint",value:function(e,t){var n=this;return this.parsedPage().then(function(r){var i=[];try{var a=n.getNormalTextPageSync(),o=(0,u._)(e,2),s=o[0],c=o[1],d=a.GetWordAtPos(s,c,t);if(!d.IsEmpty())for(var h=d.GetSegmentCount(),f=0;f<h;f++){var g,p=d.GetSegmentStart(f),v=d.GetSegmentEnd(f);(g=i).push.apply(g,(0,l._)(n.getResultArrayFromTextStartAndEnd(a,p,v)))}}catch(e){var m=n.engine.getErrorCode(e);console.error(m)}return i})}},{key:"getTextSearch",value:function(e,t){var n=this;return this.parsedPage().then(function(r){try{var i=n.engine;t=t||i.SearchFlags.e_SearchNormal.value;var a=n.getNormalTextPageSync(),s=new i.WString(e),c=new i.TextSearch(a);return c.SetPattern(s),c.SetSearchFlags(t),{textSearch:c,textPage:a,strPattern:s}}catch(e){var u=(0,o._)(e,n.engine.ErrorCode)?e:n.engine.getErrorCode(e);re.error(u)}})}},{key:"getAnnotTextSearch",value:function(e,t,n){var r=this;return this.parsedPage().then(function(i){try{var a=r.engine;n=n||a.SearchFlags.e_SearchNormal.value;var s=new a.WString(t);return r.getNativeAnnotById(e).then(function(e){var t=new a.TextSearch.CreateFromAnnot(e);return t.SetPattern(s),t.SetSearchFlags(n),{textSearch:t,strPattern:s}})}catch(e){var c=(0,o._)(e,r.engine.ErrorCode)?e:r.engine.getErrorCode(e);re.error(c)}})}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,r._)(function(){var t,n,r;return(0,h.Jh)(this,function(i){switch(i.label){case 0:return this.resetBitmapCache(),null===(t=this.page)||void 0===t?[3,1]:(r=t,[3,3]);case 1:return[4,this.c_pagePromise];case 2:r=i.sent(),i.label=3;case 3:return n=r,e&&(this.notifyTouchup(n),this.releaseTextPageAndTextLinks()),this.annotationIDArray=this._prepareAnnotations(this.page),[2,{index:this.index,annotIds:this.annotationIDArray}]}})}).call(this)}},{key:"flatten",value:function(e){var t=this,n=(this.engine,this.pdfDoc.touchup);return this.c_pagePromise.then(function(r){var i=!1;3==e&&(e=0),2!==e&&(i=!0),n&&r.IsParsed()&&r.GenerateContent();var a=r.Flatten(!0,e);return a&&(i&&t.pdfDoc.resetForm(),t.reParsePage(),t.annotationIDArray=t._prepareAnnotations(r)),a})}},{key:"flattenAnnot",value:function(e){var t=this,n=(this.engine,this.pdfDoc.touchup);return X.ZP.loadWasmModule(X.sg).then(function(n){return t.getNativeAnnotById(e)}).then(function(e){n&&t.page.IsParsed()&&t.page.GenerateContent();var r=t.doc.HasForm(),i=t.page.FlattenAnnot(e);return i&&(t.reParsePage(),t.annotationIDArray=t._prepareAnnotations(t.page),r&&!(r=t.doc.HasForm())&&t.pdfDoc.resetForm()),i})}},{key:"getGraphicsObjectAtPoint_s",value:function(e,t,n){var r=this,i=(0,u._)(e,2),a=i[0],o=i[1];return this.parsedPage().then(function(e){var i=r.engine,s=i.GraphicsObjectType,c=new i.PointF(a,o),u=Promise.all([e.GetGraphicsObjectAtPoint(c,t,s.values[n]),e]);return c.delete(),u}).then(function(e){var i=(0,u._)(e,2),s=i[0],c=i[1];if(s){var l=r.JR.graphicsObjectManager.get(s,c,r);if(5===s.GetType().value)return l.getGraphicsObjectAtPoint(a,o,n,r.JR.graphicsObjectManager);if(0===n){if(2!==s.GetType().value)return l;if(l.isPointInLine(a,o,t))return l}}})}},{key:"getGraphicsObjectsCount",value:function(){return this.parsedPage().then(function(e){return e.GetGraphicsObjectCount()})}},{key:"getGraphicsObjectByIndex",value:function(e){var t=this;return this.parsedPage().then(function(n){if(e>=n.GetGraphicsObjectCount())return null;var r=n.GetGraphicsObjectBI(e);return t.JR.graphicsObjectManager.get(r,n,t)})}},{key:"getGraphicsObjectsInRect",value:function(e,t,n){var r=this,i=new this.engine.CFX_FloatRect(e.left,e.bottom,e.right,e.top);i.Inflate(t,t);var a=[],o=this.JR.graphicsObjectManager;return this.parsedPage().then(function(e){for(var t=0,s=e.GetGraphicsObjectCount();t<s;t++){var c=e.GetGraphicsObjectBI(t),u=c.GetRect(),d=(c=o.get(c,e,r)).getType();if(-1!==d&&((n==d||0==n||5==d)&&i.Contains(u))){if(0==n&&d<4){a.push(c);continue}if(0==n&&d>3)continue;var h;if(5!=n&&5==d)(h=a).push.apply(h,(0,l._)(c.getGraphicsObjectsInRect(i,n,o)));else a.push(c)}}return i.delete(),a})}},{key:"getGraphicsObjectsByRect",value:function(e,t,n){var r=this,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[],o=this.JR.graphicsObjectManager;return this.parsedPage().then(function(s){for(var c=0,u=s.GetGraphicsObjectCount();c<u;c++){var d=new r.engine.CFX_FloatRect(e.left,e.bottom,e.right,e.top);d.Inflate(t,t);var h=s.GetGraphicsObjectBI(c),f=h.GetRect(),g=(h=o.get(h,s,r)).getType();if(-1!==g&&(n==g||0==n||5==g)){var p=!1;if(i?p=d.Contains(f):(d.Intersect(f),p=f.Contains(d)),p){if(0==n&&g<=4){a.push(h);continue}if(0==n&&g>3)continue;var v;if(5!=n&&5==g)(v=a).push.apply(v,(0,l._)(h.getGraphicsObjectsInRect(d,n,o)));else a.push(h)}d.delete()}}return a})}},{key:"getGraphicsObjectAtPoint",value:function(e,t,n){var r=this,i=(0,u._)(e,2),a=i[0],o=i[1];return this.parsedPage().then(function(e){var i=r.engine,s=i.GraphicsObjectType,c=new i.PointF(a,o),u=Promise.all([e.GetGraphicsObjectsAtPoint(c,t,s.values[n]),e]);return c.delete(),u}).then(function(e){return r.checkPathObjects(e,a,o,n,t)})}},{key:"checkPathObjects",value:function(e,t,n,r,i){var a=this,s=(0,u._)(e,2),c=s[0],l=s[1];if(c){var d,h;(0,o._)(c,Array)?(d=c.length,h=function(e){return c[e]}):(d=c.GetSize(),h=function(e){return a.JR.graphicsObjectManager.get(c.GetAt(e),l,a)});for(var f=d-1;f>=0;f--){var g=h(f);if(5===g.getType()){var p=this.checkPathObjects([g.getGraphicsObjectsAtPoint(t,n,r,i,this.JR.graphicsObjectManager),l],t,n,i);if(p)return p}else{if(2!==g.getType())return g;if(g.isPointInLine(t,n,i))return g}}}}},{key:"addWatermark",value:function(){var e,t,n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this.engine,a=this.doc,o=r.type,s=r.watermarkSettings,c=(s=Object.assign({position:"Center",offsetX:0,offsetY:0,flags:2,scaleX:1,scaleY:1,rotation:45,opacity:100},s))&&S.createWatermarkSettings(i,s.position,s.offsetX,s.offsetY,s.flags,s.scaleX,s.scaleY,s.rotation,s.opacity);if("bitmap"===o.toLocaleLowerCase())e=y.createBitmapWatermark(i,a,r.bitmap,c);else if("text"===o.toLocaleLowerCase()){var u=r.watermarkTextProperties;t=(u=Object.assign({font:0,fontSize:20,color:0,fontStyle:"normal",lineSpace:10,alignment:"center"},u))&&b.createWatermarkTextProperties(i,u.font,u.fontSize,u.color,u.fontStyle,u.lineSpace,u.alignment),e=y.createTextWatermark(i,a,r.text,t,c)}return this.parsedPage().then(function(t){try{var r;return e&&e.InsertToPage(t),1===s.flags&&(n.annotationIDArray=n._prepareAnnotations(t),r=n.annotManager.get(t.GetAnnot(0),n,0)),n.reParsePage().then(function(n){return t.GenerateContent(),1===s.flags?r.toJson():e})}catch(e){isNaN(e)||(e=i.getErrorCode(e)),console.warn(e)}})}},{key:"pasteAnnot",value:function(e,t){var n=this.engine,r=e.GetRect(),i=r.Width(),a=r.Height();r.left=t.x,r.top=t.y,r.right=t.x+i,r.bottom=t.y-a;var o=e.GetType(),s=this.page.GetWidth(),c=this.page.GetHeight();r.right>s&&(r.right=s-1,r.left=r.right-i),r.top>c&&(r.top=c-1,r.bottom=r.top-a);var u=this.page.AddAnnot(o,r),l=e.GetDict();l.HasKey((0,I.n5)(n,"ca"))||u.GetDict().RemoveAt((0,I.n5)(n,"ca"));var d=(0,I.n5)(n,"AP");l.GetElement(d)||e.ResetAppearanceStream(),n.copyAnnot(u,e,this.doc);var h=this.JR.annotManager.get(u,this,u.GetIndex());u=h.annot,D.Z.updateModifyTime(n,u),h.setCreateDateTime&&h.setCreateDateTime(new Date);var f=[h];if(u.IsMarkup()){var g=new n.Markup(e);se(h,g,f),g.delete()}var p=n.AnnotType,v=u.GetType();if(u.IsMarkup()&&v!=p.e_FreeText&&v!=p.e_Sound){var _=this.page.AddAnnot(p.e_Popup,u.GetRect()),y=new n.Markup(u),S=new n.Popup(_);y.SetPopup(S),f.push(this.JR.annotManager.get(_,this,_.GetIndex())),S.delete(),y.delete()}if(f.forEach(function(e){return e.setUniqueId((0,m.Z)())}),o==p.e_FreeText){var b=new n.FreeText(e),A=new n.FreeText(u);A.SetDefaultAppearance(b.GetDefaultAppearance()),A.delete(),b.delete()}return this.reloadAnnots(),f}},{key:"calcContentBBox",value:function(e){return this.parsedPage().then(function(t){var n={},r=t.CalcContentBBox({value:e});return r&&(r.Normalize(),n={left:r.left,bottom:r.bottom,right:r.right,top:r.top}),n})}},{key:"setSize",value:function(e,t){this.page.SetSize(e,t)}},{key:"setBox",value:function(e,t){var n=this.engine,r=new(0,n.CFX_FloatRect)(t.left,t.bottom,t.right,t.top);this.page.SetBox(n.BoxType.values[e],r)}},{key:"getBox",value:function(e){var t,n=this.page.GetBox(this.engine.BoxType.e_MediaBox);if(e===this.engine.BoxType.e_MediaBox.value)t=n;else{var r=this.page.GetBox(this.engine.BoxType.e_CropBox);if(r=r.IsEmpty()?n:r,e===this.engine.BoxType.e_CropBox.value)t=r;else if(e===this.engine.BoxType.e_TrimBox.value){var i=this.page.GetBox(this.engine.BoxType.e_TrimBox);t=i=i.IsEmpty()?r:i}else if(e===this.engine.BoxType.e_ArtBox.value){var a=this.page.GetBox(this.engine.BoxType.e_ArtBox);t=a=a.IsEmpty()?r:a}else if(e===this.engine.BoxType.e_BleedBox.value){var o=this.page.GetBox(this.engine.BoxType.e_BleedBox);t=o=o.IsEmpty()?r:o}}return t?(t.Normalize(),{left:t.left,bottom:t.bottom,right:t.right,top:t.top}):{}}},{key:"getAnnotsByObjectNumber",value:function(e){}},{key:"addAnnot",value:function(e){var t=this,n=(0,f.dD)(),r=e;return this.parsedPage().then(function(n){var r=t.engine,i=(0,p.M)(r,e.type),a=v(r,e.rect),o=n.AddAnnot(i,a);if("freetext"===e.type){var s=new r.FreeText(o),c=s.GetBorderInfo();e.intent&&e.intent.toLowerCase()==="FreeTextTypewriter".toLowerCase()?c.style=r.BorderInfoStyle.e_NoBorder:(s.SetBorderColor(4294901760),c.width=1,c.style=r.BorderInfoStyle.e_Solid),c.intensity=0,c.dash_phase=0,s.SetBorderInfo(c)}var u=t.annotManager.get(o,t,n.GetAnnotCount()-1).create(e);return u||(n.RemoveAnnot(o),u=[]),u}).then(function(e){var n,i=[];return e.forEach(function(e){r.isCutPasteCreate&&e.getType()===r.type&&t._setAnnotInfoForCutPaste(e,r,i),t._setAnnotIdAt(e.getId(),e.getIndex())}),(n=e).push.apply(n,(0,l._)(i)),e},function(e){return isNaN(e)||(e=t.engine.getErrorCode(e)),n.reject(e),n.promise})}},{key:"_setAnnotInfoForCutPaste",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;["borderColor","borderInfo","content","iconName","intent","opacity","subject","title"].forEach(function(n){var r="set".concat(n[0].toUpperCase()).concat(n.substr(1));e[r]&&e[r](t[n])});var r=t.customEntries,i=void 0===r?{}:r,a=t.repliesSummary,o=void 0===a?[]:a;if(Object.keys(i).length)for(var s in i)Object.hasOwnProperty.call(i,s)&&e.setDictionaryEntry&&e.setDictionaryEntry(s,i[s]);o&&o.length&&o.forEach(function(t){if(e.addReplyContent){var r=e.addReplyContent(t.content);n.push(r)}})}},{key:"getAnnotIdArrayByOrder",value:function(){var e=this;return this.parsedPage().then(function(t){var n=[],r=e.engine,i=new r.TabOrderMgr(t);i.SetDefaultOrderType(r.OrderType.e_Row);for(var a=i.GetFirstAnnot();!a.IsEmpty();){var o=a.GetDict().GetObjNum();n.push(o),a=i.GetNextAnnot(a)}return i.delete(),n})}},{key:"getPageDictionary",value:function(){var e=this.pdfDoc.dictionaryMap[this.id];if(e)return e.toJson();var t=this;return this.parsedPage().then(function(e){var n=e.GetDict(),r=new C.Z(t.pdfDoc);return t.pdfDoc.updateDictCache(n,r),t.pdfDoc.updateDictMap(t.id,r),r.toJson()})}},{key:"createWebLinks",value:function(e){var t=this,n=new this.engine.CDP_WebLinksTransferLayer,r=0,i=[],a=!0,o=!1,s=void 0;try{for(var c,u=e[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value,d=n.CreateWebLinks(this.doc,l);d>0&&i.push(l),r+=d}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return i.reduce(function(e,n){return e.then(function(){return t.pdfDoc.getPageByIndex(n)}).then(function(e){return e.parsedPage().then(function(t){t.UpdateAnnotList(),e.reloadAnnots()})})},Promise.resolve()).then(function(){return r})}},{key:"removeWebLinks",value:function(e){var t=this,n=new this.engine.CDP_WebLinksTransferLayer,r=0,i=[],a=!0,o=!1,s=void 0;try{for(var c,u=e[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value,d=n.RemoveAllLinksInPage(this.doc,l);d>0&&i.push(l),r+=d}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return i.reduce(function(e,n){return e.then(function(){return t.pdfDoc.getPageByIndex(n)}).then(function(e){return e.parsedPage().then(function(t){t.UpdateAnnotList(),e.reloadAnnots()})})},Promise.resolve()).then(function(){return r})}},{key:"deleteDestination",value:function(e){var t=new this.engine.CNP_Destinations(this.doc),n=(0,I.Dp)(this.engine,e);return t.Delete(n),t.delete(),this.pdfDoc.getDestinationsArray()}},{key:"renameDestination",value:function(e,t){var n=new this.engine.CNP_Destinations(this.doc),r=n.GetDestination((0,I.Dp)(this.engine,e)),i=n.Rename(r,(0,I.Dp)(this.engine,e),(0,I.Dp)(this.engine,t));return n.delete(),i}},{key:"createDestination",value:function(e,t){var n=new this.engine.CNP_Destinations(this.doc),r=new this.engine.WString(e),i=new this.engine.FloatArray;n.New(r,this.engine.ZoomMode.e_ZoomFitPage,t,i);var a=[],o={title:e,page:t};return a.push(o),r.delete(),i.delete(),a}},{key:"resetDestination",value:function(e,t){var n=new this.engine.CNP_Destinations(this.doc),r=new this.engine.WStringArray,i=new this.engine.Int32Array,a=new this.engine.Int32Array;n.GetAllDestinations(r,i,a);var o=new this.engine.WString(e),s=new this.engine.FloatArray;return n.SetDest(o,this.engine.ZoomMode.e_ZoomFitPage,t,s),r.RemoveAll(),a.RemoveAll(),this.pdfDoc.getDestinationsArray()}},{key:"addAnnotObjects",value:function(e){var t=this,n=this.engine,r=this.annotationIDArray.length,i=this.page.GetDict(),a=(0,I.n5)(n,"Annots"),o=i.GetElement(a);o||(o=n.PDFArray.Create(),i.SetAt(a,o));var s=o.GetDirectObject().GetArray();e.forEach(function(e){s.AddElement(n.PDFObject.CreateReference(t.doc,e))}),this.reloadAnnots();for(var c=[],u=r;u<this.page.GetAnnotCount();u++){var l=this.page.GetAnnot(u);c.push(l.GetDict().GetObjNum())}return this.getAnnots(c)}},{key:"clearDesignerAssitCache",value:function(){this.designerCache&&(this.designerCache.forEach(function(e){e.bitmap.isDeleted()||e.bitmap.delete()}),this.designerCache=[])}},{key:"getSuggestedFormDesignerRect",value:function(e){var t=this;return this.parsedPage().then(function(n){return t.fullyBitmap.getCurrentImageData().then(function(r){var i,a=new t.engine.PointF(e[0],e[1]),o=n.GetSuggestedRect(r.bitmap,r.matrix,a);return a.delete(),i=o&&!o.IsEmpty()?{left:o.left,right:o.right,top:o.top,bottom:o.bottom}:{left:0,right:0,top:0,bottom:0},o&&o.delete(),i})})}},{key:"getSnappedPoint",value:function(e,t){var n=this;if(!t||!Array.isArray(t)||0===t.length)return Promise.resolve(e);var r=0,i=this.engine.SnapPointFlags;return t.forEach(function(e){switch(e){case G.EndPoint:r|=i.e_FlagEndpoint.value;break;case G.MidPoint:r|=i.e_FlagMidpoint.value;break;case G.IntersectionPoint:r|=i.e_FlagIntersectionPoint.value;break;case G.NearestPoint:r|=i.e_FlagNearestPoint.value}}),0===r?Promise.resolve(e):this.parsedPage().then(function(t){var i,a,o,s,c;try{if(i=new n.engine.SnapPointMgr(t),a=new n.engine.PointF(e.x,e.y),(o=i.GetSnappedPointAtPos(a,r)).IsEmpty())return e;switch(c=o.GetType().value){case 1:c=G.EndPoint;break;case 2:c=G.MidPoint;break;case 3:c=G.IntersectionPoint;break;case 4:c=G.NearestPoint}return{x:(s=o.GetPoint()).x,y:s.y,type:c}}finally{i&&i.delete(),a&&a.delete(),o&&o.delete(),s&&s.delete()}})}},{key:"getTextRectCount",value:function(){return this.getNormalTextPage().then(function(e){try{return e.GetTextRectCount(0,-1)}finally{}})}},{key:"getTextByRectIndex",value:function(e){if("number"!=typeof e)throw new Error("Text rect index must be number, but actual: ".concat(void 0===e?"undefined":(0,d._)(e)));if((e=Math.floor(e))<0)throw new Error("Text rect index must be greater than -1, but actual: ".concat(e));return this.getNormalTextPage().then(function(t){var n,r;try{var i=t.GetTextRectCount(0,-1);if(e>=i)throw new Error("Text rect index must be less than the total count of text rects(".concat(e,"), but actual ").concat(e,"."));return n=t.GetTextRect(e),{text:(r=t.GetTextInRect(n)).toString(),rect:{left:n.left,right:n.right,top:n.top,bottom:n.bottom}}}finally{n&&n.delete(),r&&r.delete()}})}},{key:"getViewportRect",value:function(){return this.parsedPage().then(function(e){var t=e.GetViewPortBox();return{left:t.left,right:t.right,top:t.top,bottom:t.bottom}})}},{key:"getMeasureScaleRatio",value:function(){return this.parsedPage().then(function(e){var t=e.GetMeasureXScale(),n=e.GetMeasureXUnit().toString();return{scale:t,ratio:e.GetMeasureRatio().toString(),unit:n}})}},{key:"setMeasureRatio",value:function(e,t){var n=this,r=t.unit,i=t.ratio,a=t.scale;return this.parsedPage().then(function(t){return Promise.all([t.SetCalibration(e,(0,I.n5)(n.engine,r),(0,I.n5)(n.engine,i),a),t])}).then(function(e){for(var t=(0,u._)(e,2),o=t[0],s=t[1],c=[],l=0;l<o.GetSize();l++){var d=o.GetAt(l);c.push(d)}for(var h=s.GetAnnotCount(),f=0;f<h;f++){var g=s.GetAnnot(f);if(!g.IsEmpty()){var p=n.annotManager.get(g,n,f),v=p.getId();if(!c.includes(v)&&p.annot.GetIntent){var m=n.JR.getPDFString(p.annot.GetIntent());if(/Dimension/.test(m)){var _=i.split(" = ").map(function(e){var t=e.split(" ");return{value:t[0],unit:t[1]}});p.setMeasureRatio({userSpaceValue:_[0].value,userSpaceUnit:_[0].unit,realValue:_[1].value,realUnit:_[1].unit}),p.setMeasureConversionFactor(a),p.setMeasureUnit(r),c.push(v)}}}}return c})}},{key:"getCanonicalString",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e){var r=new this.engine.WString(e),i=this.engine.TextSearchUtils.CanonicalFindText(r,t,n),a=i.canonical_text?i.canonical_text.toString():"";return r.delete(),a}}},{key:"searchTextPage",value:function(e,t,n){return(0,r._)(function(){var r,i,a,o,c,u,l,d,f,g,p,v,m,_,y,S,b,I,A,P;return(0,h.Jh)(this,function(h){switch(h.label){case 0:return r=this,i=!t.wholeWordsOnly&&!t.caseSensitive&&t.stemming,t.regExp?[2,this.regFind(e,t,n)]:[4,this._getPage(this.index)];case 1:return h.sent(),[4,this.getNormalTextPage(1)];case 2:if(a=h.sent(),o=a.GetCharCount(),c=a.GetChars(0,o).toString(),u=c.normalize(),l=c,d=null,t.isIgnoreDiacritics||t.isIgnoreAsia){for(f=new this.engine.WString(l),g=this.engine.TextSearchUtils.CanonicalFindText(f,t.isIgnoreAsia,t.isIgnoreDiacritics),l=g.canonical_text.toString(),p=g.text_index_of_len_array,v=[],d=[],m=0;m<=p.GetSize();m++)v[m]=0===m?0:v[m-1]+p.GetAt(m-1),d[v[m]]=m;for(_=0;_<d.length;_++)void 0===d[_]&&(d[_]=d[_-1]);f.delete()}for(t.caseSensitive||(l=l.toLowerCase()),y=l.normalize(),S=[0],b=1;b<y.length;b++)I=S[b-1],l[b+I]==y[b]?S[b]=I:S[b]=I+1;return l=y,A={},P=function(e,n){var r=a.CharIndexFromTextIndex(e),i=a.CharIndexFromTextIndex(e+n.length),o=a.GetChars(e,n.length).toString();t.caseSensitive||(o=o.toLowerCase());var s=a.GetChars(r,i-r).toString();t.caseSensitive||(s=s.toLowerCase());var c=!1;return o===n?c=!0:s==n&&(e=r,c=!0),{pos:e,isFind:c}},e.forEach(function(e){var o=function(){var o=r.getCanonicalString(l[v-1]),u=r.getCanonicalString(l[v+m.length]),g=i?h.length:m.length;if(t.wholeWordsOnly&&(/[0-9a-zA-Z]/.test(o)&&void 0!==o||/[0-9a-zA-Z]/.test(u)&&void 0!==u)){var p=(0,x.CL)(l,h,t,v+1),_=p.pos,y=p.matchedText;return v=_,m=y,"continue"}var b=d?d[v+S[v]]:v+S[v];b=P(b,i?h:m).pos;var I=a.GetChars(b,1).toString();t.caseSensitive||(I=I.toLowerCase());var D=a.GetTextRectCount(b,g);if(D>0){for(var E=[],C=!0,w=0;w<D;w++){var k=a.GetTextRect(w);n&&C&&!r.hasRedactAnnot(k)&&(C=!1),E.push({left:k.left,right:k.right,top:k.top,bottom:k.bottom})}var T=0,F=0;if(d){T=(0,x.Tg)(a,b).normalize();var G=v+g;G=d?d[G+S[G]]:G+S[G],G=P(G,i?h:m).pos,F=(0,x.xF)(a,G).normalize();0,A[d[v]]=(0,s._)({startText:T,endText:F,word:c.substr(b,G-b).normalize(),rects:E,type:"pageText",charIndex:d[v],isRedacted:C,pageIndex:r.page.GetIndex()},{})}else{T=(0,x.Tg)(a,v),F=(0,x.xF)(a,v+g);0,A[v]=(0,s._)({startText:T,endText:F,word:e,rects:E,type:"pageText",charIndex:v,isRedacted:C,pageIndex:r.page.GetIndex()},{})}if(i){var R=f.next();R.done?v=-1:(v=R.value.index,h=R.value.oriWord)}else{var O=v,M=v,N=!0,B=(0,x.CL)(l,h,t,v+h.length),L=B.pos,j=B.matchedText;for(v=L,m=j;N&&v<l.length;){var U=P(v,m);if(U.isFind&&U.pos<=O){M++;var W=(0,x.CL)(l,h,t,M+h.length),H=W.pos,K=W.matchedText;v=H,m=K}else U.isFind?(v=U.pos,N=!1):(M++,v=M)}}}else v=-1},h=e;t.caseSensitive||(h=h.toLowerCase()),(t.isIgnoreDiacritics||t.isIgnoreAsia)&&(h=r.getCanonicalString(h,t.isIgnoreAsia,t.isIgnoreDiacritics));for(var f,g=0,p=(0,x.CL)(l,h,t,g),v=p.pos,m=p.matchedText,_=!0;_&&v<l.length;){var y=P(v,m);y.isFind?(v=y.pos,_=!1):(g++,v=g)}if(i){var b=(f=(0,x.nT)(r.engine,h,u)).next();b.done?v=-1:(v=b.value.index,h=b.value.oriWord)}for(;-1!=v&&v<l.length;)o()}),[2,Object.keys(A).sort(function(e,t){return e-t}).map(function(e,t){return A[e].index=t,A[e]})]}})}).call(this)}},{key:"searchAnnot",value:function(e,t,n){return(0,r._)(function(){var r,i,a,o,s;return(0,h.Jh)(this,function(c){switch(c.label){case 0:return r=this,i=!t.wholeWordsOnly&&!t.caseSensitive&&t.stemming,t.regExp?[2,this.regFind(e,t,n)]:(a=[],o=0,[4,this.getAnnots()]);case 1:return s=c.sent(),t.includeComments||(s=s.filter(function(e){return"widget"===e.getType()})),s.length<1?[2,a]:(e.forEach(function(e){var c=e;(t.isIgnoreDiacritics||t.isIgnoreAsia)&&(c=r.getCanonicalString(c,t.isIgnoreAsia,t.isIgnoreDiacritics)),t.caseSensitive||(c=c.toLowerCase()),s.forEach(function(s,u){var l=s.annot,d=s.getType();if("widget"===d||!n){d=d[0].toUpperCase()+d.substr(1);var h=l.GetContent().toString(),f="annot";if("widget"===d.toLowerCase()){f="form";var g=new r.engine.TextPage.CreateFromAnnot(l);if(g.IsEmpty())return;var p=g.GetCharCount();h=g.GetChars(0,p).toString(),g.delete()}var v=[h];l.IsMarkup()&&v.push(l.GetTitle().toString()),n||v.push(d);var m=!0,_=!1,y=void 0;try{for(var S,b=v[Symbol.iterator]();!(m=(S=b.next()).done);m=!0){var I=S.value;if("string"==typeof I){var A=I,P=null;if(t.isIgnoreDiacritics||t.isIgnoreAsia){var D=new r.engine.WString(I),E=r.engine.TextSearchUtils.CanonicalFindText(D,t.isIgnoreAsia,t.isIgnoreDiacritics);I=E.canonical_text.toString();var C=E.text_index_of_len_array,w=[];P=[];for(var k=0;k<=C.GetSize();k++)w[k]=0===k?0:w[k-1]+C.GetAt(k-1),P[w[k]]=k;for(var T=0;T<P.length;T++)void 0===P[T]&&(P[T]=P[T-1]);D.delete()}t.caseSensitive||(I=I.toLowerCase());var F=I.indexOf(c,0),G=void 0;if(i){var R=(G=(0,x.nT)(r.engine,e,A)).next();R.done?F=-1:(F=R.value.index,c=R.value.oriWord)}for(;-1!==F;){var O=I[F-1],M=I[F+c.length];if(t.wholeWordsOnly&&(/[0-9a-zA-Z]/.test(O)&&void 0!==O||/[0-9a-zA-Z]/.test(M)&&void 0!==M))if(i){var N=G.next();N.done?F=-1:(F=N.value.index,c=N.value.oriWord)}else F=I.indexOf(c,F+1);else{var B=void 0,L=void 0,j=void 0,U=l.GetRect(),W=!0;n&&W&&!r.hasRedactAnnot(U)&&(W=!1),P?(B=(0,x.Tg)(A,P[F]),L=(0,x.xF)(A,P[F]+c.length),j=P[F]):(B=(0,x.Tg)(A,F),L=(0,x.xF)(A,F+c.length),j=F);var H=[];if("Widget"==d){for(var K=new r.engine.TextPage.CreateFromAnnot(l),z=j,V=c.length,J=K.GetTextRectCount(z,V),Y=0;Y<J;Y++){var Z=K.GetTextRect(Y);H.push({left:Z.left,right:Z.right,top:Z.top,bottom:Z.bottom})}K.delete()}else H.push({left:U.left,right:U.right,top:U.top,bottom:U.bottom});if(a.push({index:++o,type:f,id:l.GetDict().GetObjNum(),pageIndex:r.page.GetIndex(),startText:B,endText:L,word:A.substr(j,c.length),charIndex:j,isRedacted:W,rects:H}),i){var q=G.next();q.done?F=-1:(F=q.value.index,c=q.value.oriWord)}else F=I.indexOf(c,F+1)}}}}}catch(e){_=!0,y=e}finally{try{m||null==b.return||b.return()}finally{if(_)throw y}}}})}),[2,a])}})}).call(this)}},{key:"search",value:function(e,t,n){return(0,r._)(function(){var r,i,a;return(0,h.Jh)(this,function(o){switch(o.label){case 0:return this.pdfDoc.isDynamicXFA()?[2,[]]:(r=[],i=[],a=!0,[4,this.searchTextPage(e,t,n)]);case 1:r=o.sent(),o.label=2;case 2:return a?[4,this.searchAnnot(e,t,n)]:[3,4];case 3:i=o.sent(),o.label=4;case 4:return[2,(0,l._)(r).concat((0,l._)(i))]}})}).call(this)}},{key:"regFind",value:function(e,t,n){var r=this;return e=e.map(function(e){var t=e.split("+++");return r.engine.TextSearchUtils.GetRegularExpression({value:ie[t[0]]},{value:ae[t[1]]}).toString()}),this.getNormalTextPage().then(function(i){var a=i.GetCharCount(),o=i.GetChars(0,a).toString();if(t.isIgnoreDiacritics||t.isIgnoreAsia){var s=new r.engine.WString(o),c=r.engine.TextSearchUtils.CanonicalFindText(s,t.isIgnoreAsia,t.isIgnoreDiacritics);o=c.canonical_text.toString(),s.delete()}var u={};e.forEach(function(e){var t=r;o.replaceAll(new RegExp(e,"gi"),function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];for(var s=r[0],c=(r[1],r[r.length-2]),l=i.GetTextRectCount(c,s.length),d=[],h=!0,f=0;f<l;f++){var g=i.GetTextRect(f);n&&h&&!t.hasRedactAnnot(g)&&(h=!1),d.push({left:g.left,right:g.right,top:g.top,bottom:g.bottom})}var p,v=c;if(v)for(var m=0;!/\s/.test(o[v]);){if(--v<=0){v--;break}if(!m){for(;/\s/.test(o[v]);)v--;m=1}}p=o.substr(v+1,c-v-1);var _;if((v=s.length+c+30)<o.length){for(var y=0;!(/\s/.test(o[v])||++v>=o.length);)if(!y&&/\s/.test(o[v])){for(;/\s/.test(o[v]);)v++;y=1}}else v=o.length;_=o.substr(s.length+c,v-s.length-c),u[c]={word:s,pageIndex:t.page.GetIndex(),type:"pageText",startText:p,charIndex:c,endText:_,rects:d,isRedacted:h}})});var l=Object.keys(u).sort(function(e,t){return e-t}).map(function(e,t){return u[e].index=t,u[e]}),d={},h=0;return r.getAnnots().then(function(n){return e.forEach(function(e){n.forEach(function(n,i){var a=n.annot,o=n.getType();o=o[0].toUpperCase()+o.substr(1);var s=a.GetContent().toString();if("Widget"==o||t.includeComments){var c=a.GetRect(),u=[];if("Widget"==o){var l=r,f=new r.engine.TextPage.CreateFromAnnot(a);if(f.IsEmpty())return;var g=f.GetCharCount();(s=f.GetChars(0,g).toString()).replaceAll(new RegExp(e,"gi"),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=(t[1],t[t.length-2]),o=(0,x.Tg)(s,i),c=(0,x.xF)(s,i+r.length);u=[];for(var g=f.GetTextRectCount(i,r.length),p=0;p<g;p++){var v=f.GetTextRect(p);u.push({left:v.left,right:v.right,top:v.top,bottom:v.bottom})}d[h++]={type:"form",id:a.GetDict().GetObjNum(),pageIndex:l.page.GetIndex(),word:r,rects:u,startText:o,endText:c}}),f.delete()}else{u=[{left:c.left,right:c.right,top:c.top,bottom:c.bottom}];[o,a.IsMarkup()&&a.GetTitle().toString(),s].forEach(function(t){if(!t)return!1;new RegExp(e,"g").test(t)&&(d[h++]={type:"annot",id:a.GetDict().GetObjNum(),pageIndex:r.page.GetIndex(),word:s,rects:u})})}}})}),Object.keys(d).sort(function(e,t){return e-t}).forEach(function(e,t){d[e].index=t,l.push(d[e])}),l})})}},{key:"markRedactByAnnotId",value:function(e,t,n,r){var i=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return this.getNativeAnnotById(e).then(function(e){if(e){var o=new i.engine.TextPage.CreateFromAnnot(e);return i.markRedactEx(o,t,n,r,a,!0)}return Promise.resolve()})}},{key:"markRedact",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.getNormalTextPage().then(function(a){return r.markRedactEx(a,e,t,n,i,!1)})}},{key:"markRedactEx",value:function(e,t,n,r){for(var i=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=e.GetTextRectCount(t,n),l=[],d=0;d<u;d++){var h=e.GetTextRect(d);l.push({left:h.left,right:h.right,top:h.top,bottom:h.bottom})}return this.markRedactAnnot(l).then(function(t){if(r.length){var n=t[0].annot;n.SetOverlayText((0,I.Dp)(i.engine,r));var u=i.engine,l=7;a.autoSize&&(n.SetAutoFontSize(a.isAutoSize),l=3);var d=new u.DefaultAppearance(l,new u.Font(u.StandardID.e_StdIDCourier),8,16711680);n.SetDefaultAppearance(d),n.ResetAppearanceStream()}return o&&e.delete(),t.forEach(function(e){if("redact"==e.getType()){var t=a.defaultAppearance,n=(0,c._)(a,["defaultAppearance"]);e.setRedactAppearance((0,s._)({},t,n))}}),t})}},{key:"handleGroupMarkup",value:function(e,t){var n=this;return this.getAnnots(e).then(function(e){if(t){var r=new n.engine.MarkupArray;return e.forEach(function(e){return r.Add(e.annot)}),n.page.SetAnnotGroup(r,0),e.reduce(function(e,t){return e[t.getId()]=t.toJson(),e},{})}return e.reduce(function(e,t){return t.annot.Ungroup(),e[t.getId()]=t.toJson(),e},{})})}},{key:"hasRedactAnnot",value:function(e){for(var t=Math.max,n=Math.min,r=this.page.GetAnnotCount(),i=0;i<r;i++){var a=this.page.GetAnnot(i);if(27==a.GetType().value){var o=a.GetRect();if(t(o.left,e.left)<n(o.right,e.right)&&t(o.bottom,e.bottom)<n(o.top,e.top))return!0}}return!1}},{key:"_getTransitionDirectionByDic",value:function(e,t){var n=this.engine,r="",i=e.GetElement((0,I.n5)(n,"Dm")),a=e.GetElement((0,I.n5)(n,"M")),o=e.GetElement((0,I.n5)(n,"Di")),s=!0,c=!0;switch(a&&(c="O"!==a.GetString().toString()),i&&(s="V"!==i.GetString().toString()),t){case"Split":r=s?c?0:1:c?2:3;break;case"Blinds":r=s?0:1;break;case"Box":r=c?0:1;break;case"Wipe":case"Glitter":case"Push":case"Cover":case"Uncover":if(r=0,null===o)return r;r=o.GetInteger()/45%8;break;case"Fly":if(r=0,null===o)return r;r={0:0,90:1,180:2,270:3}[o.GetInteger()]||0}return r}},{key:"getPageTransition",value:function(){var e=this.page.GetDict(),t=this.engine,n=(0,I.n5)(t,"Trans"),r="",i="",a="",o=e.GetElement(n);if(o&&(o.GetType()==t.PDFObjectType.e_Reference&&(o=o.GetDirectObject()),o.GetType()==t.PDFObjectType.e_Dictionary)){var s=o.GetDict();if(s){var c=(0,I.n5)(t,"S"),u=s.GetElement(c),l=s.GetElement((0,I.n5)(t,"D"));l&&(a=l.GetFloat()),u&&(r=u.GetString().toString(),i=this._getTransitionDirectionByDic(s,r))}}return{transitionName:r,speed:a=a-.333328<.001&&a-.333328>-.001?2:a-.666656<.001&&a-.666656>-.001?1:0,direction:i}}},{key:"isScannedPage",value:function(){var e=this.page,t=this.engine.GraphicsObjectType.e_TypeAll;if(!e.IsParsed())return!1;if(e.GetGraphicsObjectCount()<=0)return!1;for(var n=e.GetLastGraphicsObjectPosition(t);n;){var r=e.GetGraphicsObject(n).GetType().value;if(2!==r&&3!==r)return!1;n=e.GetPrevGraphicsObjectPosition(n,t)}return!0}},{key:"getTextInRect",value:function(e,t){var n=e.left,r=e.right,i=e.top,a=e.bottom,o=this,s=new this.engine.CFX_FloatRect(n,a,r,i);switch(t){case 0:return c().then(function(e){return u().then(function(t){return s.delete(),{pageText:e,fieldsText:t}})});case 1:return c().then(function(e){return s.delete(),{pageText:e}});case 2:return u().then(function(e){return s.delete(),{fieldsText:e}})}function c(){return o.getNormalTextPage().then(function(e){return e.GetTextInRect(s).toString()}).catch(function(e){return null})}function u(){return o.getAnnots().then(function(e){var t=[];return e.forEach(function(e){var n,r,i=e.annot,a=e.getType();if("Widget"==(a=a[0].toUpperCase()+a.substr(1))){var c=i.GetRect();if(n=c,(r=s).right<n.left||r.left>n.right||r.bottom>n.top||r.top<n.bottom)return;var u=new o.engine.TextPage.CreateFromAnnot(i),l={x:Math.max(s.left,c.left),y:Math.min(s.top,c.top)},d={x:Math.min(s.right,c.right),y:Math.max(s.bottom,c.bottom)},h=new o.engine.CFX_FloatRect(0,0,Math.abs(d.x-l.x),Math.abs(d.y-l.y));t.push({id:i.GetDict().GetObjNum(),text:u.GetTextInRect(h).toString()}),u.delete(),h.delete()}}),t}).catch(function(e){return null})}}},{key:"transform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=this.engine,a=this.page,o=new i.Matrix(e,0,0,t,n,r),s=a.Transform(o,!0);return a.StartParse(0,null,!0),this.releaseTextPageAndTextLinks(),o.delete(),s}},{key:"addFakeAnnot",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.engine,r=e.GetObjNum(),i=this.fakeAnnots.find(function(e){return e.id==r});if(i)for(var a in t){var o;(o=i[a]).push.apply(o,(0,l._)(t[a]))}else{var s=e.GetElement((0,I.n5)(n,"T")).GetString().toString(),c=e.GetElement((0,I.n5)(n,"Subtype")).GetString().toString().toLowerCase(),u=e.GetElement((0,I.n5)(n,"M")).GetString().toString().match(RegExp("D:(?<year>\\d{4})(?<month>\\d\\d)(?<day>\\d\\d)(?<hour>\\d\\d)(?<minute>\\d\\d)(?<second>\\d\\d)\\+(?<timezone>\\d\\d)'00'"));if(u){var d=u.groups;u=Date.UTC(d.year,d.month,d.day,d.hour,d.minute,d.second)}else u=Date.now();this.fakeAnnots.push(Object.assign({title:s,type:c,onlyDict:!0,isMarkup:!0,rect:{left:0,right:0,top:0,bottom:0},modifiedTimestamp:u,id:r,groupElementsSummary:[],repliesSummary:[],markedStatesSummary:[],reviewStatesSummary:[]},t))}}},{key:"getFakeAnnots",value:function(){return this.fakeAnnots}},{key:"emitPageBatchProcessor",value:function(e){if(e.kind===K.EDIT_GRAPHICS_OBJECT)return this.handleEditGraphicsObjectBatchProcessor(e);throw new Error("Unknown operation kind: ".concat(e.kind))}},{key:"handleEditGraphicsObjectBatchProcessor",value:function(e){switch(e.action){case"start":return this.batchProcessor.start(K.EDIT_GRAPHICS_OBJECT);case"flush":return this.batchProcessor.flush(K.EDIT_GRAPHICS_OBJECT);case"end":return this.batchProcessor.end(K.EDIT_GRAPHICS_OBJECT)}}},{key:"clearRenderCache",value:function(){this.page&&this.page.ClearRenderCache()}},{key:"clearCacheObejcts",value:function(){if(this.page){if(!this.page.IsParsed()||this.needReParse)return;if(this.releaseTextPageAndTextLinks(),this.pdfDoc.pageEditor){if(this.pdfDoc.pageEditor.startEdit)return;if(this.pdfDoc.pageEditor.lastEditorPage)if(this.pdfDoc.pageEditor.PE.HasSelection()&&this.index===this.pdfDoc.pageEditor.selectionPageIndex)return;if(this.pdfDoc.pageEditor.hasUndoItems())return}if(this.pdfDoc.touchup){if(this.pdfDoc.touchup.isActivated)return;if(this.pdfDoc.touchup.hasUndoItems())return;if(this.pdfDoc.touchup.findReplaceCallback&&this.pdfDoc.touchup.findReplaceCallback.currTextRects.length>0&&this.index===this.pdfDoc.touchup.currentSelectionPageIndex)return}this.page.RemoveAllGraphicsObjects(),this.notifyTouchup(this.page),this.needReParse=!0,this.isCPageParsed=!1,this._parsedPagePromise=null}}},{key:"getWordCount",value:function(){return this.c_pagePromise.then(function(e){return e.GetWordCount()})}},{key:"changeAnnotOrder",value:function(e,t){var n=this;return this.parsedPage().then(function(r){return n.getAnnotById(e).then(function(e){var i=e.annot;switch(t){case P.Bo.FIRST:r.MoveAnnotToLast(i);break;case P.Bo.LAST:r.MoveAnnotToFirst(i);break;case P.Bo.PREV:r.MoveAnnotToNext(i);break;case P.Bo.NEXT:r.MoveAnnotToPrev(i)}n.reloadAnnots();var a=r.GetAnnotCount();return Array(a).fill(void 0).map(function(e,t){return r.GetAnnot(t).GetDict().GetObjNum()})})})}},{key:"moveAnnotOrder",value:function(e,t){var n=this;return this.parsedPage().then(function(r){return n.getAnnotById(e).then(function(e){var i=e.annot;r.MoveAnnotOrder(i,t),n.reloadAnnots();var a=r.GetAnnotCount();return Array(a).fill(void 0).map(function(e,t){return r.GetAnnot(t).GetDict().GetObjNum()})})})}},{key:"getAllPageTextLinks",value:function(){var e=this;return this.isTextLinksLoaded?Promise.resolve(this.textLinks):this.parsedPage().then(function(t){var n=e.getNormalTextPageSync(),r=new e.engine.PageTextLinks(n),i=[];if(!r.IsEmpty()){var a=r.GetTextLinkCount();if(a>0)for(var o=0;o<a;o++)i.push(r.GetTextLink(o));e.textLinks=i}return e.isTextLinksLoaded=!0,e.textLinks})}},{key:"getTextLinkAtPoint",value:function(e){var t=this;return this.parsedPage().then(function(n){var r=new t.engine.PointF(e[0],e[1]),i=n.GetAnnotAtPoint(r,8);if(!i.IsEmpty()&&i.GetType()===t.engine.AnnotType.e_Link){var a=new t.engine.Link(i),o=a.GetAction();if(!o.IsEmpty()&&o.GetType()===t.engine.ActionType.e_TypeURI){var s=new t.engine.URIAction(o),c=s.GetURI().toString();return a.delete(),s.delete(),c}}return t.getAllPageTextLinks().then(function(t){if(t.length>0){for(var n=0;n<t.length;n++){var r=t[n],i=r.GetRects(),a=i.GetSize();if(a>0)for(var o=0;o<a;o++){var s=i.GetAt(o),c=s.left,u=s.right,l=s.top,d=s.bottom;if(e[0]>c&&e[0]<u&&e[1]<l&&e[1]>d)return r.GetURI().toString()}}return""}return""})})}},{key:"getCheckBoxRectAtPoint",value:function(e,t){return(0,r._)(function(){var n,r,i;return(0,h.Jh)(this,function(a){switch(a.label){case 0:return[4,this.parsedPage()];case 1:return n=a.sent(),r=new this.engine.PointF(e.x,e.y),(i=n.GetCheckBoxRectAtPoint(r,t)).IsEmpty()?[2,null]:[2,{left:i.left,right:i.right,top:i.top,bottom:i.bottom}]}})}).call(this)}},{key:"getGSDKPage",value:function(){return this.pdfDoc.canGetXFA()?this.xfaDoc.GetPage(this.index):this.doc.GetPage(this.index)}},{key:"triggerAdditionalActions",value:function(e){return(0,r._)(function(){return(0,h.Jh)(this,function(t){switch(t.label){case 0:if(this.pdfDoc.canGetXFA())return[2];if(!(e>=$.n6.ANNOT_PAGE_OPENED&&e<=$.n6.ANNOT_PAGE_INVISIBLE))return[3,7];switch(e){case $.n6.ANNOT_PAGE_OPENED:return[3,1];case $.n6.ANNOT_PAGE_CLOSED:return[3,3]}return[3,5];case 1:return[4,this.triggerPageAdditionalAction($.n6.PAGE_OPENED)];case 2:return t.sent(),[3,5];case 3:return[4,this.triggerPageAdditionalAction($.n6.PAGE_CLOSED)];case 4:return t.sent(),[3,5];case 5:return[4,this.triggerAllAnnotsAdditionalActions(e)];case 6:t.sent(),t.label=7;case 7:return[2]}})}).call(this)}},{key:"triggerPageAdditionalAction",value:function(e){return(0,r._)(function(){return(0,h.Jh)(this,function(t){switch(t.label){case 0:return this.pdfDoc.canGetXFA()?[2]:[4,this.pdfDoc.actionAPIImpl.triggerAction({type:"page",pageIndex:this.index},e)];case 1:return t.sent(),[2]}})}).call(this)}},{key:"triggerAllAnnotsAdditionalActions",value:function(e){return(0,r._)(function(){var t,n,r,i,a,o,s,c,u,l,d,f;return(0,h.Jh)(this,function(h){switch(h.label){case 0:if(this.pdfDoc.canGetXFA())return[2];t=this.getGSDKPage(),n=this.engine,r=n.AnnotType,i=Array.from({length:t.GetAnnotCount()},function(e,n){return t.GetAnnot(n)}).filter(function(t){var n=t.GetType();switch(e){case $.n6.ANNOT_PAGE_VISIBLE:return n===r.e_Widget||!1;case $.n6.ANNOT_PAGE_INVISIBLE:return n===r.e_Widget||n===r.e_Screen;case $.n6.ANNOT_PAGE_OPENED:case $.n6.ANNOT_PAGE_CLOSED:return n===r.e_Link||n===r.e_Screen}}),a=this.pdfDoc,o=!0,s=!1,c=void 0,h.label=1;case 1:h.trys.push([1,6,7,8]),u=i[Symbol.iterator](),h.label=2;case 2:return(o=(l=u.next()).done)?[3,5]:(d=l.value,[4,a.actionAPIImpl.triggerAction({type:"annot",annot:d},e)]);case 3:h.sent(),h.label=4;case 4:return o=!0,[3,2];case 5:return[3,8];case 6:return f=h.sent(),s=!0,c=f,[3,8];case 7:try{o||null==u.return||u.return()}finally{if(s)throw c}return[7];case 8:return[2]}})}).call(this)}},{key:"splitTextInRect",value:function(e,t){var n=this;return this.parsedPage().then(function(r){for(var i=new n.engine.CFX_FloatRect(e.left,e.bottom,e.right,e.top),a=r.SplitTextsInRectangle(i,t),o=a.GetSize(),s=[],c=0;c<o;c++){var u=a.GetAt(c),l=u.GetRect();s.push({text:u.GetText().toString(),rect:{left:l.left,right:l.right,top:l.top,bottom:l.bottom},charCount:u.GetCharCount()})}return i.delete(),s})}}]),e}();var se=function(e,t,n){for(var r=t.GetReplyCount(),i=0;i<r;i++){var a=t.GetReply(i),o=a.GetContent(),s=e.addReply(o.toString());n.push(s),se(s,a,n)}};function ce(e,t,n,r,i,a,o){var s=Math.max(1,t),c=Math.max(1,n);a=a||0;var u=null;try{if((u=r?new e.Bitmap(s,c,e.DIBFormat.e_DIBArgb,a,0):new e.Bitmap(s,c,e.DIBFormat.e_DIBRgb32,a,0)).IsEmpty())throw u.delete(),new Error("create bitmap fail")}catch(e){throw self.postMessage({workflow:"OOM",type:"OOM",msg:{}}),e}var l,d,h,g,p,v=o||null;return i?(i=le(i),l=i,d=(0,f.dN)(l),h=d.r,g=d.g,p=d.b,i=d.a*Math.pow(2,24)+(p<<16|g<<8|h),u.FillRect(i,v)):u.FillRect(r?16777215:4294967295,v),u}function ue(e,t,n,r,i,a,o,s){var c=e.x,u=e.y,l=e.width,d=e.height,h=e.rotate,f=e.usage,g=e.pdfDoc,p=arguments.length>8&&void 0!==arguments[8]&&arguments[8],v=-257&a&-33,m=(0,E.q)(t,h);switch(h){case 270:case 90:var _=l;l=d,d=_}var y=n.GetDisplayMatrix(c,u,l,d,m),S=g.pageDisplayPreferences,b=!0,I=!1,A=!1;if(S)switch(b=S.smoothLineArtChecked,S.smoothText){case"forLaptop_LCDScreens":I=!0;break;case"monitor":I=!1;break;default:I=!1,A=!0}if(i.SetClearType(I),A&&i.SetRenderTextAntiAliasing(A),i.SetRenderPathAntiAliasing(b),a&t.ContentFlag.e_RenderPage.value&&S&&S.transparencyGridChecked&&i.RenderTransparencyGrid(n,y),!1===s&&(i.SetJPEGDownSample(!1),i.SetJPXDownSample(!1)),i.SetRenderContentFlags(v),"print"==f)i.EnableForPrint(!0);else{var P=!!(a&te);i.SetRenderFormField(P),i.SetRenderSignature(!0)}if(p)return[0,2,y];M.Z.startTick(300);var D=g.canGetXFA()?i.StartRenderXFAPage(n.Handle?n.Handle():n,y,g.isXFAHighlighted,null):i.StartRender(n,y,t.PauseCallback.implement(M.Z)),C=D.GetRateOfProgress();if(o){for(var w=t.ProgressiveState.e_ToBeContinued;100!==C&&w!==t.ProgressiveState.e_Finished;)w=D.Continue(),C=D.GetRateOfProgress();C=100}return[D,(100==C?t.ProgressiveState.e_Finished:-1==C?t.ProgressiveState.e_Error:t.ProgressiveState.e_ToBeContinued).value,y]}function le(e){var t=(0,f.dN)(e),n=t.r,r=t.g,i=t.b,a=t.a/255;return n=n*a+255*(1-a),r=r*a+255*(1-a),i=i*a+255*(1-a),255*Math.pow(2,24)+(n<<16|r<<8|i)}function de(e){return!!e.HasTransparency&&e.HasTransparency()}},8076:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(5578),i=n(9227),a=n(7424),o=n(5843),s=n(5347),c=n(7582),u=n(8851),l=n(821),d=n(843),h=n(5733),f=n.n(h),g=n(8871),p=function(){function e(){(0,i._)(this,e),this.map={}}return(0,a._)(e,[{key:"getNode",value:function(e){return this.map[e]}},{key:"setNode",value:function(e){var t=e.GetDict().GetObjNum();return this.map[t]=e,t}},{key:"remove",value:function(e){var t=e.GetDict().GetObjNum();delete this.map[t]}},{key:"clear",value:function(){this.map={}}}]),e}(),v=function(){function e(t,n){(0,i._)(this,e),this.doc=t,this.engine=n,this.engineDoc=t.doc,this.portfolio=n.Portfolio.CreatePortfolio(this.engineDoc),this.nodeCache=new p}return(0,a._)(e,[{key:"getInfo",value:function(){for(var e=this.portfolio,t=[],n=this.getSchemaFieldsHandler(),r=0;r<n.GetSize();r++){var i=n.GetAt(r);t.push({isDefaultField:i.IsDefaultField(),isVisible:i.IsVisible(),keyName:i.GetKeyName().toString(),subtypeName:i.GetSubtypeName().toString(),displayName:i.GetDisplayName().toString(),schemaField:i})}return{initialFileSpecKeyName:e.GetInitialFileSpecKeyName().toString(),initialViewMode:e.GetInitialViewMode().value,isSortedInAscending:e.IsSortedInAscending(),sortingFieldKeyName:e.GetSortingFieldKeyName().toString(),fields:t}}},{key:"setInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.engine,n=this.portfolio;if(void 0!==e.fields){var r=n.GetSchemaFields(),i=new t.SchemaFieldArray;(e.fields||[]).forEach(function(e){if(e.isDefaultField){for(var n,a=0;a<r.GetSize();a++){var o=r.GetAt(a);if(e.keyName===o.GetKeyName().toString()){o.SetVisibility(e.isVisible),n=o;break}}i.Add(n)}else{var s=new t.SchemaField;s.SetKeyName(new t.String(e.keyName)),s.SetSubtypeName(new t.String(e.subtypeName)),s.SetDisplayName(new t.WString(e.displayName)),s.SetVisibility(e.isVisible),i.Add(s)}}),n.SetSchemaFields(i)}void 0!==e.initialFileSpecKeyName&&n.SetInitialFileSpecKeyName(new t.WString(e.initialFileSpecKeyName)),e.initialViewMode&&n.SetInitialViewMode({value:e.initialViewMode}),void 0!==e.isSortedInAscending&&n.SetSortingOrder(e.isSortedInAscending),void 0!==e.sortingFieldKeyName&&n.SetSortingFieldKeyName(new t.String(e.sortingFieldKeyName))}},{key:"getTreeNode",value:function(){if(this.engineDoc.IsPortfolio()){var e=this.engine,t=this.portfolio,n=this.getInfo().fields,r=t.GetRootNode();if(!r.IsEmpty()){var i,a=r.GetNodeType();return a===e.PortfolioNodeType.e_TypeFolder&&(r=new e.PortfolioFolderNode(r),i=this.folderNodeToJSON(r,n)),a===e.PortfolioNodeType.e_TypeFile&&(r=new e.PortfolioFileNode(r),i=this.fileNodeToJSON(r,n)),i}t.delete()}}},{key:"getInitialNodePath",value:function(){var e=this.engine,t=this.portfolio,n=this.getInfo(),r=n.initialFileSpecKeyName,i=n.fields,a=t.GetRootNode();a=new e.PortfolioFolderNode(a);var o,s=[this.folderNodeToJSON(a,i)];if(!r)return s;var c=function(t){for(var n=0;n<t.GetSize();n++){var i=t.GetAt(n);if(i.GetNodeType()===e.PortfolioNodeType.e_TypeFile){if(i=new e.PortfolioFileNode(i),r===i.GetKeyName().toString()){o=i;break}}else i.GetNodeType()===e.PortfolioNodeType.e_TypeFolder&&(i=new e.PortfolioFolderNode(i),c(i.GetSortedSubNodes()))}};if(c(a.GetSortedSubNodes()),!o||o.GetParentNode().IsEmpty())return s;var u=[];u.unshift(this.fileNodeToJSON(o,i));for(var l=o.GetParentNode();!l.IsEmpty()&&!l.IsRoot();)l=(o=o.GetParentNode()).GetParentNode(),u.unshift(this.folderNodeToJSON(o,i));return u.unshift(this.folderNodeToJSON(a,i)),u}},{key:"addFiles",value:function(e,t,n){var r,i=function(t){var n=e[t];if(o.HasSameNameSubNode(new a.WString(n.name),a.PortfolioNodeType.e_TypeFile)){var i=void 0;for(var s in r.nodeCache.map){var u=r.nodeCache.map[s];if(u.GetNodeType()===a.PortfolioNodeType.e_TypeFile&&u.GetFileSpec().GetFileName().toString()===n.name){i=u;break}}i&&r.nodeCache.remove(i)}var l=a.ReaderCallback.implement({Release:function(){},GetSize:function(){return n.size},GetPosition:function(){return n.size},ReadBlock:function(e,t,r){var i=new Uint8Array(c.readAsArrayBuffer(n.slice(t,t+r)));return a.HEAPU8.set(i,e),!0}});o.AddFile(l,new a.WString(n.name)).GetFileSpec().SetModifiedDateTime(d.Z.ToDateTime(a,n.lastModified||n.lastModifiedDate))},a=this.engine,o=this.nodeCache.getNode(n);if(o&&o.GetNodeType()===a.PortfolioNodeType.e_TypeFolder){for(var s=o.GetSortedSubNodes().GetSize(),c=new FileReaderSync,u=0;u<e.length;u++)r=this,i(u);if(void 0!==t){for(var l=o.GetSortedSubNodes().GetSize(),h=[],f=0;f<l-s;f++)h.unshift(l-1-f);this.changeSubNodesOrder(n,h,t)}}}},{key:"createFolder",value:function(e,t){var n=this.engine,r=this.nodeCache.getNode(t);if(r&&r.GetNodeType()===n.PortfolioNodeType.e_TypeFolder){var i=r.AddSubFolder(new n.WString(e)),a=this.getInfo().fields;return this.folderNodeToJSON(i,a)}}},{key:"removeSubNodes",value:function(e,t){var n=this,r=this.engine,i=this.nodeCache.getNode(e);i&&i.GetNodeType()===r.PortfolioNodeType.e_TypeFolder&&t.forEach(function(e){var t=n.nodeCache.getNode(e);if(t.GetNodeType()===r.PortfolioNodeType.e_TypeFile)n.nodeCache.remove(t);else{var a=function(e){for(var t=e.GetSortedSubNodes(),i=0;i<t.GetSize();i++){var o=t.GetAt(i);o.GetNodeType()===r.PortfolioNodeType.e_TypeFile?n.nodeCache.remove(o):a(new r.PortfolioFolderNode(o))}n.nodeCache.remove(e)};a(t)}i.RemoveSubNode(t)})}},{key:"regenerateTOC",value:function(e){var t=this,n=this.portfolio.GetTocPageIndexes();this.portfolio.StartGenerateTableOfContents(new this.engine.WString(e),!!n.GetSize(),null);for(var r=this.portfolio.GetTocPageIndexes(),i=[],a=0;a<n.GetSize();a++)i.push(n.GetAt(a));for(var o=[],s=0;s<r.GetSize();s++)o.push(r.GetAt(s));return i.forEach(function(e){if(t.doc.pageIndexMap[e]){var n=t.doc.pageIndexMap[e];delete t.doc.pageIndexMap[e],delete t.doc.pageCache[n.id],delete t.doc.pageIndexPromise[e]}}),{oldIndexes:i,newPages:o.map(function(e){var n=t.engineDoc.GetPage(e),r=new g.Z(e,t.doc);return r.page=n,t.doc.updatePageIndexMap(e,r),t.doc.updatePageCache(r),r.toJson()})}}},{key:"nodeToJSONByCustomProperty",value:function(e,t,n,r){if(!e.IsDefaultField())if(n.HasCustomProperty(e)){var i=e.GetSubtypeName().toString();if("N"===i)r[t]=n.GetCustomPropertyIntegerValue(e);else if("S"===i)r[t]=n.GetCustomPropertyStringValue(e).toString();else if("D"===i){var a=(0,u.q)(n.GetCustomPropertyDateTimeValue(e));r[t]=a?a.getTime():-1}else r[t]=""}else r[t]=""}},{key:"folderNodeToJSON",value:function(e,t){var n=this,r={};t.forEach(function(t){n.nodeToJSONByCustomProperty(t.schemaField,t.displayName,e,r)});try{r.Description=e.GetDescription().toString()}catch(e){r.Description=""}var i=(0,u.q)(e.GetCreationDateTime());r.CreationDate=i?i.getTime():-1;var a=(0,u.q)(e.GetModifiedDateTime());return r.ModDate=a?a.getTime():i,r.FileName=e.GetName().toString(),r.subNodeSize=e.GetSortedSubNodes().GetSize(),r.handle=this.nodeCache.setNode(e),r.type=1,r}},{key:"fileNodeToJSON",value:function(e,t){var n=this,r={};t.forEach(function(t){n.nodeToJSONByCustomProperty(t.schemaField,t.displayName,e,r)});var i=e.GetFileSpec();try{r.Description=i.GetDescription().toString()}catch(e){r.Description=""}var a=(0,u.q)(i.GetCreationDateTime());r.CreationDate=a?a.getTime():-1;var o=(0,u.q)(i.GetModifiedDateTime());return r.ModDate=o?o.getTime():a,r.CompressedSize=i.GetCompressedEmbeddedFileSize(),r.Size=i.GetFileSize(),r.FileName=i.GetFileName().toString(),r.subtype=i.GetSubtype().toString(),r.keyName=e.GetKeyName().toString(),r.handle=this.nodeCache.setNode(e),r.type=2,r}},{key:"getFileStream",value:function(e,t){var n=t.writeStream,r=this.nodeCache.getNode(e),i=new l.Z(r.GetFileSpec(),this);return 0===i.getFileSize()?Promise.resolve(0):i.getStream(n)}},{key:"getStream",value:function(e){var t=this,n=this.engine,r=function(r){var i=[],a=function(e,r){for(var s=function(s){var c=r[s];if(c.GetNodeType()===n.PortfolioNodeType.e_TypeFile){(0,o._)(c,n.PortfolioFileNode)||(c=new n.PortfolioFileNode(c));var u=new l.Z(c.GetFileSpec(),t.doc),d=[],h=u.getStream(function(e,t,n){return d.push(e)}).then(function(){e.file(u.getFileName(),d,{binary:!0})});i.push(h)}else{(0,o._)(c,n.PortfolioFolderNode)||(c=new n.PortfolioFolderNode(c));for(var f=c.GetSortedSubNodes(),g=[],p=0;p<f.GetSize();p++)g.push(f.GetAt(p));a(e.folder(c.GetName().toString()),g)}},c=0;c<r.length;c++)s(c)},s=new(f()),c=e.map(function(e){return t.nodeCache.getNode(e)}).filter(function(e){return!!e});return a(s,c),Promise.all(i).then(function(){return s.generateAsync({type:"blob"}).then(function(e){return{blob:e,fileName:r}})})};if(1===e.length){var i=this.nodeCache.getNode(e[0]);if(i.GetNodeType()===n.PortfolioNodeType.e_TypeFile){var a=new l.Z(i.GetFileSpec(),this.doc),s=[];return a.getStream(function(e,t,n){return s.push(e)}).then(function(){return{blob:new Blob(s,{type:"application/octet-stream"}),fileName:a.getFileName()}})}return r("".concat(i.GetName().toString(),".zip"))}return r("download.zip")}},{key:"sendSortFolioParam",value:function(e,t){return(0,r._)(function(){var n,r,i;return(0,c.Jh)(this,function(a){switch(a.label){case 0:return n=this.engine,this.engineDoc.IsPortfolio()?(r=this.portfolio,i=new n.String(e),[4,r.SetSortingFieldKeyName(i)]):[2];case 1:return a.sent(),[4,r.SetSortingOrder(t)];case 2:return a.sent(),[2,!0]}})}).call(this)}},{key:"getPortfolioSubNodes",value:function(e){var t=this.engine,n=[],r=this.nodeCache.getNode(e);if(!r)throw new Error("Nonexistent portfolio folder node!");var i=r.GetNodeType();if(i!==t.PortfolioNodeType.e_TypeFolder)return n;for(var a=this.getInfo().fields,o=r.GetSortedSubNodes(),s=o.GetSize(),c=0;c<s;c++){var u=o.GetAt(c);(i=u.GetNodeType())===t.PortfolioNodeType.e_TypeFolder&&(u=new t.PortfolioFolderNode(u),n.push(this.folderNodeToJSON(u,a))),i===t.PortfolioNodeType.e_TypeFile&&(u=new t.PortfolioFileNode(u),n.push(this.fileNodeToJSON(u,a)))}return n}},{key:"getPDFDocByNodeHandle",value:function(e){var t=this.engine,n=this.nodeCache.getNode(e);if(n&&n.GetNodeType()!==t.PortfolioNodeType.e_TypeFolder){var r=n.GetFileSpec();if(".pdf"===r.GetFileName().toString().substr(-4)){var i=new t.PDFDoc(r.GetFileData(),!1);return i.Load(new t.String("")),i}}}},{key:"changeSubNodesOrder",value:function(e,t,n){var r,i=this.engine,a=this.nodeCache.getNode(e);if(a&&a.GetNodeType()!==i.PortfolioNodeType.e_TypeFile){var o=a.GetSortedSubNodes(),c=new Array(o.GetSize()).fill(null);c.forEach(function(e,n,r){t.includes(n)||(r[n]=o.GetAt(n))});var u=t.map(function(e){return o.GetAt(e)});(r=c).splice.apply(r,[n,0].concat((0,s._)(u))),c=c.filter(function(e){return!!e});var l=new i.PortfolioNodeArray;c.forEach(function(e){return l.Add(e)}),a.ReorderSubNodes(l)}}},{key:"moveSubNodeToSubFolderNode",value:function(e,t,n){var r=this.engine,i=this.nodeCache.getNode(e);if(i&&i.GetNodeType()!==r.PortfolioNodeType.e_TypeFile){var a=this.nodeCache.getNode(n);if(a&&a.GetNodeType()!==r.PortfolioNodeType.e_TypeFile)for(var o=0;o<t.length;o++){var s=this.nodeCache.getNode(t[o]);if(s){var c=void 0,u=void 0;s.GetNodeType()===r.PortfolioNodeType.e_TypeFile?(c=s.GetFileSpec().GetFileName(),u=r.PortfolioNodeType.e_TypeFile):(c=s.GetName(),u=r.PortfolioNodeType.e_TypeFolder);var l=a.HasSameNameSubNode(c,u);i.MoveSubNodeToSubFolderNode(s,a,l)}}}}},{key:"hasSameNameSubNode",value:function(e,t,n){var r=this.engine,i=this.nodeCache.getNode(n);if(i&&i.GetNodeType()!==r.PortfolioNodeType.e_TypeFile)return i.HasSameNameSubNode(new r.WString(e),{value:t})}},{key:"recordPDFFileByPortFolioNode",value:function(e){var t=this.engine,n=[];for(var r in e){var i=e[r],a=this.nodeCache.getNode(i),o=a.GetNodeType();if(o===t.PortfolioNodeType.e_TypeFile){var s=a.GetFileSpec();if(".pdf"===s.GetFileName().toString().substr(-4)){var c=s.GetFileData(),u=new t.PDFDoc(c,!1);if(u.Load(new t.String(""))===t.ErrorCode.e_ErrPassword){n.push("password");continue}var l=this.doc.JR.getPDFDocByEngineDoc(u);n.push(l.id)}}else o===t.PortfolioNodeType.e_TypeFolder&&this.recursionFolioNodePDFDoc(n,a)}return n}},{key:"getFolioNodePDFDoc",value:function(){if(this.engineDoc.IsPortfolio()){var e=this.engine,t=this.portfolio.GetRootNode(),n=new e.PortfolioFolderNode(t);if(!n)throw new Error("Nonexistent portfolio folder node!");return this.recursionFolioNodePDFDoc([],n)}}},{key:"recursionFolioNodePDFDoc",value:function(e,t){for(var n=this.engine,r=t.GetSortedSubNodes(),i=r.GetSize(),a=0;a<i;a++){var o=r.GetAt(a),s=o.GetNodeType();if(s===n.PortfolioNodeType.e_TypeFile){var c=(o=new n.PortfolioFileNode(o)).GetFileSpec();if(".pdf"===c.GetFileName().toString().substr(-4)){var u=c.GetFileData(),l=new n.PDFDoc(u,!1);if(l.Load(new n.String(""))===n.ErrorCode.e_ErrPassword)continue;var d=this.doc.JR.getPDFDocByEngineDoc(l);e.push(d.id)}}else if(s===n.PortfolioNodeType.e_TypeFolder){var h=new n.PortfolioFolderNode(o);this.recursionFolioNodePDFDoc(e,h)}}return e}},{key:"getSchemaFieldsHandler",value:function(){for(var e=this.engine,t=this.portfolio,n=t.GetSchemaFields(),r=!1,i=!1,a=!1,o=!1,s=!1,c=!1,u=new e.SchemaFieldArray,l=0;l<n.GetSize();l++){var d=n.GetAt(l),h=d.GetSubtypeName().toString();switch(u.Add(d),h){case"F":r=!0;break;case"Desc":i=!0;break;case"ModDate":a=!0;break;case"Size":o=!0;break;case"CompressedSize":s=!0;break;case"CreationDate":c=!0}}var f=function(t,n,r){var i=new e.SchemaField;i.SetSubtypeName(new e.String(t)),i.SetKeyName(new e.String(n)),i.SetDisplayName(new e.WString(r)),i.SetVisibility(!0),u.Add(i)};return r||f("F","FileName","Name"),i||f("Desc","Description","Description"),a||f("ModDate","ModDate","Modified"),o||f("Size","Size","Size"),s||f("CompressedSize","CompressedSize","Compressed size"),c||f("CreationDate","CreationDate","Created"),t.SetSchemaFields(u),t.GetSchemaFields()}}]),e}()},8643:(e,t,n)=>{"use strict";n.d(t,{S:()=>a});var r=n(3850),i=n(776),a=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:7,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:17,s=e.engine,c={},u=n.GetElement((0,r.n5)(s,"AA"));if(u&&u.GetDict()){for(var l=u.GetDict(),d=new s.AdditionalAction(t,l),h=s.TriggerEvent,f=a;f<o;f++){var g=d.GetAction(h.values[f]);if(g.IsEmpty())g.delete();else{var p=e.actionManager.get(g,t,e);c[f]=p.toJson(),p.destroy()}}(0,i.Z)(d)}return c}},843:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var r=n(4691),i=n(9227),a=n(7424),o=n(6905),s=n(9418),c=n(5467),u=n(5843),l=n(4570),d=n(1703),h=n(7189),f=n(6950),g=n(3850),p=n(8851),v=(n(4099),n(8925)),m=Object.keys(h.Ql).sort().map(function(e){return h.Ql[e]});const _=function(e){function t(e,n){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.GetIndex();if((0,i._)(this,t),(a=(0,r._)(this,t)).originAnnot=e,a.pdfPage=n,a.JR=n.JR,a.engine=n.engine,a.doc=n.doc,(0,u._)(a.doc,a.engine.PDFDoc)||(a.doc=n.pdfDoc._doc),a.annot=a.constructEngineAnnot(e),n.addJRAnnot(a,o),a.index=o,"number"!=typeof o)throw new Error("[JR] annotation index must be a number");return a}return(0,c._)(t,e),(0,a._)(t,[{key:"constructEngineAnnot",value:function(e){return e}},{key:"destroy",value:function(){this.isDestroyed||((0,o._)((0,s._)(t.prototype),"destroy",this).call(this),delete this.pdfPage.jrAnnots[this.index],this.annot.delete(),this.originAnnot!==this.annot&&this.originAnnot.delete(),this.originAnnot=null,this.annot=null)}},{key:"getRectData",value:function(){var e=this.JR.getRotatedAnnotRect(this.annot),t=e.left,n=e.right,r=e.top,i=e.bottom;e.rotate;return{rect:{top:r,right:n,bottom:i,left:t},rectIsEmpty:r===n&&n===i&&i===t}}},{key:"toJson",value:function(e){for(var t=this.annot,n=t.GetFlags(),r=this.getRectData(),i=t.GetDict(),a=t.GetType().constructor.name,o=this.getType(),s=t.GetBorderInfo(),c=[],u=0;u<s.dashes.GetSize();u++)c.push(s.dashes.GetAt(u));var l,d=s.width,h=t.GetBorderColor(),f=!0;if(0===h)if(i.HasKey((0,g.n5)(this.engine,"C"))){var v=i.GetElement((0,g.n5)(this.engine,"C")).GetArray(),m=0;v&&(m=v.GetElementCount()),0==m?h=0:h&=16777215}else h=0,f=!1;var _=-1;if("popup"!=o)try{(l=t.GetModifiedDateTime())&&l.IsValid()&&(_=(0,p.B)(l))}catch(e){isNaN(e)||(e=this.engine.getErrorCode(e)),console.warn(e)}var y=i.GetObjNum();i.HasKey((0,g.n5)(this.engine,"FoxitTag"))&&(n|=64);var S=new this.engine.String("customEntries"),b={};i.HasKey(S)&&(b=JSON.parse(i.GetElement(S).GetWideString().toString()));var I=this.getNano(i),A=this.index;void 0===A&&(A=t.GetIndex());var P={objectNumber:y,name:t.GetUniqueID().toString(),id:y,typeInEngine:a,type:o,typeNano:I,typeAlias:o,rect:r.rect,rectIsEmpty:r.rectIsEmpty,isMarkup:t.IsMarkup(),isDeleted:t.isDeleted(),index:A,content:this.JR.getPDFString(t.GetContent().UTF8Encode()),borderColor:h,hasBorderColor:f,color:h,borderInfo:{cloudIntensity:s.cloud_intensity,dashPhase:s.dash_phase,dashes:c,style:s.style.value,width:d},flag:n,modifiedTimestamp:_,customEntries:b};return s.delete(),P}},{key:"getDictValue",value:function(e){var t,n=this.annot.GetDict(),r=(0,g.n5)(this.engine,e);n.HasKey(r)&&(t=n.GetElement(r).GetWideString().toString());return t}},{key:"setDictValue",value:function(e,t){var n=this.annot.GetDict(),r=(0,g.n5)(this.engine,e),i=new this.engine.WString(t);return n.SetAtWString(r,i),i.delete(),this.updateModifyTime(),!0}},{key:"hasDictKey",value:function(e){var t=this.annot.GetDict(),n=(0,g.n5)(this.engine,e);return t.HasKey(n)}},{key:"getNano",value:function(e){var t=e.GetDict().GetElement((0,g.n5)(this.engine,"OC"));if(t){var n=t.GetDict();if(n){var r=n.GetElement((0,g.n5)(this.engine,"VE"));if(r){var i=r.GetArray(),a=i.GetElementCount();if(!(a<=1)){var o=i.GetElement(a-1);if(o){var s=o.GetDict();if(s)return s.GetElement((0,g.n5)(this.engine,"Name")).GetString().toString()}}}}}}},{key:"getId",value:function(){return this.annot.GetDict().GetObjNum()}},{key:"getName",value:function(){return this.annot.GetUniqueID().toString()}},{key:"getIndex",value:function(){return this.annot.GetIndex()}},{key:"getSummary",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annot,t=e.GetDict().GetObjNum();return{objectNumber:t,id:t,index:e.GetIndex()}}},{key:"getType",value:function(){var e=this.annot.GetType().constructor.name.replace(/^AnnotType_e_/,"").toLowerCase();return"note"===e&&(e="text"),e}},{key:"setContent",value:function(e){var t=this.annot,n=new this.engine.WString(e);return t.SetContent(n),n.delete(),this.updateModifyTime(),t.GetDict().GetObjNum()}},{key:"setDictionaryEntry",value:function(e,t){var n=this.annot.GetDict(),r=new this.engine.String("customEntries"),i={};n.HasKey(r)&&(i=JSON.parse(n.GetElement(r).GetWideString().toString())),i[e]=t;var a=new this.engine.WString(JSON.stringify(i));return n.SetAtWString(r,a),r.delete(),a.delete(),this.updateModifyTime(),!0}},{key:"getDictionaryEntry",value:function(e){var t=this.annot.GetDict(),n=new this.engine.String("customEntries"),r={};return t.HasKey(n)&&(r=JSON.parse(t.GetElement(n).GetWideString().toString())),n.delete(),r[e]}},{key:"resetAppearanceStream",value:function(){this.annot.ResetAppearanceStream()}},{key:"setBorderColor",value:function(e){var t=this.annot;if(e<0&&(e=0),t.IsGrouped&&t.IsGrouped())for(var n=t.GetGroupElements(),r=n.GetSize();r--;){var i=n.GetAt(r);0===e?i.RemoveProperty({value:2}):i.SetBorderColor(e),i.ResetAppearanceStream()}else 0===e?t.RemoveProperty({value:2}):t.SetBorderColor(e),t.ResetAppearanceStream();this.updateModifyTime()}},{key:"remove",value:function(){var e=this.getId();return this.pdfPage.removeAnnotById(e).then(function(t){if(t)return[e]})}},{key:"removeRelatives",value:function(){return[]}},{key:"setRect",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.left>e.right&&(t=e.right,e.right=e.left,e.left=t),e.bottom>e.top&&(t=e.top,e.top=e.bottom,e.bottom=t);var r=e.top-e.bottom,i=e.right-e.left,a=this.annot.GetRect(),o=!0;Math.abs(r-a.right+a.left)<.01&&Math.abs(i-a.top+a.bottom)<.01&&(o=!1);var s=new this.engine.CFX_FloatRect(e.left,e.bottom,e.right,e.top),c=this.annot.Move(s);return s.delete(),c&&n&&(this.updateModifyTime(),this.annot.GetType()!==this.engine.AnnotType.e_FreeText&&o&&this.annot.ResetAppearanceStream(),this.pdfPage.resetBitmapCache()),c}},{key:"move",value:function(e,t){var n=this.annot,r=d.Z.on(n.GetRect()).move(e,t).extract(),i=this.annot.Move(r);return i&&(this.updateModifyTime(),this.pdfPage.resetBitmapCache()),i}},{key:"moveTo",value:function(e,t){var n=this.JR.getRotatedAnnotRect(this.annot);return this.move(e-n.left,t-n.top),[this.getId()]}},{key:"setBorderInfo",value:function(e){var t=this.annot.GetBorderInfo(),n=this.engine.BorderInfoStyle;t.cloud_intensity=parseInt(e.cloudIntensity)||0,e.dashPhase&&(t.dash_phase=e.dashPhase);var r=e.dashes;if(r&&r.length>0){var i=new this.engine.FloatArray;i.SetSize(r.length,-1);for(var a=0;a<r.length;a++)i.SetAt(a,r[a]);t.dashes=i}t.style=n.values[Object.values(h.M8).includes(e.style)?e.style:0],void 0!==e.width&&(t.width=parseFloat(e.width)),this.annot.SetBorderInfo(t),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setBorderStyle",value:function(e,t){var n=this.annot.GetBorderInfo(),r=this.engine.BorderInfoStyle,i=this.annot.GetIntent&&this.annot.GetIntent().toString();switch(i&&i.toLowerCase()===h.WA.FREETEXT_TYPEWRITER.toLowerCase()&&(e=h.M8.NOBORDER),e){case h.M8.DASHED:n.style=r.values[r.e_Dashed.value];var a=new this.engine.FloatArray;a.SetSize(t.length,-1);for(var o=0;o<t.length;o++)a.SetAt(o,t[o]);n.dashes=a,n.dash_phase=0;break;case h.M8.BEVELED:n.style=r.values[r.e_Beveled.value];break;case h.M8.SOLID:n.style=r.values[r.e_Solid.value];break;case h.M8.UNDERLINE:n.style=r.values[r.e_UnderLine.value];break;case h.M8.INSET:n.style=r.values[r.e_Inset.value];break;case h.M8.CLOUDY:n.style=r.values[r.e_Cloudy.value],n.cloud_intensity=t;break;case h.M8.NOBORDER:n.style=r.values[r.e_NoBorder.value]}return this.annot.SetBorderInfo(n),this.annot.ResetAppearanceStream(),n.dashes.delete(),this.updateModifyTime(),[this.getId()]}},{key:"setBorderWidth",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var n=this.annot.GetBorderInfo(),r=parseFloat(e);n.width=r,this.annot.SetBorderInfo(n),t&&this.annot.ResetAppearanceStream(),this.updateModifyTime()}catch(e){isNaN(e)||(e=gsdk.getErrorCode(e)),console.warn(e)}return!0}},{key:"setModifiedDateTime",value:function(e){var t=this.ToDateTime(e);try{this.annot.SetModifiedDateTime(t)}catch(e){}return t.delete(),!0}},{key:"updateModifyTime",value:function(){this.setModifiedDateTime(Date.now())}},{key:"ToDateTime",value:function(e){return t.ToDateTime(this.engine,e)}},{key:"setAnnotFlag",value:function(e){try{this.annot.SetFlags(e),this.updateModifyTime()}catch(i){var t=this.annot.GetDict(),n=this.engine,r=n.PDFObject.CreateFromInteger(e);t.SetAt((0,g.n5)(n,"F"),r)}}},{key:"setUniqueId",value:function(e,t){var n;return n=e?new this.engine.WString(e):new this.engine.WString((0,f.Z)()),this.annot.SetUniqueID(n),!0}},{key:"create",value:function(e){var t;((t=e.color)||0===e.color)&&("string"==typeof t&&(t=parseInt(t,16),e.color=t),this.setBorderColor(t));var n,r,i,a,o,s,c=!0;("freetext"===e.type&&e.intent===h.WA.FREETEXT_TYPEWRITER&&(c=!1),c)&&((n=e.borderInfo)&&this.setBorderInfo(n),(r=e.style)&&this.setBorderStyle(r,e.intensity));"freetext"!==e.type&&((i=e.contents)&&this.setContent(i));if((a=e.flags)&&this.setAnnotFlag(a),(o=e.name)?this.setUniqueId(o):this.setUniqueId((0,f.Z)()),e.dicts){var u=e.dicts,l=this.annot.GetDict();for(var d in u){var g=new this.engine.String(d),p=new this.engine.WString(u[d]);l.SetAtWString(g,p),g.delete(),p.delete()}}return(s=e.date)?this.setModifiedDateTime(s):this.setModifiedDateTime(new Date),[this]}},{key:"_freeSuperAnnot",value:function(e,t){}},{key:"getRectJson",value:function(){var e=this.annot.GetRect();return{id:this.getId(),type:this.getType(),isMarkup:this.annot.IsMarkup(),rect:{left:e.left,right:e.right,top:e.top,bottom:e.bottom}}}},{key:"setCemicircleCloudy",value:function(){this.annot.SetCemicircleCloudy()}},{key:"setCustomAPStream",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=this.convertAppearanceType(e),i=new this.engine.String(t),a=new this.engine.String(n),o=this.annot.SetCustomAPStream(r,a,i);return a.delete(),o}},{key:"convertAppearanceType",value:function(e){var t=this.engine.AppearanceType.e_AppearanceTypeNormal;switch(e){case h.Qk.ROLLOVER:t=this.engine.AppearanceType.e_AppearanceTypeRollover;break;case h.Qk.DOWN:t=this.engine.AppearanceType.e_AppearanceTypeDown;break;case h.Qk.NORMAL:t=this.engine.AppearanceType.e_AppearanceTypeNormal}return t}}],[{key:"ToDateTime",value:function(e,t){var n=new Date(t),r=n.getFullYear(),i=n.getMonth()+1,a=n.getDate(),o=n.getHours(),s=n.getMinutes(),c=n.getSeconds(),u=n.getMilliseconds(),l=-n.getTimezoneOffset()/60,d=parseInt(l),h=Math.abs(60*(l-d));return new e.DateTime(r,i,a,o,s,c,u,d,h)}},{key:"parseDatetimeString",value:function(e,t){if(!t||"string"!=typeof t)return null;var n=t.match(/^D\:(\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(([+-]\d\d)('\d\d')?)?$/);if(!n)return null;var r=(0,l._)(n,10),i=r[1],a=r[2],o=r[3],s=r[4],c=r[5],u=r[6],d=(r[7],r[8]),h=r[9],f=0;h&&h.length>2&&(f=Number(h.replace(/['"]/g,"")),isNaN(f)&&(f=0));var g=Number(d);return isNaN(g)&&(g=(new Date).getTimezoneOffset()/-60),new e.DateTime(Number(i),Number(a),Number(o),Number(s),Number(c),Number(u),0,g,f)}},{key:"parseFlagList",value:function(e){var t=0;return m.forEach(function(n,r){e.indexOf(n)>-1&&(t|=1<<r)}),t}},{key:"updateModifyTime",value:function(e,n){var r=t.ToDateTime(e,Date.now());try{n.SetModifiedDateTime(r)}catch(e){}r.delete()}}]),t}(v.JT)},4748:(e,t,n)=>{"use strict";function r(e,t){var n=e.AnnotType;return{text:n.e_Note,caret:n.e_Caret,freetext:n.e_FreeText,fileattachment:n.e_FileAttachment,highlight:n.e_Highlight,ink:n.e_Ink,line:n.e_Line,link:n.e_Link,circle:n.e_Circle,square:n.e_Square,polygon:n.e_Polygon,polyline:n.e_PolyLine,sound:n.e_Sound,squiggly:n.e_Squiggly,stamp:n.e_Stamp,strikeout:n.e_StrikeOut,underline:n.e_Underline,redact:n.e_Redact,popup:n.e_Popup,psink:n.e_PSInk,movie:n.e_Movie,widget:n.e_Widget,screen:n.e_Screen,printermark:n.e_PrinterMark,trapnet:n.e_TrapNet,watermark:n.e_Watermark,"3d":n.e_3D}[t]||n.e_UnknownType}n.d(t,{M:()=>r})},1606:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(9227),i=n(7424),a=n(5843),o=n(1812),s=function(){function e(t,n,i){(0,r._)(this,e),this.doc=n,(0,a._)(n,i.PDFDoc)||(this.doc=n.doc),this.engine=i,this.destination=t}return(0,i._)(e,[{key:"toJson",value:function(){var e=null;return this.destination.IsEmpty()||(e={top:this.getTop(),bottom:this.getBottom(),left:this.getLeft(),right:this.getRight(),pageIndex:this.getPageIndex(),zoomFactor:this.getZoomFactor(),zoomMode:this.getZoomMode()}),e}},{key:"getTop",value:function(){return this.destination.GetTop()}},{key:"getBottom",value:function(){return this.destination.GetBottom()}},{key:"getLeft",value:function(){return this.destination.GetLeft()}},{key:"getRight",value:function(){return this.destination.GetRight()}},{key:"getPageIndex",value:function(){var e=this.destination.GetDestArray();if(!e||0===e.GetElementCount())return-1;var t=e.GetElement(0).GetDirectObject();if(!t)return-1;var n=t.GetType().value;if(2==n)return t.GetInteger();if(6!=n)return-1;var r=t.GetDict().GetElement(new this.engine.String("Parent"));if(!r)return-1;var i=r.GetDict();if(!i)return-1;if(i.HasKey(new this.engine.String("Kids"))){var a=i.GetElement(new this.engine.String("Kids")).GetDirectObject().GetArray();if(!a||0===a.GetElementCount())return-1}return this.destination.GetPageIndex(this.doc)}},{key:"getDestArray",value:function(){return this.destination.GetDestArray()}},{key:"getZoomFactor",value:function(){return this.destination.GetZoomFactor()}},{key:"getZoomMode",value:function(){var e=this.destination.GetZoomMode();return e&&e.constructor.name.replace(/^ZoomMode_e_/,"")}}],[{key:"create",value:function(t,n,r){var i=null;switch(r.zoomMode||r.type){case o.jI.ZoomXYZ:i=e.createXYZ;break;case o.jI.ZoomFitPage:i=e.createFitPage;break;case o.jI.ZoomFitHorz:i=e.createFitHorz;break;case o.jI.ZoomFitVert:i=e.createFitVert;break;case o.jI.ZoomFitRect:i=e.createFitRect;break;case o.jI.ZoomFitBBox:i=e.createFitBBox;break;case o.jI.ZoomFitBHorz:i=e.createFitBHorz;break;default:i=e.createFitBVert}return i(t,n,r)}},{key:"createFitBBox",value:function(e,t,n){return e.Destination.CreateFitBBox(t,n.pageIndex)}},{key:"createFitBHorz",value:function(e,t,n){return e.Destination.CreateFitBHorz(t,n.pageIndex,n.top)}},{key:"createFitBVert",value:function(e,t,n){return e.Destination.CreateFitBVert(t,n.pageIndex,n.left)}},{key:"createFitHorz",value:function(e,t,n){return e.Destination.CreateFitHorz(t,n.pageIndex,n.top)}},{key:"createFitPage",value:function(e,t,n){return e.Destination.CreateFitPage(t,n.pageIndex)}},{key:"createFitRect",value:function(e,t,n){return e.Destination.CreateFitRect(t,n.pageIndex,n.left,n.bottom,n.right,n.top)}},{key:"createFitVert",value:function(e,t,n){return e.Destination.CreateFitVert(t,n.pageIndex,n.left)}},{key:"createFromPDFArray",value:function(e,t,n){return e.Destination.CreateFromPDFArray(t,n.pdfArray)}},{key:"createXYZ",value:function(e,t,n){var r=t.GetPageCount(),i=n.pageIndex;if(isNaN(i)||i<0||i>=r){if(1===r)throw new Error("Incorrect page index: ".concat(i,". It should be 0"));throw new Error("Incorrect page index: ".concat(i,". It should be between [0,").concat(r-1,"]"))}return e.Destination.CreateXYZ(t,n.pageIndex,n.left,n.top,n.zoomFactor)}}]),e}()},821:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(9227),i=n(7424),a=n(5843),o=n(8925),s=n(7731),c=o.mA.getLogger("pdf-jr.FileSpec"),u=function(){function e(t,n){(0,r._)(this,e),this.parent=n,this.engine=n.engine,this.fileSpec=t}return(0,i._)(e,[{key:"toJson",value:function(){var e=null;if(this.fileSpec.IsEmpty())return e;var t=this.getDict();if(t){var n=t.GetObjNum();e={description:this.getDescription(),dict:t,fileName:this.getFileName(),fileSize:this.getFileSize(),modifiedDateTime:this.getModifiedDateTime(),subtype:this.getSubtype(),isEmbedded:this.isEmbedded(),objNum:n}}return e}},{key:"gtAssociteFileRelationship",value:function(){return this.fileSpec.GetAssociteFileRelationship()}},{key:"getChecksum",value:function(){var e=this.fileSpec.GetChecksum();return 0===e.GetLength()?null:e.toString()}},{key:"getCreationDateTime",value:function(){try{var e=this.fileSpec.GetCreationDateTime();return e.IsValid()?e:null}catch(e){var t=this.engine,n=(0,a._)(e,t.ErrorCode)?e:t.getErrorCode(e);c.warn(n)}}},{key:"getDescription",value:function(){var e=this.fileSpec.GetDescription();if(0===e.GetLength())return null;try{return e.toString()}catch(t){return this.parent.JR.getPDFString(e)}}},{key:"getDict",value:function(){return this.fileSpec.GetDict()}},{key:"getFileData",value:function(){return this.fileSpec.GetFileData()}},{key:"getFileName",value:function(){var e=this.fileSpec.GetFileName();return 0===e.GetLength()?null:e.toString()}},{key:"getFileSize",value:function(){return this.fileSpec.GetFileSize()}},{key:"getModifiedDateTime",value:function(){var e=this.fileSpec.GetModifiedDateTime();return e.IsValid()?(0,s.Z)(e,"YYYY/MM/DD HH:mm:ss"):null}},{key:"getSubtype",value:function(){var e=this.fileSpec.GetSubtype();return 0===e.GetLength()?null:e.toString()}},{key:"isEmbedded",value:function(){return this.fileSpec.IsEmbedded()}},{key:"setAssociteFileRelationship",value:function(e){this.fileSpec.SetAssociteFileRelationship(e)}},{key:"setChecksum",value:function(e){this.fileSpec.SetChecksum(e)}},{key:"setCreationDateTime",value:function(e){this.fileSpec.SetCreationDateTime(e)}},{key:"setDescription",value:function(e){this.fileSpec.SetDescription(e)}},{key:"setFileName",value:function(e){var t=new this.engine.WString(e);this.fileSpec.SetFileName(t),t.delete()}},{key:"setModifiedDateTime",value:function(e){this.fileSpec.SetModifiedDateTime(e)}},{key:"setSubtype",value:function(e){this.fileSpec.SetSubtype(e)}},{key:"getStream",value:function(e){var t=this.engine,n=0,r=(0,o.dD)(),i=t.StreamCallback.implement({Release:function(){},Flush:function(){return!0},GetSize:function(){return n},WriteBlock:function(i,a,o){n+=o;var s,c=t.HEAPU8.buffer;return s=c.slice?c.slice(i,i+o):new Uint8Array(c,i,o).buffer,e(s,a,o),r.resolve(n),!0}});return this.fileSpec.ExportToFileStream(i),r.promise}},{key:"getStreamEx",value:function(){var e=this.engine,t=!0,n=0,r=new Blob([]),i=(0,o.dD)(),a=e.StreamCallback.implement({Release:function(){t=!0,n=0},Flush:function(){return!0},GetSize:function(){return n},WriteBlock:function(i,a,o){for(var s=[],c=a;c<a+o;c++)s.push(e.HEAPU8[i+c-a]);if(t)t=!1,r=0!=a?new Blob([new Uint8Array(a),new Uint8Array(s)]):new Blob([r,new Uint8Array(s)]);else{var u=r.size;a>=0&&a<u&&a+o<u?r=new Blob([r.slice(0,a),new Uint8Array(s),r.slice(a+o,u)]):a>=0&&a<u&&a+o>u?r=new Blob([r.slice(0,a),new Uint8Array(s)]):a>=u&&(r=new Blob([r,new Uint8Array(a-u),new Uint8Array(s)]))}return n=r.size,!0}});return this.fileSpec.ExportToFileStream(a),i.resolve(r),i.promise}}],[{key:"createFile",value:function(e,t,n){var r=new e.FileSpec(t);return r.Embed(e.StreamCallback.implement({Release:function(){},GetSize:function(){return n.byteLength},ReadBlock:function(t,r,i){var a=n.slice(r,r+i);return e.HEAPU8.set(a,t),!0}})),r}},{key:"createFileEx",value:function(e,t,n,r,i){var o;return(o=n||new e.FileSpec(t)).Embed(e.StreamCallback.implement({Release:function(){},GetSize:function(){return(0,a._)(r,Blob)?r.size:r.byteLength},ReadBlock:function(t,n,r){var a=new Uint8Array(i(n,r));return e.HEAPU8.set(a,t),!0}}))?o:null}}]),e}()},5147:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(9227),i=n(7424),a=n(8925),o=function(){function e(){(0,r._)(this,e)}return(0,i._)(e,null,[{key:"createImage",value:function(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.slice?n=function(e,n,r,i){e.set(new Uint8Array(t.slice(r,r+i)),n)}:(r=new Uint8Array(t),n=function(e,t,n,i){e.set(r.slice(n,n+i),t)});try{var o=e.ReaderCallback.implement({Release:function(){},GetSize:function(){return t.byteLength},ReadBlock:function(t,r,i){return n(e.HEAPU8,t,r,i),!0}});return i?o:new e.Image(o)}catch(t){isNaN(t)||(t=e.getErrorCode(t)),a.mA.getLogger("CreateImage").warn(t)}}}]),e}()},9198:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){if(a)return a(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[o]={exports:{}};t[o][0].call(u.exports,function(e){return i(t[o][1][e]||e)},u,u.exports,e,t,n,r)}return n[o].exports}for(var a=void 0,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){n.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},n.toByteArray=function(e){for(var t,n=c(e),r=n[0],o=n[1],s=new a(function(e,t,n){return 3*(t+n)/4-n}(0,r,o)),u=0,l=o>0?r-4:r,d=0;d<l;d+=4)t=i[e.charCodeAt(d)]<<18|i[e.charCodeAt(d+1)]<<12|i[e.charCodeAt(d+2)]<<6|i[e.charCodeAt(d+3)],s[u++]=t>>16&255,s[u++]=t>>8&255,s[u++]=255&t;return 2===o&&(t=i[e.charCodeAt(d)]<<2|i[e.charCodeAt(d+1)]>>4,s[u++]=255&t),1===o&&(t=i[e.charCodeAt(d)]<<10|i[e.charCodeAt(d+1)]<<4|i[e.charCodeAt(d+2)]>>2,s[u++]=t>>8&255,s[u++]=255&t),s},n.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],o=16383,s=0,c=n-i;s<c;s+=o)a.push(l(e,s,s+o>c?c:s+o));return 1===i?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),a.join("")};for(var r=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function l(e,t,n){for(var r,i=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(u(r));return i.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],2:[function(e,t,n){var r=4096,i=new Uint32Array([0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215]);function a(e){this.buf_=new Uint8Array(8224),this.input_=e,this.reset()}a.READ_SIZE=r,a.IBUF_MASK=8191,a.prototype.reset=function(){this.buf_ptr_=0,this.val_=0,this.pos_=0,this.bit_pos_=0,this.bit_end_pos_=0,this.eos_=0,this.readMoreInput();for(var e=0;e<4;e++)this.val_|=this.buf_[this.pos_]<<8*e,++this.pos_;return this.bit_end_pos_>0},a.prototype.readMoreInput=function(){if(!(this.bit_end_pos_>256))if(this.eos_){if(this.bit_pos_>this.bit_end_pos_)throw new Error("Unexpected end of input "+this.bit_pos_+" "+this.bit_end_pos_)}else{var e=this.buf_ptr_,t=this.input_.read(this.buf_,e,r);if(t<0)throw new Error("Unexpected end of input");if(t<r){this.eos_=1;for(var n=0;n<32;n++)this.buf_[e+t+n]=0}if(0===e){for(n=0;n<32;n++)this.buf_[8192+n]=this.buf_[n];this.buf_ptr_=r}else this.buf_ptr_=0;this.bit_end_pos_+=t<<3}},a.prototype.fillBitWindow=function(){for(;this.bit_pos_>=8;)this.val_>>>=8,this.val_|=this.buf_[8191&this.pos_]<<24,++this.pos_,this.bit_pos_=this.bit_pos_-8>>>0,this.bit_end_pos_=this.bit_end_pos_-8>>>0},a.prototype.readBits=function(e){32-this.bit_pos_<e&&this.fillBitWindow();var t=this.val_>>>this.bit_pos_&i[e];return this.bit_pos_+=e,t},t.exports=a},{}],3:[function(e,t,n){n.lookup=new Uint8Array([0,0,0,0,0,0,0,0,0,4,4,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,12,16,12,12,20,12,16,24,28,12,12,32,12,36,12,44,44,44,44,44,44,44,44,44,44,32,32,24,40,28,12,12,48,52,52,52,48,52,52,52,48,52,52,52,52,52,48,52,52,52,52,52,48,52,52,52,52,52,24,12,28,12,12,12,56,60,60,60,56,60,60,60,56,60,60,60,60,60,56,60,60,60,60,60,56,60,60,60,60,60,24,12,28,12,0,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,56,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,6,6,6,6,7,7,7,7,8,8,8,8,9,9,9,9,10,10,10,10,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,22,22,22,22,23,23,23,23,24,24,24,24,25,25,25,25,26,26,26,26,27,27,27,27,28,28,28,28,29,29,29,29,30,30,30,30,31,31,31,31,32,32,32,32,33,33,33,33,34,34,34,34,35,35,35,35,36,36,36,36,37,37,37,37,38,38,38,38,39,39,39,39,40,40,40,40,41,41,41,41,42,42,42,42,43,43,43,43,44,44,44,44,45,45,45,45,46,46,46,46,47,47,47,47,48,48,48,48,49,49,49,49,50,50,50,50,51,51,51,51,52,52,52,52,53,53,53,53,54,54,54,54,55,55,55,55,56,56,56,56,57,57,57,57,58,58,58,58,59,59,59,59,60,60,60,60,61,61,61,61,62,62,62,62,63,63,63,63,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),n.lookupOffsets=new Uint16Array([1024,1536,1280,1536,0,256,768,512])},{}],4:[function(e,t,n){var r=e("./streams").BrotliInput,i=e("./streams").BrotliOutput,a=e("./bit_reader"),o=e("./dictionary"),s=e("./huffman").HuffmanCode,c=e("./huffman").BrotliBuildHuffmanTable,u=e("./context"),l=e("./prefix"),d=e("./transform"),h=1080,f=new Uint8Array([1,2,3,4,0,5,17,6,16,7,8,9,10,11,12,13,14,15]),g=new Uint8Array([3,2,1,0,3,3,3,3,3,3,2,2,2,2,2,2]),p=new Int8Array([0,0,0,0,-1,1,-2,2,-3,3,-1,1,-2,2,-3,3]),v=new Uint16Array([256,402,436,468,500,534,566,598,630,662,694,726,758,790,822,854,886,920,952,984,1016,1048,1080]);function m(e){var t;return 0===e.readBits(1)?16:(t=e.readBits(3))>0?17+t:(t=e.readBits(3))>0?8+t:17}function _(e){if(e.readBits(1)){var t=e.readBits(3);return 0===t?1:e.readBits(t)+(1<<t)}return 0}function y(){this.meta_block_length=0,this.input_end=0,this.is_uncompressed=0,this.is_metadata=!1}function S(e){var t,n,r,i=new y;if(i.input_end=e.readBits(1),i.input_end&&e.readBits(1))return i;if(7===(t=e.readBits(2)+4)){if(i.is_metadata=!0,0!==e.readBits(1))throw new Error("Invalid reserved bit");if(0===(n=e.readBits(2)))return i;for(r=0;r<n;r++){var a=e.readBits(8);if(r+1===n&&n>1&&0===a)throw new Error("Invalid size byte");i.meta_block_length|=a<<8*r}}else for(r=0;r<t;++r){var o=e.readBits(4);if(r+1===t&&t>4&&0===o)throw new Error("Invalid size nibble");i.meta_block_length|=o<<4*r}return++i.meta_block_length,i.input_end||i.is_metadata||(i.is_uncompressed=e.readBits(1)),i}function b(e,t,n){var r;return n.fillBitWindow(),(r=e[t+=n.val_>>>n.bit_pos_&255].bits-8)>0&&(n.bit_pos_+=8,t+=e[t].value,t+=n.val_>>>n.bit_pos_&(1<<r)-1),n.bit_pos_+=e[t].bits,e[t].value}function I(e,t,n,r){var i,a,o=new Uint8Array(e);if(r.readMoreInput(),1===(a=r.readBits(2))){for(var u=e-1,l=0,d=new Int32Array(4),h=r.readBits(2)+1;u;)u>>=1,++l;for(g=0;g<h;++g)d[g]=r.readBits(l)%e,o[d[g]]=2;switch(o[d[0]]=1,h){case 1:break;case 3:if(d[0]===d[1]||d[0]===d[2]||d[1]===d[2])throw new Error("[ReadHuffmanCode] invalid symbols");break;case 2:if(d[0]===d[1])throw new Error("[ReadHuffmanCode] invalid symbols");o[d[1]]=1;break;case 4:if(d[0]===d[1]||d[0]===d[2]||d[0]===d[3]||d[1]===d[2]||d[1]===d[3]||d[2]===d[3])throw new Error("[ReadHuffmanCode] invalid symbols");r.readBits(1)?(o[d[2]]=3,o[d[3]]=3):o[d[0]]=2}}else{var g,p=new Uint8Array(18),v=32,m=0,_=[new s(2,0),new s(2,4),new s(2,3),new s(3,2),new s(2,0),new s(2,4),new s(2,3),new s(4,1),new s(2,0),new s(2,4),new s(2,3),new s(3,2),new s(2,0),new s(2,4),new s(2,3),new s(4,5)];for(g=a;g<18&&v>0;++g){var y,S=f[g],b=0;r.fillBitWindow(),b+=r.val_>>>r.bit_pos_&15,r.bit_pos_+=_[b].bits,y=_[b].value,p[S]=y,0!==y&&(v-=32>>y,++m)}if(1!==m&&0!==v)throw new Error("[ReadHuffmanCode] invalid num_codes or space");!function(e,t,n,r){for(var i=0,a=8,o=0,u=0,l=32768,d=[],h=0;h<32;h++)d.push(new s(0,0));for(c(d,0,5,e,18);i<t&&l>0;){var f,g=0;if(r.readMoreInput(),r.fillBitWindow(),g+=r.val_>>>r.bit_pos_&31,r.bit_pos_+=d[g].bits,(f=255&d[g].value)<16)o=0,n[i++]=f,0!==f&&(a=f,l-=32768>>f);else{var p,v,m=f-14,_=0;if(16===f&&(_=a),u!==_&&(o=0,u=_),p=o,o>0&&(o-=2,o<<=m),i+(v=(o+=r.readBits(m)+3)-p)>t)throw new Error("[ReadHuffmanCodeLengths] symbol + repeat_delta > num_symbols");for(var y=0;y<v;y++)n[i+y]=u;i+=v,0!==u&&(l-=v<<15-u)}}if(0!==l)throw new Error("[ReadHuffmanCodeLengths] space = "+l);for(;i<t;i++)n[i]=0}(p,e,o,r)}if(0===(i=c(t,n,8,o,e)))throw new Error("[ReadHuffmanCode] BuildHuffmanTable failed: ");return i}function A(e,t,n){var r,i;return r=b(e,t,n),i=l.kBlockLengthPrefixCode[r].nbits,l.kBlockLengthPrefixCode[r].offset+n.readBits(i)}function P(e,t,n){var r;return e<16?(n+=g[e],r=t[n&=3]+p[e]):r=e-16+1,r}function D(e,t){for(var n=e[t],r=t;r;--r)e[r]=e[r-1];e[0]=n}function E(e,t){this.alphabet_size=e,this.num_htrees=t,this.codes=new Array(t+t*v[e+31>>>5]),this.htrees=new Uint32Array(t)}function C(e,t){var n,r,i={num_htrees:null,context_map:null},a=0;t.readMoreInput();var o=i.num_htrees=_(t)+1,c=i.context_map=new Uint8Array(e);if(o<=1)return i;for(t.readBits(1)&&(a=t.readBits(4)+1),n=[],r=0;r<h;r++)n[r]=new s(0,0);for(I(o+a,n,0,t),r=0;r<e;){var u;if(t.readMoreInput(),0===(u=b(n,0,t)))c[r]=0,++r;else if(u<=a)for(var l=1+(1<<u)+t.readBits(u);--l;){if(r>=e)throw new Error("[DecodeContextMap] i >= context_map_size");c[r]=0,++r}else c[r]=u-a,++r}return t.readBits(1)&&function(e,t){var n,r=new Uint8Array(256);for(n=0;n<256;++n)r[n]=n;for(n=0;n<t;++n){var i=e[n];e[n]=r[i],i&&D(r,i)}}(c,e),i}function w(e,t,n,r,i,a,o){var s,c=2*n,u=n,l=b(t,n*h,o);(s=0===l?i[c+(1&a[u])]:1===l?i[c+(a[u]-1&1)]+1:l-2)>=e&&(s-=e),r[n]=s,i[c+(1&a[u])]=s,++a[u]}function k(e,t,n,r,i,o){var s,c=i+1,u=n&i,l=o.pos_&a.IBUF_MASK;if(t<8||o.bit_pos_+(t<<3)<o.bit_end_pos_)for(;t-- >0;)o.readMoreInput(),r[u++]=o.readBits(8),u===c&&(e.write(r,c),u=0);else{if(o.bit_end_pos_<32)throw new Error("[CopyUncompressedBlockToOutput] br.bit_end_pos_ < 32");for(;o.bit_pos_<32;)r[u]=o.val_>>>o.bit_pos_,o.bit_pos_+=8,++u,--t;if(l+(s=o.bit_end_pos_-o.bit_pos_>>3)>a.IBUF_MASK){for(var d=a.IBUF_MASK+1-l,h=0;h<d;h++)r[u+h]=o.buf_[l+h];s-=d,u+=d,t-=d,l=0}for(h=0;h<s;h++)r[u+h]=o.buf_[l+h];if(t-=s,(u+=s)>=c)for(e.write(r,c),u-=c,h=0;h<u;h++)r[h]=r[c+h];for(;u+t>=c;){if(s=c-u,o.input_.read(r,u,s)<s)throw new Error("[CopyUncompressedBlockToOutput] not enough bytes");e.write(r,c),t-=s,u=0}if(o.input_.read(r,u,t)<t)throw new Error("[CopyUncompressedBlockToOutput] not enough bytes");o.reset()}}function T(e){var t=e.bit_pos_+7&-8;return 0==e.readBits(t-e.bit_pos_)}function F(e){var t=new r(e),n=new a(t);return m(n),S(n).meta_block_length}function G(e,t){var n,r,i,c,f,g,p,v,y,D,F=0,G=0,R=0,x=[16,15,11,4],O=0,M=0,N=0,B=[new E(0,0),new E(0,0),new E(0,0)],L=128+a.READ_SIZE;i=(1<<(r=m(D=new a(e))))-16,f=(c=1<<r)-1,g=new Uint8Array(c+L+o.maxDictionaryWordLength),p=c,v=[],y=[];for(var j=0;j<3240;j++)v[j]=new s(0,0),y[j]=new s(0,0);for(;!G;){var U,W,H,K,z,V,J,Y,Z,q,X,Q=0,$=[1<<28,1<<28,1<<28],ee=[0],te=[1,1,1],ne=[0,1,0,1,0,1],re=[0],ie=null,ae=null,oe=0,se=null,ce=0,ue=0,le=0;for(n=0;n<3;++n)B[n].codes=null,B[n].htrees=null;D.readMoreInput();var de=S(D);if(F+(Q=de.meta_block_length)>t.buffer.length){var he=new Uint8Array(F+Q);he.set(t.buffer),t.buffer=he}if(G=de.input_end,U=de.is_uncompressed,de.is_metadata)for(T(D);Q>0;--Q)D.readMoreInput(),D.readBits(8);else if(0!==Q)if(U)D.bit_pos_=D.bit_pos_+7&-8,k(t,Q,F,g,f,D),F+=Q;else{for(n=0;n<3;++n)te[n]=_(D)+1,te[n]>=2&&(I(te[n]+2,v,n*h,D),I(26,y,n*h,D),$[n]=A(y,n*h,D),re[n]=1);for(D.readMoreInput(),K=(1<<(W=D.readBits(2)))-1,z=(H=16+(D.readBits(4)<<W))+(48<<W),ie=new Uint8Array(te[0]),n=0;n<te[0];++n)D.readMoreInput(),ie[n]=D.readBits(2)<<1;var fe=C(te[0]<<6,D);J=fe.num_htrees,V=fe.context_map;var ge=C(te[2]<<2,D);for(Z=ge.num_htrees,Y=ge.context_map,B[0]=new E(256,J),B[1]=new E(704,te[1]),B[2]=new E(z,Z),n=0;n<3;++n)B[n].decode(D);for(ae=0,se=0,q=ie[ee[0]],ue=u.lookupOffsets[q],le=u.lookupOffsets[q+1],X=B[1].htrees[0];Q>0;){var pe,ve,me,_e,ye,Se,be,Ie,Ae,Pe,De,Ee;for(D.readMoreInput(),0===$[1]&&(w(te[1],v,1,ee,ne,re,D),$[1]=A(y,h,D),X=B[1].htrees[ee[1]]),--$[1],(ve=(pe=b(B[1].codes,X,D))>>6)>=2?(ve-=2,be=-1):be=0,me=l.kInsertRangeLut[ve]+(pe>>3&7),_e=l.kCopyRangeLut[ve]+(7&pe),ye=l.kInsertLengthPrefixCode[me].offset+D.readBits(l.kInsertLengthPrefixCode[me].nbits),Se=l.kCopyLengthPrefixCode[_e].offset+D.readBits(l.kCopyLengthPrefixCode[_e].nbits),M=g[F-1&f],N=g[F-2&f],Ae=0;Ae<ye;++Ae)D.readMoreInput(),0===$[0]&&(w(te[0],v,0,ee,ne,re,D),$[0]=A(y,0,D),ae=ee[0]<<6,q=ie[ee[0]],ue=u.lookupOffsets[q],le=u.lookupOffsets[q+1]),oe=V[ae+(u.lookup[ue+M]|u.lookup[le+N])],--$[0],N=M,M=b(B[0].codes,B[0].htrees[oe],D),g[F&f]=M,(F&f)===f&&t.write(g,c),++F;if((Q-=ye)<=0)break;if(be<0&&(D.readMoreInput(),0===$[2]&&(w(te[2],v,2,ee,ne,re,D),$[2]=A(y,2160,D),se=ee[2]<<2),--$[2],ce=Y[se+(255&(Se>4?3:Se-2))],(be=b(B[2].codes,B[2].htrees[ce],D))>=H&&(Ee=(be-=H)&K,be=H+((Ce=(2+(1&(be>>=W))<<(De=1+(be>>1)))-4)+D.readBits(De)<<W)+Ee)),(Ie=P(be,x,O))<0)throw new Error("[BrotliDecompress] invalid distance");if(Pe=F&f,Ie>(R=F<i&&R!==i?F:i)){if(!(Se>=o.minDictionaryWordLength&&Se<=o.maxDictionaryWordLength))throw new Error("Invalid backward reference. pos: "+F+" distance: "+Ie+" len: "+Se+" bytes left: "+Q);var Ce=o.offsetsByLength[Se],we=Ie-R-1,ke=o.sizeBitsByLength[Se],Te=we>>ke;if(Ce+=(we&(1<<ke)-1)*Se,!(Te<d.kNumTransforms))throw new Error("Invalid backward reference. pos: "+F+" distance: "+Ie+" len: "+Se+" bytes left: "+Q);var Fe=d.transformDictionaryWord(g,Pe,Ce,Se,Te);if(F+=Fe,Q-=Fe,(Pe+=Fe)>=p){t.write(g,c);for(var Ge=0;Ge<Pe-p;Ge++)g[Ge]=g[p+Ge]}}else{if(be>0&&(x[3&O]=Ie,++O),Se>Q)throw new Error("Invalid backward reference. pos: "+F+" distance: "+Ie+" len: "+Se+" bytes left: "+Q);for(Ae=0;Ae<Se;++Ae)g[F&f]=g[F-Ie&f],(F&f)===f&&t.write(g,c),++F,--Q}M=g[F-1&f],N=g[F-2&f]}F&=1073741823}}t.write(g,F&f)}E.prototype.decode=function(e){var t,n=0;for(t=0;t<this.num_htrees;++t)this.htrees[t]=n,n+=I(this.alphabet_size,this.codes,n,e)},n.BrotliDecompressedSize=F,n.BrotliDecompressBuffer=function(e,t){var n=new r(e);null==t&&(t=F(e));var a=new Uint8Array(t),o=new i(a);return G(n,o),o.pos<o.buffer.length&&(o.buffer=o.buffer.subarray(0,o.pos)),o.buffer},n.BrotliDecompress=G,o.init()},{"./bit_reader":2,"./context":3,"./dictionary":7,"./huffman":8,"./prefix":9,"./streams":10,"./transform":11}],5:[function(e,t,n){var r=e("base64-js");e("fs"),n.init=function(){return(0,e("./decode").BrotliDecompressBuffer)(r.toByteArray(e("./dictionary.bin.js")))}},{"./decode":4,"./dictionary.bin.js":6,"base64-js":1,fs:13}],6:[function(e,t,n){t.exports="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"},{}],7:[function(e,t,n){var r=e("./dictionary-data");n.init=function(){n.dictionary=r.init()},n.offsetsByLength=new Uint32Array([0,0,0,0,0,4096,9216,21504,35840,44032,53248,63488,74752,87040,93696,100864,104704,106752,108928,113536,115968,118528,119872,121280,122016]),n.sizeBitsByLength=new Uint8Array([0,0,0,0,10,10,11,11,10,10,10,10,10,9,9,8,7,7,8,7,7,6,6,5,5]),n.minDictionaryWordLength=4,n.maxDictionaryWordLength=24},{"./dictionary-data":5}],8:[function(e,t,n){function r(e,t){this.bits=e,this.value=t}n.HuffmanCode=r;var i=15;function a(e,t){for(var n=1<<t-1;e&n;)n>>=1;return(e&n-1)+n}function o(e,t,n,i,a){do{e[t+(i-=n)]=new r(a.bits,a.value)}while(i>0)}function s(e,t,n){for(var r=1<<t-n;t<i&&!((r-=e[t])<=0);)++t,r<<=1;return t-n}n.BrotliBuildHuffmanTable=function(e,t,n,c,u){var l,d,h,f,g,p,v,m,_,y,S=t,b=new Int32Array(16),I=new Int32Array(16);for(y=new Int32Array(u),d=0;d<u;d++)b[c[d]]++;for(I[1]=0,l=1;l<i;l++)I[l+1]=I[l]+b[l];for(d=0;d<u;d++)0!==c[d]&&(y[I[c[d]]++]=d);if(_=m=1<<(v=n),1===I[15]){for(h=0;h<_;++h)e[t+h]=new r(0,65535&y[0]);return _}for(h=0,d=0,l=1,f=2;l<=n;++l,f<<=1)for(;b[l]>0;--b[l])o(e,t+h,f,m,new r(255&l,65535&y[d++])),h=a(h,l);for(p=_-1,g=-1,l=n+1,f=2;l<=i;++l,f<<=1)for(;b[l]>0;--b[l])(h&p)!==g&&(t+=m,_+=m=1<<(v=s(b,l,n)),e[S+(g=h&p)]=new r(v+n&255,t-S-g&65535)),o(e,t+(h>>n),f,m,new r(l-n&255,65535&y[d++])),h=a(h,l);return _}},{}],9:[function(e,t,n){function r(e,t){this.offset=e,this.nbits=t}n.kBlockLengthPrefixCode=[new r(1,2),new r(5,2),new r(9,2),new r(13,2),new r(17,3),new r(25,3),new r(33,3),new r(41,3),new r(49,4),new r(65,4),new r(81,4),new r(97,4),new r(113,5),new r(145,5),new r(177,5),new r(209,5),new r(241,6),new r(305,6),new r(369,7),new r(497,8),new r(753,9),new r(1265,10),new r(2289,11),new r(4337,12),new r(8433,13),new r(16625,24)],n.kInsertLengthPrefixCode=[new r(0,0),new r(1,0),new r(2,0),new r(3,0),new r(4,0),new r(5,0),new r(6,1),new r(8,1),new r(10,2),new r(14,2),new r(18,3),new r(26,3),new r(34,4),new r(50,4),new r(66,5),new r(98,5),new r(130,6),new r(194,7),new r(322,8),new r(578,9),new r(1090,10),new r(2114,12),new r(6210,14),new r(22594,24)],n.kCopyLengthPrefixCode=[new r(2,0),new r(3,0),new r(4,0),new r(5,0),new r(6,0),new r(7,0),new r(8,0),new r(9,0),new r(10,1),new r(12,1),new r(14,2),new r(18,2),new r(22,3),new r(30,3),new r(38,4),new r(54,4),new r(70,5),new r(102,5),new r(134,6),new r(198,7),new r(326,8),new r(582,9),new r(1094,10),new r(2118,24)],n.kInsertRangeLut=[0,0,8,8,0,16,8,16,16],n.kCopyRangeLut=[0,8,0,8,16,0,16,8,16]},{}],10:[function(e,t,n){function r(e){this.buffer=e,this.pos=0}function i(e){this.buffer=e,this.pos=0}r.prototype.read=function(e,t,n){this.pos+n>this.buffer.length&&(n=this.buffer.length-this.pos);for(var r=0;r<n;r++)e[t+r]=this.buffer[this.pos+r];return this.pos+=n,n},n.BrotliInput=r,i.prototype.write=function(e,t){if(this.pos+t>this.buffer.length)throw new Error("Output buffer is not large enough");return this.buffer.set(e.subarray(0,t),this.pos),this.pos+=t,t},n.BrotliOutput=i},{}],11:[function(e,t,n){var r=e("./dictionary"),i=10,a=11;function o(e,t,n){this.prefix=new Uint8Array(e.length),this.transform=t,this.suffix=new Uint8Array(n.length);for(var r=0;r<e.length;r++)this.prefix[r]=e.charCodeAt(r);for(r=0;r<n.length;r++)this.suffix[r]=n.charCodeAt(r)}var s=[new o("",0,""),new o("",0," "),new o(" ",0," "),new o("",12,""),new o("",i," "),new o("",0," the "),new o(" ",0,""),new o("s ",0," "),new o("",0," of "),new o("",i,""),new o("",0," and "),new o("",13,""),new o("",1,""),new o(", ",0," "),new o("",0,", "),new o(" ",i," "),new o("",0," in "),new o("",0," to "),new o("e ",0," "),new o("",0,'"'),new o("",0,"."),new o("",0,'">'),new o("",0,"\n"),new o("",3,""),new o("",0,"]"),new o("",0," for "),new o("",14,""),new o("",2,""),new o("",0," a "),new o("",0," that "),new o(" ",i,""),new o("",0,". "),new o(".",0,""),new o(" ",0,", "),new o("",15,""),new o("",0," with "),new o("",0,"'"),new o("",0," from "),new o("",0," by "),new o("",16,""),new o("",17,""),new o(" the ",0,""),new o("",4,""),new o("",0,". The "),new o("",a,""),new o("",0," on "),new o("",0," as "),new o("",0," is "),new o("",7,""),new o("",1,"ing "),new o("",0,"\n\t"),new o("",0,":"),new o(" ",0,". "),new o("",0,"ed "),new o("",20,""),new o("",18,""),new o("",6,""),new o("",0,"("),new o("",i,", "),new o("",8,""),new o("",0," at "),new o("",0,"ly "),new o(" the ",0," of "),new o("",5,""),new o("",9,""),new o(" ",i,", "),new o("",i,'"'),new o(".",0,"("),new o("",a," "),new o("",i,'">'),new o("",0,'="'),new o(" ",0,"."),new o(".com/",0,""),new o(" the ",0," of the "),new o("",i,"'"),new o("",0,". This "),new o("",0,","),new o(".",0," "),new o("",i,"("),new o("",i,"."),new o("",0," not "),new o(" ",0,'="'),new o("",0,"er "),new o(" ",a," "),new o("",0,"al "),new o(" ",a,""),new o("",0,"='"),new o("",a,'"'),new o("",i,". "),new o(" ",0,"("),new o("",0,"ful "),new o(" ",i,". "),new o("",0,"ive "),new o("",0,"less "),new o("",a,"'"),new o("",0,"est "),new o(" ",i,"."),new o("",a,'">'),new o(" ",0,"='"),new o("",i,","),new o("",0,"ize "),new o("",a,"."),new o("",0,""),new o(" ",0,","),new o("",i,'="'),new o("",a,'="'),new o("",0,"ous "),new o("",a,", "),new o("",i,"='"),new o(" ",i,","),new o(" ",a,'="'),new o(" ",a,", "),new o("",a,","),new o("",a,"("),new o("",a,". "),new o(" ",a,"."),new o("",a,"='"),new o(" ",a,". "),new o(" ",i,'="'),new o(" ",a,"='"),new o(" ",i,"='")];function c(e,t){return e[t]<192?(e[t]>=97&&e[t]<=122&&(e[t]^=32),1):e[t]<224?(e[t+1]^=32,2):(e[t+2]^=5,3)}n.kTransforms=s,n.kNumTransforms=s.length,n.transformDictionaryWord=function(e,t,n,o,u){var l,d=s[u].prefix,h=s[u].suffix,f=s[u].transform,g=f<12?0:f-11,p=0,v=t;g>o&&(g=o);for(var m=0;m<d.length;)e[t++]=d[m++];for(n+=g,o-=g,f<=9&&(o-=f),p=0;p<o;p++)e[t++]=r.dictionary[n+p];if(l=t-o,f===i)c(e,l);else if(f===a)for(;o>0;){var _=c(e,l);l+=_,o-=_}for(var y=0;y<h.length;)e[t++]=h[y++];return t-v}},{"./dictionary":7}],12:[function(e,t,n){t.exports=e("./dec/decode").BrotliDecompressBuffer},{"./dec/decode":4}],13:[function(e,t,n){},{}]},{},[12])(12)},4075:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});var r=new Error("The current module is not licensed");r.error=-6;var i={noRedactionLicense:r,noeCompareLicense:new Error("The comparison module is not licensed")}},9996:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(6950);function i(e,t,n,i,a){var o=new XMLHttpRequest;return o.open("PUT",e,!1),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("cache-control","no-cache"),o.send(JSON.stringify({id:(0,r.Z)(),clientId:t,action:i,type:n,data:a})),o.responseText}},1183:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(5347),i=n(3850);const a=function(e,t,n,a){var o,s=new e.HeaderFooterContentGenerator,c=n.contentFormats,u=n.contents,l=[c.TopLeft||(u?[{type:"string",value:u.TopLeft}]:[]),c.TopCenter||(u?[{type:"string",value:u.TopCenter}]:[]),c.TopRight||(u?[{type:"string",value:u.TopRight}]:[]),c.BottomLeft||(u?[{type:"string",value:u.BottomLeft}]:[]),c.BottomCenter||(u?[{type:"string",value:u.BottomCenter}]:[]),c.BottomRight||(u?[{type:"string",value:u.BottomRight}]:[])];l=l.map(function(t){t.forEach(function(t){switch(t.type){case"string":return s.AddString((0,i.Dp)(e,t.value));case"pageNumber":return s.AddPageNumber({value:t.value});case"date":return s.AddDate({value:t.value})}});var n=s.GenerateContent();s.Clear();var r=n.toString().replace(/([^ ])<</g,"$1 <<");return(0,i.Dp)(e,r)}),s.delete();var d,h=new e.HeaderFooterContent;(o=h).Set.apply(o,(0,r._)(l)),d=a&&t.HasHeaderFooter()?t.GetEditableHeaderFooter():new e.HeaderFooter;var f="number"==typeof n.font?n.font:n.fontId,g=new e.Font({value:f||0}),p=new e.PageNumberRange;n.range?p.Set(n.range.start,n.range.end,{value:n.range.filter||0}):p.Set(1,t.GetPageCount(),{value:0});var v=new e.CFX_FloatRect;if(n.margin){var m=n.margin;v.left=m.left,v.bottom=m.bottom,v.top=m.top,v.right=m.right}return d.Set(g,n.textSize,n.textColor,p,v,n.hasTextShrinked,n.hasFixedSized,n.startPageNumber,h,!1,n.underline),h.delete(),p.delete(),v.delete(),d}},895:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(9227),i=n(7424),a=function(){function e(t,n){(0,r._)(this,e),this.pdfDoc=t,this.pdfObject=n}return(0,i._)(e,[{key:"getDict",value:function(){return this.pdfObject.GetDict()}}]),e}()},9754:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(9227),i=n(7424),a=n(6306);const o=function(){function e(){(0,r._)(this,e),this.isStandard=!1,this.fontName="",this.fontIns=""}return(0,i._)(e,[{key:"setDefaultFont",value:function(e,t){this.isStandard=e.IsStandardFont(t),this.isStandard&&(this.fontName=e.GetBaseFontName(t).toString()),this.fontIns=e}},{key:"getDefaultFont",value:function(e){return this.isStandard?new e.Font(this._getStandardID(this.fontName,e)):this.fontIns?this.fontIns:new e.Font(new e.WString((0,a.gO)()),0,0,0)}},{key:"getDefaultFontName",value:function(e){if(this.isStandard)return this.fontName;if(!this.fontIns)return(0,a.gO)();try{return this.fontIns.GetBaseFontName(e).toString()}catch(e){var t=this.fontIns.GetName().toString();return a.mz[t]||t}}},{key:"_getStandardID",value:function(e,t){var n=t.StandardID;return{Courier:n.e_StdIDCourier,"Courier-Bold":n.e_StdIDCourierB,"Courier-BoldOblique":n.e_StdIDCourierBI,"Courier-Oblique":n.e_StdIDCourierI,Helvetica:n.e_StdIDHelvetica,"Helvetica-Bold":n.e_StdIDHelveticaB,"Helvetica-BoldOblique":n.e_StdIDHelveticaBI,"Helvetica-Oblique":n.e_StdIDHelveticaI,"Times-Roman":n.e_StdIDTimes,"Times-Bold":n.e_StdIDTimesB,"Times-BoldItalic":n.e_StdIDTimesBI,"Times-Italic":n.e_StdIDTimesI,Symbol:n.e_StdIDSymbol,ZapfDingbats:n.e_StdIDZapfDingbats}[e]||n.e_StdIDHelvetica}},{key:"destroy",value:function(){this.fontIns=null}}]),e}()},7192:()=>{Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice})},2019:(e,t,n)=>{"use strict";function r(e,t,n){for(var r=e.Continue();r===t;)r=e.Continue();return e.delete(),r===n}n.d(t,{Z:()=>r})},2715:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={NeedToPauseNow:function(){return Date.now()-this.startTime>this.tick},startTick:function(e){this.tick=e,this.startTime=Date.now()}}},1703:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(4691),i=n(9227),a=n(7424),o=n(5467),s=n(5843),c=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;(0,i._)(this,e),this.top=t,this.left=n,this.bottom=r,this.right=a},u=function(e){function t(e){var n;return(0,i._)(this,t),(n=(0,r._)(this,t,[e])).Constructor=e.constructor,n}return(0,o._)(t,e),(0,a._)(t,[{key:"extract",value:function(){var e=this.target.left+this.offsetLeft,t=this.target.right+this.offsetRight,n=this.target.top+this.offsetTop,r=this.target.bottom+this.offsetBottom;return new this.Constructor(e,r,t,n)}}],[{key:"on",value:function(e){return new t(e)}}]),t}(function(){function e(t){(0,i._)(this,e),this.offsetLeft=0,this.offsetTop=0,this.offsetRight=0,this.offsetBottom=0,this.target=t}return(0,a._)(e,[{key:"moveLeft",value:function(e){return this.offsetLeft+=e,this.offsetRight+=e,this}},{key:"moveTop",value:function(e){return this.offsetTop+=e,this.offsetBottom+=e,this}},{key:"move",value:function(e,t){return this.moveLeft(e).moveTop(t)}},{key:"moveTo",value:function(e,t){return this.offsetLeft=this.offsetRight=this.target.left-e,this.offsetTop=this.offsetBottom=this.target.top-t,this}},{key:"shrink",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t;return this.add(new c(e,t,-n,-r))}},{key:"expand",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t;return this.add(new c(-e,-t,n,r))}},{key:"zoom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"center",r=this.target.right+this.offsetRight-(this.target.left+this.offsetLeft),i=this.target.bottom+this.offsetBottom-(this.target.top+this.offsetTop),a=r*e-r,o=i*e-i,s=0,u=0,l=0,d=0;switch(t){case"right":s=-a;break;case"center":s=-a/2,u=a/2;break;default:u=a}switch(n){case"bottom":l=-o;break;case"center":l=-o/2,d=o/2;break;default:d=o}return this.add(new c(l,s,d,u))}},{key:"add",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.top,n=void 0===t?0:t,r=e.left,i=void 0===r?n:r,a=e.bottom,o=void 0===a?n:a,s=e.right,c=void 0===s?i:s;return this.offsetLeft+=i,this.offsetRight+=c,this.offsetBottom+=o,this.offsetTop+=n,this}},{key:"extract",value:function(){var e=this.target.left+this.offsetLeft,t=this.target.right+this.offsetRight;return{left:e,top:this.target.top+this.offsetTop,right:t,bottom:this.target.bottom+this.offsetBottom}}},{key:"boundary",value:function(){var e=this.target.left+this.offsetLeft,t=this.target.right+this.offsetRight,n=this.target.top+this.offsetTop;return{left:e,top:n,width:t-e,height:this.target.bottom+this.offsetBottom-n}}},{key:"intersect",value:function(t){(0,s._)(t,e)||(t=e.on(t));var n=this.toPlainObject(),r=t.toPlainObject(),i={left:Math.max(n.left,r.left),right:Math.min(n.right,r.right),top:Math.max(n.top,r.top),bottom:Math.min(n.bottom,r.bottom)};return e.on(i)}},{key:"toPlainObject",value:function(){return{left:this.target.left+this.offsetLeft,right:this.target.right+this.offsetRight,top:this.target.top+this.offsetTop,bottom:this.target.bottom+this.offsetBottom}}},{key:"optimize",value:function(t){var n=this.toPlainObject(),r=n.left,i=n.right,a=n.top,o=n.bottom,s=t.left,c=t.right,u=t.top,l=t.bottom,d=function(e,t,n){return Math.max(t,Math.min(e,n))},h={left:d(r,s,c),right:d(i,s,c),top:d(a,u,l),bottom:d(o,u,l)},f=h.left,g=h.right,p=h.top,v=h.bottom;return Object.assign(h,{left:Math.min(f,g),right:Math.max(f,g),top:Math.min(p,v),bottom:Math.max(p,v)}),e.on(h)}}],[{key:"isOverlap",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Math.max(e.left,t.left),i=Math[n?"min":"max"](e.top,t.top),a=Math[n?"max":"min"](e.bottom,t.bottom),o=Math.min(e.right,t.right);if(r<=o)if(n){if(i>=a)return(o-r)*(i-a)}else if(i<=a)return(o-r)*(a-i);return 0}},{key:"isInRect",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e>=n.left&&e<=n.right)if(r){if(t>=n.bottom&&t<=n.top)return!0}else if(t<=n.bottom&&t>=n.top)return!0;return!1}},{key:"rectInRect",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!!(e.left>=t.left&&e.right<=t.right)&&(n?e.top<=t.top&&e.bottom>=t.bottom:e.top>=t.top&&e.bottom<=t.bottom)}},{key:"isSimilar",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(e.top-t.top)<n&&Math.abs(e.bottom-t.bottom)<n&&Math.abs(e.left-t.left)<n&&Math.abs(e.right-t.right)<n}},{key:"on",value:function(t){return new e(t)}},{key:"subtract",value:function(e,t){return new c(e.top-t.top,e.left-t.left,e.bottom-t.bottom,e.right-t.right)}},{key:"expandOffset",value:function(e,t){return new c(e.top-t.top,e.left-t.left,t.bottom-e.bottom,t.right-e.right)}},{key:"copyTo",value:function(e,t){t.left=e.left,t.top=e.top,t.right=e.right,t.bottom=e.bottom}}]),e}())},6867:(e,t,n)=>{"use strict";n.d(t,{I:()=>o,v:()=>a});var r,i,a,o,s=n(3850),c="create bitmap render fail";(i=navigator.userAgent.toLowerCase(),!(!("ActiveXObject"in self)||!(r=i.match(/msie ([\d\.]+)/)))&&10===parseInt(r[1]))?(o=function(e,t){var n=new e.Renderer(t,!1);if(n.IsEmpty())throw n.delete(),t.delete(),new Error(c);return n},a=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=t.GetWidth(),a=t.GetHeight(),o=new e.Image;o.AddFrame(t);var c=[],u=e.StreamCallback.implement({Release:function(){u.delete()},Flush:function(){return!0},GetSize:function(){return 0},WriteBlock:function(t,n,r){var i,a=e.HEAPU8.buffer;return i=a.slice?new Uint8Array(a.slice(t,t+r)):new Uint8Array(a,t,r),c.push(i),!0}});o.SaveAs(u,(0,s.Dp)(e,".png")),r&&(o.delete(),t.delete(),n.delete());var l="image/png";return{type:l,image:new Blob(c,{type:l}),width:i,height:a}}):(o=function(e,t){var n=new e.Renderer(t,!0);if(n.IsEmpty())throw n.delete(),t.delete(),new Error(c);return n},a=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t.GetFormat()!=e.DIBFormat.e_DIBRgb32&&t.GetFormat()!=e.DIBFormat.e_DIBArgb&&t.ConvertFormat(e.DIBFormat.e_DIBRgb32);var i,a=t.GetBuffer(),o=t.GetWidth(),s=t.GetHeight(),c=s*t.GetPitch(),u=a+c;return i=e.HEAPU8.buffer.slice?e.HEAPU8.buffer.slice(a,u):new Uint8Array(e.HEAPU8.buffer,a,c).buffer,r&&(n.delete(),t.delete()),{buffer:i,width:o,height:s}})},3850:(e,t,n)=>{"use strict";n.d(t,{Dp:()=>o,EY:()=>s,n5:()=>i});var r={};function i(e,t){var n=r[t];return n&&!n.isDeleted()||(r[t]=new e.String(t)),r[t]}var a={};function o(e,t){var n=a[t];return n&&!n.isDeleted()||(a[t]=new e.WString(t)),a[t]}function s(){for(var e in r){r[e].isDeleted()||r[e].delete(),delete r[e]}for(var t in a){var n=a[t];n.isDeleted()||n.delete(),delete a[t]}}},9134:(e,t,n)=>{"use strict";function r(e,t){(t<0||t>3)&&(t=(t%360+360)%360);var n=e.Rotation;n.e_Rotation0;switch(t){case 1:case 90:return n.e_Rotation90;case 2:case 180:return n.e_Rotation180;case 3:case 270:return n.e_Rotation270;default:return n.e_Rotation0}}n.d(t,{q:()=>r})},6781:(e,t,n)=>{"use strict";n.d(t,{Ii:()=>s,MW:()=>c,SU:()=>f,Yh:()=>d,ZX:()=>l,jj:()=>o});var r=n(5991),i=n(5147),a=n(3850);function o(e,t){return e.SummaryLayout["e_SummaryLayout".concat(t)]}function s(e,t){return e.FontSizeType["e_FontSize".concat(t)]}function c(e,t){return e.SortType["e_TypeSortBy".concat(t)]}var u={A0:[2384,3370],A1:[1684,2384],A2:[1191,1684],A3:[842,1191],A4:[595,842],A5:[420,595],A6:[298,420],"9_11":[648,792],"10_11":[720,792],"10_14":[720,1008],"11_17":[792,1224],"12_11":[864,792],"15_11":[1080,792],Letter:[612,792],Legal:[612,1008],Screen:[468,373],Tabloid:[792,1224],Ledger:[1224,792],Statement:[396,612],Executive:[522,756],Folio:[612,936],Quarto:[609,780],ANSI_C:[1224,1584],ANSI_D:[1584,2448],ANSI_E:[2448,3168],ANSI_F:[2016,2880],ARCH_A:[648,864],ARCH_B:[864,1296],ARCH_C:[1296,1728],ARCH_D:[1728,2592],ARCH_E:[2592,3456],ARCH_E1:[2160,3024],ARCH_E2:[1872,2736],ARCH_E3:[1944,2808],"B5_(ISO)":[499,709],"B4_(ISO)":[709,1001],"B2_(ISO)":[1417,2004],"B1_(ISO)":[2004,2835],"B5_(JIS)":[516,729],"B4_(JIS)":[729,1032],"B3_(JIS)":[1032,1460],"B2_(JIS)":[1460,2064],"B1_(JIS)":[2064,2920],"B0_(JIS)":[2920,4127]};function l(e){return u[e]}function d(e,t,n){var r=t.url,a=n.requestData("GET",!1,r);return i.Z.createImage(e,a).GetFrameBitmap(0)}var h=function(e){var t,n=e.AnnotationSummaryStringID;return t={},(0,r._)(t,n.e_AnnotationSummaryStringIDAuthor.value,"author"),(0,r._)(t,n.e_AnnotationSummaryStringIDDate.value,"date"),(0,r._)(t,n.e_AnnotationSummaryStringIDPage.value,"page"),(0,r._)(t,n.e_AnnotationSummaryStringIDType.value,"type"),(0,r._)(t,n.e_AnnotationSummaryStringIDDocumentTitle.value,"documentTitle"),(0,r._)(t,n.e_AnnotationSummaryStringIDPageTitle.value,"pageTitle"),(0,r._)(t,n.e_AnnotationSummaryStringIDNoAnnotations.value,"noAnnotations"),(0,r._)(t,n.e_AnnotationSummaryStringIDNumber.value,"number"),(0,r._)(t,n.e_AnnotationSummaryStringIDSubject.value,"subject"),t};function f(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})[h(e)[t.value]||""]||"";return new a.Dp(e,n)}},5567:(e,t,n)=>{"use strict";n.d(t,{$E:()=>x,$U:()=>S,FN:()=>v,J5:()=>P,KL:()=>b,Lg:()=>C,Np:()=>f,Ox:()=>w,PB:()=>I,Yv:()=>F,a_:()=>y,fE:()=>R,gM:()=>k,h2:()=>p,lm:()=>A,lo:()=>l,n6:()=>d,ol:()=>T,pw:()=>E,qQ:()=>_,uJ:()=>D,z4:()=>g});var r=n(9227),i=n(7424),a=n(2956),o=n(5347),s=n(3850);function c(e,t){var n=t.GetCatalog().GetElement((0,s.n5)(e,"DocESign"));return n?(n.GetType()==e.PDFObjectType.e_Reference&&(n=n.GetDirectObject()),n.GetDict()):null}function u(e,t){var n=c(e,t);if(n){var r=n.GetElement((0,s.n5)(e,"Signers"));if(r.GetType()==e.PDFObjectType.e_Array)return r.GetArray()}return null}function l(e,t){var n=u(e,t);if(!n)return[];for(var r=n.GetElementCount(),i=[],a=0;a<r;a++){var o=n.GetElement(a);o.GetType()===e.PDFObjectType.e_Reference&&(o=o.GetDirectObject()),o.GetType()===e.PDFObjectType.e_Dictionary&&(o=o.GetDict()),i.push(o)}return i}function d(e,t,n){var r=u(e,t);if(r){var i=r.GetElement(n-1);return i.GetType()===e.PDFObjectType.e_Reference&&(i=i.GetDirectObject()),i.GetType()===e.PDFObjectType.e_Dictionary&&(i=i.GetDict()),i}return null}function h(e,t,n){var r=t.GetElement((0,s.n5)(e,n));return r&&(r.GetType()===e.PDFObjectType.e_Reference&&(r=r.GetDirectObject()),r.GetType()===e.PDFObjectType.e_Dictionary&&(r=r.GetDict()),r.GetType()===e.PDFObjectType.e_Array&&(r=r.GetArray())),r}function f(e,t,n){var r=n.type,i=n.subType,a=n.id,o=new t.PDFDictionary.Create;return o.SetAtString((0,s.n5)(t,"Type"),(0,s.n5)(t,r)),o.SetAtString((0,s.n5)(t,"Subtype"),(0,s.n5)(t,i)),o.SetAtString((0,s.n5)(t,"ID"),(0,s.n5)(t,a)),e.AddIndirectObject(o),o}function g(e,t,n){var r=n.objNumber,i=function(e,t,n){var r=n.pageIndex,i=function(e){var n=[];e.GetType()==t.PDFObjectType.e_Reference&&(e=e.GetDirectObject()),e.GetType()==t.PDFObjectType.e_Dictionary&&(e=e.GetDict());var a=h(t,e,"Kids");if(a)for(var o=a.GetElementCount(),c=0;c<o;c++){var u=a.GetElement(c);if(u){u.GetType()==t.PDFObjectType.e_Reference&&(u=u.GetDirectObject()),u.GetType()==t.PDFObjectType.e_Dictionary&&(u=u.GetDict());var l=u.GetElement((0,s.n5)(t,"Type")).GetString().toString();if("Page"===l){if(n.push(u),n.length===r+1)return u}else{if("Pages"===l)return i(u);console.error("invalid kidDict type",l)}}}},a=e.GetCatalog().GetElement((0,s.n5)(t,"Pages"));return i(a)}(e,t,{pageIndex:n.pageIndex}),a=h(t,i,"Annots");if(a)for(var o=a.GetElementCount(),c=0;c<o;c++){var u=a.GetElement(c);if(u&&(u.GetType()==t.PDFObjectType.e_Reference&&(u=u.GetDirectObject()),u.GetType()==t.PDFObjectType.e_Dictionary&&(u=u.GetDict()),u.GetObjNum()===r))return u}}var p=function(e,t,n,r){var i=n.GetDict(),a=d(t,e,r);if(a){var c=a.GetObjNum(),u=function(e,t){var n,r,i=(n=function(t){var r=[];t.GetType()==e.PDFObjectType.e_Reference&&(t=t.GetDirectObject()),t.GetType()==e.PDFObjectType.e_Dictionary&&(t=t.GetDict());var i=h(e,t,"Kids");if(i)for(var a=i.GetElementCount(),c=0;c<a;c++){var u=i.GetElement(c);if(u){u.GetType()==e.PDFObjectType.e_Reference&&(u=u.GetDirectObject()),u.GetType()==e.PDFObjectType.e_Dictionary&&(u=u.GetDict());var l=u.GetElement((0,s.n5)(e,"Type")).GetString().toString();"Page"===l?r.push(u):"Pages"===l?r=(0,o._)(r).concat((0,o._)(n(u))):console.error("invalid kidDict type",l)}}return r},r=t.GetCatalog().GetElement((0,s.n5)(e,"Pages")),n(r)),a=i.map(function(t){var n=t.GetElement((0,s.n5)(e,"Annots"));n.GetType()==e.PDFObjectType.e_Reference&&(n=n.GetDirectObject()),n.GetType()==e.PDFObjectType.e_Array&&(n=n.GetArray());for(var r=[],i=n.GetElementCount(),a=0;a<i;a++){var o=n.GetElement(a);o.GetType()==e.PDFObjectType.e_Reference&&(o=o.GetDirectObject()),o.GetType()==e.PDFObjectType.e_Dictionary&&(o=o.GetDict()),r.push(o)}return r}),c=[];return a.forEach(function(e){c=(0,o._)(c).concat((0,o._)(e))}),c}(t,e);u.forEach(function(n){var r=h(t,n,"Signer");if(r&&r.GetObjNum()===c){var a=h(t,n,"FlowSignConfigInfo");a&&i.SetAtReference((0,s.n5)(t,"FlowSignConfigInfo"),a,e)}})}};function v(e,t,n,r){if(!["string","integer","boolean","pdfArray","pdfDict"].includes(r))throw new Error("invalid type");if(!t)return"";var i=t.GetElement((0,s.n5)(e,n));return i?"string"===r?i.GetString().toString():"integer"===r?i.GetInteger():"boolean"===r?i.GetBoolean():"pdfArray"===r?i.GetType()===e.PDFObjectType.e_Array?i.GetArray():"":"pdfDict"===r?m(e,i):void 0:""}function m(e,t){return t.GetType()===e.PDFObjectType.e_Reference&&(t=t.GetDirectObject()),t.GetType()===e.PDFObjectType.e_Dictionary&&(t=t.GetDict()),t}function _(e,t,n){var r={};r.authType=v(e,n,"AuthType","string"),r.color=v(e,n,"Color","string"),r.userName=v(e,n,"Name","string"),r.signOrder=v(e,n,"SignOrder","integer");var i=function(e,t){for(var n={email:"",phoneNumber:"",EnterpriseId:"",Enterprise:"",company:"",companyId:""},r=t.GetElementCount(),i=0;i<r;i++){var a=m(e,t.GetElement(i)),o=v(e,a,"Subtype","string");"Email"===o&&(n.email=v(e,a,"ID","string")),"Phone"===o&&(n.phoneNumber=v(e,a,"ID","string")),"EnterpriseId"===o&&(n.EnterpriseId=v(e,a,"ID","string")),"Enterprise"===o&&(n.Enterprise=v(e,a,"ID","string")),"Company"===o&&(n.company=v(e,a,"ID","string")),n.companyId=n.EnterpriseId}return n}(e,v(e,n,"AuthMethod","pdfArray"));return(r=(0,a._)({},r,i)).uniqueKey="".concat(r.email||"#","_").concat(r.phoneNumber||"#","_").concat(r.company||"#"),r}function y(e,t,n,r,i,a){var o={};(o=_(e,0,n)).freeRectItem=v(e,n,"FreeRectItem","boolean");var s=v(e,n,"Annots","pdfArray");"boolean"==typeof o.freeRectItem&&(o.freeRectItem||(o.annots=function(e,t,n,r,i,a){for(var o=[],s=n.GetElementCount(),c=0;c<s;c++){var u=S(e,t,m(e,n.GetElement(c)),r,i,a);o.push(u)}return o}(e,t,s,r,i,a)));var c=!1;return Array.isArray(o.annots)&&(o.annots=o.annots.map(function(e){return"FullSignature"!==e.type||e.isESignCNSignature||(c=!0),e.color=o.color,e.company=o.company,e.userName=o.userName,e})),o.illegalFillBehavior=c,o}function S(e,t,n,r,i,a){var o={};o.type=v(e,n,"FST","string");var c=v(e,n,"FoxitSignFT","string");if(o.foxitSignFieldType=function(e,t){var n;return"FullSignature"===e?(n=0,"FoxitSignDate"===t&&(n=1),"FoxitSignFreeRect"===t&&(n=2)):"Date"===e?n=3:"Title"===e&&(n=4),n}(o.type,c),"FullSignature"===o.type){var u=function(e,t,n){var r=new e.Signature(t,n),i={isESignCNSignature:!1,isPagingSig:!1,hasSigned:!1};if(r.IsSigned()){var a=r.GetSignatureDict();i.isESignCNSignature=!!a.GetElement((0,s.n5)(e,"Signer")),i.hasSigned=!0}else i.isESignCNSignature=!!n.GetElement((0,s.n5)(e,"Signer"));return r.GetSignatureType()===e.SignatureType.e_SignatureTypePagingSeal&&(i.isPagingSig=!0),i}(e,t,n),l=u.isESignCNSignature,d=u.isPagingSig;o.isESignCNSignature=l,o.isPagingSig=d}o.id=n.GetObjNum();var h=function(t){var n=v(e,t,"P","pdfDict");return n&&n.GetObjNum()}(n);return o.pageIndex=r.indexOf(h),o.pagingSigs=[],Array.isArray(i)&&(o.pagingSigs=function(e,t){var n=[];return t.forEach(function(t){t.findIndex(function(t){return t.objNum===e})>-1&&(n=t.map(function(e){return{id:e.objNum,pageIndex:e.pageIndex}}))}),n}(o.id,i)),o.fieldStatus=function(e,t,n,r,i){var a=0,o=1,s=2,c=a;if("FullSignature"===e){var u=["AP","N","Resources","XObject","FXX1","Resources","XObject","FXX2","Subtype"],l=["AP","Resources","XObject"],d=["N","FXX1","FXX2","FoxitSigAPN","IMG","Img"],h=["Subtype"],f=function(e,t,n){return t.reduce(function(e,t){if(!e)return null;var r,i,a=new n.String(t);if(l.includes(t)?i="Dictionary":d.includes(t)?i="Stream":h.includes(t)&&(i="String"),"Dictionary"===i){var o=e.GetElement(a);return o&&o.GetType()===n.PDFObjectType.e_Reference&&(o=o.GetDirectObject()),o&&o.GetType()===n.PDFObjectType.e_Dictionary&&(o=o&&o.GetDict()),o}return"Stream"===i?((r=e.GetElement(a))&&r.GetType()===n.PDFObjectType.e_Reference&&(r=r.GetDirectObject().GetStream()),r&&r.GetType()===n.PDFObjectType.e_Stream&&(r=r&&r.GetDictionary())):"String"===i&&(r=e.GetElement(a))&&(r=r.GetString().toString()),a.delete(),r},e)};c=n?f(t,["AP","N","Resources","XObject","FoxitSigAPN","Resources","XObject","IMG"],r)?o:a:"Image"===f(t,u,r)?o:a}var g=new r.String("Parent"),p=new r.String("V"),v=t.GetElement(p);if(!v){var m=t.GetElement(g);m&&m.GetType()===r.PDFObjectType.e_Reference&&m.GetDirectObject()&&m.GetDirectObject().GetDict()&&(v=m.GetDirectObject().GetDict().GetElement(p))}v&&("FullSignature"===e||i.getPDFString(v.GetString()).toString())&&(c=s);return g.delete(),p.delete(),c}(o.type,n,o.isPagingSig,e,a),o}function b(e,t,n,r,i,a){var o=function(e,t){for(var n=[],r=t.GetSignatureCount(),i=0;i<r;i++){var a=t.GetSignature(i);n.push(a)}return n}(0,t).filter(function(t){var n=t.GetDict();return"FoxitSignFreeRect"===v(e,n,"FoxitSignFT","string")}).map(function(e){return e.GetDict()});return o.forEach(function(o){var c,u=o.GetElement((0,s.n5)(e,"Signer")).GetDict().GetObjNum();if(r.forEach(function(e,t){e.GetObjNum()===u&&(c=t)}),"number"==typeof c){var l=S(e,t,o,i,a),d=n[c];Array.isArray(d.annots)?d.annots.push(l):d.annots=[l]}}),n}function I(e,t,n){var r={};return r.processId=v(e,n,"ProcessID","string"),r.docStore=v(e,n,"DocStore","integer"),r.taskName=v(e,n,"TaskName","string"),r}function A(e,t){var n={},r=c(e,t);return r?n=I(e,0,v(e,r,"FlowSignConfigInfo","pdfDict")):n}function P(e,t){var n=function(t){var r=[];t.GetType()==e.PDFObjectType.e_Reference&&(t=t.GetDirectObject()),t.GetType()==e.PDFObjectType.e_Dictionary&&(t=t.GetDict());var i=h(e,t,"Kids");if(i)for(var a=i.GetElementCount(),c=0;c<a;c++){var u=i.GetElement(c);if(u){u.GetType()==e.PDFObjectType.e_Reference&&(u=u.GetDirectObject()),u.GetType()==e.PDFObjectType.e_Dictionary&&(u=u.GetDict());var l=u.GetElement((0,s.n5)(e,"Type")).GetString().toString();"Page"===l?r.push(u.GetObjNum()):"Pages"===l?r=(0,o._)(r).concat((0,o._)(n(u))):console.error("invalid kidDict type",l)}}return r},r=t.GetCatalog().GetElement((0,s.n5)(e,"Pages"));return n(r)}function D(e,t){return!!c(e,t)}function E(e,t){return!c(e,t).GetElement((0,s.n5)(e,"FlowSignConfigInfo"))}function C(e){for(var t=[],n=e.GetPageCount(),r=0;r<n;r++)t.push(e.GetPage(r));return t}function w(e){for(var t=[],n=e.GetAnnotCount(),r=0;r<n;r++){var i=e.GetAnnot(r).GetDict();i&&t.push(i)}return t}function k(e,t){for(var n=0,r=0;r<t.length;r+=2)n+=t[r+1];for(var i=new Uint8Array(n),a=0,o=0;o<t.length;o+=2){var s=t[o],c=t[o+1],u=e.slice(s,s+c),l=new Uint8Array(u);i.set(l,a),a+=l.length}return i.buffer}function T(e,t,n){var r={};n=function(n){var r=l(e,t).map(function(e){return e.GetObjNum()});return n.forEach(function(e){e.signerIndex=r.indexOf(e.signerDictObjNum)}),n.sort(function(e,t){return e.signerIndex-t.signerIndex}),n}(n);var i={};n.forEach(function(e){var t=e.signerDictObjNum;i[t]||(i[t]=[]),i[t].push(e)});var a=Object.values(i);return r.configInfo={processId:a[0][0].processId,docStore:a[0][0].docStore,taskName:a[0][0].taskName},r.recipients=a.map(function(e,t){var n=e[0],r={},i=["id","company","fieldStatus","foxitSignFieldType","isESignCNSignature","isPagingSig","pagingSigs","pageIndex","type","userName"];return["Enterprise","EnterpriseId","color","company","companyId","email","phoneNumber","signOrder","uniqueKey","userName"].forEach(function(e){r[e]=n[e]}),r.illegalFillBehavior=e.some(function(e){return"FullSignature"===e.type&&!e.isESignCNSignature}),r.sort=t,r.annots=e.map(function(e){var t={};return i.forEach(function(n){t[n]=e[n]}),t}),r}),r}var F={ORDERED:1,PARTIAL:2,UNORDERED:3},G=function(){function e(){(0,r._)(this,e),this.cache={}}return(0,i._)(e,[{key:"set",value:function(e,t){var n=e.GetFileSizeOfSignedVersion();this.cache[n]=t}},{key:"get",value:function(e){if(!e.IsSigned())return"";var t=e.GetFileSizeOfSignedVersion();return this.cache[t]||""}},{key:"clear",value:function(){this.cache={}}}]),e}(),R=new G,x=new G},6131:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=function(e,t,n){var i=e.GetDict().GetObjNum();i!==n&&t.push(i);for(var a=e.GetSubActionCount(),o=0;o<a;o++){var s=e.GetSubAction(o);r(s,t,n)}e.RemoveAllSubActions()};const i=function(e,t,n,i){var a=[];if(r(n,a,i),a.length<1)return null;var o=a.shift();n=new e.Action(t,t.GetIndirectObject(o).GetDict());for(var s=0;s<a.length;s++){var c=a[s],u=new e.Action(t,t.GetIndirectObject(c).GetDict());n.InsertSubAction(a.length,u)}return n}},8851:(e,t,n)=>{"use strict";function r(e){return new Date(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.milliseconds)}function i(e){var t=new Date(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.milliseconds),n=e.utc_hour_offset,r=e.utc_minute_offset/60;n<0&&(r=-r);var i=-t.getTimezoneOffset()/60;return Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())+60*(i-n-r)*60*1e3}n.d(t,{B:()=>i,q:()=>r})},776:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(5843);function i(){for(var e=0,t=arguments.length;e<t;e++){a(arguments[e])}}function a(e){if((0,r._)(e,Array))for(var t=0,n=e.length;t<n;t++){a(e[t])}try{e.delete()}catch(e){}}},7292:(e,t,n)=>{"use strict";n.d(t,{CL:()=>s,Tg:()=>i,nT:()=>o,xF:()=>a});var r=n(7582);function i(e,t){var n=t;if(n){var r=0,i=!1;for(n--;n>0;){var a="string"==typeof e?e[n]:e.GetChars(n,1).toString();if(/[0-9a-zA-Z\s]/.test(a)||r++,/\s/.test(a)&&!i){var o="string"==typeof e?e[n-1]:e.GetChars(n-1,1).toString();void 0!==o&&/[0-9a-zA-Z]/.test(o)&&(i=!0)}else/\s/.test(a)&&i&&(i=!1,r++,n++);if(r>=1)break;if(t-n>=15)break;n--}}if("string"==typeof e)return e.substr(n,t-n);for(var s="",c=0;c<t-n;c++)s+=e.GetChars(n+c,1).toString();return s}function a(e,t){var n=t,r="string"==typeof e?e.length:e.GetCharCount();if(n<r)for(var i=0,a=!1;n<r;){var o="string"==typeof e?e[n]:e.GetChars(n,1).toString();if(/[0-9a-zA-Z\s]/.test(o)||i++,/\s/.test(o)&&!a){var s="string"==typeof e?e[n+1]:e.GetChars(n+1,1).toString();void 0!==s&&/[0-9a-zA-Z]/.test(s)&&(a=!0)}else/\s/.test(o)&&a&&(a=!1,i++,n--);if(i>=11)break;if(n-t>50)break;n++}if("string"==typeof e)return e.substr(t,n-t);for(var c="",u=0;u<n-t;u++)c+=e.GetChars(t+u,1).toString();return c}function o(e,t,n){var i,a,o,s,c,u,l,d,h,f,g;return(0,r.Jh)(this,function(r){switch(r.label){case 0:for(i=[],a=new e.WString(t),o=new e.WString(n),s=new RegExp(e.TextSearchUtils.GetStemmingText(a,!0).toString()),a.delete(),c=e.TextSearchUtils.GetStemmingText(o,!1).toString(),o.delete(),u=s.test(c),l=0;u&&null!==(d=s.exec(c.slice(l)));)h=d.index+l,f=d[0].length,i.push({index:h,length:f,oriWord:n.slice(h,h+f)}),l=d.index+l+1;g=0,r.label=1;case 1:return g<i.length?[4,i[g]]:[3,4];case 2:r.sent(),r.label=3;case 3:return g++,[3,1];case 4:return[2]}})}function s(e,t){var n=-1,r=t,i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{caseSensitive:!1,wholeWordsOnly:!1},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.replace(/\s+/g,"\\s+");n.wholeWordsOnly&&(i="\\b".concat(i,"\\b"));var a=n.caseSensitive?"g":"gi",o=new RegExp(i,a);o.lastIndex=r;var s=o.exec(e);return s?{index:s.index,matchedText:s[0],searchTerm:t,found:!0}:{index:-1,matchedText:null,searchTerm:t,found:!1}}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{caseSensitive:!1,wholeWordsOnly:!1},arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return i.found&&(n=i.index,r=i.matchedText),{pos:n,matchedText:r}}},1696:(e,t,n)=>{"use strict";n.d(t,{F5:()=>j,O1:()=>O,bs:()=>z,dX:()=>V,ew:()=>U,h1:()=>K,zF:()=>x});var r,i,a,o,s=n(5578),c=n(5991),u=n(5843),l=n(2956),d=n(9149),h=n(1730),f=n(9256),g=n(7582),p=n(3850),v=n(7731),m={e_StateUnknown:-2147483648,e_StateNoSignData:512,e_StateUnsigned:1,e_StateSigned:2,e_StateVerifyValid:4,e_StateVerifyInvalid:8,e_StateVerifyErrorData:16,e_StateVerifyNoSupportWay:32,e_StateVerifyErrorByteRange:64,e_StateVerifyChange:128,e_StateVerifyIncredible:256,e_StateVerifyNoChange:1024,e_StateVerifyIssueValid:4096,e_StateVerifyIssueUnknown:8192,e_StateVerifyIssueRevoke:16384,e_StateVerifyIssueExpire:32768,e_StateVerifyIssueUncheck:65536,e_StateVerifyIssueCurrent:131072,e_StateVerifyTimestampNone:262144,e_StateVerifyTimestampDoc:524288,e_StateVerifyTimestampValid:1048576,e_StateVerifyTimestampInvalid:2097152,e_StateVerifyTimestampExpire:4194304,e_StateVerifyTimestampIssueUnknown:8388608,e_StateVerifyTimestampIssueValid:16777216,e_StateVerifyTimestampTimeBefore:33554432,e_StateCertCannotGetVRI:67108864,e_StateVerifyChangeLegal:134217728,e_StateVerifyChangeIllegal:268435456,e_StateVerifyIssuerInvalid:536870912},_={e_SIG_VERIFY_VALID:0,e_SIG_VERIFY_INVALID:1,e_SIG_VERIFY_ERRORDATA:2,e_SIG_VERIFY_NOSUPPORTWAY:3,e_SIG_VERIFY_ERRORBYTERANGE:4,e_SIG_VERIFY_CHANGE:5,e_SIG_VERIFY_INCREDIBLE:6,e_SIG_VERIFY_ISSUER_VALID:65536,e_SIG_VERIFY_ISSUER_UNKNOW:131072,e_SIG_VERIFY_ISSUER_REVOKE:262144,e_SIG_VERIFY_ISSUER_EXPIRE:524288,e_SIG_VERIFY_ISSUER_UNCHECK:1048576,e_SIG_VERIFY_ISSUER_CURRENT:2097152,e_SIG_TIMESTAMP_NONE:4194304,e_SIG_TIMESTAMP_DOC:8388608,e_SIG_TIMESTAMP_VALID:16777216,e_SIG_TIMESTAMP_INVALID:33554432,e_SIG_TIMESTAMP_EXPIRE:67108864,e_SIG_TIMESTAMP_ISSUER_ISUNKNOW:134217728,e_SIG_TIMESTAMP_ISSUER_ISVALID:268435456,e_SIG_TIMESTAMP_TIMEBEFORE:536870912,e_SIG_VERIFY_ISSUER_INVALID:1073741824,e_SIG_VERIFY_ISSUER_ONESIGNER:2147483648},y={FR_SIG_TIMESTAMP_NONE:262144,FR_SIG_TIMESTAMP_DOC:524288,FR_SIG_TIMESTAMP_VALID:1048576,FR_SIG_TIMESTAMP_INVALID:2097152,FR_SIG_TIMESTAMP_EXPIRE:4194304,FR_SIG_TIMESTAMP_ISSUER_ISUNKNOWN:8388608,FR_SIG_TIMESTAMP_ISSUER_ISVALID:16777216,FR_SIG_TIMESTAMP_TIMEBEFORE:33554432},S={FPDTIMETYPE_CURRENTTIME:0,FPDTIMETYPE_SIGNTIME:1,FPDTIMETYPE_STAMPTIME:2,FPDTIMETYPE_VEROTIME:3},b={e_LTVStateInactive:0,e_LTVStateEnable:1,e_LTVStateNotEnable:2},I="unknown",A="unknown_certify",P=(r={},(0,c._)(r,I,"unknownMsg"),(0,c._)(r,A,"unknownMsg_certify"),(0,c._)(r,"unknownValidityMsg","unknownValidityMsg"),(0,c._)(r,"validMsg","validMsg"),(0,c._)(r,"validMsg_certify","validMsg_certify"),(0,c._)(r,"invalidMsg","invalidMsg"),(0,c._)(r,"invalidMsg_certify","invalidMsg_certify"),(0,c._)(r,"invalidMsg_Upper","invalidMsg_Upper"),(0,c._)(r,"errorSignatureMsg","errorSignatureMsg"),(0,c._)(r,"errorByteRangeMsg","errorByteRangeMsg"),(0,c._)(r,"errorByteRangeDetail","errorByteRangeDetail"),(0,c._)(r,"validInfo","validInfo"),(0,c._)(r,"validInfo_certify","validInfo_certify"),(0,c._)(r,"invalidInfo","invalidInfo"),(0,c._)(r,"invalidInfo_certify","invalidInfo_certify"),(0,c._)(r,"validityUnknownInfo","validityUnknownInfo"),r),D=(i={},(0,c._)(i,I,"verifyUnknown"),(0,c._)(i,"verifyNoChange","verifyNoChange_online"),(0,c._)(i,"verifyNoChange_certify","verifyNoChange_certify"),(0,c._)(i,"verifyFuture","verifyFuture"),(0,c._)(i,"verifyAlteredCorrupted","verifyAlteredCorrupted"),(0,c._)(i,"verifyChange","verifyChange_online"),(0,c._)(i,"verifyChange_certify","verifyChange_certify"),(0,c._)(i,"noSupportFormat","noSupportFormat"),(0,c._)(i,"noSupportHandler","verifyChange_certify"),(0,c._)(i,"e_StateVerifyChangeLegal","changeLegal"),(0,c._)(i,"e_StateVerifyChangeIllegal","changeIllegal"),i),E=(a={},(0,c._)(a,I,"issueUnknown"),(0,c._)(a,"issuerInvalid_mac","issuerInvalid_mac"),(0,c._)(a,"issuerInvalid","issuerInvalid"),(0,c._)(a,"issuerRevoke","issuerRevoke"),(0,c._)(a,"issuerExpire_mac","issuerExpire_mac"),(0,c._)(a,"issuerExpire","issuerExpire"),(0,c._)(a,"issuerCurrent","issuerCurrent"),(0,c._)(a,"issuerCurrent_certify","issuerCurrent_certify"),(0,c._)(a,"issuerValid","issuerValid"),(0,c._)(a,"issuerValidAndIssueRevoke","issuerValidAndIssueRevoke"),(0,c._)(a,"issuerIdentityUnknown","issuerIdentityUnknown"),(0,c._)(a,"identityValidAndUntrustedMsg","identityValidAndUntrustedMsg"),(0,c._)(a,"notVerifiedIdentityMsg","notVerifiedIdentityMsg"),(0,c._)(a,"e_StateVerifyIssueUnknown","issueUnknown"),(0,c._)(a,"e_StateVerifyIssueUncheck","issueUncheck"),a),C=(o={},(0,c._)(o,I,"timestampUnknown"),(0,c._)(o,"timestampExpire","timestampExpire_online"),(0,c._)(o,"timestampDoc","timestampDoc_online"),(0,c._)(o,"timestampNone","timestampNone_online"),(0,c._)(o,"timestampEmbeddedAndExpire","timestampEmbeddedAndExpire"),(0,c._)(o,"timestampEmbeddedAndExpire_mac","timestampEmbeddedAndExpire_mac"),(0,c._)(o,"timestampEmbeddedAndExpire_mac_panel","timestampEmbeddedAndExpire_mac_panel"),(0,c._)(o,"timestampEmbedded","timestampEmbedded"),(0,c._)(o,"timestampEmbedded_mac","timestampEmbedded_mac"),(0,c._)(o,"timestampEmbedded_mac_panel","timestampEmbedded_mac_panel"),(0,c._)(o,"timestampEmbeddedAndNotBeVerified","timestampEmbeddedAndNotBeVerified"),(0,c._)(o,"timestampSecure","timestampSecure"),(0,c._)(o,"e_StateVerifyTimestampIssueUnknown","timestampIssueUnknown"),o),w={validatedCurrentTime:"validatedCurrentTime",validatedSigningTime:"validatedSigningTime",validatedRevotime:"validatedRevotime",validatedTimeSecure:"validatedTimeSecure"},k={ltvEnabled:"ltvEnabled",ltvNotEnabled:"ltvNotEnabled"},T={illegalSignBehaviorStateMsgKey:"e-sign-china:verifySign.illegalSignBehavior"};function F(e){return e?k.ltvEnabled:k.ltvNotEnabled}function G(e,t){var n=e.isValid,r=e.isInvalid,i=e.isVerifyChange,a=e.hasErrorData,o=e.isErrorByteRange,s=e.isUnsupported,c=e.isTrustedCert,u=e.isIncredible,l=e.isIssuerInvalid,d=e.isIssuerRevoke,h=e.isIssuerExpire,f=e.isIssuerValid,g=e.isIssuerCurrent,p=e.isTimestampTimeBefore,v=e.isTimestampDoc,m=e.isTimestampExpire,_=e.isTimestampNone,y=e.isTimestampValid,S=e.isTimestampInvalid,b=e.isTimestampIssueValid,I=e.isLTVEnable,A="",w="",k="",T="",G="",R="";if(n)!c||d?t?d||(A=P.unknown_certify,k=D.verifyNoChange_certify):d||!c?(A=P.invalidMsg,k=D.verifyNoChange):A=P.unknown:(R=F(I),t?(A=P.validMsg_certify,k=D.verifyNoChange_certify):(A=P.validMsg,k=D.verifyNoChange));else if(a||o)A=P.errorSignatureMsg,w=P.errorByteRangeMsg;else if(r)A=P.invalidMsg_Upper,k=p?D.verifyFuture:D.verifyAlteredCorrupted;else if(i)A=c?t?P.validMsg_certify:P.validMsg:t?P.unknown_certify:P.unknown,k=t?D.verifyChange_certify:D.verifyChange;else{if(s)return{verifyInfoTitle:A=P.unknownValidityMsg,errorStatesMsgKey:w,changeStatesMsgKey:k,issuerStatesMsgKeys:T,timeStampStatesMsgKey:G,lTVStateMsgKey:R};if(u)return{verifyInfoTitle:A,errorStatesMsgKey:w,changeStatesMsgKey:k,issuerStatesMsgKeys:T,timeStampStatesMsgKey:G,lTVStateMsgKey:R};t?(A=P.unknown_certify,k=D.verifyNoChange_certify):(A=P.unknown,k=D.verifyNoChange)}return T=function(e,t){var n=e.isIssuerInvalid,r=e.isIssuerRevoke,i=e.isIssuerExpire,a=e.isIssuerValid,o=e.isIssuerCurrent,s=[];return n?s.push(E.issuerInvalid):r?s.push(E.issuerRevoke):i?s.push(E.issuerExpire):a&&o?t?s.push(E.issuerCurrent_certify):s.push(E.issuerCurrent):a?(s.push(E.issuerValid),r&&s.push(E.issuerValidAndIssueRevoke)):s.push(E.issuerIdentityUnknown),s}({isIssuerInvalid:l,isIssuerRevoke:d,isIssuerExpire:h,isIssuerValid:f,isIssuerCurrent:g},t),G=function(e){var t=e.isTimestampTimeBefore,n=e.isTimestampDoc,r=e.isTimestampExpire,i=e.isTimestampNone,a=e.isTimestampValid,o=e.isTimestampInvalid,s=e.isTimestampIssueValid,c="";return t?c:c=n?r?C.timestampExpire:C.timestampDoc:i?C.timestampNone:a||o?r?C.timestampEmbeddedAndExpire:s?C.timestampEmbeddedAndNotBeVerified:C.timestampEmbedded:C.timestampNone}({isTimestampTimeBefore:p,isTimestampDoc:v,isTimestampExpire:m,isTimestampNone:_,isTimestampValid:y,isTimestampInvalid:S,isTimestampIssueValid:b}),{verifyInfoTitle:A,errorStatesMsgKey:w,changeStatesMsgKey:k,issuerStatesMsgKeys:T,timeStampStatesMsgKey:G,lTVStateMsgKey:R}}function R(e,t,n,r){var i=n.States,a=e&i.e_StateVerifyValid.value,o=e&i.e_StateVerifyInvalid.value,s=e&i.e_StateVerifyErrorData.value,c=e&i.e_StateVerifyErrorByteRange.value,l=e&i.e_StateVerifyNoSupportWay.value,d=e&i.e_StateVerifyIncredible.value,h=e&i.e_StateVerifyChange.value,f=e&i.e_StateVerifyIssuerInvalid.value,g=e&i.e_StateVerifyIssueRevoke.value,p=e&i.e_StateVerifyIssueExpire.value,v=e&i.e_StateVerifyIssueValid.value,_=e&i.e_StateVerifyIssueCurrent.value,y=v,S=e&i.e_StateVerifyTimestampTimeBefore.value,I=e&i.e_StateVerifyTimestampDoc.value,A=e&i.e_StateVerifyTimestampExpire.value,P=e&i.e_StateVerifyTimestampNone.value,D=e&i.e_StateVerifyTimestampValid.value,E=e&i.e_StateVerifyTimestampInvalid.value,C=e&i.e_StateVerifyTimestampIssueValid.value,w=(0,u._)(t,Object)?t.value:t,k=w&n.LTVState.e_LTVStateEnable.value,T=function(e,t){var n=e.States,r=t&n.e_StateVerifyIssuerInvalid.value,i=t&n.e_StateVerifyIssueCurrent.value,a=t&n.e_StateVerifyIssueValid.value;return!r&&!i&&!a}(n,e),F=G({isValid:!!a,isInvalid:!!o,isVerifyChange:!!h,hasErrorData:!!s,isErrorByteRange:!!c,isUnsupported:!!l,isTrustedCert:!!y,isIncredible:!!d,isIssuerInvalid:!!f,isIssuerRevoke:!!g,isIssuerExpire:!!p,isIssuerValid:!!v,isIssuerCurrent:!!_,isTimestampTimeBefore:!!S,isTimestampDoc:!!I,isTimestampExpire:!!A,isTimestampNone:!!P,isTimestampValid:!!D,isTimestampInvalid:!!E,isTimestampIssueValid:!!C,isLTVEnable:!!k},r),R=F.errorStatesMsgKey,x=F.changeStatesMsgKey;return{isValid:!!a,isInvalid:!!o,hasErrorData:!!s,isErrorByteRange:!!c,isUnsupported:!!l,isVerifyChange:!!h,isIssuerInvalid:!!f,isIssuerRevoke:!!g,isIssuerExpire:!!p,isIssuerValid:!!v,isIssuerCurrent:!!_,isTimestampTimeBefore:!!S,isTimestampDoc:!!I,isTimestampExpire:!!A,isTimestampNone:!!P,isTimestampValid:!!D,isTimestampInvalid:!!E,isTimestampIssueValid:!!C,isTrustedCert:!!y,isLTVEnable:!!k,isIncredible:!!d,isShowIdentityValidAndUntrusted:T,verifyInfoTitleKey:F.verifyInfoTitle,verifyErrorStatesMsgKey:R,verifyChangeStatesMsgKey:x,verifyIssuerStatesMsgKeys:F.issuerStatesMsgKeys,verifyTimeStampStatesMsgKey:F.timeStampStatesMsgKey,verifyLTVEnableStateKey:F.lTVStateMsgKey,engineStatesConst:{States:m,LTVState:b},sigState:e,ltvState:t,ltvStateValue:w}}function x(e,t,n,r){for(var i=r.GetSize(),a=0;a<i;++a){var o=r.GetAt(a),s=o.GetSignatureName();s="object"===(void 0===s?"undefined":(0,f._)(s))?s.toString():s;var c=R(o.GetSignatureState(),o.GetLTVState(),n,t[s]);e[s]=(0,l._)({},c)}}function O(e){return(0,s._)(function(e){var t,n,r,i,a,o,s,c,u,l,d,h,f,p,v,m,k,G,R,x,O,B,L,j,U,W,H,K,z,V,J,Y,Z,q,X,Q,$,ee,te,ne,re,ie,ae,oe,se,ce,ue,le,de,he,fe,ge,pe,ve,me,_e,ye,Se,be,Ie,Ae,Pe,De,Ee,Ce,we,ke,Te,Fe,Ge,Re,xe,Oe,Me,Ne;return(0,g.Jh)(this,function(g){switch(g.label){case 0:return t=e.engine,n=e.verifyInfo,r=e.options,i=e.trustedCertificateList,a=e.JR,o=n.ltvState,s=n.checkedReturn,c=n.dataReturn,u=n.issuerReturn,l=n.verifyReturn,d=n.revocationType,h=n.isCertifiable,f=n.timestampReturn,p=n.timeType,v=n.hasSignerName,m=void 0===v||v,k=n.hasCheckedResult,G=void 0===k||k,R=n.notUseToCertify,x=void 0===R||R,O=r.isIllegalESignCNBehavior,B=function(e,t){var n=t.ltvState,r=t.checkedReturn,i=t.revocationType,a=(t.hasSignerName,t.hasCheckedResult),o=void 0===a||a,s=t.isCertifiable,c=e.RevocationType,u=c.REVOCATION_NONE.value,l=c.REVOCATION_OK.value,d=c.REVOCATION_REVOCATION.value,h=c.REVOCATION_CHAIN_REVOCATION.value,f=(c.REVOCATION_UNKOWN.value,e.States),g=f.e_StateVerifyValid.value,p=f.e_StateVerifyInvalid.value,v=f.e_StateVerifyErrorData.value,m=f.e_StateVerifyErrorByteRange.value,_=f.e_StateVerifyChange.value,y=f.e_StateVerifyIncredible.value,S=e.SignatureExtraStates,b=S.e_SIG_VERIFY_ISSUER_UNCHECK.value,E=S.e_SIG_VERIFY_ISSUER_VALID.value,C=S.e_SIG_VERIFY_ISSUER_INVALID.value,w=S.e_SIG_TIMESTAMP_TIMEBEFORE.value,k=(S.e_SIG_VERIFY_ISSUER_EXPIRE.value,""),T="",G="",R="",x="",O="",M=!1,N=!1,B=!1,L=!1,j=!1,U=!1,W=!1,H=!1,K=!1,z=!1,V=!1,J=!1,Y=!1;if(r&g){if(r&b)T=P.invalidInfo,k=P.invalidMsg,N=!0,H=!0;else if(r&E&&(i==l||i==u))M=!0,W=!0,T=s?P.validInfo_certify:P.validInfo,k=s?P.validMsg_certify:P.validMsg,O=F(n&e.LTVState.e_LTVStateEnable.value);else i==d||i==h||r&C?(T=P.invalidInfo,k=P.invalidMsg,N=!0,H=!0):(K=!0,T=P.validityUnknownInfo,k=s?P[A]:P[I]);V=!1,G=s?D.verifyNoChange_certify:D.verifyNoChange}else if(r&p)T=P.invalidInfo,k=P.invalidMsg,N=!0,H=!0,i==d||i==h||r&w||(V=!0,G=D.verifyAlteredCorrupted),r&w&&(V=!1,G=D.verifyFuture);else if(r&m||r&v)r&m?L=!0:r&v&&(B=!0),z=!0,k=P.errorSignatureMsg,R=P.errorByteRangeMsg,x=P.errorByteRangeDetail;else if(r&_)r&b?(K=!0,T=P.validityUnknownInfo,k=s?P[A]:P[I]):r&E?(M=!0,W=!0,T=s?P.validInfo_certify:P.validInfo,k=s?P.validMsg_certify:P.validMsg):(K=!0,T=P.validityUnknownInfo,k=s?P[A]:P[I]),J=!0,G=s?D.verifyChange_certify:D.verifyChange,Y=!0;else if(r&y)U=!0;else if(r&e.States.e_StateVerifyNoSupportWay.value){j=!0,K=!0;T=P.unknownValidityMsg,k=P.unknownValidityMsg,G=o?D.noSupportFormat:D.noSupportHandler}else K=!0,T=P.validityUnknownInfo,V=!1,s?(k=P.unknown_certify,G=D.verifyNoChange_certify):(k=P.unknown,G=D.verifyNoChange);return{verifyInfoTitleKey:k,verifyInfoDlgTitleKey:T,verifyChangeStatesMsgKey:G,verifyErrorStatesMsgKey:R,verifyErrorStatesDetailKey:x,verifyLTVEnableStateKey:O,isValid:M,isInvalid:N,hasErrorData:B,isErrorByteRange:L,isUnsupported:j,isIncredible:U,isVerifyChange:Y,isUnKnowEffectForAuditTrail:K,isValidForAuditTrail:W,isInValidForAuditTrail:H,isErrorForAuditTrail:z,isModifiedForAuditTrail:V,isModifiedWithAllowedForAuditTrail:J}}(t,n),L=B.verifyInfoTitleKey,j=B.verifyInfoDlgTitleKey,U=B.verifyChangeStatesMsgKey,W=B.verifyErrorStatesMsgKey,H=B.verifyErrorStatesDetailKey,K=B.verifyLTVEnableStateKey,z=B.isValid,V=B.isInvalid,J=B.hasErrorData,Y=B.isErrorByteRange,Z=B.isUnsupported,q=B.isVerifyChange,X=B.isIncredible,Q=B.isUnKnowEffectForAuditTrail,$=B.isValidForAuditTrail,ee=B.isInValidForAuditTrail,te=B.isErrorForAuditTrail,ne=B.isModifiedForAuditTrail,re=B.isModifiedWithAllowedForAuditTrail,ie={},ae={},oe={},Z&&X?[3,2]:(ie=function(e,t,n){var r=t.checkedReturn,i=t.revocationType,a=t.notUseToCertify,o=void 0===a||a,s=t.isCertifiable,c=e.RevocationType,u=c.REVOCATION_OK.value,l=c.REVOCATION_REVOCATION.value,d=c.REVOCATION_CHAIN_REVOCATION.value,h=e.SignatureExtraStates,f=h.e_SIG_VERIFY_ISSUER_UNCHECK.value,g=h.e_SIG_VERIFY_ISSUER_UNKNOW.value,p=h.e_SIG_VERIFY_ISSUER_INVALID.value,v=h.e_SIG_VERIFY_ISSUER_CURRENT.value,m=h.e_SIG_VERIFY_ISSUER_VALID.value,_=h.e_SIG_VERIFY_ISSUER_EXPIRE.value,y=[],S=!1,b=!1,I=!1,A=!1,P=!1,D=!1,C=!1,w=!1,k=!1;r&f?(k=!0,y.push(E.notVerifiedIdentityMsg)):(r&g?(C=!0,y.push(E.issuerIdentityUnknown)):r&p?(D=!0,y.push(E.issuerInvalid_mac),S=!0):i==l||i==d?(D=!0,y.push(E.issuerRevoke),b=!0):r&v?y.push(E[s?"issuerCurrent_certify":"issuerCurrent"]):r&m?(P=!0,y.push(E.issuerValid),i!==u&&(w=!0,y.push(E.issuerValidAndIssueRevoke)),I=!0):o?(y.push(E.identityValidAndUntrustedMsg),A=!0):(C=!0,y.push(E.issuerIdentityUnknown)),r&_&&1!=n&&(C=!0,y.push(E.issuerExpire_mac)));return{verifyIssuerStatesMsgKeys:y,isIssuerInvalid:S,isIssuerRevoke:b,isTrustedCert:I,isShowIdentityValidAndUntrusted:A,isIssuerUnKnowValidForAuditTrail:C,isIssuerValidForAuditTrail:P,isIssuerInvalidForAuditTrail:D,isIssuerValidAndRevokeForAuditTrail:w,isIssuerNotVerifiedForAuditTrail:k}}(t,n,o),ae=function(e){var t=e.timestampReturn,n=e.timeType,r=y.FR_SIG_TIMESTAMP_NONE,i=y.FR_SIG_TIMESTAMP_DOC,a=y.FR_SIG_TIMESTAMP_VALID,o=y.FR_SIG_TIMESTAMP_INVALID,s=y.FR_SIG_TIMESTAMP_EXPIRE,c=y.FR_SIG_TIMESTAMP_ISSUER_ISUNKNOWN,u=y.FR_SIG_TIMESTAMP_ISSUER_ISVALID,l=y.FR_SIG_TIMESTAMP_TIMEBEFORE,d=(S.FPDTIMETYPE_STAMPTIME,""),h="",f="",g=!1;t&r?(d=C.timestampNone,(f=M(n))==w.validatedTimeSecure&&(g=!0)):t&l||(t&i?(g=!0,d=t&s?C.timestampExpire:C.timestampDoc,f=t&o?w.validatedSigningTime:w.validatedTimeSecure):(t&s?(d=C.timestampEmbeddedAndExpire_mac,h=C.timestampEmbeddedAndExpire_mac_panel,g=!0):t&a&&t&u?(d=C.timestampEmbedded_mac,h=C.timestampEmbedded_mac_panel,g=!0):t&a&&t&c&&(d=C.timestampEmbeddedAndNotBeVerified,g=!0),(f=M(n))==w.validatedTimeSecure&&(g=!0)));d||(d=C.timestampNone);return h=h||d,{verifyTimeStampStatesMsgKey:d,verifyTimeStampStatesMsgKey_panel:h,verifySingingTimeStatesMsgKey:f,isTimestampSignature:g}}(n),[4,N(t,n,i,a)]);case 1:oe=g.sent(),g.label=2;case 2:return se=ae.verifyTimeStampStatesMsgKey,ce=void 0===se?"":se,ue=ae.verifyTimeStampStatesMsgKey_panel,le=void 0===ue?"":ue,de=ae.verifySingingTimeStatesMsgKey,he=ae.isTimestampSignature,fe=void 0!==he&&he,ge=oe.tsVerifyTimeString,pe=void 0===ge?"":ge,ve=oe.tsSignedTimeString,me=void 0===ve?"":ve,_e=oe.timestampAuthority,ye=void 0===_e?"":_e,Se=oe.timestampCertificateInfo,be=void 0===Se?{}:Se,Ie=ie.verifyIssuerStatesMsgKeys,Ae=void 0===Ie?[]:Ie,Pe=ie.isIssuerInvalid,De=void 0!==Pe&&Pe,Ee=ie.isIssuerRevoke,Ce=void 0!==Ee&&Ee,we=ie.isTrustedCert,ke=void 0!==we&&we,Te=ie.isShowIdentityValidAndUntrusted,Fe=void 0!==Te&&Te,Ge=ie.isIssuerValidForAuditTrail,Re=ie.isIssuerInvalidForAuditTrail,xe=ie.isIssuerUnKnowValidForAuditTrail,Oe=ie.isIssuerValidAndRevokeForAuditTrail,Me=ie.isIssuerNotVerifiedForAuditTrail,z&&Ae.includes(E.issuerValid)&&O&&(Ne=T.illegalSignBehaviorStateMsgKey),[2,{isValid:z,isInvalid:V,hasErrorData:J,isErrorByteRange:Y,isUnsupported:Z,isVerifyChange:q,isIncredible:X,isUnKnowEffectForAuditTrail:Q,isValidForAuditTrail:$,isInValidForAuditTrail:ee,isErrorForAuditTrail:te,isModifiedForAuditTrail:ne,isModifiedWithAllowedForAuditTrail:re,isIssuerInvalid:De,isIssuerRevoke:Ce,isTrustedCert:ke,isShowIdentityValidAndUntrusted:Fe,isIssuerValidForAuditTrail:Ge,isIssuerInvalidForAuditTrail:Re,isIssuerUnKnowValidForAuditTrail:xe,isIssuerValidAndRevokeForAuditTrail:Oe,isIssuerNotVerifiedForAuditTrail:Me,illegalSignBehaviorStateMsgKey:Ne,verifyInfoDlgTitleKey:j,verifyInfoTitleKey:L,verifyErrorStatesMsgKey:W,verifyErrorStatesDetailKey:H,verifyChangeStatesMsgKey:U,verifyIssuerStatesMsgKeys:Ae,verifyTimeStampStatesMsgKey:ce,verifyTimeStampStatesMsgKey_panel:le,verifySingingTimeStatesMsgKey:de,tsVerifyTimeString:pe,tsSignedTimeString:me,timestampAuthority:ye,isTimestampSignature:fe,timestampCertificateInfo:be,verifyLTVEnableStateKey:K,engineStatesConst:{States:_,LTVState:b},verifyInfo:{ltvState:o,checkedReturn:s,dataReturn:c,issuerReturn:u,verifyReturn:l,revocationType:d,isCertifiable:h,hasSignerName:m,hasCheckedResult:G,notUseToCertify:x,timestampReturn:f,timeType:p}}]}})}).apply(this,arguments)}function M(e){var t=S.FPDTIMETYPE_CURRENTTIME,n=S.FPDTIMETYPE_SIGNTIME,r=S.FPDTIMETYPE_VEROTIME;return e==t?w.validatedCurrentTime:e==n?w.validatedSigningTime:e==r?w.validatedRevotime:w.validatedTimeSecure}function N(e,t,n,r){return(0,s._)(function(){var i,a,o,s,c,u,l,d;return(0,g.Jh)(this,function(h){switch(h.label){case 0:return i=t.tsVerifyTime,a=t.tsSignedTime,o=t.timestampSigner,s=t.timestampCertList,c="",i&&"object"===(void 0===i?"undefined":(0,f._)(i))&&(c=(0,v.Z)(i.ToLocalTime(),"YYYY/MM/DD HH:mm:ss Z",{separator:"'",suffix:"'"})),u="",a&&"object"===(void 0===a?"undefined":(0,f._)(a))&&(u=(0,v.Z)(a.ToLocalTime(),"YYYY/MM/DD HH:mm:ss Z",{separator:"'",suffix:"'"})),l=o.toString(),[4,B(e,s,n,r)];case 1:return d=h.sent(),[2,{tsVerifyTimeString:c,tsSignedTimeString:u,timestampAuthority:l,timestampCertificateInfo:d}]}})})()}function B(e,t,n,r){return(0,s._)(function(){var i,a,o,s,c,u,l,d;return(0,g.Jh)(this,function(h){i={};try{if(a=new e.StringArray,(o=t.GetSize())>0){for(c=0;c<o;c++)for(u=t.GetAt(c),l=u.GetSize(),d=0;d<l;d++)0===c&&d===l-1&&(s=u.GetAt(d)),a.Add(u.GetAt(d));r.getAllTrustCert(n).forEach(function(e){return a.Add(e.cert)}),s&&(i=L({engine:e,allCerts:a,cert:s,JR:r,isTimestampCertificateInfo:!0}))}}catch(e){console.warn(e),i={}}return[2,i]})})()}function L(e){var t=e.engine,n=e.allCerts,r=e.cert,i=e.JR,a=e.isTimestampCertificateInfo,o=void 0!==a&&a,s={};try{var c=j(t,n,r,i),u=[],h="",f=[],g="",p=[],v="",m="";Object.keys(c).forEach(function(e,t){var n=c[e];n.forEach(function(e,r){var i=e.issuerChain,a=void 0===i?[]:i,s=e.issuerInfo,c=void 0===s?"":s,_=e.subjectChain,y=void 0===_?[]:_,S=e.subjectInfo,b=void 0===S?"":S,I=e.serialNumber,A=void 0===I?"":I,P=e.validPeriodFrom,D=void 0===P?"":P,E=e.validPeriodTo,C=void 0===E?"":E;if(o){var w=r+(0===t?t:1);u.push((0,d._)((0,l._)({},a[0]),{level:w,levelString:"".concat(t,"_").concat(w)})),f.push((0,d._)((0,l._)({},y[0]),{level:w,levelString:"".concat(t,"_").concat(w),isLeafNode:r===n.length-1}))}else u.push((0,l._)({},a[0])),f.push((0,l._)({},y[0]));h+="".concat(c,";"),g+="".concat(b,";"),p+="".concat(A,";"),v+="".concat(D,";"),m+="".concat(C,";")})}),h=h.slice(0,-1),g=g.slice(0,-1),p=p.slice(0,-1),v=v.slice(0,-1),m=m.slice(0,-1),s={issuerChain:u,issuerInfo:h,subjectChain:f,subjectInfo:g,serialNumber:p,validPeriodFrom:v,validPeriodTo:m}}catch(e){console.warn(e),s={}}return s}function j(e,t,n,r){var i={};try{var a=new e.StringArrayArray;e.GetChainByBFS(t,n,a);var o=a.GetSize(),s=[],c={},u=new Map;if(o>0)for(var l=0;l<o;l++){var d=a.GetAt(l),h=d.GetSize(),f="chain".concat(l+1);c[f]=[];for(var g=0;g<h;g++){var p=d.GetAt(g),v=z(e,p);c[f].push(v);var m=v.serialNumber,_=v.issuerChain,y=_[_.length-1]||{},S=y.country,b=y.issuerName,I="".concat(m,"_").concat(S,"_").concat(b);u.has(I)||(u.set(I,!0),s.push({uniqueSerialNumber:I,cert:p}))}}var A=new Map;for(var P in c)if(Object.hasOwnProperty.call(c,P)){var D=c[P].reverse(),E=D[0].serialNumber;A.has(E)||(i[P]=D,A.set(E,!0))}r.updateCertCacheMap(s)}catch(e){i={},console.warn(e)}return i}function U(e,t,n,r){var i=n.is_verify_signature,a=void 0===i||i,o=n.use_expired_tst,s=void 0===o||o,c=n.ignore_doc_info,u=void 0!==c&&c,l=n.time_type,d=void 0===l?0:l,h=n.isCertTrusted,f=n.isCertTrustedRoot,g=n.trustedCertificateList,p=void 0===g?[]:g,v=new e.VerifyParam;try{v.is_verify_signature=a,v.use_expired_tst=s,v.ignore_doc_info=u;var m=e.TimeType.values[d]||e.TimeType.e_SignatureCreationTime;v.time_type=m,v.verify_mode=e.VerifyMode.e_VerifyModeAcrobat;var _=V({engine:e,isCertTrusted:h,isCertTrustedRoot:f,trustedCertificateList:p,fieldCertificateInfo:t,JR:r});v.SetTrustedCertStoreCallback(_)}catch(e){console.log(e)}return v}function W(e){try{var t=JSON.parse(e);return{name:t.CN||"",email:t.E||"",orgUnit:t.OU||"",orgName:t.O||"",country:t.C||""}}catch(e){return{}}}function H(e){for(var t=e.info,n=e.serialNumber,r=e.validPeriodFrom,i=e.validPeriodTo,a=e.keyUsageInfo,o=e.cerFile,s=e.isIssuer,u=void 0===s||s,f=t.split(";"),g=n.split(";"),p=r.split(";"),v=i.split(";"),m=a.split(";"),_=[],y=f.length,S=0;S<y;S++){var b,I=f[S],A=W(I),P=A.name,D=(0,h._)(A,["name"]);_.push((0,d._)((0,l._)({},D),(b={},(0,c._)(b,u?"issuerInfo":"subjectInfo",I),(0,c._)(b,u?"issuerName":"subjectName",P),(0,c._)(b,"serialNumber",g[S]),(0,c._)(b,"validPeriodFrom",p[S]),(0,c._)(b,"validPeriodTo",v[S]),(0,c._)(b,"keyUsageStr",m[S]),(0,c._)(b,"isLeafNode",S===y-1),(0,c._)(b,"cerFile",o),b)))}return _}function K(e,t){return new Blob([new Uint8Array(e.HEAP8.slice(t.GetBuffer(),t.GetBuffer()+t.GetLength()))])}function z(e,t){var n=(0,p.n5)(e,"Issuer"),r=(0,p.n5)(e,"Subject"),i=(0,p.n5)(e,"SerialNumber"),a=(0,p.n5)(e,"ValidPeriodFrom"),o=(0,p.n5)(e,"ValidPeriodTo"),s=(0,p.n5)(e,"KeyUsage"),c=function(e){var t=e.issuerInfo,n=e.subjectInfo,r=e.serialNumber,i=e.validPeriodFrom,a=e.validPeriodTo,o=e.keyUsageInfo,s=e.cerFile;return{issuerChain:H({info:t,serialNumber:r,validPeriodFrom:i,validPeriodTo:a,keyUsageInfo:o,cerFile:s}),issuerInfo:t,subjectChain:H({info:n,serialNumber:r,validPeriodFrom:i,validPeriodTo:a,keyUsageInfo:o,cerFile:s,isIssuer:!1}),subjectInfo:n,serialNumber:r,validPeriodFrom:i,validPeriodTo:a}}({issuerInfo:e.GetCertificateInfo(t,n).toString(),subjectInfo:e.GetCertificateInfo(t,r).toString(),serialNumber:e.GetCertificateInfo(t,i).toString(),validPeriodFrom:e.GetCertificateInfo(t,a).toString(),validPeriodTo:e.GetCertificateInfo(t,o).toString(),keyUsageInfo:e.GetCertificateInfo(t,s).toString(),cerFile:K(e,t)});return c}function V(e){var t=e.engine,n=e.isCertTrusted,r=e.isCertTrustedRoot,i=e.trustedCertificateList,a=e.fieldCertificateInfo,o=void 0===a?{}:a,s=e.JR,c=function(e,n,r,i,a){var o=!1;if(void 0===n){if(e.length&&(o=function(e,n){var r=z(t,n)||{},i=r.subjectChain,a=r.issuerChain,o=(r.issuerInfo,r.subjectInfo,i.map(function(e,t){var n=e.serialNumber,r=e.country;return"".concat(n,"_").concat(r,"_").concat(a[t].issuerName)}));return e.some(function(e){return o.includes(e.uniqueSerialNumber)})}(e,i)),!o){var s=z(t,i)||{},c=s.subjectChain,u=s.issuerChain,l=c.map(function(e,t){var n=e.serialNumber,r=e.country;return"".concat(n,"_").concat(r,"_").concat(u[t].issuerName)});if(!a.subjectChain)return o;var d=a.subjectChain.map(function(e,t){var n=e.serialNumber,r=e.country;return"".concat(n,"_").concat(r,"_").concat(a.issuerChain[t].issuerName)});d.some(function(e){return l.includes(e)})&&(o=e.some(function(e){return d.includes(e.uniqueSerialNumber)}))}}else o=n;return o},u=s.getAllTrustCert(i),l=t.TrustedCertStoreCallback.implement({IsCertTrusted:function(e){return c(i,n,0,e,o)},IsCertTrustedRoot:function(e){return c(i,r,0,e,o)},IsTimestampCertTrusted:function(e,n){var a=function(e,t,n,r){var i={};try{var a,o=new e.StringArray;if(t.GetSize()>0){for(var s=t.GetSize(),c=0;c<s;c++)c===s-1&&(a=t.GetAt(c)),o.Add(t.GetAt(c));n.forEach(function(e){return o.Add(e.cert)}),a&&(i=L({engine:e,allCerts:o,cert:a,JR:r,isTimestampCertificateInfo:!0}))}}catch(e){console.warn(e),i={}}return i}(t,n,u,s);return c(i,r,0,e,a)}});return l}},9960:(e,t,n)=>{"use strict";n.d(t,{U:()=>g,Z:()=>f});var r=n(4691),i=n(9227),a=n(7424),o=n(5467),s=n(9256),c=n(8925),u="object"===("undefined"==typeof window?"undefined":(0,s._)(window))?window:"function"==typeof importScripts?self:{},l=u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,d=u.IDBTransaction||u.webkitIDBTransaction||u.msIDBTransaction,h={},f=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];(0,i._)(this,e),this.dbName=n,this.storeName=t,this.keyPath="id",this.version=r,this.indexArr=a}return(0,a._)(e,[{key:"_getDB",value:function(){var e=this,t=this.dbName,n=h[t];if(n)return n;var r=(0,c.dD)(),i=h[t]=r.promise,a=l.open(t,this.version),o=this.keyPath;return a.onerror=function(e){r.reject(e)},a.onupgradeneeded=function(t){var n=t.target.result;if(!n.objectStoreNames.contains(e.storeName)){var r=n.createObjectStore(e.storeName,{keyPath:o});e.indexArr.length&&e.indexArr.forEach(function(e){var t=e.indexKey,n=e.unique,i=void 0!==n&&n;r.createIndex(t,t,{unique:i})})}},a.onsuccess=function(e){r.resolve(e.target.result)},i}},{key:"set",value:function(e,t){var n=this;return l?this._getDB().then(function(r){var i=n.storeName,a=n.keyPath,o=r.transaction([i],d.READ_WRITE||"readwrite").objectStore(i),s={value:t};s[a]=e.toString();var u=o.put(s),l=(0,c.dD)();return u.onsuccess=function(e){l.resolve()},u.onerror=function(e){l.reject(e)},l.promise}):Promise.resolve()}},{key:"get",value:function(e){var t=this;return l?this._getDB().then(function(n){var r=(0,c.dD)(),i=t.storeName;if(!n.objectStoreNames.contains(i))return r.resolve();var a=n.transaction([i]).objectStore(i).get(e);return a.onsuccess=function(e){var t=e.target.result;if(!t)return r.resolve();r.resolve(t.value)},a.onerror=function(e){r.reject(e)},a.oncomplete=function(e){},r.promise}):Promise.resolve(null)}},{key:"getByIndex",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return l&&this.indexArr.some(function(t){return t.indexKey===e})?this._getDB().then(function(i){var a=(0,c.dD)(),o=n.storeName;if(!i.objectStoreNames.contains(o))return a.resolve();var s=i.transaction([o]).objectStore(o).index(e).openCursor(null,"next"),u=[];return s.onsuccess=function(n){var i=n.target.result;if(i){var o=i.value[e];return r?o.toLowerCase().indexOf(t.toLowerCase())>-1&&u.push(i.value):o===t&&u.push(i.value),void i.continue()}a.resolve(u)},s.onerror=function(e){a.reject(e)},s.oncomplete=function(e){},a.promise}):Promise.resolve(null)}},{key:"remove",value:function(e){var t=this;return l?this._getDB().then(function(n){var r=t.storeName;if(n.objectStoreNames.contains(r)){var i=n.transaction([r],d.READ_WRITE||"readwrite").objectStore(r).delete(e),a=(0,c.dD)();return i.onsuccess=function(e){a.resolve()},i.onerror=function(e){a.reject()},a.promise}}):Promise.resolve()}},{key:"clear",value:function(){var e=this;return l?this._getDB().then(function(t){var n=e.storeName;if(t.objectStoreNames.contains(n)){var r=t.transaction([n],d.READ_WRITE||"readwrite").objectStore(n).clear(),i=(0,c.dD)();return r.onsuccess=function(e){i.resolve()},r.onerror=function(e){i.reject()},i.promise}}):Promise.resolve()}},{key:"destroy",value:function(){var e=this.dbName;delete h[e],l&&l.deleteDatabase(e)}},{key:"getAllKeys",value:function(){var e=this;return l?this._getDB().then(function(t){var n=(0,c.dD)(),r=e.storeName;if(!t.objectStoreNames.contains(r))return n.resolve();var i=t.transaction([r]).objectStore(r).getAllKeys();return i.onsuccess=function(e){var t=e.target.result;if(!t)return n.resolve([]);n.resolve(t)},i.onerror=function(e){n.reject(e)},i.oncomplete=function(e){},n.promise}):Promise.resolve([])}}]),e}(),g=function(e){function t(e,n){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"id",c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return(0,i._)(this,t),(a=(0,r._)(this,t,[e,n,o,c])).keyPath=s,a}return(0,o._)(t,e),(0,a._)(t,[{key:"set",value:function(){throw new Error('This method is duplicated, please use "add" instead.')}},{key:"add",value:function(e){var t=this;return l?this._getDB().then(function(n){var r=t.storeName,i=(t.keyPath,n.transaction([r],d.READ_WRITE||"readwrite").objectStore(r).put(e)),a=(0,c.dD)();return i.onsuccess=function(e){a.resolve()},i.onerror=function(e){a.reject(e)},a.promise}):Promise.resolve()}},{key:"addItems",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(t)&&t.length&&l?this._getDB().then(function(n){for(var r=function(e){var n=t[e],r=a.put(n),i=(0,c.dD)();r.onsuccess=function(e){i.resolve()},r.onerror=function(e){i.reject(e)},s.push(i.promise)},i=e.storeName,a=(e.keyPath,n.transaction([i],d.READ_WRITE||"readwrite").objectStore(i)),o=t.length,s=[],u=0;u<o;u++)r(u);return Promise.all(s)}):Promise.resolve()}},{key:"update",value:function(e,t,n){var r=this;return l?this.get(e).then(function(e){return e[t]=n,r.add(e)}):Promise.resolve()}},{key:"get",value:function(e){var t=this;return l?this._getDB().then(function(n){var r=(0,c.dD)(),i=t.storeName;if(!n.objectStoreNames.contains(i))return r.resolve();var a=n.transaction([i]).objectStore(i).get(e);return a.onsuccess=function(e){var t=e.target.result;if(!t)return r.resolve();r.resolve(t)},a.onerror=function(e){r.reject(e)},a.oncomplete=function(e){},r.promise}):Promise.resolve(null)}},{key:"getAll",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return l?this._getDB().then(function(r){var i=(0,c.dD)(),a=e.storeName;if(!r.objectStoreNames.contains(a))return i.resolve();var o=r.transaction([a]).objectStore(a);if(IDBObjectStore.prototype.getAll){var s=o.getAll(t,n);return s.onsuccess=function(e){var t=e.target.result;if(!t)return i.resolve();i.resolve(t)},s.onerror=function(e){i.reject(e)},i.promise}var u=o.openCursor(t),l=[];return u.onsuccess=function(e){var t=e.target.result;t&&(l.push(t.value),void 0===n||l.length<n)?t.continue():i.resolve(l)},u.onerror=function(e){i.reject(e)},i.promise}):Promise.resolve(null)}},{key:"getAllKeys",value:function(e){var t=this;return l?this._getDB().then(function(n){var r=(0,c.dD)(),i=t.storeName;if(!n.objectStoreNames.contains(i))return r.resolve();var a=n.transaction([i]).objectStore(i);if(IDBObjectStore.prototype.getAllKeys){var o=a.getAllKeys(null,e);return o.onsuccess=function(e){var t=e.target.result;if(!t)return r.resolve();r.resolve(t)},o.onerror=function(e){r.reject(e)},r.promise}var s=a.openCursor(key),u=[];return s.onsuccess=function(t){var n=t.target.result;n&&(u.push(n.key),void 0===e||u.length<e)?n.continue():r.resolve(u)},s.onerror=function(e){r.reject(e)},r.promise}):Promise.resolve(null)}}]),t}(f)},3404:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={None:"none",RC4:"rc4",AES128:"aes128",AES256:"aes256"}},7189:(e,t,n)=>{"use strict";n.d(t,{Qk:()=>f,Ql:()=>u,M8:()=>a,cm:()=>l,YP:()=>h,pj:()=>d,WA:()=>s,E2:()=>c,R3:()=>r,f5:()=>g,Xt:()=>o,Bo:()=>i});const r={MARKED:"marked",UNMARKED:"unmarked",ACCEPTED:"accepted",REJECTED:"rejected",CANCELLED:"cancelled",COMPLETED:"completed",DEFERRED:"deferred",FUTURE:"future",NONE:"none"};var i={FIRST:0,LAST:1,AFTER:2,BEFORE:3,NEXT:2,PREV:3},a={SOLID:0,DASHED:1,UNDERLINE:2,BEVELED:3,INSET:4,CLOUDY:5,NOBORDER:6},o={MOVE_TO:1,LINE_TO:2,LINE_TO_CLOSE_FIGURE:3,BEZIER_TO:4,BEZIER_TO_CLOSE_FIGURE:5},s={LINE_ARROW:"LineArrow",LINE_DIMENSION:"LineDimension",POLYGON_CLOUD:"PolygonCloud",POLYGON_DIMENSION:"PolygonDimension",POLYLINE_DIMENSION:"PolyLineDimension",CIRCLE_DIMENSION:"CircleDimension",FREETEXT_TYPEWRITER:"FreeTextTypewriter",FREETEXT_CALLOUT:"FreeTextCallout",FREETEXT_TEXTBOX:"FreeTextTextbox",STRIKEOUT_TEXTEDIT:"StrikeOutTextEdit"},c={0:"None",1:"Square",2:"Circle",3:"Diamond",4:"OpenArrow",5:"ClosedArrow",6:"Butt",7:"ROpenArrow",8:"RClosedArrow",9:"Slash"},u=(Object.keys(c).reduce(function(e,t){return e[c[t]]=Number(t),e},{}),{0:"invisible",1:"hidden",2:"print",3:"nozoom",4:"norotate",5:"noview",6:"readonly",7:"locked",8:"togglenoview"}),l=(Promise.resolve(),""),d=200,h=258,f={ROLLOVER:"rollover",NORMAL:"normal",DOWN:"down"},g={ConnectedPDF:1,XFA:2,Redaction:3,RMS:4,OCR:5,Comparison:6,Compliance:7,Optimizer:8,Conversion:9,LayoutRecognition:10,AdvEdit:11,ThreeD:12}},6306:(e,t,n)=>{"use strict";n.d(t,{BD:()=>s,Cl:()=>u,O$:()=>l,T2:()=>a,Yq:()=>c,gO:()=>d,mz:()=>o,nY:()=>h});var r=n(4570),i={Courier:0,"Courier-Bold":1,"Courier-BoldOblique":2,"Courier-Oblique":3,Helvetica:4,"Helvetica-Bold":5,"Helvetica-BoldOblique":6,"Helvetica-Oblique":7,"Times-Roman":8,"Times-Bold":9,"Times-BoldItalic":10,"Times-Italic":11,Symbol:12,ZapfDingbats:13};function a(e){return i[e]}var o={FoxitFixedOTF:"Courier","FoxitFixedOTF-Bold":"Courier-Bold","FoxitFixedOTF-Italic":"Courier-Oblique","FoxitFixedOTF-BoldItalic":"Courier-BoldOblique",FoxitSansOTF:"Helvetica","FoxitSansOTF-Italic":"Helvetica-Oblique","FoxitSansOTF-Bold":"Helvetica-Bold","FoxitSansOTF-BoldItalic":"Helvetica-BoldOblique","FoxitSansPS-BoldItalic":"Helvetica-BoldOblique",FoxitSerifOTF:"Times-Roman","FoxitSerifOTF-Italic":"Times-Italic","FoxitSerifOTF-Bold":"Times-Bold","FoxitSerifOTF-BoldItalic":"Times-BoldItalic",FoxitSymbolOTF:"Symbol",FoxitDingbatsOTF:"ZapfDingbats"},s=[{name:"Times Roman",value:"Times-Roman"},{name:"Times Bold",value:"Times-Bold"},{name:"Times Italic",value:"Times-Italic"},{name:"Times BoldItalic",value:"Times-BoldItalic"},{name:"Helvetica",value:"Helvetica"},{name:"Helvetica Bold",value:"Helvetica-Bold"},{name:"Helvetica Oblique",value:"Helvetica-Oblique"},{name:"Helvetica BoldOblique",value:"Helvetica-BoldOblique"},{name:"Courier",value:"Courier"},{name:"Courier Bold",value:"Courier-Bold"},{name:"Courier Oblique",value:"Courier-Oblique"},{name:"Courier BoldOblique",value:"Courier-BoldOblique"},{name:"Symbol",value:"Symbol"},{name:"ZapfDingbats",value:"ZapfDingbats"}],c=function(e){var t=e.replace(/\s+/g,"").replace(/-/g,"");return o[t]},u=function(e){return s.some(function(t){return t.value.toLowerCase()===e.toLowerCase()})},l=function(e){return s.find(function(t){return t.value.toLowerCase()===e.toLowerCase()})},d=function(){return"Helvetica"},h=function(e){return f.filter(function(t){var n=(0,r._)(t,3)[2];return 0!==(e&n)}).map(function(e){return(0,r._)(e,1)[0]})},f=[[0,1,1],[238,1,2],[161,1,8],[162,1,16],[177,1,32],[178,1,64],[186,1,128],[163,1,256],[1,1,512],[222,1,65536],[128,1,1<<17],[134,1,1<<18],[129,1,1<<19],[136,1,1<<20]]},7731:(e,t,n)=>{"use strict";n.d(t,{K:()=>c,Z:()=>u});var r=n(9256),i=n(7484),a=n.n(i),o=n(8851),s=function(e,t,n){if(!e)return"";var i="";if("object"===(void 0===e?"undefined":(0,r._)(e))&&e.IsValid){if(!e.IsValid())return i;e=(0,o.q)(e)}var s=a()(e);if((t=t||"YYYY-MM-DD HH:mm:ss").indexOf("Z")>=0){n=Object.assign({separator:":",prefix:"",suffix:"",showSpace:!0},n);var c=s.format("Z");":"!==n.separator&&(c=c.replace(":",String(n.separator))),""!==n.prefix&&(c=String(n.prefix)+c),""!==n.suffix&&(c+=String(n.suffix)),t=t.replace(/\s+Z+|Z+/g,"");var u=n.showSpace?" ":"";i=s.format(t)+u+c}else i=s.format(t);return i},c=function(e){return"D:"+s(e,"YYYYMMDDHHmmssZ",{separator:"'",showSpace:!1})+"'"};const u=s},3397:(e,t,n)=>{"use strict";n.d(t,{vg:()=>i,yR:()=>r});var r=function(e){return e},i=function(e,t){return t[e]}},6950:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(3397);function i(){if("undefined"!=typeof window){if(window.crypto)return e=new Uint32Array(1),window.crypto.getRandomValues(e),e[0]/4294967296;if(window.msCrypto)return function(){var e=new Uint32Array(1);return window.msCrypto.getRandomValues(e),e[0]/4294967296}()}var e;return(0,r.vg)("random",Math)()}function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*i()|0;return("x"==e?t:3&t|8).toString(16)})}},6216:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={Unknown:-1,Signature:0,Encryption:1,SignatureAndEncryption:2}},5401:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=new Proxy({},{get:function(e,t){return function(){throw new Error("".concat(t," is not allowed to be called."))}}})},8843:(e,t,n)=>{"use strict";n.d(t,{Mp:()=>a,ZN:()=>i,k3:()=>o});var r=n(4099);var i={normal:0,italic:1,bold:2},a=(r.Us,{click:-1,keyStroke:7,format:8,validate:9,calculate:10,mouseEnter:11,mouseExit:12,mouseDown:13,mouseUp:14,onFocus:15,onBlur:16}),o={CUSTOM_TEXT:"type here to insert text",NAME:"author name",NAME_DATE_TIME:"author name, date and time",DATE_TIME:"date and time",DATE:"date"}},1301:(e,t,n)=>{"use strict";n.d(t,{fS:()=>r});var r={Unknown:0,PushButton:1,CheckBox:2,RadioButton:3,Text:6,ListBox:5,ComboBox:4,Sign:7,Barcode:8}},5318:(e,t,n)=>{"use strict";n.d(t,{AB:()=>y,AI:()=>S,LK:()=>d,LQ:()=>p,M7:()=>f,ZP:()=>A,eL:()=>l,ed:()=>h,oJ:()=>v,sg:()=>u,v6:()=>_,yd:()=>g});var r,i=n(9227),a=n(7424),o=n(5991),s=n(5843),c=n(4570),u=2,l=4,d=8,h=16,f=32,g=64,p=128,v=256,m=512,_=1024,y=2048,S=0,b=(r={},(0,o._)(r,f,["pageeditor",[],"initPageEditor"]),(0,o._)(r,g,["touchup",[m],"initTouchup"]),(0,o._)(r,d,["xfa",[m],"initXFA"]),(0,o._)(r,m,["lr",[]]),(0,o._)(r,u,["optimizer",[],"initOptimizer"]),(0,o._)(r,l,["exporter",[m,u],"initExporter"]),(0,o._)(r,h,["docprocess",[m],"initDocProcess"]),(0,o._)(r,p,["pageformat",[],"initPageFormat"]),(0,o._)(r,v,["compare",[m],"initCompare"]),(0,o._)(r,_,["openssl",[],"initOpenSSL"]),(0,o._)(r,y,["3d",[],"initMultimedia3D"]),(0,o._)(r,S,["ai",[m,u]]),r),I=function(){function e(){(0,i._)(this,e)}return(0,a._)(e,[{key:"init",value:function(e){this.path=e.enginePath,this.gsdk=e.engine,this.wasmModules={},this.wasmModulePromise=null}},{key:"loadWasmModuleSync",value:function(e){var t=this,n=this.gsdk,r=this.wasmModules;if(n.loadDynamicLibrary){if(r[e])return r[e];var i=(0,c._)(b[e],3),a=i[0],o=i[1],s=i[2];o.forEach(function(e){return t.loadWasmModuleSync(e)});var u=n.loadDynamicLibrary("".concat(a,".wasm"),{loadAsync:!1,global:!0,nodelete:!0});if(s)n[s]&&n[s](),"initOpenSSL"==s&&n.Library.LoadOpensslProvider();return r[e]=u,u}if(!r[e]){var l=(0,c._)(b[e],2)[1];n[l]&&n[l]()}r[e]=!0}},{key:"loadWasmModule",value:function(e){var t=this,n=this.gsdk,r=this.wasmModules;if(!n.loadDynamicLibrary){if(!r[e]){var i=(0,c._)(b[e],2)[1];n[i]&&n[i]()}return r[e]=!0,Promise.resolve()}if(r[e])return r[e];var a=(0,c._)(b[e],3),o=a[0],u=a[1],l=a[2],d=Promise.all(u.map(function(e){return t.loadWasmModule(e)}));return r[e]=d.then(function(){var e=n.loadDynamicLibrary("".concat(o,".wasm"),{loadAsync:!0,global:!0,nodelete:!0});(0,s._)(e,Promise)?e=e.then(function(){l&&(n[l]&&n[l](),"initOpenSSL"==l&&n.Library.LoadOpensslProvider())}):l&&n[l]&&n[l]();return e}),r[e]}}]),e}();const A=n.g.wm=new I},4581:(e,t,n)=>{var r;!function(){"use strict";(r=function(e,t,n,r){r=r||{},this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=r.flags||{},this.memoized={},this.loaded=!1;var i,a,o,s,c,u=this;if(e)if(u.dictionary=e,t&&n)g();else if("undefined"!=typeof window&&(window.chrome&&window.chrome.runtime||window.browser&&window.browser.runtime)){var l=window.chrome&&window.chrome.runtime?window.chrome.runtime:window.browser.runtime;i=r.dictionaryPath?r.dictionaryPath:"typo/dictionaries",t||d(l.getURL(i+"/"+e+"/"+e+".aff"),h),n||d(l.getURL(i+"/"+e+"/"+e+".dic"),f)}else i=r.dictionaryPath?r.dictionaryPath:"//dictionaries",t||d(i+"/"+e+"/"+e+".aff",h),n||d(i+"/"+e+"/"+e+".dic",f);function d(e,t){var n=u._readFile(e,null,null==r?void 0:r.asyncLoad);(null==r?void 0:r.asyncLoad)?n.then(function(e){t(e)}):t(n)}function h(e){t=e,n&&g()}function f(e){n=e,t&&g()}function g(){for(u.rules=u._parseAFF(t),u.compoundRuleCodes={},a=0,s=u.compoundRules.length;a<s;a++){var e=u.compoundRules[a];for(o=0,c=e.length;o<c;o++)u.compoundRuleCodes[e[o]]=[]}for(a in"ONLYINCOMPOUND"in u.flags&&(u.compoundRuleCodes[u.flags.ONLYINCOMPOUND]=[]),u.dictionaryTable=u._parseDIC(n),u.compoundRuleCodes)0===u.compoundRuleCodes[a].length&&delete u.compoundRuleCodes[a];for(a=0,s=u.compoundRules.length;a<s;a++){var i=u.compoundRules[a],l="";for(o=0,c=i.length;o<c;o++){var d=i[o];d in u.compoundRuleCodes?l+="("+u.compoundRuleCodes[d].join("|")+")":l+=d}u.compoundRules[a]=new RegExp("^"+l+"$","i")}u.loaded=!0,(null==r?void 0:r.asyncLoad)&&(null==r?void 0:r.loadedCallback)&&r.loadedCallback(u)}return this}).prototype={load:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);return this},_readFile:function(e,t,r){var i;if(t=t||"utf8","undefined"!=typeof XMLHttpRequest){var a=new XMLHttpRequest;if(a.open("GET",e,!!r),null===(i=a.overrideMimeType)||void 0===i||i.call(a,"text/plain; charset="+t),r){var o=new Promise(function(e,t){a.onload=function(){200===a.status?e(a.responseText):t(a.statusText)},a.onerror=function(){t(a.statusText)}});return a.send(null),o}return a.send(null),a.responseText}var s=n(2562);try{if(s.existsSync(e))return s.readFileSync(e,t);console.log("Path "+e+" does not exist.")}catch(e){console.log(e)}return""},_parseAFF:function(e){var t,n,r,i,a,o,s,c={},u=e.split(/\r?\n/);for(i=0,o=u.length;i<o;i++)if(t=(t=this._removeAffixComments(u[i])).trim()){var l=t.split(/\s+/),d=l[0];if("PFX"===d||"SFX"===d){var h=l[1],f=l[2],g=[];for(a=i+1,s=i+1+(n=parseInt(l[3],10));a<s;a++){var p=(r=u[a].split(/\s+/))[2],v=r[3].split("/"),m=v[0];"0"===m&&(m="");var _=this.parseRuleCodes(v[1]),y=r[4],S={add:m};_.length>0&&(S.continuationClasses=_),"."!==y&&(S.match="SFX"===d?new RegExp(y+"$"):new RegExp("^"+y)),"0"!=p&&(S.remove="SFX"===d?new RegExp(p+"$"):p),g.push(S)}c[h]={type:d,combineable:"Y"===f,entries:g},i+=n}else if("COMPOUNDRULE"===d){for(a=i+1,s=i+1+(n=parseInt(l[1],10));a<s;a++)r=(t=u[a]).split(/\s+/),this.compoundRules.push(r[1]);i+=n}else"REP"===d?3===(r=t.split(/\s+/)).length&&this.replacementTable.push([r[1],r[2]]):this.flags[d]=l[1]}return c},_removeAffixComments:function(e){return e.match(/^\s*#/)?"":e},_parseDIC:function(e){var t=(e=this._removeDicComments(e)).split(/\r?\n/),n={};function r(e,t){n.hasOwnProperty(e)||(n[e]=null),t.length>0&&(null===n[e]&&(n[e]=[]),n[e].push(t))}for(var i=1,a=t.length;i<a;i++){var o=t[i];if(o){var s=o.replace(/\s.*$/,"").split("/",2),c=s[0];if(s.length>1){var u=this.parseRuleCodes(s[1]);"NEEDAFFIX"in this.flags&&-1!==u.indexOf(this.flags.NEEDAFFIX)||r(c,u);for(var l=0,d=u.length;l<d;l++){var h=u[l],f=this.rules[h];if(f)for(var g=this._applyRule(c,f),p=0,v=g.length;p<v;p++){var m=g[p];if(r(m,[]),f.combineable)for(var _=l+1;_<d;_++){var y=u[_],S=this.rules[y];if(S&&S.combineable&&f.type!=S.type)for(var b=this._applyRule(m,S),I=0,A=b.length;I<A;I++){r(b[I],[])}}}h in this.compoundRuleCodes&&this.compoundRuleCodes[h].push(c)}}else r(c.trim(),[])}}return n},_removeDicComments:function(e){return e=e.replace(/^\t.*$/gm,"")},parseRuleCodes:function(e){if(e){if("FLAG"in this.flags){if("long"===this.flags.FLAG){for(var t=[],n=0,r=e.length;n<r;n+=2)t.push(e.substr(n,2));return t}return"num"===this.flags.FLAG?e.split(","):"UTF-8"===this.flags.FLAG?Array.from(e):e.split("")}return e.split("")}return[]},_applyRule:function(e,t){for(var n=t.entries,r=[],i=0,a=n.length;i<a;i++){var o=n[i];if(!o.match||e.match(o.match)){var s=e;if(o.remove&&(s=s.replace(o.remove,"")),"SFX"===t.type?s+=o.add:s=o.add+s,r.push(s),"continuationClasses"in o)for(var c=0,u=o.continuationClasses.length;c<u;c++){var l=this.rules[o.continuationClasses[c]];l&&(r=r.concat(this._applyRule(s,l)))}}}return r},check:function(e){if(!this.loaded)throw"Dictionary not loaded.";if(!e)return!1;var t=e.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(this.checkExact(t))return!0;if(t.toUpperCase()===t){var n=t[0]+t.substring(1).toLowerCase();if(this.hasFlag(n,"KEEPCASE"))return!1;if(this.checkExact(n))return!0;if(this.checkExact(t.toLowerCase()))return!0}var r=t[0].toLowerCase()+t.substring(1);if(r!==t){if(this.hasFlag(r,"KEEPCASE"))return!1;if(this.checkExact(r))return!0}return!1},checkExact:function(e){if(!this.loaded)throw"Dictionary not loaded.";var t,n,r=this.dictionaryTable[e];if(void 0===r){if("COMPOUNDMIN"in this.flags&&e.length>=this.flags.COMPOUNDMIN)for(t=0,n=this.compoundRules.length;t<n;t++)if(e.match(this.compoundRules[t]))return!0}else{if(null===r)return!0;if("object"==typeof r)for(t=0,n=r.length;t<n;t++)if(!this.hasFlag(e,"ONLYINCOMPOUND",r[t]))return!0}return!1},hasFlag:function(e,t,n){if(!this.loaded)throw"Dictionary not loaded.";return!(!(t in this.flags)||(void 0===n&&(n=Array.prototype.concat.apply([],this.dictionaryTable[e])),!n||-1===n.indexOf(this.flags[t])))},alphabet:"",suggest:function(e,t){if(!this.loaded)throw"Dictionary not loaded.";if(t=t||5,this.memoized.hasOwnProperty(e)){var n=this.memoized[e].limit;if(t<=n||this.memoized[e].suggestions.length<n)return this.memoized[e].suggestions.slice(0,t)}if(this.check(e))return[];for(var r=0,i=this.replacementTable.length;r<i;r++){var a=this.replacementTable[r];if(-1!==e.indexOf(a[0])){var o=e.replace(a[0],a[1]);if(this.check(o))return[o]}}if(!this.alphabet){this.alphabet="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ","TRY"in this.flags&&(this.alphabet+=this.flags.TRY),"WORDCHARS"in this.flags&&(this.alphabet+=this.flags.WORDCHARS);var s=this.alphabet.split("");s.sort();var c={};for(r=0;r<s.length;r++)c[s[r]]=!0;for(var r in this.alphabet="",c)this.alphabet+=r}var u=this;function l(e,t){var n,r,i,a,o={},s=u.alphabet.length;for(var c in e)for(n=0,i=c.length+1;n<i;n++){var l=[c.substring(0,n),c.substring(n)];if(l[1]&&(a=l[0]+l[1].substring(1),t&&!u.check(a)||(a in o?o[a]+=1:o[a]=1)),l[1].length>1&&l[1][1]!==l[1][0]&&(a=l[0]+l[1][1]+l[1][0]+l[1].substring(2),t&&!u.check(a)||(a in o?o[a]+=1:o[a]=1)),l[1]){var d=l[1].substring(0,1).toUpperCase()===l[1].substring(0,1)?"uppercase":"lowercase";for(r=0;r<s;r++){var h=u.alphabet[r];"uppercase"===d&&(h=h.toUpperCase()),h!=l[1].substring(0,1)&&(a=l[0]+h+l[1].substring(1),t&&!u.check(a)||(a in o?o[a]+=1:o[a]=1))}}if(l[1])for(r=0;r<s;r++){d=l[0].substring(-1).toUpperCase()===l[0].substring(-1)&&l[1].substring(0,1).toUpperCase()===l[1].substring(0,1)?"uppercase":"lowercase",h=u.alphabet[r];"uppercase"===d&&(h=h.toUpperCase()),a=l[0]+h+l[1],t&&!u.check(a)||(a in o?o[a]+=1:o[a]=1)}}return o}return this.memoized[e]={suggestions:function(e){var n,r,i=l(((n={})[e]=!0,n)),a=l(i,!0);for(var o in i)u.check(o)&&(o in a?a[o]+=i[o]:a[o]=i[o]);var s=[];for(r in a)a.hasOwnProperty(r)&&(u.hasFlag(r,"PRIORITYSUGGEST")&&(a[r]+=1e3),s.push([r,a[r]]));s.sort(function(e,t){var n=e[1],r=t[1];return n<r?-1:n>r?1:t[0].localeCompare(e[0])}).reverse();var c=[],d="lowercase";e.toUpperCase()===e?d="uppercase":e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase()===e&&(d="capitalized");var h=t;for(r=0;r<Math.min(h,s.length);r++)"uppercase"===d?s[r][0]=s[r][0].toUpperCase():"capitalized"===d&&(s[r][0]=s[r][0].substr(0,1).toUpperCase()+s[r][0].substr(1)),u.hasFlag(s[r][0],"NOSUGGEST")||-1!==c.indexOf(s[r][0])?h++:c.push(s[r][0]);return c}(e),limit:t},this.memoized[e].suggestions}}}(),e.exports=r},4231:function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){var t;switch(r(e)){case"string":return/Z$/.test(e)?0:(t=/([+-])(\d{2}):?(\d{2})/.exec(e))&&(+t[3]+60*t[2])*("+"===t[1]?1:-1);case"number":return Number.isNaN(e)?null:Math.abs(e)<16?60*e:e;default:return null}}n.r(t);var a=function(e,t,n){var r=String(e);return!r||r.length>=t?e:"".concat(Array(t+1-r.length).join(n)).concat(e)},o=function(e){var t=Math.abs(e),n=Math.floor(t/60),r=t%60;return"".concat(e<=0?"+":"-").concat(a(n,2,"0"),":").concat(a(r,2,"0"))};function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=(new Date).getTimezoneOffset(),u=Date.prototype;function l(e){return 6e4*(e-(arguments.length>1&&void 0!==arguments[1]?arguments[1]:c))}var d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.getTimezoneOffset();!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$d=new Date(t.getTime()-l(n)),this.$timezoneOffset=n}var t,n,r;return t=e,(n=[{key:"getTimezoneOffset",value:function(){return this.$timezoneOffset}},{key:"setTimezoneOffset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$timezoneOffset;this.$d.setTime(this.$d.getTime()+l(this.$timezoneOffset,e)),this.$timezoneOffset=e}}])&&s(t.prototype,n),r&&s(t,r),e}();["toDateString","toLocaleString","toLocaleDateString","toLocaleTimeString","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setYear","getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getYear"].forEach(function(e){d.prototype[e]=function(){return u[e].apply(this.$d,arguments)}}),["toISOString","toUTCString","toGMTString","toJSON","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","valueOf","getTime"].forEach(function(e){d.prototype[e]=function(){return u[e].apply(new Date(this.$d.getTime()+l(this.$timezoneOffset)),arguments)}}),["setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds"].forEach(function(e){d.prototype[e]=function(){var t=new Date(this.$d.getTime()+l(this.$timezoneOffset));u[e].apply(t,arguments),t.setTime(t.getTime()-l(this.$timezoneOffset)),this.$d=t}}),["toString","toTimeString"].forEach(function(e){d.prototype[e]=function(){return u[e].apply(this.$d,arguments).replace(/GMT(.*)$/,"GMT".concat(o(this.$timezoneOffset)))}});var h=d,f=!1,g=function(e,t){["clone","add","subtract","startOf"].forEach(function(n){e[n]=function(){var e=this.utcOffset();return t[n].apply(this,arguments).utcOffset(e)}}),e.utc=function(){return this.utcOffset(0)},e.local=function(){return this.utcOffset(-c)},e.utcOffset=function(e){if(void 0===e){var t=this.$d.getTimezoneOffset();return 0===t?0:-t}return null!==i(e)&&(this.$d.setTimezoneOffset(-i(e)),this.init()),this},e.toDate=function(){return new Date(this.$d.getTime())},e.isLocal=function(){return this.$d.getTimezoneOffset()===c},e.isUTC=function(){return 0===this.$d.getTimezoneOffset()},e.$set=function(){for(var e,n=this.$d.getTimezoneOffset(),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.$set).call.apply(e,[this].concat(i)),this.$d instanceof Date&&(this.$d=new h(this.$d,n)),this},e.parse=function(e){t.parse.call(this,e);var n=this.$d,r="string"==typeof e.date?i(e.date):null;this.$d=new h(n,null===r?c:-r),f&&this.local(),this.init()}};t.default=function(){var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;f=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).parseToLocal;var n=e.prototype,r=function(){};r.prototype=n;var a=new r;g(a,n),a.constructor=e.constructor,e.prototype=a,t.utc=function(e){var t=this(e);return"string"==typeof e&&null===i(e)&&(t.$d.$timezoneOffset=0),t.utc()}}}])},7990:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",i="second",a="minute",o="hour",s="day",c="week",u="month",l="quarter",d="year",h="date",f="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},m=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},_={s:m,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+m(r,2,"0")+":"+m(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,u),a=n-i<0,o=t.clone().add(r+(a?-1:1),u);return+(-(r+(n-i)/(a?i-o:o-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:d,w:c,d:s,D:h,h:o,m:a,s:i,ms:r,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",S={};S[y]=v;var b="$isDayjsObject",I=function(e){return e instanceof E||!(!e||!e[b])},A=function e(t,n,r){var i;if(!t)return y;if("string"==typeof t){var a=t.toLowerCase();S[a]&&(i=a),n&&(S[a]=n,i=a);var o=t.split("-");if(!i&&o.length>1)return e(o[0])}else{var s=t.name;S[s]=t,i=s}return!r&&i&&(y=i),i||!r&&y},P=function(e,t){if(I(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new E(n)},D=_;D.l=A,D.i=I,D.w=function(e,t){return P(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var E=function(){function v(e){this.$L=A(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[b]=!0}var m=v.prototype;return m.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(D.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(g);if(r){var i=r[2]-1||0,a=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(t)}(e),this.init()},m.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},m.$utils=function(){return D},m.isValid=function(){return!(this.$d.toString()===f)},m.isSame=function(e,t){var n=P(e);return this.startOf(t)<=n&&n<=this.endOf(t)},m.isAfter=function(e,t){return P(e)<this.startOf(t)},m.isBefore=function(e,t){return this.endOf(t)<P(e)},m.$g=function(e,t,n){return D.u(e)?this[t]:this.set(n,e)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(e,t){var n=this,r=!!D.u(t)||t,l=D.p(e),f=function(e,t){var i=D.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?i:i.endOf(s)},g=function(e,t){return D.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},p=this.$W,v=this.$M,m=this.$D,_="set"+(this.$u?"UTC":"");switch(l){case d:return r?f(1,0):f(31,11);case u:return r?f(1,v):f(0,v+1);case c:var y=this.$locale().weekStart||0,S=(p<y?p+7:p)-y;return f(r?m-S:m+(6-S),v);case s:case h:return g(_+"Hours",0);case o:return g(_+"Minutes",1);case a:return g(_+"Seconds",2);case i:return g(_+"Milliseconds",3);default:return this.clone()}},m.endOf=function(e){return this.startOf(e,!1)},m.$set=function(e,t){var n,c=D.p(e),l="set"+(this.$u?"UTC":""),f=(n={},n[s]=l+"Date",n[h]=l+"Date",n[u]=l+"Month",n[d]=l+"FullYear",n[o]=l+"Hours",n[a]=l+"Minutes",n[i]=l+"Seconds",n[r]=l+"Milliseconds",n)[c],g=c===s?this.$D+(t-this.$W):t;if(c===u||c===d){var p=this.clone().set(h,1);p.$d[f](g),p.init(),this.$d=p.set(h,Math.min(this.$D,p.daysInMonth())).$d}else f&&this.$d[f](g);return this.init(),this},m.set=function(e,t){return this.clone().$set(e,t)},m.get=function(e){return this[D.p(e)]()},m.add=function(r,l){var h,f=this;r=Number(r);var g=D.p(l),p=function(e){var t=P(f);return D.w(t.date(t.date()+Math.round(e*r)),f)};if(g===u)return this.set(u,this.$M+r);if(g===d)return this.set(d,this.$y+r);if(g===s)return p(1);if(g===c)return p(7);var v=(h={},h[a]=t,h[o]=n,h[i]=e,h)[g]||1,m=this.$d.getTime()+r*v;return D.w(m,this)},m.subtract=function(e,t){return this.add(-1*e,t)},m.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=D.z(this),a=this.$H,o=this.$m,s=this.$M,c=n.weekdays,u=n.months,l=n.meridiem,d=function(e,n,i,a){return e&&(e[n]||e(t,r))||i[n].slice(0,a)},h=function(e){return D.s(a%12||12,e,"0")},g=l||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(p,function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return D.s(t.$y,4,"0");case"M":return s+1;case"MM":return D.s(s+1,2,"0");case"MMM":return d(n.monthsShort,s,u,3);case"MMMM":return d(u,s);case"D":return t.$D;case"DD":return D.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(n.weekdaysMin,t.$W,c,2);case"ddd":return d(n.weekdaysShort,t.$W,c,3);case"dddd":return c[t.$W];case"H":return String(a);case"HH":return D.s(a,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return g(a,o,!0);case"A":return g(a,o,!1);case"m":return String(o);case"mm":return D.s(o,2,"0");case"s":return String(t.$s);case"ss":return D.s(t.$s,2,"0");case"SSS":return D.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")})},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,h,f){var g,p=this,v=D.p(h),m=P(r),_=(m.utcOffset()-this.utcOffset())*t,y=this-m,S=function(){return D.m(p,m)};switch(v){case d:g=S()/12;break;case u:g=S();break;case l:g=S()/3;break;case c:g=(y-_)/6048e5;break;case s:g=(y-_)/864e5;break;case o:g=y/n;break;case a:g=y/t;break;case i:g=y/e;break;default:g=y}return f?g:D.a(g)},m.daysInMonth=function(){return this.endOf(u).$D},m.$locale=function(){return S[this.$L]},m.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=A(e,t,!0);return r&&(n.$L=r),n},m.clone=function(){return D.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},v}(),C=E.prototype;return P.prototype=C,[["$ms",r],["$s",i],["$m",a],["$H",o],["$W",s],["$M",u],["$y",d],["$D",h]].forEach(function(e){C[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),P.extend=function(e,t){return e.$i||(e(t,E,P),e.$i=!0),P},P.locale=A,P.isDayjs=I,P.unix=function(e){return P(1e3*e)},P.en=S[y],P.Ls=S,P.p={},P}()},8990:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={s:"ein paar Sekunden",m:["eine Minute","einer Minute"],mm:"%d Minuten",h:["eine Stunde","einer Stunde"],hh:"%d Stunden",d:["ein Tag","einem Tag"],dd:["%d Tage","%d Tagen"],M:["ein Monat","einem Monat"],MM:["%d Monate","%d Monaten"],y:["ein Jahr","einem Jahr"],yy:["%d Jahre","%d Jahren"]};function i(e,t,n){var i=r[n];return Array.isArray(i)&&(i=i[t?0:1]),i.replace("%d",e)}var a={name:"de",weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sept._Okt._Nov._Dez.".split("_"),ordinal:function(e){return e+"."},weekStart:1,yearStart:4,formats:{LTS:"HH:mm:ss",LT:"HH:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},relativeTime:{future:"in %s",past:"vor %s",s:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i}};return n.default.locale(a,null,!0),a}(n(7990))},4883:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinal:function(e){return e+""}};return n.default.locale(r,null,!0),r}(n(7990))},5522:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"fr",weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(e){return e+(1===e?"er":"")}};return n.default.locale(r,null,!0),r}(n(7990))},890:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"it",weekdays:"domenica_luned_marted_mercoled_gioved_venerd_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),weekStart:1,monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"tra %s",past:"%s fa",s:"qualche secondo",m:"un minuto",mm:"%d minuti",h:"un' ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinal:function(e){return e+""}};return n.default.locale(r,null,!0),r}(n(7990))},859:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"ja",weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),ordinal:function(e){return e+""},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMD dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMD(ddd) HH:mm"},meridiem:function(e){return e<12?"":""},relativeTime:{future:"%s",past:"%s",s:"",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"}};return n.default.locale(r,null,!0),r}(n(7990))},5576:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"ko",weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),ordinal:function(e){return e+""},formats:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY MMMM D",LLL:"YYYY MMMM D A h:mm",LLLL:"YYYY MMMM D dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY MMMM D",lll:"YYYY MMMM D A h:mm",llll:"YYYY MMMM D dddd A h:mm"},meridiem:function(e){return e<12?"":""},relativeTime:{future:"%s ",past:"%s ",s:" ",m:"1",mm:"%d",h:" ",hh:"%d",d:"",dd:"%d",M:" ",MM:"%d",y:" ",yy:"%d"}};return n.default.locale(r,null,!0),r}(n(7990))},3765:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"nl",weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),ordinal:function(e){return"["+e+(1===e||8===e||e>=20?"ste":"de")+"]"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"een minuut",mm:"%d minuten",h:"een uur",hh:"%d uur",d:"een dag",dd:"%d dagen",M:"een maand",MM:"%d maanden",y:"een jaar",yy:"%d jaar"}};return n.default.locale(r,null,!0),r}(n(7990))},1128:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"zh-cn",weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),ordinal:function(e,t){return"W"===t?e+"":e+""},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMDAhmm",LLLL:"YYYYMDddddAhmm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},relativeTime:{future:"%s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},meridiem:function(e,t){var n=100*e+t;return n<600?"":n<900?"":n<1100?"":n<1300?"":n<1800?"":""}};return n.default.locale(r,null,!0),r}(n(7990))},7074:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"zh-hk",months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),ordinal:function(e,t){return"W"===t?e+"":e+""},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMDdddd HH:mm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},relativeTime:{future:"%s",past:"%s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},meridiem:function(e,t){var n=100*e+t;return n<600?"":n<900?"":n<1100?"":n<1300?"":n<1800?"":""}};return n.default.locale(r,null,!0),r}(n(7990))},579:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r={name:"zh-tw",weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),ordinal:function(e,t){return"W"===t?e+"":e+""},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMDdddd HH:mm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},relativeTime:{future:"%s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},meridiem:function(e,t){var n=100*e+t;return n<600?"":n<900?"":n<1100?"":n<1300?"":n<1800?"":""}};return n.default.locale(r,null,!0),r}(n(7990))},1434:function(e){e.exports=function(){"use strict";return function(e,t){var n=t.prototype,r=n.format;n.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return r.bind(this)(e);var i=this.$utils(),a=(e||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(e){switch(e){case"Q":return Math.ceil((t.$M+1)/3);case"Do":return n.ordinal(t.$D);case"gggg":return t.weekYear();case"GGGG":return t.isoWeekYear();case"wo":return n.ordinal(t.week(),"W");case"w":case"ww":return i.s(t.week(),"w"===e?1:2,"0");case"W":case"WW":return i.s(t.isoWeek(),"W"===e?1:2,"0");case"k":case"kk":return i.s(String(0===t.$H?24:t.$H),"k"===e?1:2,"0");case"X":return Math.floor(t.$d.getTime()/1e3);case"x":return t.$d.getTime();case"z":return"["+t.offsetName()+"]";case"zzz":return"["+t.offsetName("long")+"]";default:return e}});return r.bind(this)(a)}}}()},7983:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\d/,r=/\d\d/,i=/\d\d?/,a=/\d*[^-_:/,()\s\d]+/,o={},s=function(e){return(e=+e)+(e>68?1900:2e3)},c=function(e){return function(t){this[e]=+t}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e)return 0;if("Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),n=60*t[1]+(+t[2]||0);return 0===n?0:"+"===t[0]?-n:n}(e)}],l=function(e){var t=o[e];return t&&(t.indexOf?t:t.s.concat(t.f))},d=function(e,t){var n,r=o.meridiem;if(r){for(var i=1;i<=24;i+=1)if(e.indexOf(r(i,0,t))>-1){n=i>12;break}}else n=e===(t?"pm":"PM");return n},h={A:[a,function(e){this.afternoon=d(e,!1)}],a:[a,function(e){this.afternoon=d(e,!0)}],Q:[n,function(e){this.month=3*(e-1)+1}],S:[n,function(e){this.milliseconds=100*+e}],SS:[r,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[i,c("seconds")],ss:[i,c("seconds")],m:[i,c("minutes")],mm:[i,c("minutes")],H:[i,c("hours")],h:[i,c("hours")],HH:[i,c("hours")],hh:[i,c("hours")],D:[i,c("day")],DD:[r,c("day")],Do:[a,function(e){var t=o.ordinal,n=e.match(/\d+/);if(this.day=n[0],t)for(var r=1;r<=31;r+=1)t(r).replace(/\[|\]/g,"")===e&&(this.day=r)}],w:[i,c("week")],ww:[r,c("week")],M:[i,c("month")],MM:[r,c("month")],MMM:[a,function(e){var t=l("months"),n=(l("monthsShort")||t.map(function(e){return e.slice(0,3)})).indexOf(e)+1;if(n<1)throw new Error;this.month=n%12||n}],MMMM:[a,function(e){var t=l("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,c("year")],YY:[r,function(e){this.year=s(e)}],YYYY:[/\d{4}/,c("year")],Z:u,ZZ:u};function f(n){var r,i;r=n,i=o&&o.formats;for(var a=(n=r.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(t,n,r){var a=r&&r.toUpperCase();return n||i[r]||e[r]||i[a].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(e,t,n){return t||n.slice(1)})})).match(t),s=a.length,c=0;c<s;c+=1){var u=a[c],l=h[u],d=l&&l[0],f=l&&l[1];a[c]=f?{regex:d,parser:f}:u.replace(/^\[|\]$/g,"")}return function(e){for(var t={},n=0,r=0;n<s;n+=1){var i=a[n];if("string"==typeof i)r+=i.length;else{var o=i.regex,c=i.parser,u=e.slice(r),l=o.exec(u)[0];c.call(t,l),e=e.replace(l,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var n=e.hours;t?n<12&&(e.hours+=12):12===n&&(e.hours=0),delete e.afternoon}}(t),t}}return function(e,t,n){n.p.customParseFormat=!0,e&&e.parseTwoDigitYear&&(s=e.parseTwoDigitYear);var r=t.prototype,i=r.parse;r.parse=function(e){var t=e.date,r=e.utc,a=e.args;this.$u=r;var s=a[1];if("string"==typeof s){var c=!0===a[2],u=!0===a[3],l=c||u,d=a[2];u&&(d=a[2]),o=this.$locale(),!c&&d&&(o=n.Ls[d]),this.$d=function(e,t,n,r){try{if(["x","X"].indexOf(t)>-1)return new Date(("X"===t?1e3:1)*e);var i=f(t)(e),a=i.year,o=i.month,s=i.day,c=i.hours,u=i.minutes,l=i.seconds,d=i.milliseconds,h=i.zone,g=i.week,p=new Date,v=s||(a||o?1:p.getDate()),m=a||p.getFullYear(),_=0;a&&!o||(_=o>0?o-1:p.getMonth());var y,S=c||0,b=u||0,I=l||0,A=d||0;return h?new Date(Date.UTC(m,_,v,S,b,I,A+60*h.offset*1e3)):n?new Date(Date.UTC(m,_,v,S,b,I,A)):(y=new Date(m,_,v,S,b,I,A),g&&(y=r(y).week(g).toDate()),y)}catch(e){return new Date("")}}(t,s,r,n),this.init(),d&&!0!==d&&(this.$L=this.locale(d).$L),l&&t!=this.format(s)&&(this.$d=new Date("")),o={}}else if(s instanceof Array)for(var h=s.length,g=1;g<=h;g+=1){a[1]=s[g-1];var p=n.apply(this,a);if(p.isValid()){this.$d=p.$d,this.$L=p.$L,this.init();break}g===h&&(this.$d=new Date(""))}else i.call(this,e)}}}()},8366:function(e){e.exports=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,i,a){var o=i.prototype;a.utc=function(e){return new i({date:e,utc:!0,args:arguments})},o.utc=function(t){var n=a(this.toDate(),{locale:this.$L,utc:!0});return t?n.add(this.utcOffset(),e):n},o.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var s=o.parse;o.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),s.call(this,e)};var c=o.init;o.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else c.call(this)};var u=o.utcOffset;o.utcOffset=function(r,i){var a=this.$utils().u;if(a(r))return this.$u?0:a(this.$offset)?u.call(this):this.$offset;if("string"==typeof r&&(r=function(e){void 0===e&&(e="");var r=e.match(t);if(!r)return null;var i=(""+r[0]).match(n)||["-",0,0],a=i[0],o=60*+i[1]+ +i[2];return 0===o?0:"+"===a?o:-o}(r),null===r))return this;var o=Math.abs(r)<=16?60*r:r;if(0===o)return this.utc(i);var s=this.clone();if(i)return s.$offset=o,s.$u=!1,s;var c=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(s=this.local().add(o+c,e)).$offset=o,s.$x.$localOffset=c,s};var l=o.format;o.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,t)},o.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()};var d=o.toDate;o.toDate=function(e){return"s"===e&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var h=o.diff;o.diff=function(e,t,n){if(e&&this.$u===e.$u)return h.call(this,e,t,n);var r=this.local(),i=a(e).local();return h.call(r,i,t,n)}}}()},2562:()=>{},7151:(e,t,n)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{_:()=>r})},7294:(e,t,n)=>{"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{_:()=>r})},4513:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});var r=n(7151);function i(e){if(Array.isArray(e))return(0,r._)(e)}},1540:(e,t,n)=>{"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{_:()=>r})},5578:(e,t,n)=>{"use strict";function r(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,a){var o=e.apply(t,n);function s(e){r(o,i,a,s,c,"next",e)}function c(e){r(o,i,a,s,c,"throw",e)}s(void 0)})}}n.d(t,{_:()=>i})},4691:(e,t,n)=>{"use strict";n.d(t,{_:()=>o});var r=n(9418),i=n(4694),a=n(8672);function o(e,t,n){return t=(0,r._)(t),(0,a._)(e,(0,i._)()?Reflect.construct(t,n||[],(0,r._)(e).constructor):t.apply(e,n))}},9227:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});var r=n(5843);function i(e,t){if(!(0,r._)(e,t))throw new TypeError("Cannot call a class as a function")}},1550:(e,t,n)=>{"use strict";n.d(t,{_:()=>a});var r=n(4694),i=n(2251);function a(e,t,n){return a=(0,r._)()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&(0,i._)(a,n.prototype),a},a.apply(null,arguments)}},7424:(e,t,n)=>{"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,{_:()=>i})},5991:(e,t,n)=>{"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{_:()=>r})},6905:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});var r=n(9418);function i(e,t,n){return i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,r._)(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n||e):a.value}},i(e,t,n||e)}},9418:(e,t,n)=>{"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{_:()=>r})},5467:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});var r=n(2251);function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(0,r._)(e,t)}},5843:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});var r=n(5843);function i(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):(0,r._)(e,t)}},4694:(e,t,n)=>{"use strict";function r(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(r=function(){return!!e})()}n.d(t,{_:()=>r})},5077:(e,t,n)=>{"use strict";function r(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{_:()=>r})},4289:(e,t,n)=>{"use strict";function r(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}n.d(t,{_:()=>r})},4279:(e,t,n)=>{"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{_:()=>r})},441:(e,t,n)=>{"use strict";function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{_:()=>r})},2956:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});var r=n(5991);function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){(0,r._)(e,t,n[t])})}return e}},9149:(e,t,n)=>{"use strict";function r(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}n.d(t,{_:()=>r})},1730:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}n.d(t,{_:()=>r})},8672:(e,t,n)=>{"use strict";n.d(t,{_:()=>a});var r=n(1540),i=n(9256);function a(e,t){return!t||"object"!==(0,i._)(t)&&"function"!=typeof t?(0,r._)(e):t}},2251:(e,t,n)=>{"use strict";function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{_:()=>r})},4570:(e,t,n)=>{"use strict";n.d(t,{_:()=>s});var r=n(7294),i=n(4289),a=n(4279),o=n(6223);function s(e,t){return(0,r._)(e)||(0,i._)(e,t)||(0,o._)(e,t)||(0,a._)()}},5347:(e,t,n)=>{"use strict";n.d(t,{_:()=>s});var r=n(4513),i=n(5077),a=n(441),o=n(6223);function s(e){return(0,r._)(e)||(0,i._)(e)||(0,o._)(e)||(0,a._)()}},9256:(e,t,n)=>{"use strict";function r(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}n.d(t,{_:()=>r})},6223:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});var r=n(7151);function i(e,t){if(e){if("string"==typeof e)return(0,r._)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r._)(e,t):void 0}}},7582:(e,t,n)=>{"use strict";n.d(t,{Jh:()=>r,XA:()=>i});function r(e,t){var n,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}Object.create;function i(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}Object.create;"function"==typeof SuppressedError&&SuppressedError}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};return(()=>{"use strict";__webpack_require__.r(__webpack_exports__);var e=__webpack_require__(5578),t=__webpack_require__(9227),n=__webpack_require__(1550),r=__webpack_require__(7424),i=__webpack_require__(5991),a=__webpack_require__(5843),o=__webpack_require__(2956),s=__webpack_require__(4570),c=__webpack_require__(5347),u=__webpack_require__(9256),l=__webpack_require__(7582),d=(__webpack_require__(7192),__webpack_require__(8925)),h=__webpack_require__(2863);const f={"NotoNaskhArabic-Bold.ttf":"febcd5fae479715518a682af57a1422e","NotoNaskhArabic-Regular.ttf":"f11da773d5e424caa06cbe86b19c8c3b","NotoNirmalaui-Regular.ttf":"8300e4a9865b6231e32e46b1707b8f7b","NotoSans-Bold.ttf":"f0fbfd466cf418784f70671d60b1e3ae","NotoSans-BoldItalic.ttf":"50c48f215078a295208b49554aea3987","NotoSans-Regular.ttf":"7d9f89ded30222fd1266979e91adaf88","NotoSansCJKjp-DemiLight.otf":"30c649feb1b2f3e329d91796c3064110","NotoSansCJKjp-Light.otf":"b81b161eff7c869389aaa6015c04730a","NotoSansCJKjp-Medium.otf":"dd4cedc2ef66c81cab848ad9601e8144","NotoSansCJKjp-Regular.otf":"0501218c178d3763f2f9ae15744eae69","NotoSansCJKjp-Thin.otf":"27428f85a1f9fc06d37b1e4f772b332e","NotoSansCJKkr-DemiLight.otf":"f08d579f072fc995a0d0cf04930601c1","NotoSansCJKkr-Light.otf":"aa338e61e68bf72f6adfd2733847c90d","NotoSansCJKkr-Medium.otf":"3ebac294262ed84a17b4a4787837e23a","NotoSansCJKkr-Regular.otf":"4cf03dc23b8bb8d4a19bdca44c799133","NotoSansCJKkr-Thin.otf":"eae1fc05cf33c41e0031cdd11db599f7","NotoSansCJKtc-DemiLight.otf":"bec6ef360c6e7ac3734b6fe28a4126e2","NotoSansCJKtc-Light.otf":"468d6c5da548fecbda4fd5a23b912166","NotoSansCJKtc-Medium.otf":"f20459bfb276c641f12426b82f4be596","NotoSansCJKtc-Thin.otf":"8ecb59643a91f8e2c041f8fef92b47c2","NotoSansCanadianAboriginal-Regular.ttf":"462d533ae85cece0541123b8b3572374","NotoSansCherokee-Regular.ttf":"a88159ea01ed8715b9cdd68c4013fccb","NotoSansEthiopic-Bold.ttf":"22142e5eb5edaf965ce01e3fc1894c01","NotoSansEthiopic-Regular.ttf":"7e19f7808de91fd1c4c9789a5f0450de","NotoSansGujarati-Bold.ttf":"500303eb9e05a1de5e6c01fd25edf0b7","NotoSansGujarati-Regular.ttf":"a5f559c25908b12d7fcfdaa1600fd9f1","NotoSansHebrew-Bold.ttf":"b2c1b6906d9d77c5672fcc4f4a3c7b61","NotoSansHebrew-Regular.ttf":"681afbd524342551a9b3bf974c0ad433","NotoSansKhmer-Bold.ttf":"4a799c2835ed2e32e92d071add8e4228","NotoSansKhmer-Regular.ttf":"11217ceabbe48efc06cb950ec37189ef","NotoSansLao-Bold.ttf":"12da97798a3838ed577ca954d9d0c34b","NotoSansLao-Regular.ttf":"e5dadb678254367dcc3f91a1863fa74a","NotoSansMongolian-Regular.ttf":"e3426a66b65f03ca853cdc7bea355b8f","NotoSansMonoCJKjp-Regular.otf":"0beee38f74ab3756ada63bd7ce40cbad","NotoSansMonoCJKkr-Regular.otf":"2b7b9ff7c17b0de1c3b5e6059971e8b9","NotoSansMonoCJKsc-Regular.otf":"c24d3cd332ddf3aca147541507e5deec","NotoSansMonoCJKtc-Regular.otf":"fd7b80221cdfbed04eb69a371c0681b8","NotoSansPhagsPa-Regular.ttf":"857df25a1ff86fd325dc35efa2cb749d","NotoSansSC-Black.otf":"1a4015a208e09022a62256eac48eebe7","NotoSansSC-Bold.otf":"6038abbaa72926e043eac1ffc1726fd3","NotoSansSC-DemiLight.otf":"db2514b43a247c427c3732de541c09de","NotoSansSC-Light.otf":"65e7865c68f0062b0673296a266f888a","NotoSansSC-Medium.otf":"0c714136a7e02b5e4820a6c7c8e59be6","NotoSansSC-Regular.otf":"0a1fe01e7d921603e8ba185cdf1be994","NotoSansSC-Thin.otf":"fcc448ce50589e3a5309895b7e2716da","NotoSansSinhala-Bold.ttf":"d90775d13538cfa519812193a5c24986","NotoSansSinhala-Regular.ttf":"408ad25235ba342df73ed40683c5122a","NotoSansSyriacEastern-Regular.ttf":"555d860b3efcbedfd0928856bd0d1678","NotoSansTCLight.otf":"f5b0408d4cbf63865eba3dc8d9109bfd","NotoSansTaiLe-Regular.ttf":"1611c941bde482ee7c5b50a9c4dc5f9f","NotoSansTamil-Bold.ttf":"1bd32f3eab7154c43e689394a8c62033","NotoSansTamil-Regular.ttf":"7a9bd984400243ea3bf443be7a261a6c","NotoSansTelugu-Bold.ttf":"e47d4bd6e1d8a55d48b97b33b6b8b09d","NotoSansTelugu-Regular.ttf":"9c3e0075f045d1943a07b0c06cfde600","NotoSansThaana-Bold.ttf":"9c615895d006c4a4d74c12d5fa3c1eff","NotoSansThaana-Regular.ttf":"59d78c806149e8cc9f12211aabcf71fb","NotoSansThai-Bold.ttf":"17daa34206eff2ab5c298b2246810426","NotoSansThai-Regular.ttf":"b0db00f1326506f25e0408f6169b6ed0","NotoSansTibetan-Bold.ttf":"7c712907f958ccf0ebfbc28bf275154a","NotoSansTibetan-Regular.ttf":"06a4dbcbf8ef798d42383f6f2869d7be","NotoSansYi-Regular.ttf":"9f73151e0398e0bc70c4e9549ff3b046","NotoSerifKhmer-Bold.ttf":"9ed9ad995a6ba799e64a1949ea2e88ad","NotoSerifKhmer-Regular.ttf":"6c7bde29fb840cdeb077cdb66da2d0ad","NotoSerifLao-Bold.ttf":"4d2fb002f26a6e146781a207e315f0c3","NotoSerifLao-Regular.ttf":"730051aa181cefd7357c1eefd1c228b2","NotoSerifThai-Bold.ttf":"d4d31e29ea92a2b72b01edabb8b8483b","NotoSerifThai-Regular.ttf":"657709f54d9b04cf4967fe32e03873ea","PTSansNarrow-Bold.ttf":"412e8550a8e343da624aaae655f0dad0","PTSansNarrow-Regular.ttf":"ed806804702a540ef05cffe3d56c793b"};var g=__webpack_require__(9960),p="fontLib",v=new g.Z(p,"FoxitPDFSDKForWeb_"+p),m=/cros/.test(navigator.userAgent),_=[];_=_.concat(_,[{nameMatches:[/verdana/,/franklingothic/,/segoeui/,/sylfaen/,/tahoma/,/couriernew/,/lucidasansunicode/,/calibri/,/cambria/,/candara/,/comicsansms/,/consolas/,/constantia/,/corbel/,/gabriola/,/georgia/,/impact/,/lucidaconsole/,/microsoftsansserif/,/msrefrencesansserif/,/palatinolinotype/,/segoeprint/,/segoescript/,/trebuchetms/,/notosans(bold)?/],charsets:[0,204,238],charRange:/[\u0000-\u00ff]/,glyphs:[{bold:496,flags:64,url:"NotoSans-BoldItalic.ttf"},{bold:496,flags:-1,url:"NotoSans-Bold.ttf"},{bold:-1,flags:-1,url:"NotoSans-Regular.ttf"}]},{nameMatches:[/(youyuan)|(simhei)|(simsun)|(simsunextb)|(kaiti)|()|(song)|()|()|()|()|()|()|()|()|()/,/(notosansmonocjksc)|(notosansmonocjksc(regular)?)/],charsets:[134],charRange:/[\u0000-\u007f\u8140-\uA0FE\uA996\uA1A1-\uA9FE\uA840-\uA9A0\uF8A1-\uFEFE\uA140-\uA7A0\u200F-\u2027\u2E80-\u303F\u31C0-\u4DBF\u4E00-\u9FBF\uFF00-\uFFEF]/,glyphs:[{bold:-1,flags:-1,url:"NotoSansMonoCJKsc-Regular.otf"}]},{nameMatches:[/(youyuan)|(simhei)|(simsun)|(simsunextb)|(kaiti)|()|(song)|()|()|()|()|()|()|()|()|()/,/(notosanssc)|(notosanscjksc)|(notosanscjksc(regular)?)|(notosanssc(regular)?)/],charsets:[134],charRange:/[\u0000-\u007f\u8140-\uA0FE\uA996\uA1A1-\uA9FE\uA840-\uA9A0\uF8A1-\uFEFE\uA140-\uA7A0\u200F-\u2027\u2E80-\u303F\u31C0-\u4DBF\u4E00-\u9FBF\uFF00-\uFFEF]/,glyphs:[{bold:1,flags:-1,url:"NotoSansSC-Thin.otf"},{bold:2,flags:-1,url:"NotoSansSC-Light.otf"},{bold:4,flags:-1,url:"NotoSansSC-DemiLight.otf"},{bold:48,flags:-1,url:"NotoSansSC-Medium.otf"},{bold:192,flags:-1,url:"NotoSansSC-Bold.otf"},{bold:256,flags:-1,url:"NotoSansSC-Black.otf"},{bold:-1,flags:-1,url:"NotoSansSC-Regular.otf"}]},{nameMatches:[/(meiryo)|(meiryoui)|(msgothic)|(msmincho)|(mspgothic)|(mspmincho)|(uigothic)/,/(notosanscjkjp)|(notosansmonocjkjp(regular)?)/,/(notosanscjkjp(demilight)?)|(notosanscjkjp(light)?)|(notosanscjkjp(medium)?)|(notosanscjkjp(thin)?)|(notosanscjkjp(regular)?)/],charsets:[128],charRange:/[\u0000-\u007f\u2E80-\u4DBF\u4E00-\u9FBF\uF900-\uFAFF\uFE30-\uFE4F]/,glyphs:[{bold:-1,flags:1,url:"NotoSansMonoCJKjp-Regular.otf"},{bold:1,flags:-1,url:"NotoSansCJKjp-Thin.otf"},{bold:2,flags:-1,url:"NotoSansCJKjp-Light.otf"},{bold:4,flags:-1,url:"NotoSansCJKjp-DemiLight.otf"},{bold:496,flags:-1,url:"NotoSansCJKjp-Medium.otf"},{bold:-1,flags:-1,url:"NotoSansCJKjp-Regular.otf"}]},{nameMatches:[/(korean)/,/(batang)/,/(notosanscjkkr)|(notosansmonocjkkr(regular)?)|(notosansmonocjkkr(bold)?)/,/(notosanscjkkr(demilight)?)|(notosanscjkkr(light)?)|(notosanscjkkr(medium)?)|(notosanscjkkr(bold)?)|(notosanscjkkr(thin)?)|(notosanscjkkr(regular)?)/],charsets:[129],charRange:/[\u0000-\u007f\u1100-\u11FF\u3130-\u318F\uAC00-\uD7AF\uFF00-\uFFEF\u2E80-\u303F\u31C0-\u4DBF\u4E00-\u9FBF\uF900-\uFAFF\uFE30-\uFE4F]/,glyphs:[{bold:-1,flags:1,url:"NotoSansMonoCJKkr-Regular.otf"},{bold:1,flags:-1,url:"NotoSansCJKkr-Thin.otf"},{bold:2,flags:-1,url:"NotoSansCJKkr-Light.otf"},{bold:4,flags:-1,url:"NotoSansCJKkr-DemiLight.otf"},{bold:496,flags:-1,url:"NotoSansCJKkr-Medium.otf"},{bold:-1,flags:-1,url:"NotoSansCJKkr-Regular.otf"}]},{nameMatches:[/(dfkaisb)|(microsoftjhenghei)|(mingliu)|(mingliuhkscs)|(mingliuhkscsextb)|(mingliuextb)|(pmingliu)|(pmingliuextb)/,/(notosanscjktc(demilight)?)|(notosanscjktc(light)?)|(notosanscjktc(medium)?)|(notosanscjktc(thin)?)|(notosansmonocjktc(regular)?)/],charsets:[136],charRange:/[\u4E00-\uA0FE\uA140-\uA3BF\uA259-\uA261\uA3C0-\uA3FE\u2E80-\u303F\u31C0-\u4DBF\uFF00-\uFFEF]/,glyphs:[{bold:-1,flags:1,url:"NotoSansMonoCJKtc-Regular.otf"},{bold:1,flags:-1,url:"NotoSansCJKtc-Thin.otf"},{bold:2,flags:-1,url:"NotoSansCJKtc-Light.otf"},{bold:4,flags:-1,url:"NotoSansCJKtc-DemiLight.otf"},{bold:496,flags:-1,url:"NotoSansCJKtc-Medium.otf"},{bold:-1,flags:-1,url:"NotoSansMonoCJKtc-Regular.otf"}]},{nameMatches:[/(arabic)|(andalus)|(arabictypesetting)|(sakkalmajalla)|(simplifiedarabic)|(simplifiedarabicfixed)|(traditionalarabic)/,/(notonaskharabicbold)|(notonaskharabic)/],charsets:[178],charRange:/[\u0000-\u007f\u0600-\u06FF\u0750-\u077F\uFB50-\uFDFF\uFE70-\uFEFF]/,glyphs:[{bold:496,flags:-1,url:"NotoNaskhArabic-Bold.ttf"},{bold:-1,flags:-1,url:"NotoNaskhArabic-Regular.ttf"}]},{nameMatches:[/(angsananew)|(angsanaupc)|(browallianew)|(browalliaupc)|(cordianew)|(cordiaupc)|(eucrosiaupc)|(freesiaupc)|(irisupc)|(jasmineupc)|(kodchiangupc)|(leelawadee)|(lilyupc)|(thonburi)/,/(notosansthaibold)|(notosansthai)|(notoserifthaibold)|(notoserifthai)/],charsets:[222],charRange:/[\u0E00-\u0E7F]/,glyphs:[{bold:496,flags:2,url:"NotoSerifThai-Bold.ttf"},{bold:-1,flags:2,url:"NotoSerifThai-Regular.ttf"},{bold:496,flags:-1,url:"NotoSansThai-Bold.ttf"},{bold:-1,flags:-1,url:"NotoSansThai-Regular.ttf"}]},{nameMatches:[/(aharoni)|(david)|(frankruehl)|(gisha)|(levenimmt)|(miriam)|(narkism)|(rod)/,/(notosanshebrewbold)|(notosanshebrew)/],charsets:[177],charRange:/[\u0590-\u05FF]/,glyphs:[{bold:496,flags:-1,url:"NotoSansHebrew-Bold.ttf"},{bold:-1,flags:-1,url:"NotoSansHebrew-Regular.ttf"}]},{nameMatches:[/(daunpenh)|(khmer)|(moolboran)/,/(notosanskhmerbold)|(notosanskhmer)|(notoserifkhmerbold)|(notoserifkhmer)/],charsets:[1],charRange:/[\u1780-\u17FF\u19E0-\u19FF]/,glyphs:[{bold:496,flags:2,url:"NotoSerifKhmer-Bold.ttf"},{bold:-1,flags:2,url:"NotoSerifKhmer-Regular.ttf"},{bold:496,flags:-1,url:"NotoSansKhmer-Bold.ttf"},{bold:-1,flags:-1,url:"NotoSansKhmer-Regular.ttf"}]},{nameMatches:[/(dokchampa)|(lao)/,/(notosanslaobold)|(notosanslao)|(notoseriflaobold)|(notoseriflao)/],charsets:[1],charRange:/[\u0E80-\u0EFF]/,glyphs:[{bold:496,flags:2,url:"NotoSerifLao-Bold.ttf"},{bold:-1,flags:2,url:"NotoSerifLao-Regular.ttf"},{bold:496,flags:-1,url:"NotoSansLao-Bold.ttf"},{bold:-1,flags:-1,url:"NotoSansLao-Regular.ttf"}]},{nameMatches:[/(vani)|(gautami)/,/(notosanstelugubold)|(notosanstelugu)/],charsets:[1],charRange:/[\u0C00-\u0C7F]/,glyphs:[{bold:496,flags:-1,url:"NotoSansTelugu-Bold.ttf"},{bold:-1,flags:-1,url:"NotoSansTelugu-Regular.ttf"}]},{nameMatches:[/(latha)|(vijaya)/,/(notosanstamilbold)|(notosanstamil)/],charsets:[1],charRange:/[\u0C00-\u0C7F]/,glyphs:[{bold:496,flags:-1,url:"NotoSansTamil-Bold.ttf"},{bold:-1,flags:-1,url:"NotoSansTamil-Regular.ttf"}]},{nameMatches:[/(moboli)|(mvboli)/,/(notosansthaanabold)|(notosansthaana)/],charsets:[1],charRange:/[\u0780-\u07BF]/,glyphs:[{bold:496,flags:-1,url:"NotoSansThaana-Bold.ttf"},{bold:-1,flags:-1,url:"NotoSansThaana-Regular.ttf"}]},{nameMatches:[/(taile)|(microsofttaile)/,/(notosanstaile)/],charsets:[1],charRange:/[\u1950-\u197F]/,glyphs:[{bold:-1,flags:-1,url:"NotoSansTaiLe-Regular.ttf"}]},{nameMatches:[/(estrangeloedessa)/,/(notosanssyriaceastern)/],charsets:[1],charRange:/[\u0700-\u074F]/,glyphs:[{bold:-1,flags:-1,url:"NotoSansSyriacEastern-Regular.ttf"}]},{nameMatches:[/(iskoolapota)/,/(notosanssinhalabold)|(notosanssinhala)/],charsets:[1],charRange:/[\u0D80-\u0DFF]/,glyphs:[{bold:496,flags:-1,url:"NotoSansSinhala-Bold.ttf"},{bold:-1,flags:-1,url:"NotoSansSinhala-Regular.ttf"}]},{nameMatches:[/(himalaya)|(microsofthimalaya)/,/(notosanstibetanbold)|(notosanstibetan)/],charsets:[1],charRange:/[\u0F00-\u0FFF]/,glyphs:[{bold:496,flags:-1,url:"NotoSansTibetan-Bold.ttf"},{bold:-1,flags:-1,url:"NotoSansTibetan-Regular.ttf"}]},{nameMatches:[/(phagspa)|(microsoftphagspa)/,/(notosansphagspa)/],charsets:[1],charRange:/[\uA840-\uA87F]/,glyphs:[{bold:-1,flags:-1,url:"NotoSansPhagsPa-Regular.ttf"}]},{nameMatches:[/(euphemia)|(gadugi)/,/(notosanscanadianaboriginal)/],charsets:[1],charRange:/[\u1400-\u167F\u18B0-\u18FF]/,glyphs:[{bold:-1,flags:-1,url:"NotoSansCanadianAboriginal-Regular.ttf"}]},{nameMatches:[/(plantagenetcherokee)|(notosanscherokee)/],charsets:[1],charRange:/[\u13A0-\u13FF]/,glyphs:[{bold:-1,flags:-1,url:"NotoSansCherokee-Regular.ttf"}]},{nameMatches:[/(nyala)|(ebrima)|(notosansethiopicbold)|(notosansethiopic)/],charsets:[1],charRange:/[\u1200-\u139F\u2D80-\u2DDF\uAB00-\uAB5F]/,glyphs:[{bold:496,flags:-1,url:"NotoSansEthiopic-Bold.ttf"},{bold:-1,flags:-1,url:"NotoSansEthiopic-Regular.ttf"}]},{nameMatches:[/(shruti)|(notosansgujaratibold)|(notosansgujarati)/],charsets:[1],charRange:/[\u0A80-\u0AFF]/,glyphs:[{bold:496,flags:-1,url:"NotoSansGujarati-Bold.ttf"},{bold:-1,flags:-1,url:"NotoSansGujarati-Regular.ttf"}]},{nameMatches:[/(mongolian)|(mongolianbaiti)|(notosansmongolian)/],charsets:[1],charRange:/[\u1800-\u18AF]/,glyphs:[{bold:-1,flags:-1,url:"NotoSansMongolian-Regular.ttf"}]},{nameMatches:[/(nirmalaui)|(notosansgujarati)/],charsets:[1],charRange:/[\u0A80-\u0E7F]/,glyphs:[{bold:-1,flags:-1,url:"NotoNirmalaui-Regular.ttf"}]},{nameMatches:[/(microsoftyibati)|(yi\b)|(notosansyi)/],charsets:[1],charRange:/[]/,glyphs:[{bold:-1,flags:-1,url:"NotoSansYi-Regular.ttf"}]},{nameMatches:[/notosans/],charsets:[0,204,238],charRange:/[\u0000-\u00ff]/,glyphs:[{bold:-1,flags:-1,url:"NotoSans-Regular.ttf"}]},{nameMatches:[/ptsansnarrow/],charsets:[0],charRange:/[\u0000-\u00ff]/,glyphs:[{bold:496,flags:-1,url:"PTSansNarrow-Bold.ttf"},{bold:-1,flags:-1,url:"PTSansNarrow-Regular.ttf"}]}]);var y=[],S=[],b={extralight:100,light:200,normal:300,regular:400,medium:500,bold:700,heavy:900,black:900,thin:100},I={100:1,200:2,300:4,400:8,500:16,600:32,700:64,800:128,900:256};function A(e){var t=[],n=!0,r=!1,i=void 0;try{for(var a,o=Object.entries(I)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var c=(0,s._)(a.value,2),u=c[0];e&c[1]&&t.push(parseInt(u))}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t.sort(function(e,t){return e-t})}var P={},D={},E={},C={},w={},k={},T={};function F(e,t,n,r,i,a){for(var o=e.glyphs||[],s=0,c=o.length;s<c;s++){var u=o[s],l=u.bold||-1,d=-1===l||(r&l)===l;if(!d){var h=-1;d=void 0!==I[l]?(r&(h=I[l]))===h:(h=A(l)).some(function(e){return(r&I[e])===I[e]})}var f=u.flags||-1,g=!1;if(-1===f?g=!0:t?!(g=33554432===(n&f))&&33554432&n&&(g=!(64&~f)):g=!(64&f||33554432&f),d&&g)return P[i]=u,D[i]=e,a?(E[i]=1,[u,e,1]):[u,e]}}function G(e,t,n,r,i){if(e){var a=function(e,t,n,r,i){return[e,t,n,r,i].join("-")}(e,t,n,r,i),o=P[a];if(o)return[o,D[a],E[a]];n=function(e,t,n){return t||64&n||33554432&n||/(italic)|(oblique)/.test(e.toLowerCase())}(e,n,i);var s,c=n&&(i|=64),u=function(e){return 1<<parseInt(e/100)-1}(function(e,t,n){for(var r in e=e.toLowerCase(),b)if(-1!=e.indexOf(r))return b[r];t<=400&&!(262144&~n)&&(t=700);return b[t]||(parseInt(t/100)?t:t>400?700:400)}(e,r,i)),l=M(s=x(e=e.toLowerCase()),S,c,i,u,a,!0);if(l)return l;for(var d=0,h=S.length;d<h;d++){var f=S[d];if(O(s,f)){var g=F(f,c,i,u,a,!0);if(g)return g}}if(l=M(s,_,c,i,u,a,!1))return l;for(var p=0,v=_.length;p<v;p++){var m=_[p];if(O(s,m)){var y=F(m,c,i,u,a,!1);if(y)return y}}if(t>1){for(var I in k){var A=k[I];if(Array.isArray(A)&&A.some(function(e){return e.charsets&&-1!==e.charsets.indexOf(t)})){var C=H(A,n,r);if(C)return[C,null,2]}}var w=R(S,t,c,i,u,a,!0);if(w)return w;var T=R(_,t,c,i,u,a,!1);if(T)return T}}}function R(e,t,n,r,i,a,o){for(var s=0,c=e.length;s<c;s++){var u=e[s];if(u.charsets&&-1!==u.charsets.indexOf(t)){var l=F(u,n,r,i,a,o);if(l)return l}}}function x(e){return e.replace(/,/g,"").replace(/-/g,"").replace(/\s/g,"").toLowerCase()}function O(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.nameMatches||[],i=0,a=r.length;i<a;i++){var o=r[i].source.toLowerCase(),s=new RegExp(o).test(e);if(n&&(s=new RegExp("^"+o+"$").test(e)||new RegExp("^"+o.replace(/\s+/g,"")+"$").test(e)),s)return!0}return!1}function M(e,t,n,r,i,a,o){for(var s=0,c=t.length;s<c;s++)for(var u=t[s],l=u.nameMatches||[],d=0,h=l.length;d<h;d++){var f=x(l[d].source);if(new RegExp("^"+f+"$").test(e)||new RegExp("^"+f.replace(/\s+/g,"")+"$").test(e))return F(u,n,r,i,a,o)}}function N(e,t){var n;if(n=C[e])return n;var r=new XMLHttpRequest;r.open("get",e,!1),r.responseType="arraybuffer",r.send();var i=r.status,o=r.response;if(i>=200&&i<300||304===i&&(0,a._)(o,ArrayBuffer)){if(t)o=(0,__webpack_require__(9198).Z)(new Uint8Array(o));try{"blob:"!==new URL(e).protocol&&v.set(e,o)}catch(t){v.set(e,o)}return C[e]=o}return null}function B(e,t,n,r,i){var a;return a=arguments.length>5&&void 0!==arguments[5]&&arguments[5]?function(e,t,n,r,i){var a=t.replace(/-/g,"").toLowerCase(),o=[];for(var s in e)if((-1!==s.indexOf(a)||-1!==a.indexOf(s))&&(0===n||n>1&&Array.isArray(e[s])&&e[s].some(function(e){return e.charsets&&-1!==e.charsets.indexOf(n)}))){o=e[s];break}if(o.length>0)return H(o,r,i)}(k,t,n,r,i):K(k,t,r,i),a?L(e,a):null}function L(e,t){if(t){if(!t.url){var n=T[t.postscriptName];n||(n=e.syncMessage("LocalFont","getLocalFontBlobUrl",t.postscriptName)),t.url=n}return N(t.url,!1)}return null}function j(e,t,n,r,i,o,s,c){var u=function(e,t){return Boolean(e||64&t)}(r,o),l=B(c,t,n,u,i);if(l)return l;if(l=B(c,t,n,u,i,!0))return l;var d=G(t,n,r,i,o);if(!d)return null;if(2===d[2])return L(c,d[0]);var h=d[0],g=h.url;return 1===d[2]?N(g,h.isBrotli):function(e,t){var n;if(n=C[t])return n;var r=e+"/"+t+".brotli?h="+f[t];if(n=w[r])return n;var i=new XMLHttpRequest;i.open("get",r,!1),i.responseType="arraybuffer",i.send();var o=i.status,s=i.response;return o>=200&&o<300||304===o&&(0,a._)(s,ArrayBuffer)?(s=(0,__webpack_require__(9198).Z)(new Uint8Array(s)),v.set(r,s),C[t]=s):null}(e,g)}function U(e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(e=x(e));var n=[];if(n=n.concat(S).concat(_),t)for(var r=0,i=n.length;r<i;r++){var a=n[r];if(O(e,a,!0))return(a.charsets||[0])[0]}for(var o=0,s=n.length;o<s;o++){var c=n[o];if(O(e,c,!1))return(c.charsets||[0])[0]}return-1}function W(e){e&&(k=e)}function H(e,t,n){var r=e.sort(function(e,t){return Math.sqrt(Math.abs(Math.pow(e.weight,2)-Math.pow(n,2)))-Math.sqrt(Math.abs(Math.pow(t.weight,2)-Math.pow(n,2)))});return r.find(function(e){return Boolean(e.italic)===t})||r[0]}function K(e,t,n,r){var i=t.replace(/-/g,"").toLowerCase(),a=e[i]||[];return a.length>0?H(a,n,r):m&&"arial"===i?K(e,"arimo",n,r):void 0}var z=__webpack_require__(843),V=__webpack_require__(4691),J=__webpack_require__(6905),Y=__webpack_require__(9418),Z=__webpack_require__(5467),q=__webpack_require__(1703),X=__webpack_require__(6950),Q=__webpack_require__(7189),$=__webpack_require__(3850),ee=__webpack_require__(776),te=__webpack_require__(6306),ne=__webpack_require__(8851),re=function(){function e(n,r){(0,t._)(this,e),this.pdfPage=n,this.gsdkPage=r,this.annotationIdArray=n._getAnnotationIdArray(r),this.removedIds=[]}return(0,r._)(e,[{key:"indexOf",value:function(e){return this.annotationIdArray.indexOf(e)}},{key:"update",value:function(){var e=this,t=this.annotationIdArray.slice(0);this.annotationIdArray=this.pdfPage._getAnnotationIdArray(this.gsdkPage),t.forEach(function(t){-1===e.annotationIdArray.indexOf(t)&&-1===e.removedIds.indexOf(t)&&e.removedIds.push(t)})}},{key:"remove",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.update()}}]),e}(),ie=function(e){function n(){return(0,t._)(this,n),(0,V._)(this,n,arguments)}return(0,Z._)(n,e),(0,r._)(n,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Markup(e)}},{key:"getFillColor",value:function(){var e=0,t=this.annot;return t.HasProperty({value:3})&&(e=t.GetStyleFillColor?t.GetStyleFillColor():t.GetFillColor(),e|=4278190080),e>>>0}},{key:"toJson",value:function(e){var t,r=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this,e),i=this.annot,a=this.engine,o=this.getSummary.bind(this),s=this.JR.getPDFString(i.GetIntent()),c=i.GetPopup();c.IsEmpty()||(t=o(c,!0)),c.delete();var u,l,d=i.GetDict(),h=d.GetElement((0,$.n5)(a,"RT")),f=(0,$.n5)(a,"IRT");(l=d.GetElement(f))&&(l=l.GetDict())&&(l=l.GetObjNum(),u=!d.HasKey((0,$.n5)(a,"StateModel"))&&h&&(u=h.GetName())?u.toString():"R");var g,p=[],v=!1,m=!1,_=[],y=[],S=[];if(e){var b=e[i.GetDict().GetObjNum()],I=b;(m=!!b.isGroup)&&(b.isGroupHeader?(v=!0,I=b,g={objectNumber:b.objectNumber,id:b.id,index:b.index}):g={objectNumber:(I=b.groupHeader).objectNumber,id:I.id,index:I.index},p=[{objectNumber:I.objectNumber,id:I.id,index:I.index}].concat(I.groupElements).sort(function(e,t){return e.index-t.index})),I.replies&&(_=I.replies),I.markedStates&&(y=I.markedStates.sort(function(e,t){return e.time-t.time})),I.reviewStates&&(S=I.reviewStates.sort(function(e,t){return e.time-t.time}))}else{m=i.IsGrouped();var A=i.GetGroupElements(),P=A.GetSize();if(m&&P>0){for(var D=P;D--;){var E=A.GetAt(D);p[D]=o(E),E.delete()}var C=i.GetGroupHeader();v=(g=o(C)).objectNumber===r.objectNumber,C.delete()}A.delete();for(var w=i.GetReplyCount();w--;){var k=i.GetReply(w),T=o(k);T.content=this.JR.getPDFString(k.GetIntent()),_[w]=T,k.delete()}for(var F=a.StateModel,G=F.e_StateModelMarked,R=F.e_StateModelReview,x=i.GetStateAnnots(G),O=x.GetSize(),M=0;M<O;M++){var N=x.GetAt(M);N.GetDict().GetElement(f).GetDict().GetObjNum()===r.objectNumber&&(y.push(o(N)),N.delete())}for(var B=i.GetStateAnnots(R),L=B.GetSize(),j=0;j<L;j++){var U=B.GetAt(j);U.GetDict().GetElement(f).GetDict().GetObjNum()===r.objectNumber&&(S.push(o(U)),U.delete())}}var W,H=i.GetCreationDateTime(),K=0;H&&H.IsValid()&&(K=(0,ne.B)(H));var z,V=(0,$.n5)(this.engine,"BM");d.HasKey(V)&&(W=d.GetElement(V).GetName().toString());var Z=(0,$.n5)(this.engine,"ca"),q=d.HasKey(Z);q&&(z=d.GetElement(Z).GetFloat());var X=i.GetBorderOpacity(),Q={creationTimestamp:K,opacity:i.GetOpacity(),borderOpacity:X,fillOpacity:q?z:X,subject:this.JR.getPDFString(i.GetSubject()),title:this.JR.getPDFString(i.GetTitle()),isGrouped:m,isGroupHeader:v,groupElementsSummary:p,groupHeaderSummary:g,repliesSummary:_,markedStatesSummary:y,reviewStatesSummary:S,popupSummary:t,intent:s,RT:u,IRT:l,bm:W,ca:z};if(i.GetType()===this.engine.AnnotType.e_FreeText){var ee=this.getRichText();Q.richText=ee}return Object.assign(r,Q)}},{key:"setOpacity",value:function(e,t){var n=this.getShouldModifyAnnots(this);e=+e;for(var r=n.length;r--;){var i=n[r].annot;i.SetOpacity(e),i.ResetAppearanceStream(),!t&&z.Z.updateModifyTime(this.engine,i)}return this.updateModifyTime(),oe(n)}},{key:"setSubject",value:function(e,t){var n=this.getShouldModifyAnnots(this);e=new this.engine.WString(e);for(var r=n.length;r--;){var i=n[r].annot;i.SetSubject(e),!t&&z.Z.updateModifyTime(this.engine,i)}return oe(n)}},{key:"setTitle",value:function(e,t){var n=this.getShouldModifyAnnots(this);e=new this.engine.WString(e);for(var r=n.length;r--;){var i=n[r].annot;i.SetTitle(e),!t&&z.Z.updateModifyTime(this.engine,i)}return e.delete(),oe(n)}},{key:"setCreateDateTime",value:function(e){for(var t=this.getShouldModifyAnnots(this),n=this.ToDateTime(e),r=t.length;r--;)t[r].annot.SetCreationDateTime(n);return n.delete(),oe(t)}},{key:"addReply",value:function(e){switch(void 0===e?"undefined":(0,u._)(e)){case"string":return this.addReplyContent(e);case"object":return this.addReplyFromJSON(e)}}},{key:"addReplyFromJSON",value:function(e){var t=this.annot,r=this.engine;t.IsGrouped()&&(t=t.GetGroupHeader());var i=t.AddReply(),o=new r.WString(e.name||(0,X.Z)());i.SetUniqueID(o);var s=new r.WString(e.contents||e.content||"");if(i.SetContent(s),e.flags){var c="number"==typeof e.flags?e.flags:n.parseFlagList(e.flags.split(","));i.SetFlags(c)}var u=new r.WString(e.title||this.JR.getUserName()||"Foxit Web");i.SetTitle(u);var l=n.parseDatetimeString(r,e.creationdate)||"number"==typeof e.creationTimestamp||(0,a._)(e.creationTimestamp,Date)?this.ToDateTime(e.creationTimestamp):null,d=n.parseDatetimeString(r,e.date)||"number"==typeof e.date||(0,a._)(e.date,Date)?this.ToDateTime(e.date):null;return l&&i.SetCreationDateTime(l),d&&i.SetModifiedDateTime(d),this.pdfPage.reloadAnnots(),(0,ee.Z)(o,u,s,l,d),this.JR.annotManager.get(i,this.pdfPage)}},{key:"addReplyContent",value:function(e){var t=this.annot,n=this.engine;t.IsGrouped()&&(t=t.GetGroupHeader());var r=t.AddReply();t.IsGrouped()&&t.delete();var i,o=new n.WString((0,X.Z)());r.SetUniqueID(o),i=(0,a._)(e,n.WString)?e:new n.WString(e),r.SetContent(i);var s=this.ToDateTime(new Date);r.SetCreationDateTime(s),r.SetModifiedDateTime(s);var c=this.JR.getUserName()||"Foxit Web",u=new n.WString(c);return r.SetTitle(u),(0,ee.Z)(o,i,u,s),this.pdfPage.reloadAnnots(),this.JR.annotManager.get(r,this.pdfPage)}},{key:"addReviewState",value:function(e){switch(e){case Q.R3.ACCEPTED:case Q.R3.CANCELLED:case Q.R3.COMPLETED:case Q.R3.NONE:case Q.R3.REJECTED:case Q.R3.DEFERRED:case Q.R3.FUTURE:break;default:if("object"===(void 0===e?"undefined":(0,u._)(e)))return this.addStateFromJSON(this.engine.StateModel.e_StateModelReview,e);throw new Error("Illegal argument: unexpected review state name: ".concat(e))}return this._addState(this.engine.StateModel.e_StateModelReview,e)}},{key:"addMarkedState",value:function(e){switch(e){case Q.R3.MARKED:case Q.R3.UNMARKED:break;default:if("object"===(void 0===e?"undefined":(0,u._)(e)))return this.addStateFromJSON(this.engine.StateModel.e_StateModelMarked,e);throw new Error("Illegal Argument: unexpected marked state name : ".concat(e,", it should be 'marked' or 'unmarked'"))}var t=this.engine.StateModel.e_StateModelMarked,n=this.annot.GetStateAnnots(t);if(n.GetSize()){var r=n.GetAt(0);return r.SetState(this.convertToEngineStateValue(e)),this.JR.annotManager.get(r,this.pdfPage,r.GetIndex())}return this._addState(t,e)}},{key:"_addState",value:function(e,t){var n=this.annot,r=this.engine;n.IsGrouped()&&(n=n.GetGroupHeader());var i=this.JR.getUserName()||"Foxit Web",a=new r.WString(i),o=n.AddStateAnnot(a,e,this.convertToEngineStateValue(t)),s=new r.WString((0,X.Z)());o.SetUniqueID(s);var c=this.ToDateTime(new Date);o.SetCreationDateTime(c),o.SetModifiedDateTime(c);var u=new r.CFX_FloatRect(100,82,118,100);return o.GetDict().SetAtRect((0,$.n5)(r,"Rect"),u),(0,ee.Z)(s,a,c),this.JR.annotManager.get(o,this.pdfPage,o.GetIndex())}},{key:"addStateFromJSON",value:function(e,t){var r=this.annot,i=this.engine;r.IsGrouped()&&(r=r.GetGroupHeader());var o,s,c=new i.WString(t.title||this.JR.getUserName()||"Foxit Web"),u=r.AddStateAnnot(c,e,this.convertToEngineStateValue(t.state.toLowerCase())),l=new i.WString(t.name||(0,X.Z)());if(u.SetUniqueID(l),t.creationdate&&(o=n.parseDatetimeString(i,t.creationdate)),o||(o="number"==typeof t.creationTimestamp||(0,a._)(t.creationTimestamp,Date)?this.ToDateTime(t.creationTimestamp):this.ToDateTime(Date.now())),u.SetCreationDateTime(o),t.date&&(s=n.parseDatetimeString(i,t.date)),s||(s="number"==typeof t.date||(0,a._)(t.date,Date)?this.ToDateTime(t.date):this.ToDateTime(Date.now())),u.SetModifiedDateTime(s),t.flags){var d="number"==typeof t.flags?t.flags:n.parseFlagList(t.flags.split(","));u.SetFlags(d)}return(0,ee.Z)(c,l,o,s),this.JR.annotManager.get(u,this.pdfPage,u.GetIndex())}},{key:"removeAllStateAnnots",value:function(){var e=this.annot;e.IsGrouped()&&(e=e.GetGroupHeader());var t=e.RemoveAllStateAnnots();return t&&this.updateModifyTime(),t}},{key:"convertToEngineStateValue",value:function(e){var t=this.engine.MarkupState;switch(e){case Q.R3.ACCEPTED:return t.e_StateAccepted;case Q.R3.CANCELLED:return t.e_StateCancelled;case Q.R3.COMPLETED:return t.e_StateCompleted;case Q.R3.NONE:return t.e_StateNone;case Q.R3.REJECTED:return t.e_StateRejected;case Q.R3.UNMARKED:return t.e_StateUnmarked;case Q.R3.MARKED:return t.e_StateMarked;case Q.R3.DEFERRED:return t.e_StateDeferred;case Q.R3.FUTURE:return t.e_StateFuture;default:throw new Error("unsupported state: ".concat(e))}}},{key:"remove",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new re(this.pdfPage,this.annot.GetPage()),r=this.annot,i=r.GetPage();if((e=r.GetGroupHeader())&&!e.IsEmpty()&&(r=e),r.IsGrouped())for(var o=r.GetGroupElements(),s=o.GetSize();s--;){var c=o.GetAt(s),u=c.GetDict().GetObjNum(),l=this.pdfPage.annotManager.get(c,this.pdfPage);(0,a._)(l,n)&&l.removeRelatives(t),i.RemoveAnnot(c)&&t.remove(u)}else{this.removeRelatives(t);var d=r.GetDict().GetObjNum();i.RemoveAnnot(r)&&t.remove(d)}return this.pdfPage.update().then(function(){return t.removedIds})}},{key:"removeRelatives",value:function(e){var t,n,r,i=this.engine,a=this.annot,o=a.GetPage(),s=[];if((n=a.GetPopup())&&!n.IsEmpty()){var u=n.GetDict().GetObjNum();o.RemoveAnnot(n)&&e.remove(u)}for(var l=a.GetReplyCount();l--;){var d=a.GetReply(l).GetDict().GetObjNum();s.push(d);var h=e.indexOf(d),f=o.GetAnnot(h);this.pdfPage.annotManager.get(f,this.pdfPage).removeRelatives(e)}a.RemoveAllReplies()&&s.length>0&&(r=e).remove.apply(r,(0,c._)(s));for(var g=[],p=[],v=i.StateModel,m=v.e_StateModelMarked,_=v.e_StateModelReview,y=a.GetStateAnnots(m),S=y.GetSize();S--;){var b=y.GetAt(S);g[S]=b.GetDict().GetObjNum()}for(var I=a.GetStateAnnots(_),A=I.GetSize();A--;){var P=I.GetAt(A);p[A]=P.GetDict().GetObjNum(),o.RemoveAnnot(P)}(t=e).remove.apply(t,(0,c._)([].concat(p).concat(g)))}},{key:"moveTo",value:function(e,t){var r=this.annot;if(r.IsGrouped()){for(var i=this.annot.GetRect(),a=e-i.left,o=t-i.top,s=this.getShouldModifyAnnots(this),c=s.length;c--;){var u=s[c].annot,l=q.Z.on(u.GetRect()).move(a,o).extract();u.Move(l),u.ResetAppearanceStream(),z.Z.updateModifyTime(this.engine,r)}return oe(s)}return(0,J._)((0,Y._)(n.prototype),"moveTo",this).call(this,e,t)}},{key:"setIntent",value:function(e){var t=this.annot;return t.SetIntent(new this.engine.String(e)),3!=this.annot.GetType().value&&t.ResetAppearanceStream(),[this.getId()]}},{key:"create",value:function(e){var t;(t=e.intent)&&this.setIntent(t),(0,J._)((0,Y._)(n.prototype),"create",this).call(this,e);var r,i=e.creationTimestamp;r=i>0?new Date(i):new Date,this.setCreateDateTime(r);var a,o,s,c=e.date;if(a=c>0?new Date(c):r,this.setModifiedDateTime(a),void 0!==e.opacity){var u=+e.opacity;this.setOpacity(u,!0)}if((o=e.subject)&&this.setSubject(o,!0),(s=void 0===e.title?this.JR.getUserName():e.title)&&this.setTitle(s,!0),e.noPopup)return[this];if("freetext"===e.type&&e.richText&&this.addRichText(e.richText),"freetext"!=e.type){var l=this.annot,d=l.GetPage(),h=this.engine,f=d.AddAnnot(h.AnnotType.e_Popup,l.GetRect());return l.SetPopup(new h.Popup(f)),f=this.JR.annotManager.get(f,this.pdfPage),e.name=void 0,[this,f.create(e)[0]]}return[this]}},{key:"_setFillColor",value:function(e){if("number"!=typeof e)throw new Error("Incorrect color value: ".concat(e));e<0&&(e=0);this.annot;var t,n=this.engine;t=0===e?function(e){e.RemoveProperty({value:3}),e.ResetAppearanceStream(),z.Z.updateModifyTime(n,e)}:function(t){t.SetFillColor&&t.SetFillColor(e),t.ResetAppearanceStream(),z.Z.updateModifyTime(n,t)};for(var r=n.AnnotType,i=[r.e_Square,r.e_Circle,r.e_FreeText,r.e_Polygon,r.e_Redact],a=this.getShouldModifyAnnots(this,function(e){var t=e.annot;return-1!==i.indexOf[t.GetType()]}),o=a.length;o--;)t(a[o].annot);return a}},{key:"getShouldModifyAnnots",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return!0},n=e.annot;if(!n.IsGrouped())return[e];for(var r=[],i=n.GetGroupElements(),a=this.JR.annotManager,o=e.pdfPage,s=i.GetSize();s--;)r[s]=a.get(i.GetAt(s),o);return r.filter(t)}},{key:"setContent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.annot;!t&&r.IsGrouped()&&(r=r.GetGroupHeader());var i=this.engine,a=new i.WString(e);r.SetContent(a),a.delete(),this.JR.setFontCacheEnabled(!1);var o=r.GetType(),s=this.JR.getPDFString(r.GetIntent());return n&&(o===i.AnnotType.e_FreeText||o===i.AnnotType.e_Line||o===i.AnnotType.e_PolyLine&&"PolyLineDimension"===s||o===i.AnnotType.e_Polygon&&"PolygonDimension"===s||o===i.AnnotType.e_Circle&&"CircleDimension"===s)&&r.ResetAppearanceStream(),this.JR.setFontCacheEnabled(!0),this.updateModifyTime(),r.GetDict().GetObjNum()}},{key:"setBorderStyle",value:function(e,t){for(var n=this.getShouldModifyAnnots(this),r=n.length;r--;)n[r]._setBorderStyle(e,t),n[r].updateModifyTime();return oe(n)}},{key:"_setBorderStyle",value:function(e,t){return(0,J._)((0,Y._)(n.prototype),"setBorderStyle",this).call(this,e,t)}},{key:"getRichText",value:function(){for(var e=this.annot.GetRichTextCount(),t=[],n=0;n<e;n++){var r={},i=this.annot.GetRichTextContent(n);r.content=this.JR.getPDFString(i),r.richTextStyle=this.getRichTextStyle(n),t.push(r)}return t}},{key:"getRichTextStyle",value:function(e){var t=this.annot.GetRichTextStyle(e),n={textSize:t.text_size,textAlignment:t.text_alignment.value,textColor:t.text_color,isBold:t.is_bold,isItalic:t.is_italic,isUnderline:t.is_underline,isStrikethrough:t.is_strikethrough,cornerMarkStyle:t.mark_style.value};if(!t.font.IsEmpty()){var r=this.JR.getPDFString(t.font.GetName()),i=te.mz[r];n.fontName=i||r}return n}},{key:"getPDFRichTextStyle",value:function(e,t){var n=new this.engine.RichTextStyle;if(e.font){var r=e.font,i=r.name,a=r.styles,o=r.charset,s=(0,te.O$)(i),c=s?s.value:i,u=(0,te.T2)(c);if(void 0!==u){var l=[this.engine.StandardID.e_StdIDCourier,this.engine.StandardID.e_StdIDCourierB,this.engine.StandardID.e_StdIDCourierBI,this.engine.StandardID.e_StdIDCourierI,this.engine.StandardID.e_StdIDHelvetica,this.engine.StandardID.e_StdIDHelveticaB,this.engine.StandardID.e_StdIDHelveticaBI,this.engine.StandardID.e_StdIDHelveticaI,this.engine.StandardID.e_StdIDTimes,this.engine.StandardID.e_StdIDTimesB,this.engine.StandardID.e_StdIDTimesBI,this.engine.StandardID.e_StdIDTimesI,this.engine.StandardID.e_StdIDSymbol,this.engine.StandardID.e_StdIDZapfDingbats];n.font=new this.engine.Font(l[u])}else try{n.font=new this.engine.Font((0,$.Dp)(this.engine,i),a||0,this.engine.Charset.values[o]||this.engine.Charset.e_CharsetANSI,0)}catch(e){n.font=new this.engine.Font(0)}}return null!=e.textSize?n.text_size=e.textSize:null!=t&&(n.text_size=t.text_size),null!=e.textAlignment&&(n.text_alignment=this.engine.Alignment.values[e.textAlignment]||this.engine.Alignment.e_AlignmentLeft),null!=e.textColor&&(n.text_color=e.textColor),null!=e.isBold&&(n.is_bold=e.isBold),null!=e.isItalic&&(n.is_italic=e.isItalic),null!=e.isUnderline&&(n.is_underline=e.isUnderline),null!=e.isStrikethrough&&(n.is_strikethrough=e.isStrikethrough),null!=e.cornerMarkStyle&&(n.mark_style=this.engine.TextScriptType.values[e.cornerMarkStyle]||this.engine.TextScriptType.e_CornerMarkNone),n}},{key:"setRichTextStyle",value:function(e,t){var n=this.annot.GetRichTextStyle(e),r=this.getPDFRichTextStyle(t,n);this.annot.SetRichTextStyle(e,r),r.delete()}},{key:"updateRichTextStyle",value:function(e,t){if(e.GetType()===this.engine.AnnotType.e_FreeText)for(var n=e.GetRichTextCount(),r=0;r<n;r++){var i=e.GetRichTextStyle(r),a=this.engine.Alignment.values[t]||this.engine.Alignment.e_AlignmentLeft;i.text_alignment!==a&&(i.text_alignment=a,e.SetRichTextStyle(r,i))}}},{key:"setRichText",value:function(e){var t=this,n=!1,r=!1,i=e.filter(function(e){var t=e.index;return e.richTextStyle&&void 0!==t}),a=this.annot.GetType()===this.engine.AnnotType.e_FreeText&&i.length>0;if(a){var o=i[i.length-1].richTextStyle.textAlignment||0;this.updateRichTextStyle(this.annot,o)}e.forEach(function(e){var o=e.index,s=e.content,c=e.richTextStyle;if(void 0!==o&&s&&c){if(s){var u=new t.engine.WString(s);t.annot.SetRichTextContent(o,u),u.delete(),r=!0}if(c){if(a){var l=i[i.length-1].richTextStyle.textAlignment||0;c.textAlignment=l}t.setRichTextStyle(o,c)}n=!0}}),r&&this.updateContent(),n&&this.annot.ResetAppearanceStream()}},{key:"addRichText",value:function(e){var t=this,n=!1;if(e=e.filter(function(e){var t=e.content,n=e.richTextStyle;return t&&n}),0!==e.length){var r=this.annot.GetType()===this.engine.AnnotType.e_FreeText,i=e[e.length-1].richTextStyle.textAlignment||0;r&&this.updateRichTextStyle(this.annot,i),e.forEach(function(e){var a=e.content,o=e.richTextStyle;if(a&&o){var s=new t.engine.WString(a);r&&(o.textAlignment=i);var c=t.getPDFRichTextStyle(o);t.annot.AddRichText(s,c),s.delete(),c.delete(),n=!0}}),n&&this.updateContent(),n&&this.annot.ResetAppearanceStream()}}},{key:"insertRichText",value:function(e){var t=this,n=!1;if(e=e.filter(function(e){var t=e.index,n=e.content,r=e.richTextStyle;return n&&r&&null!=t}),0!==e.length){var r=this.annot.GetType()===this.engine.AnnotType.e_FreeText,i=e[e.length-1].richTextStyle.textAlignment||0;r&&this.updateRichTextStyle(this.annot,i),e.forEach(function(e){var a=e.index,o=e.content,s=e.richTextStyle;if(o&&s&&null!=a){var c=new t.engine.WString(o);r&&(s.textAlignment=i);var u=t.getPDFRichTextStyle(s);t.annot.InsertRichText(a,c,u),c.delete(),u.delete(),n=!0}}),n&&this.updateContent(),n&&this.annot.ResetAppearanceStream()}}},{key:"removeRichText",value:function(e){var t=this,n=!1,r=this.annot.GetRichTextCount();if(e.length>1){e=e.sort(function(e,t){return e>t?-1:e<t?1:0})}e.forEach(function(e){e>=0&&e<r&&(t.annot.RemoveRichText(e),n=!0)}),n&&this.updateContent(),n&&this.annot.ResetAppearanceStream()}},{key:"updateContent",value:function(){for(var e=this.annot.GetRichTextCount(),t="",n=0;n<e;n++){t+=this.JR.getPDFString(this.annot.GetRichTextContent(n))}var r=new this.engine.WString(t);this.annot.SetContent(r),r.delete()}},{key:"setCaptionColor",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.annot.SetCaptionColor)return!1;var n=this.annot;return e<0&&(e=0),n.SetCaptionColor(e),t&&n.ResetAppearanceStream(),this.updateModifyTime(),!0}},{key:"setBorderOpacity",value:function(e){this.annot.SetBorderOpacity(e),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setFillOpacity",value:function(e){this.annot.SetFillOpacity(e),this.annot.ResetAppearanceStream(),this.updateModifyTime()}}]),n}(z.Z);const ae=ie;function oe(e){for(var t=[],n=e.length;n--;)t[n]=e[n].getId();return t}var se=function(e){function n(){return(0,t._)(this,n),(0,V._)(this,n,arguments)}return(0,Z._)(n,e),(0,r._)(n,[{key:"constructEngineAnnot",value:function(e){return new this.engine.TextMarkup(e)}},{key:"getRectData",value:function(){var e=(0,J._)((0,Y._)(n.prototype),"getRectData",this).call(this),t=this.getQuadPoints();return e.quadPoints=t,e}},{key:"getQuadPoints",value:function(){for(var e=this.annot.GetQuadPoints(),t=[],n=e.GetSize();n--;){var r=e.GetAt(n);t[n]=[{x:r.first.x,y:r.first.y},{x:r.second.x,y:r.second.y},{x:r.third.x,y:r.third.y},{x:r.fourth.x,y:r.fourth.y}],r.delete()}return e.delete(),t}},{key:"toJson",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).cTextPage,r=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this,e),i=this.annot,a=(this.engine,i.GetQuadPoints()),o=a.GetSize(),s=[],c=!1,u=t||this.pdfPage.getNormalTextPageSync();if(!u.IsEmpty()){var l="";try{l=u.GetTextUnderAnnot(i).toString()}catch(e){}if(l&&!/\n/.test(l)||(c=!0),r.text=l,c||!o)r.startCharIndex=-1,r.endCharIndex=-1;else{var d=a.GetAt(0),h=new this.engine.CFX_FloatRect(d.first.x,d.first.y,d.fourth.x,d.fourth.y);h.Normalize();var f=u.GetCharRange(h),g=f.GetSegmentStart(0);f.delete(),h.delete();var p=r.startCharIndex=g;if(-1!==p){u.GetTextRectCount(p,1);var v=u.GetTextRect(0),m=v.left,_=v.right,y=v.top,S=v.bottom,b=u.GetBaselineRotation(0),I=this.getRectArray(u,p,p);I.length&&(0===b.value||2===b.value?(y=Math.max(I[0].top,y),S=Math.min(I[0].bottom,S)):(m=Math.max(I[0].left,m),_=Math.min(I[0].right,_))),r.startCharInfo={charIndex:p,left:m,right:_,top:y,bottom:S,rotation:b.value}}var A=a.GetAt(o-1);(h=new this.engine.CFX_FloatRect(A.first.x,A.first.y,A.fourth.x,A.fourth.y)).Normalize();var P=(f=u.GetCharRange(h)).GetSegmentEnd(0);f.delete(),h.delete();var D=r.endCharIndex=P;if(-1!==D){var E=u.GetTextRectCount(D,1),C=u.GetTextRect(E-1),w=C.left,k=C.right,T=C.top,F=C.bottom,G=u.GetBaselineRotation(0),R=this.getRectArray(u,D,D);R.length&&(0===G.value||2===G.value?(T=Math.max(R[0].top,T),F=Math.min(R[0].bottom,F)):(w=Math.max(R[0].left,w),k=Math.min(R[0].right,k))),r.endCharInfo={charIndex:D,left:w,right:k,top:T,bottom:F,rotation:G.value}}for(var x=o;x--;){var O=a.GetAt(x);s[x]=[{x:O.first.x,y:O.first.y},{x:O.second.x,y:O.second.y},{x:O.third.x,y:O.third.y},{x:O.fourth.x,y:O.fourth.y}],O.delete()}}if(r.quadPoints=s,r.startCharIndex>r.endCharIndex){var M=r.startCharIndex;r.startCharIndex=r.endCharIndex,r.endCharIndex=M,M=r.startCharInfo,r.startCharInfo=r.endCharInfo,r.endCharInfo=M}-1===r.startCharIndex||-1===r.endCharIndex?c=!0:r.continuousText=u.GetChars(r.startCharIndex,r.endCharIndex-r.startCharIndex+1),r.continuousText=r.continuousText||r.text}return r.isArea=c,a.delete(),r}},{key:"updateQuadPointsByCharIndex",value:function(e,t){if(-1===e||-1===t)return!1;if(e>t){var n=e;e=t,t=n}var r=this.pdfPage.getNormalTextPageSync(),i=r.GetTextRectCount(e,t-e+1);if(i<1)return!1;for(var a=this.getRectArray(r,e,t),o=this.engine,s=new o.QuadPointsArray,c=o.QuadPoints,u=o.PointF,l=0,d=i;l<d;l++){var h=r.GetTextRect(l),f=r.GetBaselineRotation(l),g=h.top,p=h.right,v=h.bottom,m=h.left;a[l]&&(0===f.value||2===f.value?(g=Math.max(a[l].top,g),v=Math.min(a[l].bottom,v)):(m=Math.max(a[l].left,m),p=Math.min(a[l].right,p)));var _=new u(m,g),y=new u(p,g),S=new u(m,v),b=new u(p,v),I=void 0,A=void 0,P=void 0,D=void 0;switch(f.value%4){case 0:I=_,A=y,P=S,D=b;break;case 1:I=_,A=S,P=y,D=b;break;case 2:I=b,A=S,P=y,D=_;break;case 3:I=b,A=y,P=S,D=_}s.Add(new c(I,A,P,D))}var E=this.annot;return E.SetQuadPoints(s),E.ResetAppearanceStream(),s.delete(),this.updateModifyTime(),!0}},{key:"create",value:function(e){var t=this,r=(0,J._)((0,Y._)(n.prototype),"create",this).call(this,e),i=this.engine;if(void 0!==e.startCharIndex&&void 0!==e.endCharIndex)this.updateQuadPointsByCharIndex(e.startCharIndex,e.endCharIndex);else if(e.coords){if(0===e.coords.length)throw new Error("Annot [".concat(e.type,"] coords is missing!"));for(var a=e.coords,o=new i.QuadPointsArray,s=i.QuadPoints,c=i.PointF,u=this.pdfPage.getNormalTextPageSync(),l=0,d=a.length;l<d;l++){var h=a[l],f=h.top,g=h.right,p=h.bottom,v=h.left,m=u.GetIndexAtPos((v+g)/2,(p+f)/2,2),_=0;u.GetTextRectCount(m,3)>0&&(_=u.GetBaselineRotation(0).value),P(h,_,o,s,c)}var y=this.annot;y.SetQuadPoints(o),y.ResetAppearanceStream(),o.delete()}else{var S=e.rect;if(S.right-S.left<.5||S.top-S.bottom<.5)throw new Error("Annot [".concat(e.type,"] rect is missing!"));var b=new i.QuadPointsArray,I=i.QuadPoints,A=i.PointF;this.pdfPage.getTextRectsAtRect2(e.rect).then(function(e){e.forEach(function(e){P(e,e.rotation,b,I,A)});var n=t.annot;n.SetQuadPoints(b),n.ResetAppearanceStream(),b.delete()})}return r;function P(e,t,n,r,i){var a=e.left,o=e.top,s=e.right,c=e.bottom;switch(t%4){case 0:n.Add(new r(new i(a,o),new i(s,o),new i(a,c),new i(s,c)));break;case 1:n.Add(new r(new i(a,c),new i(a,o),new i(s,c),new i(s,o)));break;case 2:n.Add(new r(new i(s,c),new i(a,c),new i(s,o),new i(a,o)));break;case 3:n.Add(new r(new i(s,o),new i(s,c),new i(a,o),new i(a,c)))}}}},{key:"getRectArray",value:function(e,t,n){for(var r=[],i=t;i<n+1;){var a=e.GetLineStart(i),o=e.GetLineEnd(i);-1===a&&(a=i),-1===o&&(o=i);var s=e.GetRectArray(a,o-a+1),c=o;c>n&&(c=n);var u=e.GetRectArray(i,c-i+1);if(s.GetSize())for(var l=s.GetAt(0),d=0;d<u.GetSize();d++){var h=u.GetAt(d),f=h.left,g=h.top,p=h.right,v=h.bottom;g=l.top,v=l.bottom,r.push({left:f,top:g,right:p,bottom:v})}i=c+1}return r}}]),n}(ae);const ce=se;var ue=function(e){function n(){return(0,t._)(this,n),(0,V._)(this,n,arguments)}return(0,Z._)(n,e),(0,r._)(n,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Highlight(e)}},{key:"toJson",value:function(e,t){var r=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this,e,t),i=this.annot,a=this.engine;return i.GetDict().HasKey((0,$.n5)(a,"AreaHi"))&&(r.isArea=!0),r}},{key:"setRect",value:function(e){var t=this.engine,r=new t.QuadPointsArray,i=t.QuadPoints,a=t.PointF;return r.Add(new i(new a(e.left,e.top),new a(e.right,e.top),new a(e.left,e.bottom),new a(e.right,e.bottom))),this.annot.SetQuadPoints(r),this.annot.ResetAppearanceStream(),(0,J._)((0,Y._)(n.prototype),"setRect",this).call(this,e)}},{key:"move",value:function(e,t){var n=this.annot.GetRect(),r=n.left+e,i=n.right+e,a=n.top+t,o=n.bottom+t,s=this.engine,c=new s.QuadPointsArray,u=s.QuadPoints,l=s.PointF;c.Add(new u(new l(r,a),new l(i,a),new l(r,o),new l(i,o))),this.annot.SetQuadPoints(c),c.delete(),this.annot.ResetAppearanceStream();var d=new this.engine.CFX_FloatRect(r,o,i,a),h=this.annot.Move(d);return d.delete(),h}},{key:"create",value:function(e){var t=(0,J._)((0,Y._)(n.prototype),"create",this).call(this,e),r=e.color;return r=r||0==r?r:16776960,this.setBorderColor(r),t}}]),n}(ce);const le=ue;var de=function(e){function n(){return(0,t._)(this,n),(0,V._)(this,n,arguments)}return(0,Z._)(n,e),(0,r._)(n,[{key:"constructEngineAnnot",value:function(e){return new this.engine.StrikeOut(e)}},{key:"toJson",value:function(e,t){var r=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this,e,t);return r.IRT&&"Group"==r.RT&&""==r.intent&&(r.intent="StrikeOutTextEdit"),this.isReplace()&&(r.typeAlias="Replace"),r}},{key:"updateQuadPointsByCharIndex",value:function(e,t){return(0,J._)((0,Y._)(n.prototype),"updateQuadPointsByCharIndex",this).call(this,e,t)}},{key:"isReplace",value:function(){var e,t,n=this.annot;if(n.IsGrouped()&&(e=n.GetGroupElements())&&2===(t=e.GetSize())){for(var r=["AnnotType_e_StrikeOut","AnnotType_e_Caret"],i=t;i--;){var a=e.GetAt(i),o=r.indexOf(a.GetType().constructor.name);if(a.delete(),-1===o)return e.delete(),!1}return e.delete(),!0}return e&&e.delete(),!1}},{key:"create",value:function(e){var t=(0,J._)((0,Y._)(n.prototype),"create",this).call(this,e),r=e.color;return e.subject&&"replace"===e.subject.toLocaleLowerCase()?(r=r||0==r?r:255,this.setBorderColor(r)):(r=r||0==r?r:16711680,this.setBorderColor(r)),t}}]),n}(ce);const he=de;var fe=function(e){function n(){return(0,t._)(this,n),(0,V._)(this,n,arguments)}return(0,Z._)(n,e),(0,r._)(n,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Underline(e)}},{key:"create",value:function(e){var t=(0,J._)((0,Y._)(n.prototype),"create",this).call(this,e),r=e.color;return r=r||0==r?r:6736947,this.setBorderColor(r),t}}]),n}(ce);const ge=fe;var pe="vertical",ve="horizontal",me=function(){function e(n,r){(0,t._)(this,e),this.fromInchRate=n,this.name=r,Object.defineProperties(this,{fromInchRate:{value:n,enumerable:!0,writable:!1,configurable:!0},name:{value:r,enumerable:!0,writable:!1,configurable:!0}})}return(0,r._)(e,[{key:"isPixel",get:function(){return!1}},{key:"convertTo",value:function(e,t){return e/this.fromInchRate*t.fromInchRate}},{key:"convertAreaTo",value:function(e,t){return e/Math.pow(this.fromInchRate,2)*Math.pow(t.fromInchRate,2)}}]),e}(),_e=function(e){function n(e){var r;return(0,t._)(this,n),(r=(0,V._)(this,n,[0,"px"])).orientation=e,Object.defineProperty(r,"fromInchRate",{get:function(){var t=(0,d.EF)();switch(e){case ve:return t.x;case pe:return t.y;default:return t.x}}}),r}return(0,Z._)(n,e),(0,r._)(n,[{key:"isPixel",get:function(){return!0}}]),n}(me);const ye={inch:"inch",custom:"custom",mi:"mi",pt:"pt",ft:"ft",yd:"yd",km:"km",m:"m",cm:"cm",mm:"mm",pica:"pica"};var Se,be=new me(1,ye.inch),Ie=new me(1,ye.custom),Ae=new me(1/63360,ye.mi),Pe=new me(72,ye.pt),De=new me(1/12,ye.ft),Ee=new me(1/36,ye.yd),Ce=new me(.0254/1e3,ye.km),we=new me(.0254,ye.m),ke=new me(2.54,ye.cm),Te=new me(25.4,ye.mm),Fe=new me(6,ye.pica),Ge=new _e(ve),Re=(new _e(pe),Se={},(0,i._)(Se,be.name,be),(0,i._)(Se,Ie.name,Ie),(0,i._)(Se,Ae.name,Ae),(0,i._)(Se,Pe.name,Pe),(0,i._)(Se,De.name,De),(0,i._)(Se,Ee.name,Ee),(0,i._)(Se,Ce.name,Ce),(0,i._)(Se,we.name,we),(0,i._)(Se,ke.name,ke),(0,i._)(Se,Te.name,Te),(0,i._)(Se,Fe.name,Fe),(0,i._)(Se,Ge.name,Ge),Se);function xe(e){switch(e=(e=e.toLowerCase()).replace(/[^a-z]/g,"")){case"in":e="inch";break;case"p":e="pica"}return Re[e]}function Oe(e){var t=1;switch(e){case"pt":t=72;break;case"in":case"inch":default:t=1;break;case"cm":t=2.54;break;case"p":case"pica":t=5.9;break;case"mm":t=25.4}return t}function Me(e){var t=e.match(/(\d+(\.\d+)?)\s+(\w+)\s+=\s+(\d+(\.\d+)?)\s+(\w+)/);if(t){var n=(0,s._)(t,7),r=n[1],i=n[3],a=n[4],o=n[6];return"in"===i&&(i="inch"),"in"===o&&(o="inch"),{fScale:parseFloat(r),fUnit:xe(i),tScale:parseFloat(a),tUnit:xe(o)}}}function Ne(e,t){var n=e.x,r=e.y,i=t.left,a=t.right,o=t.top,s=t.bottom;return n>=i&&n<=a&&r>=s&&r<=o}function Be(t){return(0,e._)(function(){var e,n,r,i,a,o,s;return(0,l.Jh)(this,function(c){switch(c.label){case 0:return e=t.annot,[4,t.pdfPage.getViewportRect()];case 1:switch(n=c.sent(),t.getType()){case"line":return r=e.GetStartPoint(),i=e.GetEndPoint(),[2,Ne(r,n)&&Ne(i,n)];case"polyline":case"polygon":if(0===(a=e.GetVertexes()).length)return[2,!1];for(o=0;o<a.GetSize();o++)if(!Ne(a.GetAt(o),n))return[2,!1];return[2,!0];case"circle":return[2,Ne({x:(s=e.GetRect()).left,y:s.top},n)&&Ne({x:s.right,y:s.top},n)&&Ne({x:s.left,y:s.bottom},n)&&Ne({x:s.right,y:s.bottom},n)];default:return[2,!1]}return[2]}})})()}var Le=function(n){function i(){return(0,t._)(this,i),(0,V._)(this,i,arguments)}return(0,Z._)(i,n),(0,r._)(i,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Line(e)}},{key:"calculateLength",value:function(){return(0,e._)(function(){var e,t,n,r,i,a,o,s,c,u,d,h,f,g,p,v,m,_,y;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return e=this.annot.GetMeasureRatio().toString(),0==(t=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD).toString()).length&&(t=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX).toString()),0==e.length?[2]:("p"==t&&(t="pica"),n=this.annot.GetEndPoint(),r=this.annot.GetStartPoint(),i=n.x-r.x,a=n.y-r.y,o=Math.sqrt(i*i+a*a),[4,this.pdfPage.getMeasureScaleRatio()]);case 1:return s=l.sent(),[4,Be(this)];case 2:if(c=l.sent(),s&&s.scale&&c)o*=s.scale,t=s.unit;else{if(!(u=Me(e))&&0===e.length)return[2];d=u.fScale,h=u.fUnit,f=u.tScale,u.tUnit,g=h.convertTo(d,Pe),o=o*f/g}return o=Math.round(100*o)/100,p=this.annot.GetContent().toString(),v=p.indexOf("\n"),m=p.lastIndexOf(" "),_=m>=0&&p.substr(m+1),y=p.substr(0,-1===v?v:v+1),"p"===_&&(_="pica"),this.setContent(y+o+" "+(t||_)),[2]}})}).call(this)}},{key:"enableCaption",value:function(e){return this.annot.EnableCaption(e),this.annot.ResetAppearanceStream(),this.updateModifyTime(),!0}},{key:"setFillColor",value:function(e){if("number"!=typeof e)throw new Error("Incorrect color value: ".concat(e));return 0===e?(this.annot.RemoveProperty({value:3}),this.annot.ResetAppearanceStream()):(this.annot.SetStyleFillColor(e),this.annot.ResetAppearanceStream()),this.updateModifyTime(),[this]}},{key:"setCaptionOffset",value:function(e,t){var n=new this.engine.PointF(e,t);this.annot.SetCaptionOffset(n),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setCaptionPositionType",value:function(e){}},{key:"setEndPoint",value:function(e,t){var n=new this.engine.PointF(e,t);this.annot.SetEndPoint(n),this.calculateLength(),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setLeaderLineExtensionLength",value:function(e){this.annot.SetLeaderLineExtensionLength(e),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setLeaderLineLength",value:function(e){this.annot.SetLeaderLineLength(e),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setLeaderLineOffset",value:function(e){this.annot.SetLeaderLineOffset(e),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setLineEndStyle",value:function(e){var t=this.engine.EndingStyle.values[e];this.annot.SetLineEndStyle(t),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setLineStartStyle",value:function(e){var t=this.engine.EndingStyle.values[e];this.annot.SetLineStartStyle(t),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setMeasureConversionFactor",value:function(e,t){}},{key:"setMeasureRatio",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userSpaceValue,n=void 0===t?1:t,r=e.userSpaceUnit,i=void 0===r?"inch":r,a=e.realValue,o=void 0===a?1:a,s=e.realUnit,c=void 0===s?"inch":s,u=new this.engine.String("".concat(n," ").concat(i," = ").concat(o," ").concat(c));this.annot.SetMeasureRatio(u),this.calculateLength(),this.annot.ResetAppearanceStream(),u.delete()}},{key:"setMeasureUnit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=new this.engine.String(e);this.annot.SetMeasureUnit(this.engine.MeasureType.values[t],n),this.calculateLength(),this.annot.ResetAppearanceStream(),n.delete()}},{key:"setLinePoints",value:function(e,t,n,r){this.setStartPoint_Dict(e,t),this.setEndPoint_Dict(n,r),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setStartPoint",value:function(e,t){var n=new this.engine.PointF(e,t);this.annot.SetStartPoint(n),n.delete(),this.calculateLength(),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setRotation",value:function(e){this.annot.SetRotation(e),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"create",value:function(e){var t=(0,J._)((0,Y._)(i.prototype),"create",this).call(this,e),n=this.annot,r=e.startStyle,a=e.endStyle,o=e.rect,s=e.enableCaption,c=e.startPoint,u=e.endPoint;if(r=r||0,a=a||0,void 0!==Q.E2[r]&&this.setLineStartStyle(r),e.length&&this.setLeaderLineLength(e.length),e.intent==Q.WA.LINE_DIMENSION&&(e.leaderLineLength&&this.setLeaderLineLength(e.leaderLineLength),e.leaderLineExtend&&this.setLeaderLineExtensionLength(e.leaderLineExtend),e.leaderLineOffset&&this.setLeaderLineOffset(e.leaderLineOffset)),e.borderWidth&&this.setBorderWidth(e.borderWidth),e.borderStyle&&this.setBorderStyle(e.borderStyle,e.borderStyleParam),e.styleFillColor&&this.setFillColor(e.styleFillColor),e.fillColor&&this.setFillColor(e.fillColor),Q.E2[a]&&this.setLineEndStyle(a),"boolean"==typeof s&&n.EnableCaption(s),(e.captionColor||0===e.captionColor)&&("string"==typeof e.captionColor&&(e.captionColor=parseInt(e.captionColor,16)),this.setCaptionColor(e.captionColor,!1)),void 0!==c?this.setStartPoint(c.x,c.y):this.setStartPoint(o.left,o.top),void 0!==u?this.setEndPoint(u.x,u.y):this.setEndPoint(o.right,o.bottom),e.rotation&&this.setRotation(e.rotation),e.measure&&0!==Object.keys(e.measure).length){this.annot.SetMeasureConversionFactor(0,2);var l=e.measure.ratio,d=l.userSpaceValue,h=l.userSpaceUnit,f=l.realValue,g=l.realUnit,p=new this.engine.String(e.measure.unit);if(this.annot.SetMeasureUnit(this.engine.MeasureType.e_MeasureTypeA,p),g&&(p=new this.engine.String(g),this.annot.SetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD,p)),0!==Object.keys(e.measure.ratio).length){p=new this.engine.String(h);var v=Oe(h);v=v*f/d,this.annot.SetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX,p),this.annot.SetMeasureConversionFactor(this.engine.MeasureType.e_MeasureTypeX,1*v/72),this.setMeasureRatio(e.measure.ratio)}p.delete()}return this.calculateLength(e.label),t}},{key:"getRectData",value:function(){var e=(0,J._)((0,Y._)(i.prototype),"getRectData",this).call(this),t=this.getLineData();return Object.assign(t,e)}},{key:"getLineData",value:function(){var e,t,n=this.annot.GetCaptionOffset(),r=this.annot.GetCaptionPositionType(),i=this.annot.GetEndPoint(),a=this.annot.GetLeaderLineExtensionLength(),o=this.annot.GetLeaderLineLength(),s=this.annot.GetLeaderLineOffset(),c=this.annot.GetLineEndStyle(),u=this.annot.GetLineStartStyle(),l=this.annot.GetMeasureConversionFactor(0);try{e=this.annot.GetMeasureRatio().toString(),0==(t=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD).toString()).length&&(t=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX).toString())}catch(n){e=this.JR.getHexString(this.annot.GetMeasureRatio()),0==(t=this.JR.getHexString(this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD))).length&&(t=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX).toString())}var d=this.annot.GetStartPoint();return{captionOffset:{x:n.x,y:n.y},capPos:r.value,endPoint:{x:i.x,y:i.y},leaderLineExtensionLength:a,leaderLineLength:o,leaderLineOffset:s,endingStyle:c.value,startStyle:u.value,measureConversionFactor:l,measureRatio:e,measureUnit:t,startPoint:{x:d.x,y:d.y}}}},{key:"toJson",value:function(e){var t=(0,J._)((0,Y._)(i.prototype),"toJson",this).call(this,e);if(0==t.borderInfo.width){t.borderInfo.width=1;var n=this.annot.GetBorderInfo();n.width=1,this.annot.SetBorderInfo(n)}var r=this.getLineData();t.styleFillColor=this.getFillColor();var a={hasCaption:this.annot.HasCaption(),captionColor:this.annot.GetCaptionColor(),rotation:this.annot.GetRotation()};return Object.assign(r,a,t)}},{key:"setStartPoint_Dict",value:function(e,t){var n=this.annot.GetDict();if(n){var r,i=new this.engine.String("L"),a=n.HasKey(i);a||(r=this.engine.PDFArray.Create());var o=(r=n.GetElement(i).GetArray()).GetElementCount();o<1?r.AddFloat(e):(r.RemoveAt(0),r.InsertAt(0,this.engine.PDFObject.CreateFromFloat(e))),o<2?r.AddFloat(t):(r.RemoveAt(1),r.InsertAt(1,this.engine.PDFObject.CreateFromFloat(t))),o<3&&r.AddFloat(0),o<4&&r.AddFloat(0),a||n.SetAt(i,r),i.delete()}}},{key:"setEndPoint_Dict",value:function(e,t){var n=this.annot.GetDict();if(n){var r,i=new this.engine.String("L"),a=n.HasKey(i);a||(r=this.engine.PDFArray.Create());var o=(r=n.GetElement(i).GetArray()).GetElementCount();o<1&&r.AddFloat(0),o<2&&r.AddFloat(0),o<3?r.AddFloat(e):(r.RemoveAt(2),r.InsertAt(2,this.engine.PDFObject.CreateFromFloat(e))),o<4?r.AddFloat(t):(r.RemoveAt(3),r.InsertAt(3,this.engine.PDFObject.CreateFromFloat(t))),a||n.SetAt(i,r),i.delete()}}}]),i}(ae);const je=Le;var Ue=function(){function e(n,r){(0,t._)(this,e),(0,i._)(this,"startPoint",void 0),(0,i._)(this,"points",void 0),this.startPoint=n,this.points=r}return(0,r._)(e,[{key:"isEmpty",value:function(){return 0===this.points.length}},{key:"optimize",value:function(){var t=Array.from(new Set(this.points.map(function(e){return JSON.stringify(e)}))).map(function(e){return JSON.parse(e)});if(1===t.length){var n=t[0];"lineTo"===n.type&&n.x===this.startPoint.x&&n.y===this.startPoint.y&&(t.length=0)}return new e(this.startPoint,t)}}]),e}(),We=function(){function e(n,r){(0,t._)(this,e),(0,i._)(this,"startPoint",void 0),(0,i._)(this,"points",void 0),this.startPoint=n,this.points=r}return(0,r._)(e,[{key:"getSegments",value:function(){return this.points.reduce(function(e,t){var n=e[e.length-1];return"lineTo"===t.type||"cubicBezierTo"==t.type?n.points.push(t):e.push(new Ue(t,[])),e},[new Ue(this.startPoint,[])])}},{key:"toPointArray",value:function(){return[this.startPoint].concat(this.points)}},{key:"toVertexesArray",value:function(){return this.toPointArray().flatMap(function(e){return"cubicBezierTo"===e.type?e.operands.map(function(e){return{type:e.closeFigure?Q.Xt.BEZIER_TO_CLOSE_FIGURE:Q.Xt.BEZIER_TO,x:e.x,y:e.y}}):[{x:e.x,y:e.y,type:"lineTo"===e.type?e.closeFigure?Q.Xt.LINE_TO_CLOSE_FIGURE:Q.Xt.LINE_TO:Q.Xt.MOVE_TO}]})}},{key:"updatePoint",value:function(e,t){!function(e){if((0,d.qh)(e.x)&&(0,d.qh)(e.y))return!0;throw new Error("Incorrect point: ".concat(JSON.stringify(e)))}(t);var n=[this.startPoint].concat(this.points.flatMap(function(e){return"cubicBezierTo"===e.type?e.operands:e}));n[e].x=t.x,n[e].y=t.y}},{key:"toGSDKPath",value:function(e){var t=new e.Path,n=e.PointF;return this.toPointArray().forEach(function(e){switch(e.type){case"moveTo":t.MoveTo(new n(e.x,e.y));break;case"lineTo":t.LineTo(new n(e.x,e.y)),e.closeFigure&&t.CloseFigure();break;case"cubicBezierTo":var r=e.operands;t.CubicBezierTo(new n(r[0].x,r[0].y),new n(r[1].x,r[1].y),new n(r[2].x,r[2].y));break;default:throw new Error("Incorrect point: ".concat(JSON.stringify(e),", its type must be one of 'moveTo', 'lineTo' or 'cubicBezier'"))}}),t}}],[{key:"fromGSDKPath",value:function(t,n){var r=t.GetPointCount();if(0===r)return null;for(var i=n.PointType,a=[],o=0;;){var s=t.GetPointType(o),c=t.GetPoint(o);switch(s){case i.e_TypeLineTo:case i.e_TypeLineToCloseFigure:a.push({type:"lineTo",x:c.x,y:c.y,closeFigure:s===i.e_TypeLineToCloseFigure}),o++;break;case i.e_TypeMoveTo:a.push({type:"moveTo",x:c.x,y:c.y}),o++;break;case i.e_TypeBezierTo:for(var u=[],l=o+3;o<l;o++){var d=t.GetPoint(o);u.push({x:d.x,y:d.y,closeFigure:t.GetPointType(o)===i.e_TypeBezierToCloseFigure})}a.push({type:"cubicBezierTo",operands:u})}if(o>=r-1)break}return new e(a[0],a.slice(1))}},{key:"fromPointArray",value:function(t){if(t.length<2)throw new Error("Invalid path point array! The point count must be greater than 2");if("moveTo"!==t[0].type)throw new Error("Invalid path point array!, The type of first point must be 'moveTo'");return new e(t[0],t.slice(1))}}]),e}();var He=function(n){function i(){return(0,t._)(this,i),(0,V._)(this,i,arguments)}return(0,Z._)(i,n),(0,r._)(i,[{key:"constructEngineAnnot",value:function(e){return new this.engine.PolyLine(e)}},{key:"setLineEndStyle",value:function(e){var t=this.engine.EndingStyle.values[e];this.annot.SetLineEndStyle(t),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setLineStartStyle",value:function(e){var t=this.engine.EndingStyle.values[e];this.annot.SetLineStartStyle(t),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setFillColor",value:function(e){if("number"!=typeof e)throw new Error("Incorrect color value: ".concat(e));return 0===e?(this.annot.RemoveProperty({value:3}),this.annot.ResetAppearanceStream()):(this.annot.SetStyleFillColor(e),this.annot.ResetAppearanceStream()),this.updateModifyTime(),[this]}},{key:"calculatePerimeter",value:function(){return(0,e._)(function(){var e,t,n,r,i,a,o,s,c,u,d,h,f,g,p,v,m,_,y,S,b,I,A,P,D,E,C;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return e=this.annot.GetMeasureRatio().toString(),0==(t=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD).toString()).length&&(t=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX).toString()),0==e.length?[2]:(n=this.annot.GetVertexes()).length<2?[2]:[4,this.pdfPage.getMeasureScaleRatio()];case 1:return r=l.sent(),[4,Be(this)];case 2:if(i=l.sent(),a=0,o=n.GetAt(0),r&&r.scale&&i){for(s=1;s<n.GetSize();s++)c=n.GetAt(s),u=c.x-o.x,d=c.y-o.y,h=Math.sqrt(u*u+d*d),a+=h,o=c;a*=r.scale,t=r.unit}else{if(!(f=Me(e)))return[2];for(g=f.fScale,p=f.fUnit,v=f.tScale,f.tUnit,m=1;m<n.GetSize();m++)_=n.GetAt(m),y=_.x-o.x,S=_.y-o.y,b=Math.sqrt(y*y+S*S),I=p.convertTo(g,Pe),a+=b=b*v/I,o=_}return A=this.annot.GetContent().toString(),P=A.indexOf("\n"),D=A.substr(0,-1===P?P:P+1),E=A.lastIndexOf(" "),"p"===(C=E>=0&&A.substr(E+1))&&(C="pica"),this.setContent(D+Math.round(100*a)/100+" "+(t||C)),[2]}})}).call(this)}},{key:"setMeasureUnit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=new this.engine.String(e);this.annot.SetMeasureUnit(this.engine.MeasureType.values[t],n),this.calculatePerimeter(),this.annot.ResetAppearanceStream(),n.delete()}},{key:"enableCaption",value:function(e){return this.annot.EnableCaption(e),this.annot.ResetAppearanceStream(),this.updateModifyTime(),!0}},{key:"updateVertexes",value:function(e,t,n){var r=this.annot.GetVertexes(),i=new this.engine.PointF(t,n);r.SetAt(parseInt(e),i),i.delete(),this.annot.SetVertexes(r),this.calculatePerimeter(),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setVertexes",value:function(e){var t=this,n=e.reduce(function(e,n){var r=n.x,i=n.y,a=new t.engine.PointF(r,i);return e.Add(a),a.delete(),e},new this.engine.PointFArray);this.annot.SetVertexes(n),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setMeasureRatio",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userSpaceValue,n=void 0===t?1:t,r=e.userSpaceUnit,i=void 0===r?"inch":r,a=e.realValue,o=void 0===a?1:a,s=e.realUnit,c=void 0===s?"inch":s,u=e.bResetAp,l=void 0===u||u,d=new this.engine.String("".concat(n," ").concat(i," = ").concat(o," ").concat(c));this.annot.SetMeasureRatio(d),d.delete(),this.calculatePerimeter(),l&&this.annot.ResetAppearanceStream()}},{key:"getPath",value:function(){var e=this.annot.GetPath(),t=We.fromGSDKPath(e,this.engine);return t?t.toPointArray():null}},{key:"setPath",value:function(e){this.annot.SetPath(We.fromPointArray(e).toGSDKPath(this.engine)),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"updatePathPoint",value:function(e,t){var n=We.fromGSDKPath(this.annot.GetPath(),this.engine);n.updatePoint(e,t),this.annot.SetPath(n.toGSDKPath(this.engine)),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setRotation",value:function(e){this.annot.SetRotation(e),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"create",value:function(e){var t=this,n=(0,J._)((0,Y._)(i.prototype),"create",this).call(this,e);if("boolean"==typeof e.enableCaption&&this.annot.EnableCaption(e.enableCaption),e.vertexes){var r=e.vertexes.reduce(function(e,n){var r=n.x,i=n.y,a=new t.engine.PointF(r,i);return e.Add(a),a.delete(),e},new this.engine.PointFArray);this.annot.SetVertexes(r),this.annot.ResetAppearanceStream()}if(e.fillColor&&this.setFillColor(e.fillColor),e.borderWidth&&this.setBorderWidth(e.borderWidth),e.borderStyle&&this.setBorderStyle(e.borderStyle,e.borderStyleParam),e.startStyle&&this.setLineStartStyle(e.startStyle),e.endStyle&&this.setLineEndStyle(e.endStyle),(e.captionColor||0===e.captionColor)&&("string"==typeof e.captionColor&&(e.captionColor=parseInt(e.captionColor,16)),this.setCaptionColor(e.captionColor,!1)),e.rotation&&this.setRotation(e.rotation),e.measure&&0!==Object.keys(e.measure).length){this.annot.SetMeasureConversionFactor(0,2);var a=e.measure.ratio,o=a.userSpaceValue,s=a.userSpaceUnit,c=a.realValue,u=a.realUnit,l=new this.engine.String(e.measure.unit);if(this.annot.SetMeasureUnit(this.engine.MeasureType.e_MeasureTypeA,l),u&&(l=new this.engine.String(u),this.annot.SetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD,l)),0!==Object.keys(e.measure.ratio).length){l=new this.engine.String(s);var d=Oe(s);d=d*c/o,this.annot.SetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX,l),this.annot.SetMeasureConversionFactor(this.engine.MeasureType.e_MeasureTypeX,1*d/72),this.setMeasureRatio(e.measure.ratio,!1)}l.delete()}return this.annot.ResetAppearanceStream(),n}},{key:"getRectData",value:function(){var e=(0,J._)((0,Y._)(i.prototype),"getRectData",this).call(this),t=this.getLineData();return Object.assign(t,e)}},{key:"getLineData",value:function(){var e,t,n=this.annot.GetLineEndStyle(),r=this.annot.GetLineStartStyle(),i=this.annot.GetVertexes(),a=this.annot.GetMeasureConversionFactor(0);try{e=this.annot.GetMeasureRatio().toString(),0==(t=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD).toString()).length&&(t=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX).toString())}catch(n){e=this.JR.getHexString(this.annot.GetMeasureRatio()),0==(t=this.JR.getHexString(this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD))).length&&(t=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX).toString())}for(var o=[],s=0;s<i.GetSize();s++){var c=i.GetAt(s);o.push({x:c.x,y:c.y})}var u=this.getPath();return{endingStyle:n.value,startStyle:r.value,vertexes:o,path:u,measureConversionFactor:a,measureRatio:e,measureUnit:t}}},{key:"toJson",value:function(e){var t=(0,J._)((0,Y._)(i.prototype),"toJson",this).call(this,e);t.fillColor=this.getFillColor();var n={hasCaption:this.annot.HasCaption(),captionColor:this.annot.GetCaptionColor(),rotation:this.annot.GetRotation()},r=this.getLineData();return Object.assign(r,n,t)}}]),i}(ae);const Ke=He;var ze=function(n){function i(){return(0,t._)(this,i),(0,V._)(this,i,arguments)}return(0,Z._)(i,n),(0,r._)(i,[{key:"isCemicircleCloudy",value:function(){return this.JR.configurations.annotation.cemicircleCloudy}},{key:"constructEngineAnnot",value:function(e){var t=this,n=new this.engine.Polygon(e),r=n.ResetAppearanceStream;return n.ResetAppearanceStream=function(){r.call(n),t.isCemicircleCloudy()&&n.SetCemicircleCloudy()},this.isCemicircleCloudy()&&n.SetCemicircleCloudy(),n}},{key:"calculateArea",value:function(){return(0,e._)(function(){var e,t,n,r,i,a,o,s,c,u,d,h,f,g,p;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return e=this.annot.GetMeasureRatio().toString(),0==(t=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD).toString()).length&&(t=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX).toString()),0==e.length?[2]:(n=this.annot.GetVertexes()).length<2?[2]:[4,this.pdfPage.getMeasureScaleRatio()];case 1:return r=l.sent(),[4,Be(this)];case 2:if(i=l.sent(),a=function(e,t,n,r){var i=e.x*t.y+t.x*n.y+n.x*e.y-(e.x*n.y+t.x*e.y+n.x*t.y);if(i/=2,!r)return i;var a=r.fScale,o=r.fUnit,s=r.tScale;r.tUnit;return Pe.convertAreaTo(i,o)*Math.pow(s/a,2)},o=function(e,t){for(var n={x:0,y:0},r=0,i=1;i<=e.GetSize();++i)i<e.GetSize()?r+=a(n,e.GetAt(i-1),e.GetAt(i),t):r+=a(n,e.GetAt(i-1),e.GetAt(0),t);return Math.abs(r)},r&&r.scale&&i)s=o(n),s*=Math.pow(r.scale,2);else{if(!(c=Me(e)))return[2];s=o(n,c)}return u=this.annot.GetContent().toString(),d=u.indexOf("\n"),h=u.substr(0,-1===d?d:d+1),f=u.lastIndexOf(" "),"p"===(g=f>=0&&u.substr(f+1))&&(g="pica"),p=h+Math.round(100*s)/100+" sq "+(t||g),(s<1e-6||0===parseFloat(s.toFixed(2)))&&(p=""),this.setContent(p),[2]}})}).call(this)}},{key:"updateVertexes",value:function(e,t,n){var r=this.annot.GetVertexes(),i=new this.engine.PointF(t,n);r.SetAt(parseInt(e),i),i.delete(),this.annot.SetVertexes(r),this.calculateArea(),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setVertexes",value:function(e){var t=this,n=e.reduce(function(e,n){var r=n.x,i=n.y,a=new t.engine.PointF(r,i);return e.Add(a),a.delete(),e},new this.engine.PointFArray);this.annot.SetVertexes(n),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setMeasureRatio",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userSpaceValue,n=void 0===t?1:t,r=e.userSpaceUnit,i=void 0===r?"inch":r,a=e.realValue,o=void 0===a?1:a,s=e.realUnit,c=void 0===s?"inch":s,u=e.bResetAp,l=void 0===u||u,d=new this.engine.String("".concat(n," ").concat(i," = ").concat(o," ").concat(c));this.annot.SetMeasureRatio(d),d.delete(),this.calculateArea(),l&&this.annot.ResetAppearanceStream()}},{key:"setMeasureUnit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=new this.engine.String(e);this.annot.SetMeasureUnit(this.engine.MeasureType.values[t],n),this.calculateArea(),this.annot.ResetAppearanceStream(),n.delete()}},{key:"enableCaption",value:function(e){return this.annot.EnableCaption(e),this.annot.ResetAppearanceStream(),this.updateModifyTime(),!0}},{key:"getPath",value:function(){var e=this.annot.GetPath(),t=We.fromGSDKPath(e,this.engine);return t?t.toPointArray():null}},{key:"setPath",value:function(e){this.annot.SetPath(We.fromPointArray(e).toGSDKPath(this.engine)),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"updatePathPoint",value:function(e,t){var n=We.fromGSDKPath(this.annot.GetPath(),this.engine);n.updatePoint(e,t),this.annot.SetPath(n.toGSDKPath(this.engine)),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setRotation",value:function(e){this.annot.SetRotation(e),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"create",value:function(e){var t=(0,J._)((0,Y._)(i.prototype),"create",this).call(this,e);if("boolean"==typeof e.enableCaption&&this.annot.EnableCaption(e.enableCaption),e.vertexes&&this.setVertexes(e.vertexes),e.borderInfo&&this.setBorderInfo(e.borderInfo),e.fillColor&&this.setFillColor(e.fillColor),(e.captionColor||0===e.captionColor)&&("string"==typeof e.captionColor&&(e.captionColor=parseInt(e.captionColor,16)),this.setCaptionColor(e.captionColor,!1)),e.rotation&&this.setRotation(e.rotation),e.measure&&0!==Object.keys(e.measure).length){this.annot.SetMeasureConversionFactor(0,2);var n=e.measure.ratio,r=n.userSpaceValue,a=n.userSpaceUnit,o=n.realValue,s=n.realUnit,c=new this.engine.String(e.measure.unit);if(this.annot.SetMeasureUnit(this.engine.MeasureType.e_MeasureTypeA,c),s&&(c=new this.engine.String(s),this.annot.SetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD,c)),0!==Object.keys(e.measure.ratio).length){c=new this.engine.String(a);var u=Oe(a);u=u*o/r,this.annot.SetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX,c),this.annot.SetMeasureConversionFactor(this.engine.MeasureType.e_MeasureTypeX,1*u/72),this.setMeasureRatio(e.measure.ratio,!1)}c.delete()}return this.annot.ResetAppearanceStream(),t}},{key:"getRectData",value:function(){var e=(0,J._)((0,Y._)(i.prototype),"getRectData",this).call(this),t=this.getLineData();return Object.assign(t,e)}},{key:"getLineData",value:function(){for(var e=this.annot.GetVertexes(),t=[],n=0;n<e.GetSize();n++){var r=e.GetAt(n);t.push({x:r.x,y:r.y})}var i,a,o=this.annot.GetMeasureConversionFactor(0);try{i=this.annot.GetMeasureRatio().toString(),0==(a=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD).toString()).length&&(a=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX).toString())}catch(e){i=this.JR.getHexString(this.annot.GetMeasureRatio()),0==(a=this.JR.getHexString(this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD))).length&&(a=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX).toString())}return{vertexes:t,path:this.getPath(),measureRatio:i,measureUnit:a,measureConversionFactor:o}}},{key:"toJson",value:function(e){var t=(0,J._)((0,Y._)(i.prototype),"toJson",this).call(this,e);t.fillColor=this.getFillColor();var n={hasCaption:this.annot.HasCaption(),captionColor:this.annot.GetCaptionColor(),rotation:this.annot.GetRotation()},r=this.getLineData();return Object.assign(r,n,t)}},{key:"setFillColor",value:function(e){return(0,J._)((0,Y._)(i.prototype),"_setFillColor",this).call(this,e)}}],[{key:"caculateTriangleArea",value:function(e,t,n,r){r[FIELD_USER_SPACE_SCALE],r[FIELD_USER_SPACE_UNIT],r[FIELD_REAL_SCALE]}},{key:"caculatePolygonArea",value:function(e,t){for(var n={x:0,y:0},r=0,i=1;i<=e.length;++i)i<e.length?r+=MathAlgorithm.caculateTriangleArea(n,e[i-1],e[i],t):r+=MathAlgorithm.caculateTriangleArea(n,e[i-1],e[0],t);return Math.abs(r)}}]),i}(ae);const Ve=ze;var Je=function(e){function n(){return(0,t._)(this,n),(0,V._)(this,n,arguments)}return(0,Z._)(n,e),(0,r._)(n,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Squiggly(e)}},{key:"create",value:function(e){var t=(0,J._)((0,Y._)(n.prototype),"create",this).call(this,e),r=e.color;return r=r||0==r?r:16737843,this.setBorderColor(r),t}}]),n}(ce);const Ye=Je;var Ze=function(e){function n(){return(0,t._)(this,n),(0,V._)(this,n,arguments)}return(0,Z._)(n,e),(0,r._)(n,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Note(e)}},{key:"setIconName",value:function(e){var t=this.annot;return t.SetIconName((0,$.n5)(this.engine,e)),t.ResetAppearanceStream(),this.updateModifyTime(),!0}},{key:"setOpenStatus",value:function(e){return this.annot.SetOpenStatus(e),annot.ResetAppearanceStream(),this.updateModifyTime(),!0}},{key:"setStateName",value:function(e){var t,n=this.engine.StateModel,r=this.annot;if(!r.IsStateAnnot())return!1;var i=this.engine.MarkupState;switch(r.GetStateModel()){case n.e_StateModelMarked:switch(e){case Q.R3.UNMARKED:t=i.e_StateUnmarked;break;case Q.R3.MARKED:t=i.e_StateMarked;break;default:throw new Error("Illegal argument: incorrect state name in marked state model: ".concat(e))}break;case n.e_StateModelReview:switch(e){case Q.R3.ACCEPTED:t=i.e_StateAccepted;break;case Q.R3.CANCELLED:t=i.e_StateCancelled;break;case Q.R3.COMPLETED:t=i.e_StateCompleted;break;case Q.R3.NONE:t=i.e_StateNone;break;case Q.R3.REJECTED:t=i.e_StateRejected;break;case Q.R3.DEFERRED:t=i.e_StateDeferred;break;case Q.R3.FUTURE:t=i.e_StateFuture;break;default:throw new Error("Illegal argument: incorrect state name in review state model: ".concat(e))}}return r.SetState(t),this.updateModifyTime(),!0}},{key:"toJson",value:function(e){var t=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this,e);if(t.flag|=24,t.iconName=this.annot.GetIconName().toString(),this.annot.IsStateAnnot()){var r=this.engine.MarkupState;switch(t.isStateAnnot=!0,this.annot.GetState()){case r.e_StateAccepted:t.state=Q.R3.ACCEPTED;break;case r.e_StateCancelled:t.state=Q.R3.CANCELLED;break;case r.e_StateCompleted:t.state=Q.R3.COMPLETED;break;case r.e_StateNone:t.state=Q.R3.NONE;break;case r.e_StateRejected:t.state=Q.R3.REJECTED;break;case r.e_StateDeferred:t.state=Q.R3.DEFERRED;break;case r.e_StateFuture:t.state=Q.R3.FUTURE;break;case r.e_StateUnmarked:t.state=Q.R3.UNMARKED;break;case r.e_StateMarked:t.state=Q.R3.MARKED;break;default:t.isStateAnnot=!1}var i=this.annot.GetStateModel();i&&(t.stateMode=i.value);var a=this.annot.GetDict().GetElement(new this.engine.String("IRT")).GetDict();void 0===this.pdfPage._getAnnotIndexById(a.GetObjNum())&&this.pdfPage.addFakeAnnot(a,{markedStatesSummary:[{objectNumber:t.id}]})}else t.isStateAnnot=!1;return t.isOpen=this.annot.GetOpenStatus(),t}},{key:"create",value:function(e){var t=(0,J._)((0,Y._)(n.prototype),"create",this).call(this,e);return e.icon&&this.setIconName(e.icon),this.annot.ResetAppearanceStream(),t}}]),n}(ae);const qe=Ze;var Xe=function(n){function i(){return(0,t._)(this,i),(0,V._)(this,i,arguments)}return(0,Z._)(i,n),(0,r._)(i,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Circle(e)}},{key:"_calculateRectDiffer",value:function(){var e=this.annot.GetRect(),t=this.annot.GetInnerRect();return q.Z.subtract(e,t)}},{key:"move",value:function(e,t){var n=this.annot,r=q.Z.on(n.GetRect()).move(e,t).extract();return this.annot.Move(r),this.annot.ResetAppearanceStream(),!0}},{key:"setRect",value:function(e){var t=new this.engine.CFX_FloatRect(e.left,e.bottom,e.right,e.top),n=this.annot.Move(t);return t.delete(),this.calculateArea(),this.annot.ResetAppearanceStream(),this.updateModifyTime(),n}},{key:"setInnerRect",value:function(e){var t=new this.engine.CFX_FloatRect(e.left,e.bottom,e.right,e.top);return this.annot.SetInnerRect(t),this.annot.ResetAppearanceStream(),t.delete(),this.updateModifyTime(),!0}},{key:"getInnerRect",value:function(){return q.Z.on(this.annot.GetInnerRect()).toPlainObject()}},{key:"setAnnotRectAndInnerRect",value:function(e,t){var n=new this.engine.CFX_FloatRect(e.left,e.bottom,e.right,e.top),r=this.annot.Move(n),i=new this.engine.CFX_FloatRect(t.left,t.bottom,t.right,t.top);return this.annot.SetInnerRect(i),i.delete(),n.delete(),this.calculateArea(),this.annot.ResetAppearanceStream(),this.updateModifyTime(),r}},{key:"enableCaption",value:function(e){return this.annot.EnableCaption(e),this.annot.ResetAppearanceStream(),this.updateModifyTime(),!0}},{key:"getRectData",value:function(){var e=(0,J._)((0,Y._)(i.prototype),"getRectData",this).call(this),t=q.Z.on(this.annot.GetInnerRect()).toPlainObject();e.innerRect=t;var n=this.GetMeasureData();return Object.assign(e,n)}},{key:"GetMeasureData",value:function(){var e,t,n=this.annot.GetMeasureConversionFactor(0);try{e=this.annot.GetMeasureRatio().toString(),0==(t=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD).toString()).length&&(t=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX).toString())}catch(n){e=this.JR.getHexString(this.annot.GetMeasureRatio()),0==(t=this.JR.getHexString(this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD))).length&&(t=this.JR.getHexString(this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX)))}return{measureConversionFactor:n,measureRatio:e,measureUnit:t}}},{key:"toJson",value:function(e){var t=(0,J._)((0,Y._)(i.prototype),"toJson",this).call(this,e),n=this.getFillColor(),r=q.Z.on(this.annot.GetInnerRect()).toPlainObject(),a=this.GetMeasureData(),o={fillColor:n,innerRect:r,hasCaption:this.annot.HasCaption(),captionColor:this.annot.GetCaptionColor(),rotation:this.annot.GetRotation()};return Object.assign(t,a,o)}},{key:"setFillColor",value:function(e){return(0,J._)((0,Y._)(i.prototype),"_setFillColor",this).call(this,e)}},{key:"create",value:function(e){var t=(0,J._)((0,Y._)(i.prototype),"create",this).call(this,e);if(e.borderWidth&&this.setBorderWidth(e.borderWidth),e.fillColor&&this.setFillColor(e.fillColor),e.borderStyle&&this.setBorderStyle(e.borderStyle,e.borderStyleParam),"boolean"==typeof e.enableCaption&&this.annot.EnableCaption(e.enableCaption),(e.captionColor||0===e.captionColor)&&("string"==typeof e.captionColor&&(e.captionColor=parseInt(e.captionColor,16)),this.setCaptionColor(e.captionColor,!1)),e.rotation&&this.setRotation(e.rotation),e.measure&&0!==Object.keys(e.measure).length){this.annot.SetMeasureConversionFactor(0,2);var n=e.measure.ratio,r=n.userSpaceValue,a=n.userSpaceUnit,o=n.realValue,s=n.realUnit,c=new this.engine.String(e.measure.unit);if(this.annot.SetMeasureUnit(this.engine.MeasureType.e_MeasureTypeA,c),s&&(c=new this.engine.String(s),this.annot.SetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD,c)),0!==Object.keys(e.measure.ratio).length){c=new this.engine.String(a);var u=Oe(a);u=u*o/r,this.annot.SetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX,c),this.annot.SetMeasureConversionFactor(this.engine.MeasureType.e_MeasureTypeX,1*u/72),this.setMeasureRatio(e.measure.ratio)}c.delete()}return t}},{key:"calculateArea",value:function(){return(0,e._)(function(){var e,t,n,r,i,a,o,s,c,u,d,h,f,g;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return e=this,t=this.annot.GetMeasureRatio().toString(),n=this.annot.GetMeasureUnit(this.engine.MeasureType.e_MeasureTypeD).toString(),0==t.length?[2]:[4,this.pdfPage.getMeasureScaleRatio()];case 1:return r=l.sent(),[4,Be(this)];case 2:if(i=l.sent(),a=function(t){var n=e.annot.GetRect(),r=(n.right-n.left)/2*((n.top-n.bottom)/2)*Math.PI;if(!t)return r;var i=t.fScale,a=t.fUnit,o=t.tScale;t.tUnit;return Pe.convertAreaTo(r,a)*Math.pow(o/i,2)},r&&r.scale&&i)o=a(),o*=Math.pow(r.scale,2);else{if(!(s=Me(t)))return[2];o=a(s)}return c=this.annot.GetContent().toString(),u=c.indexOf("\n"),d=c.substr(0,-1===u?u:u+1),h=c.lastIndexOf(" "),"p"===(f=h>=0&&c.substr(h+1))&&(f="pica"),g=d+Math.round(100*o)/100+" sq "+(n||f),(o<1e-6||0===parseFloat(o.toFixed(2)))&&(g=""),this.setContent(g),[2]}})}).call(this)}},{key:"setMeasureConversionFactor",value:function(e){this.annot.SetMeasureConversionFactor(0,e),this.calculateArea(),this.annot.ResetAppearanceStream()}},{key:"setMeasureRatio",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userSpaceValue,n=void 0===t?1:t,r=e.userSpaceUnit,i=void 0===r?"inch":r,a=e.realValue,o=void 0===a?1:a,s=e.realUnit,c=void 0===s?"inch":s,u=new this.engine.String("".concat(n," ").concat(i," = ").concat(o," ").concat(c));this.annot.SetMeasureRatio(u),this.calculateArea(),this.annot.ResetAppearanceStream(),u.delete()}},{key:"setMeasureUnit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=new this.engine.String(e);this.annot.SetMeasureUnit(this.engine.MeasureType.values[t],n),this.calculateArea(),this.annot.ResetAppearanceStream(),n.delete()}},{key:"setBorderStyle",value:function(e,t){var n=this.annot.GetBorderInfo(),r=this.engine.BorderInfoStyle,a=(0,J._)((0,Y._)(i.prototype),"setBorderStyle",this).call(this,e,t);if(e!==Q.M8.CLOUDY&&n.style===r.e_Cloudy){var o=this.annot.GetInnerRect(),s=this.annot.GetRect();this.annot.SetInnerRect(s),this.annot.Move(o),this.annot.ResetAppearanceStream()}return a}},{key:"setRotation",value:function(e){this.annot.SetRotation(e),this.annot.ResetAppearanceStream(),this.updateModifyTime()}}]),i}(ae),Qe=__webpack_require__(821),$e=function(e){function n(){return(0,t._)(this,n),(0,V._)(this,n,arguments)}return(0,Z._)(n,e),(0,r._)(n,[{key:"constructEngineAnnot",value:function(e){return new this.engine.FileAttachment(e)}},{key:"toJson",value:function(e){var t=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this,e),r=this.engine,i=this.annot,a=i.GetDict(),o=new Qe.Z(this.getFileSpec(),this);t.fileSpec=o.toJson();var s=a.GetElement((0,$.n5)(r,"Contents"));if(s&&t.fileSpec){var c=s.GetWideString().toString();c!==t.fileSpec.fileName&&(t.fileSpec.description=c)}t.iconName=this.JR.getPDFString(i.GetIconName());var u=a.GetElement((0,$.n5)(r,"FS"));return u&&(u=u.GetDirectObject(),t.fObjNum=u.GetObjNum()),t}},{key:"setIconName",value:function(e){var t=this.annot;return t.SetIconName(new this.engine.String(e)),t.ResetAppearanceStream(),this.updateModifyTime(),!0}},{key:"getFileSpec",value:function(){return this.annot.GetFileSpec()}},{key:"create",value:function(e){var t=(0,J._)((0,Y._)(n.prototype),"create",this).call(this,e),r=this.engine;try{e.iconName&&(e.icon=e.iconName),e.icon&&this.annot.SetIconName((0,$.n5)(r,e.icon))}catch(e){console.log(e),isNaN(e)||(e=r.getErrorCode(e)),console.warn(e)}return this.setFile(e),this.annot.ResetAppearanceStream(),t}},{key:"setFile",value:function(e){try{if(e.fObjNum){var t=this.doc,n=this.annot.GetDict(),r=new this.engine.String("FS");n.SetAtReference(r,t.GetIndirectObject(+e.fObjNum),t)}else if(e.buffer){var i=Qe.Z.createFile(this.engine,this.annot.GetPage().GetDocument(),e.buffer),o=new Qe.Z(i,this);e.fileName&&o.setFileName(e.fileName),e.file&&e.file.lastModified&&o.setModifiedDateTime(z.Z.ToDateTime(this.engine,e.file.lastModified)),this.annot.SetFileSpec(i)}}catch(e){var s=this.engine,c=(0,a._)(e,s.ErrorCode)?e:s.getErrorCode(e);console.warn(c)}return!0}},{key:"getStream",value:function(e){var t=e.writeStream;return new Qe.Z(this.getFileSpec(),this).getStream(t)}}]),n}(ae);const et=$e;var tt=function(e){function n(){return(0,t._)(this,n),(0,V._)(this,n,arguments)}return(0,Z._)(n,e),(0,r._)(n,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Caret(e)}},{key:"moveRectByCharIndex",value:function(e){var t=this.annot,n=this.pdfPage.getNormalTextPageSync(),r=(n.GetTextRectCount(e,1),n.GetTextRect(0)),i=t.GetRect(),a=new this.engine.CFX_FloatRect,o=i.right-i.left,s=i.top-i.bottom;a.left=r.right-o/2,a.right=r.right+o/2,a.top=r.bottom+s/5,a.bottom=r.bottom-4*s/5,t.Move(a),t.ResetAppearanceStream(),a.delete()}},{key:"getRectData",value:function(){var e=(0,J._)((0,Y._)(n.prototype),"getRectData",this).call(this),t=this.getInnerRect();return e.innerRect=t,e}},{key:"getInnerRect",value:function(){var e=this.annot.GetInnerRect(),t={top:e.top,right:e.right,bottom:e.bottom,left:e.left};return e.delete(),t}},{key:"toJson",value:function(e){var t=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this,e);return t.innerRect=this.getInnerRect(),this.isReplace()&&""==t.intent&&(t.intent="Replace"),t}},{key:"create",value:function(e){var t=(0,J._)((0,Y._)(n.prototype),"create",this).call(this,e),r=e.color;if(r||(r=e.subject&&"replace"===e.subject.toLocaleLowerCase()?r||0==r?r:255:r||0==r?r:10040217,this.setBorderColor(r)),!e.innerRect){var i=this.annot.GetRect(),a=new this.engine.CFX_FloatRect(i.left+2,i.bottom+1,i.right-2,i.top-1);this.annot.SetInnerRect(a)}if(e.rotation){var o=this.engine,s=new o.Matrix;s.Rotate(-e.rotation,!1),this.annot.GetDict().GetElement((0,$.n5)(o,"AP")).GetDict().GetElement((0,$.n5)(o,"N")).GetDict().SetAtMatrix((0,$.n5)(o,"Matrix"),s),s.delete()}return t}},{key:"isReplace",value:function(){var e,t,n=this.annot;if(n.IsGrouped()&&(e=n.GetGroupElements())&&2===(t=e.GetSize())){for(var r=["AnnotType_e_StrikeOut","AnnotType_e_Caret"],i=t;i--;){var a=e.GetAt(i),o=r.indexOf(a.GetType().constructor.name);if(a.delete(),-1===o)return e.delete(),!1}return e.delete(),!0}return e&&e.delete(),!1}}]),n}(ae);const nt=tt;var rt=function(e){function n(){return(0,t._)(this,n),(0,V._)(this,n,arguments)}return(0,Z._)(n,e),(0,r._)(n,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Square(e)}},{key:"_calculateRectDiffer",value:function(){var e=this.annot.GetRect(),t=this.annot.GetInnerRect();return q.Z.subtract(e,t)}},{key:"move",value:function(e,t){var n=this.annot,r=q.Z.on(n.GetRect()).move(e,t).extract();return this.annot.Move(r)}},{key:"setRect",value:function(e){var t=new this.engine.CFX_FloatRect(e.left,e.bottom,e.right,e.top),n=this.annot.Move(t);return this.annot.ResetAppearanceStream(),t.delete(),this.calculateArea(),this.updateModifyTime(),n}},{key:"setInnerRect",value:function(e){var t=new this.engine.CFX_FloatRect(e.left,e.bottom,e.right,e.top);return this.annot.SetInnerRect(t),this.annot.ResetAppearanceStream(),t.delete(),this.updateModifyTime(),!0}},{key:"setAnnotRectAndInnerRect",value:function(e,t){var n=new this.engine.CFX_FloatRect(e.left,e.bottom,e.right,e.top),r=this.annot.Move(n),i=new this.engine.CFX_FloatRect(t.left,t.bottom,t.right,t.top);return this.annot.SetInnerRect(i),n.delete(),i.delete(),this.annot.ResetAppearanceStream(),this.calculateArea(),this.updateModifyTime(),r}},{key:"getInnerRect",value:function(){return q.Z.on(this.annot.GetInnerRect()).toPlainObject()}},{key:"setBorderStyle",value:function(e,t){var r=this.annot.GetBorderInfo(),i=this.engine.BorderInfoStyle,a=(0,J._)((0,Y._)(n.prototype),"setBorderStyle",this).call(this,e,t);if(e!==Q.M8.CLOUDY&&r.style===i.e_Cloudy){var o=this.annot.GetInnerRect(),s=this.annot.GetRect();this.annot.SetInnerRect(s),this.annot.Move(o),this.annot.ResetAppearanceStream()}return a}},{key:"getRectData",value:function(){var e=(0,J._)((0,Y._)(n.prototype),"getRectData",this).call(this),t=this.getInnerRect(),r=this.getMeasureData(),i=r.measureConversionFactor,a=r.measureRatio,o=r.measureUnit;return e.innerRect=t,e.measureConversionFactor=i,e.measureRatio=a,e.measureUnit=o,e}},{key:"getMeasureData",value:function(){var e,t,n=this.annot.GetMeasureConversionFactor(0);try{e=this.annot.GetMeasureRatio().toString(),t=this.annot.GetMeasureUnit(0).toString()}catch(n){e=this.JR.getHexString(this.annot.GetMeasureRatio()),t=this.JR.getHexString(this.annot.GetMeasureUnit(0))}return{measureConversionFactor:n,measureRatio:e,measureUnit:t}}},{key:"toJson",value:function(e){var t=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this,e),r=this.getFillColor(),i=this.getInnerRect(),a=this.getMeasureData(),o={fillColor:r,innerRect:i,measureConversionFactor:a.measureConversionFactor,measureRatio:a.measureRatio,measureUnit:a.measureUnit};return Object.assign(t,o)}},{key:"setFillColor",value:function(e){return(0,J._)((0,Y._)(n.prototype),"_setFillColor",this).call(this,e)}},{key:"create",value:function(e){var t=(0,J._)((0,Y._)(n.prototype),"create",this).call(this,e);if(e.fillColor&&this.setFillColor(e.fillColor),e.borderWidth&&this.setBorderWidth(e.borderWidth),e.borderStyle&&this.setBorderStyle(e.borderStyle,e.borderStyleParam),e.measure&&0!==Object.keys(e.measure).length){this.annot.SetMeasureConversionFactor(0,2);var r=new this.engine.String(e.measure.unit);this.annot.SetMeasureUnit(this.engine.MeasureType.e_MeasureTypeX,r),e.measure.ratio&&this.setMeasureRatio(e.measure.ratio),r.delete()}return t}},{key:"calculateArea",value:function(){var e=this,t=this.annot.GetMeasureRatio().toString(),n=this.annot.GetMeasureUnit(0).toString();if(0!=t.length){var r=t.match(/(\d+) (\w+) = (\d+) (\w+)/);if(r){var i=(0,s._)(r,5),a=i[1],o=i[2],c=i[3],u=i[4];o=xe(o),a=parseInt(a),c=parseInt(c),u=xe(u);var l=function(){var t=e.annot.GetRect(),n=(t.right-t.left)*(t.top-t.bottom);return Pe.convertAreaTo(n,o)*Math.pow(c/a,2)}(),d=new this.engine.WString(Math.round(100*l)/100+" sq "+n);this.annot.SetContent(d),d.delete()}}}},{key:"setMeasureConversionFactor",value:function(e){this.annot.SetMeasureConversionFactor(0,e),this.calculateArea(),this.annot.ResetAppearanceStream()}},{key:"setMeasureRatio",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userSpaceValue,n=void 0===t?1:t,r=e.userSpaceUnit,i=void 0===r?"inch":r,a=e.realValue,o=void 0===a?1:a,s=e.realUnit,c=void 0===s?"inch":s,u=new this.engine.String("".concat(n," ").concat(i," = ").concat(o," ").concat(c));this.annot.SetMeasureRatio(u),this.calculateArea(),this.annot.ResetAppearanceStream(),u.delete()}},{key:"setMeasureUnit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new this.engine.String(e);this.annot.SetMeasureUnit(this.engine.MeasureType.values[t],n),this.calculateArea(),this.annot.ResetAppearanceStream(),n.delete()}}]),n}(ae),it=__webpack_require__(6928),at=__webpack_require__(9134),ot=function(e){function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.GetIndex();(0,t._)(this,n);var o=!r.annotationIDArray[a];return i=(0,V._)(this,n,[e,r,a]),o||!i.isCallout()&&!i.isTextBox()||i.storeRectAndFontSize(i.isCallout()),i}return(0,Z._)(n,e),(0,r._)(n,[{key:"storeRectAndFontSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.annot,n=this.pdfPage,r=t.GetDict().GetObjNum(),i=n.$freeTextData=n.$freeTextData||{};if(e||!i[r]){i[r]||(i[r]={});var a=i[r],o=this.annot.GetDefaultAppearance().text_size;a.rect=this.getRectData(),a.originFontSize=o}}},{key:"constructEngineAnnot",value:function(e){return new this.engine.FreeText(e)}},{key:"setRect",value:function(e,t){return(this.isCallout()||this.isTextBox())&&this.annot.AllowTextOverflow(!1),(0,J._)((0,Y._)(n.prototype),"setRect",this).call(this,e,t)}},{key:"isEditting",get:function(){return this.pdfPage.annotIsEditting(this.getId())}},{key:"enableSyncTextScaling",value:function(){return this.JR.configurations.annotation.syncTextScaling}},{key:"syncFontSize",value:function(){return!(!this.isCallout()&&!this.isTextBox())&&(!this.enableSyncTextScaling()||this.isEditting?(this.annot.AllowTextOverflow(!1),!1):(this.annot.AllowTextOverflow(!1),this.annot.ResetAutoSize(),!0))}},{key:"updateCalloutFigure",value:function(e,t,n){return this.setRect(e,!1),this.setInnerRect(t,!1),this.setCalloutLinePoints(n,!1),!this.syncFontSize()&&this.annot.ResetAppearanceStream(),this.pdfPage.resetBitmapCache(),!0}},{key:"updateRectFigure",value:function(e,t){return this.setInnerRect(t,!1),this.setRect(e,!1),this.annot.ResetAppearanceStream(),this.updateModifyTime(),this.pdfPage.resetBitmapCache(),!0}},{key:"setBorderStyle",value:function(e,t){var r=this.annot.GetBorderInfo(),i=this.engine.BorderInfoStyle,a=(0,J._)((0,Y._)(n.prototype),"setBorderStyle",this).call(this,e,t);if(r.style===i.values[i.e_Cloudy.value]&&(this.isTextBox()&&e!==Q.M8.CLOUDY)){var o=this.annot.GetInnerRect();this.annot.Move(o),this.annot.SetInnerRect(o),this.annot.ResetAppearanceStream()}return a}},{key:"setAlignment",value:function(e){this.annot.SetAlignment({value:e}),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"getRotation",value:function(){return 90*this.annot.GetRotation().value}},{key:"setRotation",value:function(e){var t=e/90;return this.annot.SetRotation({value:t}),this.annot.ResetAppearanceStream(),this.updateModifyTime(),[this.getId()]}},{key:"getRectData",value:function(){var e=(0,J._)((0,Y._)(n.prototype),"getRectData",this).call(this),t=this.getInnerRect();if(e.innerRect=t,this.JR.getPDFString(this.annot.GetIntent())===Q.WA.FREETEXT_CALLOUT){var r=this.GetCalloutLineData(),i=r.calloutLineEndingStyle,a=r.calloutLinePoints;e.calloutLineEndingStyle=i,e.calloutLinePoints=a}if(this.enableSyncTextScaling()){e.defaultAppearance=this.getDefaultAppearance();var o=e.defaultAppearance.font;o&&(e.fontName=o.name,e.fullName=o.fullName)}return e}},{key:"getInnerRect",value:function(){var e=this.annot.GetInnerRect(),t={top:e.top,right:e.right,bottom:e.bottom,left:e.left};return e.delete(),t}},{key:"GetCalloutLineData",value:function(){for(var e=this.annot,t=e.GetCalloutLineEndingStyle().value,n=e.GetCalloutLinePoints(),r=[],i=n.GetSize();i--;){var a=n.GetAt(i);r[i]={x:a.x,y:a.y}}return{calloutLineEndingStyle:t,calloutLinePoints:r}}},{key:"isCallout",value:function(){return this.annot.GetIntent().toString()===Q.WA.FREETEXT_CALLOUT}},{key:"isTypewriter",value:function(){var e=this.annot.GetIntent().toString();return e===Q.WA.FREETEXT_TYPEWRITER||"FreeTextTypeWriter"===e}},{key:"isTextBox",value:function(){return!this.isCallout()&&!this.isTypewriter()}},{key:"getDefaultAppearance",value:function(){var e=this.annot.GetDefaultAppearance(),t=e.font,n={};if(t.IsEmpty()){var r=this.annot.GetDict().GetElement((0,$.n5)(this.engine,"DA"));if(r){var i=this.JR.getPDFString(r.GetString()).match(/\/(\w*) /);i&&(n={name:i[1]})}}else{var a=t.GetName().toString(),o=t.GetFamilyName().toString(),s="";try{s=this.JR.getPDFString(t.GetBaseFontName(this.doc))}catch(e){}n={name:a,baseName:s,fullName:o,styles:t.GetStyles(this.doc)}}return{flags:e.flags,textColor:e.text_color,textSize:e.text_size,font:n}}},{key:"toJson",value:function(e){var t=this.annot.GetDict(),r=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this,e),i=this.annot;if("FreeTextTypeWriter"===r.intent&&(r.intent=Q.WA.FREETEXT_TYPEWRITER),r.intent===Q.WA.FREETEXT_CALLOUT){var a=this.GetCalloutLineData(),o=a.calloutLineEndingStyle,s=a.calloutLinePoints;r.calloutLineEndingStyle=o,r.calloutLinePoints=s}var c=i.GetAlignment(),u=c?c.value:0;r.intent===Q.WA.FREETEXT_TYPEWRITER&&0!==u&&(u=0,i.SetAlignment(this.engine.Alignment.e_AlignmentLeft)),r.justification=u;var l=this.getRotation();if(r.rotation=l,r.richText&&0!==r.richText.length){var d=r.richText[0].richTextStyle;r.defaultAppearance={flags:7,textColor:d.textColor,textSize:d.textSize,font:{name:d.fontName,baseName:d.fontName,fullName:d.fontName,styles:0}}}else{var h=i.GetDefaultAppearance(),f=h.font,g={};if(h.font.IsEmpty()){var p=t.GetElement((0,$.n5)(this.engine,"DA"));if(p){var v=this.JR.getPDFString(p.GetString()).match(/\/(\w*) /);v&&(r.fontName=v[1],g={name:v[1]})}}else{r.fontName=f.GetName().toString(),r.fullName=f.GetFamilyName().toString();var m="";try{m=this.JR.getPDFString(f.GetBaseFontName(this.doc))}catch(e){m=""}g={name:r.fontName,baseName:m,fullName:r.fullName,styles:f.GetStyles(this.doc)}}r.fontName=te.mz[r.fontName]||r.fontName,g.name=te.mz[g.name]||g.name,r.defaultAppearance={flags:h.flags,textColor:h.text_color,textSize:h.text_size,font:g}}var _=(0,$.n5)(this.engine,"RC"),y=t.GetElement(_),S="";return y&&(S=this.JR.getPDFString(y.GetString())),r.fillColor=this.getFillColor(),r.innerRect=this.getInnerRect(),r.RC=S,_=(0,$.n5)(this.engine,"FoxitTag"),t.GetElement(_)&&(r.modifiable=!1),r}},{key:"setCalloutLineEndingStyle",value:function(e){this.annot.SetCalloutLineEndingStyle({value:e}),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setInnerRect",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new this.engine.CFX_FloatRect(e.left,e.bottom,e.right,e.top);this.annot.SetInnerRect(n),n.delete();var r=!1;return this.isTextBox()&&(r=this.syncFontSize()),"FreeTextCallout"==this.annot.GetIntent()||r||this.annot.ResetAppearanceStream(),t&&this.updateModifyTime(),!0}},{key:"setAnnotRectAndInnerRect",value:function(e,t){var n;e.left>e.right&&(n=e.right,e.right=e.left,e.left=n),e.bottom>e.top&&(n=e.top,e.top=e.bottom,e.bottom=n);var r=e.top-e.bottom,i=e.right-e.left,a=this.annot.GetRect();Math.abs(r-a.right+a.left)<.01&&Math.abs(i-a.top+a.bottom);var o=new this.engine.CFX_FloatRect(e.left,e.bottom,e.right,e.top),s=this.annot.Move(o),c=new this.engine.CFX_FloatRect(t.left,t.bottom,t.right,t.top);(this.annot.SetInnerRect(c),o.delete(),c.delete(),s)&&(this.updateModifyTime(),this.syncFontSize()||this.annot.ResetAppearanceStream(),this.pdfPage.resetBitmapCache());return s}},{key:"setCalloutLinePoints",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new this.engine.PointFArray,r=this.engine.PointF,i=e.length,a=0;a<i;a++){var o=new r(e[a].x,e[a].y);n.Add(o),o.delete()}return this.annot.SetCalloutLinePoints(n),n.delete(),t&&this.annot.ResetAppearanceStream(),this.updateModifyTime(),!0}},{key:"setDefaultAp",value:function(e){var t=e.textColor,n=e.textSize,r=e.font;0===t&&(t|=4278190080,t>>>=0);var i=this.annot.GetDefaultAppearance(),a=i.font.IsEmpty()?new this.engine.Font(1):i.font,o=a.GetName().toString(),s=1;if(r&&o!==r.name){var c=r.name,u=r.url,l=r.styles,d=r.charset,h=this.engine;if(u&&h.Font.createFromBuffer){var f=this.JR.getFontFromServer(u),g=h.StreamCallback.implement({GetSize:function(){return f.byteLength},GetPosition:function(){return 0},ReadBlock:function(e,t,n){var r=new Uint8Array(f,t,n);return h.HEAPU8.set(r,e),!0},Release:function(){}});a=h.Font.createFromBuffer(g)}else if(c){s=h.DefAPFlags.e_FlagFont.value;var p={Courier:{value:0},Helvetica:{value:4},"Times-Roman":{value:8},Symbol:{value:12},ZapfDingbats:{value:13}}[c];a=void 0===p?new h.Font((0,$.Dp)(h,c),l||0,h.Charset.values[d]||h.Charset.e_CharsetANSI,0):new h.Font(p)}}if(t&&(s|=2),n&&(s|=4),s){this.getRectData();var v=new this.engine.DefaultAppearance(s,a,n||i.text_size,t);this.annot.SetDefaultAppearance(v);var m,_=this.annot.GetDict();return _.HasKey((0,$.n5)(this.engine,"RC"))&&(_.RemoveAt((0,$.n5)(this.engine,"RC")),(m=this.annot.GetContent().toString())&&this.annot.SetContent((0,$.Dp)(this.engine,""))),this.annot.ResetAppearanceStream(),n!==i.text_size&&this.enableSyncTextScaling()&&this.syncFontSize(),a.delete(),v.delete(),this.updateModifyTime(),m&&(this.annot.SetContent((0,$.Dp)(this.engine,m)),this.annot.ResetAppearanceStream()),!0}}},{key:"setFillColor",value:function(e){return(0,J._)((0,Y._)(n.prototype),"_setFillColor",this).call(this,e)}},{key:"create",value:function(e){if((0,J._)((0,Y._)(n.prototype),"create",this).call(this,e),e.rotation){var t=(0,at.q)(this.engine,e.rotation);this.annot.SetRotation(t)}var r;(r=e["interior-color"]||e.interiorColor)&&this.setFillColor(r),void 0!==e.fillColor&&this.setFillColor(e.fillColor),e.alignment&&this.setAlignment(e.alignment),!e.richText&&e.contents&&this.setContent(e.contents,!0,!1),e.intent!==Q.WA.FREETEXT_TYPEWRITER&&(e.borderWidth&&this.setBorderWidth(e.borderWidth,!1),e.borderStyle&&this.setBorderStyle(e.borderStyle,e.borderStyleParam));var i=!0;if(!e.richText&&e.DA){var a=this.engine;this.annot.GetDict().SetAtString((0,$.n5)(a,"DA"),(0,$.n5)(a,e.DA));var o={textColor:e.fontColor,textSize:Number(e.DA.split(" ")[1])};this.setDefaultAp(o),i=!1}if(!e.richText&&e.defaultAppearance&&"{}"!==JSON.stringify(e.defaultAppearance)){var s={textColor:e.defaultAppearance.textColor?Number(e.defaultAppearance.textColor):4278190080,textSize:e.defaultAppearance.textSize?Number(e.defaultAppearance.textSize):0};e.defaultAppearance.font&&(s.font=e.defaultAppearance.font),this.setDefaultAp(s),i=!1}if(this.setRect(e.rect),e.innerRect&&this.setInnerRect(e.innerRect),e.calloutLinePoints&&(this.setCalloutLinePoints(e.calloutLinePoints),i=!1),"FreeTextCallout"==e.intent){var c=e.calloutLineEndingStyle||e.startStyle;null==c?this.setCalloutLineEndingStyle(4):this.setCalloutLineEndingStyle(c),i=!1}return this.enableSyncTextScaling()&&(this.isCallout()||this.isTextBox())?this.annot.ResetAutoSize():i&&this.annot.ResetAppearanceStream(),[this]}},{key:"getWoffBlob",value:function(){var e=this.annot;if(!e.GetDefaultAppearance().font.IsEmpty()){var t="",n=(e.GetDict().GetElement(new this.engine.String("DA")).GetString().toString()+" ").match(/\/([^\s]*) /);if(n&&n.length>1){t=n[1].replace(/#20/g," ");var r=this.JR.getFontBuffer(t.toString(),524322);if(r)return new Blob([r],{type:"application/woff"})}return null}}},{key:"getWoff",value:function(){var e=this.engine,t=this.annot.GetDefaultAppearance(),n=this.pdfPage.doc,r=t.font;if(r.IsEmpty())return null;if(r.IsEmbedded(n))return it.Z.getWoffDataBuffer(r.GetWoffData(n),this.engine);var i=e.Charset.e_CharsetDefault.value;r.GetFontType(n)==e.FontTypes.e_FontTypeCIDFont&&(i=r.GetFontType(n).value);var a=this.JR.getFontBuffer(r.GetBaseFontName(n).toString(),r.GetStyles(n),0,i,r.IsBold()?700:400,!0);return a?{buffer:a}:null}},{key:"setContent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this.annot,a=i.GetDict(),o=(0,$.n5)(this.engine,"RC"),s=a.GetElement(o),c=this.annot.GetRichTextCount();if(s&&c){var u,l=this.getRichTextStyle(0);if(a.RemoveAt(o),i.SetContent((0,$.Dp)(this.engine,"")),i.ResetAppearanceStream(),l.fontName){var d=0;l.isBold&&(d|=this.engine.Styles.e_StylesBold.value),l.isItalic&&(d|=this.engine.Styles.e_StyleItalic.value),u=new this.engine.Font((0,$.Dp)(this.engine,l.fontName),d,this.engine.Charset.e_CharsetANSI,0)}else u=new this.engine.Font(1);i.SetDefaultAppearance(new this.engine.DefaultAppearance(7,u,l.textSize,l.textColor))}if(t){var h=i.GetDefaultAppearance();i.SetDefaultAppearance(h)}this.annot.AllowTextOverflow(!0);var f=this.enableSyncTextScaling()&&(this.isCallout()||this.isTextBox());f&&(r=!1);var g=(0,J._)((0,Y._)(n.prototype),"setContent",this).call(this,e,!0,r);return f&&this.annot.ResetAutoSize(),g}}]),n}(ae);const st=ot;var ct=__webpack_require__(7731),ut=__webpack_require__(8843),lt=__webpack_require__(1301),dt=(__webpack_require__(3023),{Approved:"Approved",Completed:"Completed",Confidential:"Confidential",Draft:"Draft",Emergency:"Emergency",Expired:"Expired",Final:"Final",Received:"Received",Reviewed:"Reviewed",Revised:"Revised",Verified:"Verified",Void:"Void"}),ht={Accepted:"Accepted",Initial:"Initial",Rejected:"Rejected","Sign Here":"Sign Here",Witness:"Witness"},ft={DynaApproved:"Approved",DynaConfidential:"Confidential",DynaReceived:"Received",DynaReviewed:"Reviewed",DynaRevised:"Revised"};function gt(e){return e in dt?"StandardStamps":e in ht?"SignHere":e in ft?"DynamicStamps":"Unknown"}var pt,vt="Digital",mt="date",_t="background",yt="field",St=function(){function e(){(0,t._)(this,e),this.docsMap={},this.formsMap={},this.iconCatalog="Static",this._enable=!1,this.seperator=", ",this.timeFormat="YYYY-MM-DD, HH:mm:ss",this.icons={},this.hasSetIconProvider=!1,this.digitalTimeFormat="YYYY.MM.DD",this.identityInfo={}}return(0,r._)(e,[{key:"setIcons",value:function(e){this.removeIcon("stamp"),this.icons="string"==typeof e?JSON.parse(e):e}},{key:"addIcon",value:function(e){var t=e.annotType||"stamp",n=e.category,r=e.name;if(n){var i,a,s;if(t in this.icons||(this.icons[t]={}),n in this.icons[t]||(this.icons[t][n]={}),this.icons[t][n][r]=(0,o._)({},e),i=this.docsMap[t])if(i=i[n])if(i=i[r])null===(a=i.fields)||void 0===a||a.forEach(function(e){return e.delete()}),null===(s=i.form)||void 0===s||s.delete(),!i.page.isDeleted()&&i.page.delete(),i.doc.delete(),delete this.docsMap[t][n][r];return!0}}},{key:"removeIcon",value:function(e,t,n){var r=this.docsMap[e];if(r)for(var i in r){var a=r[i];for(var o in a){var s,c,u,l,d,h,f=a[o];if(n){if(t==i&&o==n)return null===(u=f.fields)||void 0===u||u.forEach(function(e){return e.delete()}),null===(l=f.form)||void 0===l||l.delete(),!f.page.isDeleted()&&f.page.delete(),f.doc.delete(),void delete a[o]}else if(t)i==t&&(null===(d=f.fields)||void 0===d||d.forEach(function(e){return e.delete()}),null===(h=f.form)||void 0===h||h.delete(),!f.page.isDeleted()&&f.page.delete(),f.doc.delete(),delete a[o]);else null===(s=f.fields)||void 0===s||s.forEach(function(e){return e.delete()}),null===(c=f.form)||void 0===c||c.delete(),!f.page.isDeleted()&&f.page.delete(),f.doc.delete(),delete a[o]}}}},{key:"activeIcon",value:function(e,t){this.iconCatalog=e,this.iconName=t,this._enable=!0}},{key:"setDynamicInfoFormula",value:function(e,t){this.seperator=e,this.timeFormat=t}},{key:"getDynamicInfoFormula",value:function(){return{seperator:this.seperator,timeFormat:this.timeFormat}}},{key:"setDigitalTimeFormat",value:function(e){this.digitalTimeFormat=e}},{key:"setDigitalInfo",value:function(e){this.identityInfo=e}},{key:"enable",value:function(e){this._enable=e,e||(this.iconCatalog=null,this.iconName=null)}},{key:"previewIconDoc",value:function(e){if("custom-dynamic"===e.stampType)return this.previewDynamicIconDoc(e,e.imgType);this.addIcon(e);var t=this.engine,n=e.category,r=e.name,i=this.getIconPDFDoc("stamp",n,r),a=(i.doc,i.page);a.StartParse(0,null,!1),this.setFieldValue(i,"stamp",n,r),n===vt&&a.ClipPage();for(var o=3*a.GetWidth(),s=3*a.GetHeight(),c=new t.Bitmap(o,s,t.DIBFormat.e_DIBArgb,0,0),u=new t.Renderer(c,!1),l=a.GetDisplayMatrix(0,0,o,s,{value:0}),d=u.StartRender(a,l,null),h=d.Continue();1===h.value;)h=d.Continue();d.delete();var f=new t.Image;f.AddFrame(c);var g=[],p=t.StreamCallback.implement({Release:function(){p.delete()},Flush:function(){return!0},GetSize:function(){return 0},WriteBlock:function(e,n,r){var i,a=t.HEAPU8.buffer;return i=a.slice?new Uint8Array(a.slice(e,e+r)):new Uint8Array(a,e,r),g.push(i),!0}});f.SaveAs(p,(0,$.Dp)(t,".png")),f.delete(),a.delete(),u.delete(),c.delete();return new Blob(g,{type:"image/png"})}},{key:"previewDynamicIconDoc",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_t;t===yt&&(e.category="fv__template_field_categroy",e.name="fv__template_field_name"),this.addIcon(e);var n=this.engine,r=e.category,i=e.name,a=this.getDynamicIconPDFDoc("stamp",r,i,t),o=a.page;o.StartParse(0,null,!1),this.setFieldValue(a,"stamp",r,i),o.ClipPage();for(var s=3*o.GetWidth(),c=3*o.GetHeight(),u=new n.Bitmap(s,c,n.DIBFormat.e_DIBArgb,0,0),l=new n.Renderer(u,!1),d=o.GetDisplayMatrix(0,0,s,c,{value:0}),h=l.StartRender(o,d,null),f=h.Continue();1===f.value;)f=h.Continue();h.delete();var g=new n.Image;g.AddFrame(u);var p=[],v=n.StreamCallback.implement({Release:function(){v.delete()},Flush:function(){return!0},GetSize:function(){return 0},WriteBlock:function(e,t,r){var i,a=n.HEAPU8.buffer;return i=a.slice?new Uint8Array(a.slice(e,e+r)):new Uint8Array(a,e,r),p.push(i),!0}});g.SaveAs(v,(0,$.Dp)(n,".png")),g.delete(),o.delete(),l.delete(),u.delete();return new Blob(p,{type:"image/png"})}},{key:"getDynamicIconPDFDoc",value:function(e,t,n,r){if(this.docsMap[e]&&this.docsMap[e][t]&&this.docsMap[e][t][n])return this.docsMap[e][t][n];var i,a,o,s=this.engine,c=this.jr,u=this.icons[e][t][n];if(!u)return null;var l=[];i=new s.PDFDoc;var d=new s.PointF(0,0);if(r===_t){var h=c.createReaderCallback(u.url),f=new s.Image(h),g=f.GetFrameBitmap(0);(o=i.InsertPage(0,g.GetWidth(),g.GetHeight())).StartParse(0,null,!1),o.AddImage(f,0,d,o.GetWidth(),o.GetHeight(),!0),g.delete()}else{if(!u.field)throw new Error("The field info is required for dynamic field icon");var p=u.field.rect,v=p.right-p.left,m=p.top-p.bottom;(o=i.InsertPage(0,v,m)).StartParse(0,null,!1),u.field.rect={left:0,top:m,right:v,bottom:0};var _=this.createFormField(i,o,u.field),y=_.form,S=_.field;a=y,l.push(S)}return d.delete(),this.docsMap[e]=this.docsMap[e]||{},this.docsMap[e][t]=this.docsMap[e][t]||{},this.docsMap[e][t][n]={doc:i,page:o,form:a,fields:l}}},{key:"getIconPDFDoc",value:function(e,t,n){if(this.docsMap[e]&&this.docsMap[e][t]&&this.docsMap[e][t][n])return this.docsMap[e][t][n];var r,i,a,o=this.engine,s=this.jr,c=this.icons[e][t][n];if(!c)return null;var u=[],l=null,d=!1;switch(l=s.createReaderCallback(c.url),c.fileType){case"pdf":var h=(0,$.n5)(o,"");(r=o.createPDFDocWithReaderCallback(l,!1)).Load(h);if(!(i=new o.Form(r)).IsEmpty())for(var f=(0,$.Dp)(o,""),g=i.GetFieldCount(f),p=0;p<g;p++){var v=i.GetField(p,f);if(v=v.IsEmpty()?null:v){var m=new o.FieldArray;m.Add(v),i.SetFieldsInCalculationOrder(m),m.delete();var _=o.PDFDictionary.Create();_.SetAtName((0,$.n5)(o,"Type"),(0,$.n5)(o,"Action")),_.SetAtName((0,$.n5)(o,"S"),(0,$.n5)(o,"JavaScript")),_.SetAtString((0,$.n5)(o,"JS"),(0,$.n5)(o,"AFDate_FormatEx")),r.AddIndirectObject(_);var y=o.PDFDictionary.Create();y.SetAtReference((0,$.n5)(o,"C"),_,r),v.GetDict().SetAt((0,$.n5)(o,"AA"),y)}u.push(v)}var S=0;d,a=r.GetPage(S);break;case"bmp":case"jpg":case"jpeg":case"png":case"tif":case"tiff":case"webp":var b=new o.Image(l),I=b.GetFrameBitmap(0),A=I.GetWidth(),P=I.GetHeight(),D=A,E=P,C=b.GetRotation();if(90==C||270==C){var w=D;D=E,E=w}r=new o.PDFDoc;var k=new o.PointF(0,0);if((a=r.InsertPage(0,D,E)).StartParse(0,null,!1),a.AddImage(b,0,k,A,P,!0),c.field){var T=this.createFormField(r,a,c.field),F=T.form,G=T.field;i=F,u.push(G)}I.delete(),k.delete()}return this.docsMap[e]=this.docsMap[e]||{},this.docsMap[e][t]=this.docsMap[e][t]||{},this.docsMap[e][t][n]={doc:r,page:a,form:i,fields:u}}},{key:"getIconPage",value:function(e){var t=this.engine,n=this.jr.createReaderCallback(e),r=(0,$.n5)(t,""),i=t.createPDFDocWithReaderCallback(n,!1);return i.Load(r),i.GetPage(0)}},{key:"createFormField",value:function(e,t,n){var r=this.engine,i=new r.Form(e),a=n.rect,o=new r.WString("stamp field"),s=new r.CFX_FloatRect(a.left,a.bottom,a.right,a.top),c=i.AddControl(t,o,r.FieldType.values[lt.fS.Text],s),u=c.GetField();s.delete(),o.delete();var l=new r.FieldArray;l.Add(u),i.SetFieldsInCalculationOrder(l);var d=r.PDFDictionary.Create();d.SetAtName((0,$.n5)(r,"Type"),(0,$.n5)(r,"Action")),d.SetAtName((0,$.n5)(r,"S"),(0,$.n5)(r,"JavaScript")),d.SetAtString((0,$.n5)(r,"JS"),(0,$.n5)(r,"AFDate_FormatEx")),e.AddIndirectObject(d);var h=r.PDFDictionary.Create();return h.SetAtReference((0,$.n5)(r,"C"),d,e),u.GetDict().SetAt((0,$.n5)(r,"AA"),h),n.font&&this.setDefaultAppearance(c,n.font),{form:i,field:u}}},{key:"setDefaultAppearance",value:function(e,t){var n,r=this.engine,i=e.GetWidget(),a=i.GetControl(),o=void 0!==t.name?r.DefAPFlags.e_FlagFont.value:0,s=void 0!==t.color?r.DefAPFlags.e_FlagTextColor.value:0,c=void 0!==t.size?r.DefAPFlags.e_FlagFontSize.value:0;if(t.name){var u=te.BD.find(function(e){return e.name==t.name});if(u){var l=(0,te.T2)(u.value);if(l){var d=[r.StandardID.e_StdIDCourier,r.StandardID.e_StdIDCourierB,r.StandardID.e_StdIDCourierBI,r.StandardID.e_StdIDCourierI,r.StandardID.e_StdIDHelvetica,r.StandardID.e_StdIDHelveticaB,r.StandardID.e_StdIDHelveticaBI,r.StandardID.e_StdIDHelveticaI,r.StandardID.e_StdIDTimes,r.StandardID.e_StdIDTimesB,r.StandardID.e_StdIDTimesBI,r.StandardID.e_StdIDTimesI,r.StandardID.e_StdIDSymbol,r.StandardID.e_StdIDZapfDingbats];n=new this.engine.Font(d[l])}else n=new this.engine.Font((0,$.Dp)(r,t.name),0,r.Charset.e_CharsetANSI,0)}else n=new this.engine.Font((0,$.Dp)(r,t.name),0,r.Charset.e_CharsetANSI,0)}else n=new this.engine.Font(0);var h=new this.engine.DefaultAppearance(o|s|c,n,0,t.color?t.color:0);try{a.SetDefaultAppearance(h)}catch(e){return isNaN(e)||(e=r.getErrorCode(e)),void console.warn(e)}i.ResetAppearanceStream()}},{key:"initIconProvider",value:function(e,t){this.engine&&this.hasSetIconProvider||(this.jr=e,!this.engine&&(this.engine=t),t.IconProviderCallback&&(t.setAnnotIconProviderCallback(this.getEngineIconProvider(t)),this.hasSetIconProvider=!0))}},{key:"setFieldValue",value:function(e,t,n,r){try{if(n===vt)for(var i=0;i<e.fields.length;i++){var a=e.fields[i],o=Object.keys(this.identityInfo);o.push(mt);var s=a.GetName().toString();if(a&&!a.IsEmpty()&&o.includes(s)){var c="";if(s===mt)c=(0,ct.Z)(new Date,this.digitalTimeFormat);else if("name"===s){var u=this.identityInfo,l=u.surname+u.name;c=l.length<3?"\n"+(l=l.split("").join("\n")):l.split("").join("\n")}else c=this.identityInfo[s];var d=new this.engine.WString(c);a.SetValue(d),d.delete(),a.GetControl(0).GetWidget().ResetAppearanceStream()}}else{var h=e.fields[0];if(h&&!h.IsEmpty()){var f="",g=this.icons[t][n][r];if(g.field){var p=g.field,v=p.textType,m=p.value;switch(v){case ut.k3.NAME:f=this.jr.getUserName();break;case ut.k3.NAME_DATE_TIME:f=this.jr.getUserName(),this.timeFormat.length>0&&(f.length>0&&(f+=this.seperator),f+=(0,ct.Z)(new Date,this.timeFormat));break;case ut.k3.DATE_TIME:f=(0,ct.Z)(new Date,this.timeFormat);break;case ut.k3.DATE:f=(0,ct.Z)(new Date,this.timeFormat.split(this.seperator)[0]);break;case ut.k3.CUSTOM_TEXT:default:f=m}}else f=this.jr.getUserName(),this.timeFormat.length>0&&(f.length>0&&(f+=this.seperator),f+=(0,ct.Z)(new Date,this.timeFormat));var _=new this.engine.WString(f);h.SetValue(_),_.delete(),h.GetControl(0).GetWidget().ResetAppearanceStream()}}}catch(e){isNaN(e)||(e=this.engine.getErrorCode(e)),console.warn(e)}}},{key:"getEngineIconProvider",value:function(){var e=this,t=this.engine;return t.IconProviderCallback.implement({Release:function(){for(var t in e.docsMap)for(var n in e.docsMap[t])for(var r in e.docsMap[t][n])e.docsMap[t][n][r].delete()},GetProviderID:function(){return(0,$.n5)(t,"gsdk")},GetProviderVersion:function(){return new t.String(e.iconCatalog+(new Date).valueOf()+"")},HasIcon:function(t,n){if(!e._enable)return!(e.iconCatalog&&e.iconName||13!==t.value||"Unknown"===gt(n.toString()));var r=e.iconName,i="stamp";if(0===t.value)i="note";return!!(e.icons&&e.icons[i]&&e.icons[i][e.iconCatalog]&&e.icons[i][e.iconCatalog][r])},CanChangeColor:function(e,t){return!0},GetIcon:function(t,n,r){if(!(e._enable||e.iconCatalog&&e.iconName)){var i=n.toString(),a=gt(i);if("Unknown"===a)return null;var o=e.jr.getStampUrl(a,i);return e.getIconPage(o)}switch(n=e.iconName,t.value){case 0:break;case 13:var s=e.getIconPDFDoc("stamp",e.iconCatalog,n);return s?("0"!==n&&e.setFieldValue(s,"stamp",e.iconCatalog,n),e.iconCatalog===vt&&s.page.ClipPage(),s.page):new e.engine.PDFPage(null)}},GetShadingColor:function(e,t,n,r,i){return i.first_color=n,i.second_color=n,!0},GetDisplayWidth:function(e,t){return 0},GetDisplayHeight:function(e,t){return 0}})}}]),e}();const bt=function(){return pt||(pt=new St)};var It;!function(){var e,t=navigator.userAgent.toLowerCase();!(!("ActiveXObject"in self)||!(e=t.match(/msie ([\d\.]+)/)))&&parseInt(e[1])}();It=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t.IsEmpty())return{};var r=t.GetWidth(),i=t.GetHeight(),a=new e.Image;a.AddFrame(t);var o=[],s=e.StreamCallback.implement({Release:function(){s.delete()},Flush:function(){return!0},GetSize:function(){return 0},WriteBlock:function(t,n,r){var i,a=e.HEAPU8.buffer;return i=a.slice?new Uint8Array(a.slice(t,t+r)):new Uint8Array(a,t,r),o.push(i),!0}});a.SaveAs(s,(0,$.Dp)(e,".png")),n&&(a.delete(),t.delete());var c="image/png";return{type:c,image:new Blob(o,{type:c}),width:r,height:i}};var At=function(e){function n(){return(0,t._)(this,n),(0,V._)(this,n,arguments)}return(0,Z._)(n,e),(0,r._)(n,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Stamp(e)}},{key:"setIconName",value:function(e){}},{key:"getIconName",value:function(){return this.JR.getPDFString(this.annot.GetIconName())}},{key:"create",value:function(e){var t=(0,J._)((0,Y._)(n.prototype),"create",this).call(this,e),r=this.engine,i=this.annot;try{var a,o=e.apObjeNum>0||!e.apObjeNum&&!(e.icon||(null===(a=e.iconInfo)||void 0===a?void 0:a.name));if(e.rotation&&this.setRotation(e.rotation,o),e.apObjeNum){e.rect&&this.setRect(e.rect);var s=this.doc,c=i.GetDict(),u=(0,$.n5)(r,"AP"),l=c.GetElement(u);l||(l=r.PDFDictionary.Create().GetDict(),c.SetAt(u,l)),l.GetDirectObject().GetDict().SetAtReference((0,$.n5)(r,"N"),s.GetIndirectObject(+e.apObjeNum),s)}else{var d=bt();if(d.jr&&d.hasSetIconProvider||d.initIconProvider(this.JR,this.engine),e.iconInfo&&(e.iconInfo.rect=e.rect,d.addIcon(e.iconInfo),e.iconCategory=e.iconInfo.category,e.icon=e.iconInfo.name),e.iconCategory&&(d.activeIcon(e.iconCategory,e.icon),d.enable(!0)),e.icon){var h=new r.WString(e.icon);i.SetIconName(h.UTF8Encode()),i.ResetAppearanceStream(),d.enable(!1),h.delete()}}}catch(e){isNaN(e)||(e=this.engine.getErrorCode(e)),console.warn(e)}return t}},{key:"setAnnotAPBitmap",value:function(e,t){var n=this,r=this.engine.ReaderCallback.implement({Release:function(){},GetSize:function(){return t},ReadBlock:function(t,r,i){var a=new Uint8Array(n.JR.requestData("GET",!1,e,r,i));return n.engine.HEAPU8.set(a,t),!0}}),i=new this.engine.Image(r);this.annot.SetImage(i,0,0),this.annot.ResetAppearanceStream(),this.updateModifyTime()}},{key:"setRotation",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.annot.GetRotation(),r=this.annot;return r.Rotate((360+e-n)%360),t&&r.ResetAppearanceStream(),this.updateModifyTime(),[this.getId()]}},{key:"toJson",value:function(e){var t=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this,e);t.rotation=this.annot.GetRotation(),t.iconName=this.getIconName();var r=this.engine,i=this.annot.GetDict().GetElement((0,$.n5)(r,"AP")),a=i&&i.GetDirectObject().GetDict(),o=a&&a.GetElement((0,$.n5)(r,"N")),s=o&&o.GetDirectObject();return s&&(t.apObjeNum=s.GetObjNum()),t}},{key:"getBitmapBuffer",value:function(){var e=this.annot.GetBitmap();return It(this.engine,e)}}]),n}(ae);const Pt=At;var Dt=__webpack_require__(6131),Et=function(e){function n(e,r,i){var a;(0,t._)(this,n);var o=(e=(a=(0,V._)(this,n,[e,r,i])).annot).GetAction();return o.IsEmpty()||(a.action=a.JR.actionManager.get(o,a.doc,a.JR)),a}return(0,Z._)(n,e),(0,r._)(n,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Link(e)}},{key:"destroy",value:function(){this.action&&this.action.destroy(),(0,J._)((0,Y._)(n.prototype),"destroy",this).call(this)}},{key:"toJson",value:function(e){var t=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this,e),r=this.annot.GetHighlightingMode()||{value:0};t.highlightingMode=r.value,t.action=this.action&&this.action.toJson();var i=this.annot.GetDict().GetElement((0,$.n5)(this.engine,"A")),a=i&&i.GetDirectObject();return a&&(t.aObjNum=a.GetObjNum()),t}},{key:"setHighlightingMode",value:function(e){return this.annot.SetHighlightingMode(this.engine.HighlightingMode.values[e]),this.annot.ResetAppearanceStream(),this.updateModifyTime(),[this.getId()]}},{key:"setAction",value:function(e,t,n){var r,i=this.engine,a=t.type,o=this.annot.GetPage().GetDocument();if(r=a?this.JR.actionManager.create(o,t.type):this.JR.actionManager.create(o,t),n){var s=this.annot.GetAction();if(!s.IsEmpty()){var c=s.GetSubActionCount();return s.InsertSubAction(c,r),a&&this.JR.actionManager.get(r,this.doc,this.JR).create(t),this.JR.actionManager.get(s,this.doc,this.JR)}}if(this.action&&this.action.action.GetType()===i.ActionType.e_TypeURI&&i.ActionType["e_"+(a?t.type:t)]===i.ActionType.e_TypeGoto){var u=this.annot.GetDict(),l=u.GetElement(new i.String("A")).GetDirectObject();u.SetAtReference(new i.String("PA"),l,this.doc)}this.annot.SetAction(r);var d=this.JR.actionManager.get(this.annot.GetAction(),this.doc,this.JR);return a&&d.create(t),this.updateModifyTime(),d}},{key:"create",value:function(e){var t=(0,J._)((0,Y._)(n.prototype),"create",this).call(this,e);if(e.borderWidth&&this.setBorderWidth(e.borderWidth),e.borderStyle&&this.setBorderStyle(e.borderStyle,e.borderStyleParam),void 0!==e.highlightingMode&&this.setHighlightingMode(e.highlightingMode),e.aObjNum){var r=this.annot.GetDict(),i=new this.engine.String("A");r.GetElement(i)||r.SetAtReference(i,this.doc.GetIndirectObject(+e.aObjNum),this.doc);var a=this.annot.GetAction();a.IsEmpty()||(this.action=this.JR.actionManager.get(a,this.doc,this.JR))}return t}},{key:"setBorderStyle",value:function(e,t){return(0,J._)((0,Y._)(n.prototype),"setBorderStyle",this).call(this,e,t),[this.getId()]}},{key:"hasPA",value:function(){var e=this.engine;return this.annot.GetDict().HasKey(new e.String("PA"))}},{key:"resetAByPA",value:function(){if(!this.hasPA())return!1;var e=this.engine,t=this.annot.GetDict(),n=new e.String("PA"),r=t.GetElement(n).GetDirectObject();return t.SetAtReference(new e.String("A"),r,this.doc),t.RemoveAt(n),!0}},{key:"removeAction",value:function(e,t){var n=this.engine,r=this.pdfPage.pdfDoc.doc,i=this.annot,a=i.GetAction();return a=(0,Dt.Z)(n,r,a,t),t&&a?(i.SetAction(a),[this.JR.actionManager.get(a,this,this.JR).toJson()]):(i.RemoveAction(),this.updateModifyTime(),[])}},{key:"moveAction",value:function(e){for(var t=e.action,n=e.direction,r=this.annot,i=r.GetAction(),a=i.GetSubActionCount(),o=[i],s=0;s<a;s++)o.push(i.GetSubAction(s));var c=o.findIndex(function(e){return e.GetDict().GetObjNum()===t.objNumber});if(-1!=c){var u=n?c+1:c-1;if(0==u||0==c){r.RemoveAction(),o[0].RemoveAllSubActions();var l=0==c?u:c;r.SetAction(o[l]),o.splice(l,1),i=r.GetAction();for(var d=0;d<o.length;d++)i.InsertSubAction(d,o[d])}else{var h;i.RemoveAllSubActions(),h=[o[u],o[c]],o[c]=h[0],o[u]=h[1];for(var f=1;f<o.length;f++)i.InsertSubAction(f,o[f])}}}}]),n}(z.Z);const Ct=Et;var wt=function(e){function n(){return(0,t._)(this,n),(0,V._)(this,n,arguments)}return(0,Z._)(n,e),(0,r._)(n,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Ink(e)}},{key:"getRectData",value:function(){var e=(0,J._)((0,Y._)(n.prototype),"getRectData",this).call(this),t=this.getInkList();return e.inkList=t,e}},{key:"getInkList",value:function(){var e=this.annot.GetInkList(),t=[];if(!e.IsEmpty())for(var n=e.GetPointCount(),r=0;r<n;r++){var i=e.GetPoint(r),a=e.GetPointType(r);t.push({x:i.x,y:i.y,type:a.value})}return t}},{key:"toJson",value:function(e){var t=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this,e);return t.inkList=this.getInkList(),t}},{key:"setInkList",value:function(e){var t=this,n=new this.engine.Path;return e.forEach(function(e){var r=e.x,i=e.y,a=e.type,o=new t.engine.PointF(r,i);switch(a){case 1:n.MoveTo(o);break;case 2:n.LineTo(o);break;case 3:var s=new t.engine.CFX_FloatRect(r-.5,i+.5,r+.5,i-.5);n.MoveTo(o),n.AppendEllipse(s),s.delete()}o.delete()}),this.annot.SetInkList(n),n.delete(),this.annot.ResetAppearanceStream(),!0}},{key:"create",value:function(e){e.borderWidth&&this.setBorderWidth(e.borderWidth);var t=(0,J._)((0,Y._)(n.prototype),"create",this).call(this,e),r=e.inkList;return r&&this.setInkList(r),t}}]),n}(ae);const kt=wt;var Tt=__webpack_require__(5147),Ft=__webpack_require__(8643),Gt=[0,90,180,270],Rt=function(e){function n(e,r,i){var a;(0,t._)(this,n),(a=(0,V._)(this,n,[e,r,i])).isAudioVideo=!1;var o=a.annot.GetAction();return o.IsEmpty()||(a.action=a.JR.actionManager.get(o,a.doc,a.JR),"ActionType_e_TypeRendition"==a.action.getType()&&(a.isAudioVideo=!0)),a}return(0,Z._)(n,e),(0,r._)(n,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Screen(e)}},{key:"getRectJson",value:function(){var e=(0,J._)((0,Y._)(n.prototype),"getRectJson",this).call(this);return e.isAudioVideo=this.isAudioVideo,e.borderWidth=this.annot.GetBorderInfo().width,e}},{key:"toJson",value:function(e){var t=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this,e);this.isAudioVideo||(t.action=this.action&&this.action.toJson()),t.opacity=this.getOpacity(),t.rotation=Gt[this.getRotation()],t.title=this.getTitle(),t.isAudioVideo=this.isAudioVideo;var r=this.annot.GetDict(),i=this.engine,a=r.GetElement((0,$.n5)(i,"MK")),o=a&&a.GetDirectObject().GetDict(),s=r.GetElement((0,$.n5)(i,"A")),c=s&&s.GetDirectObject();if(c&&(t.aObjNum=c.GetObjNum()),o){var u=o.GetElement((0,$.n5)(i,"I")),l=u&&u.GetDirectObject();l&&(t.iObjNum=l.GetObjNum())}t.AA=(0,Ft.S)(this.JR,this.pdfPage.doc,this.annot.GetDict(),17,21);var d=r.GetElement((0,$.n5)(i,"AP"));if(d){var h=d.GetDirectObject().GetDict().GetElement((0,$.n5)(i,"N"));h&&h.GetDirectObject()&&(t.apObjNum=h.GetDirectObject().GetObjNum())}return t}},{key:"setBorderColor",value:function(e){var t=this.annot;if(0==e)t.RemoveProperty({value:2});else{if(-1==e)return;t.SetBorderColor(e)}t.ResetAppearanceStream()}},{key:"getAction",value:function(){return this.action?this.action:null}},{key:"setAction",value:function(e,t,n){var r,i=this.engine,a=this.JR.actionManager,o=this.annot,s=this.annot.GetPage().GetDocument();if(r=a.create(s,t.type),-1==e)try{o.SetAction(r)}catch(e){isNaN(e)||(e=i.getErrorCode(e)),console.warn(e)}else{var c=o.GetDict();this.pdfPage.pdfDoc.addAA(c,r,{trigger:e},n)}var u=a.get(r,s,this.JR);return u.create(t),this.updateModifyTime(),u}},{key:"getOpacity",value:function(){return this.annot.GetOpacity()}},{key:"getRotation",value:function(){return this.annot.GetRotation().value}},{key:"getTitle",value:function(){return this.annot.GetTitle().toString()}},{key:"create",value:function(e){if(e.rotation){var t={0:0,90:1,180:2,270:3}[e.rotation]||0;this.annot.SetRotation(this.engine.Rotation.values[t]||0)}e.borderWidth?this.setBorderWidth(e.borderWidth):this.setBorderWidth(0);var r=(0,J._)((0,Y._)(n.prototype),"create",this).call(this,e);if(void 0!==e.opacity){var i=+e.opacity;this.setOpacity(i)}if(e.apObjNum){var a=this.doc,o=this.annot.GetDict(),s=this.engine,c=(0,$.n5)(s,"AP"),u=(0,$.n5)(s,"MK"),l=o.GetElement(c),d=o.GetElement(u);if(l||(l=s.PDFDictionary.Create().GetDict(),o.SetAt(c,l)),d||(d=s.PDFDictionary.Create().GetDict(),o.SetAt(u,d)),l.GetDirectObject().GetDict().SetAtReference((0,$.n5)(s,"N"),a.GetIndirectObject(+e.apObjNum),a),e.aObjNum){var h=(0,$.n5)(s,"A");o.GetElement(h)||o.SetAtReference(h,a.GetIndirectObject(+e.aObjNum),a);var f=this.annot.GetAction();f.IsEmpty()||(this.action=this.JR.actionManager.get(f,this.doc,this.JR),"ActionType_e_TypeRendition"==this.action.getType()&&(this.isAudioVideo=!0))}if(e.iObjNum){var g=d.GetDirectObject().GetDict();g.SetAtReference((0,$.n5)(s,"I"),a.GetIndirectObject(+e.iObjNum),a);var p=(0,$.n5)(s,"IF"),v=g.GetElement(p);v||(v=s.PDFDictionary.Create().GetDict(),g.SetAt(p,v));var m=v.GetDirectObject().GetDict(),_=(0,$.n5)(s,"FB"),y=(0,$.n5)(s,"P"),S=(0,$.n5)(s,"S"),b=s.PDFObject.CreateFromBoolean(!0),I=s.PDFObject.CreateFromName(y);m.SetAt(_,b),m.SetAt(S,I),(0,ee.Z)(b,I)}}else if(e.multiBuffer&&(this.setMultiMedia(e.multiBuffer,e.fileName,e.contentType),this.isAudioVideo=!0),e.buffer&&!this.setImage(e.buffer))return null;return r}},{key:"setMultiMedia",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"video.mp4",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"video/mp4",r=this.annot.GetPage().GetDocument(),i=this.engine.Action.Create(r,this.engine.ActionType.e_TypeRendition),a=new this.engine.RenditionAction(i);a.SetOperationType(this.engine.OperationType.e_OpTypeAssociate),a.SetScreenAnnot(this.annot);var o=new this.engine.Rendition(r,null),s=new this.engine.WString(t);o.SetRenditionName(s),o.SetMediaClipName(s);var c=Qe.Z.createFile(this.engine,r,e);c.SetFileName(s),o.SetMediaClipFile(c);var u=new this.engine.String(n);o.SetMediaClipContentType(u),a.InsertRendition(o,-1),this.annot.SetAction(a),this.annot.ResetAppearanceStream(),(0,ee.Z)(s,u,o,a),this.action=this.JR.actionManager.get(i,this.doc,this.JR)}},{key:"setImage",value:function(e){try{var t=Tt.Z.createImage(this.engine,e);this.annot.SetImage(t,0,0),this.annot.ResetAppearanceStream(),this.updateModifyTime()}catch(e){var n=this.engine,r=(0,a._)(e,n.ErrorCode)?n.getErrorCode(e):e;return d.mA.getLogger("setImage").warn(r),!1}return!0}},{key:"setOpacity",value:function(e){var t=this.annot;return e=+e,t.SetOpacity(e),t.ResetAppearanceStream(),[this.getId()]}},{key:"setRotation",value:function(e){var t=this.annot,n=this.engine.Rotation,r={0:n.e_Rotation0,90:n.e_Rotation90,180:n.e_Rotation180,270:n.e_Rotation270};return t.SetRotation(r[e]),t.ResetAppearanceStream(),this.updateModifyTime(),[this.getId()]}},{key:"setBorderStyle",value:function(e,t){return(0,J._)((0,Y._)(n.prototype),"setBorderStyle",this).call(this,e,t),[this.getId()]}},{key:"setTitle",value:function(e){var t=this.annot,n=new this.engine.WString(e);return t.SetTitle(n),z.Z.updateModifyTime(this.engine,t),n.delete(),[this.getId()]}},{key:"removeAction",value:function(e,t){var n=this,r=this.engine,i=this.pdfPage.pdfDoc.doc,a=this.annot;if(this.updateModifyTime(),"-1"==e){var o=a.GetAction();return o=(0,Dt.Z)(r,i,o,t),t&&o?(a.SetAction(o),[this.JR.actionManager.get(o,this,this.JR).toJson()]):(a.RemoveAction(),[])}return e=r.TriggerEvent.values[e],[a.GetDict()].map(function(a){if(a){var o,s=(0,$.n5)(r,"AA"),c=a.GetElement(s);if(c){var u=c.GetDict();if(o=new r.AdditionalAction(i,u),t){var l=o.GetAction(e);if(l.IsEmpty())return;if(l=(0,Dt.Z)(r,i,l,t))return o.SetAction(e,l),n.JR.actionManager.get(l,n,n.JR).toJson();o.RemoveAction(e)}else o.RemoveAction(e)}}})}},{key:"moveAction",value:function(e){var t=e.trigger,n=e.action,r=e.direction,i=this.engine;t=i.TriggerEvent.values[t];var a=this.pdfPage.pdfDoc.doc,o=this.annot.GetDict();if(o){var s,c=(0,$.n5)(i,"AA"),u=o.GetElement(c);if(u){var l=u.GetDict(),d=(s=new i.AdditionalAction(a,l)).GetAction(t);if(!d.IsEmpty()){for(var h=d.GetSubActionCount(),f=[d],g=0;g<h;g++)f.push(d.GetSubAction(g));var p=f.findIndex(function(e){return e.GetDict().GetObjNum()===n.objNumber});if(-1!=p){var v=r?p+1:p-1;if(0==v||0==p){s.RemoveAction(t);var m=0==p?v:p;d=f[m],s.SetAction(t,d),f[0].RemoveAllSubActions(),f.splice(m,1);for(var _=0;_<f.length;_++)d.InsertSubAction(_,f[_])}else{var y;d.RemoveAllSubActions(),y=[f[v],f[p]],f[p]=y[0],f[v]=y[1];for(var S=1;S<f.length;S++)d.InsertSubAction(S,f[S])}this.updateModifyTime()}}}}}},{key:"getBitmapBuffer",value:function(){var e=this.annot.GetBitmap();return It(this.engine,e)}},{key:"destroy",value:function(){this.action&&this.action.destroy(),(0,J._)((0,Y._)(n.prototype),"destroy",this).call(this)}}]),n}(z.Z),xt=function(e){function n(){return(0,t._)(this,n),(0,V._)(this,n,arguments)}return(0,Z._)(n,e),(0,r._)(n,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Popup(e)}},{key:"toJson",value:function(e){var t=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this,e),r=this.annot;return t.openStatus=r.GetOpenStatus(),t}},{key:"create",value:function(e){(0,J._)((0,Y._)(n.prototype),"create",this).call(this,e);var t=(e.open||"no").toString();"yes"===t||"true"===t?this.setOpenStatus(!0):this.setOpenStatus(!1);var r=e.popId;return r&&this.annot.SetUniqueID((0,$.Dp)(this.engine,r)),[this]}},{key:"setOpenStatus",value:function(e){return this.annot.SetOpenStatus(e),this.updateModifyTime(),e}}]),n}(z.Z),Ot=__webpack_require__(4075),Mt=function(e){function n(e,r,i){var a;return(0,t._)(this,n),(a=(0,V._)(this,n,[e,r,i])).gsdkIDs=[a.engine.StandardID.e_StdIDCourier,a.engine.StandardID.e_StdIDCourierB,a.engine.StandardID.e_StdIDCourierBI,a.engine.StandardID.e_StdIDCourierI,a.engine.StandardID.e_StdIDHelvetica,a.engine.StandardID.e_StdIDHelveticaB,a.engine.StandardID.e_StdIDHelveticaBI,a.engine.StandardID.e_StdIDHelveticaI,a.engine.StandardID.e_StdIDTimes,a.engine.StandardID.e_StdIDTimesB,a.engine.StandardID.e_StdIDTimesBI,a.engine.StandardID.e_StdIDTimesI,a.engine.StandardID.e_StdIDSymbol,a.engine.StandardID.e_StdIDZapfDingbats],a}return(0,Z._)(n,e),(0,r._)(n,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Redact(e)}},{key:"apply",value:function(){var e=this;if(!this.engine.Library.HasModuleLicenseRight({value:3}))return Promise.reject(Ot.v.noRedactionLicense);var t={},n=[];return this.pdfPage.getAnnots().then(function(n){return n.forEach(function(e){var n=e.getId();n&&(t[n]=e)}),e.annot.Apply()?e.pdfPage.update(!0):new Error}).then(function(e){for(var r in t){t[r];-1===e.annotIds.indexOf(Number(r))&&n.push(r)}return n})}},{key:"setRedactOverlayText",value:function(e){return this.engine.Library.HasModuleLicenseRight({value:3})?(void 0!==e&&(this.annot.SetOverlayText((0,$.Dp)(this.engine,e)),this.annot.ResetAppearanceStream()),this.updateModifyTime(),!0):Promise.reject(Ot.v.noRedactionLicense)}},{key:"removeRedactOverlayText",value:function(){return this.engine.Library.HasModuleLicenseRight({value:3})?(this.annot.RemoveOverlayText(),this.annot.ResetAppearanceStream(),this.updateModifyTime(),!0):Promise.reject(Ot.v.noRedactionLicense)}},{key:"setRedactOverlayTextAlignment",value:function(e){if(!this.engine.Library.HasModuleLicenseRight({value:3}))return Promise.reject(Ot.v.noRedactionLicense);var t=[this.engine.Alignment.e_AlignmentLeft,this.engine.Alignment.e_AlignmentCenter,this.engine.Alignment.e_AlignmentRight];return t[e]&&(this.annot.SetOverlayTextAlignment(t[e]),this.annot.ResetAppearanceStream()),this.updateModifyTime(),!0}},{key:"setRedactRepeat",value:function(e){return this.engine.Library.HasModuleLicenseRight({value:3})?(void 0!==e&&(this.annot.SetRepeat(e),this.annot.ResetAppearanceStream()),this.updateModifyTime(),!0):Promise.reject(Ot.v.noRedactionLicense)}},{key:"setRedactAutoFontSize",value:function(e){return this.engine.Library.HasModuleLicenseRight({value:3})?(e&&(this.annot.SetAutoFontSize(e),this.annot.ResetAppearanceStream()),this.updateModifyTime(),!0):Promise.reject(Ot.v.noRedactionLicense)}},{key:"getRedactDefaultAppearance",value:function(){if(!this.engine.Library.HasModuleLicenseRight({value:3}))return Promise.reject(Ot.v.noRedactionLicense);var e=this.annot.GetDefaultAppearance(),t=e.font,n={textColor:e.text_color,textSize:e.text_size};return t.IsEmpty()||(n.fontName=t.GetName().toString()),n}},{key:"setRedactDefaultAppearance",value:function(e){if(!this.engine.Library.HasModuleLicenseRight({value:3}))return Promise.reject(Ot.v.noRedactionLicense);var t,n=this.annot.GetDefaultAppearance(),r=e.textColor,i=e.textSize,a=e.fontName;if(void 0===r&&(r=n.text_color),void 0===i&&(i=n.text_size),a){var o=(0,te.T2)(a);t=null!=o?new this.engine.Font(this.gsdkIDs[o]):new this.engine.Font((0,$.Dp)(this.engine,a),0,this.engine.Charset.e_CharsetANSI,0)}else n.font.IsEmpty()&&(t=new this.engine.Font(this.engine.StandardID.e_StdIDHelvetica));var s=((t=t||n.font)?this.engine.DefAPFlags.e_FlagFont.value:0)|this.engine.DefAPFlags.e_FlagTextColor.value|(i>0?this.engine.DefAPFlags.e_FlagFontSize.value:0),c=new this.engine.DefaultAppearance(s,t,i,r||16711680),u=this.annot.SetDefaultAppearance(c);return this.annot.ResetAppearanceStream(),this.updateModifyTime(),u}},{key:"setRedactOpacity",value:function(e,t){return this.engine.Library.HasModuleLicenseRight({value:3})?(this.annot.SetOpacity(e,t),this.annot.ResetAppearanceStream(),this.updateModifyTime(),!0):Promise.reject(Ot.v.noRedactionLicense)}},{key:"setRedactApplyFillColor",value:function(e){return this.engine.Library.HasModuleLicenseRight({value:3})?(this.annot.SetApplyFillColor(e),this.annot.ResetAppearanceStream(),this.updateModifyTime(),!0):Promise.reject(Ot.v.noRedactionLicense)}},{key:"toJson",value:function(e){var t=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this,e);t.quadPoints=this.getQuadPointsArray(),0===t.quadPoints.length?t.isArea=!0:t.isArea=!1,t.applyFillColor=this.annot.GetApplyFillColor(),t.fillColor=this.annot.GetFillColor(),t.overlayText=this.annot.GetOverlayText().toString(),t.justification=this.annot.GetOverlayTextAlignment().value+"";var r=this.annot.GetDefaultAppearance();if(t.defaultAppearance={flags:r.flags,textColor:r.text_color,textSize:r.text_size},!r.font.IsEmpty()){var i=r.font.GetName().toString();t.fontName=te.mz[i]}t.isRepeat=this.annot.GetRepeat(),t.isOverlayCode=this.annot.HasOverlayCode(),t.overlayCode=[];for(var a=this.annot.GetOverlayCode(),o=0;o<a.GetSize();o++)t.overlayCode.push(a.GetAt(o));return t}},{key:"getQuadPointsArray",value:function(){var e=[],t=this.annot.GetDict(),n=(0,$.n5)(this.engine,"QuadPoints");if(t.HasKey(n))for(var r=t.GetElement(n).GetArray(),i=r.GetElementCount()/8,a=0;a<i;a++){var o=[];o.push({x:r.GetElement(8*a).GetFloat(),y:r.GetElement(8*a+1).GetFloat()},{x:r.GetElement(8*a+2).GetFloat(),y:r.GetElement(8*a+3).GetFloat()},{x:r.GetElement(8*a+4).GetFloat(),y:r.GetElement(8*a+5).GetFloat()},{x:r.GetElement(8*a+6).GetFloat(),y:r.GetElement(8*a+7).GetFloat()}),e.push(o)}return e}},{key:"updateQuadPointsByCharIndex",value:function(e,t){try{if(-1===e||-1===t)return!1;if(e>t){var n=e;e=t,t=n}var r=this.pdfPage.getNormalTextPageSync(),i=r.GetTextRectCount(e,t-e+1);if(i<1)return!1;for(var a=this.engine,o=(new a.QuadPointsArray,a.QuadPoints,a.PointF),s=a.PDFArray.Create(),c=0,u=i;c<u;c++){var l=r.GetTextRect(c),d=r.GetBaselineRotation(c),h=l.top,f=l.right,g=l.bottom,p=l.left,v=new o(p,h),m=new o(f,h),_=new o(p,g),y=new o(f,g),S=void 0,b=void 0,I=void 0,A=void 0;switch(d.value%4){case 0:S=v,b=m,I=_,A=y;break;case 1:S=v,b=_,I=m,A=y;break;case 2:S=y,b=_,I=m,A=v;break;case 3:S=y,b=m,I=_,A=v}s.AddFloat(S.x),s.AddFloat(S.y),s.AddFloat(b.x),s.AddFloat(b.y),s.AddFloat(I.x),s.AddFloat(I.y),s.AddFloat(A.x),s.AddFloat(A.y)}var P=this.annot;return P.GetDict().SetAt((0,$.n5)(a,"QuadPoints"),s),P.ResetAppearanceStream(),this.updateModifyTime(),!0}catch(e){isNaN(e)||(e=this.engine.getErrorCode(e))}}},{key:"create",value:function(e){return(0,J._)((0,Y._)(n.prototype),"create",this).call(this,e)}},{key:"setRedactAppearance",value:function(e){var t,n=e.applyFillColor,r=e.isAutoFontSize,i=e.textColor,a=e.textSize,o=e.fontName,s=e.justification,c=e.isRepeat,u=e.overlayText,l=e.redactionCode,d=this.engine,h=this.annot.GetDefaultAppearance();if(void 0!==n&&this.annot.SetApplyFillColor(n),r&&this.annot.SetAutoFontSize(r),i=void 0===i?h.text_color:i,a=void 0===a?h.text_size:parseFloat(a),o){var f=(0,te.T2)(o);t=null!=f?new d.Font(this.gsdkIDs[f]):new d.Font((0,$.Dp)(d,o),0,d.Charset.e_CharsetANSI,0)}else h.font.IsEmpty()&&(t=new d.Font(d.StandardID.e_StdIDHelvetica));var g=((t=t||h.font)?d.DefAPFlags.e_FlagFont.value:0)|d.DefAPFlags.e_FlagTextColor.value|((!r&&a)>0?d.DefAPFlags.e_FlagFontSize.value:0),p=new d.DefaultAppearance(g,t,a,i||16711680);if(this.annot.SetDefaultAppearance(p),"0"===s&&this.annot.SetOverlayTextAlignment(d.Alignment.e_AlignmentLeft),"1"===s&&this.annot.SetOverlayTextAlignment(d.Alignment.e_AlignmentCenter),"2"===s&&this.annot.SetOverlayTextAlignment(d.Alignment.e_AlignmentRight),void 0!==c&&this.annot.SetRepeat(c),void 0!==u&&this.annot.SetOverlayText((0,$.Dp)(d,u)),l){var v=new d.Int32Array;l.forEach(function(e){return v.Add(e)}),this.annot.SetOverlayCode(v)}else this.annot.RemoveOverlayCode();return this.annot.ResetAppearanceStream(),this.updateModifyTime(),!0}},{key:"removeOverlayText",value:function(){this.engine;return this.annot.RemoveOverlayText(),this.annot.ResetAppearanceStream(),!0}},{key:"setRedactFillColor",value:function(e,t){if("number"!=typeof e)throw new Error("Incorrect color value: ".concat(e));void 0===t&&(t=!1),e<0&&(e=0);var n=this.annot,r=this.engine;0===e?n.RemoveProperty({value:3}):(n.SetOpacity(n.GetOpacity(),t),n.SetFillColor&&n.SetFillColor(e)),n.ResetAppearanceStream(),z.Z.updateModifyTime(r,n)}},{key:"isAutoFontSize",value:function(){return this.annot.IsAutoFontSize()}},{key:"setViewRotate",value:function(e){this.annot.SetViewRotate(e)}}]),n}(ae);const Nt=Mt;var Bt=function(e,t,n){var r=e.HEAPU8.buffer;return r.slice?r.slice(t,t+n):new Uint8Array(r,t,n).buffer},Lt=function(e){function n(e,r,i){var a;return(0,t._)(this,n),(a=(0,V._)(this,n,[e,r,i])).isAudioVideo=!0,a}return(0,Z._)(n,e),(0,r._)(n,[{key:"constructEngineAnnot",value:function(e){return new this.engine.Sound(e)}},{key:"getSoundStream",value:function(){return this.annot.GetSoundStream()}},{key:"toJson",value:function(e){var t=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this,e),r=this.engine;this.isAudioVideo||(t.action=this.action&&this.action.toJson()),t.opacity=this.getOpacity(),t.isAudioVideo=this.isAudioVideo;try{t.title=this.annot.GetTitle().toString();var i=this.getSoundStream(),a=this.annot.GetSamplingRate(),o=this.annot.GetBits(),s=this.annot.GetChannelCount();if(i){var c=i.GetDataSize(!1);if(c>0){var u=r._malloc(c);i.GetData(!1,c,u);var l=Bt(r,u,c);t.soundObj={data:l,sampleRate:a,sampleBits:o,channel:s,size:c},r._free(u)}}}catch(e){console.error(e)}var d=this.annot.GetDict(),h=d.GetElement((0,$.n5)(r,"AP"));if(h){var f=h.GetDirectObject().GetDict().GetElement((0,$.n5)(r,"N")),g=d.GetElement((0,$.n5)(r,"A")),p=g&&g.GetDirectObject();p&&(t.aObjNum=p.GetObjNum()),f&&f.GetDirectObject()&&(t.apObjNum=f.GetDirectObject().GetObjNum())}var v=d.GetElement((0,$.n5)(r,"MK")),m=v&&v.GetDirectObject().GetDict();if(m){var _=m.GetElement((0,$.n5)(r,"I")),y=_&&_.GetDirectObject();y&&(t.iObjNum=y.GetObjNum())}var S=d.GetElement((0,$.n5)(r,"Name"));return S&&(t.iconName=(S.GetName()||"").toString()),t}},{key:"setBorderColor",value:function(e){var t=this.annot;if(0==e)t.RemoveProperty({value:2});else{if(-1==e)return;t.SetBorderColor(e)}t.ResetAppearanceStream()}},{key:"getOpacity",value:function(){return this.annot.GetOpacity()}},{key:"getTitle",value:function(){return this.annot.GetTitle()}},{key:"create",value:function(e){e.rotate&&this.annot.SetRotation(this.engine.Rotation.values[e.rotate]),e.borderWidth&&this.setBorderWidth(e.borderWidth);var t=(0,J._)((0,Y._)(n.prototype),"create",this).call(this,e);if(this.setBorderWidth(0),void 0!==e.opacity){var r=+e.opacity;this.setOpacity(r)}if(e.apObjNum){var i=this.doc,a=this.annot.GetDict(),o=this.engine,s=(0,$.n5)(o,"AP"),c=(0,$.n5)(o,"MK"),u=a.GetElement(s),l=a.GetElement(c);if(u||(u=o.PDFDictionary.Create().GetDict(),a.SetAt(s,u)),l||(l=o.PDFDictionary.Create().GetDict(),a.SetAt(c,l)),u.GetDirectObject().GetDict().SetAtReference((0,$.n5)(o,"N"),i.GetIndirectObject(+e.apObjNum),i),e.aObjNum){var d=(0,$.n5)(o,"A");a.GetElement(d)||a.SetAtReference(d,i.GetIndirectObject(+e.aObjNum),i);var h=this.annot.GetAction();h.IsEmpty()||(this.action=this.JR.actionManager.get(h,this.doc,this.JR),"ActionType_e_TypeRendition"==this.action.getType()&&(this.isAudioVideo=!0))}if(e.iObjNum){var f=l.GetDirectObject().GetDict();f.SetAtReference((0,$.n5)(o,"I"),i.GetIndirectObject(+e.iObjNum),i);var g=(0,$.n5)(o,"IF"),p=f.GetElement(g);p||(p=o.PDFDictionary.Create().GetDict(),f.SetAt(g,p));var v=p.GetDirectObject().GetDict(),m=(0,$.n5)(o,"FB"),_=(0,$.n5)(o,"P"),y=(0,$.n5)(o,"S"),S=o.PDFObject.CreateFromBoolean(!0),b=o.PDFObject.CreateFromName(_);v.SetAt(m,S),v.SetAt(y,b),(0,ee.Z)(S,b)}}else e.multiBuffer&&(this.setMultiMedia(e.multiBuffer,e.fileName,e.contentType),this.isAudioVideo=!0),e.buffer?this.setImage(e.buffer):this.annot.ResetAppearanceStream();return t}},{key:"setMultiMedia",value:function(e,t,n){var r=this.annot.GetPage().GetDocument(),i=this.engine.Action.Create(r,this.engine.ActionType.e_TypeRendition),a=new this.engine.RenditionAction(i);a.SetOperationType(this.engine.OperationType.e_OpTypeAssociate),a.SetScreenAnnot(this.annot);var o=new this.engine.Rendition(r,null),s=new this.engine.WString(t);o.SetRenditionName(s),o.SetMediaClipName(s);var c=Qe.Z.createFile(this.engine,r,e);c.SetFileName(s),o.SetMediaClipFile(c);var u=new this.engine.String(n);o.SetMediaClipContentType(u),a.InsertRendition(o,-1),this.annot.SetAction(a),this.annot.ResetAppearanceStream(),(0,ee.Z)(s,u,o,a),this.action=this.JR.actionManager.get(i,this.doc,this.JR)}},{key:"setImage",value:function(e){try{var t=Tt.Z.createImage(this.engine,e);this.annot.SetImage(t,0,0),this.annot.ResetAppearanceStream(),this.updateModifyTime()}catch(e){var n=this.engine,r=(0,a._)(e,n.ErrorCode)?e:n.getErrorCode(e);console.warn(r)}return!0}},{key:"setOpacity",value:function(e){var t=this.annot;return e=+e,t.SetOpacity(e),t.ResetAppearanceStream(),[this.getId()]}},{key:"setRotation",value:function(e){var t=this.annot,n=this.engine.Rotation,r={0:n.e_Rotation0,90:n.e_Rotation90,180:n.e_Rotation180,270:n.e_Rotation270};return t.SetRotation(r[e]),t.ResetAppearanceStream(),this.updateModifyTime(),[this.getId()]}},{key:"setBorderStyle",value:function(e,t){return(0,J._)((0,Y._)(n.prototype),"setBorderStyle",this).call(this,e,t),[this.getId()]}},{key:"removeAction",value:function(){return this.annot.RemoveAction(),this.updateModifyTime(),!0}}]),n}(ae),jt=__webpack_require__(9963),Ut=function(){function e(n){(0,t._)(this,e),this.engine=n}return(0,r._)(e,[{key:"get",value:function(e,t,n){var r=this.engine.AnnotType;switch(e.GetType()){case r.e_Highlight:return new le(e,t,n);case r.e_Squiggly:return new Ye(e,t,n);case r.e_StrikeOut:return new he(e,t,n);case r.e_Underline:return new ge(e,t,n);case r.e_Line:return new je(e,t,n);case r.e_PolyLine:return new Ke(e,t,n);case r.e_FileAttachment:return new et(e,t,n);case r.e_Note:return new qe(e,t,n);case r.e_Circle:return new Xe(e,t,n);case r.e_Caret:return new nt(e,t,n);case r.e_Polygon:return new Ve(e,t,n);case r.e_FreeText:return new st(e,t,n);case r.e_Square:return new rt(e,t,n);case r.e_Sound:return new Lt(e,t,n);case r.e_Ink:return new kt(e,t,n);case r.e_Stamp:return new Pt(e,t,n);case r.e_Link:return new Ct(e,t,n);case r.e_Screen:return new Rt(e,t,n);case r.e_Widget:return new jt.l(e,t,n);case r.e_Popup:return new xt(e,t,n);case r.e_Redact:return new Nt(e,t,n);default:return new z.Z(e,t,n)}}}]),e}();const Wt=Ut;var Ht=function(){function e(n,r,i,a){(0,t._)(this,e),this.engine=i,this.doc=r,this.JR=a,this.originAction=n,this.action=this.createAction(n),this.initSubActions()}return(0,r._)(e,[{key:"createAction",value:function(e){return e}},{key:"destroy",value:function(){this.subAction.forEach(function(e){e.destroy()}),this.subAction=[];var e=this.action===this.originAction;!this.action.isDeleted()&&this.action.delete(),!e&&!this.originAction.isDeleted()&&this.originAction.delete()}},{key:"toJson",value:function(){var e=this.getType().replace(/^ActionType_e_/,""),t=[],n=this.action.GetDict().GetObjNum(),r=this.action.GetSubActionCount();return this.subAction.forEach(function(e){t.push(e.toJson())}),{objNumber:n,type:e,subAction:t,subActionCount:r}}},{key:"setActionDataByIndex",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this,r=1;r<=t;r++)n=n.subAction[0];return n.setActionData(e),this}},{key:"setSubAction",value:function(e,t){var n,r="[object Object]"===Object.prototype.toString.call(t);n=r?this.JR.actionManager.create(this.doc,t.type):this.JR.actionManager.create(this.doc,t),this.action.SetSubAction(e,n);var i=this.JR.actionManager.get(this.action.GetSubAction(e),this.doc,this.JR);return r&&i.create(t),this.initSubActions(),i}},{key:"insertSubAction",value:function(e,t){var n=this.action.GetSubActionCount();e=Math.max(0,Math.min(n,e));var r,i="[object Object]"===Object.prototype.toString.call(t);r=i?this.JR.actionManager.create(this.doc,t.type):this.JR.actionManager.create(this.doc,t),this.action.InsertSubAction(e,r);var a=this.JR.actionManager.get(this.action.GetSubAction(e),this.doc,this.JR);return i&&a.create(t),this.initSubActions(),a}},{key:"removeAllSubActions",value:function(){this.action.RemoveAllSubActions(),this.initSubActions()}},{key:"removeSubAction",value:function(e){this.action.RemoveSubAction(e),this.initSubActions()}},{key:"isEmpty",value:function(){return this.action.IsEmpty()}},{key:"getType",value:function(){return this.action.GetType().constructor.name}},{key:"setActionData",value:function(e){return!1}},{key:"initSubActions",value:function(){var e=this.action.GetSubActionCount();if(this.subAction=[],e>0)for(var t=0;t<e;t++)this.subAction.push(this.JR.actionManager.get(this.action.GetSubAction(t),this.doc,this.JR))}},{key:"create",value:function(e){}}],[{key:"create",value:function(e,t,n){var r=e.Action.Create(t,n);return n===e.ActionType.e_TypeSetOCGState?new e.SetOCGStateAction(r):n===e.ActionType.e_TypeThread?new e.ThreadAction(r):r}}]),e}(),Kt=function(e){function n(){return(0,t._)(this,n),(0,V._)(this,n,arguments)}return(0,Z._)(n,e),(0,r._)(n,[{key:"createAction",value:function(e){return new this.engine.URIAction(e)}},{key:"toJson",value:function(){var e=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this);return e.uri=this.getURI(),e}},{key:"setActionData",value:function(e){return this.setURI(e.uri),!0}},{key:"create",value:function(e){return e.uri&&this.setURI(e.uri),!0}},{key:"getURI",value:function(){var e,t=this.action.GetURI();try{e=t.toString()}catch(s){isNaN(s)||(s=this.engine.getErrorCode(s)),console.warn(s);for(var n="",r=t.GetLength(),i=t.GetBuffer(),a=0;a<r;a++){var o=this.engine.HEAP8[i+a]>>>0&255;n+=String.fromCharCode(o)}e=n}return e}},{key:"setURI",value:function(e){var t=new this.engine.String(e);this.action.SetURI(t),t.delete()}}]),n}(Ht),zt=__webpack_require__(1606),Vt=function(e){function n(){return(0,t._)(this,n),(0,V._)(this,n,arguments)}return(0,Z._)(n,e),(0,r._)(n,[{key:"createAction",value:function(e){return new this.engine.GotoAction(e)}},{key:"toJson",value:function(){var e=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this),t=this.getDestination();return e.destination=t.toJson(),e}},{key:"getDestination",value:function(){return new zt.Z(this.action.GetDestination(),this.doc,this.engine)}},{key:"setActionData",value:function(e){return this.setDestination(e.destination||e)}},{key:"create",value:function(e){if(e.destination)return this.setDestination(e.destination)}},{key:"setDestination",value:function(e){var t=this.doc;t.doc&&(t=t.doc);var n=zt.Z.create(this.engine,t,e);return this.action.SetDestination(n),!0}}]),n}(Ht),Jt=function(e){function n(){return(0,t._)(this,n),(0,V._)(this,n,arguments)}return(0,Z._)(n,e),(0,r._)(n,[{key:"createAction",value:function(e){return new this.engine.LaunchAction(e)}},{key:"toJson",value:function(){var e=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this),t=this.getFileSpec();return e.fileSpec=t.toJson(),e}},{key:"getFileSpec",value:function(){return this.fileSpec=new Qe.Z(this.action.GetFileSpec(),this)}},{key:"setActionData",value:function(e){try{if(e.fileSpec)return this.create(e);e.buffer&&this.setFileSpec(e)}catch(e){return!1}return!0}},{key:"create",value:function(e){if(e.fileSpec){var t=new this.engine.FileSpec(this.doc);return t.SetFileName((0,$.Dp)(this.engine,e.fileSpec.fileName)),this.action.SetFileSpec(t),!0}try{e.buffer&&this.setFileSpec(e)}catch(e){return!1}return!0}},{key:"setFileSpec",value:function(e){var t=Qe.Z.createFile(this.engine,this.doc,e.fileData||new ArrayBuffer),n=new Qe.Z(t,this);return n.setFileName(e.fileName),e.description&&n.setDescription(e.description),e.modifiedDateTime&&n.setModifiedDateTime(e.modifiedDateTime),e.subtype&&n.setSubtype(e.subtype),this.action.SetFileSpec(t),this.toJson()}}]),n}(Ht),Yt=function(e){function n(){return(0,t._)(this,n),(0,V._)(this,n,arguments)}return(0,Z._)(n,e),(0,r._)(n,[{key:"createAction",value:function(e){return new this.engine.NamedAction(e)}},{key:"toJson",value:function(){var e=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this);return e.name=this.getName(),e}},{key:"setActionData",value:function(e){try{this.setName(e.name)}catch(e){return!1}return!0}},{key:"create",value:function(e){try{this.setName(e.name)}catch(e){return!1}return!0}},{key:"getName",value:function(){return this.JR.getPDFString(this.action.GetName())}},{key:"setName",value:function(e){var t=new this.engine.String(e);this.action.SetName(t),t.delete()}}]),n}(Ht),Zt=function(e){function n(){return(0,t._)(this,n),(0,V._)(this,n,arguments)}return(0,Z._)(n,e),(0,r._)(n,[{key:"createAction",value:function(e){return new this.engine.JavaScriptAction(e)}},{key:"toJson",value:function(){var e=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this);return e.javascript=this.getScript(),e}},{key:"setActionData",value:function(e){try{this.setScript(e.script||e.javascript)}catch(e){return!1}return!0}},{key:"create",value:function(e){var t=e.script;t||(t=e.javascript);try{t&&this.setScript(t)}catch(e){return!1}return!0}},{key:"getScript",value:function(){return this.JR.getPDFString(this.action.GetScript())}},{key:"setScript",value:function(e){var t=this.engine,n=(0,$.Dp)(t,e);this.action.GetDict().SetAtWString((0,$.n5)(t,"JS"),n),n.delete()}}]),n}(Ht),qt=function(e){function n(){return(0,t._)(this,n),(0,V._)(this,n,arguments)}return(0,Z._)(n,e),(0,r._)(n,[{key:"createAction",value:function(e){return new this.engine.SubmitFormAction(e)}},{key:"toJson",value:function(){var e=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this);return e.flags=this.getFlags(),e.url=this.getURL(),e.fieldNames=this.getFieldNames(),e}},{key:"setActionData",value:function(e){try{this.setFlags(e.flags||0),e.url&&this.setURL(e.url),e.fieldNames&&this.setFieldNames(e.fieldNames)}catch(e){return!1}return!0}},{key:"create",value:function(e){try{e.flags&&this.setFlags(e.flags),e.url&&this.setURL(e.url),e.fieldNames&&this.setFieldNames(e.fieldNames)}catch(e){return!1}return!0}},{key:"getFieldNames",value:function(){for(var e=this.action.GetFieldNames(),t=[],n=e.GetSize(),r=0;r<n;r++)t.push(this.JR.getPDFString(e.GetAt(r)));return t}},{key:"getFlags",value:function(){return this.action.GetFlags()}},{key:"getURL",value:function(){var e=this.action.GetURL();return 0===e.GetLength()?null:this.JR.getPDFString(e)}},{key:"setFieldNames",value:function(e){var t=this,n=new this.engine.WStringArray;e.forEach(function(e){var r=new t.engine.WString(e);n.Add(r),r.delete()});var r=this.action.SetFieldNames(n);return n.delete(),r}},{key:"setFlags",value:function(e){return this.action.SetFlags(Number(e))}},{key:"setURL",value:function(e){return this.action.SetURL(new this.engine.String(e))}}]),n}(Ht),Xt=function(e){function n(){return(0,t._)(this,n),(0,V._)(this,n,arguments)}return(0,Z._)(n,e),(0,r._)(n,[{key:"createAction",value:function(e){return new this.engine.ResetFormAction(e)}},{key:"toJson",value:function(){var e=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this);return e.flags=this.getFlags(),e.fieldNames=this.getFieldNames(),e}},{key:"setActionData",value:function(e){try{e.flags&&this.setFlags(e.flags),e.fieldNames&&this.setFieldNames(e.fieldNames)}catch(e){return!1}return!0}},{key:"create",value:function(e){try{e.flags&&this.setFlags(e.flags),e.fieldNames&&this.setFieldNames(e.fieldNames)}catch(e){return!1}return!0}},{key:"getFieldNames",value:function(){for(var e=this.action.GetFieldNames(),t=[],n=e.GetSize(),r=0;r<n;r++)t.push(this.JR.getPDFString(e.GetAt(r)));return t}},{key:"getFlags",value:function(){return this.action.GetFlags()}},{key:"setFieldNames",value:function(e){var t=this,n=new this.engine.WStringArray;e.forEach(function(e){var r=new t.engine.WString(e);n.Add(r),r.delete()});var r=this.action.SetFieldNames(n);return n.delete(),r}},{key:"setFlags",value:function(e){return this.action.SetFlags(Number(e))}}]),n}(Ht),Qt=function(e){function n(){return(0,t._)(this,n),(0,V._)(this,n,arguments)}return(0,Z._)(n,e),(0,r._)(n,[{key:"createAction",value:function(e){return new this.engine.ImportDataAction(e)}},{key:"toJson",value:function(){var e=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this),t=this.getFDFFileSpec();return e.fileSpec=t.toJson(),e}},{key:"setActionData",value:function(e){try{if(e.fileSpec)return this.create(e);e.buffer&&this.setFDFFileSpec(e)}catch(e){return!1}return!0}},{key:"create",value:function(e){if(e.fileSpec){var t=new this.engine.FileSpec(this.doc);return t.SetFileName((0,$.Dp)(this.engine,e.fileSpec.fileName)),this.action.SetFDFFileSpec(t),!0}try{e.buffer&&this.setFDFFileSpec(e)}catch(e){return!1}return!0}},{key:"getFDFFileSpec",value:function(){return this.fileSpec=new Qe.Z(this.action.GetFDFFileSpec(),this)}},{key:"setFDFFileSpec",value:function(e){var t=Qe.Z.createFile(this.engine,this.doc,e.buffer);new Qe.Z(t,this).setFileName(e.fileName),this.action.SetFDFFileSpec(t)}}]),n}(Ht),$t=function(e){function n(){return(0,t._)(this,n),(0,V._)(this,n,arguments)}return(0,Z._)(n,e),(0,r._)(n,[{key:"createAction",value:function(e){return new this.engine.RenditionAction(e)}},{key:"toJson",value:function(){for(var e,t=function(t){var n=e.action.GetRendition(t),r=n.GetMediaClipContentType(),i=void 0;try{i=r.toString()}catch(t){for(var o="",s=r.GetLength(),c=r.GetBuffer(),u=0;u<s;u++){var l=e.engine.HEAP8[c+u]>>>0&255;o+=String.fromCharCode(l)}i=o}var d=n.GetMediaClipFile(),h=d.GetFileName().toString(),f=new Qe.Z(d,e),g=f.getFileSize(),p=new Uint8Array(g);f.getStream(function(e,t,n){var r=new Uint8Array(e);p.set(r,t)}),a.push({fileSize:g,fileName:h,contentType:i,buffer:p})},r=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this),i=this.action.GetRenditionCount(),a=[],o=0;o<i;o++)e=this,t(o);return r.renditions=a,r}}]),n}(Ht),en=function(e){function n(){return(0,t._)(this,n),(0,V._)(this,n,arguments)}return(0,Z._)(n,e),(0,r._)(n,[{key:"createAction",value:function(e){return new this.engine.HideAction(e)}},{key:"toJson",value:function(){var e=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this);return e.fieldNames=this.getFieldNames(),e.hideState=this.getHideState(),e}},{key:"getFieldNames",value:function(){for(var e=this.action.GetFieldNames(),t=[],n=0;n<e.GetSize();n++){var r=e.GetAt(n);t.push(r.toString()),r.delete()}return e.delete(),t}},{key:"getHideState",value:function(){return this.action.GetHideState()}},{key:"setActionData",value:function(e){try{this.setFieldNames(e.fieldNames),this.setHideState(e.hideState)}catch(e){return!1}return!0}},{key:"create",value:function(e){try{e.fieldNames&&this.setFieldNames(e.fieldNames),this.setHideState(e.hideState)}catch(e){return!1}return!0}},{key:"setFieldNames",value:function(e){var t=this,n=new this.engine.WStringArray;e.forEach(function(e){var r=new t.engine.WString(e);n.Add(r),r.delete()});var r=this.action.SetFieldNames(n);return n.delete(),r}},{key:"setHideState",value:function(e){return this.action.SetHideState(e)}}]),n}(Ht),tn=function(e){function n(){return(0,t._)(this,n),(0,V._)(this,n,arguments)}return(0,Z._)(n,e),(0,r._)(n,[{key:"createAction",value:function(e){return new this.engine.RemoteGotoAction(e)}},{key:"toJson",value:function(){var e=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this);e.destinationName=this.getDestinationName();var t=this.getDestination();e.destination=t.toJson();var r=this.getFileSpec();return e.fileSpec=r.toJson(),e.newWindowFlag=this.getNewWindowFlag(),e}},{key:"getDestinationName",value:function(){return this.JR.getPDFString(this.action.GetDestinationName())}},{key:"getDestination",value:function(){return new zt.Z(this.action.GetDestination(),this.doc,this.engine)}},{key:"getFileSpec",value:function(){return this.fileSpec=new Qe.Z(this.action.GetFileSpec(),this)}},{key:"getNewWindowFlag",value:function(){return this.action.GetNewWindowFlag().value}},{key:"setActionData",value:function(e){this.setDestination(e.destination),e.destinationName&&this.setDestinationName(e.destinationName),this.setFileSpec(e.fileSpec),void 0!==e.newWindowFlag&&this.setNewWindowFlag(e.newWindowFlag)}},{key:"create",value:function(e){this.setDestination(e.destination),e.destinationName&&this.setDestinationName(e.destinationName),this.setFileSpec(e.fileSpec),void 0!==e.newWindowFlag&&this.setNewWindowFlag(e.newWindowFlag)}},{key:"setDestination",value:function(e){var t=null,n=new this.engine.PDFDoc(null,!1);return t="ZoomXYZ"===e.zoomMode?this.engine.Destination.CreateXYZ(n,e.pageIndex,e.left,e.top,e.zoomFactor):zt.Z.create(this.engine,n,e),this.action.SetDestination(t),this.toJson()}},{key:"setDestinationName",value:function(e){return this.action.SetDestinationName(e),!0}},{key:"setFileSpec",value:function(e){var t=Qe.Z.createFile(this.engine,this.doc,e.fileData||new ArrayBuffer),n=new Qe.Z(t,this);return n.setFileName(e.fileName),e.description&&n.setDescription(e.description),e.modifiedDateTime&&n.setModifiedDateTime(e.modifiedDateTime),e.subtype&&n.setSubtype(e.subtype),this.action.SetFileSpec(t),this.toJson()}},{key:"setNewWindowFlag",value:function(e){var t=[this.engine.NewWindowFlag.e_NewWindowFlagFalse,this.engine.NewWindowFlag.e_NewWindowFlagTrue,this.engine.NewWindowFlag.e_NewWindowFlagNone];return this.action.SetNewWindowFlag(t[e]),this.toJson()}}]),n}(Ht),nn=function(){function e(n,r,i){(0,t._)(this,e),this.engine=r,this.doc=i,this.embeddedGotoTarget=n}return(0,r._)(e,[{key:"toJson",value:function(){var e,t=this.getAttachedFileName(),n=this.getFileAttachmentAnnotIndex(),r=this.getPageIndex(),i=this.getRelationship(),a=this.embeddedGotoTarget.GetTarget();if(!a.IsEmpty()){var o=new this.constructor(a);e=o.toJson(),o.destroy()}return a.delete(),{attachedFileName:t,fileAttachmentAnnotIndex:n,pageIndex:r,relationship:i,target:e}}},{key:"getAttachedFileName",value:function(){return this.embeddedGotoTarget.GetAttachedFileName().toString()}},{key:"getFileAttachmentAnnotIndex",value:function(){return this.embeddedGotoTarget.GetFileAttachmentAnnotIndex()}},{key:"getPageIndex",value:function(){return this.embeddedGotoTarget.GetPageIndex()}},{key:"getRelationship",value:function(){return this.embeddedGotoTarget.GetRelationship().toString()}},{key:"getTarget",value:function(){return new this.constructor(this.embeddedGotoTarget.GetTarget())}},{key:"setAttachedFileName",value:function(e){var t=new this.engine.WString(e);this.embeddedGotoTarget.SetAttachedFileName(t),t.delete()}},{key:"setFileAttachmentAnnotIndex",value:function(e){this.embeddedGotoTarget.SetFileAttachmentAnnotIndex(e)}},{key:"setPageIndex",value:function(e){this.embeddedGotoTarget.SetPageIndex(e)}},{key:"setRelationship",value:function(e){var t=new this.engine.String(e);this.embeddedGotoTarget.SetRelationship(t),t.delete()}},{key:"setTarget",value:function(e){var t=e.attachedFileName,n=e.fileAttachmentAnnotIndex,r=e.pageIndex,i=e.relationship,a=e.target,o=this.constructor.create(this.engine,this.doc),s=new this.constructor(o,this.engine,this.doc);t&&s.setAttachedFileName(t),n>=0&&s.setFileAttachmentAnnotIndex(n),r>=0&&s.setPageIndex(r),i&&s.setRelationship(i),a&&s.setTarget(a),this.embeddedGotoTarget.SetTarget(o)}}],[{key:"create",value:function(e,t){return new e.EmbeddedGotoTarget(t)}}]),e}(),rn=function(e){function n(){return(0,t._)(this,n),(0,V._)(this,n,arguments)}return(0,Z._)(n,e),(0,r._)(n,[{key:"createAction",value:function(e){return new this.engine.EmbeddedGotoAction(e)}},{key:"toJson",value:function(){var e=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this);e.destinationName=this.getDestinationName();var t=this.getDestination();e.destination=t.toJson();var r=this.getRootFile();return e.rootFile=r.toJson(),e.newWindowFlag=this.getNewWindowFlag(),this.action.GetTarget().IsEmpty()||(e.target=this.getTarget().toJson()),e}},{key:"getDestinationName",value:function(){return this.JR.getPDFString(this.action.GetDestinationName())}},{key:"getDestination",value:function(){return new zt.Z(this.action.GetDestination(),this.doc,this.engine)}},{key:"getRootFile",value:function(){return this.fileSpec=new Qe.Z(this.action.GetRootFile(),this)}},{key:"getNewWindowFlag",value:function(){return this.action.GetNewWindowFlag().value}},{key:"getTarget",value:function(){return new nn(this.action.GetTarget(),this.engine,this.doc)}},{key:"setActionData",value:function(e){this.setDestination(e),e.destinationName&&this.setDestinationName(e.destinationName),e.buffer&&this.setRootFile(e.buffer,e.fileName),e.newWindowFlag&&this.setNewWindowFlag(e.newWindowFlag),this.setTarget(e.target)}},{key:"create",value:function(e){this.setDestination(e.destination),e.destinationName&&this.setDestinationName(e.destinationName),e.buffer&&this.setRootFile(e.buffer,e.fileName),e.newWindowFlag&&this.setNewWindowFlag(e.newWindowFlag),e.target&&this.setTarget(e.target)}},{key:"setDestination",value:function(e){var t=this.doc,n=null;switch(e.type){case"ZoomXYZ":n=zt.Z.createXYZ;break;case"ZoomFitPage":n=zt.Z.createFitPage;break;case"ZoomFitHorz":n=zt.Z.createFitHorz;break;case"ZoomFitVert":n=zt.Z.createFitVert;break;case"ZoomFitRect":n=zt.Z.createFitRect;break;case"ZoomFitBBox":n=zt.Z.createFitBBox;break;case"ZoomFitBHorz":n=zt.Z.createFitBHorz;break;default:n=zt.Z.createFitBVert}var r=n(this.engine,t,e);return this.action.SetDestination(r),!0}},{key:"setDestinationName",value:function(e){return this.action.SetDestinationName(e),!0}},{key:"setRootFile",value:function(e,t){var n=Qe.Z.createFile(this.engine,this.doc,e);new Qe.Z(n,this).setFileName(t);try{this.action.SetRootFile(n)}catch(e){isNaN(e)||(e=this.engine.getErrorCode(e)),console.warn(e)}}},{key:"setNewWindowFlag",value:function(e){var t=[this.engine.NewWindowFlag.e_NewWindowFlagFalse,this.engine.NewWindowFlag.e_NewWindowFlagTrue,this.engine.NewWindowFlag.e_NewWindowFlagNone];this.action.SetNewWindowFlag(t[e])}},{key:"setTarget",value:function(e){var t=e.attachedFileName,n=e.fileAttachmentAnnotIndex,r=e.pageIndex,i=e.relationship,a=e.target,o=nn.create(this.engine,this.doc),s=new nn(o,this.engine,this.doc);t&&s.setAttachedFileName(t),n>=0&&s.setFileAttachmentAnnotIndex(n),r>=0&&s.setPageIndex(r),i&&s.setRelationship(i),a&&s.setTarget(a),this.action.SetTarget(o)}}]),n}(Ht),an=__webpack_require__(9482),on=function(e){function n(e,r,i,a){var o;(0,t._)(this,n),(o=(0,V._)(this,n,[e,r,i,a])).action=new o.engine.SetOCGStateAction(e);var s=r.doc||r;return o.pdflayer=new an.Z(s,i),o}return(0,Z._)(n,e),(0,r._)(n,[{key:"toJson",value:function(){for(var e=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this),t=[],r=[],i=this.action.GetOCGStateCount(),a=0;a<i;a++)for(var o=this.action.GetOCGStateArray(a),s=o.GetSize(),c=0;c<s;c++){var u=o.GetAt(c).GetObjNum();0===a?t.push(u):r.push(u)}return e.visibleLayerIds=t,e.hideLayerIds=r,e}},{key:"setOCGState",value:function(e,t){var n=this.engine.OCGState,r=n.e_OCGStateOff,i=n.e_OCGStateOn;return e.length>0&&this._setState(e,r),t.length>0&&this._setState(t,i),this.toJson()}},{key:"_setState",value:function(e,t){for(var n=new this.engine.PDFDictionaryArray,r=0;r<e.length;r++){var i=this.pdflayer.getLayerNodeById(e[r]).layer_node;n.Add(i.GetDict())}this.action.InsertOCGStates(this.doc,0,t,n)}},{key:"setActionData",value:function(e){this.create(e)}},{key:"create",value:function(e){var t=e.hideLayerIds,n=e.visibleLayerIds;try{return this.setOCGState(t,n)}catch(e){return console.error(e),!1}}}]),n}(Ht),sn=function(e){function n(e,r,i,a){var o;return(0,t._)(this,n),(o=(0,V._)(this,n,[e,r,i,a])).doc=r,o.engine=i,o.action=new o.engine.ThreadAction(e),o}return(0,Z._)(n,e),(0,r._)(n,[{key:"toJson",value:function(){var e=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this);return this.action.IsDestThreadInCurrentDoc()?(e.dest_thread=this.action.GetDestinationThread(),e.dest_thread_index=this.action.GetDestinationThreadIndex(),e.dest_thread_title=this.action.GetDestinationThreadTitle().toString()):e.file_spec=this.action.GetFileSpec(),e}},{key:"setActionData",value:function(e){try{this.setThreadIndex(e.dest_thread_index)}catch(e){return!1}return!0}},{key:"create",value:function(e){try{this.setThreadIndex(e.dest_thread_index)}catch(e){console.error(e)}return!0}},{key:"setThreadIndex",value:function(e){var t=new this.engine.FileSpec(this.doc);this.action.SetDestinationThreadIndex(t,e)}}]),n}(Ht),cn=function(){function e(n){(0,t._)(this,e),this.engine=n}return(0,r._)(e,[{key:"get",value:function(e,t,n){var r=this.engine,i=r.ActionType;switch(e&&!e.IsEmpty()&&e.GetType()||null){case i.e_TypeThread:return new sn(e,t,r,n);case i.e_TypeSetOCGState:return new on(e,t,r,n);case i.e_TypeURI:return new Kt(e,t,r,n);case i.e_TypeLaunch:return new Jt(e,t,r,n);case i.e_TypeNamed:return new Yt(e,t,r,n);case i.e_TypeJavaScript:return new Zt(e,t,r,n);case i.e_TypeResetForm:return new Xt(e,t,r,n);case i.e_TypeSubmitForm:return new qt(e,t,r,n);case i.e_TypeImportData:return new Qt(e,t,r,n);case i.e_TypeGoto:return new Vt(e,t,r,n);case i.e_TypeRendition:return new $t(e,t,r,n);case i.e_TypeHide:return new en(e,t,r,n);case i.e_TypeGoToR:return new tn(e,t,r,n);case i.e_TypeGoToE:return new rn(e,t,r,n);case i.e_TypeUnknown:case i.e_TypeSound:case i.e_TypeMovie:case i.e_TypeTrans:case i.e_TypeGoTo3DView:default:return new Ht(e,t,r,n)}}},{key:"create",value:function(e,t){var n=this.engine.ActionType;return Ht.create(this.engine,e,n["e_"+t])}},{key:"getActionByDict",value:function(e,t){return new this.engine.Action(e,t)}}]),e}(),un=function(){function e(n,r,i,a,o){(0,t._)(this,e),this.id=(0,d.Ki)("graphics_object"),this.engine=a,this.c_page=r,!i.objectMap&&(i.objectMap=new Map),i.objectMap.set(n,this.id),this.parent=i,this.graphicsObject=n,this.jr=o}return(0,r._)(e,[{key:"getType",value:function(){var e=this.graphicsObject.GetType();return e?e.value:-1}},{key:"isParentPage",value:function(){return!this.parent.c_page}},{key:"toJson",value:function(){for(var e=this.graphicsObject,t=(e.GetBlendMode().value,e.GetFillColor()),n=e.GetStrokeColor(),r=e.GetGraphState(),i=[],a=0;a<r.dashes.GetSize();a++)i.push(r.dashes.GetAt(a));var o=e.GetMatrix(),s=o,c=e.GetRect();if(!this.isParentPage()){var u=this.parent.matrix;u.TransformRect(c),(s=new this.engine.Matrix(u.a,u.b,u.c,u.d,u.e,u.f)).Concat(o.a,o.b,o.c,o.d,o.e,o.f,!1)}return{id:this.id,graphState:{dashes:i,lineCap:r.line_cap.value,lineJoin:r.line_join.value,lineWidth:r.line_width,lineLimit:r.line_limit},fillColor:t,strokeColor:n,hasTransparency:e.HasTransparency(),type:e.GetType()?e.GetType().value:-1,matrix:{a:s.a,b:s.b,c:s.c,d:s.d,e:s.e,f:s.f},rect:{left:c.left,top:c.top,right:c.right,bottom:c.bottom}}}},{key:"setMatrix",value:function(e){var t=new this.engine.Matrix;t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t.e=e.e,t.f=e.f,this.graphicsObject.SetMatrix(t),this.c_page.GenerateContent(),t.delete}},{key:"setRect",value:function(e){var t=this.graphicsObject.GetMatrix(),n=this.graphicsObject.GetRect();if(!n.IsEmpty()){var r=new this.engine.CFX_FloatRect(e.left,e.bottom,e.right,e.top);if(!r.IsEmpty()){if(!this.isParentPage()){var i=new this.engine.Matrix;i.SetReverse(this.parent.matrix),i.TransformRect(r)}var a=new this.engine.Matrix;a.MatchRect(r,n),this.graphicsObject.Transform(a,!0),r.delete(),this.c_page.GenerateContent(),t.delete()}}}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.engine,r=this.graphicsObject.GetRect(),i=new n.Matrix;if(i.d=-1,i.f=r.Height(),i.Scale(e,e,!1),this.isParentPage())i.Rotate(this.c_page.GetRotation().value*Math.PI/2+t/180*Math.PI,0);else{var a=this.parent.getMatrix(),o=new n.Matrix(a.a,a.b,a.c,a.d,a.e,a.f),s=new n.Matrix;s.Rotate(-this.c_page.GetRotation().value*Math.PI/2+t/180*Math.PI,0),o.Concat(s,!1),o.Concat(i,!1),s.delete(),i.delete(),i=o}i.TransformRect(r),i.e-=r.left,i.f-=r.bottom;var c=r.Width(),u=r.Height(),l=Math.max(c*e,1),d=Math.max(u*e,1),h=new n.Bitmap(l,d,n.DIBFormat.e_DIBArgb,0,0),f=new n.Renderer(h,!0);f.RenderGraphicsObject(this.graphicsObject,this.c_page,i);var g=h;l=g.GetWidth(),d=g.GetHeight();var p,v=g.GetBuffer(),m=d*g.GetPitch(),_=v+m;return p=n.HEAPU8.buffer.slice?n.HEAPU8.buffer.slice(v,_):new Uint8Array(n.HEAPU8.buffer,v,m).buffer,i.delete(),f.delete(),h.delete(),{buffer:p,width:l,height:d}}},{key:"updateGraphState",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.graphicsObject.GetGraphState();switch(e){case"BorderStyle":var i=new this.engine.FloatArray;i.SetSize(n.length,-1);for(var a=0;a<n.length;a++)i.SetAt(a,n[a]);r.dashes=i;break;case"BorderWidth":r.line_width=t}this.graphicsObject.SetGraphState(r),r.dashes.delete()}},{key:"setBorderStyle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.updateGraphState("BorderStyle",e,t),n&&this.c_page.GenerateContent(),this.toJson()}},{key:"setBorderWidth",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.updateGraphState("BorderWidth",e),t&&this.c_page.GenerateContent(),this.toJson()}},{key:"setBorderColor",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=255*this.graphicsObject.GetStrokeOpacity()|0;return this.graphicsObject.SetStrokeColor((16777215&e|n<<24)>>>0),t&&this.c_page.GenerateContent(),this.toJson()}},{key:"setFillColor",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=255*this.graphicsObject.GetFillOpacity()|0;return this.graphicsObject.SetFillColor((16777215&e|n<<24)>>>0),t&&this.c_page.GenerateContent(),this.toJson()}},{key:"setOpacity",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.graphicsObject.SetFillOpacity(e),this.graphicsObject.SetStrokeOpacity(e),t&&this.c_page.GenerateContent(),this.toJson()}},{key:"remove",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.isParentPage())this.c_page.RemoveGraphicsObject(this.graphicsObject);else{var t=this.parent.graphicsObject.GetGraphicsObjects();t.RemoveGraphicsObject(this.graphicsObject),t.GenerateContent()}e&&this.c_page.GenerateContent()}},{key:"moveToPosition",value:function(e,t){var n,r=this.isParentPage()?this.c_page:this.parent.graphicsObject.GetGraphicsObjects();if(e!=Q.Bo.FIRST&&e!=Q.Bo.LAST){var i=!0,a=!1,o=void 0;try{for(var c,u=this.parent.objectMap[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var l=(0,s._)(c.value,2),d=l[0];n=l[1]==t?d:null}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}var h,f=r.GetGraphicsObjectPosition(this.graphicsObject);switch(e){case Q.Bo.FIRST:h=r.GetLastGraphicsObjectPosition(this.engine.GraphicsObjectType.e_TypeAll);break;case Q.Bo.LAST:h=0;break;case Q.Bo.BEFORE:h=r.GetGraphicsObjectPosition(n);break;case Q.Bo.AFTER:var g=r.GetGraphicsObjectPosition(n);h=r.GetPrevGraphicsObjectPosition(g,this.engine.GraphicsObjectType.e_TypeAll)}return r.MoveGraphicsObjectByPosition(f,h),r.GenerateContent(),this.toJson()}}]),e}(),ln=function(e){function n(e,r,i,a,o){var s;return(0,t._)(this,n),(s=(0,V._)(this,n,[e,r,i,a])).graphicsObject=e.GetTextObject(),s.jr=o,s}return(0,Z._)(n,e),(0,r._)(n,[{key:"toJson",value:function(){var e=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this),t={},r=this.engine,i=this.c_page,a=i.GetDocument(),o=this.graphicsObject.GetTextState(i),s=o.font,c={};if(!s.IsEmpty()){c.name=s.GetName().toString();var u=s.GetFamilyName().toString();c.familyName=u;var l=c.name;try{l=s.GetBaseFontName(a).toString()||l}catch(e){}c.baseName=l,c.ascent=s.GetAscent(),c.descent=s.GetDescent(),c.isItalic=s.IsItalic(),c.isBold=s.IsBold(),!c.isItalic&&l.toLowerCase().includes("italic")&&(c.isItalic=!0),!c.isBold&&l.toLowerCase().includes("bold")&&(c.isBold=!0);var d,h=c.isBold?700:400,f=c.styles=s.GetStyles(a),g=r.Charset.e_CharsetDefault.value;s.GetFontType(a)==r.FontTypes.e_FontTypeCIDFont&&(void 0!==(g=s.GetCIDCharset(a))&&g!==r.Charset.e_CharsetDefault||(g=r.Charset.values[U(l,!0,!0)])||(g=r.Charset.e_CharsetANSI),g===r.CIDCharset.e_CIDCharsetJAPAN1?g=r.Charset.e_CharsetShift_JIS:g===r.CIDCharset.e_CIDCharsetKOREA1&&(g=r.Charset.e_CharsetHangeul),g=g.value),c.charset=g,s.IsEmbedded(a)?(c.isEmbedded=!0,c.nameKey="fv_"+this.id):s.IsStandardFont(a)?(c.isStandard=!0,c.standardId=s.GetStandard14Font(a).value,(d=G(l,g,0,h,f))&&(d="fv_"+d[0].url.replace(/\./g,"_"),c.nameKey=d)):(d=G(l,g,0,h,f))&&(d="fv_"+d[0].url.replace(/\./g,"_"),c.nameKey=d)}return t.textState={text:this.graphicsObject.GetText().toString(),charSpace:o.charspace,font:c,size:o.font_size,vertical_size:o.font_vertical_size,position:{x:o.origin_position.x,y:o.origin_position.y},matrix:[o.GetMatrixA(),o.GetMatrixB(),o.GetMatrixC(),o.GetMatrixD()],mode:o.textmode.value,wordSpace:o.wordspace},Object.assign({},e,t)}},{key:"setText",value:function(e){var t=this.engine,n=this.c_page,r=n;this.isParentPage()||(r=this.parent.graphicsObject.GetGraphicsObjects());for(var i=n.GetDocument(),a=this.graphicsObject,o=a.GetTextState(n),s=a.GetMatrix(),c=parseInt(180*Math.atan2(s.b,s.a)/Math.PI),u=o.font,l=u.GetFontType(i),d=pn(a,r,t.GraphicsObjectType.e_TypeText)||n.GetLastGraphicsObjectPosition(t.GraphicsObjectType.e_TypeAll),h=e.split(/\n/),f=[a],g=h.length-1;g>0;g--){var p=a.Clone().GetTextObject();f[g]=p,p.SetText((0,$.Dp)(t,"")),r.InsertGraphicsObject(d,p)}var v=[];if(u.IsEmpty())return Promise.resolve();if(u.IsStandardFont(i))for(var m=0,_=h.length;m<_;m++)if(e=h[m],a=f[m],!e||/^[\u0000-\u00FF]+$/.test(e))a.SetText(new this.engine.WString(e)),v[m]=[a];else{v[m]=vn(e,/[\u0000-\u00FF]+/g,a,n,u,t,this,m)}else if(u.IsEmbedded(i))for(var y=a.GetText().toString().replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),S=new RegExp("^["+y+"]+$"),b=0,I=h.length;b<I;b++)e=h[b],a=f[b],!e||S.test(e)?(a.SetText(new this.engine.WString(e)),v[b]=[a]):v[b]=vn(e,new RegExp("["+y+"]+","g"),a,n,u,t,this);else for(var A=0,P=h.length;A<P;A++)if(e=h[A],a=f[A],l==t.FontTypes.e_FontTypeCIDFont){var D=hn(t,u,i);if(D&&D!==t.Charset.e_CharsetDefault){var E=gn(D=D.value);if(E)!e||new RegExp("^"+E.source+"$").test(e)?(a.SetText(new t.WString(e)),v[A]=[a]):v[A]=vn(e,E,a,n,u,t,this,A);else{var C=mn(e,a,n,u,t,r,0);v[A]=C,C.length>1&&(A||this.graphicsObject!==a||(this.graphicsObject=C[0]),r.RemoveGraphicsObject(a))}}else{var w=mn(e,a,n,u,t,r,0);v[A]=w,w.length>1&&(A||this.graphicsObject!==a||(this.graphicsObject=w[0]),r.RemoveGraphicsObject(a))}}else{var k=u.GetName().toString();try{k=u.GetBaseFontName(i).toString()||k}catch(e){}var T=U(k,!1,!0)||t.Charset.e_CharsetANSI.value;/(FoxitSansOTF)|(FoxitSansPS)/.test(k)&&(T=t.Charset.e_CharsetANSI.value);var F=u.IsSupportEmbedded(i),G=[t.Charset.e_CharsetANSI,t.Charset.e_CharsetSymbol,t.Charset.e_CharsetShift_JIS,t.Charset.e_CharsetHangeul,t.Charset.e_CharsetGB2312,t.Charset.e_CharsetChineseBig5];if(F&&-1===G.indexOf(T)){var R=u.Embed(i);R.IsEmpty()||(u=R,o.font=u,a.SetTextState(n,o,!1,400))}var x=gn(T);if(x)!e||new RegExp("^"+x.source+"$").test(e)?(a.SetText(new t.WString(e)),v[A]=[a]):v[A]=vn(e,x,a,n,u,t,this,A);else{var O=mn(e,a,n,u,t,r,0);v[A]=O,O.length>1&&(A||this.graphicsObject!==a||(this.graphicsObject=O[0]),r.RemoveGraphicsObject(a))}}for(var M=0,N=0,B=0,L=v.length;B<L;B++)for(var j=v[B],W=0,H=j.length;W<H;W++){var K=j[W].GetRect(),z=K.top-K.bottom;M=Math.max(M,z);var V=K.right-K.left;N=Math.max(N,V)}M+=3,N+=3;for(var J=0,Y=0,Z=1,q=v.length;Z<q;Z++){switch(c){case 0:J-=M;break;case 90:Y+=N;break;case 180:case-180:J+=M;break;case 270:case-90:Y-=N}for(var X=v[Z],Q=0,ee=X.length;Q<ee;Q++){var te=X[Q],ne=te.GetTextState(n);if(ne.origin_position=new t.PointF(ne.origin_position.x+Y,ne.origin_position.y+J),te.SetTextState(n,ne,!1,400),!te.GetText().toString()){var re=new t.WString("");te.SetText(re)}}}return r.GenerateContent(),this.reParsePage()}},{key:"setItalic",value:function(e){var t,n=this.c_page,r=n.GetDocument(),i=this.graphicsObject,a=this.engine,o=i.GetTextState(n),s=o.font;if(s.IsEmpty())return Promise.resolve();if(s.IsStandardFont(r)){var c,u=a.StandardID,l=s.GetStandard14Font(r);if(e)switch(l){case u.e_StdIDCourier:c=u.e_StdIDCourierI;break;case u.e_StdIDCourierB:c=u.e_StdIDCourierBI;break;case u.e_StdIDHelvetica:c=u.e_StdIDHelveticaI;break;case u.e_StdIDHelveticaB:c=u.e_StdIDHelveticaBI;break;case u.e_StdIDTimes:c=u.e_StdIDTimesI;break;case u.e_StdIDTimesB:c=u.e_StdIDTimesBI}else switch(l){case u.e_StdIDCourierI:c=u.e_StdIDCourier;break;case u.e_StdIDCourierBI:c=u.e_StdIDCourierB;break;case u.e_StdIDHelveticaI:c=u.e_StdIDHelvetica;break;case u.e_StdIDHelveticaBI:c=u.e_StdIDHelveticaB;break;case u.e_StdIDTimesI:c=u.e_StdIDTimes;break;case u.e_StdIDTimesBI:c=u.e_StdIDTimesB}c&&(t=new a.Font(c))}else{var d=s.GetStyles(r),h=a.Styles.e_StyleItalic.value;e?d|=h:d&=~h;var f=hn(a,s,r),g=s.GetName().toString();try{g=s.GetBaseFontName(r).toString()||g}catch(e){}if(!(/(FoxitSansOTF)|(FoxitSansPS)/.test(g)||f&&f!==a.Charset.e_CharsetDefault)){var p=U(g,!0,!0);-1!==p&&(f=a.Charset.values[p])}if(f&&f!==a.Charset.e_CharsetDefault||(f=a.Charset.e_CharsetANSI),g=g.toLowerCase(),e){if(g.includes("regular"))g=g.replace("regular","italic");else{var v=g.includes(",")?"italic":",italic";g+=v}g.includes("notosansmonocjksc")&&(g=g.replace("notosansmonocjksc","notosanssc"))}else g.includes("italic")?g=g.replaceAll("italic",""):g.includes("oblique")&&(g=g.replaceAll("oblique","")),g.endsWith(",")&&(g=g.substr(0,g.length-1)),g.includes("foxitsansps")&&(g=g.replace("foxitsansps","foxitsansotf"));var m=new a.WString(g),_=s.IsBold()||g.includes("blod");t=new a.Font(m,d,f,_?700:400),(0,ee.Z)(m)}if(t){if(o.font=t,i.SetTextState(n,o,!1,400),i.GetText().toString()||i.SetText(new this.engine.WString("")),!this.isParentPage())this.parent.graphicsObject.GetGraphicsObjects().GenerateContent();return n.GenerateContent(),(0,ee.Z)(t),this.reParsePage()}return Promise.resolve()}},{key:"setBold",value:function(e){var t,n=this.c_page,r=n.GetDocument(),i=this.graphicsObject,a=this.engine,o=i.GetTextState(n),s=o.font;if(s.IsEmpty())return Promise.resolve();if(s.IsStandardFont(r)){var c,u=a.StandardID,l=s.GetStandard14Font(r);if(e)switch(l){case u.e_StdIDCourier:c=u.e_StdIDCourierB;break;case u.e_StdIDCourierI:c=u.e_StdIDCourierBI;break;case u.e_StdIDHelvetica:c=u.e_StdIDHelveticaB;break;case u.e_StdIDHelveticaI:c=u.e_StdIDHelveticaBI;break;case u.e_StdIDTimes:c=u.e_StdIDTimesB;break;case u.e_StdIDTimesI:c=u.e_StdIDTimesBI}else switch(l){case u.e_StdIDCourierB:c=u.e_StdIDCourier;break;case u.e_StdIDCourierBI:c=u.e_StdIDCourierI;break;case u.e_StdIDHelveticaB:c=u.e_StdIDHelvetica;break;case u.e_StdIDHelveticaBI:c=u.e_StdIDHelveticaI;break;case u.e_StdIDTimesB:c=u.e_StdIDTimes;break;case u.e_StdIDTimesBI:c=u.e_StdIDTimesI}c&&(t=new a.Font(c))}else{var d=s.GetStyles(r),h=a.Styles.e_StylesBold.value;e?d|=h:d&=~h;var f=hn(a,s,r),g=s.GetName().toString();try{g=s.GetBaseFontName(r).toString()||g}catch(e){}if(!(/(FoxitSansOTF)|(FoxitSansPS)/.test(g)||f&&f!==a.Charset.e_CharsetDefault)){var p=U(g,!0,!0);-1!==p&&(f=a.Charset.values[p])}if(f&&f!==a.Charset.e_CharsetDefault||(f=a.Charset.e_CharsetANSI),g=g.toLowerCase(),e){if(g.includes("regular"))g=g.replace("regular","bold");else if(g.includes("italic"))g=g.replace("italic","bolditalic");else if(g.includes("oblique"))g=g.replace("oblique","boldoblique");else{var v=g.includes(",")?"bold":",bold";g+=v}g.includes("notosansmonocjksc")&&(g=g.replace("notosansmonocjksc","notosanssc"))}else g.includes("bold")&&(g=g.replaceAll("bold","")),g.endsWith(",")&&(g=g.substr(0,g.length-1)),g.includes("foxitsansps")&&(g=g.replace("foxitsansps","foxitsansotf"));var m=new a.WString(g);t=new a.Font(m,d,f,e?700:400),(0,ee.Z)(m)}if(t){if(o.font=t,i.SetTextState(n,o,!1,400),i.GetText().toString()||i.SetText(new this.engine.WString("")),!this.isParentPage())this.parent.graphicsObject.GetGraphicsObjects().GenerateContent();return n.GenerateContent(),(0,ee.Z)(t),this.reParsePage()}return Promise.resolve()}},{key:"setFontSize",value:function(e){var t=this.c_page,n=this.graphicsObject,r=n.GetTextState(t),i=(r.font,r.font_vertical_size/r.font_size);(r.font_size=e/i,n.SetTextState(t,r,!1,400),n.GetText().toString()||n.SetText((0,$.Dp)(this.engine,"")),this.isParentPage())||this.parent.graphicsObject.GetGraphicsObjects().GenerateContent();return t.GenerateContent(),this.reParsePage()}},{key:"setStandardFont",value:function(e){var t=this.graphicsObject,n=t.GetText().toString(),r=this.engine,i=this.c_page;e=r.StandardID.values[e];var a=t.GetTextState(i),o=a.font;return o=new r.Font(e),a.font=o,t.SetTextState(i,a,!1,400),this.setText(n)}},{key:"setFontByName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:458863,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.c_page,i=this.graphicsObject,a=i.GetText().toString(),o=i.GetTextState(r),s=o.font,c=this.engine,u=new c.WString(e);return s=new c.Font(u,t,c.Charset.values[n]||c.Charset.e_CharsetANSI,400),(0,ee.Z)(u),o.font=s,i.SetTextState(r,o,!1,400),this.setText(a)}},{key:"setFillColor",value:function(e){(this.graphicsObject.SetFillColor((4278190080|e)>>>0),this.isParentPage())||this.parent.graphicsObject.GetGraphicsObjects().GenerateContent();return this.c_page.GenerateContent(),this.toJson()}},{key:"reParsePage",value:function(){return Promise.resolve()}},{key:"getWoff",value:function(){var e=this.engine,t=this.c_page,n=t.GetDocument(),r=this.graphicsObject.GetTextState(t).font;if(r.IsEmpty())return null;if(r.IsEmbedded(n))return it.Z.getWoffDataBuffer(r.GetWoffData(n),this.engine);var i=hn(e,r,n)||0;i&&(i=i.value);var a=r.GetName().toString();try{a=r.GetBaseFontName(n).toString()||a}catch(e){}var o=this.jr.getFontBuffer(a,r.GetStyles(n),0,i,r.IsBold()?700:400,!0);return o?{buffer:o}:null}}],[{key:"create",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=r.TextObject.Create(),s=e.originPosition;if(!s)throw new Error("originPosition is required");var c,u=s.x,l=s.y,d=e.charspace||0,h=e.wordspace||0,f=e.fontSize||12,g=e.textmatrix||[1,0,0,1],p=r.Mode.values[e.textmode||0];if(e.font){var v=e.font;if(void 0!==v.standardId)c=new r.Font(r.StandardID.values[v.standardId]);else{var m=new r.WString(v.name);c=new r.Font(m,v.styles,r.Charset.values[1==v.charset?0:v.charset],v.weight||0),(0,ee.Z)(m)}}else c=new r.Font((0,$.Dp)(r,"FoxitSansOTF"),458863,r.Charset.e_CharsetANSI,400);var _=o.GetTextState(t);_.font=c,_.font_size=f,_.charspace=d,_.wordspace=h,_.textmode=p;var y=new r.PointF(u,l);if(_.origin_position=y,_.textmatrix=g,o.SetTextState(t,_,!1,400),e.matrix){var S=e.matrix;o.SetMatrix(new r.Matrix(S[0],S[1],S[2],S[3],S[4],S[5]))}var b=new r.WString(e.text||"");o.SetText(b),e.fillColor&&o.SetFillColor((4278190080|e.fillColor)>>>0),a=a||t.GetLastGraphicsObjectPosition(r.GraphicsObjectType.e_TypeAll),t.InsertGraphicsObject(a,o),e.text&&t.GenerateContent();var I=i.get(o,t,n);return e.text&&e.text.length>0&&I.setText(e.text),(0,ee.Z)(c,y,b),I}}]),n}(un);const dn=ln;function hn(e,t,n){var r,i=e.Charset;e.CIDCharset;if(t.GetFontType(n)==e.FontTypes.e_FontTypeCIDFont)switch(t.GetCIDCharset(n).value){case 1:r=i.e_CharsetGB2312;break;case 2:r=i.e_CharsetChineseBig5;break;case 3:r=i.e_CharsetShift_JIS;break;case 4:r=i.e_CharsetHangeul;break;case 5:r=i.e_CharsetANSI}return r}function fn(e){for(var t=[[/[\u0000-\u00FF]+/g,{name:"Arial",styles:32,charset:1}],[/[\u0000-\u007f\u8140-\uA0FE\uA996\uA1A1-\uA9FE\uA840-\uA9A0\uF8A1-\uFEFE\uA140-\uA7A0\u200F-\u2027\u2E80-\u303F\u31C0-\u4DBF\u4E00-\u9FBF\uFF00-\uFFEF]+/g,{name:"SimSun",styles:34,charset:134}],[/[\u4E00-\uA0FE\uA140-\uA3BF\uA259-\uA261\uA3C0-\uA3FE\u2E80-\u303F\u31C0-\u4DBF\uFF00-\uFFEF]+/g,{name:"MingLiU",styles:34,charset:136}],[/[\u0000-\u007f\u2E80-\u4DBF\u4E00-\u9FBF\uF900-\uFAFF\uFE30-\uFE4F\uFF00-\uFFEF]+/g,{name:"Meiryo",styles:34,charset:128}],[/[\u0000-\u007f\u1100-\u11FF\u3130-\u318F\uAC00-\uD7AF\uFF00-\uFFEF\u2E80-\u303F\u31C0-\u4DBF\u4E00-\u9FBF\uF900-\uFAFF\uFE30-\uFE4F\uFF00-\uFFEF]+/g,{name:"Korean",styles:32,charset:129}],[/[\u0E00-\u0E7F]+/g,{name:"Angsana New",styles:32,charset:222}],[/[\u0370-\u03FF\u1F00-\u1FFF]+/g,{name:"Arial",styles:32,charset:161}],[/[\u0590-\u05FF]+/g,{name:"Aharoni",styles:32,charset:177}],[/[\u0600-\u06FF\u0750-\u077F\uFB50-\uFDFF\uFE70-\uFEFF]+/g,{name:"Arabic",styles:32,charset:178}]],n=0,r=t.length;n<r;n++)if(new RegExp("^"+t[n][0].source+"$").test(e))return[{text:e,info:t[n][1]}];for(var i,a=[],o=0,s=0,u=t.length;s<u;s++){for(t[s][0].lastIndex=o;i=t[s][0].exec(e);){var l=i.index;if(l>o){var d,h=e.slice(o,l);(d=a).push.apply(d,(0,c._)(fn(h)))}var f=i[0];a.push({text:f,info:t[s][1]}),o=l+f.length}if(o>=e.length)break}return a.length?a:[{text:e,info:null}]}function gn(e){switch(e){case 0:case 2:case 238:case 204:return/[\u0000-\u00FF]+/g;case 134:return/[\u0000-\u007f\u8140-\uA0FE\uA996\uA1A1-\uA9FE\uA840-\uA9A0\uF8A1-\uFEFE\uA140-\uA7A0\u200F-\u2027\u2E80-\u303F\u31C0-\u4DBF\u4E00-\u9FBF\uFF00-\uFFEF]+/g;case 136:return/[\u4E00-\uA0FE\uA140-\uA3BF\uA259-\uA261\uA3C0-\uA3FE\u2E80-\u303F\u31C0-\u4DBF\uFF00-\uFFEF]+/g;case 128:return/[\u0000-\u007f\u2E80-\u4DBF\u4E00-\u9FBF\uF900-\uFAFF\uFE30-\uFE4F]+/g;case 129:return/[\u0000-\u007f\u1100-\u11FF\u3130-\u318F\uAC00-\uD7AF\uFF00-\uFFEF\u2E80-\u303F\u31C0-\u4DBF\u4E00-\u9FBF\uF900-\uFAFF\uFE30-\uFE4F]+/g;case 222:return/[\u0E00-\u0E7F]+/g;case 161:case 162:case 186:return/[\u0370-\u03FF\u1F00-\u1FFF]+/g;case 177:return/[\u0590-\u05FF]+/g;case 178:return/[\u0600-\u06FF\u0750-\u077F\uFB50-\uFDFF\uFE70-\uFEFF]+/g;default:return!1}}function pn(e,t,n){for(var r=t.GetFirstGraphicsObjectPosition(n);r;){var i=t.GetGraphicsObject(r);if(e.Handle&&i.GetTextObject().Handle()===e.Handle())return r;r=t.GetNextGraphicsObjectPosition(r,n)}return r}function vn(e,t,n,r,i,a,o,s){var u=[],l=0,d=t.exec(e),h=e.length;if(d){var f=d.index,g=d[0];f!==l&&u.push([0,e.slice(l,f)]),u.push([1,g]),l=f+g.length}else u=[[0,e]],l=h;for(;d=t.exec(e);){var p=d.index,v=d[0];u.push([0,e.slice(l,p)]),u.push([1,v]),l=p+v.length}l<h&&u.push([0,e.slice(l)]);var m=0,_=[],y=u.length,S=r;o.isParentPage()||(S=o.parent.graphicsObject.GetGraphicsObjects());for(var b,I=pn(n,S,a.GraphicsObjectType.e_TypeText)||r.GetLastGraphicsObjectPosition(a.GraphicsObjectType.e_TypeAll),A=y;A--;){var P=n.Clone().GetTextObject();S.InsertGraphicsObject(I,P),_[A]=P}y&&(o.graphicsObject=_[0]);for(var D=[],E=0,C=y;E<C;E++){var w=_[E],k=u[E],T=k[0],F=k[1],G=w.GetTextState(r);if(G.origin_position=new a.PointF(G.origin_position.x+m,G.origin_position.y),w.SetTextState(r,G,!1,400),T)w.SetText(new a.WString(F)),D.push(w);else{var R,x=mn(F,w,r,i,a,S,m);(R=D).push.apply(R,(0,c._)(x)),x.length>1&&(s||o.graphicsObject!==w||(o.graphicsObject=x[0]),S.RemoveGraphicsObject(w))}m+=(b=w.GetRect()).right-b.left+1}return y&&S.RemoveGraphicsObject(n),D}function mn(e,t,n,r,i,a,o){var s=r.IsBold()?700:400,c=r.IsItalic(),u=[i.Charset.e_CharsetANSI,i.Charset.e_CharsetSymbol,i.Charset.e_CharsetShift_JIS,i.Charset.e_CharsetHangeul,i.Charset.e_CharsetGB2312,i.Charset.e_CharsetChineseBig5],l=n.GetDocument(),d=fn(e);if(1===d.length){var h=t,f=d[0].info;if(f){var g=t.GetTextState(n),p=i.Charset.values[f.charset]||i.Charset.e_CharsetANSI,v=f.styles;c&&(v|=64),s>=700&&(v|=262144),g.font=new i.Font(new i.WString(f.name),v,p,s);var m=g.font.IsEmbedded(l);if(g.font.IsSupportEmbedded(l)&&!m&&-1===u.indexOf(p)){var _=g.font.Embed(l);_.IsEmpty()||(g.font=_)}h.SetTextState(n,g,!1,400)}return h.SetText(new i.WString(d[0].text)),[h]}for(var y=pn(t,a,i.GraphicsObjectType.e_TypeText)||n.GetLastGraphicsObjectPosition(i.GraphicsObjectType.e_TypeAll),S=[],b=d.length;b--;){var I=t.Clone().GetTextObject();a.InsertGraphicsObject(y,I),S[b]=I}for(var A=0,P=d.length;A<P;A++){var D=S[A],E=D.GetTextState(n),C=d[A],w=C.text,k=C.info,T=void 0;if(E.origin_position=new i.PointF(E.origin_position.x+o,E.origin_position.y),k){T=new i.WString(k.name);var F=i.Charset.values[k.charset]||i.Charset.e_CharsetANSI,G=k.styles;c&&(G|=64),s>=700&&(G|=262144),E.font=new i.Font(T,G,F,s);var R=E.font.IsEmbedded(l);if(E.font.IsSupportEmbedded(l)&&!R&&-1===u.indexOf(F)){var x=E.font.Embed(l);x.IsEmpty()||(E.font=x)}(0,ee.Z)(T)}D.SetTextState(n,E,!1,400),T=new i.WString(w),D.SetText(T);var O=D.GetRect();o+=O.right-O.left+1,(0,ee.Z)(T,E.origin_position)}return S}var _n=function(e){function n(e,r,i,a){var o;if((0,t._)(this,n),(o=(0,V._)(this,n,[e,r,i,a])).matrix=e.GetMatrix(),!o.isParentPage()){var s=o.parent.getMatrix();o.matrix.Concat(s,!1)}return o.graphicsObject=e.GetFormXObject(),o}return(0,Z._)(n,e),(0,r._)(n,[{key:"getMatrix",value:function(){return this.matrix}},{key:"getGraphicsObjectsInRect",value:function(e,t,n){for(var r=this.graphicsObject.GetGraphicsObjects(),i=this.engine.GraphicsObjectType.e_TypeAll,a=[],o=r.GetFirstGraphicsObjectPosition(i);o;){var s=r.GetGraphicsObject(o),u=s.GetRect();if(this.matrix.TransformRect(u),e.Contains(u)){var l=n.get(s,this.c_page,this),d=l.getType();if(t!=d&&0!=t&&5!=d);else{if(0==t&&targetType<4)a.push(element);else if(0==t&&targetType>3)continue;if(d===t)a.push(l);else if(5===d){var h;(h=a).push.apply(h,(0,c._)(l.getGraphicsObjectsInRect(e,t,n)))}}}o=r.GetNextGraphicsObjectPosition(o,i)}return a}},{key:"getGraphicsObjectAtPoint",value:function(e,t,n,r){for(var i=this.graphicsObject.GetGraphicsObjects(),a=this.engine.GraphicsObjectType.e_TypeAll,o=i.GetFirstGraphicsObjectPosition(a);o;){var s=i.GetGraphicsObject(o),c=s.GetRect();if(this.matrix.TransformRect(c),c.Contains(e,t)){var u=r.get(s,this.c_page,this),l=s.GetType().value;if(l===n)return u;if(5===l)return u.getGraphicsObjectAtPoint(e,t,n,r)}o=i.GetNextGraphicsObjectPosition(o,a)}return null}},{key:"getGraphicsObjectsAtPoint",value:function(e,t,n,r,i){for(var a=[],o=this.graphicsObject.GetGraphicsObjects(),s=this.engine.GraphicsObjectType.e_TypeAll,c=o.GetFirstGraphicsObjectPosition(s);c;){var u=o.GetGraphicsObject(c),l=u.GetRect();if(this.matrix.TransformRect(l),l.Contains(e,t)){var d=i.get(u,this.c_page,this),h=u.GetType().value;5===h?a=a.concat(d.getGraphicsObjectsAtPoint(e,t,n,r,i)):h!==n&&0!=n||a.push(d)}c=o.GetNextGraphicsObjectPosition(c,s)}return a}},{key:"toJson",value:function(){return null}}]),n}(un),yn=function(e){function n(e,r,i,a,o){var s;return(0,t._)(this,n),(s=(0,V._)(this,n,[e,r,i,a,o])).graphicsObject=e.GetPathObject(),s}return(0,Z._)(n,e),(0,r._)(n,[{key:"toJson",value:function(){for(var e=this.graphicsObject,t=(0,J._)((0,Y._)(n.prototype),"toJson",this).call(this),r=this.graphicsObject.GetPathData(),i=r.GetPointCount(),a=[],o=0;o<i;o++){var s=r.GetPoint(o);a.push({x:s.x,y:s.y,type:r.GetPointType(o).value})}var c={fillMode:e.GetFillMode().value,strokeState:e.GetStrokeState(),path:a,needStroke:e.GetStrokeState()};return Object.assign(c,t)}},{key:"setBorderColor",value:function(e){return this.graphicsObject.SetStrokeState(0!==e),(0,J._)((0,Y._)(n.prototype),"setBorderColor",this).call(this,e)}},{key:"setFillColor",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(0===e)this.graphicsObject.SetFillColor(4278190080),this.graphicsObject.SetFillMode(this.engine.FillMode.e_FillModeNone);else{var n=255*(this.opacity||this.graphicsObject.GetFillOpacity())|0;this.graphicsObject.SetFillColor((16777215&e|n<<24)>>>0),this.graphicsObject.SetFillMode(this.engine.FillMode.e_FillModeWinding)}return t&&this.c_page.GenerateContent(),this.toJson()}},{key:"setOpacity",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.opacity=e,(0,J._)((0,Y._)(n.prototype),"setOpacity",this).call(this,e,t)}},{key:"isPointInLine",value:function(e,t){var n,r,i,o,s,c,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,l=this.graphicsObject.GetPathData(),d=l.GetPointCount(),h=this.graphicsObject.GetMatrix();if((0,a._)(this.parent,_n)){var f=this.parent.graphicsObject.GetMatrix();f.Concat(h.a,h.b,h.c,h.d,h.e,h.f,!1),h.delete(),h=f}for(var g=[],p=0;p<d;p++){var v=l.GetPoint(p);switch(v=h.TransformPoint(v.x,v.y),l.GetPointType(p).value){case 1:r=n=[v.x,v.y];break;case 2:o=(i=[v.x,v.y])[0]-r[0],s=i[1]-r[1],c=Math.max(Math.abs(o),Math.abs(s));for(var m=0;m<c;m++){if(Sn([e,t],[r[0]+o*m/c,r[1]+s*m/c])<u)return!0}r=i;break;case 3:o=r[0]-n[0],s=r[1]-n[1],c=Math.max(Math.abs(o),Math.abs(s));for(var _=0;_<c;_++){if(Sn([e,t],[n[0]+o*_/c,n[1]+s*_/c])<u)return!0}n=r=[];case 4:case 5:var y=[v.x,v.y];if(g.push(y),c=Math.ceil(Math.max(Math.abs(v.x-r[0]),Math.abs(v.y-r[1]))),3==g.length){for(var S=0;S<c;S++){if(Sn([e,t],bn(S/c,r,g[0],g[1],g[2]))<u)return!0}g=[],r=y}}}return!1}}],[{key:"create",value:function(e,t,n,r,i){var a=r.PathObject.Create();try{var o,s=new r.Path,c=[],u=!0,l=!1,d=void 0;try{for(var h,f=e.points[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var g=h.value;switch(g[0]){case"m":o=new r.PointF(g[1],g[2]),s.MoveTo(o),o.delete();break;case"l":o=new r.PointF(g[1],g[2]),s.LineTo(o),o.delete();break;case"c":c.push(new r.PointF(g[1],g[2])),3==c.length&&(s.CubicBezierTo(c[0],c[1],c[2]),c.length=0);break;case"h":s.CloseFigure()}}}catch(e){l=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(l)throw d}}(0,ee.Z)(c),a.SetPathData(s),s.delete(),a.SetStrokeColor(4278190080);var p=a.GetGraphState();p.line_width=e.borderWidth||1,a.SetGraphState(p);var v=t.GetLastGraphicsObjectPosition(r.GraphicsObjectType.e_TypeAll);t.InsertGraphicsObject(v,a),t.GenerateContent(),t.StartParse(0,null,!0),v=t.GetLastGraphicsObjectPosition(r.GraphicsObjectType.e_TypeAll),a=t.GetGraphicsObject(v)}catch(e){isNaN(e)||(e=this.engine.getErrorCode(e)),console.warn(e)}return i.get(a,t,n)}}]),n}(un);function Sn(e,t){var n=t[1]-e[1],r=t[0]-e[0];return Math.sqrt(r*r+n*n)}function bn(e,t,n,r,i){var a=[1,1],o=1-e;return a[0]=t[0]*o*o*o+3*n[0]*e*o*o+3*r[0]*e*e*o+i[0]*e*e*e,a[1]=t[1]*o*o*o+3*n[1]*e*o*o+3*r[1]*e*e*o+i[1]*e*e*e,a}var In=function(e){function n(e,r,i,a){var o;return(0,t._)(this,n),(o=(0,V._)(this,n,[e,r,i,a])).imageObject=e.GetImageObject(),o}return(0,Z._)(n,e),(0,r._)(n,[{key:"setRotation",value:function(e){var t=e*Math.PI/180,n=this.graphicsObject.GetRect(),r=(n.right+n.left)/2,i=(n.top+n.bottom)/2,a=new this.engine.Matrix;return a.RotateAt(-t,-r,-i,0),this.graphicsObject.Transform(a,!0),this.c_page.GenerateContent(),a.delete(),this.toJson()}},{key:"getStream",value:function(){var e=this.engine,t=this.imageObject.GetStream();if(t){var n=t.GetDataSize(!1);if(!(n<=0)){var r=e._malloc(n);t.GetData(!1,n,r);var i=Bt(e,r,n);return e._free(r),i}}}}],[{key:"create",value:function(e,t,n,r,i){var a=r.ImageObject.Create(n.doc);try{var o=Tt.Z.createImage(r,e.buffer);a.SetImage(o,0);var s=a.GetMatrix(),c=e.rect,u=c.left,l=c.right,d=c.top,h=c.bottom;s.a=l-u,s.d=d-h,s.Translate(u,h,0),a.SetMatrix(s);var f=t.GetLastGraphicsObjectPosition(r.GraphicsObjectType.e_TypeAll);t.InsertGraphicsObject(f,a),t.GenerateContent(),t.StartParse(0,null,!0),f=t.GetLastGraphicsObjectPosition(r.GraphicsObjectType.e_TypeAll),a=t.GetGraphicsObject(f)}catch(e){isNaN(e)||(e=this.engine.getErrorCode(e)),console.warn(e)}return i.get(a,t,n)}}]),n}(un),An=function(){function e(n,r){(0,t._)(this,e),this.engine=n,this.jr=r}return(0,r._)(e,[{key:"get",value:function(e,t,n){var r=this.engine,i=r.GraphicsObjectType;switch(e.GetType()){case i.e_TypeText:return new dn(e,t,n,r,this.jr);case i.e_TypePath:return new yn(e,t,n,r,this.jr);case i.e_TypeImage:return new In(e,t,n,r,this.jr);case i.e_TypeFormXObject:return new _n(e,t,n,r,this.jr);default:return new un(e,t,n,r,this.jr)}}},{key:"create",value:function(e,t,n){var r=this.engine,i=r.GraphicsObjectType;switch(e.type){case i.e_TypeText.value:return dn.create(e,t,n,r,this);case i.e_TypePath.value:return yn.create(e,t,n,r,this);case i.e_TypeImage.value:return In.create(e,t,n,r,this);default:return}}}]),e}();const Pn="21f52e821b73a0c9f2dc68330563b8e4";__webpack_require__(952);var Dn=navigator.userAgent,En=Dn.toLowerCase(),Cn=/macintosh|mac os x/.test(En),wn=/ipad|iphone/.test(En),kn=parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(Dn)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_","")),Tn=!0;function Fn(){return Tn}function Gn(e){return e>>16|e>>8<<8|(e|0)<<16}function Rn(e){var t=function(e){var t=e.toString(16).toUpperCase();return 1===t.length?"0"+t:t};return"#"+t(255&e)+t(e>>8&255)+t(e>>16&255)}function xn(e){return(parseInt(e.slice(1,3),16)|0)+(parseInt(e.slice(3,5),16)<<8)+(parseInt(e.slice(5,7),16)<<16)}(wn||Cn)&&kn<11&&(Tn=!1),Tn=!(!Tn||"object"!=("undefined"==typeof WebAssembly?"undefined":(0,u._)(WebAssembly)));var On,Mn=function(e,t){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=new e.FloatArray;if(Array.isArray(t))t.forEach(function(e){return r.Add(e)});else{var i=((16711680&t)>>16)/255,a=((65280&t)>>8)/255,o=(255&t)/255;r.Add(i),r.Add(a),r.Add(o)}n||(n=1);var s=new e.ColorSpace({value:n}),c=new e.Color(s);return c.SetValue(r),c}(e,t.value,t.space)};function Nn(e,t,n,r){return n.map(function(n){var i=n.value;switch(n.type){case"EditorPage":var a,o=i<0?0:i;if(t.editPages[o])a=t.editPages[o];else{var s,c=t.doc.pageIndexMap[o];if(c.isVirtual)return null;s=c?c.page:t.doc.doc.GetPage(o),a=t.editPages[o]=r.Create(s,100)}return i>=0&&(t.lastEditorPage=a),a;case"PointF":return new e.PointF(i[0],i[1]);case"Image":return Tt.Z.createImage(e,i,1);case"RectF":return new e.CFX_FloatRect(i.left,i.bottom,i.right,i.top);case"ShadingColorArray":return function(e,t){var n=new e.ShadingColorArray,r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value,u=new e.peShadingColor;u.from=c.from,u.to=c.to,u.from_color=xn(c.fromColor),u.to_color=xn(c.toColor),n.Add(u)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,i);case"PageCenterAlignmentType":case"GraphicsObjectAlignmentType":case"RenderingOrder":case"DrawType":case"GraphicsObjectFilter":case"WritingDirection":case"LineCap":case"LineJoin":case"JoinSpiltOperationType":case"FontOperationType":case"NumberingType":case"BulletType":case"TextMode":return{value:i};case"FindOption":var u=new e.FindOption;return u.Set(1&i,2&i,4&i,8&i),u;case"Int32Array":var l=new e.Int32Array;return i.forEach(function(e){return l.Add(e)}),l;case"FloatArray":var d=new e.FloatArray;return i.forEach(function(e){return d.Add(e)}),d;case"WString":return(0,$.Dp)(e,i);case"Color":return Mn(e,n)}return n})}function Bn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(t){setTimeout(function(){t()},e)})}var Ln={Release:function(){},TextChanged:function(){},IsShiftKeyDown:function(){},IsControlKeyDown:function(){},GetPageWindow:function(e){var t=e.GetPage();return t.IsEmpty()?0:t.GetIndex()+1e3},GetGeneralTextStyle:function(){return new On.GeneralTextStyleStruct}},jn={Release:function(){},OnSelectionChange:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];postMessage({workflow:"out",type:"selectionChange"})},KillTimer:function(e){postMessage({workflow:"out",type:"toggleCaret",msg:!1}),clearInterval(e)},OnCaretChange:function(e,t,n){postMessage({workflow:"out",type:"caretChange",msg:{charProp:{lineLeading:e.fLineLeading,lineIndent:e.fLineIndent,alignment:e.nAlignment,enableSoftReturn:e.bEnableSoftReturn,rtl:e.bRTL,secSpace:e.fSecSpace},wordProp:{fontSize:t.fFontSize,wordColor:Rn(t.dwWordColor),strokeColor:Rn(t.dwStrokeColor),scriptType:t.nScriptType,wordStyle:t.nWordStyle,charSpace:t.fCharSpace,horzScale:t.nHorzScale,wordSpace:t.fWordSpace,xOffset:t.fXOffset,yOffset:t.fYOffset,renderingMode:t.nRenderingMode,lineWidth:t.fLineWidth,charCode:t.dwCharCode,alphal:t.nAlphal/255,isCross:Boolean(4&t.nWordStyle),isUnderline:Boolean(2&t.nWordStyle),isBold:Boolean(262144&t.nWordStyle||11===t.nRenderingMode),isItalic:Boolean(64&t.nWordStyle)},fontName:n}})},OnCursorChange:function(e,t){postMessage({workflow:"out",type:"cursorChange",msg:t.value})},OnEnterEdit:function(e,t){return postMessage({workflow:"out",type:"enterEdit",msg:t.value}),!1},OnProcessEdit:function(e,t){return postMessage({workflow:"out",type:"processEdit",msg:t.value}),!1},OnContentChange:function(e,t,n){return postMessage({workflow:"out",type:"contentChange"}),!1},OnContentChangeStart:function(e,t,n){for(var r=0;r<n.GetSize();r++){var i=n.GetAt(r).GetFormContainer();1==e.value&&i&&(jn.formObjs=jn.formObjs||[],jn.formObjs.push(i))}var a=Jn(n),o=t.GetPage().GetIndex();postMessage({workflow:"out",type:"contentChange",msg:{type:e.value,graphicsObject:a,pageIndex:o,stage:"start"}})},OnContentChangeEnd:function(e,t,n,r){var i=n.GetSize(),a=t.GetPage();if(i>0){for(var o=0;o<i;o++){var s=n.GetAt(o).GetFormContainer();s&&s.GetGraphicsObjects().GenerateContent()}a.GenerateContent()}if(1==e.value&&jn.formObjs){var c=!0,u=!1,l=void 0;try{for(var d,h=jn.formObjs[Symbol.iterator]();!(c=(d=h.next()).done);c=!0){d.value.GetGraphicsObjects().GenerateContent()}}catch(e){u=!0,l=e}finally{try{c||null==h.return||h.return()}finally{if(u)throw l}}jn.formObjs=[]}var f=Jn(n),g=a.GetIndex();if(jn.jrDoc){var p=jn.jrDoc.pageIndexMap[g];p&&p.releaseTextPageAndTextLinks()}postMessage({workflow:"out",type:"contentChange",msg:{type:e.value,graphicsObject:f,pageIndex:g,stage:"end"}})}},Un={Release:function(){},Show:function(e,t){postMessage({workflow:"out",type:"showTipMsg",msg:e})},MoveTo:function(e){postMessage({workflow:"out",type:"moveTip",msg:{x:e.x,y:e.y}})},SetTip:function(e,t){postMessage({workflow:"out",type:"setTipMsg",msg:e.toString()})}},Wn={},Hn={},Kn={Release:function(){},CreatePopupMenu:function(){var e=(Date.now()+1e3*Math.random()|0)%2147483647;return Wn[e]=[],e},CreatePopupSubMenu:function(){var e=(Date.now()+1e3*Math.random()|0)%2147483647;return Wn[e]=[],e},AppendMenuItem:function(e,t){if(t){t.value;if(12!==t.value){var n=t.constructor.name,r={name:n,enable:!0,isCheck:!0};Hn[n]=r,Wn[e].push(r)}}},AppendSubMenu:function(e,t,n){if(t){var r=t.constructor.name,i={name:r,enable:!0,isCheck:!0,subItems:Wn[n]};Hn[r]=i,Wn[e].push(i)}},RemoveMenuItem:function(e,t,n){},AppendSeparator:function(e){Wn[e].push({name:"-"})},EnableMenuItem:function(e,t,n,r){if(t){var i=t.constructor.name,a=Hn[i];a&&(a.enable=n)}},CheckMenuItem:function(e,t,n){if(t){var r=t.constructor.name;Hn[r].isCheck=n}},InsertMenuItem:function(e,t,n,r){},InsertSeparator:function(e,t){},DestroyMenu:function(e){Wn={}},IsMenuEnabled:function(e){return!0}},zn={Release:function(){},CanPasteGraphicObject:function(){},GetClipboardText:function(){return new On.WString(__webpack_require__.g.clipboardText||"")},SetClipboardText:function(e,t){var n=t.toString();__webpack_require__.g.clipboardText=n,postMessage({workflow:"out",type:"setClipboardText",msg:n})},IsFormatAvailable:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!0},PasteBitmap:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!0},CopyBitmap:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]},CopyGraphicObject:function(){},PasteGraphicObject:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]}},Vn=function(){function e(n,r,i,a){(0,t._)(this,e),On=n,this.setCallbacks(i),Ln.IsShiftKeyDown=i.IsShiftKeyDown,Ln.IsControlKeyDown=i.IsControlKeyDown;var o=n.EditPageContextCallback.implement(Ln),s=n.EditPageContext.Create(o);jn.OnInvalid=i.OnInvalid,jn.OnExitEdit=i.OnExitEdit,jn.SetTimerCallback=this.SetTimerCallback.bind(this),jn.jrDoc=r;var c=n.OperationNotifierCallback.implement(jn),u=n.TipsCallback.implement(Un),l=n.ClipboardCallback.implement(zn);s.SetOperationNotifierCallback(c),s.SetTipsCallback(u),s.SetClipboardCallback(l);var d=n.PopupMenuCallback.implement(Kn);s.SetPopupMenuCallback(d),a.length&&(s.SetRotateCtrlIcon(a[0]),s.SetBitmap(n.ImageResourceID.e_ImageResourceIDRedPoint,a[1]),s.SetBitmap(n.ImageResourceID.e_ImageResourceIDBluePoint,a[2]),s.SetBitmap(n.ImageResourceID.e_ImageResourceIDGreenPoint,a[3])),s.SetSystemDPI(96,96),this.context=s}return(0,r._)(e,[{key:"SetTimerCallback",value:function(e,t){var n=setInterval(function(){On.OnTimeout(t,n)},e);return postMessage({workflow:"out",type:"toggleCaret",msg:!0}),n}},{key:"setCallbacks",value:function(e){return this.callbacks=e,["GetRenderMatrix","GetClientRect","GetPageVisibleRect","GetPageRect","GetPageViewScale","GetDefaultEditorPage","GetVisibleEditorPages","GetLatestPDFPage","GetTemplate","GetToolbarFontName","GetString"].forEach(function(t){return Ln[t]=e[t]}),["OnInvalid","OnSetPropsAsDefault","OnAddUndo","OnUndoRedoBeginEdit","OnUndoRedoEndEdit","OnSelectionChange"].forEach(function(t){return jn[t]=e[t]}),Kn.TrackPopupMenu=function(t,n,r,i){return e.TrackPopupMenu(Wn[t],n,r,i)},["CopyGraphicObject","PasteGraphicObject","CanPasteGraphicObject"].forEach(function(t){return zn[t]=e[t]}),this.context}}]),e}();function Jn(e){var t={};if(e.GetSize()){var n=e.GetAt(0).GetGraphicsObject();t.type=n.GetType().value;var r=n.GetRect();t.rect={left:r.left,top:r.top,right:r.right,bottom:r.bottom}}return t}const Yn=Vn;var Zn=navigator.platform,qn=0;/^win/i.test(Zn)?qn=0:/^mac/i.test(Zn)?qn=1:(/^linux/i.test(Zn)||/^x11/i.test(Zn))&&(qn=2);const Xn=qn;var Qn=__webpack_require__(1696),$n=["alternatePresentations","author","baseURL","bookmarkRoot","calculate","collection","creationDate","creator","dataObjects","delay","dirty","disclosed","docID","documentFileName","dynamicXFAForm","external","filesize","hidden","hostContainer","icons","info","innerAppWindowRect","innerDocWindowRect","isModal","keywords","layout","media","metadata","modDate","mouseX","mouseY","noautocomplete","numFields","numPages","numTemplates","path","outerAppWindowRect","outerDocWindowRect","pageNum","pageWindowRect","permStatusReady","producer","requiresFullSave","securityHandler","selectedAnnots","sounds","spellDictionaryOrder","spellLanguageOrder","subject","templates","title","viewState","xfa","XFAForeground","zoom","zoomType"],er=["addAnnot","addField","addIcon","addLink","addRecipientListCryptFilter","addRequirement","addScript","addThumbnails","addWatermarkFromFile","addWatermarkFromText","addWeblinks","applyRedactions","bringToFront","calculateNow","certifyInvisibleSign","closeDoc","colorConvertPage","createDataObject","createTemplate","deletePages","deleteSound","embedDocAsDataObject","embedOutputIntent","encryptForRecipients","encryptUsingPolicy","exportAsFDF","exportAsFDFStr","exportAsText","exportAsXFDF","exportAsXFDFStr","exportDataObject","exportXFAData","extractPages","flattenPages","getAnnot","getAnnotRichMedia","getAnnot3D","getAnnots","getAnnotsRichMedia","getAnnots3D","getColorConvertAction","getDataObject","getDataObjectContents","getField","getIcon","getLegalWarnings","getLinks","getNthFieldName","getNthTemplate","getOCGs","getOCGOrder","getPageBox","getPageLabel","getPageNthWord","getPageNthWordQuads","getPageNumWords","getPageRotation","getPageTransition","getPreflightAuditTrail","getPrintParams","getSound","getTemplate","getURL","getUserUnitSize","gotoNamedDest","importAnFDF","importAnXFDF","importDataObject","importIcon","importSound","importTextData","importXFAData","mailDoc","mailForm","movePage","newPage","openDataObject","preflight","print","removeDataObject","removeField","removeIcon","removeLinks","removePreflightAuditTrail","removeRequirement","removeScript","removeThumbnails","removeWeblinks","replacePages","resetForm","saveAs","scroll","selectPageNthWord","setAction","setDataObjectContents","setOCGOrder","setPageAction","setPageBoxes","setPageLabels","setPageRotations","setPageTabOrder","setPageTransitions","spawnPageFromTemplate","submitForm","syncAnnotScan","timestampSign","validatePreflightAuditTrail"];var tr=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],nr=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,3104,541,1507,4938,6,4191],rr="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",ir={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},ar="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",or={5:ar,"5module":ar+" export import",6:ar+" const class extends export import super"},sr=/^in(stanceof)?$/,cr=new RegExp("["+rr+"]"),ur=new RegExp("["+rr+"-----------------------------------------------------------------------------------------------------------------------------------------------------]");function lr(e,t){for(var n=65536,r=0;r<t.length;r+=2){if((n+=t[r])>e)return!1;if((n+=t[r+1])>=e)return!0}return!1}function dr(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&cr.test(String.fromCharCode(e)):!1!==t&&lr(e,nr)))}function hr(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&ur.test(String.fromCharCode(e)):!1!==t&&(lr(e,nr)||lr(e,tr)))))}var fr=function(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function gr(e,t){return new fr(e,{beforeExpr:!0,binop:t})}var pr={beforeExpr:!0},vr={startsExpr:!0},mr={};function _r(e,t){return void 0===t&&(t={}),t.keyword=e,mr[e]=new fr(e,t)}var yr={num:new fr("num",vr),regexp:new fr("regexp",vr),string:new fr("string",vr),name:new fr("name",vr),privateId:new fr("privateId",vr),eof:new fr("eof"),bracketL:new fr("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new fr("]"),braceL:new fr("{",{beforeExpr:!0,startsExpr:!0}),braceR:new fr("}"),parenL:new fr("(",{beforeExpr:!0,startsExpr:!0}),parenR:new fr(")"),comma:new fr(",",pr),semi:new fr(";",pr),colon:new fr(":",pr),dot:new fr("."),question:new fr("?",pr),questionDot:new fr("?."),arrow:new fr("=>",pr),template:new fr("template"),invalidTemplate:new fr("invalidTemplate"),ellipsis:new fr("...",pr),backQuote:new fr("`",vr),dollarBraceL:new fr("${",{beforeExpr:!0,startsExpr:!0}),eq:new fr("=",{beforeExpr:!0,isAssign:!0}),assign:new fr("_=",{beforeExpr:!0,isAssign:!0}),incDec:new fr("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new fr("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:gr("||",1),logicalAND:gr("&&",2),bitwiseOR:gr("|",3),bitwiseXOR:gr("^",4),bitwiseAND:gr("&",5),equality:gr("==/!=/===/!==",6),relational:gr("</>/<=/>=",7),bitShift:gr("<</>>/>>>",8),plusMin:new fr("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:gr("%",10),star:gr("*",10),slash:gr("/",10),starstar:new fr("**",{beforeExpr:!0}),coalesce:gr("??",1),_break:_r("break"),_case:_r("case",pr),_catch:_r("catch"),_continue:_r("continue"),_debugger:_r("debugger"),_default:_r("default",pr),_do:_r("do",{isLoop:!0,beforeExpr:!0}),_else:_r("else",pr),_finally:_r("finally"),_for:_r("for",{isLoop:!0}),_function:_r("function",vr),_if:_r("if"),_return:_r("return",pr),_switch:_r("switch"),_throw:_r("throw",pr),_try:_r("try"),_var:_r("var"),_const:_r("const"),_while:_r("while",{isLoop:!0}),_with:_r("with"),_new:_r("new",{beforeExpr:!0,startsExpr:!0}),_this:_r("this",vr),_super:_r("super",vr),_class:_r("class",vr),_extends:_r("extends",pr),_export:_r("export"),_import:_r("import",vr),_null:_r("null",vr),_true:_r("true",vr),_false:_r("false",vr),_in:_r("in",{beforeExpr:!0,binop:7}),_instanceof:_r("instanceof",{beforeExpr:!0,binop:7}),_typeof:_r("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:_r("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:_r("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Sr=/\r\n?|\n|\u2028|\u2029/,br=new RegExp(Sr.source,"g");function Ir(e){return 10===e||13===e||8232===e||8233===e}function Ar(e,t,n){void 0===n&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(Ir(i))return r<n-1&&13===i&&10===e.charCodeAt(r+1)?r+2:r+1}return-1}var Pr=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Dr=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,Er=Object.prototype,Cr=Er.hasOwnProperty,wr=Er.toString,kr=Object.hasOwn||function(e,t){return Cr.call(e,t)},Tr=Array.isArray||function(e){return"[object Array]"===wr.call(e)};function Fr(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}function Gr(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}var Rr=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,xr=function(e,t){this.line=e,this.column=t};xr.prototype.offset=function(e){return new xr(this.line,this.column+e)};var Or=function(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)};function Mr(e,t){for(var n=1,r=0;;){var i=Ar(e,r,t);if(i<0)return new xr(n,t-r);++n,r=i}}var Nr={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Br=!1;function Lr(e){var t={};for(var n in Nr)t[n]=e&&kr(e,n)?e[n]:Nr[n];if("latest"===t.ecmaVersion?t.ecmaVersion=1e8:null==t.ecmaVersion?(!Br&&"object"==typeof console&&console.warn&&(Br=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),e&&null!=e.allowHashBang||(t.allowHashBang=t.ecmaVersion>=14),Tr(t.onToken)){var r=t.onToken;t.onToken=function(e){return r.push(e)}}return Tr(t.onComment)&&(t.onComment=function(e,t){return function(n,r,i,a,o,s){var c={type:n?"Block":"Line",value:r,start:i,end:a};e.locations&&(c.loc=new Or(this,o,s)),e.ranges&&(c.range=[i,a]),t.push(c)}}(t,t.onComment)),t}var jr=256;function Ur(e,t){return 2|(e?4:0)|(t?8:0)}var Wr=function(e,t,n){this.options=e=Lr(e),this.sourceFile=e.sourceFile,this.keywords=Fr(or[e.ecmaVersion>=6?6:"module"===e.sourceType?"5module":5]);var r="";!0!==e.allowReserved&&(r=ir[e.ecmaVersion>=6?6:5===e.ecmaVersion?5:3],"module"===e.sourceType&&(r+=" await")),this.reservedWords=Fr(r);var i=(r?r+" ":"")+ir.strict;this.reservedWordsStrict=Fr(i),this.reservedWordsStrictBind=Fr(i+" "+ir.strictBind),this.input=String(t),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Sr).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=yr.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null,this.privateNameStack=[]},Hr={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Wr.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},Hr.inFunction.get=function(){return(2&this.currentVarScope().flags)>0},Hr.inGenerator.get=function(){return(8&this.currentVarScope().flags)>0&&!this.currentVarScope().inClassFieldInit},Hr.inAsync.get=function(){return(4&this.currentVarScope().flags)>0&&!this.currentVarScope().inClassFieldInit},Hr.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&jr)return!1;if(2&t.flags)return(4&t.flags)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},Hr.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(64&t)>0||n||this.options.allowSuperOutsideMethod},Hr.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},Hr.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},Hr.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(258&t)>0||n},Hr.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&jr)>0},Wr.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this,r=0;r<e.length;r++)n=e[r](n);return n},Wr.parse=function(e,t){return new this(t,e).parse()},Wr.parseExpressionAt=function(e,t,n){var r=new this(n,e,t);return r.nextToken(),r.parseExpression()},Wr.tokenizer=function(e,t){return new this(t,e)},Object.defineProperties(Wr.prototype,Hr);var Kr=Wr.prototype,zr=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Kr.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){Dr.lastIndex=e,e+=Dr.exec(this.input)[0].length;var t=zr.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2])){Dr.lastIndex=e+t[0].length;var n=Dr.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return";"===i||"}"===i||Sr.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||"!"===i&&"="===this.input.charAt(r+1))}e+=t[0].length,Dr.lastIndex=e,e+=Dr.exec(this.input)[0].length,";"===this.input[e]&&e++}},Kr.eat=function(e){return this.type===e&&(this.next(),!0)},Kr.isContextual=function(e){return this.type===yr.name&&this.value===e&&!this.containsEsc},Kr.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},Kr.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},Kr.canInsertSemicolon=function(){return this.type===yr.eof||this.type===yr.braceR||Sr.test(this.input.slice(this.lastTokEnd,this.start))},Kr.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},Kr.semicolon=function(){this.eat(yr.semi)||this.insertSemicolon()||this.unexpected()},Kr.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},Kr.expect=function(e){this.eat(e)||this.unexpected()},Kr.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")};var Vr=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Kr.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}},Kr.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},Kr.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},Kr.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var Jr=Wr.prototype;Jr.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==yr.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var a=i[r];this.raiseRecoverable(this.undefinedExports[a].start,"Export '"+a+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var Yr={kind:"loop"},Zr={kind:"switch"};Jr.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Dr.lastIndex=this.pos;var t=Dr.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(91===r||92===r)return!0;if(e)return!1;if(123===r||r>55295&&r<56320)return!0;if(dr(r,!0)){for(var i=n+1;hr(r=this.input.charCodeAt(i),!0);)++i;if(92===r||r>55295&&r<56320)return!0;var a=this.input.slice(n,i);if(!sr.test(a))return!0}return!1},Jr.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Dr.lastIndex=this.pos;var e,t=Dr.exec(this.input),n=this.pos+t[0].length;return!(Sr.test(this.input.slice(this.pos,n))||"function"!==this.input.slice(n,n+8)||n+8!==this.input.length&&(hr(e=this.input.charCodeAt(n+8))||e>55295&&e<56320))},Jr.parseStatement=function(e,t,n){var r,i=this.type,a=this.startNode();switch(this.isLet(e)&&(i=yr._var,r="let"),i){case yr._break:case yr._continue:return this.parseBreakContinueStatement(a,i.keyword);case yr._debugger:return this.parseDebuggerStatement(a);case yr._do:return this.parseDoStatement(a);case yr._for:return this.parseForStatement(a);case yr._function:return e&&(this.strict||"if"!==e&&"label"!==e)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(a,!1,!e);case yr._class:return e&&this.unexpected(),this.parseClass(a,!0);case yr._if:return this.parseIfStatement(a);case yr._return:return this.parseReturnStatement(a);case yr._switch:return this.parseSwitchStatement(a);case yr._throw:return this.parseThrowStatement(a);case yr._try:return this.parseTryStatement(a);case yr._const:case yr._var:return r=r||this.value,e&&"var"!==r&&this.unexpected(),this.parseVarStatement(a,r);case yr._while:return this.parseWhileStatement(a);case yr._with:return this.parseWithStatement(a);case yr.braceL:return this.parseBlock(!0,a);case yr.semi:return this.parseEmptyStatement(a);case yr._export:case yr._import:if(this.options.ecmaVersion>10&&i===yr._import){Dr.lastIndex=this.pos;var o=Dr.exec(this.input),s=this.pos+o[0].length,c=this.input.charCodeAt(s);if(40===c||46===c)return this.parseExpressionStatement(a,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===yr._import?this.parseImport(a):this.parseExport(a,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(a,!0,!e);var u=this.value,l=this.parseExpression();return i===yr.name&&"Identifier"===l.type&&this.eat(yr.colon)?this.parseLabeledStatement(a,u,l,e):this.parseExpressionStatement(a,l)}},Jr.parseBreakContinueStatement=function(e,t){var n="break"===t;this.next(),this.eat(yr.semi)||this.insertSemicolon()?e.label=null:this.type!==yr.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==e.label||i.name===e.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(e.label&&n)break}}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},Jr.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},Jr.parseDoStatement=function(e){return this.next(),this.labels.push(Yr),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(yr._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(yr.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},Jr.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Yr),this.enterScope(0),this.expect(yr.parenL),this.type===yr.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===yr._var||this.type===yr._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===yr._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===r.declarations.length?(this.options.ecmaVersion>=9&&(this.type===yr._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var a=this.isContextual("let"),o=!1,s=new Vr,c=this.parseExpression(!(t>-1)||"await",s);return this.type===yr._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===yr._in?t>-1&&this.unexpected(t):e.await=t>-1),a&&o&&this.raise(c.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(c,!1,s),this.checkLValPattern(c),this.parseForIn(e,c)):(this.checkExpressionErrors(s,!0),t>-1&&this.unexpected(t),this.parseFor(e,c))},Jr.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,Xr|(n?0:Qr),!1,t)},Jr.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(yr._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},Jr.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(yr.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},Jr.parseSwitchStatement=function(e){var t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(yr.braceL),this.labels.push(Zr),this.enterScope(0);for(var n=!1;this.type!==yr.braceR;)if(this.type===yr._case||this.type===yr._default){var r=this.type===yr._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(yr.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},Jr.parseThrowStatement=function(e){return this.next(),Sr.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var qr=[];Jr.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===yr._catch){var t=this.startNode();if(this.next(),this.eat(yr.parenL)){t.param=this.parseBindingAtom();var n="Identifier"===t.param.type;this.enterScope(n?32:0),this.checkLValPattern(t.param,n?4:2),this.expect(yr.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0);t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(yr._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},Jr.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},Jr.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(Yr),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},Jr.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},Jr.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},Jr.parseLabeledStatement=function(e,t,n,r){for(var i=0,a=this.labels;i<a.length;i+=1){a[i].name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var o=this.type.isLoop?"loop":this.type===yr._switch?"switch":null,s=this.labels.length-1;s>=0;s--){var c=this.labels[s];if(c.statementStart!==e.start)break;c.statementStart=this.start,c.kind=o}return this.labels.push({name:t,kind:o,statementStart:this.start}),e.body=this.parseStatement(r?-1===r.indexOf("label")?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")},Jr.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},Jr.parseBlock=function(e,t,n){for(void 0===e&&(e=!0),void 0===t&&(t=this.startNode()),t.body=[],this.expect(yr.braceL),e&&this.enterScope(0);this.type!==yr.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")},Jr.parseFor=function(e,t){return e.init=t,this.expect(yr.semi),e.test=this.type===yr.semi?null:this.parseExpression(),this.expect(yr.semi),e.update=this.type===yr.parenR?null:this.parseExpression(),this.expect(yr.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")},Jr.parseForIn=function(e,t){var n=this.type===yr._in;return this.next(),"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==t.kind||"Identifier"!==t.declarations[0].id.type)&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(yr.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")},Jr.parseVar=function(e,t,n){for(e.declarations=[],e.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(yr.eq)?r.init=this.parseMaybeAssign(t):"const"!==n||this.type===yr._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||t&&(this.type===yr._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(yr.comma))break}return e},Jr.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,"var"===t?1:2,!1)};var Xr=1,Qr=2;function $r(e,t){var n=t.key.name,r=e[n],i="true";return"MethodDefinition"!==t.type||"get"!==t.kind&&"set"!==t.kind||(i=(t.static?"s":"i")+t.kind),"iget"===r&&"iset"===i||"iset"===r&&"iget"===i||"sget"===r&&"sset"===i||"sset"===r&&"sget"===i?(e[n]="true",!1):!!r||(e[n]=i,!1)}function ei(e,t){var n=e.computed,r=e.key;return!n&&("Identifier"===r.type&&r.name===t||"Literal"===r.type&&r.value===t)}Jr.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===yr.star&&t&Qr&&this.unexpected(),e.generator=this.eat(yr.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&Xr&&(e.id=4&t&&this.type!==yr.name?null:this.parseIdent(),!e.id||t&Qr||this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?1:2:3));var a=this.yieldPos,o=this.awaitPos,s=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Ur(e.async,e.generator)),t&Xr||(e.id=this.type===yr.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=a,this.awaitPos=o,this.awaitIdentPos=s,this.finishNode(e,t&Xr?"FunctionDeclaration":"FunctionExpression")},Jr.parseFunctionParams=function(e){this.expect(yr.parenL),e.params=this.parseBindingList(yr.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},Jr.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),a=!1;for(i.body=[],this.expect(yr.braceL);this.type!==yr.braceR;){var o=this.parseClassElement(null!==e.superClass);o&&(i.body.push(o),"MethodDefinition"===o.type&&"constructor"===o.kind?(a&&this.raise(o.start,"Duplicate constructor in the same class"),a=!0):o.key&&"PrivateIdentifier"===o.key.type&&$r(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},Jr.parseClassElement=function(e){if(this.eat(yr.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,a=!1,o="method",s=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(yr.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===yr.star?s=!0:r="static"}if(n.static=s,!r&&t>=8&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.type!==yr.star||this.canInsertSemicolon()?r="async":a=!0),!r&&(t>=9||!a)&&this.eat(yr.star)&&(i=!0),!r&&!a&&!i){var c=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=c:r=c)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===yr.parenL||"method"!==o||i||a){var u=!n.static&&ei(n,"constructor"),l=u&&e;u&&"method"!==o&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=u?"constructor":o,this.parseClassMethod(n,i,a,l)}else this.parseClassField(n);return n},Jr.isClassElementNameStart=function(){return this.type===yr.name||this.type===yr.privateId||this.type===yr.num||this.type===yr.string||this.type===yr.bracketL||this.type.keyword},Jr.parseClassElementName=function(e){this.type===yr.privateId?("constructor"===this.value&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)},Jr.parseClassMethod=function(e,t,n,r){var i=e.key;"constructor"===e.kind?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&ei(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var a=e.value=this.parseMethod(t,n,r);return"get"===e.kind&&0!==a.params.length&&this.raiseRecoverable(a.start,"getter should have no params"),"set"===e.kind&&1!==a.params.length&&this.raiseRecoverable(a.start,"setter should have exactly one param"),"set"===e.kind&&"RestElement"===a.params[0].type&&this.raiseRecoverable(a.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")},Jr.parseClassField=function(e){if(ei(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&ei(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(yr.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")},Jr.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(320);this.type!==yr.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")},Jr.parseClassId=function(e,t){this.type===yr.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,2,!1)):(!0===t&&this.unexpected(),e.id=null)},Jr.parseClassSuper=function(e){e.superClass=this.eat(yr._extends)?this.parseExprSubscripts(null,!1):null},Jr.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared},Jr.exitClassBody=function(){for(var e=this.privateNameStack.pop(),t=e.declared,n=e.used,r=this.privateNameStack.length,i=0===r?null:this.privateNameStack[r-1],a=0;a<n.length;++a){var o=n[a];kr(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}},Jr.parseExport=function(e,t){if(this.next(),this.eat(yr.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==yr.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(yr._default)){var n;if(this.checkExport(t,"default",this.lastTokStart),this.type===yr._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),e.declaration=this.parseFunction(r,4|Xr,!1,n)}else if(this.type===yr._class){var i=this.startNode();e.declaration=this.parseClass(i,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==yr.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var a=0,o=e.specifiers;a<o.length;a+=1){var s=o[a];this.checkUnreserved(s.local),this.checkLocalExport(s.local),"Literal"===s.local.type&&this.raise(s.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},Jr.checkExport=function(e,t,n){e&&("string"!=typeof t&&(t="Identifier"===t.type?t.name:t.value),kr(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)},Jr.checkPatternExport=function(e,t){var n=t.type;if("Identifier"===n)this.checkExport(e,t,t.start);else if("ObjectPattern"===n)for(var r=0,i=t.properties;r<i.length;r+=1){var a=i[r];this.checkPatternExport(e,a)}else if("ArrayPattern"===n)for(var o=0,s=t.elements;o<s.length;o+=1){var c=s[o];c&&this.checkPatternExport(e,c)}else"Property"===n?this.checkPatternExport(e,t.value):"AssignmentPattern"===n?this.checkPatternExport(e,t.left):"RestElement"===n?this.checkPatternExport(e,t.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(e,t.expression)},Jr.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}},Jr.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},Jr.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(yr.braceL);!this.eat(yr.braceR);){if(n)n=!1;else if(this.expect(yr.comma),this.afterTrailingComma(yr.braceR))break;var r=this.startNode();r.local=this.parseModuleExportName(),r.exported=this.eatContextual("as")?this.parseModuleExportName():r.local,this.checkExport(e,r.exported,r.exported.start),t.push(this.finishNode(r,"ExportSpecifier"))}return t},Jr.parseImport=function(e){return this.next(),this.type===yr.string?(e.specifiers=qr,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===yr.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},Jr.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===yr.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLValSimple(n.local,2),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(yr.comma))return e}if(this.type===yr.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLValSimple(r.local,2),e.push(this.finishNode(r,"ImportNamespaceSpecifier")),e}for(this.expect(yr.braceL);!this.eat(yr.braceR);){if(t)t=!1;else if(this.expect(yr.comma),this.afterTrailingComma(yr.braceR))break;var i=this.startNode();i.imported=this.parseModuleExportName(),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLValSimple(i.local,2),e.push(this.finishNode(i,"ImportSpecifier"))}return e},Jr.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===yr.string){var e=this.parseLiteral(this.value);return Rr.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)},Jr.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},Jr.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])};var ti=Wr.prototype;ti.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var a=i[r];this.toAssignable(a,t),"RestElement"!==a.type||"ArrayPattern"!==a.argument.type&&"ObjectPattern"!==a.argument.type||this.raise(a.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e},ti.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var a=e[n-1];6===this.options.ecmaVersion&&t&&a&&"RestElement"===a.type&&"Identifier"!==a.argument.type&&this.unexpected(a.argument.start)}return e},ti.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},ti.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==yr.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},ti.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case yr.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(yr.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case yr.braceL:return this.parseObj(!0)}return this.parseIdent()},ti.parseBindingList=function(e,t,n){for(var r=[],i=!0;!this.eat(e);)if(i?i=!1:this.expect(yr.comma),t&&this.type===yr.comma)r.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===yr.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),r.push(a),this.type===yr.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}var o=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(o),r.push(o)}return r},ti.parseBindingListItem=function(e){return e},ti.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(yr.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},ti.checkLValSimple=function(e,t,n){void 0===t&&(t=0);var r=0!==t;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(2===t&&"let"===e.name&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(kr(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),5!==t&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}},ti.checkLValPattern=function(e,t,n){switch(void 0===t&&(t=0),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var a=i[r];this.checkLValInnerPattern(a,t,n)}break;case"ArrayPattern":for(var o=0,s=e.elements;o<s.length;o+=1){var c=s[o];c&&this.checkLValInnerPattern(c,t,n)}break;default:this.checkLValSimple(e,t,n)}},ti.checkLValInnerPattern=function(e,t,n){switch(void 0===t&&(t=0),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var ni=function(e,t,n,r,i){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=r,this.generator=!!i},ri={b_stat:new ni("{",!1),b_expr:new ni("{",!0),b_tmpl:new ni("${",!1),p_stat:new ni("(",!1),p_expr:new ni("(",!0),q_tmpl:new ni("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new ni("function",!1),f_expr:new ni("function",!0),f_expr_gen:new ni("function",!0,!1,null,!0),f_gen:new ni("function",!1,!1,null,!0)},ii=Wr.prototype;ii.initialContext=function(){return[ri.b_stat]},ii.curContext=function(){return this.context[this.context.length-1]},ii.braceIsBlock=function(e){var t=this.curContext();return t===ri.f_expr||t===ri.f_stat||(e!==yr.colon||t!==ri.b_stat&&t!==ri.b_expr?e===yr._return||e===yr.name&&this.exprAllowed?Sr.test(this.input.slice(this.lastTokEnd,this.start)):e===yr._else||e===yr.semi||e===yr.eof||e===yr.parenR||e===yr.arrow||(e===yr.braceL?t===ri.b_stat:e!==yr._var&&e!==yr._const&&e!==yr.name&&!this.exprAllowed):!t.isExpr)},ii.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},ii.updateContext=function(e){var t,n=this.type;n.keyword&&e===yr.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},ii.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)},yr.parenR.updateContext=yr.braceR.updateContext=function(){if(1!==this.context.length){var e=this.context.pop();e===ri.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}else this.exprAllowed=!0},yr.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?ri.b_stat:ri.b_expr),this.exprAllowed=!0},yr.dollarBraceL.updateContext=function(){this.context.push(ri.b_tmpl),this.exprAllowed=!0},yr.parenL.updateContext=function(e){var t=e===yr._if||e===yr._for||e===yr._with||e===yr._while;this.context.push(t?ri.p_stat:ri.p_expr),this.exprAllowed=!0},yr.incDec.updateContext=function(){},yr._function.updateContext=yr._class.updateContext=function(e){!e.beforeExpr||e===yr._else||e===yr.semi&&this.curContext()!==ri.p_stat||e===yr._return&&Sr.test(this.input.slice(this.lastTokEnd,this.start))||(e===yr.colon||e===yr.braceL)&&this.curContext()===ri.b_stat?this.context.push(ri.f_stat):this.context.push(ri.f_expr),this.exprAllowed=!1},yr.backQuote.updateContext=function(){this.curContext()===ri.q_tmpl?this.context.pop():this.context.push(ri.q_tmpl),this.exprAllowed=!1},yr.star.updateContext=function(e){if(e===yr._function){var t=this.context.length-1;this.context[t]===ri.f_expr?this.context[t]=ri.f_expr_gen:this.context[t]=ri.f_gen}this.exprAllowed=!0},yr.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==yr.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var ai=Wr.prototype;function oi(e){return"MemberExpression"===e.type&&"PrivateIdentifier"===e.property.type||"ChainExpression"===e.type&&oi(e.expression)}ai.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===e.type||this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r,i=e.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var a=e.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===a&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=i.start):this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);else{var o=t[r="$"+r];if(o)("init"===a?this.strict&&o.init||o.get||o.set:o.init||o[a])&&this.raiseRecoverable(i.start,"Redefinition of property");else o=t[r]={init:!1,get:!1,set:!1};o[a]=!0}}},ai.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===yr.comma){var a=this.startNodeAt(n,r);for(a.expressions=[i];this.eat(yr.comma);)a.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(a,"SequenceExpression")}return i},ai.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,a=-1,o=-1;t?(i=t.parenthesizedAssign,a=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new Vr,r=!0);var s=this.start,c=this.startLoc;this.type!==yr.parenL&&this.type!==yr.name||(this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===e);var u=this.parseMaybeConditional(e,t);if(n&&(u=n.call(this,u,s,c)),this.type.isAssign){var l=this.startNodeAt(s,c);return l.operator=this.value,this.type===yr.eq&&(u=this.toAssignable(u,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=u.start&&(t.shorthandAssign=-1),this.type===yr.eq?this.checkLValPattern(u):this.checkLValSimple(u),l.left=u,this.next(),l.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(l,"AssignmentExpression")}return r&&this.checkExpressionErrors(t,!0),i>-1&&(t.parenthesizedAssign=i),a>-1&&(t.trailingComma=a),u},ai.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(yr.question)){var a=this.startNodeAt(n,r);return a.test=i,a.consequent=this.parseMaybeAssign(),this.expect(yr.colon),a.alternate=this.parseMaybeAssign(e),this.finishNode(a,"ConditionalExpression")}return i},ai.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,e)},ai.parseExprOp=function(e,t,n,r,i){var a=this.type.binop;if(null!=a&&(!i||this.type!==yr._in)&&a>r){var o=this.type===yr.logicalOR||this.type===yr.logicalAND,s=this.type===yr.coalesce;s&&(a=yr.logicalAND.binop);var c=this.value;this.next();var u=this.start,l=this.startLoc,d=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),u,l,a,i),h=this.buildBinary(t,n,e,d,c,o||s);return(o&&this.type===yr.coalesce||s&&(this.type===yr.logicalOR||this.type===yr.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(h,t,n,r,i)}return e},ai.buildBinary=function(e,t,n,r,i,a){"PrivateIdentifier"===r.type&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,a?"LogicalExpression":"BinaryExpression")},ai.parseMaybeUnary=function(e,t,n,r){var i,a=this.start,o=this.startLoc;if(this.isContextual("await")&&this.canAwait)i=this.parseAwait(r),t=!0;else if(this.type.prefix){var s=this.startNode(),c=this.type===yr.incDec;s.operator=this.value,s.prefix=!0,this.next(),s.argument=this.parseMaybeUnary(null,!0,c,r),this.checkExpressionErrors(e,!0),c?this.checkLValSimple(s.argument):this.strict&&"delete"===s.operator&&"Identifier"===s.argument.type?this.raiseRecoverable(s.start,"Deleting local variable in strict mode"):"delete"===s.operator&&oi(s.argument)?this.raiseRecoverable(s.start,"Private fields can not be deleted"):t=!0,i=this.finishNode(s,c?"UpdateExpression":"UnaryExpression")}else if(t||this.type!==yr.privateId){if(i=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return i;for(;this.type.postfix&&!this.canInsertSemicolon();){var u=this.startNodeAt(a,o);u.operator=this.value,u.prefix=!1,u.argument=i,this.checkLValSimple(i),this.next(),i=this.finishNode(u,"UpdateExpression")}}else(r||0===this.privateNameStack.length)&&this.unexpected(),i=this.parsePrivateIdent(),this.type!==yr._in&&this.unexpected();return n||!this.eat(yr.starstar)?i:t?void this.unexpected(this.lastTokStart):this.buildBinary(a,o,i,this.parseMaybeUnary(null,!1,!1,r),"**",!1)},ai.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if("ArrowFunctionExpression"===i.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return i;var a=this.parseSubscripts(i,n,r,!1,t);return e&&"MemberExpression"===a.type&&(e.parenthesizedAssign>=a.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=a.start&&(e.parenthesizedBind=-1),e.trailingComma>=a.start&&(e.trailingComma=-1)),a},ai.parseSubscripts=function(e,t,n,r,i){for(var a=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var s=this.parseSubscript(e,t,n,r,a,o,i);if(s.optional&&(o=!0),s===e||"ArrowFunctionExpression"===s.type){if(o){var c=this.startNodeAt(t,n);c.expression=s,s=this.finishNode(c,"ChainExpression")}return s}e=s}},ai.parseSubscript=function(e,t,n,r,i,a,o){var s=this.options.ecmaVersion>=11,c=s&&this.eat(yr.questionDot);r&&c&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var u=this.eat(yr.bracketL);if(u||c&&this.type!==yr.parenL&&this.type!==yr.backQuote||this.eat(yr.dot)){var l=this.startNodeAt(t,n);l.object=e,u?(l.property=this.parseExpression(),this.expect(yr.bracketR)):this.type===yr.privateId&&"Super"!==e.type?l.property=this.parsePrivateIdent():l.property=this.parseIdent("never"!==this.options.allowReserved),l.computed=!!u,s&&(l.optional=c),e=this.finishNode(l,"MemberExpression")}else if(!r&&this.eat(yr.parenL)){var d=new Vr,h=this.yieldPos,f=this.awaitPos,g=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var p=this.parseExprList(yr.parenR,this.options.ecmaVersion>=8,!1,d);if(i&&!c&&!this.canInsertSemicolon()&&this.eat(yr.arrow))return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=h,this.awaitPos=f,this.awaitIdentPos=g,this.parseArrowExpression(this.startNodeAt(t,n),p,!0,o);this.checkExpressionErrors(d,!0),this.yieldPos=h||this.yieldPos,this.awaitPos=f||this.awaitPos,this.awaitIdentPos=g||this.awaitIdentPos;var v=this.startNodeAt(t,n);v.callee=e,v.arguments=p,s&&(v.optional=c),e=this.finishNode(v,"CallExpression")}else if(this.type===yr.backQuote){(c||a)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var m=this.startNodeAt(t,n);m.tag=e,m.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(m,"TaggedTemplateExpression")}return e},ai.parseExprAtom=function(e,t){this.type===yr.slash&&this.readRegexp();var n,r=this.potentialArrowAt===this.start;switch(this.type){case yr._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),n=this.startNode(),this.next(),this.type!==yr.parenL||this.allowDirectSuper||this.raise(n.start,"super() call outside constructor of a subclass"),this.type!==yr.dot&&this.type!==yr.bracketL&&this.type!==yr.parenL&&this.unexpected(),this.finishNode(n,"Super");case yr._this:return n=this.startNode(),this.next(),this.finishNode(n,"ThisExpression");case yr.name:var i=this.start,a=this.startLoc,o=this.containsEsc,s=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!o&&"async"===s.name&&!this.canInsertSemicolon()&&this.eat(yr._function))return this.overrideContext(ri.f_expr),this.parseFunction(this.startNodeAt(i,a),0,!1,!0,t);if(r&&!this.canInsertSemicolon()){if(this.eat(yr.arrow))return this.parseArrowExpression(this.startNodeAt(i,a),[s],!1,t);if(this.options.ecmaVersion>=8&&"async"===s.name&&this.type===yr.name&&!o&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return s=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(yr.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(i,a),[s],!0,t)}return s;case yr.regexp:var c=this.value;return(n=this.parseLiteral(c.value)).regex={pattern:c.pattern,flags:c.flags},n;case yr.num:case yr.string:return this.parseLiteral(this.value);case yr._null:case yr._true:case yr._false:return(n=this.startNode()).value=this.type===yr._null?null:this.type===yr._true,n.raw=this.type.keyword,this.next(),this.finishNode(n,"Literal");case yr.parenL:var u=this.start,l=this.parseParenAndDistinguishExpression(r,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(l)&&(e.parenthesizedAssign=u),e.parenthesizedBind<0&&(e.parenthesizedBind=u)),l;case yr.bracketL:return n=this.startNode(),this.next(),n.elements=this.parseExprList(yr.bracketR,!0,!0,e),this.finishNode(n,"ArrayExpression");case yr.braceL:return this.overrideContext(ri.b_expr),this.parseObj(!1,e);case yr._function:return n=this.startNode(),this.next(),this.parseFunction(n,0);case yr._class:return this.parseClass(this.startNode(),!1);case yr._new:return this.parseNew();case yr.backQuote:return this.parseTemplate();case yr._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},ai.parseExprImport=function(){var e=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var t=this.parseIdent(!0);switch(this.type){case yr.parenL:return this.parseDynamicImport(e);case yr.dot:return e.meta=t,this.parseImportMeta(e);default:this.unexpected()}},ai.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(yr.parenR)){var t=this.start;this.eat(yr.comma)&&this.eat(yr.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")},ai.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),"meta"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")},ai.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),110===t.raw.charCodeAt(t.raw.length-1)&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")},ai.parseParenExpression=function(){this.expect(yr.parenL);var e=this.parseExpression();return this.expect(yr.parenR),e},ai.parseParenAndDistinguishExpression=function(e,t){var n,r=this.start,i=this.startLoc,a=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o,s=this.start,c=this.startLoc,u=[],l=!0,d=!1,h=new Vr,f=this.yieldPos,g=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==yr.parenR;){if(l?l=!1:this.expect(yr.comma),a&&this.afterTrailingComma(yr.parenR,!0)){d=!0;break}if(this.type===yr.ellipsis){o=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===yr.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}u.push(this.parseMaybeAssign(!1,h,this.parseParenItem))}var p=this.lastTokEnd,v=this.lastTokEndLoc;if(this.expect(yr.parenR),e&&!this.canInsertSemicolon()&&this.eat(yr.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=f,this.awaitPos=g,this.parseParenArrowList(r,i,u,t);u.length&&!d||this.unexpected(this.lastTokStart),o&&this.unexpected(o),this.checkExpressionErrors(h,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=g||this.awaitPos,u.length>1?((n=this.startNodeAt(s,c)).expressions=u,this.finishNodeAt(n,"SequenceExpression",p,v)):n=u[0]}else n=this.parseParenExpression();if(this.options.preserveParens){var m=this.startNodeAt(r,i);return m.expression=n,this.finishNode(m,"ParenthesizedExpression")}return n},ai.parseParenItem=function(e){return e},ai.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var si=[];ai.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(yr.dot)){e.meta=t;var n=this.containsEsc;return e.property=this.parseIdent(!0),"target"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc,a=this.type===yr._import;return e.callee=this.parseSubscripts(this.parseExprAtom(),r,i,!0,!1),a&&"ImportExpression"===e.callee.type&&this.raise(r,"Cannot use new with import()"),this.eat(yr.parenL)?e.arguments=this.parseExprList(yr.parenR,this.options.ecmaVersion>=8,!1):e.arguments=si,this.finishNode(e,"NewExpression")},ai.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===yr.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===yr.backQuote,this.finishNode(n,"TemplateElement")},ai.parseTemplate=function(e){void 0===e&&(e={});var t=e.isTagged;void 0===t&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===yr.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(yr.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(yr.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")},ai.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===yr.name||this.type===yr.num||this.type===yr.string||this.type===yr.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===yr.star)&&!Sr.test(this.input.slice(this.lastTokEnd,this.start))},ai.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(yr.braceR);){if(r)r=!1;else if(this.expect(yr.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(yr.braceR))break;var a=this.parseProperty(e,t);e||this.checkPropClash(a,i,t),n.properties.push(a)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")},ai.parseProperty=function(e,t){var n,r,i,a,o=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(yr.ellipsis))return e?(o.argument=this.parseIdent(!1),this.type===yr.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(o,"RestElement")):(o.argument=this.parseMaybeAssign(!1,t),this.type===yr.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(o,"SpreadElement"));this.options.ecmaVersion>=6&&(o.method=!1,o.shorthand=!1,(e||t)&&(i=this.start,a=this.startLoc),e||(n=this.eat(yr.star)));var s=this.containsEsc;return this.parsePropertyName(o),!e&&!s&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(o)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(yr.star),this.parsePropertyName(o)):r=!1,this.parsePropertyValue(o,e,n,r,i,a,t,s),this.finishNode(o,"Property")},ai.parsePropertyValue=function(e,t,n,r,i,a,o,s){if((n||r)&&this.type===yr.colon&&this.unexpected(),this.eat(yr.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===yr.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r);else if(t||s||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===yr.comma||this.type===yr.braceR||this.type===yr.eq)this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),"await"!==e.key.name||this.awaitIdentPos||(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,a,this.copyNode(e.key)):this.type===yr.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,a,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var c="get"===e.kind?0:1;if(e.value.params.length!==c){var u=e.value.start;"get"===e.kind?this.raiseRecoverable(u,"getter should have no params"):this.raiseRecoverable(u,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}},ai.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(yr.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(yr.bracketR),e.key;e.computed=!1}return e.key=this.type===yr.num||this.type===yr.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},ai.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},ai.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|Ur(t,r.generator)|(n?128:0)),this.expect(yr.parenL),r.params=this.parseBindingList(yr.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")},ai.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(16|Ur(n,!1)),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")},ai.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==yr.braceL,a=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var s=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);a&&!s||(o=this.strictDirective(this.end))&&s&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");var c=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!a&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,5),e.body=this.parseBlock(!1,void 0,o&&!a),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=c}this.exitScope()},ai.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){if("Identifier"!==n[t].type)return!1}return!0},ai.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var a=i[r];this.checkLValInnerPattern(a,1,t?null:n)}},ai.parseExprList=function(e,t,n,r){for(var i=[],a=!0;!this.eat(e);){if(a)a=!1;else if(this.expect(yr.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===yr.comma?o=null:this.type===yr.ellipsis?(o=this.parseSpread(r),r&&this.type===yr.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i},ai.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;(this.inGenerator&&"yield"===r&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&"arguments"===r&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),!this.inClassStaticBlock||"arguments"!==r&&"await"!==r||this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(t,n).indexOf("\\"))||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))},ai.parseIdent=function(e){var t=this.startNode();return this.type===yr.name?t.name=this.value:this.type.keyword?(t.name=this.type.keyword,"class"!==t.name&&"function"!==t.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),"await"!==t.name||this.awaitIdentPos||(this.awaitIdentPos=t.start)),t},ai.parsePrivateIdent=function(){var e=this.startNode();return this.type===yr.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),0===this.privateNameStack.length?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e),e},ai.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===yr.semi||this.canInsertSemicolon()||this.type!==yr.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(yr.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")},ai.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var ci=Wr.prototype;ci.raise=function(e,t){var n=Mr(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r},ci.raiseRecoverable=ci.raise,ci.curPosition=function(){if(this.options.locations)return new xr(this.curLine,this.pos-this.lineStart)};var ui=Wr.prototype,li=function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};ui.enterScope=function(e){this.scopeStack.push(new li(e))},ui.exitScope=function(){this.scopeStack.pop()},ui.treatFunctionsAsVarInScope=function(e){return 2&e.flags||!this.inModule&&1&e.flags},ui.declareName=function(e,t,n){var r=!1;if(2===t){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&1&i.flags&&delete this.undefinedExports[e]}else if(4===t){this.currentScope().lexical.push(e)}else if(3===t){var a=this.currentScope();r=this.treatFunctionsAsVar?a.lexical.indexOf(e)>-1:a.lexical.indexOf(e)>-1||a.var.indexOf(e)>-1,a.functions.push(e)}else for(var o=this.scopeStack.length-1;o>=0;--o){var s=this.scopeStack[o];if(s.lexical.indexOf(e)>-1&&!(32&s.flags&&s.lexical[0]===e)||!this.treatFunctionsAsVarInScope(s)&&s.functions.indexOf(e)>-1){r=!0;break}if(s.var.push(e),this.inModule&&1&s.flags&&delete this.undefinedExports[e],259&s.flags)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")},ui.checkLocalExport=function(e){-1===this.scopeStack[0].lexical.indexOf(e.name)&&-1===this.scopeStack[0].var.indexOf(e.name)&&(this.undefinedExports[e.name]=e)},ui.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},ui.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(259&t.flags)return t}},ui.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(259&t.flags&&!(16&t.flags))return t}};var di=function(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new Or(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},hi=Wr.prototype;function fi(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}hi.startNode=function(){return new di(this,this.start,this.startLoc)},hi.startNodeAt=function(e,t){return new di(this,e,t)},hi.finishNode=function(e,t){return fi.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},hi.finishNodeAt=function(e,t,n,r){return fi.call(this,e,t,n,r)},hi.copyNode=function(e){var t=new di(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var gi="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",pi=gi+" Extended_Pictographic",vi=pi+" EBase EComp EMod EPres ExtPict",mi={9:gi,10:pi,11:pi,12:vi,13:vi,14:vi},_i="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",yi="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Si=yi+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",bi=Si+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Ii=bi+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Ai=Ii+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",Pi={9:yi,10:Si,11:bi,12:Ii,13:Ai,14:Ai+" Kawi Nag_Mundari Nagm"},Di={};function Ei(e){var t=Di[e]={binary:Fr(mi[e]+" "+_i),nonBinary:{General_Category:Fr(_i),Script:Fr(Pi[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var Ci=0,wi=[9,10,11,12,13,14];Ci<wi.length;Ci+=1){Ei(wi[Ci])}var ki=Wr.prototype,Ti=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":"")+(e.options.ecmaVersion>=13?"d":""),this.unicodeProperties=Di[e.options.ecmaVersion>=14?14:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function Fi(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function Gi(e){return e>=65&&e<=90||e>=97&&e<=122}function Ri(e){return Gi(e)||95===e}function xi(e){return Ri(e)||Oi(e)}function Oi(e){return e>=48&&e<=57}function Mi(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function Ni(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function Bi(e){return e>=48&&e<=55}Ti.prototype.reset=function(e,t,n){var r=-1!==n.indexOf("u");this.start=0|e,this.source=t+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},Ti.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},Ti.prototype.at=function(e,t){void 0===t&&(t=!1);var n=this.source,r=n.length;if(e>=r)return-1;var i=n.charCodeAt(e);if(!t&&!this.switchU||i<=55295||i>=57344||e+1>=r)return i;var a=n.charCodeAt(e+1);return a>=56320&&a<=57343?(i<<10)+a-56613888:i},Ti.prototype.nextIndex=function(e,t){void 0===t&&(t=!1);var n=this.source,r=n.length;if(e>=r)return r;var i,a=n.charCodeAt(e);return!t&&!this.switchU||a<=55295||a>=57344||e+1>=r||(i=n.charCodeAt(e+1))<56320||i>57343?e+1:e+2},Ti.prototype.current=function(e){return void 0===e&&(e=!1),this.at(this.pos,e)},Ti.prototype.lookahead=function(e){return void 0===e&&(e=!1),this.at(this.nextIndex(this.pos,e),e)},Ti.prototype.advance=function(e){void 0===e&&(e=!1),this.pos=this.nextIndex(this.pos,e)},Ti.prototype.eat=function(e,t){return void 0===t&&(t=!1),this.current(t)===e&&(this.advance(t),!0)},ki.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=0;r<n.length;r++){var i=n.charAt(r);-1===t.indexOf(i)&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(i,r+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}},ki.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))},ki.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];-1===e.groupNames.indexOf(r)&&e.raise("Invalid named capture referenced")}},ki.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},ki.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},ki.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!!(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},ki.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1},ki.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},ki.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},ki.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return-1!==i&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1},ki.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},ki.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},ki.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},ki.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},ki.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},ki.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},ki.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!Fi(t)&&(e.lastIntValue=t,e.advance(),!0)},ki.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;-1!==(n=e.current())&&!Fi(n);)e.advance();return e.pos!==t},ki.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t)&&(e.advance(),!0)},ki.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),void e.groupNames.push(e.lastStringValue);e.raise("Invalid group")}},ki.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},ki.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=Gr(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=Gr(e.lastIntValue);return!0}return!1},ki.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),function(e){return dr(e,!0)||36===e||95===e}(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)},ki.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),function(e){return hr(e,!0)||36===e||95===e||8204===e||8205===e}(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)},ki.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},ki.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1},ki.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},ki.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},ki.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},ki.regexp_eatZero=function(e){return 48===e.current()&&!Oi(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},ki.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},ki.regexp_eatControlLetter=function(e){var t=e.current();return!!Gi(t)&&(e.lastIntValue=t%32,e.advance(),!0)},ki.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){void 0===t&&(t=!1);var n,r=e.pos,i=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var a=e.lastIntValue;if(i&&a>=55296&&a<=56319){var o=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var s=e.lastIntValue;if(s>=56320&&s<=57343)return e.lastIntValue=1024*(a-55296)+(s-56320)+65536,!0}e.pos=o,e.lastIntValue=a}return!0}if(i&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&((n=e.lastIntValue)>=0&&n<=1114111))return!0;i&&e.raise("Invalid unicode escape"),e.pos=r}return!1},ki.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t)&&(e.lastIntValue=t,e.advance(),!0)},ki.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1},ki.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(function(e){return 100===e||68===e||115===e||83===e||119===e||87===e}(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(80===t||112===t)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1},ki.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i),!0}return!1},ki.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){kr(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")},ki.regexp_validateUnicodePropertyNameOrValue=function(e,t){e.unicodeProperties.binary.test(t)||e.raise("Invalid property name")},ki.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";Ri(t=e.current());)e.lastStringValue+=Gr(t),e.advance();return""!==e.lastStringValue},ki.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";xi(t=e.current());)e.lastStringValue+=Gr(t),e.advance();return""!==e.lastStringValue},ki.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},ki.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1},ki.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;!e.switchU||-1!==t&&-1!==n||e.raise("Invalid character class"),-1!==t&&-1!==n&&t>n&&e.raise("Range out of order in character class")}}},ki.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(99===n||Bi(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return 93!==r&&(e.lastIntValue=r,e.advance(),!0)},ki.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},ki.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!Oi(t)&&95!==t)&&(e.lastIntValue=t%32,e.advance(),!0)},ki.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},ki.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Oi(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t},ki.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Mi(n=e.current());)e.lastIntValue=16*e.lastIntValue+Ni(n),e.advance();return e.pos!==t},ki.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*n+e.lastIntValue:e.lastIntValue=8*t+n}else e.lastIntValue=t;return!0}return!1},ki.regexp_eatOctalDigit=function(e){var t=e.current();return Bi(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},ki.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!Mi(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+Ni(i),e.advance()}return!0};var Li=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new Or(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},ji=Wr.prototype;function Ui(e){return"function"!=typeof BigInt?null:BigInt(e.replace(/_/g,""))}ji.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Li(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},ji.getToken=function(){return this.next(),new Li(this)},"undefined"!=typeof Symbol&&(ji[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===yr.eof,value:t}}}}),ji.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(yr.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},ji.readToken=function(e){return dr(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},ji.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888},ji.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(-1===n&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=Ar(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())},ji.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!Ir(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},ji.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&Pr.test(String.fromCharCode(e))))break e;++this.pos}}},ji.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},ji.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(yr.ellipsis)):(++this.pos,this.finishToken(yr.dot))},ji.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(yr.assign,2):this.finishOp(yr.slash,1)},ji.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=42===e?yr.star:yr.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++n,r=yr.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(yr.assign,n+1):this.finishOp(r,n)},ji.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12)if(61===this.input.charCodeAt(this.pos+2))return this.finishOp(yr.assign,3);return this.finishOp(124===e?yr.logicalOR:yr.logicalAND,2)}return 61===t?this.finishOp(yr.assign,2):this.finishOp(124===e?yr.bitwiseOR:yr.bitwiseAND,1)},ji.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(yr.assign,2):this.finishOp(yr.bitwiseXOR,1)},ji.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!Sr.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(yr.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(yr.assign,2):this.finishOp(yr.plusMin,1)},ji.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(yr.assign,n+1):this.finishOp(yr.bitShift,n)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(yr.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},ji.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(yr.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(yr.arrow)):this.finishOp(61===e?yr.eq:yr.prefix,1)},ji.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(46===t){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(yr.questionDot,2)}if(63===t){if(e>=12)if(61===this.input.charCodeAt(this.pos+2))return this.finishOp(yr.assign,3);return this.finishOp(yr.coalesce,2)}}return this.finishOp(yr.question,1)},ji.readToken_numberSign=function(){var e=35;if(this.options.ecmaVersion>=13&&(++this.pos,dr(e=this.fullCharCodeAtPos(),!0)||92===e))return this.finishToken(yr.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Gr(e)+"'")},ji.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(yr.parenL);case 41:return++this.pos,this.finishToken(yr.parenR);case 59:return++this.pos,this.finishToken(yr.semi);case 44:return++this.pos,this.finishToken(yr.comma);case 91:return++this.pos,this.finishToken(yr.bracketL);case 93:return++this.pos,this.finishToken(yr.bracketR);case 123:return++this.pos,this.finishToken(yr.braceL);case 125:return++this.pos,this.finishToken(yr.braceR);case 58:return++this.pos,this.finishToken(yr.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(yr.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(yr.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Gr(e)+"'")},ji.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)},ji.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Sr.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if("["===r)t=!0;else if("]"===r&&t)t=!1;else if("/"===r&&!t)break;e="\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var a=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(a);var s=this.regexpState||(this.regexpState=new Ti(this));s.reset(n,i,o),this.validateRegExpFlags(s),this.validateRegExpPattern(s);var c=null;try{c=new RegExp(i,o)}catch(e){}return this.finishToken(yr.regexp,{pattern:i,flags:o,value:c})},ji.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&void 0===t,i=n&&48===this.input.charCodeAt(this.pos),a=this.pos,o=0,s=0,c=0,u=null==t?1/0:t;c<u;++c,++this.pos){var l=this.input.charCodeAt(this.pos),d=void 0;if(r&&95===l)i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===s&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===c&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),s=l;else{if((d=l>=97?l-97+10:l>=65?l-65+10:l>=48&&l<=57?l-48:1/0)>=e)break;s=l,o=o*e+d}}return r&&95===s&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===a||null!=t&&this.pos-a!==t?null:o},ji.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return null==n&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n=Ui(this.input.slice(t,this.pos)),++this.pos):dr(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(yr.num,n)},ji.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10,void 0,!0)||this.raise(t,"Invalid number");var n=this.pos-t>=2&&48===this.input.charCodeAt(t);n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&110===r){var i=Ui(this.input.slice(t,this.pos));return++this.pos,dr(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(yr.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),dr(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var a,o=(a=this.input.slice(t,this.pos),n?parseInt(a,8):parseFloat(a.replace(/_/g,"")));return this.finishToken(yr.num,o)},ji.readCodePoint=function(){var e;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var t=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},ji.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;92===r?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):8232===r||8233===r?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Ir(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(yr.string,t)};var Wi={};ji.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==Wi)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},ji.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Wi;this.raise(e,t)},ji.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==yr.template&&this.type!==yr.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(yr.template,e)):36===n?(this.pos+=2,this.finishToken(yr.dollarBraceL)):(++this.pos,this.finishToken(yr.backQuote));if(92===n)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(Ir(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},ji.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(yr.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},ji.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Gr(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),"0"===r&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return Ir(t)?"":String.fromCharCode(t)}},ji.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return null===n&&this.invalidStringToken(t,"Bad character escape sequence"),n},ji.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(hr(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,e+=this.input.slice(n,this.pos);var a=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?dr:hr)(o,r)||this.invalidStringToken(a,"Invalid Unicode escape"),e+=Gr(o),n=this.pos}t=!1}return e+this.input.slice(n,this.pos)},ji.readWord=function(){var e=this.readWord1(),t=yr.name;return this.keywords.test(e)&&(t=mr[e]),this.finishToken(t,e)};function Hi(e){var t;try{t=function(e,t){return Wr.parse(e,t)}(e,{ecmaVersion:"latest",sourceType:"script"})}catch(t){return e}var n=[],r=[],i=!0,a=!1,o=void 0;try{for(var s,c=(t.body||[])[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value;if("VariableDeclaration"===u.type){var l=!0,d=!1,h=void 0;try{for(var f,g=u.declarations[Symbol.iterator]();!(l=(f=g.next()).done);l=!0){var p=f.value;n.push(p.id.name)}}catch(e){d=!0,h=e}finally{try{l||null==g.return||g.return()}finally{if(d)throw h}}}"FunctionDeclaration"===u.type&&u.id&&r.push(u.id.name)}}catch(e){a=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}var v=n.concat(r),m="";return v.length>0&&(m="\n        (function(){\n            const __props = {};\n            ".concat(v.map(function(e){return'__props["'.concat(e,'"] = { \n                get() {\n                    return typeof ').concat(e,' !== "undefined" ? ').concat(e," : undefined;\n                },\n                set(value) {\n                    ").concat(e," = value;\n                },\n                configurable: true, enumerable: true \n            };")}).join("\n"),"\n            Object.defineProperties(this, __props);\n        }).call(this);")),"\n(function(){\n".concat(e,";\n").concat(m,"\n}).call(this);")}Wr.acorn={Parser:Wr,version:"8.8.2",defaultOptions:Nr,Position:xr,SourceLocation:Or,getLineInfo:Mr,Node:di,TokenType:fr,tokTypes:yr,keywordTypes:mr,TokContext:ni,tokContexts:ri,isIdentifierChar:hr,isIdentifierStart:dr,Token:Li,isNewLine:Ir,lineBreak:Sr,lineBreakG:br,nonASCIIwhitespace:Pr};var Ki,zi=__webpack_require__(9996);function Vi(e){var t;Ki=e.engine,[Yi,Zi,Xi,ea,Qi,$i].forEach(function(t){!function(e,t){Ji(!e.instances),e.instances=[],e.instances.push(null),e.Create=function(){var r=(0,n._)(e,(0,c._)(Array.prototype.slice.call(arguments).concat([t])));return r.index=e.instances.length,e.instances.push(r),r},e.Get=function(t){return e.instances[t]},e.Release=function(t){if(t>-1&&t<e.instances.length){var n=e.instances[t];if(!n||n.contextOfGlobalObject)return;n&&"function"==typeof n.release&&n.release(),delete e.instances[t]}}}(t,e)}),function(e,t){var n;for(n in t){var r=e[n];r&&t[n].forEach(function(e){r[e]||Object.defineProperty(r,e,{writable:!0,enumerable:!1,value:function(t){if(0===arguments.length)throw new TypeError("missing argument 0 when calling function "+n+"."+e);return r.prototype[e].apply(t,Array.prototype.slice.call(arguments,1))}})})}}(globalThis,{String:["substr","toUpperCase","substring"]}),(t=Object).prototype.toSource||Object.defineProperty(t.prototype,"toSource",{value:function(){if((0,a._)(this,String))return this;var e="({",t=0;for(var n in this)if("toSource"!==n&&"_cpp_data"!==n&&"getProxyTarget"!==n&&"_getClass"!==n){0!==t&&(e+=","),t++;var r=this[n];"string"==typeof r&&(r='"'+(r=(r=r.replace(/\n/g,"\\n")).replace(/\r/g,"\\r"))+'"'),-1===n.indexOf("~")&&-1===n.indexOf("-")&&-1===n.indexOf(".")||(n="'"+n+"'"),e+=n+":"+r}return e+"})"},writable:!0,configurable:!0,enumerable:!1});var r=function(){if(!Ki.JSCallback)return null;var e=Ki.JSCallback.implement({FooValue:function(e){},InitializeEngine:function(){return!0},FinalizeEngine:function(){},CreateRuntime:function(){return Yi.Create().index},ReleaseRuntime:function(e){Yi.Release(e)},GetPrivateData:function(e){return(e=Yi.Get(e)).GetPrivateData()},CreateContext:function(e,t,n,r){return Zi.Create(e,t,n).index},ReleaseContext:function(e){Zi.Release(e)},GetGlobalObject:function(e){return Zi.Get(e).GetGlobalObject().cpp},GetRuntime:function(e){return Zi.Get(e).GetRuntime().index},EnableCompatibleMode:function(e,t){Zi.Get(e).EnableCompatibleMode(t)},DefineFunction:function(e,t){Zi.Get(e).DefineFunction(t)},DefineClass:function(e,t){return Zi.Get(e).DefineClass(t).index},GetClass:function(e,t){var n=Zi.Get(e).GetClass(t.toString());return n?n.index:0},CreateValue:function(e){return Xi.Create(Yi.Get(e)).cpp},ReleaseValue:function(e){e&&Xi.Release(e.GetHandle())},CallFunction:function(e,t,n,r){return Xi.Get(e.GetHandle()).CallFunction(t?Xi.Get(t.GetHandle()):null,Xi.Get(n.GetHandle()),r)},SetFunctionBind:function(e,t,n){return Xi.Get(t.GetHandle()).SetFunctionBind(Xi.Get(e.GetHandle()),Xi.Get(n.GetHandle()))},ExecuteScript:function(e,t,n,r){return Zi.Get(e).ExecuteScript(t.toString(),n,r)},ThrowMessage:function(e,t){},GetReturnValueMessage:function(e,t,n){return!1},GetReturnValueLineInfo:function(e,t){return!0}});return e}();r&&Ki.SetJSCallback(r)}var Ji=console.assert;console.debug;var Yi=function(){function e(){(0,t._)(this,e)}return(0,r._)(e,[{key:"GetPrivateData",value:function(){return this.privateData||(this.privateData=Ki.PrivateData.Create()),this.privateData}},{key:"release",value:function(){this.privateData&&!this.privateData.isDeleted()&&this.privateData.delete()}}]),e}(),Zi=function(){function e(n,r,i,a){var o=this;(0,t._)(this,e);var c=Yi.Get(n),u=ea.Create(r,c,this);this.runtime=c,this.functions=new Map,this.classes=new Map,this.classes.set(u.name,u),this.pdfJr=a,this.globalObject=function(){if(i){var e=Xi.Create(c);return e.cpp.SetObject(i,0),u?((t=Xi.Create(c)).js=u.CreateJSFrom(e.js),e.release(),t):e}var t;return u?((t=Xi.Create(c)).js=new u.js,t):((t=Xi.Create(c)).js={},t)}();var l=this.globalObject.js;l.getProxyTarget&&(l=l.getProxyTarget());var h=this;l._getContext=function(){return h},this.globalObject.contextOfGlobalObject=this;var f=function(e,t){var n=e;for(var r in t)n=n.replace(new RegExp("\\b".concat(r,"\\b"),"g"),t[r]);return n}(u.hasDynamicItems()?"// @ts-nocheck\nwith(this) {\n    function __exec() {\n        try {\n            return [eval(arguments[0]), arguments[1] && eval('(' + arguments[1] + ')').bind(arguments[2] ? arguments[2]: this)];\n        } catch(__error__) {\n            __debug_environment_value__ ? __console.warn(__error__) : void 0;\n            let line = -1;\n            let column = -1;\n            const stack = __error__.stack;\n            if (stack) {\n                const match = stack.match(/<anonymous>:(\\d+):(\\d+)/);\n                if (match) {\n                    line = parseInt(match[1]);\n                    column = parseInt(match[2]);    \n                }\n            }\n            return [{\n                _error: {\n                    name: __error__.name,\n                    message: __error__.message,\n                    line: line,\n                    column: column\n                }\n            }, arguments[1] && eval('(' + arguments[1] + ')').bind(arguments[2] ? arguments[2]: this)];\n        }\n    }\n    function __execScope() {\n        with (arguments[0]) {\n            try{\n                    return eval(arguments[1]);\n            } catch(__error__) {\n                __debug_environment_value__ ? __console.warn(__error__) : void 0;\n                let line = -1;\n                let column = -1;\n                const stack = __error__.stack;\n                if (stack) {\n                    const match = stack.match(/<anonymous>:(\\d+):(\\d+)/);\n                    if (match) {\n                        line = parseInt(match[1]);\n                        column = parseInt(match[2]);\n                    }\n                }\n                return {\n                    _error: {\n                        name: __error__.name,\n                        message: __error__.message,\n                        line: line,\n                        column: column\n                    }\n                }\n            }\n            \n        }\n    }\n    return {\n        exec: __exec.bind(this),\n        execScope: __execScope.bind(this),\n        __execCode: __exec.toString(),\n        __execScopeCode: __execScope.toString()\n    };\n}":"// @ts-nocheck\nvar __global_variable_name__ = this;\nfunction __exec() {\n    try {\n        with(__global_variable_name__) {\n            return [eval(arguments[0]), arguments[1] && eval('(' + arguments[1] + ')').bind(arguments[2] ? arguments[2]: this)];\n        }\n    } catch(__error__) {\n        __debug_environment_value__ ? __console.warn(__error__) : void 0;\n        let line = -1;\n        let column = -1;\n        const stack = __error__.stack;\n        if (stack) {\n            const match = stack.match(/<anonymous>:(\\d+):(\\d+)/);\n            if (match) {\n                line = parseInt(match[1]);\n                column = parseInt(match[2]); \n            }\n        }\n        return [{\n            _error: {\n                name: __error__.name,\n                message: __error__.message,\n                line: line,\n                column: column\n            }\n        }, arguments[1] && eval('(' + arguments[1] + ')').bind(arguments[2] ? arguments[2]: this)];\n    }\n}\nfunction __execScope() {\n    with(__global_variable_name__) {\n        with (arguments[0]) {\n            try{\n                    return eval(arguments[1]);\n            } catch(__error__) {\n                __debug_environment_value__ ? __console.warn(__error__) : void 0;\n                let line = -1;\n                let column = -1;\n                const stack = __error__.stack;\n                if (stack) {\n                    const match = stack.match(/<anonymous>:(\\d+):(\\d+)/);\n                    if (match) {\n                        line = parseInt(match[1]);\n                        column = parseInt(match[2]); \n                    }\n                }\n                return {\n                    _error: {\n                        name: __error__.name,\n                        message: __error__.message,\n                        line: line,\n                        column: column\n                    }\n                }\n            }\n            \n        }\n    }\n}\nreturn {\n    exec: __exec.bind(this),\n    execScope: __execScope.bind(this),\n    __execCode: __exec.toString(),\n    __execScopeCode: __execScope.toString()\n};",{__global_variable_name__:(0,d.Ki)("global"),__debug_environment_value__:!1});this.initContextClosure=function(){o._contextClosure=new Function(f).bind(o.globalObject.js)()},"Root"===u.cppClass.name.toString()?(a.globalContext=this,this.initContextClosure()):this._contextClosure=a.globalContext.execScope(this.globalObject.js,"\n                (function(){\n                    ".concat(f,"\n                }).call(arguments[0])\n            ")),this.exec=function(e){var t=(0,s._)(o._contextClosure.exec(e,o._contextClosure.__execCode),2),n=t[0],r=t[1];return o._contextClosure.exec=r,n},this.getProp=function(e){return o._contextClosure.exec(e)[0]},this.execScope=function(e,t){return(0,s._)(o._contextClosure.exec("",o._contextClosure.__execScopeCode,e),2)[1].call(e,e,t)},this.nest=function(e){o._contextClosure.exec("")}}return(0,r._)(e,[{key:"ExecuteScript",value:function(e,t,n){var r,i=this;r=n?Xi.Get(n.GetHandle()).js:this.globalObject.js;var a,o=Hi(e);try{a=function(e,t){if(e===globalThis||e._getClass&&e._getClass()&&e._getClass().hasDynamicItems())return t();var n={};try{return Object.defineProperties(globalThis,$n.reduce(function(t,r){var i=Object.getOwnPropertyDescriptor(globalThis,r);return i&&(n[r]=i),r in e&&(t[r]={get:function(){return e[r]},set:function(t){e[r]=t},configurable:!0}),t},{})),Object.defineProperties(globalThis,er.reduce(function(t,r){var i=Object.getOwnPropertyDescriptor(globalThis,r);return i&&(n[r]=i),r in e&&(t[r]={value:e[r],configurable:!0}),t},{})),t()}finally{$n.concat(er).forEach(function(e){delete globalThis[e]}),Object.defineProperties(globalThis,n)}}(r,function(){return n?i.execScope(r,o):i.exec(o)})}catch(e){return!1}if(t&&(Xi.Get(t.GetHandle()).js=a),a&&(a.getProxyTarget&&(a=a.getProxyTarget()),a._error)){var s=zi.Z.bind(null,this.pdfJr.syncBaseUrl,this.pdfJr.id,"ActionCallback");if(a._error.line>0&&a._error.column>0)s("printLineConsole","[ Line: ".concat(a._error.line-1," { ").concat(a._error.name," } ] : ").concat(a._error.message));else s("printLineConsole",a._error.name+": "+a._error.message);return!1}return!0}},{key:"GetGlobalObject",value:function(){return this.globalObject}},{key:"GetRuntime",value:function(){return this.runtime}},{key:"EnableCompatibleMode",value:function(e){}},{key:"DefineFunction",value:function(e){if(!this.getFunction(e.name.toString())){var t=Qi.Create(e,this.runtime,this);this.functions.set(t.name,t),e.handle=t.index,this.GetGlobalObjectJS()[t.name]=t.js,t.thisValue=this.globalObject}}},{key:"DefineClass",value:function(e){var t=e.name.toString(),n=this.GetClass(t);if(n)return n;var r=ea.Create(e,this.runtime,this);this.classes.set(r.name,r);try{this.GetGlobalObjectJS()[t]=r.js}catch(e){}return r}},{key:"getFunction",value:function(e){var t=this.functions.get(e);if(t&&!t.isReleased)return t}},{key:"GetClass",value:function(e){return this.classes.get(e)}},{key:"GetGlobalObjectJS",value:function(){return this.globalObject.js.getProxyTarget?this.globalObject.js.getProxyTarget():this.globalObject.js}},{key:"release",value:function(){this.classes.forEach(function(e){e.release()}),this.classes.clear(),this.functions.forEach(function(e){e.release()}),this.functions.clear(),this.globalObject&&this.globalObject.release&&this.globalObject.release()}}]),e}(),qi=function e(n){(0,t._)(this,e),this.data=n},Xi=function(){function e(n){(0,t._)(this,e),this.runtime=n,this.js="_not_set_",this.isReleased=!1}return(0,r._)(e,[{key:"release",value:function(){this.isReleased=!0,this._cpp&&!this._cpp.isDeleted()&&this._cpp.delete()}},{key:"cpp",get:function(){if(this.isReleased)throw new Error("Value has been released");if(this._cpp)return this._cpp;var t=this;return this._cpp=Ki.Value.implement({GetHandle:function(){return Ji(t.index),t.index},SetDeath:function(){delete t.js},GetRuntime:function(){return t.runtime.index},IsUndefined:function(){return void 0===t.js},IsNull:function(){return null===t.js},IsBoolean:function(){return"boolean"==typeof t.js},IsUTF8String:function(){return"_not_set_"!==t.js&&((0,a._)(t.js,Ki.String)||"string"==typeof t.js)},IsNumber:function(){return"number"==typeof t.js},IsInteger:function(){return Number.isInteger(t.js)},IsObject:function(){return null!==t.js&&(!(0,a._)(t.js,Ki.String)&&("object"===(0,u._)(t.js)||"function"==typeof t.js))},IsArray:function(){return(0,a._)(t.js,Array)},IsFunction:function(){return"function"==typeof t.js},IsDate:function(){return(0,a._)(t.js,qi)||(0,a._)(t.js,Date)},ToBoolean:function(){return"boolean"==typeof t.js?t.js:(0,a._)(t.js,Ki.String)?Number.parseInt(t.js.toString())>0:!!t.js},ToFloat:function(){return Number.parseFloat(t.js)},ToDouble:function(){if((0,a._)(t.js,qi));else if((0,a._)(t.js,Date))return t.js.getTime();return Number.parseFloat(t.js)},ToInteger:function(){return"boolean"==typeof t.js?t.js?1:0:(0,a._)(t.js,Ki.String)?t.js.IsEmpty()?0:Number.parseInt(t.js.toString()):Number.parseInt(t.js)},ToUTF8String:function(){if((0,a._)(t.js,Ki.String)||(0,a._)(t.js,Ki.WString))return new Ki.String(t.js.toString());if(null===t.js)return new Ki.String("null");if(void 0===t.js)return new Ki.String("undefined");if("boolean"==typeof t.js)return new Ki.String(t.js?"true":"false");if((0,a._)(t.js,Array))return 0===t.js.length?new Ki.String(""):new Ki.String(t.js.toString());if(t.js._cpp_data&&t.js._cpp_data.clazz>0){var e=ea.Get(t.js._cpp_data.clazz).cppClass.name.toString();return new Ki.String("[object ".concat(e,"]"))}return"_not_set_"===t.js?new Ki.String(""):new Ki.String(t.js+"")},ToObject:function(e){return t.js._cpp_data?0===e||e===t.js._cpp_data.clazz?t.js._cpp_data.object:0:((0,a._)(t.js,Array)||(0,a._)(t.js,qi)||(0,a._)(t.js,Date)||t.js,0)},IsSameValue:function(e){return t.js===e.js},SetUndefined:function(){t.js=void 0},SetNull:function(){t.js=null},SetBoolean:function(e){t.js=!!e},SetUTF8String:function(e){var n=e.toString();"_not_set_"===n&&(n=""),t.js=n},SetInteger:function(e){t.js=e},SetFloat:function(e){t.js=e},SetDouble:function(e){t.js=e},SetObject:function(e,n){if(t.js={_cpp_data:{object:e,clazz:n}},n){var r=ea.Get(n).CreateJSFrom(t.js);t.js=r}},SetArray:function(n){for(var r=[],i=0;i<n.GetSize();++i)r[i]=e.Get(n.GetAt(i).GetHandle()).js;t.js=r},SetDate:function(e){t.js=new Date(e)},Set:function(n){var r=n;r.IsBoolean()?t.js=r.ToBoolean():r.IsInteger()?t.js=r.ToInteger():r.IsNumber()?t.js=r.ToFloat():r.IsUTF8String()?t.js=r.ToUTF8String().toString():r.IsObject()?t.js=e.Get(r.GetHandle()).js:r.IsNull()&&(t.js=null)},GetObjectProp:function(n,r){if((n=n.toString(),(0,a._)(t.js,Array))&&"length"===n)return(s=e.Get(r.GetHandle())).js=t.js.length,!0;if(((i=t.js).getProxyTarget&&(i=i.getProxyTarget()),n in i)&&void 0!==(l=i[n]))return(s=e.Get(r.GetHandle())).js=l,!0;if(t.js._getClass){var i,o=t.js._getClass();if((i=t.js).getProxyTarget&&(i=i.getProxyTarget()),o.IsDynamicProperty(i,n,!1)&&!o.IsDynamicProperty(i,n,!0)){var s=e.Get(r.GetHandle()),c=t.contextOfGlobalObject;if(c){if(n in globalThis)return s.js=globalThis[n],!0;try{c.globalObject.js._getClass().mustQueryIn=!0;var u=c.getProp(n);return c.globalObject.js._getClass().mustQueryIn=!1,s.js=u,!0}catch(e){return!1}}}}var l=t.js[n];s=e.Get(r.GetHandle());if(void 0===l){var d=t.contextOfGlobalObject;if(d){if(n in globalThis)return s.js=globalThis[n],!0;try{var h=d.getProp(n);return s.js=h,!0}catch(e){return!1}}}return s.js=l,!0},SetObjectProp:function(n,r){return t.js[n.toString()]=e.Get(r.GetHandle()).js,!0},GetObjectPropByIdx:function(n,r){return Ji((0,a._)(t.js,Array)),Ji(0<=n&&n<t.js.length),e.Get(r.GetHandle()).js=t.js[n],!0},SetObjectPropByIdx:function(n,r){return Ji((0,a._)(t.js,Array)),Ji(n==t.js.length),t.js[n]=e.Get(r.GetHandle()).js,!0},DeleteObjectProp:function(e){delete t.js[e.toString()];var n=t.js;return n.getProxyTarget&&(n=n.getProxyTarget()),n[e.toString()]=void 0,!0},ObjectHasOwnProp:function(e,n){if(t.js.hasOwnProperty(e.toString()))return!0;if((n||t.js.getProxyTarget&&t.js.getProxyTarget()._getContext)&&t.js._getClass){var r=t.js._getClass(),i=t.js;return i.getProxyTarget&&(i=i.getProxyTarget()),r.IsDynamicProperty(i,e.toString(),!1)}return!1},SetObjectOwnProp:function(n,r){var i=t.js;return i.getProxyTarget&&(i=i.getProxyTarget()),i[n.toString()]=e.Get(r.GetHandle()).js,!0},CreateDataProp:function(n,r){t.js[n.toString()]=e.Get(r.GetHandle()).js}}),this._cpp}},{key:"SetFunctionBind",value:function(e,t){return Ji("function"==typeof this.js),e.js=ra(this.js,t.js),!0}},{key:"CallFunction",value:function(t,n,r){if("function"!=typeof this.js)return!1;for(var i=[],o=0;o<r.GetSize();++o){var s=e.Get(r.GetAt(o).GetHandle()).js;(0,a._)(s,Ki.String)&&(s=s.toString()),i.push(s)}try{return n.js=this.js.apply(null==t?void 0:t.js,i),!0}catch(e){return!1}}}]),e}(),Qi=function(){function e(n,r,i){(0,t._)(this,e),this.context=i,this.cpp=n,this.thisValue=void 0,this.runtime=r,this.name=this.cpp.name.toString(),this.bHasFuncCallback=n.bHasFuncCallback;var a=this;this.isReleased=!1,this.js=function(){if(a.bHasFuncCallback){var e=Xi.Create(r);(0,d.B5)(e);var t=a.thisValue;if(!t)t=ta(this._getClass&&this._getClass()||a.clazz,this);return a.Call(t,e,arguments),e.js}}}return(0,r._)(e,[{key:"classAndFunName",get:function(){var e,t;return(null!==(t=null===(e=this.clazz)||void 0===e?void 0:e.name)&&void 0!==t?t:"")+"."+this.name}},{key:"Call",value:function(e,t,n){if(this.cpp&&this.bHasFuncCallback&&e){var r=na(n,t,this.runtime);return(0,d.xF)(r),this.cpp.Run(null==e?void 0:e.cpp,r),!0}}},{key:"release",value:function(){this.isReleased=!0,this.cpp&&!this.cpp.isDeleted()&&this.cpp.delete(),this.thisValue&&this.thisValue.release&&this.thisValue.release()}}]),e}(),$i=function(){function e(n,r){(0,t._)(this,e),this.cpp=n,this.clazz=r,this.name=this.cpp.name.toString(),this.bHasGetter=n.bHasGetter,this.bHasSetter=n.bHasSetter,this.isReleased=!1}return(0,r._)(e,[{key:"classAndPropName",get:function(){var e,t;return(null!==(t=null===(e=this.clazz)||void 0===e?void 0:e.name)&&void 0!==t?t:"")+"."+this.name}},{key:"getter",get:function(){if(this.bHasGetter){var e=this;return function(){var t=this._getClass&&this._getClass()||e.clazz,n=Xi.Create(t.runtime);(0,d.B5)(n);var r=ta(t,this);return e.cpp.Get(r.cpp,e.cpp.name,n.cpp),e.cpp.name.toString(),n.js}}}},{key:"setter",get:function(){if(this.bHasSetter){var e=this;return function(t){var n=this._getClass&&this._getClass()||e.clazz;if(!(0,a._)(t,Ki.ValueWrapper)){var r=Xi.Create(n.runtime);r.js=t,t=r}var i=ta(n,this);e.cpp.Set(i.cpp,e.cpp.name,t.cpp)}}}},{key:"release",value:function(){this.isReleased=!0,this.cpp&&!this.cpp.isDeleted()&&this.cpp.delete()}}]),e}(),ea=function(){function e(n,r,i){(0,t._)(this,e),this.context=i,this.cppClass=n,this.runtime=r,this.name=this.cppClass.name.toString(),this.values={},this.propsMap=new Map,this.functionsMap=new Map;var a=this;this.js=function(){var e;return(e=a).CreateJSFrom.apply(e,[{}].concat(Array.prototype.slice.call(arguments)))};var o=this.cppClass.GetConstructor(),s=o.name.toString();this.ctor=this.getFunction(s),this.ctor||(this.ctor=Qi.Create(o,this.runtime,i),this.functionsMap.set(s,this.ctor),o&&(o.handle=this.ctor.index),this.ctor.clazz=this)}return(0,r._)(e,[{key:"release",value:function(){}},{key:"CreateJSFrom",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a=e._cpp_data&&0!=e._cpp_data.clazz;this.DefineProperties(e);var o=(i=this.ctor.js).call.apply(i,[e].concat((0,c._)(n)));return o&&o._cpp_data&&Object.assign(e,o),this.DefineMethods(e),e=this.DefineDynamicProperty(e),this.objValueJs=e,a&&(this.values[e._cpp_data.object]=e),o&&"object"!==(void 0===o?"undefined":(0,u._)(o))&&"_not_set_"!==o?o:e}},{key:"DefineProperties",value:function(e){for(var t={},n=e._cpp_data&&0!=e._cpp_data.clazz,r=this.cppClass.properties,i=0;i<r.GetSize();++i){var a=r.GetAt(i),o=a.name.toString(),s=this.getProperty(o);s?s.clazz=this:(s=$i.Create(a,this),this.propsMap.set(o,s)),n&&(s.key=e._cpp_data.object),t[s.name]={get:s.getter,set:s.setter}}try{Object.defineProperties(e,t)}catch(e){}}},{key:"getFunction",value:function(e){var t=this.functionsMap.get(e);if(t&&!t.isReleased)return t}},{key:"getProperty",value:function(e){var t=this.propsMap.get(e);if(t&&!t.isReleased)return t}},{key:"DefineMethods",value:function(e){for(var t,n=function(n){var a=i.GetAt(n),o=a.name.toString(),s=t.getFunction(o);s||(s=Qi.Create(a,t.runtime,t.context),t.functionsMap.set(o,s),a.handle=s.index),s.clazz=t,r&&(s.key=e._cpp_data.object);var c={};c[s.name]={get:function(){return s.js}};try{s.name in e||Object.defineProperties(e,c)}catch(e){}},r=e._cpp_data&&0!=e._cpp_data.clazz,i=this.cppClass.methods,a=0;a<i.GetSize();++a)t=this,n(a)}},{key:"DefineDynamicProperty",value:function(e){var t=this,n={get:function(e,n,r){var i,a;if(n in e)i=(a=Reflect).get.apply(a,arguments);else if("symbol"===(void 0===n?"undefined":(0,u._)(n))){var o;i=(o=Reflect).get.apply(o,arguments)}else if("name"!=n&&n in globalThis)i=globalThis[n];else if(t.IsDynamicProperty(e,n,!1))i=t.GetDynamicProperty(e,n);else{var s;i=(s=Reflect).get.apply(s,arguments)}return i},set:function(e,n,r){var i,a,o;return"string"!=typeof n?(i=Reflect).set.apply(i,arguments):n in e?(a=Reflect).set.apply(a,arguments):"name"!=n&&n in globalThis?globalThis[n]=r:t.IsDynamicProperty(e,n,!0)?function(e,n,r){var i=Xi.Create(t.runtime);(0,d.B5)(i),i.js=e;var a=Xi.Create(t.runtime);return(0,d.B5)(a),a.js=r,t.cppClass.SetProperty(i.cpp,(0,d.Ys)(Ki,n),a.cpp),r}(e,n,r):(o=Reflect).set.apply(o,arguments)},has:function(e,n){if("arguments"===n)return!1;var r;if("symbol"===(void 0===n?"undefined":(0,u._)(n)))return(r=Reflect).has.apply(r,arguments);if(Reflect.has(e,n))return!0;if(n in globalThis)return!0;var i=!0;if(e._getContext&&(i=!1),t.mustQueryIn&&(i=!0),t.IsDynamicProperty(e,n,i)){var a=t.GetDynamicProperty(e,n);if("_not_set_"!==a&&void 0!==a)return!0}return!1},deleteProperty:function(e,n){var r;if("string"==typeof n&&!(n in e)){var i=Xi.Create(t.runtime);if((0,d.B5)(i),i.js=e,t.cppClass.GetPropertyType(i.cpp,(0,d.Ys)(Ki,n),!0)===Ki.PropType.e_PropTypeMethod)return!1}return(r=Reflect).deleteProperty.apply(r,arguments)}};return e.getProxyTarget=function(){return e},e._getClass=function(){return t},new Proxy(e,n)}},{key:"hasDynamicItems",value:function(){return this.cppClass.HasDynamicItems()}},{key:"IsDynamicProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.cppClass.HasDynamicItems())return!1;var r=Xi.Create(this.runtime);(0,d.B5)(r),r.js=e;var i=this.cppClass.GetPropertyType(r.cpp,(0,d.Ys)(Ki,t),n);return i===Ki.PropType.e_PropTypeProperty||i===Ki.PropType.e_PropTypeMaybe||i===Ki.PropType.e_PropTypeMethod}},{key:"GetDynamicProperty",value:function(t,n){var r=Xi.Create(this.runtime);(0,d.B5)(r),r.js=t;var i=(0,d.Ys)(Ki,n),a=this.cppClass.GetPropertyType(r.cpp,i,!1);if(a===Ki.PropType.e_PropTypeProperty||a===Ki.PropType.e_PropTypeMaybe){var o=Xi.Create(this.runtime);if((0,d.B5)(o),this.cppClass.GetProperty(r.cpp,i,o.cpp),o.js&&o.js._cpp_data)if(o.js._cpp_data.clazz)return e.Get(o.js._cpp_data.clazz).CreateJSFrom(o.js.getProxyTarget?o.js.getProxyTarget():o.js);if(r.release(),"_not_set_"===o.js)return;return o.js}if(a===Ki.PropType.e_PropTypeMethod){var s=this;return function(){var e=Xi.Create(s.runtime);(0,d.B5)(e);var t=na(arguments,e,s.runtime);(0,d.xF)(t);var i=(0,d.Ys)(Ki,n);return s.cppClass.CallMethod(r.cpp,i,s.cppClass.name,t),e.js}}}}]),e}();function ta(e,t){var n=Xi.Create(e.runtime);return e&&(t._cpp_data&&t._cpp_data.object&&0!=t._cpp_data.clazz?n.js=e.values[t._cpp_data.object]:n.js=e.objValueJs),(0,d.B5)(n),n}function na(e,t,n){return Ki.Arguments.implement({GetRuntime:function(){return n.index},GetLength:function(){return e.length},GetValue:function(t){if(t<e.length){var r=Xi.Create(n);return r.js=e[t],r.cpp}return null},GetReturnValue:function(){return t.cpp}})}var ra=function(e,t){var n;e._get_origin_function&&(e=e._get_origin_function());var r=function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=e).call.apply(n,[t].concat((0,c._)(i)))};return r._get_origin_function=function(){return e},r};var ia=function(){function e(n,r,a){(0,t._)(this,e),(0,i._)(this,"engine",void 0),(0,i._)(this,"clientId",void 0),(0,i._)(this,"syncBaseUrl",void 0),(0,i._)(this,"strings",{}),this.engine=n,this.clientId=r,this.syncBaseUrl=a}return(0,r._)(e,[{key:"initStrings",value:function(e){this.strings=e}},{key:"Release",value:function(){}},{key:"GetAppInfo",value:function(e){var t="Foxit PDF SDK For Web";switch(e){case this.engine.AppInfo.e_AppInfoVersion:t="11.0";break;case this.engine.AppInfo.e_AppInfoType:t="Exchange-Pro";break;case this.engine.AppInfo.e_AppInfoLanguage:t="en-US";break;case this.engine.AppInfo.e_AppInfoPlatform:t="Web";break;case this.engine.AppInfo.e_AppInfoName:t="Acrobat";break;case this.engine.AppInfo.e_AppInfoVariation:t="Full"}return new this.engine.WString(t)}},{key:"Beep",value:function(e){}},{key:"MsgBox",value:function(e,t,n,r){var i=e.toString(),a=t.toString(),o=n.value,s=r.value;return{value:(0,zi.Z)(this.syncBaseUrl,this.clientId,"XFAAppProvider","msgBox",{message:i,title:a,icon:o,type:s})}}},{key:"Response",value:function(e,t,n,r){var i=e.toString(),a=t.toString(),o=n.toString(),s=(0,zi.Z)(this.syncBaseUrl,this.clientId,"XFAAppProvider","prompt",{question:i,title:a,defaultValue:o,isPassword:r});return new this.engine.WString(s)}},{key:"DownLoadUrl",value:function(e){return null}},{key:"PostRequestURL",value:function(e,t,n,r,i){return new this.engine.WString("")}},{key:"PutRequestURL",value:function(e,t,n){return!1}},{key:"LoadString",value:function(e){var t=e&&this.strings[e.value]||"";return new this.engine.WString(t)}},{key:"ShowFileDialog",value:function(e,t,n){return null}}],[{key:"getInstance",value:function(t,n,r){return e.instance||(e.instance=new e(t,n,r)),e.instance}}]),e}();(0,i._)(ia,"instance",void 0);var aa=__webpack_require__(4099),oa=(__webpack_require__(2277),__webpack_require__(3170)),sa=__webpack_require__(1761);var ca=function(){function e(n){(0,t._)(this,e),(0,i._)(this,"jr",void 0),(0,i._)(this,"dialogCallback",void 0),(0,i._)(this,"description",void 0),(0,i._)(this,"store",void 0),this.jr=n,this.store=new Map,this.dialogCallback=this.jr.obtainRemoteAPI(aa.mr)}return(0,r._)(e,[{key:"invokeSync",value:function(e,t){return(0,zi.Z)(this.jr.syncBaseUrl,this.jr.id,"DialogEventCallback",e,t)}},{key:"SetDescriptionProperty",value:function(e){return this.description=e,!0}},{key:"SetTextValue",value:function(e){var t=e.GetItemID().toString();this.store.set(t,e)}},{key:"SetEndValue",value:function(e){this.callSetEndValue(e.toString())}},{key:"SetEnableValue",value:function(e){var t=Array.from({length:e.GetSize()},function(t,n){var r=e.GetAt(n);return{itemId:r.item_id.toString(),enable:r.is_enable}}).reduce(function(e,t){var n=t.itemId,r=t.enable;return e[n]=r,e},{});this.invokeSync("setElementsEnabled",t)}},{key:"GetStoreValue",value:function(){var e=this.jr.engine;if(!this.description)return new e.DialogStoreElementArray;var t=ua(this.description.element_array),n=this.invokeSync("getElementsValue"),r=JSON.parse(n),i=new e.DialogStoreElementArray;for(var a in r){var o=r[a],s=o.textValue,c=o.bindValue,u=o.treeSelectedValue,l=new e.DialogStoreElement,h=t[a],f=new e.WStringArray;l.Set(h.GetType(),(0,d.Ys)(e,a),(0,d.Eo)(e,s),(0,d.Ys)(e,c||""),(u||[]).reduce(function(t,n){return t.Add((0,d.Eo)(e,n)),t},f)),(0,d.xF)(f)}return i}},{key:"callSetEndValue",value:function(e){this.invokeSync("setEndValue",{reason:e})}},{key:"ShowDialog",value:function(){var e=this,t=this.jr.engine,n=this.description;if(!n)return!1;t.Library.ExecuteDialogHander((0,d.Ys)(t,"initialize"));var r=n.name.toString(),i=n.first_tab.toString(),a=n.width,o=n.height,s=n.char_width,c=n.char_height,u=n.align_children.toString(),l=n.element_array,h={name:r,first_tab:i,width:a,height:o,char_width:s,char_height:c,align_children:u,element_array:Array.from({length:l.GetSize()},function(n,r){return la(t,l.GetAt(r),e.store)})};function f(e){return t.Library.ExecuteDialogHander((0,d.Ys)(t,e))}this.store.forEach(function(e){e.delete()}),this.store.clear();var g=function(){f("validate")&&(f("commit"),f("ok"),f("destroy"),e.callSetEndValue("ok"))},p=function(){f("cancel"),f("destroy"),e.callSetEndValue("cancel")},v=function(){f("other"),f("destroy"),e.callSetEndValue("other")};return this.jr.syncInvoker.invokeSyncAndReturn(function(){return e.dialogCallback.showDialog({config:h,onClickOKButton:g,onClickCancelButton:p,onClickOtherButton:v,callFunction:f})})}}]),e}();function ua(e){return Array.from({length:e.GetSize()},function(t,n){var r=e.GetAt(n);return{itemId:r.GetItemID().toString(),element:r}}).filter(Boolean).reduce(function(e,t){var n=t.itemId,r=t.element;e[n]=r;var i={GetSize:function(){return r.GetSubElementCount()},GetAt:function(e){return r.GetSubElement(e)}};return Object.assign(e,ua(i)),e},{})}function la(e,t,n){var r=t.GetItemID().toString();n.has(r)&&(t=n.get(r));var a,o=t.GetType(),s=e.DialogElementType,c=(a={},(0,i._)(a,s.e_DialogElementButton.value,aa.sm.BUTTON),(0,i._)(a,s.e_DialogElementCheckBox.value,aa.sm.CHECK_BOX),(0,i._)(a,s.e_DialogElementRadio.value,aa.sm.RADIO),(0,i._)(a,s.e_DialogElementListBox.value,aa.sm.LIST_BOX),(0,i._)(a,s.e_DialogElementHierListBox.value,aa.sm.HIER_LIST_BOX),(0,i._)(a,s.e_DialogElementStaticText.value,aa.sm.STATIC_TEXT),(0,i._)(a,s.e_DialogElementEditText.value,aa.sm.EDIT_TEXT),(0,i._)(a,s.e_DialogElementOK.value,aa.sm.OK),(0,i._)(a,s.e_DialogElementOKCancel.value,aa.sm.OK_CANCEL),(0,i._)(a,s.e_DialogElementOKCancelOther.value,aa.sm.OK_CANCEL_OTHER),(0,i._)(a,s.e_DialogElementCluster.value,aa.sm.CLUSTER),(0,i._)(a,s.e_DialogElementImage.value,aa.sm.IMAGE),(0,i._)(a,s.e_DialogElementProgressBar.value,aa.sm.PROGRESS_BAR),(0,i._)(a,s.e_DialogElementLinkText.value,aa.sm.LINK_TEXT),(0,i._)(a,s.e_DialogElementPopup.value,aa.sm.POPUP),(0,i._)(a,s.e_DialogElementGap.value,aa.sm.GAP),(0,i._)(a,s.e_DialogElementView.value,aa.sm.VIEW),a)[o.value],u=e.DialogStaticTextElement,l=e.DialogEditTextElement,d=e.DialogRadioElement,h=e.DialogOKCancelOtherElement,f=e.DialogImageElement,g={};if(c===aa.sm.STATIC_TEXT){var p=new u(t);g.multiline=p.IsMultiline()}else if(c===aa.sm.EDIT_TEXT){var v=new l(t);g.multiline=v.IsMultiline(),g.text=v.GetText().toString(),g.isPassword=v.IsPassword(),g.isPopupEdit=v.IsPopupEdit(),g.isReadonly=v.IsReadonly(),g.isSpinEdit=v.IsSpinEdit()}else if(c===aa.sm.RADIO){var m=new d(t);g.groupId=m.GetGroupID().toString()}else if(c===aa.sm.OK_CANCEL_OTHER){var _=new h(t);g.cancelName=_.GetCancelName().toString(),g.cancelWidth=_.GetCancelWidth(),g.okName=_.GetOKName().toString(),g.okWidth=_.GetOKWidth(),g.otherName=_.GetOtherName().toString(),g.otherWidth=_.GetOtherWidth()}else if(c===aa.sm.IMAGE){var y=new f(t);g.imageWidth=y.GetImageWidth(),g.imageHeight=y.GetImageHeight();y.GetImageData()}var S=t.GetName().toString(),b=t.GetNextTab().toString(),I=t.GetWidth(),A=t.GetHeight(),P=t.GetCharWidth(),D=t.GetCharHeight(),E=t.GetFont().toString(),C=t.IsBold(),w=t.IsItalic(),k=t.GetAlignment().toString(),T=t.GetAlignChildren().toString(),F=function(e,t,n){var r=t.GetSubElementCount();return Array.from({length:r},function(r,i){var a=t.GetSubElement(i);return la(e,a,n)})}(e,t,n);return{name:S,item_id:r,type:c,next_tab:b,width:I,height:A,char_width:P,char_height:D,font:E,bold:C,italic:w,alignment:k,align_children:T,element_array:F,additional_attributes:g}}var da=function(){function e(n){(0,t._)(this,e),(0,i._)(this,"jr",void 0),this.jr=n}return(0,r._)(e,[{key:"send",value:function(e,t){(0,zi.Z)(this.jr.syncBaseUrl,this.jr.id,"PrintEventCallback",e,t)}},{key:"Print",value:function(e,t){var n=this,r=this.jr.engine,i=t.is_reverse,a=t.page_range,o=t.print_content,s=t.is_show_ui,c=t.is_print_as_image,u=t.print_range_mode,l=function(e){return Array.from({length:e.GetSegmentCount()},function(t,n){var r=e.GetSegmentStart(n),i=e.GetSegmentEnd(n);return r===i?(r+1).toString():"".concat(r+1,"-").concat(i+1)}).join(",")}(a),d=function(){switch(o){case r.PrintContent.e_PrintContentDocument:return aa.cR.Doc;case r.PrintContent.e_PrintContentDocAndAnnots:return aa.cR.DocAndAnnot;case r.PrintContent.e_PrintContentFormFieldsOnly:return aa.cR.FieldsOnly}return aa.cR.Doc}(),h=function(){switch(u){case r.PrintRangeMode.e_PrintRangeModeAll:return aa.Wx.All;case r.PrintRangeMode.e_PrintRangeModeCurrentView:return aa.Wx.CurrentView;case r.PrintRangeMode.e_PrintRangeModeCurrentPage:return aa.Wx.CurrentPage;case r.PrintRangeMode.e_PrintRangeModePages:return aa.Wx.Pages;case r.PrintRangeMode.e_PrintRangeModePortfolioSelected:return aa.Wx.PortfolioSelected;case r.PrintRangeMode.e_PrintRangeModePortfolioAll:return aa.Wx.PortfolioAll}return aa.Wx.All}();return this.jr.invokeAsSyncAndReturn(function(){return n.jr.printCallbackAPI.print({pages:l,type:d,reverse:i,showUI:s,printAsImage:c,printRangeMode:h})})}}]),e}(),ha=__webpack_require__(4581),fa=__webpack_require__.n(ha);function ga(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=t[0];if(i.match(/^\w+?:\/\//)){var a=i.match(/^(\w+?:\/\/[^\/]+)(\/?.*)/);a&&(r=a[1],t[0]=a[2]||"/")}var o=t.filter(function(e){return"string"==typeof e&&e.length>0}),s=o.map(function(e){return e.replace(/[\/\\]+/,"/").split("/").filter(function(e,t,n){return""!==e||0===t})}).reduce(function(e,t){return t.forEach(function(t,n){switch(t){case".":break;case"..":e.pop();break;case"":e=[""];break;default:e.push(t)}}),e},[]).join("/");return o.length>0&&(/[\/\\\\]/.test(o[0][0])||0===o[0].indexOf(".."))&&"/"!==s[0]?s="/"+s:o.length>0&&o[0]&&0===o[0].indexOf("./")&&(s="./"+s),r?r+s:s}var pa=function(){function n(e){(0,t._)(this,n),(0,i._)(this,"jr",void 0),(0,i._)(this,"customSpellChecker",void 0),(0,i._)(this,"typos",void 0),(0,i._)(this,"languagePatterns",void 0),this.jr=e,this.typos=[],this.languagePatterns={Latin:/[\u0027\u002D\u0041-\u005A\u0061-\u007A\u00C0-\u00FF]/,Cyrillic:/[\u0400-\u04ff]/,Arabic:/[\u0600-\u06FF]/}}return(0,r._)(n,[{key:"updateLanguagePatterns",value:function(e){return this.languagePatterns=e,Promise.resolve()}},{key:"appendDictionaries",value:function(t){var n=this,r=Object.keys(t).map(function(n){return(0,e._)(function(){var e,r,i,a,o,c;return(0,l.Jh)(this,function(u){switch(u.label){case 0:return e=ga(t[n],"index.aff"),r=ga(t[n],"index.dic"),[4,Promise.all([va(e),va(r)])];case 1:return i=s._.apply(void 0,[u.sent(),2]),a=i[0],o=i[1],c=new d.N5,setTimeout(function(){c.resolve(new(fa())(n,a,o))}),[2,c.promise]}})})()});return Promise.all(r).then(function(e){n.typos=n.typos.concat(e)})}},{key:"replaceDictionary",value:function(e,t){var n=this,r=ga(t,"index.aff"),i=ga(t,"index.dic");return Promise.all([va(r),va(i)]).then(function(t){var r=(0,s._)(t,2),i=r[0],a=r[1],o=new(fa())(e,i,a),c=n.typos.findIndex(function(t){return t.dictionary===e});c>=0?n.typos[c]=o:n.typos.push(o)})}},{key:"isSeparateCharacter",value:function(e){var t=String.fromCodePoint(e);for(var n in this.languagePatterns){if(this.languagePatterns[n].test(t))return!0}return!1}},{key:"check",value:function(e){var t=this;return this.customSpellChecker?this.jr.invokeAsSyncAndReturn(function(){return t.customSpellChecker.check(e)}):this.typos.some(function(t){return t.check(e)})}},{key:"getSuggestedWords",value:function(e){var t=this;return this.customSpellChecker?this.jr.invokeAsSyncAndReturn(function(){return t.customSpellChecker.getSuggestedWords(e)}):this.typos.map(function(t){return t.suggest(e)}).flat()}},{key:"toggleCustomSpellChecker",value:function(e){this.customSpellChecker=e?this.jr.obtainRemoteAPI(d.Dg):void 0}}]),n}();function va(t){return(0,e._)(function(){var e,n,r;return(0,l.Jh)(this,function(i){switch(i.label){case 0:return[4,fetch(t)];case 1:return[4,i.sent().blob()];case 2:return e=i.sent(),n=new FileReader,r=new d.N5,n.onload=function(){r.resolve(n.result)},n.readAsText(e,"utf8"),[2,r.promise]}})})()}var ma=function(){function e(n){(0,t._)(this,e),(0,i._)(this,"pdfJR",void 0),this.pdfJR=n}return(0,r._)(e,[{key:"AddToDictionary",value:function(){0}},{key:"CheckWord",value:function(e){return this.pdfJR.spellChecker.check(e.toString())}},{key:"GetCodePage",value:function(){return 0}},{key:"EnableSpellCheck",value:function(){return!0}},{key:"GetSuggestedWord",value:function(e){var t=this.pdfJR.engine;return this.pdfJR.spellChecker.getSuggestedWords(e.toString()).reduce(function(e,t){return e},new t.WStringArray)}},{key:"Ignore",value:function(){console.log("spell check","Ignore",arguments)}},{key:"IsCurSCSupWord",value:function(e){return this.pdfJR.spellChecker.isSeparateCharacter(e)}},{key:"OnEnd",value:function(){0}},{key:"OnHit",value:function(){0}},{key:"OnStart",value:function(){0}},{key:"Release",value:function(){0}}]),e}(),_a=function(){function e(n){(0,t._)(this,e),(0,i._)(this,"jr",void 0),(0,i._)(this,"layoutMode",void 0),(0,i._)(this,"language",void 0),(0,i._)(this,"languageName",void 0),(0,i._)(this,"viewerRotation",void 0),(0,i._)(this,"docFileName",void 0),(0,i._)(this,"visiblePages",void 0),(0,i._)(this,"mousePosition",void 0),(0,i._)(this,"pageScale",void 0),(0,i._)(this,"currentPage",void 0),(0,i._)(this,"curDocId",void 0),(0,i._)(this,"libPath",void 0),this.jr=n,this.languageName="en-US",this.visiblePages=new Map,this.mousePosition={x:0,y:0},this.pageScale={zoomMode:aa.cx.ZoomFitHorz,pageIndex:0,top:0},this.currentPage=0}return(0,r._)(e,[{key:"gsdk",get:function(){return this.jr.engine}},{key:"getLayoutMode",value:function(){return this.layoutMode||this.gsdk.LayoutMode.e_LayoutModeContinuous}},{key:"getMousePosition",value:function(){return new this.gsdk.PointF(this.mousePosition.x,this.mousePosition.y)}},{key:"getPageScale",value:function(){return this.pageScale}},{key:"getLanguageName",value:function(){return this.languageName||"en-US"}},{key:"getLanguage",value:function(){return this.language||this.gsdk.Language.e_LanguageENU}},{key:"getCurrentPage",value:function(){return this.currentPage}},{key:"setLayoutMode",value:function(e){var t=this.gsdk.LayoutMode;switch(e){case"continuous-view-mode":default:this.layoutMode=t.e_LayoutModeContinuous;break;case"single-page-view-mode":this.layoutMode=t.e_LayoutModeSinglePage;break;case"facing-continuous-page-view-mode":this.layoutMode=t.e_LayoutModeContinuousFacing;break;case"facing-page-view-mode":this.layoutMode=t.e_LayoutModeFacing}}},{key:"setMousePosition",value:function(e,t){this.mousePosition={x:e,y:t}}},{key:"setPageScale",value:function(e){this.pageScale=e}},{key:"setLanguage",value:function(e){var t=this.gsdk.Language;this.languageName=e,this.language=function(e){switch(e){case"zh-cn":return t.e_LanguageCHS;case"zh-tw":return t.e_LanguageCHT;case"da":return t.e_LanguageDAN;case"de":case"de-de":return t.e_LanguageDEU;case"en":case"en-us":return t.e_LanguageENU;case"es":case"es-419":return t.e_LanguageESP;case"fr":case"fr-fr":return t.e_LanguageFRA;case"it":case"it-it":return t.e_LanguageITA;case"ko":case"ko-kr":return t.e_LanguageKOR;case"ja":case"ja-jp":return t.e_LanguageJPN;case"nl":case"nl-nl":return t.e_LanguageNLD;case"no":return t.e_LanguageNOR;case"pt-br":return t.e_LanguagePTB;case"fi":return t.e_LanguageSUO;case"sv":return t.e_LanguageSVE;default:return t.e_LanguageUnknown}}((e||"").toLowerCase())}},{key:"setCurrentPage",value:function(e){this.currentPage=e}},{key:"setCurrentDocId",value:function(e){this.curDocId=e}},{key:"getCurrentDocId",value:function(){return this.curDocId}},{key:"setLibPath",value:function(e){this.libPath=e}},{key:"getLibPath",value:function(){return this.libPath||"/lib"}},{key:"setViewerRotation",value:function(e){this.viewerRotation=e}},{key:"getViewerRotation",value:function(){return this.viewerRotation||0}},{key:"setDocFileName",value:function(e){this.docFileName=e||""}},{key:"getDocFileName",value:function(){return this.docFileName||""}},{key:"setVisiblePages",value:function(e,t){this.visiblePages.set(e,t)}},{key:"getVisiblePages",value:function(e){return this.visiblePages.get(e)||[]}}]),e}(),ya="cache",Sa=new g.Z(ya,"FoxitPDFSDKForWeb_"+ya),ba="wasmBinary",Ia="asmMem",Aa="FOPN_foweb",Pa=[{bsStandardName:"Helvetica",bsSubstName:"Arial",wWeight:400,bItalic:0},{bsStandardName:"Helvetica-Bold",bsSubstName:"Arial",wWeight:700,bItalic:0},{bsStandardName:"Helvetica-BoldOblique",bsSubstName:"Arial",wWeight:700,bItalic:1},{bsStandardName:"Helvetica-Oblique",bsSubstName:"Arial",wWeight:400,bItalic:1},{bsStandardName:"Times-Roman",bsSubstName:"Times New Roman",wWeight:400,bItalic:0},{bsStandardName:"Times-Bold",bsSubstName:"Times New Roman",wWeight:700,bItalic:0},{bsStandardName:"Times-BoldItalic",bsSubstName:"Times New Roman",wWeight:700,bItalic:1},{bsStandardName:"Times-Italic",bsSubstName:"Times New Roman",wWeight:400,bItalic:1}],Da=function(){function n(e){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.postMessageToUi,o=i.cache,s=void 0===o?{}:o,c=i.enginePath,u=void 0===c?".":c,l=i.fontPath,h=void 0===l?"http://webpdf.foxitsoftware.com/webfonts":l,f=i.readBlock,g=void 0===f?8192:f,p=(i.fontMap,i.brotli),v=i.fontInfoPath,m=i.syncBaseUrl;(0,t._)(this,n);var _=(0,d.dD)(),y=_.promise;this.jrEnginePromise=y,this.enginePath=u,this.fontPath=h,this.fontInfoPath=v,this.serverFontCache={};var S=p.core;this.customFontMaps=[],this.certCacheMap=new Map,this.isFontCacheEnabled=!0,this.isEnableJavaScript=!0,this.hasSetJsPlugIns=!1,this.isEnableLoadJSEngine=!0,this.configurations={annotation:{cemicircleCloudy:!1,syncTextScaling:!1},serviceWorkerAvailable:!0,docPermissions:-1},m?this.syncBaseUrl=m:this.disableLocalFont=!0,this._serviceWorkerReady=!1;var b,I={onRuntimeInitialized:function(){},printErr:function(e){console.warn("[JR ENGINE]",e)},locateFile:function(e){return e.endsWith(".wasm")?!1===S||-1===e.indexOf("gsdk.wasm")||-1!==navigator.userAgent.indexOf("Edge")?[u,e].join("/")+"?h="+Pn:"data:application/octet-stream;base64,"+[u,e+".brotli"].join("/")+"?h="+Pn:/^\w+?:\/\/.*/.test(e)?e:[u,e].join("/")+"?h="+Pn},readBinary:function(e){var t="data:application/octet-stream;base64,";return 0===e.indexOf(t)&&(e=e.replace(t,"")),new Promise(function(t,n){!1===S?wa(e,t,n):Ca(e,t,n,ba,a,s.wasmBinary)})},readAsync:function(e,t,n){if(!1===S)wa(e,t,n);else{if(s.asmMem===e)return void Sa.get(s.asmMem).then(function(r){r?t(r):Ca(e,t,n,Ia,a,s.asmMem)},function(){Ca(e,t,n,Ia,a)});Ca(e,t,n,Ia,a)}}};if(s.wasmBinary===[u,"gsdk.wasm.brotli"].join("/")+"?h="+Pn){var A=(0,d.dD)();b=A.promise,Sa.get(ba).then(function(e){e&&(I.wasmBinary=e)}).finally(function(){A.resolve()})}else b=Promise.resolve();b.then(function(e){var t;return I.wasmBinary||(t=Fn()?I.readBinary(I.locateFile("gsdk.wasm")).then(function(e){return e&&(I.wasmBinary=e)}):Promise.resolve()),t}).then(function(){return GSDK(I).then(function(e){r.engine=e;var t=e.WString,n=e.String,i=t.prototype.toString,a=n.prototype.toString,o=r;t.prototype.toString=function(){this.toString=i;try{return o.getPDFString(this)}finally{delete this.toString}},n.prototype.toString=function(){this.toString=a;try{return o.getPDFString(this)}finally{delete this.toString}},t.prototype.toString.overloadTable=i.overloadTable,n.prototype.toString.overloadTable=a.overloadTable,e.wasmBinary=null,GSDK=null,r.annotManager=new Wt(e),r.actionManager=new cn(e),r.graphicsObjectManager=new An(e,r),_.resolve()})}),this.pdfDocCache={},this.fontInfoMap={},this.fontInfoNameMap={},this.userName="Foxit Web",this.defaultReadBlockSize=g,this.id="pdf_jr_id_"+Date.now()+Math.random(),this.uiStateManager=new _a(this),this.defineRemoteAPI(aa.qv,this.uiStateManager),this.spellChecker=new pa(this),this.defineRemoteAPI(d.e8,this.spellChecker),this.remoteFXJSEActionCallbackAPI=this.obtainRemoteAPI(aa.C5),this.printCallbackAPI=this.obtainRemoteAPI(aa.uM),this.syncInvoker=new d.iB(this.syncBaseUrl,this.id)}return(0,r._)(n,[{key:"isSyncInvokerAvailable",value:function(){return this.configurations.serviceWorkerAvailable}},{key:"obtainRemoteAPI",value:function(e){return this.createMessageChannel(e).remoteImplementation}},{key:"defineRemoteAPI",value:function(e,t){var n=this.createMessageChannel(e,t);return function(){return n.destroy()}}},{key:"createMessageChannel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new d.bS(globalThis,this.id+"."+e,t)}},{key:"setServiceWorkerReady",value:function(e){this._serviceWorkerReady=e}},{key:"setConfiguration",value:function(e){if(this.configurations=(0,d.Qk)(this.configurations,e),this.configurations.spellChecker){var t=this.configurations.spellChecker,n=t.dictionaries,r=t.languagePatterns;n&&this.spellChecker.appendDictionaries(n),r&&this.spellChecker.updateLanguagePatterns(r)}}},{key:"getDocPermissions",value:function(){return this.configurations.docPermissions}},{key:"initFontManager",value:function(){var e=this;this.jrEnginePromise.then(function(){var t=e.engine,n=0,r=0;t.setThirdPartyFontMgr(t.ThirdPartyFontMgrCallback.implement({GetThirdPartyFont:function(n,r,i,a,o,s){0===r.length&&(r=e.getDefaultFont(i));for(var c=0;c<Pa.length;c++)if(r===Pa[c].bsStandardName){var u=8388608|s;c%4==1||c%4==2?u=16777216:u&=-16777217,c%4>=2?u|=33554432:u&=-33554433,r=Pa[c].bsSubstName,a=Pa[c].bItalic,o=Pa[c].wWeight,s=u;break}try{var l=[r.toLowerCase(),i,a,o,s].join("-");if(e.fontInfoMap[l])return e.fontInfoMap[l];e.initLocalFont();var d=Date.now(),h=j(e.fontPath,r,i,a,o,s,0,e);if(postMessage({workflow:"fontProfile",fontName:r,time:Date.now()-d}),!h||0===h.byteLength)return null;var f=t.ThirdPartyFontInfo.implement({GetFaceIndex:function(){return 0},GetFontFileData:function(){var e=t._malloc(h.byteLength);return t.HEAPU8.set(new Uint8Array(h),e),e},GetFontFileSize:function(){return h.byteLength}});return e.fontInfoMap[l]=f}catch(t){return isNaN(t)||(t=e.engine.getErrorCode(t)),console.warn(t),null}},GetWebFontFileStream:function(e){var n=function(e){var t=y[e-1];return t?N(t.url,t.isBrotli):null}(e);if(!n)return null;var r=null;try{r=t.StreamCallback.implement({Release:function(){},Flush:function(){return!0},GetSize:function(){return n.byteLength},WriteBlock:function(e,t,n){return console.warn("readonly mode, write function shouldn't be called"),!0},ReadBlock:function(e,r,i){var a=n.slice(r,r+i);return t.HEAPU8.set(a,e),!0}})}catch(e){isNaN(e)||(e=this.engine.getErrorCode(e)),console.warn(e)}return r},GetFontFilesPos:function(e){return function(e){return 0===y.length?0:(e+1)%(y.length+1)}(e)},GetPlatformIDFromThirdParty:function(){return Xn},CountCachedFontFromThirdParty:function(){return e.getCustomUploadFontsCount()},MGetCachedFontDataFromThirdParty:function(t){r=t;var i=e.getCustomUploadFontByIndex(t);if(!i)return 0;var a=new Uint8Array(i.value);n=a.byteLength;var o=e.engine._malloc(n);return e.engine.HEAPU8.set(a,o),o},GetCachedName:function(){var t=e.getCustomUploadFontByIndex(r);if(!t)return 0;var n="custom__"+t.name;return new e.engine.WString(n)},MGetFontFileDataByNameFromThirdParty:function(t){if(t=(t=t.toString()).trim(),e.isFontCacheEnabled&&(e.fontDataCache||(e.fontDataCache=new Map),""!=t&&e.fontDataCache.has(t))){var r=e.fontDataCache.get(t);return n=r.fontSize,r.fontData}var i,a=/^custom__/;if(a.test(t)){t=t.replace(a,"");var o=e.getCustomUploadFontByName(t);i=o?o.value:null}else i=e.getFontFromServer(t);if(!i)return n=0,0;var s=new Uint8Array(i);n=s.byteLength;var c=e.engine._malloc(n);return e.engine.HEAPU8.set(s,c),e.isFontCacheEnabled&&e.fontDataCache.set(t,{fontData:c,fontSize:n}),c},MGetNotExistFontFamilyFromThirdParty:function(){var t=e.getNotExistFontsString();if(!t)return 0;var r=new e.engine.String(t),i=e.engine.HEAPU8.slice(r.GetBuffer(),r.GetBuffer()+t.length);n=t.length;var a=e.engine._malloc(t.length);return e.engine.HEAPU8.set(i,a),a},GetSize:function(){return n},MGetFoxitFontDataByFontNameFromThirdParty:function(r){var i=e.enginePath+"/../FoxitFonts/"+r.toString(),a=e.getFontFromServer(i,!1);if(!a)return n=0,0;var o=new Uint8Array(a);n=o.byteLength;var s=t._malloc(n);return t.HEAPU8.set(o,s),s},MGetNotExistFreeFontFileName:function(){return 0},MGetNotExistFreeFontFileNameFromThirdParty:function(){return new t.String("")},MGetAllFreeFontInfoFromThirdParty:function(){e.initLocalFont();var r=e._localFontInfos||"",i=e.getAllFreeFont(e.fontInfoPath);if(r){var a="",o=0;if(i){var s=(a=(new FileReaderSync).readAsText(new Blob([i]))).split("\r\n");o=s.length}a+=r.split("\r\n").map(function(e,t){return e.split(",").length<9?"":e.replace(/^0/,t+o)}).join("\r\n"),i=(new FileReaderSync).readAsArrayBuffer(new Blob([a],{type:"text/csv"}))}if(!i&&!r)return n=0,0;var c=new Uint8Array(i);n=c.byteLength;var u=t._malloc(n);return t.HEAPU8.set(c,u),u}}));var i=0;t.SetThirdPartyCMapProVider(t.ThirdPartyCMapProviderCallback.implement({MGetCMapFileDataFromThirdParty:function(n){var r=e.enginePath+"/../cmaps/"+n.toString(),a=e.getFontFromServer(r,!1);if(!a)return i=0,0;var o=new Uint8Array(a);i=o.byteLength;var s=t._malloc(i);return t.HEAPU8.set(o,s),s},GetSize:function(){return i}}))}).then(function(){setTimeout(function(){v.getAllKeys().then(function(e){for(var t=e.length;t--;)(function(e){var t;try{t=new URL(e).protocol}catch(e){}"http:"===t||"https:"===t?v.get(e).then(function(t){t&&t.byteLength>0?w[e]=t:v.remove(e)},function(){}):v.remove(e)})(e[t])},function(){})},0)})}},{key:"disableLoadLocalFont",value:function(e){this.disableLocalFont=e}},{key:"initLocalFont",value:function(){if(!this.disableLocalFont&&void 0===this._localFontInfos){try{this._localFontInfos=this.syncMessage("LocalFont","getLocalFontInfos")}catch(e){return}var e=this._localFontInfos,t={};e.split("\r\n").forEach(function(e,n){var r=e.split(",");if(r.length<9)return"";var i=r[1].replace(/\s/g,"").replace(/-/g,"").toLowerCase(),a=r[7].replace(/\s/g,"").replace(/-/g,"").toLowerCase(),o=r[6].replace(/\s/g,"").replace(/-/g,"").toLowerCase(),s=r[3],c=Number(r[8]),u=Number(r[9+c]),l=Number(r[10+c]),d=Number(r[12+c]);Number(r[13+c]);(t[i]=t[i]||[]).push({italic:u,weight:l,postscriptName:s,charsets:(0,te.nY)(d)}),i!==a&&(t[a]=t[a]||[]).push({italic:u,weight:l,postscriptName:s,charsets:(0,te.nY)(d)}),i!==o&&a!==o&&(t[o]=t[o]||[]).push({italic:u,weight:l,postscriptName:s,charsets:(0,te.nY)(d)})}),W(t)}}},{key:"setFontCacheEnabled",value:function(e){this.isFontCacheEnabled=e}},{key:"getFontBuffer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:400;return j(this.fontPath,e,r,n,i,t,0,this)}},{key:"updatePdfDocCache",value:function(e){var t=e.id;this.pdfDocCache[t]=e}},{key:"getPDFDocById",value:function(e){return this.pdfDocCache[e]||null}},{key:"destroyDoc",value:function(e){delete this.pdfDocCache[e]}},{key:"getLicenseType",value:function(){if(!this.licenseType){var e=this.engine.Library.GetLicenseType;this.licenseType=e?e().value:1}}},{key:"isLicenseEvaluation",value:function(){return 1===this.licenseType}},{key:"getStampUrl",value:function(e,t){var n=this.uiStateManager.getLibPath(),r=this.uiStateManager.getLanguageName(),i="".concat(e,"/").concat(t,".pdf");return"".concat(n.replace(/\/+$/,""),"/stamps/").concat(r,"/").concat(i)}},{key:"doAfterCheckLicense",value:function(){this.getLicenseType(),this.engine.Library.SetDefaultFileSize(this.defaultReadBlockSize),this.engine.Library.SetRenderConfig(new this.engine.RenderConfig(1)),this.engine.setCacheSize(572),this.initFontManager(),function(e){var t=e.engine,n=e.id;if(t.initActionCallback){var r=e.remoteFXJSEActionCallbackAPI,a=e.uiStateManager,o=e.syncInvoker;t.initActionCallback();var s,c=new Map,u=zi.Z.bind(null,e.syncBaseUrl,n,"ActionCallback"),l=t.JSTimerCallback.implement({SetTimeout:function(e,n){var r=setTimeout(function(){t.TimerProc(n,0,r,0)},e);return r}});t.Library.SetJSTimer(l);var h=(s={Release:function(){},InvalidateRect:function(e,t,n){return m(t,n,!1),!0},GetCurrentPage:function(e){return a.getCurrentPage()},SetCurrentPage:function(t,n){var i=e.findPDFDocByGSDKDoc(t);i&&r.gotoPage(i.id,n)},GotoPage:function(t,n){var i=e.findPDFDocByGSDKDoc(t);if(i){var a=(0,aa.FI)(e.engine,t,n);r.gotoPage(i.id,a)}},GetPageRotation:function(e,t){return{value:0}},SetPageRotation:function(e,t,n){return!1},OnAddedAnnot:function(n,i,a){var o=e.findPDFDocByGSDKDoc(n);if(!o)return!1;var s=o.getPageFromCache(i);if(s){var c=a.GetDict().GetObjNum();s._setAnnotIdAt(c,a.GetIndex());var u={pageIndex:i,objNumber:c};r.annotAdded(o.id,u),a.GetType()===t.AnnotType.e_Highlight&&m(i,a.GetRect(),!0)}},OnRemovedAnnot:function(t,n,i){var a={pageIndex:n,objNumber:i},o=e.findPDFDocByGSDKDoc(t),s=o.getPageFromCache(n);s&&s.reloadAnnots(),r.annotRemoved(o.id,a)},OnRemovedPages:function(t,n,i){var a=e.findPDFDocByGSDKDoc(t);a.cleanupRemovedPages(n,i),r.pagesRemoved(a.id,n,i)},InsertFromTemplates:function(t,n,i,a,o){var s=e.findPDFDocByGSDKDoc(t),c=s.loadInsertPage(n);r.pageInserted(s.id,n,c)},SetPageTemplateVisible:function(t,n,r){return e.findPDFDocByGSDKDoc(t).hideTemplate({name:n.toString},r)},AddPageTemplate:function(e,t,n){return!1},DeletePageTemplate:function(t,n){return e.findPDFDocByGSDKDoc(t).removeTemplate(n.toString())},ExecuteNamedAction:function(e,t){return!1},SetDocChangeMark:function(t,n){var i=e.findPDFDocByGSDKDoc(t);return!!i&&(r.setDocChangeMark(i.id,n),!0)},GetDocChangeMark:function(t){var n=e.findPDFDocByGSDKDoc(t);return!!n&&o.invokeSyncAndReturn(function(){return r.getDocChangeMark(n.id)})},ClearChangeMark:function(t){var n=e.findPDFDocByGSDKDoc(t);n&&r.clearDocChangeMark(n.id)},GetOpenedDocCount:function(){return 1},GetOpenedDoc:function(e){return null},GetCurrentDoc:function(){var t=a.getCurrentDocId();if(!t)return null;var n=e.getPDFDocById(t);return n?n.doc:null},CreateBlankDoc:function(){return new t.PDFDoc},OpenDoc:function(e,t){return!1},Beep:function(e){return o.invokeSyncAndReturn(function(){return r.beep(e)})},Response:function(e,n,r,i,a){var o=e.toString(),s=n.toString(),c=r.toString(),l=i.toString(),d=u("prompt",{question:o,title:s,defaultValue:c,label:l,isPassword:a});return new t.WString(d)},GetFilePath:function(e){var n=a.getDocFileName()||"";return n.length>1&&(n="/"+n),new t.WString(n)},Print:function(t,n,r,i,a,o,s,c){var u=transformGSDKRange(r,s),l=aa.cR.Doc;return c&&(l=aa.cR.DocAndAnnot),(0,zi.Z)(e.syncBaseUrl,e.id,"PrintEventCallback","print",{pages:u,type:l}),!0},SubmitForm:function(t,n,i,a){var o=e.findPDFDocByGSDKDoc(t);return!!o&&(r.submitForm(o.id,new Blob([n]),a),!0)},LaunchURL:function(e){var t=e.toString();try{return u("launchURL",{url:t})}catch(e){return!0}},BrowseFile:function(){return new t.WString("fake path")}},(0,i._)(s,"BrowseFile",function(e,n,r){return new t.WString("fake path")}),(0,i._)(s,"GetLanguage",function(){return a.getLanguage()}),(0,i._)(s,"Scroll",function(e){r.scroll({x:e.x,y:e.y})}),(0,i._)(s,"GetMousePosition",function(){return a.getMousePosition()}),(0,i._)(s,"GetPageWindowRect",function(){return new t.CFX_FloatRect(0,1,0,1)}),(0,i._)(s,"getPageScale",function(){return a.getPageScale().zoomFactor}),(0,i._)(s,"GetPageZoomMode",function(){return a.getPageScale().zoomMode}),(0,i._)(s,"GetLayoutMode",function(){return a.getLayoutMode()}),(0,i._)(s,"Alert",function(e,t,n,r){var i=e.toString(),a=t.toString();return parseInt(u("alert",{message:i,title:a,type:n,icon:r}))}),(0,i._)(s,"GetIdentityProperties",function(){var n=e.getUserName()||"";return new t.IdentityProperties((0,d.Eo)(t,""),(0,d.Eo)(t,""),(0,d.Eo)(t,""),(0,d.Eo)(t,n))}),(0,i._)(s,"PopupMenu",function(e){if(null===e||0===e.GetSize())return new t.WString("");var n=Array.from({length:e.GetSize()},function t(n,r){var i=e.GetAt(r),a=i.name.toString();return{id:a,label:a,isSeparator:"-"===a,items:Array.from({length:i.sub_menu_list_array.GetSize()},t)}}),i=o.invokeSyncAndReturn(function(){return r.popupMenu(n)});return new t.WString(i||"")}),(0,i._)(s,"PopupMenuEx",function(e){if(null===e||0===e.GetSize())return new t.WString("");var n=Array.from({length:e.GetSize()},function t(n,r){var i=e.GetAt(r),a=i.name.toString();return{id:a,label:a,isSeparator:"-"===a,items:Array.from({length:i.sub_menu_item_array.GetSize()},t),extra:{enabled:i.is_enabled,checked:i.is_checked}}}),i=o.invokeSyncAndReturn(function(){return r.popupMenu(n)});return new t.WString(i||"")}),(0,i._)(s,"PrintLineConsole",function(e){var t=e.toString();"======== Console : exec ========\r\n\r\n"===t||t.includes("[ Line: -0001 { (null) } ] : (null)")||(console.log(t),u("printLineConsole",t))}),(0,i._)(s,"GetAppInfo",function(e){var n="";switch(e){case t.AppInfoType.e_AppInfoTypeFormsVersion:n="7.3";break;case t.AppInfoType.e_AppInfoTypeViewerType:n="Exchange-Pro";break;case t.AppInfoType.e_AppInfoTypeViewerVariation:n="Full Expired";break;case t.AppInfoType.e_AppInfoTypeViewerVersion:n="11.007";break;case t.AppInfoType.e_AppInfoTypeAppVersion:n="10.0"}return new t.WString(n)}),(0,i._)(s,"JSLoadString",function(n){var r=e.jsMessages[n];return void 0===r&&(r=""),new t.WString(r)}),(0,i._)(s,"JSLoadStringEX",function(n,r){var i="";switch(n){case sa.C.ID_JS_JSRANGE1:i=(i=e.jsMessages[sa.C.ID_JS_JSRANGE1]).replace("%s%[1]",r.GetAt(0).toString()).replace("%s%[2]",r.GetAt(1).toString());break;case sa.C.ID_JS_JSRANGE2:i=(i=e.jsMessages[sa.C.ID_JS_JSRANGE2]).replace("%ls",r.GetAt(0).toString());break;case sa.C.ID_JS_JSRANGE3:i=(i=e.jsMessages[sa.C.ID_JS_JSRANGE3]).replace("%ls",r.GetAt(0).toString())}return new t.WString(i)}),(0,i._)(s,"MailData",function(e,t,n,r,i,a,o,s){return!1}),(0,i._)(s,"VerifySignature",function(t,n){var i=e.findPDFDocByGSDKDoc(t);if(!i)return!1;var a=n.GetControl(0).GetWidget(),s=a.GetPage().GetIndex(),c=a.GetDict().GetObjNum(),u=i.formModule.signatureAPI.getVerificationDataSync(n);return o.invokeSyncAndReturn(function(){return r.verifySignature(i.id,{pageIndex:s,objNumber:c},u)})}),(0,i._)(s,"ExecuteMenuItem",function(e){u("alert",{message:"Executing MenuItem is currently not supported for dynamic XFA.",title:"",type:0,icon:3})}),(0,i._)(s,"AddFileAttachmentObject",function(e,t){return u("alert",{message:"Adding File Attchment is currently not supported.",title:"",type:0,icon:3}),!1}),(0,i._)(s,"GetPrinterNameList",function(){var t=e.engine,n=new t.WStringArray;return n.Add(new t.WString("")),n}),(0,i._)(s,"GetIconPage",function(n){var r=gt(n=n.toString());if("Unknown"===r)return null;var i=e.getStampUrl(r,n),a=e.createReaderCallback(i),o=(0,d.Ys)(t,""),s=t.createPDFDocWithReaderCallback(a,!1);return s.Load(o),s.GetPage(0)}),(0,i._)(s,"GetViewerRotation",function(){return a.getViewerRotation()}),(0,i._)(s,"CountVisiblePages",function(t){var n=e.findPDFDocByGSDKDoc(t);return n?a.getVisiblePages(n.id).length:0}),(0,i._)(s,"GetVisiblePage",function(t,n){var r=e.findPDFDocByGSDKDoc(t);return r&&a.getVisiblePages(r.id)[n]||-1}),(0,i._)(s,"GetFileRead",function(e){return g(e.toString()).fileRead}),(0,i._)(s,"GetFileWrite",function(e){return p()}),(0,i._)(s,"GetFileStream",function(e){return p(!1)}),(0,i._)(s,"ImportFormFromXFAData",function(t,n){var r=e.findPDFDocByGSDKDoc(t);if(!r||!r.xfaDoc||r.xfaDoc.IsEmpty())return!1;var i=g(".xml;.xdp");if(!i.fileRead)return!1;var a=i.fileName.toLowerCase().endsWith(".xdp");return r.importFormFromXFAData(i.fileRead,a)}),(0,i._)(s,"SaveFileWrite",function(e,t){v(e,t.toString())}),(0,i._)(s,"SaveFileStream",function(e,t){v(e,t.toString())}),(0,i._)(s,"DocumentWillCloseByJS",function(t,n,i,a,s){var c=e.findPDFDocByGSDKDoc(t);c&&o.invokeSyncAndReturn(function(){return r.documentWillCloseByJS(c.id,n,i,a,s)})}),s),f=t.ActionCallback.implement(h);t.Library.SetActionCallback(f)}function g(e){try{var n=o.invokeSyncAndReturn(function(){return r.browseFile(e)});if(!n||!n.size)return null;var i=new oa.a(t),a=t.ReaderCallback.implement(i);return i.setGsdkStream(a),i.setFile(n),{fileRead:a,fileName:n.name}}catch(e){return d.mA.getLogger("actionCallback").warn(e),{fileRead:null,fileName:""}}}function p(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];try{var n=new oa.a(t),r=(e?t.WriterCallback:t.StreamCallback).implement(n);return n.setGsdkStream(r),c.set(r.Handle(),n),r}catch(e){return d.mA.getLogger("actionCallback").warn(e),null}}function v(e,t){var n=c.get(e.Handle());if(c.delete(e),n){var i=function(){var e="application/vnd.fdf";switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:".fdf"){case".txt":e="text/plain,charset=UTF-8";break;case".csv":e="text/csv,charset=UTF-8";break;case".xml":e="application/xml";break;case".json":break;case".fdf":e="application/vnd.fdf";break;case".xfdf":e="application/vnd.adobe.xfdf"}return e}(t),a=n.getBlob(i);o.invokeSyncAndReturn(function(){return r.saveAs(a,t,i)})}}function m(e,t,n){t.Normalize(),r.invalidateRect(e,{left:t.left,top:t.top,right:t.right,bottom:t.bottom},n)}}(this),this.registerCallbacks()}},{key:"checkLicense",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q.cm,r=(0,d.dD)();return this.jrEnginePromise.then(function(){return Vi(e),e.engine.initialize(t,n).toString().split(" ")}).then(function(t){var n=0===+t[0];return n&&e.doAfterCheckLicense(),r.resolve({flag:n,id:e.id,other:t.slice(1).join(" ")})}),r.promise}},{key:"checkLicense2",value:function(e){var t=this,n=(0,d.dD)();return this.jrEnginePromise.then(function(){return Vi(t),t.engine.initialize(e,"").toString().split(" ")}).then(function(e){return 0===+e[0]?(t.doAfterCheckLicense(),n.resolve({flag:!0,id:t.id,other:e.slice(1).join(" ")})):n.resolve({flag:!1})}),n.promise}},{key:"registerCallbacks",value:function(){var e=this.engine,t=e.DialogEventCallback.implement(new ca(this));e.Library.RegisterDialogEventCallback(t);var n=e.PrintEventCallback.implement(new da(this));e.Library.RegisterPrintEventCallback(n);var r=e.SpellCheckCallback.implement(new ma(this));e.Library.RegisterSpellCheckCallback(r)}},{key:"createNewPortfolioDoc",value:function(e,t,n){var r=this.engine,i=new FileReaderSync,o=new h.Z(this,{isCreatePortfolio:!0}),s=o.pdfPortfolio.portfolio;if(s.SetInitialViewMode(r.InitialViewMode.e_InitialViewTileMode),(0,a._)(e,Blob)){var c=i.readAsArrayBuffer(e),u=c.byteLength,l=r._malloc(u);r.HEAPU8.set(new Uint8Array(c),l);var d=r.createPDFDocWithBuffer(l,u);d.Load(new r.String("")),o.doc.InsertDocument(0,d,0,new r.WString),o.doc.RemovePage(1),l&&r._free(l),l=null}if(Array.isArray(t)&&t.length){var f=new r.PortfolioFolderNode(s.GetRootNode());t.forEach(function(e,t){var n=r.ReaderCallback.implement({Release:function(){},GetSize:function(){return e.size},GetPosition:function(){return e.size},ReadBlock:function(t,n,a){var o=new Uint8Array(i.readAsArrayBuffer(e.slice(n,n+a)));return r.HEAPU8.set(o,t),!0}}),a=f.AddFile(n,new r.WString(e.name));0===t&&s.SetInitialFileSpecKeyName(a.GetKeyName()),a.GetFileSpec().SetModifiedDateTime(z.Z.ToDateTime(r,e.lastModified||e.lastModifiedDate))});for(var g=s.GetSchemaFields(),p=0;p<g.GetSize();p++){if(g.GetAt(p).GetKeyName().toString()==s.GetSortingFieldKeyName().toString()){g.RemoveAt(p);break}}s.SetSchemaFields(g),s.SetSortingFieldKeyName(new r.String("FileName"))}this.setMetaData(o,n,"");var v=[];return o.getStream({writeStream:function(e,t,n){v.push(e)}},0).then(function(e){for(var t=new Uint8Array(e),n=0,r=0,i=v.length;r<i;r++){var a=v[r];t.set(new Uint8Array(a),n),n+=a.byteLength}return o.destroy(),t.buffer})}},{key:"createNewDocEx",value:function(e,t,n){var r=this;return this.createNewDoc(e,t,n,!1).then(function(e){return r.updatePdfDocCache(e),e.toJson()})}},{key:"createNewDoc",value:function(e,t,n){var r,i,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=new h.Z(this,{isCreate:!0});return this.setMetaData(o,e,t),n&&(n.width&&(r=n.width),n.height&&(i=n.height)),o.insertPage(0,r,i).then(function(e){if(!a)return o;var t=[];return o.getStream({writeStream:function(e,n,r){t.push(e)}},0).then(function(e){for(var n=new Uint8Array(e),r=0,i=0,a=t.length;i<a;i++){var s=t[i];n.set(new Uint8Array(s),r),r+=s.byteLength}return o.destroy(),n.buffer})})}},{key:"setMetaData",value:function(e,t,n){var r,i,a=this.engine,o=(0,$.Dp)(a,"Title"),s=(0,$.Dp)(a,"Author"),c=(0,$.Dp)(a,"Producer");r=t?(0,$.Dp)(a,t):(0,$.Dp)(a,"Untitled.pdf"),i=n?(0,$.Dp)(a,n):(0,$.Dp)(a,"Unknown");var u=(0,$.Dp)(a,"Foxit PDFWebSDK");e.setMetadataValue(o,r),e.setMetadataValue(s,i),e.setMetadataValue(c,u);var l=(new Date).toString();e.setMetadataValue("CreationDate",l),e.setMetadataValue("ModDate",l)}},{key:"findPDFDocByGSDKDoc",value:function(e){var t=this.engine;if((0,a._)(e,t.PDFDoc))for(var n in this.pdfDocCache){var r=this.pdfDocCache[n];if(r.doc&&!r.doc.IsEmpty()&&r.doc.Equals(e))return r}}},{key:"getPDFDoc",value:function(e){var t=new h.Z(this,e);return this.updatePdfDocCache(t),t}},{key:"getPDFDocByEngineDoc",value:function(e){var t=new h.Z(this,{doc:e});return this.updatePdfDocCache(t),t}},{key:"getFDFDoc",value:function(e){var t=this,n=e.size,r=e.getBuffer,i=e.release,a=this.engine.ReaderCallback.implement({Release:function(){i&&i()},GetSize:function(){return n},ReadBlock:function(e,n,i){var a=new Uint8Array(r(n,i));return t.engine.HEAPU8.set(a,e),!0}});return Promise.resolve(new this.engine.FDFDoc(a))}},{key:"getFDFFromURL",value:function(e){var t=this,n=+this.requestData("GET",!1,e,1,1,!0).getResponseHeader("Content-Range").match("bytes[^]+?/([^]+)")[1],r=this.engine.ReaderCallback.implement({Release:function(){},GetSize:function(){return n},ReadBlock:function(n,r,i){var a=new Uint8Array(t.requestData("GET",!1,e,r,i));return t.engine.HEAPU8.set(a,n),!0}});return Promise.resolve(new this.engine.FDFDoc(r))}},{key:"getPDFDocAsync",value:function(e){var t=e.size,n=e.getBuffer,r=e.release,i=new h.Z(this,{getBuffer:n,size:t,release:r,async:!0});return this.updatePdfDocCache(i),i}},{key:"getPDFDocByReaderCalback",value:function(e){var t=new h.Z(this.engine,{readerCallbackParams:e});return this.updatePdfDocCache(t),t}},{key:"getPDFDocByAsyncReaderCallback",value:function(e){var t=new h.Z(this.engine,{readerCallbackParams:e,async:!0});return this.updatePdfDocCache(t),t}},{key:"requestData",value:function(e,t,n,r,i,a){var o=new XMLHttpRequest;if(o.open(e,n,t),void 0!==r){var s="bytes="+r+"-"+(r+i-1);o.setRequestHeader("Range",s)}o.responseType="arraybuffer",o.send(null);var c=o.status;if(c>=200&&c<300||304===c)return a?o:o.response}},{key:"createReaderCallback",value:function(e){var t=this.engine;return this.engine.ReaderCallback.implement({jr:this,engine:t,url:e,load:function(){var e=this.jr.requestData("GET",!1,this.url),t=this.docBuffer=new Uint8Array(e);this.size=t.length},Release:function(){this.docBuffer=null},GetSize:function(){return this.size||this.load(),this.size},ReadBlock:function(e,t,n){this.size||this.load();var r=this.docBuffer.slice(t,t+n);return this.engine.HEAPU8.set(r,e),!0}})}},{key:"createReaderCallbackByBuffer",value:function(e){var t=this.engine;return this.engine.ReaderCallback.implement({jr:this,engine:t,load:function(){var t=this.docBuffer=new Uint8Array(e);this.size=t.length},Release:function(){this.docBuffer=null},GetSize:function(){return this.size||this.load(),this.size},ReadBlock:function(e,t,n){this.size||this.load();var r=this.docBuffer.slice(t,t+n);return this.engine.HEAPU8.set(r,e),!0}})}},{key:"registerSecurityCallback",value:function(e,t){return this.unRegisterSecurityCallback(e),"FoxitDRM"===e&&this.registerDRMSecurityCallback(t)}},{key:"registerCustomWebPluginSecurityCallback",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=e||"untitled.pdf",o=this.engine;this.registeredCustomWebPluginSecurityCallback&&this.unRegisterSecurityCallback(t);var s=(null==n?void 0:n.securityCallback)||{};try{var c=o.CustomSecurityCallback.implement({JSUseStandardCryptoMethod:function(){if(!s.JSUseStandardCryptoMethod)return!1;var e=null,t=s.JSUseStandardCryptoMethod,n=new XMLHttpRequest;return n.open("POST",t,!1),n.responseType="json",n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&(e=n.response)},n.send(JSON.stringify({fileName:a})),e},JSCreateContext:function(e,t,n){if(!s.JSCreateContext)return i;var r=s.JSCreateContext,o=new XMLHttpRequest;return o.open("POST",r,!1),o.responseType="text",o.onreadystatechange=function(){o.readyState===XMLHttpRequest.DONE&&o.responseText},o.send(JSON.stringify({fileName:a})),i},JSReleaseContext:function(e){if(!s.JSReleaseContext)return!0;var t=null,n=s.JSReleaseContext,r=new XMLHttpRequest;return r.open("POST",n,!1),r.responseType="json",r.onreadystatechange=function(){r.readyState===XMLHttpRequest.DONE&&(t=r.response)},r.send(JSON.stringify({fileName:a})),t},JSGetUserPermissions:function(e,t){if(!s.JSGetUserPermissions){var n=0;return 4&t&&(n|=4),8&t&&(n|=8),16&t&&(n|=16),32&t&&(n|=32),n}var r=null,i=s.JSGetUserPermissions,a=new XMLHttpRequest;return a.open("POST",i,!1),a.responseType="json",a.onreadystatechange=function(){a.readyState===XMLHttpRequest.DONE&&(r=a.response)},a.send(JSON.stringify({permission:t})),r},JSIsOwner:function(e){if(!s.JSIsOwner)return!1;var t=null,n=s.JSIsOwner,r=new XMLHttpRequest;return r.open("POST",n,!1),r.responseType="json",r.onreadystatechange=function(){r.readyState===XMLHttpRequest.DONE&&(t=r.response)},r.send(JSON.stringify({fileName:a})),t},JSGetCipher:function(e){if(!s.JSGetCipher)return o.CipherType.e_CipherAES;var t=s.JSGetCipher,n=new XMLHttpRequest;return n.open("POST",t,!1),n.responseType="json",n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&n.response},n.send(JSON.stringify({fileName:a})),o.CipherType.e_CipherAES},JSGetEncryptKey:function(e){if(!s.JSGetEncryptKey)return new o.String("");var t=null,n=s.JSGetEncryptKey,r=new XMLHttpRequest;return r.open("POST",n,!1),r.responseType="json",r.onreadystatechange=function(){r.readyState===XMLHttpRequest.DONE&&(t=r.response)},r.send(JSON.stringify({size})),t},JSGetDecryptedSize:function(e,t){if(!s.JSGetDecryptedSize)return t;var n=s.JSGetDecryptedSize,r=new XMLHttpRequest;return r.open("POST",n,!1),r.responseType="json",r.onreadystatechange=function(){r.readyState===XMLHttpRequest.DONE&&r.response},r.send(JSON.stringify({fileName:a,size:t})),t},JSStartDecryptor:function(e,t,n){if(!s.JSStartDecryptor)return 0;var r=s.JSStartDecryptor,i=new XMLHttpRequest;return i.open("POST",r,!1),i.responseType="json",i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&i.response},i.send(JSON.stringify({fileName:a,objNum:t,genNum:n})),0},JSDecryptData:function(e,t,n){var i,c=null,u=new o.String(""),l=o._malloc(n),d=o.HEAPU8.buffer;i=d.slice?new Uint8Array(d.slice(t,t+n)):new Uint8Array(d,t,n),o.HEAPU8.set(i,l);for(var h=new Uint8Array(n),f=0;f<n;f++)h[f]=o.HEAP8[l+f];var g=s.JSDecryptData,p=new XMLHttpRequest;p.open("POST",g,!1),p.onreadystatechange=function(){p.readyState===XMLHttpRequest.DONE&&(c=r.stringToUint8Array(atob(p.responseText)))},p.send(JSON.stringify({buf:btoa(String.fromCharCode.apply(null,h)),fileName:a}));for(var v=0;v<n;v++)o.HEAP8[l+v]=c[v];return u.Load(l,n),u},JSFinishDecryptor:function(e){if(!s.JSFinishDecryptor)return new o.String("");var t=s.JSFinishDecryptor,n=new XMLHttpRequest;return n.open("POST",t,!1),n.responseType="json",n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&n.response},n.send(),new o.String("")},JSGetEncryptedSize:function(e,t,n,r,i){if(!s.JSGetEncryptedSize)return i;var o=s.JSGetEncryptedSize,c=new XMLHttpRequest;return c.open("POST",o,!1),c.responseType="json",c.onreadystatechange=function(){c.readyState===XMLHttpRequest.DONE&&c.response},c.send(JSON.stringify({fileName:a,srcDataLen:i,genNum:n})),i},JSEncryptData:function(e,t,n,i,c,u,l){var d,h=null,f=o.HEAPU8.buffer;d=f.slice?new Uint8Array(f.slice(i,i+c)):new Uint8Array(f,i,c),o.HEAPU8.set(d,u);var g=s.JSEncryptData,p=new XMLHttpRequest;p.open("POST",g,!1),p.onreadystatechange=function(){p.readyState===XMLHttpRequest.DONE&&(h=r.stringToUint8Array(atob(p.responseText)))},p.send(JSON.stringify({buf:btoa(String.fromCharCode.apply(null,d)),fileName:a}));for(var v=0;v<c;v++)o.HEAP8[u+v]=h[v];return c}});this.customWebPluginSecurityCallback=c;var u=o.Library.RegisterCustomSecurityCallback((0,$.n5)(o,t),c);return u&&(this.registeredCustomWebPluginSecurityCallback=!0),u}catch(e){return console.log(e),!1}}},{key:"registerDRMSecurityCallback",value:function(){var e=this;if(this.registeredDRMSecurityCallback)return!0;try{var t=this.engine,n=t.DRMSecurityCallback.implement({Release:function(){},GetSecurityType:function(){return t.EncryptType.e_EncryptFoxitDRM},IsOwner:function(t,n){var r=e.getPDFDocFromCDoc(t);return!!r&&e.getDrmProperty(r,"isOwner")},GetUserPermissions:function(t,n){var r=e.getPDFDocFromCDoc(t);return r?e.getDrmProperty(r,"userPermissions"):0},GetCipherType:function(n,r){var i=e.getPDFDocFromCDoc(n);return i?t.CipherType.values[e.getDrmProperty(i,"cipher")]:t.CipherType.e_CipherNone},GetKeyLength:function(t,n){var r=e.getPDFDocFromCDoc(t);return r?e.getDrmProperty(r,"keyLength"):16},GetFileID:function(n,r){var i=e.getPDFDocFromCDoc(n);return i?new t.String(e.getDrmProperty(i,"fileId","")):new t.String("")},GetInitialKey:function(n,r){var i=e.getPDFDocFromCDoc(n);return i?new t.String(e.getDrmProperty(i,"initialKey","")):new t.String("")}}),r=t.Library.RegisterSecurityCallback((0,$.n5)(t,"FoxitDRM"),n);return r&&(this.registeredDRMSecurityCallback=!0),r}catch(e){return!1}}},{key:"stringToUint8Array",value:function(e){for(var t=[],n=0,r=e.length;n<r;++n)t.push(e.charCodeAt(n));return new Uint8Array(t)}},{key:"registerOpenFileSecurityCallback",value:function(e){var t=this.engine;this.registeredOpenFileSecurityCallback&&this.unRegisterSecurityCallback(Aa);try{var n=t.CustomSecurityCallback.implement({JSUseStandardCryptoMethod:function(){return!0},JSCreateContext:function(t,n,r){return e.$$ptr},JSReleaseContext:function(e){return!0},JSGetUserPermissions:function(e,t){var n=0;return 4&t&&(n|=4),8&t&&(n|=8),16&t&&(n|=16),32&t&&(n|=32),n},JSIsOwner:function(e){return!1},JSGetCipher:function(n){return e.cipher&&2===e.cipher?t.CipherType.e_CipherAES:t.CipherType.e_CipherRC4},JSGetEncryptKey:function(n){var r=new t.String(""),i=t._malloc(e.encryptKey.length),a=new Uint8Array(e.encryptKey);return t.HEAPU8.set(a,i),r.Load(i,e.encryptKey.length),r},JSGetDecryptedSize:function(e,t){},JSStartDecryptor:function(e,t,n){},JSDecryptData:function(e,t,n){},JSFinishDecryptor:function(e){},JSGetEncryptedSize:function(e,t,n,r,i){},JSEncryptData:function(e,t,n,r,i,a,o){}}),r=t.Library.RegisterCustomSecurityCallback((0,$.n5)(t,Aa),n);return r&&(this.registeredOpenFileSecurityCallback=!0),r}catch(e){return!1}}},{key:"unRegisterSecurityCallback",value:function(e){var t=this.engine,n=(0,$.n5)(t,e);try{return this.engine.Library.UnregisterSecurityCallback(n)}catch(e){try{return this.engine.Library.UnregisterSecurityCallback(n)}catch(e){return!1}}}},{key:"unRegisterSecurityHandler",value:function(e,t){return this.customWebPluginSecurityCallback=null,this.unRegisterSecurityCallback(t)}},{key:"setJsPlugIns",value:function(){this.engine.Library.ExecuteJavaScript((0,d.Eo)(this.engine,"app.numPlugIns = 2; app.plugIns = [\n            {name:\"Annots\",certified:true,loaded:true,path:'',version:7.0},\n            {name:\"Forms\",certified:true,loaded:true,path:'',version:7.0}\n            ];"))}},{key:"enableLoadJSEngine",value:function(e){this.isEnableLoadJSEngine=e}},{key:"enableJavaScript",value:function(e){e!==this.isEnableJavaScript&&(this.isEnableJavaScript=e,this.engine.Library.EnableJavaScript(e))}},{key:"initializeFxjse",value:function(){return!!this.hasInitializeFxjse||!(this.hasInitializeFxjse||!this.engine.Library.InitializeFxjse)&&(this.engine.Library.InitializeFxjse(),this.hasInitializeFxjse=!0,!0)}},{key:"finalizeFxjse",value:function(){this.hasInitializeFxjse&&this.engine.Library.FinalizeFxjse&&(this.engine.Library.FinalizeFxjse(),this.hasInitializeFxjse=!1)}},{key:"setJSMessages",value:function(e){this.jsMessages=e}},{key:"registerXFAAppProvider",value:function(){this.engine.Library.RegisterXFAAppProviderCallback&&!this.XFAAppHandler&&(this.XFAAppHandler=this.engine.AppProviderCallback.implement(ia.getInstance(this.engine,this.id,this.syncBaseUrl)),this.engine.Library.RegisterXFAAppProviderCallback(this.XFAAppHandler))}},{key:"setXFAString",value:function(e){ia.getInstance(this.engine,this.id,this.syncBaseUrl).initStrings(e)}},{key:"syncMessage",value:function(e,t,n){return this._serviceWorkerReady?(0,zi.Z)(this.syncBaseUrl,this.id,e,t,n):""}},{key:"setUserName",value:function(e){this.userName=e}},{key:"getUserName",value:function(){return this.userName}},{key:"getRotatedAnnotRect",value:function(e){var t=e.GetRect(),n={left:t.left,top:t.top,right:t.right,bottom:t.bottom,rotate:0};return t.delete(),n}},{key:"getHexString",value:function(e){for(var t="",n=e.GetLength(),r=e.GetBuffer(),i=0;i<n;i++){var a=this.engine.HEAP8[r+i]>>>0&255;t+=String.fromCharCode(a)}return t}},{key:"getPDFDocFromCDoc",value:function(e){var t=this.pdfDocCache;for(var n in t){var r=t[n];if(e.Equals(r.doc))return r}}},{key:"getDrmProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e.otherData;if(!r)return n;var i=r.drm;return i?i[t]:n}},{key:"getPDFString",value:function(e){var t;try{t=e.toString()}catch(s){var n="";e.GetBuffer||(e=e.UTF8Encode());for(var r=e.GetBuffer(),i=0,a=e.GetLength();i<a;i++){var o=this.engine.HEAP8[r+i]>>>0&255;n+=String.fromCharCode(o)}t=this.pdfNameDecoding(n)}return t}},{key:"pdfNameDecoding",value:function(e){if(254==e.charCodeAt(0)&&255==e.charCodeAt(1)){for(var t="",n=2;n<e.length;n+=2)t+=String.fromCharCode((e.charCodeAt(n)<<8)+e.charCodeAt(n+1));return t}return e}},{key:"setFontMap",value:function(e){!function(e){e&&(S=e)}(e)}},{key:"setWatermarkFontMap",value:function(e){!function(e){e&&(y=e)}(e)}},{key:"addFontMap",value:function(e){e&&(this.customFontMaps=this.customFontMaps.concat(e))}},{key:"getCharsetByFontName",value:function(e){if(e){for(var t=0,n=this.customFontMaps.length;t<n;t++){var r=this.customFontMaps[t];if(r.name.replace(" ","").replace("-","")===e)return this.engine.Charset.values[r.charset||0]}return this.engine.Charset.e_CharsetANSI}}},{key:"getFontInfoByFontName",value:function(e){if(e){for(var t=0,n=this.customFontMaps.length;t<n;t++){var r=this.customFontMaps[t];if(r.name.replace(" ","").replace("-","")===e)return{charset:this.engine.Charset.values[r.charset||0],style:r.style}}return{charset:this.engine.Charset.e_CharsetANSI,style:0}}}},{key:"getDefaultFont",value:function(e){if(e===this.engine.Charset.e_CharsetANSI.value)return"Helvetica";if(e===this.engine.Charset.e_CharsetShift_JIS.value)return"MS Mincho";if(e===this.engine.Charset.e_CharsetGB2312.value)return"SimSun";if(e===this.engine.Charset.e_CharsetChineseBig5.value)return"MingLiU";if(e===this.engine.Charset.e_CharsetHangeul.value)return"Batang";if(e===this.engine.Charset.e_CharsetThai.value)return"notosansthai";if(e===this.engine.Charset.e_CharsetEastEurope.value);else if(e===this.engine.Charset.e_CharsetRussian.value);else if(e===this.engine.Charset.e_CharsetTurkish.value);else{if(e===this.engine.Charset.e_CharsetHebrew.value)return"notosanshebrew";if(e===this.engine.Charset.e_CharsetArabic.value)return"arabic"}return"microsoftsansserif"}},{key:"setActionToDict",value:function(e,t,n){var r,i=this.engine,a=this.actionManager;if(r=a.create(e,actionJson.type),-1==trigger)try{this.engineWidget.SetAction(jsaction)}catch(e){isNaN(e)||(e=i.getErrorCode(e)),console.warn(e)}else{var o,s=(0,$.n5)(i,"AA"),c=engineWidget.GetDict(),u=c.GetElement(s);if(u){var l=u.GetDict();o=new i.AdditionalAction(this.pdfPage.doc,l)}else{var d=i.PDFDictionary.Create();c.SetAt(s,d),o=new i.AdditionalAction(this.pdfPage.doc,d)}o.SetAction(i.TriggerEvent.values[trigger],r)}var h=a.get(r,this.doc,this.JR);return h.create(actionJson),h}},{key:"asyncOperation",value:function(e,t){var n=this;t||(t=(0,d.dD)());try{t.resolve(e())}catch(r){if(17!==this.engine.getErrorCode(r).value)throw r;return setTimeout(function(){n.asyncOperation(e,t)},30),t.promise}return t.promise}},{key:"setJPXDownSample",value:function(e){this._JPXDownSample=e}},{key:"getJPXDownSample",value:function(){var e=this._JPXDownSample;return void 0===e||!!e}},{key:"SetJSObjectRef",value:function(e){return this.objectMap=this.objectMap||{},this.objectMap[e.Handle()]=e,e.Handle()}},{key:"GetJSObjectFromPtr",value:function(e){if(this.objectMap)return this.objectMap[e]}},{key:"getEditorContext",value:function(e,t,n){return this.pageEditorContext=new Yn(this.engine,e,t,n),this.pageEditorContext.context}},{key:"storeNotExistFonts",value:function(e){this._notExistFonts=e}},{key:"getNotExistFontsString",value:function(){return(this._notExistFonts||[]).join("\n")}},{key:"checkFontNotExist",value:function(e){return(this._notExistFonts||[]).find(function(t){return t===e})}},{key:"checkCertificatePassword",value:function(e,t){var n=this.engine;if("string"==typeof e){var r=new XMLHttpRequest;r.open("get",e,!1),r.responseType="blob",r.send(),e=r.response}var i=(new FileReaderSync).readAsArrayBuffer(e),a=n.StreamCallback.implement({GetSize:function(){return i.byteLength},GetPosition:function(){return 0},ReadBlock:function(e,t,r){var a=new Uint8Array(i,t,r);return n.HEAPU8.set(a,e),!0}});return n.CheckCertPassword(a,new n.String(t))}},{key:"getCertificateString",value:function(e,t){var n,r=this.engine;if((0,a._)(e,ArrayBuffer))n=e;else{var i=new FileReaderSync;n=i.readAsArrayBuffer(e)}var o=r.StreamCallback.implement({GetSize:function(){return n.byteLength},GetPosition:function(){return 0},ReadBlock:function(e,t,i){var a=new Uint8Array(n,t,i);return r.HEAPU8.set(a,e),!0}});return t?r.GetCerFromPfx(o,new r.String(t)):r.ReadFileContent(o)}},{key:"getCertificateInfo",value:function(e,t){var n=this.engine,r={},i=this.getCertificateString(e,t);if(t&&(r.pfxFile=e),!i.GetLength())return r;var a=n.HEAPU8.subarray(i.GetBuffer(),i.GetBuffer()+i.GetLength());r.cerFile=new Blob([a],{type:"application/pkix-cert"}),r.serial=n.GetCertificateInfo(i,new n.String("SerialNumber")).toString(),r.validPeriodFrom=n.GetCertificateInfo(i,new n.String("ValidPeriodFrom")).toString(),r.validPeriodTo=n.GetCertificateInfo(i,new n.String("ValidPeriodTo")).toString();var o=n.GetCertificateInfo(i,new n.String("Issuer")).toString(),s=JSON.parse(o);s.CN||(o=n.GetCertificateInfo(i,new n.String("Subject")).toString(),s=JSON.parse(o)),r.subjectName=s.CN||"",r.issuerName=s.CN||"",r.email=s.E||"",r.orgName=s.O||"",r.orgUnit=s.OU||"",r.country=s.C||"";var c=n.GetCertificateInfo(i,new n.String("KeyUsage")).toString();return r.keyUsageStr=c,c.indexOf("Digital Signature")>=0&&c.indexOf("Data Encipherment")>=0?r.keyUsage=2:c.indexOf("Digital Signature")>=0?r.keyUsage=0:c.indexOf("Data Encipherment")>=0?r.keyUsage=1:r.keyUsage=-1,r}},{key:"storeCustomUploadFonts",value:function(e){this._customUploadFonts=e}},{key:"getCustomUploadFontsCount",value:function(){return this._customUploadFonts?this._customUploadFonts.length:0}},{key:"getCustomUploadFontByIndex",value:function(e){var t=this._customUploadFonts;return t?t[e]:null}},{key:"getCustomUploadFontByName",value:function(e){var t=this._customUploadFonts;return t?t.find(function(t){return t.name===e}):null}},{key:"storeFontServerRoot",value:function(e){this._fontServerRoot=e}},{key:"getFontServerRoot",value:function(){return this._fontServerRoot||""}},{key:"getFontFromServer",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Date.now(),r=(t?this.getFontServerRoot():"")+e,i=this.serverFontCache[r];if(i)return i;var a=new XMLHttpRequest;a.open("GET",r,!1),a.responseType="arraybuffer";try{if(a.send(),a.status>=200&&a.status<300||304===a.status||self.location.href.startsWith("file:")&&0===a.status)return postMessage({workflow:"fontProfile",name:e,time:Date.now()-n}),this.serverFontCache[r]=a.response}catch(e){console.warn(e)}}},{key:"getAllFreeFont",value:function(e){if(e)return this.getFontFromServer(e,!1)}},{key:"cacheFontConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.storeNotExistFonts(e.notExistFonts),this.storeCustomUploadFonts(e.customUploadFonts),this.storeFontServerRoot(e.fontServerRoot)}},{key:"getFxcoreFontList",value:function(){var e=this.engine,t=[];if(!e.getFontCommonList)return t;for(var n=e.getFontCommonList(),r=n.GetSize();r--;)t[r]=n.GetAt(r).toString();return t}},{key:"getPDFCertArrayFromPDFFile",value:function(t,n,r,i){return(0,e._)(function(e,t,n,r){var i,s,c,u,d,h,f,g,p=arguments;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return i=p.length>4&&void 0!==p[4]?p[4]:[],s=[],(0,a._)(e,ArrayBuffer)?[4,(c=this.getPDFDoc({buffer:e})).parseByPassword(r)]:[3,2];case 1:if(l.sent(),c.doc.GetPDFCertArray)for(d=function(e){var r=h.GetAt(e);if(r.IsEmpty())return"continue";var a=r.GetCertBuffer(),c=!1;i.length&&(c=i.some(function(e){return e.IsEqual(a)}));var l=r.GetIsOwner();r.GetTrustType();if(c?l?r.SetTrustType(u.engine.TrustType.e_TrustTypeOwner.value):r.SetTrustType(u.engine.TrustType.e_TrustTypeEUTL.value|u.engine.TrustType.e_TrustTypeFATL.value):(i.push(a),2==t?r.SetTrustType(u.engine.TrustType.e_TrustTypeEUTL.value):l?r.SetTrustType(u.engine.TrustType.e_TrustTypeOwner.value):r.SetTrustType(u.engine.TrustType.e_TrustTypeFATL.value)),c)return"continue";var d=(0,Qn.bs)(u.engine,a),f=d.issuerChain,g=void 0===f?[]:f,p=d.subjectChain,v=void 0===p?[]:p,m=g[g.length-1]||{},_=m.issuerName,y=void 0===_?"":_,S=m.issuerInfo,b=void 0===S?"":S,I=(0,o._)({},v[v.length-1]||{});delete I.level;var A=r.GetIsTrustedRoot();if(!c){var P=(0,Qn.h1)(u.engine,a),D=(0,o._)({cerFile:P,type:n,isCertTrustedRoot:A,issuerName:y,issuerInfo:b},I);s.push(D);var E=D.serialNumber,C=D.country,w="".concat(E,"_").concat(C,"_").concat(y);u.certCacheMap.set(w,{uniqueSerialNumber:w,cert:a})}},h=c.doc.GetPDFCertArray(),f=h.GetSize(),g=0;g<f;g++)u=this,d(g);l.label=2;case 2:return[2,s]}})}).apply(this,arguments)}},{key:"getFATLAndEUTLList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=(0,d.dD)(),r=[],i=[],a=[];return t.forEach(function(t){var n=t.url,r=t.trust_type,o=t.type,s=t.purpose_code,c=e.requestData("GET",!1,n);i.push(e.getPDFCertArrayFromPDFFile(c,r,o,s,a))}),Promise.all(i).then(function(e){e.forEach(function(e){var t;(t=r).push.apply(t,(0,c._)(e))}),n.resolve(r)}),n.promise}},{key:"getAllTrustCert",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.map(function(e){return e.uniqueSerialNumber}),n=[],r=t.length,i=0;i<r;i++){var a=t[i];if(this.certCacheMap.has(a))n.push(this.certCacheMap.get(a));else{var o=e[i];if(o&&o.cerFile){var s={uniqueSerialNumber:a,cert:this.getCertificateString(o.cerFile)};n.push(s),this.certCacheMap.set(a,s)}}}return n}},{key:"updateCertCacheMap",value:function(){var e=this;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(t){var n=t.uniqueSerialNumber,r=void 0===n?"":n,i=t.cert;e.certCacheMap.set(r,{uniqueSerialNumber:r,cert:i})})}},{key:"getCertsByKeys",value:function(t){return(0,e._)(function(){var e,t,n,r,i,a,o,s,c,u,d,h,f,p,v=arguments;return(0,l.Jh)(this,function(l){switch(l.label){case 0:e=v.length>0&&void 0!==v[0]?v[0]:[],n=(t=v.length>1?v[1]:void 0).storeName,r=t.dbName,i=t.version,a=t.keyPath,o=t.indexArr,s=[],c=e.length,0!==this.certCacheMap.size&&this.certCacheMap.get(e[0])||(u=new g.U(n,r,i,a,o)),d=0,l.label=1;case 1:return d<c?(h=e[d],this.certCacheMap.has(h)?(s.push(this.certCacheMap.get(h)),[3,4]):[3,2]):[3,5];case 2:return u?[4,u.get(h)]:[3,4];case 3:(f=l.sent())&&f.cerFile&&(p=this.getCertificateString(f.cerFile),s.push(p),this.certCacheMap.set(h,{uniqueSerialNumber:h,cert:p})),l.label=4;case 4:return d++,[3,1];case 5:return[2,s]}})}).apply(this,arguments)}},{key:"ensureSideModeLoaded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"openssl";if(this.sideModuleMap=this.sideModuleMap||{},"openssl"===e)this.sideModuleMap[e]||(this.sideModuleMap[e]=!0,Promise.resolve());return Promise.resolve()}},{key:"getCharBBox",value:function(e,t){var n=new this.engine.Font(e).GetCharBBox(t);return{top:n.top,left:n.left,right:n.right,bottom:n.bottom,width:n.Width(),height:n.Height()}}},{key:"getFontToneByFontID",value:function(e){var t=new this.engine.Font(e);return{ascent:t.GetAscent(),descent:t.GetDescent()}}},{key:"getCharWidthByFontID",value:function(e,t){return new this.engine.Font(e).GetCharWidth(t)}},{key:"checkJRModule",value:function(e){return(this._initedModules&e)===e}},{key:"putJRModule",value:function(e){return this._initedModules|=e}},{key:"loadResource",value:function(e){fetch([this.enginePath,e].join("/")+"?h="+Pn)}},{key:"invokeAsSync",value:function(e){return(0,l.Jh)(this,function(t){switch(t.label){case 0:return[5,(0,l.XA)(this.syncInvoker.invokeSync(e))];case 1:return[2,t.sent()]}})}},{key:"invokeAsSyncAndReturn",value:function(e){return this.syncInvoker.invokeSyncAndReturn(e)}}]),n}();const Ea=Da;function Ca(e,t,n,r,i){wa(e,function(n){var a,o=new Uint8Array(n.slice(1,4));97===o[0]&&115===o[1]&&109===o[2]?a=n:a=(0,__webpack_require__(9198).Z)(new Uint8Array(n)).buffer;t(a),Sa.set(r,a).then(function(){i(r,e)},function(){})},n)}function wa(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)}var ka=function(){function e(){(0,t._)(this,e)}return(0,r._)(e,[{key:"extendsWorkerAPI",value:function(e,t,n,r,i,a){var o=this.apis,s=this.workerObj;for(var c in o)e[c]=o[c];Object.assign(s,{getPageByID:n,getDocByID:t,jrPromise:r,resolve:i,reject:a})}}]),e}();const Ta=ka;var Fa,Ga=__webpack_require__(5318);function Ra(t,n,r,i){return(0,e._)(function(){var e,a,o,s,c,u,d,h,f,g,p;return(0,l.Jh)(this,function(l){switch(l.label){case 0:if(!t.IsSigned()||!t.GetFileSizeOfSignedVersion())return[2,{}];e=n.engine,a={},l.label=1;case 1:for(l.trys.push([1,3,,4]),o=t.GetCerts(),s=o.GetSize(),c=n.doc.GetDSSCerts(),u=c.GetSize(),d=new e.StringArray,h=0;h<s-1;h++)d.Add(o.GetAt(h));if(u>0)for(f=0;f<u;f++)d.Add(c.GetAt(f));return[4,n.JR.getAllTrustCert(r,i)];case 2:return l.sent().forEach(function(e){return d.Add(e.cert||e)}),a=function(e,t,n){var r=e.engine,i={};try{var a=(0,Qn.F5)(r,t,n,e);if(Object.keys(a).length){var o=a[Object.keys(a)[0]],s=o.map(function(e){return e.issuerChain[0]}),c=o.map(function(e){return e.issuerInfo}).join(";"),u=o.map(function(e){return e.subjectChain[0]}),l=o.map(function(e){return e.subjectInfo}).join(";"),d=o.map(function(e){return e.serialNumber}).join(";"),h=o.map(function(e){return e.validPeriodFrom}).join(";"),f=o.map(function(e){return e.validPeriodTo}).join(";");s.forEach(function(e,t){e.level=t,e.levelString="0_".concat(t)}),u.forEach(function(e,t){e.level=t,e.levelString="0_".concat(t),e.isLeafNode=t===u.length-1}),i={issuerChain:s,issuerInfo:c,subjectChain:u,subjectInfo:l,serialNumber:d,validPeriodFrom:h,validPeriodTo:f}}}catch(e){console.warn(e),i={}}return i}(n.JR,d,o.GetAt(s-1)),[3,4];case 3:return g=l.sent(),a={certificateException:!0},p=e.getErrorCode(g),console.error(p),[3,4];case 4:return[2,a]}})})()}function xa(t,n){return(0,e._)(function(e,t){var n,r,i,a,o,c,u,d,h,f,g,p=arguments;return(0,l.Jh)(this,function(l){switch(l.label){case 0:n=p.length>2&&void 0!==p[2]?p[2]:[],r=p.length>3&&void 0!==p[3]?p[3]:{},i={},a=e.engine,Fa=n,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,Ra(o=new a.Signature(t),e,n,r)];case 2:return i.certificateInfo=l.sent(),c=function(e,t){var n,r;if(!e.IsSigned())return{hashAlg:n,signAlg:r};try{n=e.GetHashAlg().toString(),r=e.GetSignAlg().toString()}catch(e){n="",r="";var i=t.getErrorCode(e);console.error(i)}return{hashAlg:n,signAlg:r}}(o,a),u=c.hashAlg,d=c.signAlg,i.hashAlg=u,i.signAlg=d,h={}.isESignCNSignature,i.isESignCNSignature=h,h?[2,Promise.all([e.getByteRangeHash(o),e.getAfterSignFileHash(o)]).then(function(e){var t=(0,s._)(e,2),n=t[0],r=t[1];return i.byteRnageHash=n,i.afterSignHash=r,o=null,i})]:(o=null,[2,i]);case 3:return f=l.sent(),g=a.getErrorCode(f),console.error(g),[3,4];case 4:return[2]}})}).apply(this,arguments)}var Oa,Ma={},Na={},Ba=new(function(e){function n(){var e;return(0,t._)(this,n),(e=(0,V._)(this,n)).workerObj=Ma,e.apis=Na,e}return(0,Z._)(n,e),n}(Ta)),La=function(e,t){if(!t)throw console.warn(e),new Error("Unable to updateField: document not found by id: "+e)};function ja(e,t,n){return Ma.getDocByID(n).then(function(e){var t=!e.doc.IsStaticXFA()&&e.doc.IsXFA();return e.doc.HasForm()&&!t?e.loadForm().toJson():null}).then(function(t){var n=[];t&&(n=t.fields.map(function(e){return e.image?e.image.buffer:null}).filter(Boolean)),Ma.resolve(e,t,n)}).catch(function(r){if(isNaN(r)||(r=t.getErrorCode(r)),r!==t.ErrorCode.e_ErrDataNotReady)throw r;setTimeout(function(){ja(e,t,n)},200)})}Na.loadForm=function(e,t){var n=t.docId;if(Oa)return ja(e,Oa,n);Ma.jrPromise.then(function(t){return Oa=t.engine,ja(e,Oa,n)})},Na.reloadFieldByName=function(e,t){var n=t.docId,r=t.fieldName;return Ma.getDocByID(n).then(function(e){return La(n,e),e.loadForm().getField(r).toJson()}).then(function(t){Ma.resolve(e,t)},function(t){Ma.reject(e,{err:-1},[],t)})},Na.hasForm=function(e,t){var n=t.docId;return Ma.getDocByID(n).then(function(t){Ma.resolve(e,t.hasForm())})},Na.updateField=function(e,t){var n=t.docId,r=t.title,i=t.key,a=t.value;return Ma.getDocByID(n).then(function(e){var t=e.loadForm().getField(r);return t&&t.update(i,a)||t.toJson()}).then(function(t){Ma.resolve(e,t)})},Na.setFieldValue=function(e,t){var n=t.docId,r=t.title,i=t.value;return Ma.getDocByID(n).then(function(t){La(n,t);var a=t.loadForm().getField(r);a&&a.setValue(i),Ma.resolve(e)})},Na.updateMKProperty=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.key,o=t.value;return Ma.getDocByID(n).then(function(e){return e.getPageById(r).getAnnotById(i)}).then(function(t){Ma.resolve(e,t.updateMKProperty(a,o))})},Na.setWidgetAS=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.AS;return Ma.getDocByID(n).then(function(e){return e.getPageById(r).getAnnotById(i)}).then(function(t){return t.setAS(a),Ma.resolve(e)})},Na.getFieldsValue=function(e,t){var n=t.docId;return Ma.getDocByID(n).then(function(t){var n=t.loadForm();Ma.resolve(e,n.getFieldsValue())})},Na.destroyForm=function(e,t){var n=t.docId;return Ma.getDocByID(n).then(function(t){Ma.resolve(e,t&&t.destroyForm())})},Na.addControl=function(e,t){var n=t.docId,r=t.pageIndex,i=t.fieldName,a=t.fieldType,o=t.rect,s=t.options;return Ma.getDocByID(n).then(function(e){La(n,e);var t=e.loadForm(),c=t.engineForm,u=e.engine,l=e.JR,d=new u.WString(""),h=c.GetFieldCount(d);d.delete();var f=new u.CFX_FloatRect(o.left,o.bottom,o.right,o.top);return e.getPageByIndex(r).then(function(n){var r,o,d=new u.WString(i);if(i){var g=c.ValidateFieldName(u.FieldType.values[a],d);if(!g)for(var p=i.replace(/[^0-9]/gi,""),v=i.substr(0,i.indexOf(p)),m=parseInt(p);m++,d=new u.WString(v+m),!(g=c.ValidateFieldName(u.FieldType.values[a],d)););}if(7==a){var _=s&&s.isESignCN;if((o=_?n.page.AddSignature(f,d,u.SignatureType.e_SignatureTypeOrdinary,!1,!1):n.page.AddSignature(f,d,u.SignatureType.e_SignatureTypeOrdinary,!1)).IsEmpty())return{failed:!0};var y=(r=o.GetControl(0)).GetWidget();s&&void 0!==s.mkRotate&&(y.SetMKRotation({value:s.mkRotate}),y.ResetAppearanceStream())}else try{var S=(r=c.AddControl(n.page,d,u.FieldType.values[a],f)).GetWidget();if(s&&void 0!==s.mkRotate&&S.SetMKRotation({value:s.mkRotate}),1==a){var b=S.GetMKIconFit();b.horizontal_fraction=parseFloat(.5),b.vertical_fraction=parseFloat(.5),b.scale_way_type=u.ScaleWayType.e_ScaleWayAlways,S.SetMKIconFit(b)}if(s&&s.stateName,s&&"CreateImageStateHandler"===s.stateName){S.SetMKIconCaptionRelation(u.MKIconCaptionRelation.e_MKRelationNoCaption),S.SetHighlightingMode(u.HighlightingMode.e_HighlightingInvert);var I=S.GetMKIconFit();I.is_proportional_scaling=!0,S.SetMKIconFit(I);var A=l.createReaderCallback(s.imagePath),P=new u.Image(A);S.SetMKNormalIconImage(P,0);var D=u.Action.Create(e.doc,u.ActionType.e_TypeJavaScript),E=new u.JavaScriptAction(D);E.SetScript(new u.WString("event.target.buttonImportIcon()")),t.addAAToDict(S.GetDict(),E,{trigger:14,field:i})}S.ResetAppearanceStream(),o=r.GetField()}catch(e){console.log(e)}if(!o)throw new Error("Field not exist");if(o.IsEmpty())throw new Error("Permission error");f.delete();var C=new u.WString(""),w=c.GetFieldCount(C);return C.delete(),d.delete(),n.update().then(function(){var e=o.GetFlags(),n=o.GetDict();if(n){var r=new u.String("Ff"),s=n.GetElement(r);s&&(e=s.GetInteger()),r.delete()}if(i=o.GetName().toString(),0==h)return t.toJson().then(function(t){return{form:t,fieldName:i,fieldFlags:e}});if(w==h)return t.getField(i).getControlsJson().then(function(t){return{controls:t,fieldName:i,fieldFlags:e}});var c=t.addJRField(o,i,w-1);return 7==a?c.toJson():c.getControlsJson().then(function(t){return{controls:t,fieldName:i,fieldFlags:e}})})})}).then(function(t){Ma.resolve(e,t)})},Na.addSignatureControlBatch=function(e,t){var n=t.docId,r=t.signatureInfos,i=t.shareVDictType;return Ma.getDocByID(n).then(function(t){var n,a=t.engine,o=t.loadForm();if("string"==typeof i){if(!(n=o.getField(i).engineField))throw new Error("The signature is not exist.");if(n.IsSigned())throw new Error("The signature is signed.");if(!n.GetSignatureDict())throw new Error("The signature have no V dictionary.")}var s=[];return r.reduce(function(e,r,c){var u=r.pageIndex,l=r.rect;return e.then(function(){return t.getPageByIndex(u).then(function(e){var t,r=new a.CFX_FloatRect(l.left,l.bottom,l.right,l.top),d=new a.WString("");return 0===i?t=e.page.AddSignature(r,d,a.SignatureType.e_SignatureTypeOrdinary,!1):1===i&&0===c?(t=e.page.AddSignature(r,d,a.SignatureType.e_SignatureTypeOrdinary,!1),n=t):t=e.page.AddSignatureWithExistedVDict(r,d,a.SignatureType.e_SignatureTypeOrdinary,!1,n),e.update().then(function(){return o.addJRField(t,t.GetName().toString()).toJson().then(function(e){s.push({pageIndex:u,json:e})})})})})},Promise.resolve()).then(function(){Ma.resolve(e,s)})})},Na.createFieldByCopyControl=function(e,t){var n=t.docId,r=t.pageIndex,i=t.fieldType,a=t.newFieldName,o=t.newRect,s=t.srcFieldName,c=t.srcObjectNumber;return Ma.getDocByID(n).then(function(e){La(n,e);var t=e.loadForm(),u=t.engineForm,l=e.engine,d=new l.WString(""),h=u.GetFieldCount(d);d.delete();var f=new l.CFX_FloatRect(o.left,o.bottom,o.right,o.top);return e.getPageByIndex(r).then(function(e){var n,r,o=new l.WString(a);if(a){var d=u.ValidateFieldName(l.FieldType.values[i],o);if(!d)for(var g=a.replace(/[^0-9]/gi,""),p=a.substr(0,fieldName.indexOf(g)),v=parseInt(g);v++,o=new l.WString(p+v),!(d=u.ValidateFieldName(l.FieldType.values[i],o)););}if(7==i){if((r=e.page.AddSignature(f,o,l.SignatureType.e_SignatureTypeOrdinary,!1)).IsEmpty())return{failed:!0}}else try{var m=(n=u.AddControl(e.page,o,l.FieldType.values[i],f)).GetWidget(),_=new l.WString(s),y=function(e,t){for(var n=0,r=e.GetControlCount();n<r;n++)if(e.GetControl(n).GetDictionaryObjectNumber()==t)return e.GetControl(n).GetWidget()}(u.GetField(0,_),c);m.CopyPropertyFromOtherWidget(y),m.ResetAppearanceStream(),r=n.GetField()}catch(e){console.log(e)}if(!r)throw new Error("Field not exist");if(r.IsEmpty())throw new Error("Permission error");f.delete();var S=new l.WString(""),b=u.GetFieldCount(S);return S.delete(),o.delete(),e.update().then(function(){var e=r.GetFlags(),n=r.GetDict();if(n){var o=new l.String("Ff"),s=n.GetElement(o);s&&(e=s.GetInteger()),o.delete()}if(a=r.GetName().toString(),0==h)return t.toJson().then(function(t){return{form:t,fieldName:a,fieldFlags:e}});if(b==h)return t.getField(a).getControlsJson().then(function(t){return{controls:t,fieldName:a,fieldFlags:e}});var c=t.addJRField(r,a,b-1);return 7==i?c.toJson():c.getControlsJson().then(function(t){return{controls:t,fieldName:a,fieldFlags:e}})})})}).then(function(t){Ma.resolve(e,t)})},Na.validateFieldName=function(e,t){var n=t.docId,r=t.fieldName,i=t.fieldType;return Ma.getDocByID(n).then(function(e){La(n,e),8==i&&(i=6);var t=e.engine,a=e.loadForm().engineForm,o=new t.WString(r),s=a.ValidateFieldName(t.FieldType.values[i],o),c=a.GetField(0,o);return o.delete(),(c.IsEmpty()||7!=c.GetType().value)&&s}).then(function(t){Ma.resolve(e,t)})},Na.renameField=function(e,t){var n=t.docId,r=t.fieldName,i=t.newName;return Ma.getDocByID(n).then(function(e){La(n,e);var t=e.engine,a=e.loadForm(),o=a.engineForm;delete e.form;var s=new t.WString(r),c=o.GetField(0,s);if(s.delete(),s=new t.WString(i),c.IsEmpty())return!1;for(var u=o.RenameField(c,s),l=(c=o.GetField(0,s)).GetControlCount(),d=0;d<l;d++){c.GetControl(d).GetWidget().ResetAppearanceStream()}return s.delete(),a.destroy(),!!u&&e.loadForm().toJson()}).then(function(t){Ma.resolve(e,t)})},Na.removeField=function(e,t){var n=t.docId,r=t.fieldName;return Ma.getDocByID(n).then(function(e){if(!e)throw console.warn(n),new Error(n);var t=e.engine,i=e.loadForm().engineForm,a=new t.WString(r),o=i.GetField(0,a);a.delete();for(var s={},c=o.GetControlCount(),u=0;u<c;u++){s[o.GetControl(u).GetWidget().GetPage().GetIndex()]=1}7==o.GetType().value?e.doc.RemoveSignature(new t.Signature(o)):i.RemoveField(o),e.reloadPageAnnots(Object.keys(s))}).then(function(t){Ma.resolve(e,!0)})},Na.removeControl=function(e,t){var n=t.docId,r=t.pageIndex,i=t.fieldName,a=t.controlObjectNumber;return Ma.getDocByID(n).then(function(t){La(n,t);var o=t.loadForm(),s=o,c=o.GetField(0,(0,$.Dp)(Oa,i));if(7==c.GetType().value)r=c.GetControl(0).GetWidget().GetPage().GetIndex(),t.doc.RemoveSignature(c),o.removeField(c);else{for(var u,l=c.GetControlCount(),d=0;d<l;d++){var h=c.GetControl(d),f=h.GetWidget();f.IsEmpty()||f.GetDict().GetObjNum()==a&&(r=(u=h).GetWidget().GetPage().GetIndex())}u&&!u.IsEmpty()&&(s.RemoveControl(u),1==l&&o.removeField(c))}t.getPageByIndex(r).then(function(e){e.update()}),Ma.resolve(e,!0)})},Na.isLastSignature=function(e,t){var n=t.docId,r=t.fieldName;return Ma.getDocByID(n).then(function(t){var i;La(n,t);for(var a,o=t.loadForm(),s=(0,$.Dp)(t.engine,""),c=o.GetFieldCount(s),u=0;u<c;u++){var l=o.GetField(u,s);if(!l.IsEmpty()&&l.GetName().toString()===r){i=l;break}}i&&7===i.GetType().value&&(a=(i=new t.engine.Signature(i)).IsLast()),Ma.resolve(e,a)})},Na.fixPageFields=function(e,t){var n=t.docId,r=t.pageIndex;return Ma.getDocByID(n).then(function(t){La(n,t),t.loadForm().engineForm.FixPageFields(r),Ma.resolve(e,!0)})},Na.getControlCount=function(e,t){var n=t.docId,r=t.pageIndex;return Ma.getDocByID(n).then(function(e){return La(n,e),Promise.all([e,e.getPageByIndex(r)])}).then(function(e){var t=(0,s._)(e,2),n=t[0],r=t[1];return r.isVirtual?0:n.loadForm().engineForm.GetControlCount(r.page)}).then(function(t){Ma.resolve(e,t)})},Na.setFieldsValue=function(e,t){var n=t.docId,r=t.fieldsValue,i=t.resetAP;return Ma.getDocByID(n).then(function(t){La(n,t),t.loadForm().setFieldsValue(r,i),Ma.resolve(e,!0)})},Na.updateFormControl=function(e,t){var n=t.docId,r=t.fieldName,i=t.objectNumber,a=t.key,o=t.value;return Ma.getDocByID(n).then(function(t){La(n,t);var s=t.loadForm().updateFormControl(r,i,a,o);Ma.resolve(e,s||!0)})},Na.setLockAction=function(e,t){var n=t.docId,r=(t.title,t.type),i=t.fieldNames;return Ma.getDocByID(n).then(function(e){La(n,e);var t=e.loadForm().GetField(0,(0,$.Dp)(Oa,fieldName));t&&t.setLockAction(r,i)}).then(function(){Ma.resolve(e)},function(t){Ma.reject(e,{err:-1},[],t)})},Na.VerifySignature=function(t,n){var r=n.docId,i=n.fieldName,a=n.verifyConfig;return Ma.getDocByID(r).then(function(t){La(r,t);var n=t.engine,s=t.loadForm().GetField(0,(0,$.Dp)(n,i));return function(t,n){return(0,e._)(function(e,t){var n,r,i,a,s,c,u,d,h,f,g,p,v=arguments;return(0,l.Jh)(this,function(l){switch(l.label){case 0:n=v.length>2&&void 0!==v[2]?v[2]:{},r=!(v.length>3&&void 0!==v[3])||v[3],i=e.engine,a={},s=new i.Signature(t),c=s.GetName().toString(),l.label=1;case 1:return l.trys.push([1,5,,6]),[4,(0,Qn.ew)(i,Ra(s,e,Fa,n.dbInfo),n,e.JR)];case 2:return u=l.sent(),s.StartVerify(u,0).Continue(),r?(d=s.GetVerifyInfo(),h={isIllegalESignCNBehavior:{}.isIllegalESignCNBehavior},[4,(0,Qn.O1)({engine:i,verifyInfo:d,options:h,trustedCertificateList:null!==(f=n.trustedCertificateList)&&void 0!==f?f:[],JR:e.JR})]):[3,4];case 3:g=l.sent(),a[c]=(0,o._)({},g),l.label=4;case 4:return[3,6];case 5:return p=l.sent(),a[c]={verifyException:!0},console.log(p),[3,6];case 6:return s.delete(),[2,a]}})}).apply(this,arguments)}(t,s=new n.Signature(s),a)}).then(function(e){Ma.resolve(t,e)},function(e){Ma.reject(t,{err:-1},[],e)})},Na.getDigitalSignatureInfo=function(e,t){var n=t.docId,r=t.fieldName,i=t.trustedCertificateList;return Ma.getDocByID(n).then(function(e){La(n,e);var t=e.engine,a=e.loadForm().GetField(0,(0,$.Dp)(t,r));return xa(e,a=new t.Signature(a),i)}).then(function(t){Ma.resolve(e,t)},function(t){Ma.reject(e,{err:-1},[],t)})},Na.verifyDocSignature=function(e,t){var n=t.docId,r=t.verifyConfig;return Ma.getDocByID(n).then(function(e){return La(n,e),e.verifyDocSignature(r)}).then(function(t){Ma.resolve(e,t)},function(t){Ma.reject(e,{err:-1},[],t)})},Na.verifySignatureLtv=function(e,t){var n=t.docId,r=t.fieldName,i=t.verifyConfig;return Ma.getDocByID(n).then(function(e){La(n,e);var t=e.loadForm().getField(r);return Ga.ZP.loadWasmModule(Ga.v6).then(function(){return t.verifySignatureLtv(i)})}).then(function(t){Ma.resolve(e,t)},function(t){Ma.reject(e,{err:-1},[],t)})},Na.clearSignature=function(e,t){var n=t.docId,r=t.fieldName,i=t.verifyConfig;return Ma.getDocByID(n).then(function(e){return La(n,e),e.loadForm().getField(r).clearSignature(i)}).then(function(t){Ma.resolve(e,t)},function(t){Ma.reject(e,{err:-1},[],t)})},Na.getSignatureBitmap=function(e,t){var n=t.docId,r=t.fieldName;return Ma.getDocByID(n).then(function(e){return La(n,e),e.loadForm().getField(r).getSignatureBitmap()}).then(function(t){Ma.resolve(e,t,t?[t.buffer]:[])},function(t){Ma.reject(e,{err:-1},[],t)})},Na.setSignatureBitmap=function(e,t){var n=t.docId,r=t.fieldName,i=t.buffer;return Ma.getDocByID(n).then(function(e){return La(n,e),e.loadForm().getField(r).setSignatureBitmap(i)}).then(function(t){Ma.resolve(e,t)},function(t){Ma.reject(e,{err:-1},[],t)})},Na.getControlPageIndex=function(e,t){var n=t.docId,r=t.fieldName,i=t.objectNumber;return Ma.getDocByID(n).then(function(e){La(n,e);var t=e.loadForm().getField(r);if(!t)return-1;for(var a=t.engineField,o=a.GetControlCount(),s=0;s<o;s++){var c=a.GetControl(s);if(i==c.GetDictionaryObjectNumber()){var u=c.GetWidget();return u.IsEmpty()?-1:u.GetPage().GetIndex()}}return-1}).then(function(t){Ma.resolve(e,t)},function(t){Ma.reject(e,{err:-1},[],t)})},Na.copyControls=function(e,t){var n=t.docId,r=(t.pageIndex,t.dstPageIndex),i=t.controls;return Ma.getDocByID(n).then(function(e){return La(n,e),Promise.all([0,e.getPageByIndex(r)]).then(function(t){var n=(0,s._)(t,2),r=n[0],a=n[1];return e.loadForm().copyControls(r,a,i)})}).then(function(t){Ma.resolve(e,t)},function(t){Ma.reject(e,{err:-1},[],t)})},Na.duplicateWidget=function(e,t){var n=t.docId,r=t.pages,i=t.fieldName,a=t.objectNumber;return Ma.getDocByID(n).then(function(e){La(n,e);var t=r.map(function(t){return e.getPageByIndex(t)}),o=e.loadForm();return Promise.all(t).then(function(e){return o.duplicateWidget(e,i,a)})}).then(function(t){Ma.resolve(e,t)},function(t){Ma.reject(e,{err:-1},[],t)})},Na.removeAction=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.trigger,o=(t.parentObject,t.objectNumber);return Ma.getDocByID(n).then(function(e){return e.getPageById(r).getAnnotById(i)}).then(function(t){Ma.resolve(e,t.removeAction(a,o))})},Na.duplicateField=function(e,t){var n=t.docId,r=t.fieldName,i=t.pageIndex,a=t.annotObjNum,o=t.columns,c=t.rows,u=t.positions;return Ma.getDocByID(n).then(function(e){return La(n,e),Promise.all([e,e.getPageByIndex(i)])}).then(function(e){var t=(0,s._)(e,2),n=t[0],i=t[1];return n.loadForm().duplicateField(r,i,a,o,c,u)}).then(function(e){return e.loadForm().toJson()}).then(function(t){Ma.resolve(e,t)},function(t){Ma.reject(e,{err:-1},[],t)})},Na.setCO=function(e,t){var n=t.docId,r=t.CO;return Ma.getDocByID(n).then(function(t){La(n,t);t.engine;t.loadForm().setCO(r),Ma.resolve(e,!0)})},Na.moveControl=function(e,t){var n=t.docId,r=t.fieldId,i=t.fieldName,a=t.newName;return Ma.getDocByID(n).then(function(e){La(n,e);for(var t=e.engine,o=e.loadForm(),s=o.engineForm,c=o.getField(i).engineField,u=c.GetControlCount(),l=new t.WString(a),d="",h=0;h<u;h++){var f=c.GetControl(h);if(f.GetWidget().GetDict().GetObjNum()===r){d=s.MoveControl(f,l);break}}return delete e.form,l.delete(),o.destroy(),!!d&&e.loadForm().toJson()}).then(function(t){Ma.resolve(e,t)})},Na.getAAJson=function(e,t){var n=t.docId,r=t.fieldName;return Ma.getDocByID(n).then(function(e){return e.loadForm().getField(r).getAAJson()}).then(function(t){Ma.resolve(e,t)})};const Ua=Ba.extendsWorkerAPI.bind(Ba);var Wa={},Ha={},Ka=new(function(e){function n(){var e;return(0,t._)(this,n),(e=(0,V._)(this,n)).workerObj=Wa,e.apis=Ha,e}return(0,Z._)(n,e),(0,r._)(n,[{key:"extendsWorkerAPI",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,J._)((0,Y._)(n.prototype),"extendsWorkerAPI",this).apply(this,t),this}},{key:"clearObjectFromCache",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];qa.apply(null,t)}}]),n}(Ta)),za={};function Va(e,t,n){var r=za[t]=za[t]||{};(r[n]=r[n]||{})[e.id]=e}var Ja={};function Ya(e,t,n,r){var i=Ja[t]=Ja[t]||{};(i[n]=i[n]||{})[r]=e}function Za(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{r=za[e][t][n]}catch(e){}if(!r&&!i)throw new Error("Couldn't obtain the graphic object from cache and the operation cannot be performed!");return r}function qa(e,t,n){try{n?delete za[e][t][n]:t?delete za[e][t]:e&&delete za[e]}catch(e){}}Ha.getGraphicsObjectAtPoint=function(e,t){var n=t.docId,r=t.pageId,i=t.point,o=t.tolerance,s=t.type,c=t.rect;return Wa.getPageByID(n,r).then(function(e){return c?e.getGraphicsObjectsInRect(c,o,s):e.getGraphicsObjectAtPoint(i,o,s)}).then(function(t){if((0,a._)(t,Array)){var i=[];return t.forEach(function(e){Va(e,n,r),i.push(e.toJson())}),void Wa.resolve(e,i)}t?(Va(t,n,r),Wa.resolve(e,t.toJson())):Wa.resolve(e,{})})},Ha.setGraphicsObjectMatrix=function(e,t){var n=t.docId,r=t.pageId,i=t.id,a=t.matrix,o=Za(n,r,i);o.setMatrix(a),Wa.resolve(e,o.toJson())},Ha.setGraphicsObjectRect=function(e,t){var n=t.docId,r=t.pageId,i=t.id,a=t.rect,o=Za(n,r,i);o.setRect(a,!0),Wa.resolve(e,o.toJson())},Ha.getGraphicsObjectBitmap=function(e,t){var n=t.docId,r=t.pageId,i=t.id,a=t.scale,o=t.rotation,s=Za(n,r,i).render(a,o,null);Wa.resolve(e,s,[s.buffer])},Ha.setGraphicsObjectBorderStyle=function(e,t){var n=t.docId,r=t.pageId,i=t.id,a=t.style,o=t.dashes,s=Za(n,r,i);s.setBorderStyle(a,o,!0),Wa.resolve(e,s.toJson())},Ha.setGraphicsObjectBorderWidth=function(e,t){var n=t.docId,r=t.pageId,i=t.id,a=t.width,o=Za(n,r,i);o.setBorderWidth(a,!0),Wa.resolve(e,o.toJson())},Ha.setGraphicsObjectBorderColor=function(e,t){var n,r=t.docId,i=t.pageId,a=t.id,o=t.color,s=Za(r,i,a);s&&(n=s.setBorderColor(o,!0)),Wa.resolve(e,n)},Ha.setGraphicsObjectFillColor=function(e,t){var n=t.docId,r=t.pageId,i=t.id,a=t.color,o=Za(n,r,i);o.setFillColor(a,!0),Wa.resolve(e,o.toJson())},Ha.setGraphicsObjectOpacity=function(e,t){var n,r=t.docId,i=t.pageId,a=t.id,o=t.opacity,s=Za(r,i,a);s&&(n=s.setOpacity(parseFloat(o),!0)),Wa.resolve(e,n)},Ha.addGraphicsObject=function(e,t){var n=t.docId,r=t.pageId,i=t.info;return Promise.all([Wa.jrPromise,Wa.getPageByID(n,r)]).then(function(e){var t=(0,s._)(e,2),n=t[0],r=t[1];return Promise.all([n,r,r.c_pagePromise])}).then(function(e){var t=(0,s._)(e,3),n=t[0],r=t[1],a=t[2];return n.graphicsObjectManager.create(i,a,r)}).then(function(t){Va(t,n,r),Wa.resolve(e,t.toJson())})},Ha.setImageObjectOpacity=function(e,t){var n,r=t.docId,i=t.pageId,a=t.id,o=t.opacity,s=Za(r,i,a);s&&(n=s.setOpacity(o,!0)),Wa.resolve(e,n)},Ha.removeGraphicsObject=function(e,t){var n,r=t.docId,i=t.pageId,a=t.id,o=t.resetContent,s=Za(r,i,a,!0);s&&(n=s.remove(o),s=null,qa(r,i,a)),Wa.resolve(e,n)},Ha.moveGraphicsObjectByPosition=function(e,t){var n,r=t.docId,i=t.pageId,a=t.id,o=t.type,s=t.graphicObjectId,c=Za(r,i,a,!0);c&&(n=c.moveToPosition(o,s)),Wa.resolve(e,n)},Ha.setImageObjectRotation=function(e,t){var n=t.docId,r=t.pageId,i=t.id,a=t.rotation,o=Za(n,r,i);o.setRotation(a,!0),Wa.resolve(e,o.toJson())},Ha.getImageObjectStream=function(e,t){var n=Za(t.docId,t.pageId,t.id);Wa.resolve(e,n.getStream())},Ha.setTextObjectChar=function(e,t){var n=t.docId,r=t.pageId,i=t.id,a=t.char,o=Za(n,r,i);return o.setText(a).then(function(){Wa.resolve(e,o.toJson())})},Ha.setTextObjectItalic=function(e,t){var n=t.docId,r=t.pageId,i=t.id,a=t.italic,o=Za(n,r,i);return o.setItalic(a).then(function(){Wa.resolve(e,o.toJson())})},Ha.setTextObjectBold=function(e,t){var n=t.docId,r=t.pageId,i=t.id,a=t.bold,o=Za(n,r,i);return o.setBold(a).then(function(){Wa.resolve(e,o.toJson())})},Ha.setTextObjectFontSize=function(e,t){var n=t.docId,r=t.pageId,i=t.id,a=t.size,o=Za(n,r,i);return o.setFontSize(a).then(function(){Wa.resolve(e,o.toJson())})},Ha.setTextObjectStandardFont=function(e,t){var n=t.docId,r=t.pageId,i=t.id,a=t.standardId,o=Za(n,r,i);return o.setStandardFont(a).then(function(){Wa.resolve(e,o.toJson())})},Ha.setTextObjectFontByName=function(e,t){var n=t.docId,r=t.pageId,i=t.id,a=t.name,o=t.styles,s=t.charset,c=Za(n,r,i);return c.setFontByName(a,o,s).then(function(){Wa.resolve(e,c.toJson())})},Ha.getTextObjectWoff=function(e,t){var n=Za(t.docId,t.pageId,t.id).getWoff();return Wa.resolve(e,n,[])},Ha.pasteGraphicObject=function(e,t,n,r,i,a){var o=Ja[t][r.id][i],s=n.page,c=s.GetLastGraphicsObjectPosition(n.engine.GraphicsObjectType.e_TypeAll);s.InsertGraphicsObject(c,o.graphicsObject),o.setRect(a),s.GenerateContent(),Va(o,t,n.id),function(e,t,n){try{n?delete Ja[e][t][n]:t?delete Ja[e][t]:e&&delete Ja[e]}catch(e){}}(t,r.id,i);var u=o.graphicsObject.Clone();Ya(n.JR.graphicsObjectManager.get(u,s,n),t,r.id,i),Wa.resolve(e,o.toJson())},Ha.getGraphicsObjectByIndex=function(e,t){var n=t.docId,r=t.pageId,i=t.index;return Wa.getPageByID(n,r).then(function(e){return e.getGraphicsObjectByIndex(i)}).then(function(t){t?(Va(t,n,r),Wa.resolve(e,t.toJson())):Wa.resolve(e,{})})},Ha.getGraphicsObjectsCount=function(e,t){var n=t.docId,r=t.pageId;return Wa.getPageByID(n,r).then(function(e){return e.getGraphicsObjectsCount()}).then(function(t){Wa.resolve(e,t)})},Ha.addPageImage=function(e,t){var n=t.docId,r=t.pageId,i=t.imageBuffer,a=t.point,o=t.width,s=t.height,c=t.rotation;return Wa.getPageByID(n,r).then(function(e){return e.addImage(i,a,o,s,c)}).then(function(t){t&&Va(t,n,r),Wa.resolve(e,t&&t.toJson())})},Ha.cloneGraphicObject=function(e,t){var n=t.docId,r=t.pageId,i=t.srcPageId,a=t.ids;Ja={};var o=a.map(function(e){return Za(n,i,e)});return Wa.getPageByID(n,r).then(function(t){var r=o.map(function(e){return e.graphicsObject.Clone()}),i=t.page,s=[],c=[];r.forEach(function(e){s.push(t.JR.graphicsObjectManager.get(e,i,t))}),s.forEach(function(e,r){Ya(e,n,t.id,a[r]),c.push(e.toJson())}),Wa.resolve(e,c)})},Ha.getGraphicsObjectsByRect=function(e,t){var n=t.docId,r=t.pageId,i=t.rect,a=t.tolerance,o=t.type,s=t.isInRect;return Wa.getPageByID(n,r).then(function(e){return e.getGraphicsObjectsByRect(i,a,o,s)}).then(function(t){if(Array.isArray(t)){var i=[];return t.forEach(function(e){Va(e,n,r),i.push(e.toJson())}),void Wa.resolve(e,i)}t?(Va(t,n,r),Wa.resolve(e,t.toJson())):Wa.resolve(e,{})})};const Xa=Ka.extendsWorkerAPI.bind(Ka);var Qa=function(){function e(){(0,t._)(this,e),(0,i._)(this,"bitmaps",void 0),(0,i._)(this,"gsdk",void 0),this.bitmaps=new Map}return(0,r._)(e,[{key:"setGSDK",value:function(e){this.gsdk=e}},{key:"destroy",value:function(){this.bitmaps.forEach(function(e){return e.delete()})}},{key:"render",value:function(e,t,n){var r=this.gsdk,i=this.bitmaps,a=0|n.width,o=0|n.height,s=a+"-"+o,c=i[s]||(i[s]=new r.Bitmap(a,o,r.DIBFormat.e_DIBArgb,0,0));c.FillRect(16777215,null);var u=new r.Renderer(c,!0);return e(u),this.getBitmapBuffer(r,t,c,u)}},{key:"getBitmapBuffer",value:function(e,t,n,r){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];n.GetFormat()!=e.DIBFormat.e_DIBRgb32&&n.GetFormat()!=e.DIBFormat.e_DIBArgb&&n.ConvertFormat(e.DIBFormat.e_DIBRgb32);var a,o=n.GetBuffer(),s=n.GetWidth(),c=n.GetHeight(),u=c*n.GetPitch(),l=o+u;return a=e.HEAPU8.buffer.slice?e.HEAPU8.buffer.slice(o,l):new Uint8Array(e.HEAPU8.buffer,o,u).buffer,i&&r.delete(),{index:t,buffer:a,width:s,height:c,left:0,top:0,docRect:{left:0,top:0,right:0,bottom:0}}}}]),e}();const $a=new Qa;var eo=function(){function e(){var n=this;(0,t._)(this,e),(0,i._)(this,"Release",function(){}),(0,i._)(this,"FindFontInFormatBar",function(e){}),(0,i._)(this,"EnableFormatToolBar",function(e){}),(0,i._)(this,"SetOwnerFontName",function(e){for(var t=[],n=0,r=e.GetSize();n<r;n++)t.push(e.GetAt(n).toString());postMessage({workflow:go,type:"fontNameChange",msg:t})}),(0,i._)(this,"ClearOwnerFontName",function(e){}),(0,i._)(this,"UpdateTextFormat",function(e,t,r,i,a,o,s,c){var u=n.getFontName(r),l=n.getFontName(i);n.setToolbarFont({value:l});var d=Gn(t.dwWordColor),h=Gn(t.dwStrokeColor);n.setLastFontInfo({fontName:l,fontIsBold:Boolean(262144&t.nWordStyle||11===t.nRenderingMode),fontIsItalic:Boolean(64&t.nWordStyle),fontSize:t.fFontSize,charSpace:t.fCharSpace,wordSpace:t.fWordSpace,horizontalScale:t.nHorzScale,strokeColor:h,fillColor:d,opacity:t.nAlphal/255}),postMessage({workflow:go,type:"updateTextFormat",msg:{secProps:{lineLeading:e.fLineLeading,lineIndent:e.fLineIndent,alignment:e.nAlignment,enableSoftReturn:e.bEnableSoftReturn,rtl:e.bRTL,secSpace:e.fSecSpace>=0?e.fSecSpace:0},wordProp:{fontSize:t.fFontSize,wordColor:Rn(t.dwWordColor),strokeColor:Rn(t.dwStrokeColor),scriptType:t.nScriptType,wordStyle:t.nWordStyle,charSpace:t.fCharSpace,horzScale:t.nHorzScale,wordSpace:t.fWordSpace,xOffset:t.fXOffset,yOffset:t.fYOffset,renderingMode:t.nRenderingMode,lineWidth:t.fLineWidth,charCode:t.dwCharCode,alphal:t.nAlphal/255,isCross:Boolean(4&t.nWordStyle),isUnderline:Boolean(2&t.nWordStyle),isBold:Boolean(262144&t.nWordStyle||11===t.nRenderingMode),isItalic:Boolean(64&t.nWordStyle)},fontName:u,bulletType:a.value,numberType:o.value,select:s}})})}return(0,r._)(e,[{key:"setToolbarFont",value:function(e){}},{key:"setLastFontInfo",value:function(e){}},{key:"getFontName",value:function(e){var t=e?e.toString():"Helvetica";return t=(0,te.Yq)(t)||t}}]),e}(),to={},no={},ro={trackPopupMenu:function(e,t,n,r){},TrackPopupMenu:function(e,t,n,r){return ro.trackPopupMenu(to[e],t,n,r)},Release:function(){},CreatePopupMenu:function(){var e=(Date.now()+1e3*Math.random()|0)%2147483647;return to[e]=[],e},CreatePopupSubMenu:function(){var e=(Date.now()+1e3*Math.random()|0)%2147483647;return to[e]=[],e},AppendMenuItem:function(e,t){var n={name:t,enable:!0,isCheck:!0,id:t};no[t]=n,to[e].push(n)},AppendSubMenu:function(e,t,n){to[e].push({name:t,subItems:to[n]})},RemoveMenuItem:function(e,t,n){},AppendSeparator:function(e){to[e].push({name:"-"})},EnableMenuItem:function(e,t,n,r){var i=no[t];i&&(i.enable=n)},CheckMenuItem:function(e,t,n){no[t].isCheck=n},InsertMenuItem:function(e,t,n,r){},InsertSeparator:function(e,t){},DestroyMenu:function(e){to={}},IsMenuEnabled:function(e){return!0}};const io=ro;var ao,oo,so=function(){function e(){(0,t._)(this,e),(0,i._)(this,"curUndoPos",0),(0,i._)(this,"undoItems",[]),(0,i._)(this,"undoNotifyItems",[]),(0,i._)(this,"nBufSize",1e4),(0,i._)(this,"bVirgin",!0),(0,i._)(this,"isUndoing",!1),(0,i._)(this,"isRedoing",!1),(0,i._)(this,"docNotify",!1),(0,i._)(this,"notifyPos",0)}return(0,r._)(e,[{key:"addItem",value:function(e){this.docNotify?(this.notifyPos<this.undoNotifyItems.length&&this.removeTails(),this.undoNotifyItems.length>=this.nBufSize&&(this.removeHeads(),this.bVirgin=!1),this.undoNotifyItems.push(e),this.notifyPos=this.undoNotifyItems.length):(this.curUndoPos<this.undoItems.length&&this.removeTails(),this.undoItems.length>=this.nBufSize&&(this.removeHeads(),this.bVirgin=!1),this.undoItems.push(e),this.curUndoPos=this.undoItems.length)}},{key:"removeTails",value:function(){if(this.docNotify)for(var e=this.undoNotifyItems.length-1;e>=this.notifyPos;e--)this.undoNotifyItems.pop();else for(var t=this.undoItems.length-1;t>=this.curUndoPos;t--)this.undoItems.pop()}},{key:"removeHeads",value:function(){this.docNotify?this.undoNotifyItems.shift():this.undoItems.shift()}},{key:"reset",value:function(){this.docNotify?(this.notifyPos=0,this.undoNotifyItems=[]):(this.curUndoPos=0,this.undoItems=[])}},{key:"undo",value:function(e){if(this.isUndoing=!0,this.docNotify){if(this.notifyPos>0){if(this.notifyPos<=this.undoNotifyItems.length){var t=this.undoNotifyItems[this.notifyPos-1];if(!t)return;if(Array.isArray(t))for(var n=t.length-1;n>=0;n--)e(t[n]);else e(t)}this.notifyPos--}}else if(this.curUndoPos>0){if(this.curUndoPos<=this.undoItems.length){var r=this.undoItems[this.curUndoPos-1];if(!r)return;if(Array.isArray(r))for(var i=r.length-1;i>=0;i--)e(r[i]);else e(r)}this.curUndoPos--}this.isUndoing=!1}},{key:"redo",value:function(e){if(this.isRedoing=!0,this.docNotify){if(this.notifyPos>=0&&this.notifyPos<this.undoNotifyItems.length){var t=this.undoNotifyItems[this.notifyPos];if(!t)return;if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else e(t);this.notifyPos++}}else if(this.curUndoPos>=0&&this.curUndoPos<this.undoItems.length){var r=this.undoItems[this.curUndoPos];if(!r)return;if(Array.isArray(r))for(var i=0;i<r.length;i++)e(r[i]);else e(r);this.curUndoPos++}this.isRedoing=!1}},{key:"isUndoRedoing",value:function(){return this.isUndoing||this.isRedoing}},{key:"canRedo",value:function(){return this.docNotify?this.notifyPos>=0&&this.notifyPos<this.undoNotifyItems.length:this.curUndoPos>=0&&this.curUndoPos<this.undoItems.length}},{key:"canUndo",value:function(){return this.docNotify?this.notifyPos>0:this.curUndoPos>0}},{key:"setDocNotify",value:function(e){this.docNotify=e}},{key:"getDocNotify",value:function(){return this.docNotify}},{key:"getUndoItems",value:function(){return this.canUndo()?this.docNotify?this.undoNotifyItems.slice(0,this.notifyPos):this.undoItems.slice(0,this.curUndoPos):[]}},{key:"getRedoItems",value:function(){return this.canRedo()?this.docNotify?this.undoNotifyItems.slice(this.notifyPos,this.undoNotifyItems.length):this.undoItems.slice(this.curUndoPos,this.undoItems.length):[]}},{key:"clearRedoItems",value:function(){this.docNotify?this.notifyPos=this.undoNotifyItems.length:this.curUndoPos=this.undoItems.length}}]),e}(),co=function(){function e(n){(0,t._)(this,e),(0,i._)(this,"doc",void 0),(0,i._)(this,"key","touchupUndo"),(0,i._)(this,"isOwnUndo",!1),(0,i._)(this,"nGroupCount",0),(0,i._)(this,"tempGroupItem",void 0),this.doc=n}return(0,r._)(e,[{key:"Release",value:function(){}},{key:"BeginEdit",value:function(e){if(this.doc){var t=this.getDocUndoData();t?t.bEdit||(t.bEdit=!0,t.editUndo&&t.editUndo.reset()):(t=this.doc.createDocUndoData(this.key)).bEdit=!0}}},{key:"EndEdit",value:function(){var e=this.getDocUndoData();e&&(e.bEdit=!1,e.editUndo&&e.editUndo.reset())}},{key:"IsUndoRedoing",value:function(){var e=this.getDocUndo();return!!e&&e.isUndoRedoing()}},{key:"BeginUndoGroup",value:function(){0===this.nGroupCount&&(this.tempGroupItem=[]),this.nGroupCount++}},{key:"EndUndoGroup",value:function(e){if(this.tempGroupItem&&(this.nGroupCount--,0===this.nGroupCount))if(this.tempGroupItem.length>0){var t=this.getDocUndo(e);t||(t=new so,this.setDocUndo(e,t),this.isOwnUndo&&t.setDocNotify(!0)),t.addItem(this.tempGroupItem)}else this.tempGroupItem=[],this.nGroupCount=0}},{key:"SetOwnUndoMode",value:function(e){var t=this.getDocUndo();t&&(this.isOwnUndo&&t.getDocNotify()&&t.reset(),t.setDocNotify(e)),this.isOwnUndo=e}},{key:"Restore",value:function(e){}},{key:"getDocUndo",value:function(e){var t=this.doc.getDocUndoData(this.key);return t?(void 0===e&&(e=t.bEdit),e?t.editUndo:t.normalUndo):null}},{key:"setDocUndo",value:function(e,t){var n=this.doc.getDocUndoData(this.key);n||(n=this.doc.createDocUndoData(this.key)),e?n.editUndo=t:n.normalUndo=t}},{key:"getDocUndoData",value:function(){return this.doc.getDocUndoData(this.key)}}]),e}(),uo=!0,lo=!1;function ho(e,t){var n=e.toLowerCase(),r=t.toLowerCase();return n.includes(r)?e.replaceAll(new RegExp(r,"gi"),""):e}var fo,go="touchup",po=function(){function e(n){var r=this;(0,t._)(this,e),(0,i._)(this,"undoCallback",void 0),(0,i._)(this,"OnContentChange",void 0),(0,i._)(this,"undos",void 0),(0,i._)(this,"redos",void 0),(0,i._)(this,"Undo",function(e){var t=r.undoCallback.getDocUndoData();t&&(e?t.bEdit&&t.editUndo&&t.editUndo.canUndo()?t.editUndo.undo(function(t){ao.TouchupUndo(t,e)}):t.normalUndo&&t.normalUndo.canUndo()&&t.normalUndo.undo(function(t){ao.TouchupUndo(t,e)}):t.bEdit&&t.editUndo&&t.editUndo.canRedo()?t.editUndo.redo(function(t){ao.TouchupUndo(t,e)}):t.normalUndo&&t.normalUndo.canRedo()&&t.normalUndo.redo(function(t){ao.TouchupUndo(t,e)}))}),this.undoCallback=n}return(0,r._)(e,[{key:"Release",value:function(){}},{key:"OnEnterEditing",value:function(e){return postMessage({workflow:go,type:"enterEdit"}),!1}},{key:"OnExitEditing",value:function(){return postMessage({workflow:go,type:"exitEdit"}),!1}},{key:"OnInvalid",value:function(e,t,n){}},{key:"SetTimerCallback",value:function(e,t){var n=setInterval(function(){ao.OnTimeout(t,n)},e);return uo&&postMessage({workflow:go,type:"toggleCaret",msg:!0}),n}},{key:"KillTimer",value:function(e){uo&&postMessage({workflow:go,type:"toggleCaret",msg:!1}),clearInterval(e)}},{key:"OnAddUndo",value:function(e,t){if(postMessage({workflow:go,type:"docModified"}),this.undoCallback.tempGroupItem)this.undoCallback.tempGroupItem.push(e);else{var n=this.undoCallback.getDocUndo(t);n||(n=new so,this.undoCallback.setDocUndo(t,n),this.undoCallback.isOwnUndo&&n.setDocNotify(!0)),n.addItem(e)}}},{key:"OnChangeDoc",value:function(e){}},{key:"OnLROnPageWithoutText",value:function(e){var t=e.GetPage();if(!t.IsEmpty()){var n=t.GetIndex();postMessage({workflow:go,type:"pageWithoutText",msg:n})}}},{key:"OnTextInputReachesLimit",value:function(e){var t=e.GetPage();if(!t.IsEmpty()){var n=t.GetIndex();postMessage({workflow:go,type:"onTextInputReachesLimit",msg:n})}}}]),e}(),vo={Create:function(e,t){return postMessage({workflow:go,type:"progressCreate",msg:[e,t]}),101},IsCancelled:function(e){return!1}};fo=self.Proxy?new Proxy(vo,{get:function(e,t){return e[t]?e[t]:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];postMessage({workflow:go,type:"progress"+t.toString(),msg:n.map(function(e){return(0,a._)(e,ao.WString)?e.toString():e})})}}}):function(){};var mo=function(){function e(){var n=this;(0,t._)(this,e),(0,i._)(this,"touchMgr",void 0),(0,i._)(this,"matrixes",void 0),(0,i._)(this,"visibleIndexes",[]),(0,i._)(this,"GetVisiblePage",void 0),(0,i._)(this,"GetDefaultEditorPage",void 0),(0,i._)(this,"GetPage",void 0),(0,i._)(this,"GetLatestPDFPage",void 0),(0,i._)(this,"GetCurrentEditorPage",void 0),(0,i._)(this,"IsShiftKeyDown",void 0),(0,i._)(this,"IsControlKeyDown",void 0),(0,i._)(this,"font",{type:"WString",value:""}),(0,i._)(this,"lastFontInfo",void 0),(0,i._)(this,"revertRects",[]),(0,i._)(this,"Release",function(){}),(0,i._)(this,"GetRenderMatrix",function(e){var t=e.GetPage();if(!t.IsEmpty()){if(n.touchMgr.isInChangeTextColorByRect){var r=new ao.Matrix;return r.d=-1,r.f=t.GetHeight(),r}var i=new ao.Matrix;if(!n.matrixes)return i;var a=n.matrixes[t.GetIndex()];if(!a)return i;var o=a[2];i.Set(o.a,o.b,o.c,o.d,o.e,o.f);var s=n.matrixes.dpr||1;return i.Scale(s,s,!1),i}}),(0,i._)(this,"GetClientRect",function(e){if(n.touchMgr.isInChangeTextColorByRect){var t=e.GetPage();if(t.IsEmpty())return;var r=new ao.CFX_FloatRect;return r.right=t.GetWidth(),r.height=t.GetHeight(),r}var i=n.matrixes.uiRect,a=i.width,o=i.height,s=n.matrixes.dpr||1,c=new ao.CFX_FloatRect;return c.left=0,c.top=0,c.right=a*s,c.bottom=o*s,c}),(0,i._)(this,"GetPageVisibleRect",function(e){var t=e.GetPage();if(!t.IsEmpty()){if(n.touchMgr.isInChangeTextColorByRect){var r=new ao.CFX_FloatRect;return r.right=t.GetWidth(),r.bottom=t.GetHeight(),r}var i=n.matrixes[t.GetIndex()],a=new ao.CFX_FloatRect;if(!i)return a;var o=i[3],s=n.matrixes.dpr||1;a.left=o.left*s,a.top=o.top*s,a.right=o.right*s,a.bottom=o.bottom*s;var c=n.GetRenderMatrix(e),u=new ao.Matrix;return u.SetReverse(c),u.TransformRect(a),c.delete(),u.delete(),a}}),(0,i._)(this,"GetPageRect",function(e){var t=e.GetPage();if(!t.IsEmpty()){if(n.touchMgr.isInChangeTextColorByRect){var r=new ao.CFX_FloatRect;return r.right=t.GetWidth(),r.bottom=t.GetHeight(),r}var i=n.matrixes[t.GetIndex()],a=new ao.CFX_FloatRect;if(!i)return a;var o=i[4],s=n.matrixes.dpr||1;return a.left=o.left*s,a.top=o.top*s,a.right=o.right*s,a.bottom=o.bottom*s,a}}),(0,i._)(this,"GetPageViewScale",function(e){var t=e.GetPage();if(!t.IsEmpty()){var r=t.GetIndex(),i=n.matrixes[r];return i?i[0]:4/3}}),(0,i._)(this,"GotoPageView",function(e,t,n){var r=e.GetPage();if(!r.IsEmpty()){var i=r.GetIndex();return postMessage({workflow:go,type:"gotoPageView",msg:{index:i,left:t,top:n}}),!0}}),(0,i._)(this,"ScrollToCenterPoint",function(e,t){var n=e.GetPage();if(!n.IsEmpty()){var r=n.GetIndex();postMessage({workflow:go,type:"gotoPageView",msg:{index:r,left:t.x,top:t.y}})}}),(0,i._)(this,"Scroll",function(e,t){console.log("Scroll")}),(0,i._)(this,"GetString",function(e){return(0,$.Dp)(ao,"string"+e)}),(0,i._)(this,"ShowMessageBox",function(e,t,n){return postMessage({workflow:go,type:"showMessageBox",msg:{id:e.value,flag:t,data:n}}),!0}),(0,i._)(this,"ChangeCursor",function(e){postMessage({workflow:go,type:"cursorChange",msg:e&&e.value})}),(0,i._)(this,"GetPageWindow",function(e){var t=e.GetPage();return t.IsEmpty()?0:t.GetIndex()+1e3}),(0,i._)(this,"SetClipboardText",function(e,t){__webpack_require__.g.clipboardText=t.toString()}),(0,i._)(this,"GetClipboardText",function(){return(0,$.Dp)(ao,__webpack_require__.g.clipboardText||"")}),(0,i._)(this,"DrawRect",function(e,t,r){return!n.touchMgr.lastEditorPage||(r.TransformRect(t),n.revertRects.push({left:t.left,right:t.right,top:t.top,bottom:t.bottom}),!0)})}return(0,r._)(e,[{key:"GetToolbarFontName",value:function(){if(this.font.value){if((0,te.Cl)(this.font.value))return(0,$.Dp)(ao,this.font.value);var e=this.font.value;return e=ho(e,"bold"),e=ho(e,"italic"),(e=ho(e,"oblique")).endsWith(",")&&(e=e.substr(0,e.length-1)),(0,$.Dp)(ao,e)}return(0,$.Dp)(ao,this.font.value)}},{key:"setToolbarFont",value:function(e){this.font=e,this.lastFontInfo&&(this.lastFontInfo.fontName=e.value),this.touchMgr.doc.pageEditor&&(this.touchMgr.doc.pageEditor.editingFontName=e.value)}},{key:"setToolbarFontSize",value:function(e){var t;this.lastFontInfo&&(this.lastFontInfo.fontSize=e),(null===(t=this.touchMgr.doc.pageEditor)||void 0===t?void 0:t.lastFontInfo)&&(this.touchMgr.doc.pageEditor.lastFontInfo.fontSize=e)}},{key:"GetTextTemplate",value:function(e,t,n){if(t){var r=ao.getPETextObj(t);if(r.GetType()==ao.GraphicsObjectType.e_TypeText){var i=this.getLastFontInfo(),a=(null==i?void 0:i.fontName)||(0,te.gO)(),o={};this.touchMgr.doc.pageEditor&&(o=this.touchMgr.doc.pageEditor.handle("getDefaultProperty",null,[1]));var s=Object.assign({font:new ao.Font(new ao.WString(a),0,0,0),fontName:a,fontSize:16,charSpace:0,wordSpace:0,textMode:ao.Mode.e_ModeFill.value,horizontalScale:100,strokeColor:0,fillColor:0,fontIsItalic:!1,fontIsBold:!1,opacity:1},i,o),c=r.GetTextObject();this.font.value=s.fontName;var u=new ao.TextState;u.font=s.font,u.font_size=s.fontSize,u.charspace=s.charSpace,u.wordspace=s.wordSpace,u.textmode=s.textMode,u.origin_position.x=0,u.origin_position.y=0,u.SetMatrixA(s.horizontalScale/100),u.SetMatrixB(0),u.SetMatrixC(0),u.SetMatrixD(1);var l=e.GetPage(),d=this.matrixes[l.GetIndex()],h=d?d[1]/90:0;switch(4-(l.GetRotation().value+h)%4){case 1:u.SetMatrixA(0),u.SetMatrixB(-1),u.SetMatrixC(s.horizontalScale/100),u.SetMatrixD(0);break;case 2:u.SetMatrixA(-1),u.SetMatrixB(0),u.SetMatrixC(0),u.SetMatrixD(-1);break;case 3:u.SetMatrixA(0),u.SetMatrixB(1),u.SetMatrixC(-s.horizontalScale/100),u.SetMatrixD(0)}c.SetTextState(e.GetPage(),u,s.fontIsItalic,s.fontIsBold?550:400),c.SetFillColor(s.fillColor),c.SetStrokeColor(s.strokeColor),c.SetFillOpacity(s.opacity),c.SetStrokeOpacity(s.opacity)}}}},{key:"IsTextDirectionEnabled",value:function(){return!1}},{key:"GetTextDirection",value:function(){return{value:0}}},{key:"setLastFontInfo",value:function(e){this.lastFontInfo=e,this.touchMgr.doc.pageEditor&&(this.touchMgr.doc.pageEditor.lastFontInfo=e)}},{key:"getLastFontInfo",value:function(){return this.lastFontInfo}}]),e}(),_o=function(){function e(){(0,t._)(this,e),(0,i._)(this,"rects",[]),(0,i._)(this,"currTextRects",[])}return(0,r._)(e,[{key:"Release",value:function(){}},{key:"OnEnterReplaceAll",value:function(e){}},{key:"OnExitReplaceAll",value:function(e){}},{key:"GetLastedDocTempPath",value:function(e){return(0,$.Dp)(ao,"c:/fakepath.pdf")}},{key:"ReParseTextPage",value:function(e,t,n){}},{key:"AddSelectTextRects",value:function(e,t){if(uo)for(var n=[],r=0;r<t.GetSize();r++){var i=t.GetAt(r),a={left:i.left,right:i.right,top:i.top,bottom:i.bottom};n.push(a),this.currTextRects=n,this.rects.push(a)}}},{key:"GetSelectPDFRect",value:function(e){var t=new ao.RectFArray;return this.rects.forEach(function(e){var n=new ao.CFX_FloatRect(e.left,e.bottom,e.right,e.top);t.Add(n)}),t}},{key:"AddSelect",value:function(e,t){if(uo){this.rects=[];for(var n=0;n<t.GetSize();n++){var r=t.GetAt(n);this.rects.push({left:r.left,right:r.right,top:r.top,bottom:r.bottom})}}}},{key:"DeselectAll",value:function(){this.rects=[]}}]),e}(),yo=function(){function n(){var e=this;(0,t._)(this,n),(0,i._)(this,"targets",{}),(0,i._)(this,"target",void 0),(0,i._)(this,"controlDown",!1),(0,i._)(this,"shiftDown",!1),(0,i._)(this,"findReplace",void 0),(0,i._)(this,"providerCallback",void 0),(0,i._)(this,"operationNotifier",void 0),(0,i._)(this,"lastInvalid",void 0),(0,i._)(this,"editPages",void 0),(0,i._)(this,"doc",void 0),(0,i._)(this,"jrMgr",void 0),(0,i._)(this,"popMenuAction",-1),(0,i._)(this,"lastRButtonUpArgs",void 0),(0,i._)(this,"updateTask",void 0),(0,i._)(this,"modifiedObjects",[]),(0,i._)(this,"lastEditorPage",void 0),(0,i._)(this,"cProvider",void 0),(0,i._)(this,"OnInvalidDelay",void 0),(0,i._)(this,"skipThrottle",!1),(0,i._)(this,"findReplaceCallback",void 0),(0,i._)(this,"currentSelectionPageIndex",-1),(0,i._)(this,"isActivated",!1),(0,i._)(this,"isInChangeTextColorByRect",!1),(0,i._)(this,"OnInvalid",function(){var t=e.render();if(t){var n={workflow:go,type:"updateView",msg:{bitmapInfo:t,revertRects:e.providerCallback.revertRects}};postMessage(n,[t.buffer])}}),(0,i._)(this,"OnContentChange",function(t,n,r,i){var a=n.GetPage(),o=a.GetIndex();if(r){for(var s=0;s<r.GetSize();s++){var c=r.GetAt(s);c.GenerateContent(),e.modifiedObjects.push(c)}var u=e.doc.pageIndexMap[o];if(null==u||u.releaseTextPageAndTextLinks(),u&&u.needReParse)return void u.parsedPage().then(function(e){a.GenerateContent()});a.GenerateContent()}postMessage({workflow:go,type:"contentChange",msg:{type:t.value,graphicsObjectType:ao.GraphicsObjectType.e_TypeText.value,pageIndex:o}})}),(0,i._)(this,"setJRMgr",function(t){e.jrMgr=t}),(0,i._)(this,"GetVisiblePage",function(t){var n=new ao.TouchupEditorPageArray;return e.providerCallback.visibleIndexes.forEach(function(e){var r=t.GetPage(e);if(!r.IsEmpty()){r.IsParsed()||r.StartParse(0,null,!1);var i=ao.TUEditorPage.Create(r,101);n.Add(i)}}),n}),(0,i._)(this,"GetDefaultEditorPage",function(t){var n=t?t.GetIndex():e.providerCallback.visibleIndexes[0],r=e.doc.doc.GetPage(n);return ao.TUEditorPage.Create(r,101)}),(0,i._)(this,"TrackPopupMenu",function(t,n,r,i){if(-1!==e.popMenuAction){var a=e.popMenuAction;return e.popMenuAction=-1,e.render(),a}var o={},s=i.GetPage().GetIndex(),c=e.providerCallback.matrixes.dpr||1;return o.position={x:n/c,y:r/c},o.menu=t,o.pageIndex=s,postMessage({workflow:go,type:"showPopupMenu",msg:o}),-1>>>0}),(0,i._)(this,"GetPage",function(t,n){var r;return r=e.doc.pageIndexMap[n]?e.doc.pageIndexMap[n].page:t.GetPage(n),ao.TUEditorPage.Create(r,100)}),(0,i._)(this,"GetCurrentEditorPage",function(){return e.GetDefaultEditorPage(0)}),(0,i._)(this,"IsShiftKeyDown",function(){return e.shiftDown}),(0,i._)(this,"IsControlKeyDown",function(){return e.controlDown}),(0,i._)(this,"setTextToolProperty",function(t){var n=e.doc.engine,r=n.AdvEditStyleType,i=n.LineType,a={editTextBox:r.e_AdvEditStyleType_EditTextBox,editTextCaret:r.e_AdvEditStyleType_EditTextCaret,addTextBox:r.e_AdvEditStyleType_AddTextBBox};return Object.entries(a).forEach(function(n){var r=(0,s._)(n,2),a=r[0],o=r[1],c=t[a];c?(e.jrMgr.ConfigColorStyle(o,!c.color,c.color),e.jrMgr.ConfigLineStyle(o,i.values[c.lineType?c.lineType:"0"])):(e.jrMgr.ConfigColorStyle(o,!0,null),e.jrMgr.ConfigLineStyle(o,i.values[0]))}),e.jrMgr.GenerateConfigInfo()})}return(0,r._)(n,[{key:"render",value:function(){var e=this;if(!this.target||!this.target.Render||!this.providerCallback.matrixes)return null;var t=this.providerCallback.matrixes.uiRect,n=this.providerCallback.matrixes.dpr,r={width:t.width*n,height:t.height*n};this.providerCallback.revertRects=[];var i=$a.render(function(t){var n=e.GetVisiblePage(e.doc.doc);return e.target.Render(n,t)},{},r);return i.left=t.left,i.top=t.top,i.docRect=this.providerCallback.matrixes.docRect,i}},{key:"pageModified",value:function(e){var t=this,n=new ao.TouchupEditorPageArray;e.forEach(function(e){var r=t.doc.pageIndexMap[e].page,i=ao.TUEditorPage.Create(r,101);n.Add(i)}),this.jrMgr.OnPageContentChange(n)}},{key:"setCObject",value:function(e,t,n,r){this.providerCallback=n,n.touchMgr=this,this.operationNotifier=t,this.editPages={},this.doc=e,this.cProvider=r}},{key:"updateMatrix",value:function(e){if(this.cProvider.SetSystemDPI(96*e.dpr,96*e.dpr),JSON.stringify(this.providerCallback.matrixes)!=JSON.stringify(e)||e.force){var t=e.visibleIndexes;0!=t.length&&(this.providerCallback.matrixes=e,this.providerCallback.visibleIndexes=t,this.OnInvalidDelay())}}},{key:"handleFindReplaceEvent",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];0;var i=this.findReplace;if(i||(i=this.findReplace=this.jrMgr.GetFindReplace()).SetHighlightColor(1325662463),"AbortReplaceAll"!=t){if("ReplaceAll"==t)return uo=!1,lo=!1,this.doc.getPageCount().then(function(t){var a=0,o=[r[0],0,{type:"FindOption",value:4|3&r[1].value}],s=[r[2]],c=r[3]||0,u=0,d=Nn(ao,n,o,ao.TUEditorPage),h=Nn(ao,n,s,ao.TUEditorPage);if(null===d||d.some(function(e){return null===e}))return!1;if(null===h||h.some(function(e){return null===e}))return!1;var f=function(r){return(0,e._)(function(){var e,n;return(0,l.Jh)(this,function(o){switch(o.label){case 0:return d[1]=r,postMessage({workflow:go,type:"replaceAllProgress",msg:{pageIndex:u,total:t}}),lo&&postMessage({workflow:go,type:"replaceAllProgress",msg:{pageIndex:-1}}),u>=t||lo?(uo=!0,[2,a]):[4,this.doc.getPageByIndex(r)];case 1:return!(e=o.sent()).needReParse&&e.page.IsParsed()?[3,3]:[4,e.parsedPage()];case 2:o.sent(),o.label=3;case 3:return a+=function(e,t,n){for(var r=0;e.Find.apply(e,t);)e.Replace.apply(e,n),r++;return r}(i,d,h),u++,(n=r+1)>=t&&(n=0),[2,Bn().then(function(){return f(n)})]}})}).call(n)};return f(c)}).finally(function(){n.resetUndoRedoItems()});var a=Nn(ao,this,r,ao.TUEditorPage);return null!==a&&!a.some(function(e){return null===e})&&(this.findReplaceCallback&&(this.findReplaceCallback.currTextRects=[]),"Find"==t?this.doc.getPageByIndex(r[1]).then(function(e){return e.parsedPage()}).then(function(e){return i[t].apply(i,a)}).then(function(e){var t;return n.currentSelectionPageIndex=r[1],{isFound:e,pageIndex:r[1],rectArray:null===(t=n.findReplaceCallback)||void 0===t?void 0:t.currTextRects}}):i[t].apply(i,a))}lo=!0}},{key:"triggerPopMenuAction",value:function(e){this.popMenuAction=e,this.target.OnRButtonUp&&this.target.OnRButtonUp.apply(this.target,this.lastRButtonUpArgs)}},{key:"hasUndoItems",value:function(){var e=this.operationNotifier.undoCallback.getDocUndo(!1);return!(!e||!e.canUndo()&&!e.canRedo())||!(!(e=this.operationNotifier.undoCallback.getDocUndo(!0))||!e.canUndo()&&!e.canRedo())}},{key:"getUndoRedoItems",value:function(e){var t=this.operationNotifier.undoCallback.getDocUndo(e);return t?[t.getUndoItems(),t.getRedoItems()]:[[],[]]}},{key:"clearRedoItems",value:function(){var e=this.operationNotifier.undoCallback.getDocUndo(!1);e&&e.clearRedoItems(),(e=this.operationNotifier.undoCallback.getDocUndo(!0))&&e.clearRedoItems()}},{key:"resetUndoRedoItems",value:function(){var e=this.operationNotifier.undoCallback.getDocUndo(!1);e&&e.reset(),(e=this.operationNotifier.undoCallback.getDocUndo(!0))&&e.reset()}},{key:"handleTouchUpEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if("OnAfterRotatePage"!==e){var r=this.target;switch("OnKeyDown"==e&&(17==n[0]&&(this.controlDown=!0),16==n[0]&&(this.shiftDown=!0)),"OnKeyUp"==e&&(17==n[0]&&(this.controlDown=!1),16==n[0]&&(this.shiftDown=!1)),e){case"OnLButtonDown":this.skipThrottle=!0;var i=Nn(ao,this,n,ao.TUEditorPage);if(null===i||i.some(function(e){return null===e}))return!1;var a=r&&r.OnLButtonDown;return setTimeout(function(){t.OnInvalidDelay()},50),a&&a.apply(r,i);case"Undo":return this.operationNotifier.Undo(n[0]),this.getUndoRedoItems();case"OnActivate":var o=n[0];if(r=this.targets[o])this.target=r;else switch(o){case"touchup":r=this.target=this.targets[o]=this.jrMgr.GetTouchup();break;case"spellcheck":r=this.target=this.targets[o]=this.jrMgr.GetTouchupSpellCheck();break;case"joinSplit":r=this.target=this.targets[o]=this.jrMgr.GetJoinSplit()}n="touchup"==o?[n[1]]:[];break;case"OnFontNameChanged":this.providerCallback.setToolbarFont(n[0]);break;case"OnFontSizeChanged":this.providerCallback.setToolbarFontSize(n[0]);break;case"OnChar":for(var s in n[0])this.target.OnChar(n[0].charCodeAt(s));return this.getUndoRedoItems(!0);case"OnRButtonUp":var u=Nn(ao,this,n,ao.TUEditorPage);if(null===u||u.some(function(e){return null===e}))return;return this.lastRButtonUpArgs=u,void(this.target.OnRButtonUp&&this.target.OnRButtonUp.apply(this.target,u));case"GetEditInfo":return void(oo=this.target.GetEditInfo());case"EditContent":return void this.target.EditContent(oo);case"JoinSplitToEditText":var l=n[0],d=this.targets.joinSplit.GetEditInfo(),h=this.target=this.targets[l]=this.jrMgr.GetTouchup();return h.OnActivate(!1),void setTimeout(function(){t.OnInvalidDelay(),d.editor_page.IsEmpty()||h.EditContent(d)});case"ClearRedo":return this.clearRedoItems(),this.getUndoRedoItems(!1);case"GetUndoManager":return this.getUndoRedoItems(n[1]);case"generateContent":return void this.generateContent(!0);case"SelectContent":var f=this.doc.doc.GetPage(n[0]),g=new ao.SelectTextInfoArray;return n[1].forEach(function(e){var t,n,r,i,a=new ao.SelectTextInfo;-1==(t=Math).min.apply(t,(0,c._)(e))?(a.nStartIndex=(n=Math).max.apply(n,(0,c._)(e)),a.nEndIndex=-1):(a.nStartIndex=(r=Math).min.apply(r,(0,c._)(e)),a.nEndIndex=(i=Math).max.apply(i,(0,c._)(e)));g.Add(a)}),void r.SelectContent(f,g);case"GetClipboardText":return __webpack_require__.g.clipboardText;case"UpdateClipboardText":return void(__webpack_require__.g.clipboardText=n[0]);case"ChangeTextColorByRect":var p=function(e){var t=w[e],n=function(e){var t=e.rect,n=e.str,r=E.GetCharRange(new ao.CFX_FloatRect(t.left,t.bottom,t.right,t.top));if(r.IsEmpty())return{start:-1,end:-1};for(var i=0;i<r.GetSegmentCount();++i){var a=r.GetSegmentStart(i),o=r.GetSegmentEnd(i),s=E.GetChars(a,o-a+1).toString();if(s===n)return{start:a,end:o};var c=s.lastIndexOf(n);if(-1!==c)return{start:a+=c,end:o=a+n.length-1}}return{start:-1,end:-1}}(t),r=n.start,i=n.end;if(-1!==r&&-1!==i){var a=new ao.SelectTextInfoArray,o=new ao.SelectTextInfo(r,i);a.Add(o),L.SelectContent(b,a)}else{var s,u=function(e){var t=E.GetCharRange(new ao.CFX_FloatRect(e.left,e.bottom,e.right,e.top));if(t.IsEmpty())return[];for(var n=[],r=0;r<t.GetSegmentCount();++r)for(var i=t.GetSegmentStart(r),a=t.GetSegmentEnd(r),o=i;o<=a;++o){var s=k(o);n.push(s)}return n}(_),l=function(e,t){var n,r,i=function(e,t){return Math.abs(e-t)<.1};return e.str===t.str&&(n=e.box,r=t.box,i(n.left,r.left)&&i(n.right,r.right)&&i(n.top,r.top)&&i(n.bottom,r.bottom))},d=t.chars.map(function(e){return function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=u[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(l(o,e))return o}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}(e)}),h=function(e){return{str:e.str,rect:e.box,chars:[e]}},f=[],g=!0,p=!1,v=void 0;try{for(var y,S=d[Symbol.iterator]();!(g=(y=S.next()).done);g=!0){var I=y.value;I&&f.push(h(I))}}catch(e){p=!0,v=e}finally{try{g||null==S.return||S.return()}finally{if(p)throw v}}if(0===f.length)return"continue";if(e!==w.length-1)return(s=w).push.apply(s,(0,c._)(f)),"continue";var A,P=new ao.SelectTextInfoArray,D=f[0].chars[0].idx,C=new ao.SelectTextInfo(D,D);P.Add(C),L.SelectContent(b,P),f.shift(),(A=w).push.apply(A,(0,c._)(f))}L.OnTextColorChanged(m),L.DoDeselectAll(),L.ExitEditing(!1),E=new ao.TextPage(b,ao.TextParseFlags.e_ParseTextNormal.value)};this.isInChangeTextColorByRect=!0;var v=n[0],m=v.textColor,_=v.rect,y=v.page,S=new ao.CFX_FloatRect(_.left,_.bottom,_.right,_.top);if(S.IsEmpty())throw this.isInChangeTextColorByRect=!1,new Error("pdfRect is empty");var b,I=this.providerCallback.visibleIndexes;this.providerCallback.visibleIndexes=[y];var A=!1,P=this.doc.pageIndexMap[y];if(P)b=P.page;else{A=!0;var D=this.doc.doc;b=D.GetPage(y)}b.StartParse(0,null,!1);var E=P?P.getNormalTextPageSync():new ao.TextPage(b,ao.TextParseFlags.e_ParseTextNormal.value),C=E.GetCharRange(S);if(C.IsEmpty()&&(b.StartParse(0,null,!0),A&&E.delete(),C=(E=new ao.TextPage(b,ao.TextParseFlags.e_ParseTextNormal.value)).GetCharRange(S),this.doc.pageIndexMap[y]&&(this.doc.pageIndexMap[y].needReParse=!1,this.doc.pageIndexMap[y].isCPageParsed=!0)),C.IsEmpty())return this.isInChangeTextColorByRect=!1,this.providerCallback.visibleIndexes=I,A&&E.delete(),void(A&&b.delete());for(var w=[],k=function(e){var t=E.GetCharInfo(e).char_box;return t={left:t.left,right:t.right,top:t.top,bottom:t.bottom},{idx:e,str:E.GetChars(e,1).toString(),box:t}},T=0;T<C.GetSegmentCount();++T){var F=C.GetSegmentStart(T),G=C.GetSegmentEnd(T),R=E.GetChars(F,G-F+1).toString(),x=E.GetRectArray(F,G-F+1);console.assert(1===x.GetSize());for(var O=x.GetAt(0),M=[],N=F;N<=G;++N){var B=k(N);M.push(B)}w.push({str:R,rect:O,chars:M})}var L=r;L.OnActivate(!1);for(var j=0;j<w.length;++j)p(j);return L.OnDeactivate(),this.isInChangeTextColorByRect=!1,this.providerCallback.visibleIndexes=I,A&&E.delete(),A&&b.delete(),void S.delete();case"GetCaretHeadPositon":case"GetCaretFootPositon":var U=Nn(ao,this,n,ao.TUEditorPage);if(null===U||U.some(function(e){return null===e}))return;var W=this.providerCallback.matrixes.dpr||1,H=r[e]&&r[e].apply(this.target,U);return H?{x:H.x/W,y:H.y/W}:void 0}var K=Nn(ao,this,n,ao.TUEditorPage);if(null===K||K.some(function(e){return null===e}))return!1;var z=r&&r[e],V=z&&z.apply(r,K)&&[this.operationNotifier.undos,this.operationNotifier.redos];return"OnActivate"!==e&&"OnDeactivate"!==e||(this.isActivated="OnActivate"===e,postMessage({workflow:go,type:e})),V}this.jrMgr.OnAfterRotatePage(n[0],n[1])}},{key:"destroy",value:function(){var e=this;for(var t in["tu","providerCallback","operationNotifier","lastInvalid","editPages","doc","jrMgr","popMenuAction"].forEach(function(t){return e[t]=[]}),this.targets){this.targets[t].delete()}}},{key:"generateContent",value:function(e){var t,n=function(e){var n=t.editPages[e];if(t.doc.pageIndexMap[e]){var r=t.doc.pageIndexMap[e];if(r.needReParse)return r.parsedPage().then(function(e){r.GetPage().GenerateContent()}),"continue"}n.GetPage().GenerateContent(),n.delete()};if(this.target){for(var r in this.target.ExitEditing&&e&&this.target.ExitEditing(0),this.editPages)t=this,n(r);this.editPages={},this.modifiedObjects.forEach(function(e){return e.GenerateContent()}),this.modifiedObjects=[]}}}]),n}(),So=function(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&t.touchupMgr&&(t.touchupMgr.delete(),t.touchup.destroy(),t.touchupMgr=null,t.touchup=null),t.touchup)return t.touchup;ao=e,$a.setGSDK(e);var n=t.touchup=new yo,r=new mo;r.IsShiftKeyDown=n.IsShiftKeyDown,r.IsControlKeyDown=n.IsControlKeyDown;var i=new e.TouchupProvider(e.TouchupProviderCallback.implement(r)),a=new co(t),o=new po(a);a.Restore=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.Undo(t[0])},o.OnContentChange=n.OnContentChange,n.OnInvalidDelay=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=null;return function(){var r=this,i=arguments;n||(n=setTimeout(function(){e.apply(r,i),n=null},t))}}(n.OnInvalid),o.OnInvalid=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i;if(n.skipThrottle)return n.OnInvalid(),void(n.skipThrottle=!1);(i=n).OnInvalidDelay.apply(i,(0,c._)(t))},r.GetVisiblePage=n.GetVisiblePage,r.GetDefaultEditorPage=n.GetDefaultEditorPage,r.GetPage=n.GetPage,i.SetOperationNotifierCallback(e.TouchupOperationNotifierCallback.implement(o)),i.SetProgressBarCallback(e.ProgressBarCallback.implement(fo)),io.trackPopupMenu=n.TrackPopupMenu,i.SetPopupMenuCallback(e.TouchupPopupMenuCallback.implement(io));var s=new eo;return s.setToolbarFont=function(e){r.setToolbarFont(e)},s.setLastFontInfo=function(e){r.setLastFontInfo(e)},i.SetTextFormatCallback(e.TextFormatCallback.implement(s)),n.findReplaceCallback=new _o,i.SetFindReplaceCallback(e.FindReplaceCallback.implement(n.findReplaceCallback)),i.SetUndoCallback(e.UndoCallback.implement(a)),r.GetLatestPDFPage=function(e,n){return t.pageIndexMap[n].page},r.GetCurrentEditorPage=n.GetCurrentEditorPage,i.SetIsSpellCheckAvailable(!1),n.setJRMgr(t.touchupMgr=new e.TouchupMgr(i,t.doc)),t.addDestroyHook(function(e){t.touchupMgr&&(t.touchupMgr.delete(),t.touchup.destroy(),t.touchupMgr=null,t.touchup=null,ao=null)}),t.beforeSave(function(e){return t.touchup.generateContent(e)}),n.setCObject(t,o,r,i),n};var bo=function(e,t,n,r){var i=t.GetType().value,a=t.GetWidth(),o=t.GetHeight(),s=Number((t.GetOpacity()+.005).toFixed(2)),c=t.GetXPosition(),u=t.GetYPosition(),l=t.CanChangeRenderingOrder(e.RenderingOrder.e_RenderingOrderFront),d=t.CanChangeRenderingOrder(e.RenderingOrder.e_RenderingOrderBack),h=n.GetSelectionCount(),f=-1,g=null;return h>0&&(f=(g=n.GetSelection().GetAt(0)).GetPageIndex(r)),{type:i,width:a,height:o,opacity:s,count:h,xPosition:c,yPosition:u,canChangeFront:l,canChangeBack:d,clipPathCount:1===h&&g?g.GetGraphicsObject().GetClipPathCount():0,pageIndex:f}},Io=function(e){if(e.IsEmpty())return 0;var t=4278190080;if((e=e.ConvertToRGB({value:0})).IsEmpty())return 0;for(var n=e.GetValue(),r=0;r<n.GetSize();r++){t|=255*n.GetAt(r)<<16-8*r}return t>>>0};function Ao(e){return e.IsEmpty()?0:e.GetColorSpace().GetColorSpaceType().value}function Po(e,t,n,r){if(t.IsEmpty())return{};if(function(e){var t=e.GetWidth(),n=e.GetHeight(),r=e.GetOpacity(),i=e.GetXPosition(),a=e.GetYPosition();return 0===t&&0===n&&0===r&&0===i&&0===a}(t))return{};switch(t.GetType().value){case 0:break;case 1:return function(e,t,n,r){var i=bo(e,t,n,r),a=new e.TextObjectUtils(t);i.fontName=a.GetFont(!0).toString(),i.baseFontName=a.GetFont(!1).toString(),i.fontSize=a.GetFontSize();var o=a.GetFillColor();o.IsEmpty()?(i.fillColor=0,i.fillColorSpace=0):(i.fillColor=Io(o),i.fillColorSpace=o.GetColorSpace().GetColorSpaceType().value);var s=a.GetStrokeColor();s.IsEmpty()?(i.strokeColor=0,i.strokeColorSpace=0):(i.strokeColor=Io(s),i.strokeColorSpace=s.GetColorSpace().GetColorSpaceType().value),i.horizontalScale=a.GetHorizontalScale(),i.charSpace=a.GetCharSpace(),i.charSpace<0&&(i.charSpace=0),i.wordSpace=a.GetWordSpace(),i.canRemoveTextKerning=a.CanRemoveTextKerning(),i.canMergeText=a.CanMergeText(),i.canSplitText=a.CanSplitText(),i.canText2Path=a.CanText2Path(),i.isWordSpaceValid=a.IsWordSpaceValid().value,i.textMode=a.GetTextMode().value;try{if(1===i.count){var c=n.GetSelection().GetAt(0);i.text=c.GetGraphicsObject().GetTextObject().GetText().toString(),i.fontIsBold=a.GetFontIsBold(),i.fontIsItalic=a.GetFontIsItalic()}else i.text=""}catch(e){i.text=""}return i}(e,t,n,r);case 2:return function(e,t,n,r){var i=bo(e,t,n,r),a=new e.PathObjectUtils(t);i.lineWidth=a.GetLineWidth(),i.miterLimit=a.GetMiterLimit(),i.lineCap=a.GetLineCap().value,i.lineJoin=a.GetLineJoin().value;for(var o=a.GetLineStyle(),s=i.lineStyle=[],c=0;c<o.GetSize();c++){var u=o.GetAt(c);s.push(u)}var l=a.GetFillColor();return i.fillColor=Io(l),i.fillColorSpace=Ao(l),l=a.GetStrokeColor(),i.strokeColor=Io(l),i.strokeColorSpace=Ao(l),i}(e,t,n,r);case 3:return function(e,t,n,r){return bo(e,t,n,r)}(e,t,n,r);case 4:return function(e,t,n,r){var i=bo(e,t,n,r),a=new e.ShadingObjectUtils(t);i.cursorColor=a.GetGridientCursorColor(),i.cursorLocation=a.GetGridientCursorLocation();var o=i.iCursorIndex=a.GetGridientCursorIndex();i.color=a.GetGridientColorAt(o);for(var s=a.GetGradientColor(),c=i.gradientArray=[],u=0;u<s.GetSize();u++){var l=s.GetAt(u);c.push({from:l.from,to:l.to,fromColor:Rn(l.from_color),toColor:Rn(l.to_color)})}return i}(e,t,n,r);case 5:return bo(e,t,n,r)}}var Do=function(e,t){return{type:t.GetType().value,isEmpty:t.IsEmpty()}};function Eo(e,t){if(t.IsEmpty())return{};switch(t.GetType().value){case 0:case 1:case 3:break;case 2:return function(e,t){var n=Do(0,t),r=new e.TextEditor(t),i={isSelect:r.IsSelect(),canPaste:r.CanPaste(),isAdd:r.IsAdd()};return Object.assign(i,n)}(e,t);case 4:return function(e,t){var n=Do(0,t),r={isClipPathMode:new e.PathEditor(t).IsClipPathMode()};return Object.assign(r,n)}(e,t);case 5:return function(e,t){var n=Do(0,t),r={isReferenceLineWorking:new e.ShadingEditor(t).IsReferenceLineWorking()};return Object.assign(r,n)}(e,t)}}var Co=function(){function e(n,r){(0,t._)(this,e),this.gsdkIns=r,this.pageEditor=n,this.undos=[],this.redos=[],this.editUndos=[],this.editRedos=[],this.aggregateCount=1,this.aggregatedItems=[]}return(0,r._)(e,[{key:"undo",value:function(e,t){var n,r,i=this.gsdkIns,a=t?"PEUndo":"PERedo";e?t?(n=this.editUndos,r=this.editRedos):(n=this.editRedos,r=this.editUndos):t?(n=this.undos,r=this.redos):(n=this.redos,r=this.undos);var o=n.pop();o&&(Array.isArray(o)?o.forEach(function(e){return i[a](e)}):i[a](o),r.push(o))}},{key:"aggregateUndo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.aggregateCount=e}},{key:"OnAddUndo",value:function(e,t){this.aggregatedItems.unshift(e),this.aggregateCount-=1,this.aggregateCount<=0&&(t?(this.editUndos.push(this.aggregatedItems),this.editRedos=[]):(this.undos.push(this.aggregatedItems),this.redos=[],postMessage({workflow:"out",type:"onAddUndo",msg:{item:e}})),this.aggregateCount=1,this.aggregatedItems=[])}},{key:"OnUndoRedoBeginEdit",value:function(e){this.editUndos=[],this.editRedos=[]}},{key:"OnUndoRedoEndEdit",value:function(e){this.editUndos=[],this.editRedos=[]}},{key:"destroy",value:function(){var e=this.gsdkIns;this.aggregateCount=1,this.aggregatedItems.forEach(function(t){e.PEUndoItemRelease(t)}),[this.editRedos,this.editUndos,this.undos,this.redos].forEach(function(t){return t.forEach(function(t){Array.isArray(t)?t.forEach(function(t){return e.PEUndoItemRelease(t)}):e.PEUndoItemRelease(t)})})}}]),e}();const wo=Co;var ko,To=function(){function e(n,r){(0,t._)(this,e),this.gsdkIns=r,this.pageEditor=n,this.pasteMargin=5,this.graphicArray=null,this.autoCalPastePos=!0,this.lastPageIndex=0,this.selectionX=0,this.selectionY=0,this.selectionHeight=0,this.pasteX=0,this.pasteY=0,this.offsetX=0,this.offsetY=0}return(0,r._)(e,[{key:"destroy",value:function(){this.pageEditor=null}},{key:"CanPasteGraphicObject",value:function(){return!!this.graphicArray}},{key:"CopyGraphicObject",value:function(){var e=this.gsdkIns;this._deleteGraphicArray();for(var t=this.pageEditor.PE.GetSelection(),n=new e.GraphicsObjectArray,r=t.GetSize(),i=-1/0,a=1/0,o=1/0,s=0;s<r;s++){var c=t.GetAt(s).GetGraphicsObject().Clone();n.Add(c);var u=c.GetRect(),l=u.top,d=u.left,h=u.bottom;i=Math.max(l,i),a=Math.min(d,a),o=Math.min(h,o)}this.selectionX=a,this.selectionY=i,this.selectionHeight=i-o,this.pasteX=a,this.pasteY=i,this.offsetY=this.selectionHeight+this.pasteMargin,this.lastPageIndex=this.pageEditor.lastEditorPage.GetPage().GetIndex(),this.graphicArray=n}},{key:"PasteGraphicObject",value:function(e){var t=this.pageEditor.lastEditorPage.GetPage(),n=t.GetIndex();this.autoCalPastePos&&(this.pasteX+=this.offsetX,this.pasteY-=this.offsetY,n!==this.lastPageIndex?(this.pasteX=0,this.pasteY=t.GetHeight(),this.lastPageIndex=n):this.pasteY<this.selectionHeight/2&&(this.pasteY=this.pageEditor.lastEditorPage.GetPage().GetHeight()));var r=this._pasteGraphicArrayAtPoint(this.pasteX,this.pasteY);return this.autoCalPastePos=!0,r}},{key:"setPastePos",value:function(e,t){this.autoCalPastePos=!1,this.pasteX=e,this.pasteY=t}},{key:"_pasteGraphicArrayAtPoint",value:function(e,t){var n=new this.gsdkIns.GraphicsObjectArray;if(!this.graphicArray)return n;for(var r=e-this.selectionX,i=t-this.selectionY,a=this.graphicArray.GetSize(),o=0;o<a;o++){var s=this.graphicArray.GetAt(o),c=s.GetRect(),u=s.Clone();this._moveGraphicObject(u,c.left+r,c.top+i),n.Add(u)}return n}},{key:"_moveGraphicObject",value:function(e,t,n){var r=this.gsdkIns,i=e.GetRect(),a=i.top-i.bottom,o=i.right-i.left,s=new r.CFX_FloatRect;s.top=n,s.bottom=n-a,s.left=t,s.right=t+o;var c=new r.Matrix;c.MatchRect(s,i),e.Transform(c,!0),s.delete()}},{key:"_deleteGraphicArray",value:function(){if(this.graphicArray){for(var e=this.graphicArray.GetSize(),t=0;t<e;t++)this.graphicArray.GetAt(t).delete();this.graphicArray.delete(),this.graphicArray=null}}}]),e}(),Fo=__webpack_require__(9754);var Go={1:{font:null,fontSize:16,charSpace:0,wordSpace:0,fontIsItalic:!1,fontIsBold:!1,fillColor:4278190080,strokeColor:4278190080,opacity:1,horizontalScale:100,textMode:0},2:{strokeColor:4278190080,strokeColorSpace:2,fillColor:0,fillColorSpace:0,opacity:1}},Ro=new Fo.Z,xo=function(){function e(n,r){(0,t._)(this,e),ko=n,this.doc=r,this.editPages={},this.oldEditPages={},this.scales={},this.lastUpdate=0,this.lastRButtonUpArgs=null,this.popMenuAction=null,this.clipBoardManager=new To(this,n),this.undoManager=new wo(this,n),this.modifiedPage={},this.editingFontName="Helvetica",this.selectionPageIndex=-1,this.startEdit=!1,this.strings=[]}return(0,r._)(e,[{key:"init",value:function(e){return this.context=e,this.PE=new ko.PageEditor(e),this}},{key:"updateMatrix",value:function(e){var t=e.dpr||1;this.context.SetSystemDPI(96*t,96*t),Object.assign(this.scales,e)}},{key:"setShiftControlFlag",value:function(e,t){"OnKeyDown"==e&&(17==t[0]&&(this.controlDown=!0),16==t[0]&&(this.shiftDown=!0)),"OnKeyUp"==e&&(17==t[0]&&(this.controlDown=!1),16==t[0]&&(this.shiftDown=!1)),t.length>=3&&(1&~t[2]?this.shiftDown=!1:this.shiftDown=!0,2&~t[2]?this.controlDown=!1:this.controlDown=!0)}},{key:"handle",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=Nn(ko,this,n,ko.EditorPage);if(null!==r&&!r.some(function(e){return null===e})){var i={};if(this.lastEditorPage){var a=this.lastEditorPage.GetPage();a.IsEmpty()||(this.modifiedPage[a.GetIndex()]=1)}switch(this.setShiftControlFlag(e,n),e){case"Undo":if(this.undoManager.undo(n[0],n[1]),this.doc.touchup){var s=this.generateContent();this.doc.touchup.pageModified(s)}break;case"OnChar":for(var u=0;u<n[0].length;u++){var l=n[0].charCodeAt(u);this.PE.OnChar(l,n[1]||0)}break;case"OnHitObjectTest":this.PE[e].apply(this.PE,r),r.push(0),this.PE.OnMouseMove.apply(this.PE,r);break;case"GetGraphicsObjectUtils":var d=this.PE.GetGraphicsObjectUtils(),h=Po(ko,d,this.PE,this.doc.doc);return this.isSelectionChange&&1===h.type&&(this.lastFontInfo=h,this.doc.touchup&&this.doc.touchup.providerCallback.setLastFontInfo(h)),this.isSelectionChange=!1,h;case"GetSelection":for(var f=this.PE.GetSelection(),g=[],p=0;p<f.GetSize();p++){f.GetAt(p);g.push({})}return g;case"GetGraphicsObjectEditor":var v=this.PE.GetGraphicsObjectEditor();return Eo(ko,v);case"OnRButtonUp":this.lastRButtonUpArgs=r,this.PE.OnRButtonUp.apply(this.PE,r);break;case"OnLButtonDown":case"OnLButtonDoubleClick":this.skipThrottle=1,i=this.PE[e].apply(this.PE,r);break;case"Paste":2===n.length&&this.clipBoardManager.setPastePos(n[0],n[1]),this.PE.Paste(!1),i=this.lastEditorPage.GetPage().GetIndex();break;case"CreateImage":var m;if(i=(m=this.PE).CreateImage.apply(m,(0,c._)(r)))i=this.lastEditorPage.GetPage().GetIndex();break;case"getDefaultProperty":1===n[0]?((i=(0,o._)({},Go[n[0]])).fontName=Ro.getDefaultFontName(),i.font=Ro.getDefaultFont(ko)):i=Go[n[0]]||{};break;case"getLastProperty":i=this.lastFontInfo||{};break;case"EndEdit":this.startEdit=!1;var _=this.generateContent();this.doc.touchup&&this.doc.touchup.pageModified(_),i=this.PE[e].apply(this.PE,r);break;case"StartEdit":this.startEdit=!0,r=[];default:i=this.PE[e].apply(this.PE,r),"HasSelection"===e&&(this.selectionPageIndex=i?this.lastEditorPage.GetPage().GetIndex():-1);break;case"ChangeLanguage":this.strings=r[0];break;case"ClearRedo":this.undoManager.editRedos=[],this.undoManager.redos=[],i=n[0]?[this.undoManager.editUndos,this.undoManager.editRedos]:[this.undoManager.undos,this.undoManager.redos];break;case"GetUndoManager":i=n[0]?[this.undoManager.editUndos,this.undoManager.editRedos]:[this.undoManager.undos,this.undoManager.redos]}return i}}},{key:"hasUndoItems",value:function(){return this.undoManager.editUndos.length>0||this.undoManager.editRedos.length>0||this.undoManager.undos.length>0||this.undoManager.redos.length>0}},{key:"changePEProperty",value:function(e,t,n){var r,i=JSON.parse(JSON.stringify(n)),a=this.PE.GetGraphicsObjectUtils();switch(n=Array.isArray(n)?n:[n],n=Nn(ko,this,n,ko.EditorPage),this.lastEditorPage&&(this.modifiedPage[this.lastEditorPage.GetPage().GetIndex()]=1),e){case 0:case 3:r=a[t].apply(a,n);break;case 1:var o=new ko.TextObjectUtils(a);switch(t){case"SetFont":var s=new ko.WString(n[0]),c=n[1],u=n[2];this.undoManager.aggregateUndo(1),r=o.SetFont(s,!1,!1,ko.FontOperationType.e_FontOperationTypeName),r=o.SetFont(s,c,!1,ko.FontOperationType.e_FontOperationTypeBold),r=o.SetFont(s,!1,u,ko.FontOperationType.e_FontOperationTypeItatic),this.editingFontName=this.setEditingFontName(n[0]);break;case"SetFontSize":this.undoManager.aggregateUndo(1),this.setEditingFontSize(n[0]),r=o.SetFontSize(n[0]);break;default:r=o[t].apply(o,n)}break;case 2:var l=new ko.PathObjectUtils(a);r=l[t].apply(l,n);break;case 4:var d=new ko.ShadingObjectUtils(a);if(n=Nn(ko,this,n,ko.EditorPage),"RenderGridient"==t){d.SetGradientCurrentInfo(d.GetGradientColor());var h=n[0]+"-"+n[1],f=bitmaps[h]||(bitmaps[h]=new ko.Bitmap(n[0],n[1],ko.DIBFormat.e_DIBArgb,0,0));f.FillRect(4294967295,null);var g=new ko.Renderer(f,!0);d.RenderGridient(g);var p=getBitmapBuffer(ko,0,f,g);return p.left=0,p.top=0,p}r=d[t].apply(d,n)}postMessage({workflow:"out",type:"propertyChanged",msg:{type:e,fn:t,param:i}});var v=this.lastEditorPage.GetPage(),m=v.GetIndex(),_=this.doc.pageIndexMap[m];return _.needReParse?_.parsedPage().then(function(e){return v.GenerateContent(),[m,r]}):(v.GenerateContent(),[m,r])}},{key:"changeEditingProperty",value:function(e,t){var n=this.PE.GetGraphicsObjectEditor();if(this.lastEditorPage&&(this.modifiedPage[this.lastEditorPage.GetPage().GetIndex()]=1),"IsEmpty"===e)return n.IsEmpty();switch(n.GetType().value){case 2:n=new ko.TextEditor(n),"OnWritingDirectionChanged"==e?t[0]=ko.WritingDirection.values[t[0]]:"OnFontNameChanged"===e&&(this.setEditingFontName(t[0]),t[0]=new ko.WString(t[0]));break;case 3:break;case 4:n=new ko.PathEditor(n);break;case 5:n=new ko.ShadingEditor(n)}return n[e].apply(n,t)}},{key:"triggerPopMenuAction",value:function(e){this.popMenuAction=e;var t=Object.keys(ko.PopupMenuItem.values).find(function(t){return ko.PopupMenuItem.values[t].constructor.name==e}),n=ko.PopupMenuItem.values[t];this.popMenuAction=n.value,["PopupMenuItem_e_PopupMenuItemTextUndo","PopupMenuItem_e_PopupMenuItemTextRedo"].includes(e)?(this.handle("Undo",void 0,[!0,"PopupMenuItem_e_PopupMenuItemTextUndo"===e]),this.popMenuAction=null):this.PE.OnRButtonUp.apply(this.PE,this.lastRButtonUpArgs),["PopupMenuItem_e_PopupMenuItemPathAddLine","PopupMenuItem_e_PopupMenuItemPathAddRectangle","PopupMenuItem_e_PopupMenuItemPathAddEllipse","PopupMenuItem_e_PopupMenuItemPathAddLineDrawing"].includes(e)&&postMessage({workflow:"out",type:"editObject"})}},{key:"updateView",value:function(e){var t=this;if(this.scales&&e){var n=this.scales.uiRect;if(n&&n.width&&n.height){var r=this.scales.dpr||1,i={width:n.width*r,height:n.height*r},a=new ko.EditorPageArray;a.Add(e);var o=$a.render(function(e){return t.PE.Render(a,e)},null,i),s=this.PE.GetGraphicsObjectEditor();if(!s.IsEmpty()&&5===s.GetType().value){var c=new ko.ShadingEditor(s);c.IsReferenceLineWorking()&&(o.isRedraw=!0),c.delete()}a.delete(),o.left=n.left,o.top=n.top,o.docRect=this.scales.docRect,postMessage({workflow:"out",type:"updateView",msg:{bitmapInfo:o}},[o.buffer])}}}},{key:"destroy",value:function(){var e=this;for(var t in this.editPages){this.editPages[t].delete()}for(var n in this.oldEditPages){this.oldEditPages[n].delete()}this.clipBoardManager.destroy(),this.undoManager.destroy(),Ro.destroy(),["doc","editPages","scales","updateType","lastUpdate","lastRButtonUpArgs","popMenuAction","clipBoardManager","editRedos","editUndos","undos","redos"].forEach(function(t){return e[t]=[]})}},{key:"generateContent",value:function(){var e,t=function(t){if(e.doc.pageIndexMap[t]){var i=e.doc.pageIndexMap[t];if(i.needReParse)return i.parsedPage().then(function(e){var i=n.editPages[t];r.push(t),i.GetPage().GenerateContent()}),"continue"}var a=e.editPages[t];r.push(t),a.GetPage().GenerateContent()},n=this,r=[];for(var i in this.editPages)e=this,t(i);return r}},{key:"setEditingObjectToolProperty",value:function(e){var t=this,n=this.doc.engine,r=n.AdvEditStyleType,i=n.LineType,a={editObjectBox:r.e_AdvEditStyleType_EditObjectBox,editShapeBox:r.e_AdvEditStyleType_EditShapeBox};return Object.entries(a).forEach(function(n){var r=(0,s._)(n,2),a=r[0],o=r[1],c=e[a];c?(t.PE.ConfigColorStyle(o,!c.color,c.color),t.PE.ConfigLineStyle(o,i.values[c.lineType?c.lineType:"0"])):(t.PE.ConfigColorStyle(o,!0,null),t.PE.ConfigLineStyle(o,i.values[0]))}),this.PE.GenerateConfigInfo()}},{key:"TrackPopupMenu",value:function(e,t,n,r){if(null!==this.popMenuAction){var i=this.popMenuAction;return this.popMenuAction=null,i}var a=this.PE.GetGraphicsObjectUtils(),o=this.PE.GetGraphicsObjectEditor(),c={},u=r.GetPage().GetIndex(),l=(0,s._)(this.scales[u],4);l[0],l[1],l[2],l[3];c.activeObject=Po(ko,a,this.PE,this.doc.doc)||null,c.editingObject=Eo(ko,o)||{};var d=this.scales.dpr||1;return c.position={x:t/d,y:n/d},c.menu=e,c.pageIndex=u,postMessage({workflow:"out",type:"showPopupMenu",msg:c}),-1>>>0}},{key:"GetPageViewScale",value:function(e){var t=e.GetPage().GetIndex();return this.scales[t][0]}},{key:"OnInvalid",value:function(e,t){this.updateView(e)}},{key:"GetRenderMatrix",value:function(e){var t=new ko.Matrix,n=e.GetPage();if(n.IsEmpty())return t.a=0,t.d=0,t;var r=n.GetIndex();if(-1==(this.scales.visibleIndexes||[]).indexOf(r))return t.a=0,t.d=0,t;var i=this.scales[n.GetIndex()];if(!i)return t;var a=(0,s._)(i,4),o=(a[0],a[1],a[2]);a[3];t.Set(o.a,o.b,o.c,o.d,o.e,o.f);var c=this.scales.dpr||1;return t.Scale(c,c,!1),t}},{key:"GetPageVisibleRect",value:function(e){var t=e.GetPage().GetIndex(),n=this.scales[t],r=new ko.CFX_FloatRect;if(!n||-1==(this.scales.visibleIndexes||[]).indexOf(t))return r;var i=(0,s._)(n,4),a=(i[0],i[1],i[2],i[3]);return r.left=a.left,r.top=a.top,r.right=a.right,r.bottom=a.bottom,r}},{key:"GetRect",value:function(e){var t=e.GetPage().GetIndex(),n=(0,s._)(this.scales[t],4),r=(n[0],n[1],n[2],n[3]),i=new ko.CFX_FloatRect;return-1==(this.scales.visibleIndexes||[]).indexOf(t)||(i.left=r.left,i.top=r.top,i.right=r.right,i.bottom=r.bottom),i}},{key:"getPage",value:function(e){var t;if(this.doc.pageIndexMap[e]){var n=this.doc.pageIndexMap[e];t=n.isVirtual?null:n.page}else t=this.doc.doc.GetPage(e);return t}},{key:"GetDefaultEditorPage",value:function(){if(!this.lastEditorPage){var e=(this.scales.visibleIndexes||[])[0];if(this.editPages[e])this.lastEditorPage=this.editPages[e];else{var t=this.getPage(e);t&&!t.IsEmpty()?this.lastEditorPage=ko.EditorPage.Create(t,100):this.lastEditorPage=null}}return this.lastEditorPage}},{key:"GetVisibleEditorPages",value:function(){var e=this,t=new ko.EditorPageArray;return(this.scales.visibleIndexes||[]).forEach(function(n){var r=e.editPages[n];if(!r){var i=e.getPage(n);i&&!i.IsEmpty()&&(r=ko.EditorPage.Create(i,100))}r&&t.Add(r)}),t}},{key:"GetClientRect",value:function(){var e=this.scales.uiRect,t=this.scales.dpr||1,n=new ko.CFX_FloatRect;return n.left=0,n.top=0,n.right=e.width*t,n.bottom=e.height*t,n}},{key:"OnSetPropsAsDefault",value:function(e,t){var n=this.PE.GetGraphicsObjectUtils(),r=Po(ko,n,this.PE,this.doc.doc);if(1===e.value){var i;try{i=t.GetAt(0).GetGraphicsObject().GetTextObject().GetTextState(this.lastEditorPage.GetPage()).font}catch(e){i=new ko.Font(ko.StandardID.e_StdIDHelvetica)}Ro.setDefaultFont(i,this.doc.doc)}r.opacity=r.opacity,Go[e.value]=r}},{key:"OnExitEdit",value:function(e,t){var n=this;return setTimeout(function(){n.generateContent()}),postMessage({workflow:"out",type:"exitEdit",msg:t.value}),!1}},{key:"GetTemplate",value:function(e,t){if(t){var n=ko.getPEGraphic(t),r=n.GetType();if(r==ko.GraphicsObjectType.e_TypeText){var i=n.GetTextObject(),a=Go[1],o=new ko.TextState;o.font=Ro.getDefaultFont(ko),o.font_size=a.fontSize,o.charspace=a.charSpace,o.wordspace=a.wordSpace,o.textmode=ko.Mode.values[a.textMode]||ko.Mode.e_ModeFill,o.origin_position.x=0,o.origin_position.y=0,o.SetMatrixA(a.horizontalScale/100),o.SetMatrixB(0),o.SetMatrixC(0),o.SetMatrixD(1);var s=e.GetPage(),c=this.scales[s.GetIndex()][1]/90;switch(4-(s.GetRotation().value+c)%4){case 1:o.SetMatrixA(0),o.SetMatrixB(-1),o.SetMatrixC(a.horizontalScale/100),o.SetMatrixD(0);break;case 2:o.SetMatrixA(-1),o.SetMatrixB(0),o.SetMatrixC(0),o.SetMatrixD(-1);break;case 3:o.SetMatrixA(0),o.SetMatrixB(1),o.SetMatrixC(-a.horizontalScale/100),o.SetMatrixD(0)}i.SetTextState(e.GetPage(),o,a.fontIsItalic,a.fontIsBold?550:400),i.SetFillColor(a.fillColor),i.SetStrokeColor(a.strokeColor),i.SetFillOpacity(a.opacity),i.SetStrokeOpacity(a.opacity)}else if(r==ko.GraphicsObjectType.e_TypePath){var u=n.GetPathObject(),l=Go[2];if(l){var d=l.strokeColor,h=l.fillColor,f=l.fillColorSpace,g=l.strokeColorSpace,p=l.opacity,v=l.lineStyle,m=l.lineWidth,_=l.lineCap,y=l.miterLimit,S=l.lineJoin,b=u.GetColorState();if(f){var I=new ko.ColorSpace({value:f}),A=new ko.Color(I);b.SetFillColor(A)}if(g){var P=new ko.ColorSpace({value:g}),D=new ko.Color(P);b.SetStrokeColor(D)}if(u.SetColorState(b),0===h?(u.SetFillColor(l.fillColor),u.SetFillMode(this.doc.engine.FillMode.e_FillModeNone),u.SetFillOpacity(0)):(u.SetFillColor(l.fillColor),u.SetFillMode(this.doc.engine.FillMode.e_FillModeWinding),u.SetFillOpacity(1)),u.SetStrokeState(0!==d),u.SetStrokeColor(d),u.SetFillOpacity(p),u.SetStrokeOpacity(p),m||v||_||y||S){var E=u.GetGraphState();if(m&&(E.line_width=m),v){var C=new this.doc.engine.FloatArray;C.SetSize(v.length,-1);for(var w=0;w<v.length;w++)C.SetAt(w,v[w]);E.dashes=C,E.dashes.delete()}_&&(E.line_cap=this.doc.engine.LineCapStyle.values[_]),y&&(E.miter_limit=y),S&&(E.line_join=this.doc.engine.LineJoinStyle.values[S]),u.SetGraphState(E)}}}}}},{key:"GetLatestPDFPage",value:function(e,t){return this.doc.doc.GetPage(t)}},{key:"GetToolbarFontName",value:function(){return new ko.WString(this.editingFontName)}},{key:"GetString",value:function(e){return new ko.WString(this.strings[e.value]||"")}},{key:"IsShiftKeyDown",value:function(){return this.shiftDown}},{key:"IsControlKeyDown",value:function(){return this.controlDown}},{key:"setEditingFontName",value:function(e){this.editingFontName=e,this.doc.touchup&&this.doc.touchup.providerCallback.setToolbarFont({value:e})}},{key:"setEditingFontSize",value:function(e){this.doc.touchup&&this.doc.touchup.providerCallback.setToolbarFontSize(e)}}]),e}();const Oo=function(e,t){if(e.pageEditor)return e.pageEditor;$a.setGSDK(e.engine);var n=e.pageEditor=new xo(e.engine,e),r=n.clipBoardManager,i=n.undoManager;ko=e.engine;var a={};return["CopyGraphicObject","PasteGraphicObject","CanPasteGraphicObject"].forEach(function(e){return a[e]=r[e].bind(r)}),["OnAddUndo","OnUndoRedoBeginEdit","OnUndoRedoEndEdit"].forEach(function(e){return a[e]=i[e].bind(i)}),["GetDefaultEditorPage","GetVisibleEditorPages","GetRenderMatrix","GetClientRect","GetPageVisibleRect","GetPageViewScale","OnInvalid","TrackPopupMenu","OnSetPropsAsDefault","GetTemplate","GetLatestPDFPage","GetToolbarFontName","GetString","OnExitEdit","IsShiftKeyDown","IsControlKeyDown"].forEach(function(e){return a[e]=n[e].bind(n)}),a.GetPageRect=n.GetPageVisibleRect.bind(n),n.OnInvalid=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=null;return function(){var r=this,i=arguments;n||(n=setTimeout(function(){e.apply(r,i),n=null},t))}}(n.OnInvalid.bind(n),66),a.OnInvalid=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i;if(n.skipThrottle)return n.updateView(t[0]),void(n.skipThrottle=0);(i=n).OnInvalid.apply(i,(0,c._)(t))},a.OnSelectionChange=function(){postMessage({workflow:"out",type:"selectionChange"}),n.isSelectionChange=!0},n.init(e.JR.getEditorContext(e,a,t.map(function(t){var n=e.JR.requestData("GET",!1,t);return Tt.Z.createImage(e.engine,n).GetFrameBitmap(0)}))),e.beforeSave(function(t){t&&e.pageEditor.PE.ClearSelection(1),e.pageEditor.generateContent()}),e.addDestroyHook(function(t){return e.pageEditor.destroy()}),n};var Mo={},No={},Bo=new(function(e){function n(){var e;return(0,t._)(this,n),(e=(0,V._)(this,n)).workerObj=Mo,e.apis=No,e}return(0,Z._)(n,e),n}(Ta));No.handlePageEditorEvent=function(e,t){var n=t.docId,r=t.fn,i=t.delay,a=t.args;return Ga.ZP.loadWasmModule(Ga.M7).then(function(){return Mo.getDocByID(n)}).then(function(t){var n=Oo(t,a);try{Mo.resolve(e,n.handle(r,i,a))}catch(e){console.error(e)}})},No.updateWinlessMatrix=function(e,t){var n=t.docId,r=t.type,i=t.matrixes;return Mo.getDocByID(n).then(function(t){if(1===r)Ga.ZP.loadWasmModule(Ga.yd).then(function(){So(t.engine,t).updateMatrix(i),Mo.resolve(e)});else Ga.ZP.loadWasmModule(Ga.M7).then(function(){var n=Oo(t);n.updateMatrix(i),n.lastEditorPage&&n.updateView(n.lastEditorPage),Mo.resolve(e)})})},No.changePEProperty=function(e,t){var n=t.docId,r=t.type,i=t.fn,a=t.param;return Ga.ZP.loadWasmModule(Ga.M7).then(function(){return Mo.getDocByID(n)}).then(function(t){var n=Oo(t);return Promise.resolve(n.changePEProperty(r,i,a)).then(function(t){return Mo.resolve(e,t)})})},No.changeEditingProperty=function(e,t){var n=t.docId,r=t.fn,i=t.args;return Ga.ZP.loadWasmModule(Ga.M7).then(function(){return Mo.getDocByID(n)}).then(function(t){var n=Oo(t);Mo.resolve(e,n.changeEditingProperty(r,i))})},No.triggerPopMenuAction=function(e,t){var n=t.docId,r=t.action;return Ga.ZP.loadWasmModule(Ga.M7).then(function(){return Mo.getDocByID(n)}).then(function(t){var n=Oo(t);Mo.resolve(e,n.triggerPopMenuAction(r))})},No.handleTouchUpEvent=function(e,t){var n=t.docId,r=t.fn,i=t.args;return Ga.ZP.loadWasmModule(Ga.yd).then(function(){return Mo.getDocByID(n)}).then(function(t){"restartTouchup"==r&&(r="");var n=So(t.engine,t);Mo.resolve(e,n.handleTouchUpEvent(r,i))})},No.handleFindReplaceEvent=function(e,t){var n=t.docId,r=t.fn,i=t.args;return Ga.ZP.loadWasmModule(Ga.yd).then(function(){return Mo.getDocByID(n)}).then(function(e){var t=So(e.engine,e).handleFindReplaceEvent(r,i);if("ReplaceAll"===r&&e.pageEditor){var n=e.pageEditor;n.undoManager.editUndos=[],n.undoManager.editRedos=[],n.undoManager.undos=[],n.undoManager.redos=[]}return t}).then(function(t){return Mo.resolve(e,t)})},No.triggerTUPopMenuAction=function(e,t){var n=t.docId,r=t.action,i=t.args;return Ga.ZP.loadWasmModule(Ga.yd).then(function(){return Mo.getDocByID(n)}).then(function(t){var n=So(t.engine,t);Mo.resolve(e,n.triggerPopMenuAction(r,i))})},No.reInitPageEditor=function(e,t){var n=t.docId;return Mo.getDocByID(n).then(function(t){var n=t.pageEditor;n&&(n.oldEditPages=n.editPages,n.editPages={}),Mo.resolve(e)})},No.loadAdvEditorConfigFile=function(e,t){var n=t.docId,r=t.fileBuffer,i=t.moduleName;return Mo.getDocByID(n).then(function(t){var n=!0;"pageEditor"===i?t.pageEditor?Ga.ZP.loadWasmModule(Ga.M7).then(function(){Oo(t),function(e,t){var n=e.engine,r=new FileReaderSync,i=n.ReaderCallback.implement({Release:function(){},GetSize:function(){return t.size},ReadBlock:function(e,i,a){if(t&&t.size>0){var o=new Uint8Array(r.readAsArrayBuffer(t.slice(i,i+a)));return n.HEAPU8.set(o,e),!0}return!1}});e.pageEditor.PE.SetConfigFileCallback(i)}(t,r)}):n=!1:Ga.ZP.loadWasmModule(Ga.yd).then(function(){So(t.engine,t),function(e,t){var n=e.engine,r=new self.FileReaderSync,i=n.ReaderCallback.implement({Release:function(){},GetSize:function(){return t.size},ReadBlock:function(e,i,a){if(t&&t.size>0){var o=new Uint8Array(r.readAsArrayBuffer(t.slice(i,i+a)));return n.HEAPU8.set(o,e),!0}return!1}});e.touchupMgr.SetConfigFileCallback(i)}(t,r)}),Mo.resolve(e,n)})},No.setAdvEditorTextToolStyle=function(e,t){var n=t.docId,r=t.style;return Ga.ZP.loadWasmModule(Ga.yd).then(function(e){return Mo.getDocByID(n)}).then(function(t){var n=So(t.engine,t);Mo.resolve(e,n.setTextToolProperty(r))})},No.setAdvEditorEditingObjectToolStyle=function(e,t){var n=t.docId,r=t.style;return Ga.ZP.loadWasmModule(Ga.M7).then(function(e){return Mo.getDocByID(n)}).then(function(t){var n=Oo(t);Mo.resolve(e,n.setEditingObjectToolProperty(r))})};const Lo=Bo.extendsWorkerAPI.bind(Bo);function jo(e,t){var n=e.engine.PageLabelsStyle;switch(t){case n.e_None:return"none";case n.e_DecimalNums:return"decimalNums";case n.e_UpperRomanNums:return"upperRomanNums";case n.e_LowerRomanNums:return"lowerRomanNums";case n.e_UpperLetters:return"upperLetters";case n.e_LowerLetters:return"lowerLetters"}return"decimalNums"}function Uo(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!0===t?function(e,t){var n=e.engine,r=new n.PageLabels(e.doc),i=e.doc.GetPageCount(),o=(0,s._)(t,2),c=o[0],u=o[1],l=u+1,d=!0;if(l<i){var h=r.HasPageLabel(u);if(0==r.HasPageLabel(l)){var f=n.PageLabelsStyle.e_None,g="",p=-1;if(0==h){for(var v=u-1;v>=0;v--)if(r.HasPageLabel(v)){f=r.GetPageLabelStyle(v),g=r.GetPageLabelPrefix(v),c<=v?p=r.GetPageLabelStart(v):d=!1;break}-1===p&&(p=c+1)}else f=r.GetPageLabelStyle(u),g=r.GetPageLabelPrefix(u),p=r.GetPageLabelStart(u);g=(0,a._)(g,n.WString)?g:new n.WString(g),r.SetPageLabel(l,f,p,g)}}if(0==d)return;for(var m=u;m>=c;m--)0!=m&&r.HasPageLabel(m)&&r.RemovePageLabel(m)}(e,n):function(e,t,n){var r=n.styleType,i=void 0===r?"decimalNums":r,o=n.prefix,c=void 0===o?"":o,u=n.start,l=void 0===u?1:u,d=e.engine,h=new d.PageLabels(e.doc),f=e.doc.GetPageCount(),g=(0,s._)(t,2),p=g[0],v=g[1],m=v+1;if(m<f){var _=h.HasPageLabel(v);if(0==h.HasPageLabel(m)){var y=d.PageLabelsStyle.e_DecimalNums,S="",b=-1;if(0==_){for(var I=v-1;I>=0;I--)if(h.HasPageLabel(I)){y=h.GetPageLabelStyle(I),S=h.GetPageLabelPrefix(I);var A=h.GetPageLabelStart(I);b=p<=I?A:p-I+A;break}-1===b&&(b=p+1)}else y=h.GetPageLabelStyle(v),S=h.GetPageLabelPrefix(v),b=h.GetPageLabelStart(v);S=(0,a._)(S,d.WString)?S:new d.WString(S),h.SetPageLabel(m,y,b,S)}}var P=new d.WString(c),D=function(e,t){var n={none:"e_None",decimalNums:"e_DecimalNums",upperRomanNums:"e_UpperRomanNums",lowerRomanNums:"e_LowerRomanNums",upperLetters:"e_UpperLetters",lowerLetters:"e_LowerLetters"}[t];return e.engine.PageLabelsStyle[n]}(e,i);h.SetPageLabel(p,D,l,P);for(var E=p+1;E<=v;E++)h.HasPageLabel(E)&&h.RemovePageLabel(E)}(e,n,r)}var Wo=function(){function e(){(0,t._)(this,e)}return(0,r._)(e,null,[{key:"insertPagesByRange",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;this.insertPages(e,s,1)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}},{key:"insertPages",value:function(e,t,n){var r=e.engine,i=new r.PageOperationInfo;i.type=r.PageOperationType.e_PageOperationInsert,i.page_index_1=t,i.page_count=n,e.doc.UpdatePageLabels(i)}},{key:"deletePages",value:function(e,t){var n=e.engine,r=new n.PageOperationInfo;r.type=n.PageOperationType.e_PageOperationDelete;var i=!0,a=!1,o=void 0;try{for(var c,u=t[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var l=(0,s._)(c.value,2),d=l[0],h=l[1];h=void 0===h?d:h,r.page_index_range.AddSegment(d,h,n.RangeFilter.e_All)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}e.doc.UpdatePageLabels(r)}},{key:"reversePages",value:function(e,t){var n=e.engine,r=new n.PageOperationInfo;r.type=n.PageOperationType.e_PageOperationReverse;var i=!0,a=!1,o=void 0;try{for(var s,c=t[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value;r.page_index_range.AddSegment(u,u,n.RangeFilter.e_All)}}catch(e){a=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}e.doc.UpdatePageLabels(r)}},{key:"replacePages",value:function(e,t,n,r,i){var a=e.engine,o=new a.PageOperationInfo;o.type=a.PageOperationType.e_PageOperationReplace,o.page_index_1=t,o.page_count=n-t+1,o.page_index_range.AddSegment(r,i,a.RangeFilter.e_All),e.doc.UpdatePageLabels(o)}},{key:"swapPages",value:function(e,t,n){var r=e.engine,i=new r.PageOperationInfo;i.type=r.PageOperationType.e_PageOperationSwap,i.page_index_1=t,i.page_index_2=n,e.doc.UpdatePageLabels(i)}},{key:"movePages",value:function(e,t,n){var r=e.doc.GetPageCount(),i=n;t[0]<n&&(i=n-1),i<0&&(i=0),i>=r&&(i=r-1);var a=e.engine,o=new a.PageOperationInfo;o.type=a.PageOperationType.e_PageOperationMove;var s=!0,c=!1,u=void 0;try{for(var l,d=t[Symbol.iterator]();!(s=(l=d.next()).done);s=!0){var h=l.value;o.page_index_range.AddSegment(h,h,a.RangeFilter.e_All)}}catch(e){c=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(c)throw u}}o.page_index_1=i,e.doc.UpdatePageLabels(o)}}]),e}();var Ho=["bRemoveBookmark","bRemoveComment","bRemoveContent","bRemoveFileattachment","bRemoveForm","bRemoveHideLayer","bRemoveHideText","bRemoveLink","bRemoveMetadata","bRemoveOverlaping","bRemoveSearchIndex"];var Ko=__webpack_require__(2715),zo=function(){function e(){(0,t._)(this,e)}return(0,r._)(e,[{key:"init",value:function(e,t){var n,r;this[t]||(this[t]=(n=e[t],r=!1,function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(!r&&n)return r=!0,n.apply(this,t)})),this[t]()}}]),e}();const Vo=new zo;var Jo,Yo=navigator.userAgent.toLowerCase(),Zo=/opera|opr/.test(Yo),qo=/msie/.test(Yo),Xo=/trident/.test(Yo),Qo=/\sapplewebkit\//.test(Yo),$o=/chrome/.test(Yo),es=/safari/.test(Yo),ts=(/firefox/.test(Yo),/edg\//.test(Yo),(Xo||qo)&&!Zo&&"msSaveBlob"in navigator&&(!!(Jo=Yo.match(/msie ([\d\.]+)/))&&parseInt(Jo[1])),Yo.indexOf("edge"),Zo),ns=Qo,rs=!/huawei/.test(Yo)&&!ts&&es&&!$o,is=(navigator.product,/maxthon/.test(Yo),/tencenttraveler/.test(Yo)||/qqbrowser/.test(Yo),/wechat/.test(Yo),/metasr/.test(Yo)||/sogou/.test(Yo),/baidubrowser/.test(Yo),/ucbrowser/.test(Yo),/liebao/.test(Yo),/miuibrowser/.test(Yo),/huaweibrowser/.test(Yo)||/huaweialp/.test(Yo),/crios/.test(Yo),__webpack_require__(8341));const as={PDFArticle:__webpack_require__(8043).Z};var os=__webpack_require__(5401),ss=__webpack_require__(2019),cs="cache",us=(new g.Z(cs,"FoxitPDFSDKForWeb_"+cs),navigator.userAgent.toLowerCase());function ls(){var e;return!(!("ActiveXObject"in self)||!(e=us.match(/msie ([\d\.]+)/)))&&10===parseInt(e[1])}globalThis.getErrorCode=function(e){return e};/iP(hone|od|ad)/i.test(us);var ds={};self.trace=function(e){};var hs=new d.N5,fs=hs.promise,gs=(0,d.dD)(),ps=gs.promise,vs=!1,ms=!1,_s=!1,ys={},Ss=(0,d.dD)(),bs=Ss.promise,Is=!1,As={};Ua(As,zs,Js,fs,js,Ls),Lo(As,zs,Js,fs,js,Ls);var Ps,Ds,Es=Xa(As,zs,Js,fs,js,Ls),Cs={},ws=(Ps={},{push:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i;(i=Ps[e]=Ps[e]||[]).push.apply(i,(0,c._)(n))},get:function(e){return Ps[e]||[]}}),ks={},Ts={},Fs={},Gs=function e(n,r){(0,t._)(this,e),this.reason=n,this.transfers=r},Rs=function(t,r){return(0,e._)(function(){var e,o,s,h,f,g,p,v,m,_,y,S,b;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return"object"!==(void 0===(e=r[0])?"undefined":(0,u._)(e))?[2]:e.wasm?[4,Ga.ZP.loadWasmModule(e.wasm)]:[3,2];case 1:l.sent(),l.label=2;case 2:if(!(o=e.path))return[2];s=o.split("/"),h="",f=null,g=1,p=!0,v=!1,m=void 0;try{for(_=function(){var a=S.value;switch(a){case"doc":"jr"!==h&&console.error("path is incorrect"),f=zs(r[g++]);break;case"page":"doc"!==h&&console.error("path is incorrect");var o=r[g++];f=f.then(function(e){return e.getPageById(o)});break;case"annot":"page"!==h&&console.error("path is incorrect");var s=r[g++];f=f.then(function(e){return e.getAnnotById(s)});break;case"3d":"doc"!==h&&console.error("path is incorrect"),f=f.then(function(e){return e.getPDF3D()});break;case"action":"doc"!==h&&console.error("path is incorrect");var u=r[g++];f=f.then(function(e){return e.getIndirectObject(u).then(function(e){return fs.then(function(t){var n=e.pdfDoc;return t.actionManager.get(t.actionManager.getActionByDict(n,e.getDict()),n,t)})})});break;case"layer":"doc"!==h&&console.error("path is incorrect"),f=f.then(function(e){return e.pdfLayer?e.pdfLayer:e.getLayerNodes().thne(function(){return e.pdfLayer})});break;case"jr":""!==h&&console.error("path is incorrect"),f=fs;break;default:var l="construct"==t?(0,d.Ki)(a):r[g++];f=f.then(function(o){return"construct"==t?(o.construct=function(){for(var t in as)if(as.hasOwnProperty(t)&&e.className==t){var s=as[t],u=(0,n._)(s,[o].concat((0,c._)(r.slice(g)))),d=o[a];return d?d[l]=u:o[a]=(0,i._)({},l,u),{objId:l,json:u.toJson?u.toJson():""}}},o):o[a][l]})}h=a},y=s[Symbol.iterator]();!(p=(S=y.next()).done);p=!0)_()}catch(e){v=!0,m=e}finally{try{p||null==y.return||y.return()}finally{if(v)throw m}}return!0===(b=e.transfer)?b=["buffer"]:(0,a._)(b,Array)||(b=[]),[2,{parentObjPromise:f,name:t,args:r.slice(g),transfer:b}]}})})()};function xs(e){return ks[e]}function Os(e){}function Ms(e,t){for(var n=e.params||[],r=e.more.paramsInfo||[],i=[],a=n.length;a--;){var o=n[a],s=r[a]||{};s.isObject?!(i[a]=xs(o))&&s.enumName&&(i[a]=Ns(o,s.enumName,t)):i[a]=n[a]}return i}function Ns(e,t,n){for(var r=t.split("."),i=n,a=0,o=r.length;a<o;a++)i=i[r[a]];return i.values[e]}function Bs(e,t){try{self.postMessage(e,t)}catch(t){self.postMessage(e)}}function Ls(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{error:-1},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;ls()&&(n=n[0]),t&&r&&(t.e=r.constructor?r.constructor.name:r),Bs({id:e,type:1,params:t},n)}function js(t,n){return(0,e._)(function(e,t){var n,r=arguments;return(0,l.Jh)(this,function(i){switch(i.label){case 0:return n=r.length>2&&void 0!==r[2]?r[2]:[],ls()&&(n=n[0]),t&&"function"==typeof t.then?[4,t]:[3,2];case 1:t=i.sent(),i.label=2;case 2:return Bs({id:e,type:0,params:t},n),[2]}})}).apply(this,arguments)}function Us(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];ls()&&(n=n[0]);var r=(0,d.Ki)("worker_back"),i=(0,d.dD)();return Cs[r]=function(e){i.resolve(e)},Bs({callId:e,params:t,backId:r},n),i.promise}function Ws(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];ls()&&(n=n[0]),Bs({uiListener:e,params:t},n)}function Hs(e,t,n){if(hs.isSettled){var r=n(Ks(t));js(e,r)}else zs(t).then(function(t){var r=n(t);js(e,r)})}function Ks(e){var t=hs.resolveValue;if(t){var n=t.getPDFDocById(e);if(!n)throw new Error('The document corresponding to the ID("'.concat(e,'") cannot be found or has been deleted!'));return n}}function zs(e){var t=new Error('The document corresponding to the ID("'.concat(e,'") cannot be found or has been deleted!'));return fs.then(function(t){return t.getPDFDocById(e)}).then(function(e){if(!e)throw t;return e})}function Vs(e,t){return zs(e).then(function(e){return e.getPageByIndex(t)}).then(function(e){if(!e)throw new Error("Cannot access the page with the specified index: ".concat(t));return e})}function Js(e,t){return zs(e).then(function(e){return e.getPageById(t)})}function Ys(e,t,n){var r=t.docId,i=t.pageId,a=t.x,o=t.y,s=t.width,c=t.height,u=t.scale,l=t.rotate;return Js(r,i).then(function(e){return e.getImageDataByTile(a,o,s,c,u,l,n)}).then(function(t){var n=[];t.buffer&&(n=[t.buffer]),js(e,t,n)})}self.onmessage=function(t){return(0,e._)(function(){var e,n,r,i,o,s,c,h,f,g,p,v,m;return(0,l.Jh)(this,function(l){switch(l.label){case 0:if(e=t.data,n=e.params,r=e.backId)return[2,Cs[r](n)];i=e.name,o=e.id,l.label=1;case 1:return l.trys.push([1,6,,7]),(c=As[i])?(s=c(o,n),[3,5]):[3,2];case 2:return Array.isArray(n)&&n.length>0&&"object"===(0,u._)(n[0])?[4,Rs(i,n)]:[3,4];case 3:if(!(s=l.sent()))throw v=new Error("Method not implemented."),Error(v+JSON.stringify(e));return h=s.parentObjPromise,f=s.name,g=s.args,p=s.transfer,s=h.then(function(e){var t=e[f];return t&&t.apply(e,g)},function(e){if(e===os.Z)throw new Error("Method not permission.");throw e}).then(function(e){js(o,e,e?e.transfers||function(e,t){return Array.isArray(e)&&e.length?e.map(function(e){var n=t;return(0,a._)(e,Array)?e.forEach(function(e){n=(n||{})[e]}):n=n[e],n}):[]}(p,e):[])},function(e){Ls(o,{error:-1,message:"web-pdf-jr-worker-error\r\n"+f+"\r\n"+e.toString(),stack:e.stack})}),[3,5];case 4:!function(e){var t=e.id,n=e.name,r=n.split(".");fs.then(function(e){return e.engine}).then(function(t){for(var n=t,i=0,a=r.length;i<a;i++){var o=void 0;if(o=n[r[i]]){var s=r[i+1];if("prototype"===s){var c=void 0;try{n=xs(c=e.more.self)}catch(e){n=new o}if(i++,"destroy"===r[i+1])return Os(c),c}else"create"===s?(n=new o.apply(o,Ms(e)),i++):n="function"==typeof o?o.apply(n,Ms(e)):o}}return function(e){if(!e)return"";var t=(0,d.Ki)("obj");return ks[t]=e,t}(n)}).then(function(e){js(t,e)},function(e){Ls(t,{code:e.code,stack:e.stack,message:e.message})})}(e),l.label=5;case 5:return(0,a._)(s,Promise)&&s.catch(function(e){var t,r;(0,a._)(e,Gs)?(r=e.reason,t=e.transfers):(t=[],r=e),fs.then(function(e){if((0,a._)(r,e.engine.ErrorCode)&&(r=r.value),"number"==typeof r){var s=e.engine.getErrorCode(r);"number"!=typeof s&&(s=r),Ls(o,{error:r,message:"Unknown engine error! error: ".concat(r,", code: ").concat(s,", Worker function name: ").concat(i,", parameters: ").concat(JSON.stringify(n),", reason: ").concat(d.nl[s.value])},t,null)}else(0,a._)(r,Error)&&Ls(o,{error:"number"==typeof r.error?r.error:-1,message:r.message,stack:r.stack},t,r)})}),[3,7];case 6:return m=l.sent(),Ls(o,{error:-1,message:"web-pdf-jr-worker-error\r\n"+i+"\r\n"+m.toString(),stack:m.stack}),[3,7];case 7:return[2]}})})()},As.initJREngine=function(e,t){var n=t.enginePath,r=t.licenseSN,i=t.licenseKey,a=t.fontPath,o=t.cache,s=(t.compatibilityURL,t.l),c=t.d,u=t.readBlock,l=void 0===u?8192:u,h=t.fontMap,f=void 0===h?[]:h,g=t.brotli,p=void 0===g?{}:g,v=t.fontInfoPath,m=t.syncBaseUrl;if(_s||ms||vs)return ps.then(function(t){return js(e,{version:self.gsdkVersion,clientId:t.id})});var _=function(e){Vo.init(e,"initAction"),Vo.init(e,"initAnnot"),Vo.init(e,"initForm"),Vo.init(e,"initFormFiller"),Vo.init(e,"initGraphicsObject"),Vo.init(e,"initOptimizer"),Vo.init(e,"initConnectPDF"),Vo.init(e,"initFillSign"),Vo.init(e,"initLayer"),Vo.init(e,"initPDFObject"),Vo.init(e,"initPortfolio")};ps.then(function(t){if(Ds)return js(e,{other:Ds,version:self.gsdkVersion,clientId:t.id}),void _(t.engine);js(e,{version:self.gsdkVersion,clientId:t.id}),_(t.engine)});var y=(0,d.dD)();vs=y.promise.then(function(){return ms=!0,new Ea(null,{enginePath:n,fontPath:a,cache:o,postMessageToUi:Ws,readBlock:l,fontMap:f,brotli:p,fontInfoPath:v,syncBaseUrl:m})}).then(function(t){t.jrEnginePromise.catch(function(t){Ls(e,{error:3},null,t)}),(s?t.checkLicense2(s):t.checkLicense(r,i)).then(function(n){var r=n.flag,i=n.other;if(Ga.ZP.init(t),globalThis.getErrorCode=function(e){return t.engine.getErrorCode(e)},self.gsdkVersion=t.engine.Library.GetVersion().toString(),r){var a,o=t.engine.Library.GetLicenseKeyInfo;try{a=o().toString()}catch(e){}if(a){var s=a.match(/<Domains\r\n>((.|\r?\n)*)<\/Domains\r\n>/);if(s){s=s[1];for(var u,l=/<Domain\r\n>([^<]+)<\/Domain\r\n>/g,d=!1,h=!1;u=l.exec(s);){var f=u[1],g=void 0;if(f)for(var p=f.split(/,||\r?\n/),v=p.length;v--;){var m=p[v];if(m){d=!0;var _=void 0;try{_=new RegExp(m.replace(/\./g,"\\.").replace(/\*\*/g,"").replace(/\*/g,".?").replace(new RegExp("","g"),".*")).test(c)}catch(e){}if(_){h=!0,g=!0;break}}}if(g)break}if(d&&!h)return void Ls(e,{error:2})}}if(i&&(i=JSON.parse(i))){var y=!0;if(i.h){y=!1;var S=i.h;0;for(var b=S.length;b--;){var I=S[b];if(new RegExp(I).test(c)){y=!0;break}}}if(!y)return void Ls(e,{error:2});var A=Date.now(),P=i.b;if(P&&!(y=A>P))return void Ls(e,{error:2});var D=i.e;if(D&&!(y=A<D))return void Ls(e,{error:2});if(!y)return void Ls(e,{error:2})}Ds=i,_s=!0,gs.resolve(t)}else Ls(e,{error:2})})},function(){Ls(e)},function(e){return Promise.reject(e)});try{if(!Fn())throw new Error("not support asm");importScripts(n+"/gsdk.js?h=649380f4a6cfd233054047b1c81b5439"),y.resolve(),ms=!0}catch(t){return console.error(t),Ls(e,{error:1})}},As.serviceWorkerReady=function(e,t){ps.then(function(e){return e.setServiceWorkerReady(t),e}).then(function(t){hs.resolve(t),js(e)})},As.setConfiguration=function(e,t){ps.then(function(n){n.setConfiguration(t),js(e)})},As.getPDFDocByFile=function(e,t){var n=t.file,r=t.option;return fs.then(function(e){if((0,a._)(n,ArrayBuffer))return e.getPDFDoc((0,o._)({buffer:n},r));var t=nc(n);return t.size<20971520&&!r.ReadBlockOption?e.getPDFDoc((0,o._)({buffer:t.read(0,t.size)},r)):e.getPDFDoc((0,o._)({size:t.size,getBuffer:function(e,n){return t.read(e,n)},destroyCallback:function(){t.destroy()},ReadBlockOption:r.ReadBlockOption},r))}).then(function(e){return e.setOriginalStream(n),e.id}).then(function(t){js(e,t)})},As.getPDFDocFromImageFile=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return fs.then(function(r){var i=r.engine,a=nc(t),o=a.read(0,a.size),s=Tt.Z.createImage(i,o),c=s.GetWidth(),u=s.GetHeight(),l=t.name,d={width:c,height:u};return r.createNewDoc(l,n,d).then(function(e){return r.getPDFDoc({buffer:e})}).then(function(t){js(e,{docId:t.id,width:c,height:u,buffer:o})})})},As.createNewDoc=function(e,t){var n=t.title,r=t.author,i=t.pageSize;return fs.then(function(e){return e.createNewDoc(n,r,i)}).then(function(t){js(e,t,[t])})},As.createNewDocEx=function(e,t){var n=t.title,r=t.author,i=t.pageSize;return fs.then(function(e){return e.createNewDocEx(n,r,i)}).then(function(t){js(e,t)})},As.createNewPortfolioDoc=function(e,t){var n=t.fileCoversheet,r=t.files,i=t.title;return fs.then(function(e){return e.createNewPortfolioDoc(n,r,i)}).then(function(t){js(e,t,[t])})},As.createSummarizeComments=function(e,t){var n,r=t.docId,i=t.writeStream,a=t.param;return zs(r).then(function(e){return n=e,e.createSummarizeComments({writeStream:function(e,t,n){Us(i,{arrayBuffer:e,offset:t,size:n},[e])}},a)}).then(function(t){ws.push(n.id,i),js(e,t)},function(t){Ls(e,{err:-1},[],t)})},As.setIcons=function(e,t){var n=t.icons;fs.then(function(e){var t=bt();t.initIconProvider(e,e.engine),t.setIcons(n)}),js(e)},As.addIcon=function(e,t){var n=t.icon;js(e,bt().addIcon(n))},As.removeIcon=function(e,t){var n=t.type,r=t.catalog,i=t.name;bt().removeIcon(n,r,i),js(e)},As.previewIconDoc=function(e,t){var n=t.icon,r=Promise.resolve();return"Digital"===n.category&&(r=Ga.ZP.loadWasmModule(Ga.sg)),r.then(function(t){return fs.then(function(t){var r=bt();r.initIconProvider(t,t.engine);var i=r.previewIconDoc(n);js(e,i,[i])})})},As.checkCertificatePassword=function(e,t){var n=t.pfxFile,r=t.password;return Promise.all([fs,Ga.ZP.loadWasmModule(Ga.v6)]).then(function(e){return(0,s._)(e,1)[0].checkCertificatePassword(n,r)}).then(function(t){js(e,t)})},As.getCertificateInfo=function(e,t){var n=t.file,r=t.password;return Promise.all([fs,Ga.ZP.loadWasmModule(Ga.v6)]).then(function(e){return(0,s._)(e,1)[0].getCertificateInfo(n,r)}).then(function(t){js(e,t)})},As.createCertificateFile=function(e,t){var n=t.docId,r=t.info;return Ga.ZP.loadWasmModule(Ga.v6).then(function(){return zs(n)}).then(function(e){return e.createCertificateFile(r)}).then(function(t){js(e,t)})},As.getCertificateSerials=function(e,t){return zs(t.docId).then(function(e){return e.getCertificateSerials()}).then(function(t){js(e,t)})},As.parseByCertificate=function(e,t){var n=t.docId,r=t.info;return zs(n).then(function(t){t.parseByCertificate(r).then(function(n){0===n.code&&(n.info=t.toJson()),js(e,n)})}).catch(function(t){Ls(e,null,[],t)})},As.parsePDFDocByPassword=function(e,t){var n,r=t.id,i=t.password,a=t.initData,o=void 0===a?{}:a,s=fs.then(function(e){e.engine.Library.SetDefaultFileSize(o.readBlock||e.defaultReadBlockSize);var t=Array.isArray(o.fdf);if(o.fdf&&o.fdf.file){var n=o.fdf.file,r=Xs(n),i=Qs(n);return e.getFDFDoc({size:r,getBuffer:function(e,t){return i(e,t)}}).then(function(e){o.fdf.file=e})}if(t)return Promise.all(o.fdf.map(function(t,n){var r=Xs(t.file),i=Qs(t.file);return e.getFDFDoc({size:r,getBuffer:function(e,t){return i(e,t)}}).then(function(e){return o.fdf[n].file=e})}))});return s.then(function(){return zs(r)}).then(function(e){return n=e,e.parseByPassword(i,o)}).then(function(t){if(fs.then(function(e){}),0===t.code){t.info=n.toJson();var r=n.doc.CheckPassword(new n.engine.String(i||""));t.info.hasOwnerPassword=3===r.value||n.doc.HasOwnerPassword()}js(e,t)}).catch(function(t){Ls(e,null,[],t)}).finally(function(e){return n=null})},As.getPageCount=function(e,t){return zs(t).then(function(e){return e.getPageCount()}).then(function(t){js(e,t)},function(t){Ls(e,null,[],t)})},As.getFileVersion=function(e,t){return zs(t).then(function(e){return e.getFileVersion()}).then(function(t){js(e,t)},function(t){Ls(e,null,[],t)})},As.getPDFDocInfoById=function(e,t){return zs(t).then(function(t){js(e,t.toJson())})},As.getMetadata=function(e,t){return zs(t).then(function(t){js(e,t.getMetadata())})},As.setMetadataValue=function(e,t){var n=t.id,r=t.key,i=t.value;return zs(n).then(function(t){js(e,t.setMetadataValue(r,i))})},As.getPageInfoByIndex=function(e,t){return Vs(t.id,t.index).then(function(e){return e.preparsed?e.preparseJsonPromise:e.toJson()}).then(function(t){js(e,t)}).catch(function(e){0})},As.getDocPermission=function(e,t){return zs(t).then(function(e){return e.getPermission()}).then(function(t){js(e,t)})},As.getPageWidth=function(e,t){return Js(t.docId,t.pageId).then(function(e){return e.getWidth()}).then(function(t){js(e,t)})},As.getPageHeight=function(e,t){return Js(t.docId,t.pageId).then(function(e){return e.getHeight()}).then(function(t){js(e,t)})},As.getPageImageData=function(e,t){var n=t.docId,r=t.pageId,i=t.scale;return Js(n,r).then(function(e){return e.getImageData(i)}).then(function(t){var n=[];t.buffer&&(n=[t.buffer]),js(e,t,n)})},As.destroyDoc=function(t,n){var r=n.id;ws.get(r).forEach(function(e){var t;t=e,self.postMessage({destroyId:t})}),Fs[r]&&delete Ts[Fs[r]],zs(r).then(function(n){return(0,e._)(function(){var e;return(0,l.Jh)(this,function(i){switch(i.label){case 0:return Es.clearObjectFromCache(r),n&&n.destroy(),(e=ys[r])&&(e(),delete ys[r]),[4,fs];case 1:return i.sent().destroyDoc(r),js(t),[2]}})})()}).catch(function(e){Ls(t,null,[],e)})},As.getImageDataByTile=Ys,As.getImageDataWithoutAnnotByTile=function(e,t){var n=t.docId,r=t.pageId,i=t.x,a=t.y,o=t.width,s=t.height,c=t.scale,u=t.rotate;return fs.then(function(t){Ys(e,{docId:n,pageId:r,x:i,y:a,width:o,height:s,scale:c,rotate:u},[t.engine.ContentFlag.e_RenderPage.value])})},As.getAnnot=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Js(n,r).then(function(e){return e?e.getAnnotById(i).then(function(t){if(!t)return[null];var n=uc(e,t);return n?[t,n]:[t]}):[null]}).then(function(e){var t=(0,s._)(e,2),n=t[0],r=t[1],i={};if(n){var a;n.engine;r&&(a=page.getNormalTextPageSync()),i=n.toJson(null,{cTextPage:a});try{n.destroy()}catch(e){}a&&r.delete()}return i}).then(function(t){js(e,t)})},As.getPageAnnotIDList=function(e,t){return Js(t.docId,t.pageId).then(function(e){return e.getAnnotIDList()}).then(function(t){js(e,t)})},As.getAnnots=function(t,n){var r,i=n.docId,a=n.pageId,o=n.idList,u=n.reload;return Js(i,a).then(function(e){return e?(r=e,e.getAnnots(o,void 0,u)):[]}).then(function(t){return(0,e._)(function(){var e,n,i;return(0,l.Jh)(this,function(a){return e={},n=!1,t.map(function(t,r){var i=t.annot,a=i.GetType(),o=t.engine,s=o.AnnotType;if(a===s.e_UnknownType)return!1;n||-1===[s.e_Highlight,s.e_Underline,s.e_Squiggly,s.e_StrikeOut].indexOf(a)||(n=t);var c=i.GetDict(),u=c.GetObjNum(),l=e[u]=e[u]||{},d=u;l.index=r,l.id=d,l.objectNumber=d;var h=(0,$.n5)(o,"IRT");if(c.HasKey(h)){var f=c.GetElement(h).GetDict();if(f){var g=f.GetObjNum(),p=(0,$.n5)(o,"RT"),v=(0,$.n5)(o,"State"),m=(0,$.n5)(o,"StateModel"),_=e[g]=e[g]||{};if(c.HasKey(v)&&c.HasKey(m)){var y=c.GetElement(m).GetString().toString(),S=i.GetModifiedDateTime(),b=0;switch(S.IsValid()&&(S=S.ToUTCTime(),b=Date.UTC(S.year,S.month-1,S.day,S.hour,S.minute,S.second,S.milliseconds)),y){case"Marked":(_.markedStates=_.markedStates||[]).push({index:r,id:d,time:b,objectNumber:d});break;case"Review":(_.reviewStates=_.reviewStates||[]).push({index:r,id:d,time:b,objectNumber:d})}}else if(c.HasKey(p)){if("Group"===c.GetElement(p).GetString().toString())_.isGroupHeader=!0,_.isGroup=!0,(_.groupElements=_.groupElements||[]).push({index:r,id:d,objectNumber:d}),l.isGroup=!0,l.groupHeader=_;else _.hasReplies=!0,(_.replies=_.replies||[]).push({index:r,id:d,content:i.GetContent().toString(),objectNumber:d})}else{_.hasReplies=!0,(_.replies=_.replies||[]).push({index:r,id:d,content:i.GetContent().toString(),objectNumber:d})}}}}),(i=n&&uc(r,n))?[2,[t,e,i]]:[2,[t,e]]})})()}).then(function(t){var n=(0,s._)(t,3),i=n[0],a=n[1],o=n[2];return(0,e._)(function(){var e,t,n,s,c,u,d,h,f,g,p,v;return(0,l.Jh)(this,function(l){switch(l.label){case 0:e=[],null==r?void 0:r.engine,o&&(t=r.getNormalTextPageSync()),n=!0,s=!1,c=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),u=i[Symbol.iterator](),l.label=2;case 2:return(n=(d=u.next()).done)?[3,5]:(h=d.value,f=h.engine,(g=h.annot)?0===(p=g.GetType().value)?[3,4]:(e.push(h.toJson(a,{cTextPage:t})),p!==f.AnnotType.e_FileAttachment.value?[3,4]:[4,new Promise(function(e){return setTimeout(e)})]):[3,4]);case 3:l.sent(),l.label=4;case 4:return n=!0,[3,2];case 5:return[3,8];case 6:return v=l.sent(),s=!0,c=v,[3,8];case 7:try{n||null==u.return||u.return()}finally{if(s)throw c}return[7];case 8:return t&&o.delete(),[2,Promise.all(e)]}})})()}).then(function(e){var n;r&&!r.isVirtual&&(n=e).push.apply(n,(0,c._)(r.getFakeAnnots())),js(t,e)})},As.setRenderFlag=function(e,t){var n=t.docId,r=t.flags;return zs(n).then(function(e){e.setRenderFlag(r)})};var Zs={};function qs(e,t){var n=t.progressiveId,r=Zs[n];r?(r.bitmap.delete(),r.renderer.delete(),r.progressive.delete(),delete Zs[n],e&&js(e)):js(e)}function Xs(e){return(0,a._)(e,Blob)?e.size:e.byteLength}function Qs(e){return(0,a._)(e,Blob)?(e=new Blob([e]),function(t,n){return(new FileReaderSync).readAsArrayBuffer(e.slice(t,t+n))}):e.slice?function(t,n){return e.slice(t,t+n)}:function(t,n){return new Uint8Array(e,t,n).buffer}}As.getAnnotsBitmap=function(e,t){var n=t.docId,r=t.pageId,i=t.arrayBuffer,a=t.scale,o=t.rotate,s=t.rect,c=t.flags,u=t.usage,l=t.annotData,d=t.pdfRect,h=Ks(n).getPageById(r);if(!h)return null;var f=h.getAnnotsBitmap(i,a,o,s,c,u,l,d);js(e,f,[f.buffer])},As.getPageBitmap=function(e,t){var n=t.docId,r=t.pageId,i=t.scale,a=t.rotate,o=t.rect,s=t.flags,c=t.usage,u=t.id,l=t.isSharedPage,d=t.annotData;return Js(n,r).then(function(e){return e?e.getBitmap(i,a,o,s,c,""==u,l,d):null}).then(function(t){if(t){var n=t.image;if(t.isVirtual)js(e,n,[n.buffer]);else{var r=[];n.buffer&&(r=[n.buffer]),n.progressiveId=u,js(e,n,r),delete t.image,100==n.rate?(t.bitmap.delete(),t.renderer.delete(),t.progressive.delete&&t.progressive.delete()):Zs[u]=t}}else js(e,null)})},As.progressContinue=function(e,t){var n=t.progressiveId,r=Zs[n];if(r){var i=r.progressive,a=i.GetRateOfProgress();100==a&&js(e,{rate:100}),Ko.Z.startTick(100);var o=i.Continue(),s=r.page,c=r.renderer,u=r.usage,l=r.matrix,d=r.renderFlags;100==(a=2==o.value?100:i.GetRateOfProgress())&&s.renderAnnots(c,u,l,d);var h=r.getBitmapBuffer(r.engine,r.bitmap,r.renderer,!1);h.rate=a,h.progressiveId=n,h.x=r.x,h.y=r.y;var f=[];h.buffer&&(f=[h.buffer]),js(e,h,f),100==h.rate&&qs(null,{progressiveId:n})}else js(e,{isEmpty:1,progressiveId:n})},As.cancleProgress=qs,As.getPageAndHighlightBitmap=function(e,t){var n=t.docId,r=t.pageId,i=t.scale,a=t.rotate,o=t.rect,s=t.exclude;return Js(n,r).then(function(e){return e.getPageAndHighlightBitmap(i,a,o,s)}).then(function(t){var n=[];t.buffer&&(n=[t.buffer]),js(e,t,n)})},As.getAnnotBitmap=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.scale,o=t.rotate,s=t.rect,c=t.renderAppearanceType,u=t.viewerAnnotFlag,l=t.annotData;return Js(n,r).then(function(e){return e.getAnnotBitmap(i,a,o,s,c,u,l)}).then(function(t){var n=[];t.buffer&&(n=[t.buffer]),js(e,t,n)})},As.getAnnotBitmapByRange=function(e,t){var n=t.docId,r=t.pageId,i=t.range,a=t.scale,o=t.rotate,s=t.rect;return Js(n,r).then(function(e){return e.getAnnotBitmapByRange(i,a,o,s)}).then(function(t){var n=[];t.buffer&&(n=[t.buffer]),js(e,t,n)})},As.getAnnotIdAtPoint=function(e,t){var n=t.docId,r=t.pageId,i=t.points,a=t.tolerance;return Js(n,r).then(function(e){return e.getAnnotIdAtPoint(i.x,i.y,a)}).then(function(t){js(e,t)})},As.getAnnotIdAtDevicePoint=function(e,t){var n=t.docId,r=t.pageId,i=t.points,a=t.tolerance,o=t.matrix;return Js(n,r).then(function(e){return e.getAnnotIdAtDevicePoint(i.x,i.y,a,o)}).then(function(t){js(e,t)})},As.getAnnotObjectNumAtPoint=function(e,t){var n=t.docId,r=t.pageId,i=t.points,a=t.tolerance;return Js(n,r).then(function(e){return e.getAnnotObjectNumAtPoint(i.x,i.y,a)}).then(function(t){js(e,t)})},As.getAnnotObjectNumAtDevicePoint=function(e,t){var n=t.docId,r=t.pageId,i=t.points,a=t.tolerance,o=t.matrix;return Js(n,r).then(function(e){return e.getAnnotObjectNumAtDevicePoint(i.x,i.y,a,o)}).then(function(t){js(e,t)})},As.getAnnotObjNumByNM=function(e,t){var n=t.docId,r=t.pageId,i=t.nm;return Js(n,r).then(function(e){return e.getAnnotObjNumByNM(i)}).then(function(t){js(e,t)})},As.getCharInfoAtPoint=function(e,t){var n=t.docId,r=t.pageId,i=t.points,a=t.tolerance;return Js(n,r).then(function(e){return e.getCharInfoAtPoint(i.x,i.y,a)}).then(function(t){js(e,t)})},As.getThumb=function(e,t){var n=t.docId,r=t.pageId,i=t.rotate,a=t.ratio;return Js(n,r).then(function(t){return t?t.getThumb(i,a).then(function(t){var n=[];t.buffer&&(n=[t.buffer]),js(e,t,n)}):Ls(e,new Error("Page not exists: "+r))})},As.getMediaBoxBitmap=function(e,t){var n=t.docId,r=t.pageId,i=t.width,a=t.height;return Js(n,r).then(function(t){return t?t.getMediaBoxBitmap(i,a).then(function(t){var n=[];t.buffer&&(n=[t.buffer]),js(e,t,n)}):Ls(e,new Error("Page not exists: "+r))})},As.updateAnnotQuadPointsByCharIndex=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.startCharIndex,o=t.endCharIndex;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.updateQuadPointsByCharIndex(a,o)}).then(function(t){js(e,t)})},As.setAnnotContent=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.content;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setContent(a)}).then(function(t){js(e,t)})},As.setAnnotBorderColor=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.color;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setBorderColor(a)}).then(function(){js(e,!0)})},As.setAnnotOpacity=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.opacity;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setOpacity(a)}).then(function(t){js(e,t)})},As.setAnnotRotation=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.rotation;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setRotation(a)}).then(function(t){js(e,t)})},As.removeAnnot=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Js(n,r).then(function(e){if(e.hasAnnot(i))return e.getAnnotById(i)}).then(function(e){return e?e.remove():[i]}).then(function(t){js(e,t||[])})},As.annotAddReply=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.content;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.addReply(a)}).then(function(e){return e.pdfPage.update().then(function(){return e})}).then(function(e){return Promise.all([e,e.toJson()])}).then(function(t){var n=(0,s._)(t,2),r=n[0],i=n[1];js(e,i),r.destroy()})},As.setAnnotRect=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.rect;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setRect(a)}).then(function(t){js(e,t)})},As.setAnnotRectAndInnerRect=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.rect,o=t.innerRect;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setAnnotRectAndInnerRect(a,o)}).then(function(t){js(e,t)})},As.getAnnotInnerRect=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(t){t.getInnerRect?js(e,t.getInnerRect()):js(e,!1)})},As.moveAnnotTo=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.position;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.moveTo(a.left,a.top)}).then(function(t){return js(e,t)})},As.setAnnotInnerRect=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.rect;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setInnerRect(a)}).then(function(t){return js(e,t)})},As.setAnnotAPBitmap=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.url,o=t.size;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setAnnotAPBitmap(a,o)}).then(function(t){return js(e,t)})},As.getBitmapBuffer=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.getBitmapBuffer()}).then(function(t){var n=[];t.buffer&&(n=[t.buffer]),js(e,t,n)})},As.getPDFDocStream=function(e,t){var n,r=t.docId,i=t.writeStream,a=t.flag,o=t.endAllOperations;return zs(r).then(function(e){return n=e,e.getStream({writeStream:function(e,t,n){Us(i,{arrayBuffer:e,offset:t,size:n},[e])},endAllOperations:o},a)}).then(function(t){ws.push(n.id,i),js(e,t)})},As.setAnnotBorderStyle=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.style,o=t.styleParam;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setBorderStyle(a,o)}).then(function(t){js(e,t)})},As.setAnnotBorderWidth=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.width;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setBorderWidth(a)}).then(function(t){js(e,t)})},As.setAnnotFillColor=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.color;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return!!e.setFillColor(a).length}).then(function(t){js(e,t)})},As.setRedactAnnotFillColor=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.color,o=t.onlyForFill;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setRedactFillColor(a,o),!0}).then(function(t){js(e,t)})},As.setAnnotBorderInfo=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.borderInfo;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setBorderInfo(a),!0}).then(function(t){js(e,t)})},As.setRedactOverlayText=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.overlayText;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setRedactOverlayText(a)}).then(function(t){js(e,t)})},As.setRedactApplyFillColor=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.color;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setRedactApplyFillColor(a)}).then(function(t){js(e,t)})},As.removeRedactOverlayText=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.removeRedactOverlayText()}).then(function(t){js(e,t)})},As.setRedactOverlayTextAlignment=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.alignment;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setRedactOverlayTextAlignment(a)}).then(function(t){js(e,t)})},As.setRedactRepeat=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.isRepeat;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setRedactRepeat(a)}).then(function(t){js(e,t)})},As.setRedactAutoFontSize=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.isAutoFontSize;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setRedactAutoFontSize(a)}).then(function(t){js(e,t)})},As.getRedactDefaultAppearance=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(t){js(e,t.getRedactDefaultAppearance())})},As.setRedactDefaultAppearance=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.appearance;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setRedactDefaultAppearance(a)}).then(function(t){js(e,t)})},As.setRedactOpacity=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.opacity,o=t.only4Fill;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setRedactOpacity(a,o)}).then(function(t){js(e,t)})},As.setAnnotIconName=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.iconName;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setIconName(a)}).then(function(t){js(e,t)})},As.getFileattachmentStream=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.writeStream;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.getStream({writeStream:function(e,t,n){Us(a,{arrayBuffer:e,offset:t,size:n},[e])}})}).then(function(t){ws.push(i,a),js(e,t)})},As.setAnnotEndingStyle=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.isBeginning,o=t.style;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){o=parseInt(o),a?e.setLineStartStyle(o):e.setLineEndStyle(o)}).then(function(){js(e)})},As.setLineStartPoint=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.x,o=t.y;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){e.setStartPoint(a,o)}).then(function(){js(e)})},As.setLineEndPoint=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.x,o=t.y;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){e.setEndPoint(a,o)}).then(function(){js(e)})},As.setAnnotLeaderLineLength=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.length;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){e.setLeaderLineLength(a)}).then(function(){js(e)})},As.setAnnotLeaderLineExtend=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.length;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){e.setLeaderLineExtensionLength(a)}).then(function(){js(e)})},As.setAnnotLeaderLineOffset=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.offset;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){e.setLeaderLineOffset(a)}).then(function(){js(e)})},As.setAnnotCaptionOffset=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.x,o=t.y;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){e.setCaptionOffset(a,o)}).then(function(){js(e)})},As.updateAnnotVertexes=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.pointIndex,o=t.x,s=t.y;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){e.updateVertexes(a,o,s)}).then(function(){js(e)})},As.setAnnotVertexes=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.vertexes;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){e.setVertexes(a)}).then(function(){js(e)})},As.setHighlightingMode=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.highlightingMode;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setHighlightingMode(a)}).then(function(t){js(e,t)})};var $s=65536,ec=function e(n,r,i){(0,t._)(this,e),this.bufStart=n,this.bufSize=r,this.buffer=i},tc=function(){function e(n){(0,t._)(this,e),this.blob=n,this.bufferMap={}}return(0,r._)(e,[{key:"loadFSToMem",value:function(e,t){for(var n=Math.floor(e/$s),r=new FileReaderSync,i=Math.min(t,this.blob.size-e),a=r.readAsArrayBuffer(this.blob.slice(e,e+i)),o=this.bufferMap[n]=new ec(e,i,a),s=n;s<=n+Math.ceil((t-1)/$s)-1;)this.bufferMap[s]=o,s++}},{key:"read",value:function(e,t){for(var n=this.bufferMap,r=Math.floor(e/$s),i=new Uint8Array(t),a=r,o=0;o<t;a++){if(!n[a]){var s=Math.max($s,((t-o-1)/$s|1)*$s);a*$s+s<e+t&&(s+=$s),this.loadFSToMem(a*$s,s)}var c=n[a],u=c.bufSize,l=c.bufStart,d=c.buffer,h=Math.min(t-o,u-(e+o-l));i.set(new Uint8Array(d,e+o-l,h),o),o+=h}return i}}]),e}();function nc(e){var t,n;if((0,a._)(e,Blob)){e=new Blob([e]),t=e.size;var r=new tc(e);n=function(e,t){return r.read(e,t)}}else t=e.byteLength,n=e.slice?function(t,n){return e.slice(t,t+n)}:function(t,n){return new Uint8Array(e,t,n).buffer};return{size:t,read:n,destroy:function(){e=null,t=0,n=null}}}function rc(e){for(var t=[],n=e.GetMatchRects(),r=0,i=n.GetSize();r<i;r++){var a=n.GetAt(r);t[r]={left:a.left,right:a.right,top:a.top,bottom:a.bottom}}return{pageIndex:e.GetMatchPageIndex(),startCharIndex:e.GetMatchStartCharIndex(),endCharIndex:e.GetMatchEndCharIndex(),sentenceStartIndex:e.GetMatchSentenceStartIndex(),sentence:e.GetMatchSentence().toString(),rectArray:t}}As.importFromFDF=function(e,t){var n=t.docId,r=t.fdf,i=t.dataType;return fs.then(function(e){var t=Xs(r),i=Qs(r),a=function(e,t){return i(e,t)};return e.getFDFDoc({size:t,getBuffer:a}).then(function(r){return r.IsEmpty()&&rs?(r.delete(),Promise.all([e.getFDFDoc({size:t,getBuffer:a}),zs(n)])):Promise.all([r,zs(n)])})}).then(function(e){var t=(0,s._)(e,2),n=t[0],r=t[1];return[r.importFromFDF(n,i),r,n]}).then(function(e){var t=(0,s._)(e,3),n=(t[0],t[1]);return t[2].delete(),Promise.all(n.getAllLoadedPages().map(function(e){return e.update()}))}).then(function(){js(e)})},As.importFromFDFFile=function(e,t){var n=t.docId,r=t.file,i=t.size,o=t.type;return fs.then(function(e){var t;return(0,a._)(r,Uint8Array)?t=e.getFDFDoc({size:r.byteLength,getBuffer:function(e,t){return r.slice?r.slice(e,e+t):new Uint8Array(r,e,t).buffer}}):"string"==typeof r&&(t=e.getFDFFromURL(r,i)),t}).then(function(e){return Promise.all([e,zs(n)])}).then(function(e){var t=(0,s._)(e,2),n=t[0],r=t[1],i=r.importFromFDF(n,o);return Promise.all(r.getAllLoadedPages().map(function(e){return e.update()})).then(function(){return i})}).then(function(t){js(e,t)})},As.setCalloutLineEndingStyle=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.endingStyle;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){e.setCalloutLineEndingStyle(a)}).then(function(){js(e)})},As.setDefaultAppearance=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.da;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(t){t.setDefaultAppearance(a);js(e)})},As.setAction=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.type,o=t.trigger,s=t.append;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setAction(o,a,s)}).then(function(t){js(e,t.toJson())})},As.removeAnnotAction=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.removeAction()}).then(function(t){js(e,t)})},As.getAction=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.getAction()}).then(function(t){var n;n=t?t.toJson():null,js(e,n)})},As.getStructureRoles=function(e,t){return zs(t.docId).then(function(e){return e.getStructureRoles(e)}).then(function(t){js(e,t)})},As.addBookmarksFromStructureRoles=function(e,t){var n=t.docId,r=t.structureRoles,i=t.rootTitle;return zs(n).then(function(e){return e.addBookmarksFromStructureRoles(r,i)}).then(function(t){js(e,t)})},As.addAnnotReviewState=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.stateName;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.addReviewState(a)}).then(function(e){return e.pdfPage.update().then(function(){return e})}).then(function(t){js(e,t.toJson())})},As.addAnnotMarkedState=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.stateName;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.addMarkedState(a)}).then(function(e){return e.pdfPage.update().then(function(){return e})}).then(function(t){js(e,t.toJson())})},As.removeAllStateAnnots=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){var t=e.removeAllStateAnnots();return!!t&&e.pdfPage.update().then(function(e){return t})}).then(function(t){return js(e,t)})},As.setStateName=function(e,t){var n=t.docId,r=t.pageId,i=t.stateAnnotId,a=t.stateName;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(t){t.setStateName(a),js(e,!0)})},As.setNoteOpenStatus=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.isOpen;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(t){var n=t.setOpenStatus(a);js(e,n)})},As.setActionDataByIndex=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.data,o=t.actionIndex;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){var t=e.action.setActionDataByIndex(a,o);return e.updateModifyTime(),t}).then(function(t){js(e,t.toJson())})},As.setCalloutLinePoints=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.calloutLinePoints;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setCalloutLinePoints(a)}).then(function(){js(e)})},As.updateCalloutFigure=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.outerRect,o=t.innerRect,s=t.calloutLinePoints;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.updateCalloutFigure(a,o,s)}).then(function(){js(e)})},As.updateRectFigure=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.outerRect,o=t.innerRect;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return!!e.updateRectFigure&&e.updateRectFigure(a,o)}).then(function(t){js(e,t)})},As.setSubject=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.subject;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setSubject(a)}).then(function(t){js(e,t)})},As.setTitle=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.title;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setTitle(a)}).then(function(t){js(e,t)})},As.setCreateDateTime=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.date;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setCreateDateTime(a)}).then(function(t){js(e,t)})},As.setModifiedDateTime=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.date;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setModifiedDateTime(a)}).then(function(t){js(e,t)})},As.setUniqueId=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.newId;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setUniqueId(a,!0)}).then(function(t){js(e,t)})},As.setDefaultAp=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.defaultAppearance;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setDefaultAp(a)}).then(function(t){js(e,t)})},As.setAlignment=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.value;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setAlignment(a),!0}).then(function(t){js(e,t)})},As.exportToStardardXml=function(e,t){var n=t.docId,r=t.fileName,i=t.callbackId,a=t.range;return Ga.ZP.loadWasmModule(Ga.eL).then(function(){return zs(n)}).then(function(e){return e.exportToStardardXml(r,function(e){Us(i,e)},a)}).then(function(t){js(e,t)})},As.exportToFDF=function(e,t){var n=t.docId,r=t.fileType,i=t.dataType,a=t.pageAnnots;return zs(n).then(function(e){return e.exportToFDF(r,i,a)}).then(function(t){js(e,t)})},As.exportToImage=function(e,t){var n=t.docId,r=t.imageSetting,i=t.fileName,a=t.pageRange,o=t.callbackId;return Ga.ZP.loadWasmModule(Ga.eL).then(function(){return zs(n)}).then(function(e){return e.exportToImage(r,i,a,function(e){Us(o,e)})}).then(function(t){js(e,t)})},As.exportToTxt=function(e,t){var n=t.docId,r=t.taskName,i=t.pageRange,a=t.callbackId;return Ga.ZP.loadWasmModule(Ga.eL).then(function(){return zs(n)}).then(function(e){return e.exportToTxt(r,i,function(e){Us(a,e)})}).then(function(t){js(e,t)})},As.exportImageObjectToImage=function(e,t){var n=t.docId,r=t.graphicsObject,i=t.imageSetting,a=t.fileName,o=t.callbackId;return Ga.ZP.loadWasmModule(Ga.eL).then(function(){return zs(n)}).then(function(e){return e.exportImageObjectToImage(r,i,a,function(e){Us(o,e)})}).then(function(t){js(e,t)})},As.cancelExport=function(e,t){return zs(t.docId).then(function(e){return e.cancelExport()}).then(function(t){js(e,t)})},As.setAnnotFlag=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.flag;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setAnnotFlag(a)}).then(function(t){js(e,!0)})},As.addAnnot=function(e,t){var n=t.docId,r=t.pageId,i=t.annot;return Js(n,r).then(function(e){return e.addAnnot(i)}).then(function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];i?t[n]=i.toJson():t[n]=null}return t}).then(function(t){js(e,t)})},As.setImage=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.buffer;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setImage(a)}).then(function(t){js(e,!0)})},As.getAllModuleLicenseRight=function(e){return fs.then(function(e){var t=e.engine,n=t.ModuleName,r=(Object.keys(n).filter(function(e){return 0===e.indexOf("e_ModuleName")}),{});return Object.entries(Q.f5).forEach(function(e){var n=e[0].toLowerCase(),i=t.Library.HasModuleLicenseRight({value:e[1]});r[n]=i}),r}).then(function(t){js(e,t)})},As.ensureSideModeLoaded=function(e,t){var n=t.moduleType;return fs.then(function(t){return t.ensureSideModeLoaded(n).then(function(t){return js(e,!0)})})},As.setDictionaryEntry=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.key,o=t.value;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setDictionaryEntry(a,o)}).then(function(t){js(e,t)})},As.getDictionaryEntry=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.key;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.getDictionaryEntry(a)}).then(function(t){js(e,t)})},As.resetAppearanceStream=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(t){t.resetAppearanceStream(),js(e)})},As.isLinearized=function(e,t){return zs(t.docId).then(function(e){return e.isLinearized()}).then(function(t){js(e,t)})},As.getLayerNodes=function(e,t){return zs(t.docId).then(function(e){return e.getLayerNodes()}).then(function(t){js(e,t)})},As.setLayerNodeVisiable=function(e,t){var n=t.docId,r=t.layerId,i=t.visiable;return zs(n).then(function(e){return!!e.pdfLayer&&e.pdfLayer.setLayerNodeVisiable(r,i)}).then(function(t){js(e,t)})},As.addAnnotGroup=function(e,t){var n=t.docId,r=t.pageId,i=t.annots,a=t.headerIndex;return Js(n,r).then(function(e){return e.addAnnotGroup(i,a)}).then(function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];i?t[n]=i.toJson():t[n]=null}return t}).then(function(t){js(e,t)})},As.getBlankPageIndexes=function(e,t){return zs(t.docId).then(function(e){return e.getBlankPageIndexes()}).then(function(t){js(e,t)})},As.getBookmarks=function(e,t){return zs(t.docId).then(function(e){return e.getBookmarks()}).then(function(t){js(e,t)})},As.getCurFileSymbolId=function(e,t){return zs(t.docId).then(function(e){return e.getCurFileSymbolId()}).then(function(t){js(e,t)})},As.getFadeOutBackground=function(e,t){var n=t.docId,r=t.imgBuffer;return zs(n).then(function(e){return e.getFadeOutBackground(r)}).then(function(t){js(e,t)})},As.getConvertToMono=function(e,t){var n=t.docId,r=t.imgBuffer;return zs(n).then(function(e){return e.getConvertToMono(r)}).then(function(t){js(e,t)})},As.createRootBookmark=function(e,t){return zs(t.docId).then(function(e){return e.createRootBookmark()}).then(function(t){js(e,t)})},As.setBookmarkProperty=function(e,t){var n=t.docId,r=t.bkId,i=t.properties;return zs(n).then(function(e){return e.setBookmarkProperty(r,i)}).then(function(t){js(e,t)})},As.removeBookmark=function(e,t){var n=t.docId,r=t.bkId,i=t.isOldVersion;return zs(n).then(function(e){return e.removeBookmark(r,i)}).then(function(t){js(e,t)})},As.getBookmarkDestination=function(e,t){var n=t.docId,r=t.bkId;return zs(n).then(function(e){var t=e.rootBookmark.getBookmarkById(r);if(t)return t.getDestination()}).then(function(t){js(e,t)})},As.setBookmarkDestination=function(e,t){var n=t.docId,r=t.bkId,i=t.gotoAction;return zs(n).then(function(e){var t=e.rootBookmark.getBookmarkById(r);if(t)return t.setDestination(i)}).then(function(t){js(e,t)})},As.getBookmarkAction=function(e,t){var n=t.docId,r=t.bkId;return zs(n).then(function(e){var t=e.rootBookmark.getBookmarkById(r);if(t)return t.getAction()}).then(function(t){js(e,t)})},As.setBookmarkAction=function(e,t){var n=t.docId,r=t.bkId,i=t.action;return zs(n).then(function(e){var t=e.rootBookmark.getBookmarkById(r);if(t)return t.setAction(i)}).then(function(t){js(e,t)})},As.moveBookmarkAction=function(e,t){var n=t.docId,r=t.bkId,i=t.moveInfo;return zs(n).then(function(e){var t=e.rootBookmark.getBookmarkById(r);if(t)return t.moveAction(i)}).then(function(t){js(e,t)})},As.removeBookmarkAction=function(e,t){var n=t.docId,r=t.bkId,i=t.action;return zs(n).then(function(e){var t=e.rootBookmark.getBookmarkById(r);if(t)return t.removeAction(i)}).then(function(t){js(e,t)})},As.getTextRectsAtRect=function(e,t){var n=t.docId,r=t.pageId,i=t.rect;return Js(n,r).then(function(e){return e.getTextRectsAtRect(i)}).then(function(t){js(e,t)})},As.getTextContinuousRectsAtRect=function(e,t){var n=t.docId,r=t.pageId,i=t.rect;return Js(n,r).then(function(e){return e.getTextContinuousRectsAtRect(i)}).then(function(t){js(e,t)})},As.getTextContinuousRectsAtPoints=function(e,t){var n=t.docId,r=t.pageId,i=t.point1,a=t.point2,o=t.tolerance,s=t.start,c=t.end,u=t.isTextIndex;return Js(n,r).then(function(e){return e.getTextContinuousRectsAtPoints(i,a,o,s,c,u)}).then(function(t){js(e,t)})},As.getTextContinuousCharsAtRect=function(e,t){var n=t.docId,r=t.pageId,i=t.rect,a=t.allInRect;return Js(n,r).then(function(e){return e.getTextContinuousCharsAtRect(i,a)}).then(function(t){js(e,t)})},As.getDoubleClickTextRectAtPoint=function(e,t){var n=t.docId,r=t.pageId,i=t.doubleClickPoint,a=t.tolerance;return Js(n,r).then(function(e){return e.getDoubleClickTextRectAtPoint(i,a)}).then(function(t){js(e,t)})},As.getTextSearch=function(e,t){var n=t.docId,r=t.pageId,i=t.pattern,a=t.flags;return Js(n,r).then(function(e){return e.getTextSearch(i,a)}).then(function(t){var n=t.textSearch,r=t.textPage,i=t.strPattern,a=(0,d.Ki)("page_text_search");ds[a]={textSearch:n,textPage:r,strPattern:i},js(e,a)})},As.getAnnotTextSearch=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.pattern,o=t.flags;return Js(n,r).then(function(e){return e.getAnnotTextSearch(i,a,o)}).then(function(t){var n=t.textSearch,r=t.strPattern,i=(0,d.Ki)("annot_text_search");ds[i]={textSearch:n,strPattern:r},js(e,i)})},As.textSearchFindNext=function(e,t){var n=t.id,r=ds[n];return r?(r=r.textSearch).FindNext()?void js(e,rc(r)):js(e,null):Ls(e,null,[],"No text search found!!")},As.textSearchFindPrev=function(e,t){var n=t.id,r=ds[n];return r?(r=r.textSearch).FindPrev()?void js(e,rc(r)):js(e,null):Ls(e,null,[],"No text search found!!")},As.textSearchDestroy=function(e,t){var n=t.id;try{var r=ds[n];r.strPattern.delete(),r.textSearch.delete(),delete ds[n]}catch(e){}finally{js(e)}},As.registerSecurityCallback=function(e,t){var n=t.type,r=t.options;return fs.then(function(e){return e.registerSecurityCallback(n,r)}).then(function(t){js(e,t)})},As.registerCustomWebPluginSecurityCallback=function(e,t){var n=t.fileName,r=t.filter,i=t.pluginSecurityObj;return fs.then(function(e){return e.registerCustomWebPluginSecurityCallback(n,r,i)}).then(function(t){js(e,t)})},As.unRegisterSecurityHandler=function(e,t){var n=t.pluginId,r=t.filter;return fs.then(function(e){return e.unRegisterSecurityHandler(n,r)}).then(function(t){js(e,t)})},As.customProtectDoc=function(e,t){var n=t.docId,r=t.filter;return zs(n).then(function(e){return e.customProtectDoc(r)}).then(function(t){js(e,t)})},As.setDocOpenAction=function(e,t){var n=t.docId,r=t.type,i=t.params;return zs(n).then(function(e){return e.setOpenAction(r,i)}).then(function(t){js(e,t)})},As.setDocActionData=function(e,t){var n=t.docId,r=t.data,i=t.index;return zs(n).then(function(e){return e.action.setActionDataByIndex(r,i)}).then(function(t){js(e,t.toJson())})},As.moveCaretRectByCharIndex=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.charIndex;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.moveRectByCharIndex(a)}).then(function(t){js(e,!0)})},As.setAnnotIntent=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.intent;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setIntent(a)}).then(function(t){js(e,t)})},As.setInkList=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.inkList;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setInkList(a)}).then(function(t){js(e,t)})},As.setUserName=function(e,t){var n=t.name;return fs.then(function(e){return e.setUserName(n)}).then(function(){js(e)})},As.getUserName=function(e){return fs.then(function(e){return e.getUserName()}).then(function(t){return js(e,t)})},As.flatten=function(e,t){var n=t.docId,r=t.pageId,i=t.option;return Ga.ZP.loadWasmModule(Ga.sg).then(function(){return Js(n,r)}).then(function(e){return e.flatten(i)}).then(function(t){t?js(e,t):Ls(e)})},As.setDynamicInfoFormula=function(e,t){var n=t.seperator,r=t.timeFormat;bt().setDynamicInfoFormula(n,r),js(e)},As.getDynamicInfoFormula=function(e){js(e,bt().getDynamicInfoFormula())},As.setDigitalTimeFormat=function(e,t){var n=t.timeFormat;bt().setDigitalTimeFormat(n),js(e)},As.setDigitalInfo=function(e,t){var n=t.identityInfo;bt().setDigitalInfo(n),js(e)},As.updatePageInfo=function(e,t){return Js(t.docId,t.pageId).then(function(e){return e.toJson()}).then(function(t){js(e,t)})},As.setPageRotation=function(e,t){var n=t.docId,r=t.pageId,i=t.rotation;return Js(n,r).then(function(e){return e.setRotation(i)}).then(function(t){js(e,t)})},As.getSecurityType=function(e,t){return zs(t.docId).then(function(e){return e.getSecurityType()}).then(function(t){js(e,t)})},As.setCertificateAndPermission=function(e,t){var n=t.docId,r=t.infos,i=t.cipher,a=t.isEncryptMetadata;return zs(n).then(function(e){return e.setCertificateAndPermission(r,i,a)}).then(function(t){js(e,t)})},As.setPasswordAndPermission=function(e,t){var n=t.docId,r=t.userPassword,i=t.ownerPassword,a=t.permission,o=t.cipher,s=t.isEncryptMetadata;return zs(n).then(function(e){return e.setPasswordAndPermission(r,i,a,o,s)}).then(function(t){js(e,t)})},As.removeSecurity=function(e,t){return zs(t.docId).then(function(e){return e.removeSecurity()}).then(function(t){js(e,t)})},As.checkPassword=function(e,t){var n=t.docId,r=t.password;return zs(n).then(function(e){return e.checkPassword(r)}).then(function(t){js(e,t)})},As.getPermission=function(e,t){return zs(t.docId).then(function(e){return e.getPermission()}).then(function(t){js(e,t)})},As.getStdCipherOptions=function(e,t){return zs(t.docId).then(function(e){return e.getStdCipherOptions()}).then(function(t){js(e,t)})},As.addWatermark=function(e,t){var n=t.docId,r=t.pageId,i=t.data;return Js(n,r).then(function(e){return e.addWatermark(i)}).then(function(t){js(e,t)})},As.getUserPassword=function(e,t){var n=t.docId,r=t.password;return zs(n).then(function(e){return e.getUserPassword(r)}).then(function(t){js(e,t)})},As.getPasswordType=function(e,t){return zs(t.docId).then(function(e){return e.getPasswordType()}).then(function(t){js(e,t)})},As.setPasswordType=function(e,t){var n=t.docId,r=t.type;return zs(n).then(function(e){return e.setPasswordType(r)}).then(function(t){js(e,t)})},As.movePageTo=function(e,t){var n=t.docId,r=t.pageId,i=t.destIndex;return zs(n).then(function(e){return e.movePageTo(r,i)}).then(function(t){js(e,t)})},As.insertPage=function(e,t){var n=t.docId,r=t.pageIndex,i=t.width,a=t.height;return zs(n).then(function(e){return e.insertPage(r,i,a)}).then(function(t){js(e,t)})},As.removePage=function(e,t){var n,r=t.docId,i=t.pageIndex;return zs(r).then(function(e){try{n=e.pageIndexMap[i].id}catch(e){}return e.removePage(i)}).then(function(t){t&&Es.clearObjectFromCache(r,n),js(e,t)})},As.markRedactAnnot=function(e,t){var n=t.docId,r=t.pageId,i=t.rects,a=t.annot;return Js(n,r).then(function(e){return e.markRedactAnnot(i,a)}).then(function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];i?t[n]=i.toJson():t[n]=null}return t}).then(function(t){js(e,t)})},As.applyRedaction=function(e,t){return zs(t.docId).then(function(e){return e.applyRedaction()}).then(function(t){js(e,t)})},As.redactApply=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.apply()}).then(function(t){js(e,t)})},As.setActionDestination=function(e,t){var n=t.docId,r=t.objNum,i=t.destination;return zs(n).then(function(t){var a=function(){return t.getIndirectObject(r).then(function(e){return fs.then(function(t){var n=e.pdfDoc,r=t.actionManager.get(t.actionManager.getActionByDict(n,e.getDict()),n,t);return r.setDestination(i),r})}).then(function(t){js(e,t.toJson())})};return"number"==typeof i.pageIndex?Vs(n,i.pageIndex).then(function(t){if(!t.isVirtual)return a();js(e,null)}):a()})},As.setActionFieldNames=function(e,t){var n=t.docId,r=t.objNum,i=t.fieldNames;return zs(n).then(function(e){return e.getIndirectObject(r)}).then(function(e){return fs.then(function(t){var n=e.pdfDoc,r=t.actionManager.get(t.actionManager.getActionByDict(n,e.getDict()),n,t);return r.setFieldNames(i),r})}).then(function(t){js(e,t.toJson())})},As.setActionHideState=function(e,t){var n=t.docId,r=t.objNum,i=t.isHide;return zs(n).then(function(e){return e.getIndirectObject(r)}).then(function(e){return fs.then(function(t){var n=e.pdfDoc,r=t.actionManager.get(t.actionManager.getActionByDict(n,e.getDict()),n,t);return r.setHideState(i),r})}).then(function(t){js(e,t.toJson())})},As.setActionScript=function(e,t){var n=t.docId,r=t.objNum,i=t.script;return zs(n).then(function(e){return e.getIndirectObject(r)}).then(function(e){return fs.then(function(t){var n=e.pdfDoc,r=t.actionManager.get(t.actionManager.getActionByDict(n,e.getDict()),n,t);return r.setScript(i),r})}).then(function(t){js(e,t.toJson())})},As.setActionOCGState=function(e,t){var n=t.docId,r=t.objNum,i=t.hideLayerIds,a=t.visibleLayerIds;return zs(n).then(function(e){var t=e.doc;return fs.then(function(e){var n=null;if(null!=r){var o=t.GetIndirectObject(r);n=e.actionManager.get(e.actionManager.getActionByDict(t,o.GetDict()),t,e)}else{var s=e.actionManager.create(t,"TypeSetOCGState");n=e.actionManager.get(s,t,e)}return n.setOCGState(i,a),n})}).then(function(t){js(e,t.toJson())})},As.setActionURI=function(e,t){var n=t.docId,r=t.objNum,i=t.uri;return zs(n).then(function(e){return e.getIndirectObject(r)}).then(function(e){return fs.then(function(t){var n=e.pdfDoc,r=t.actionManager.get(t.actionManager.getActionByDict(n,e.getDict()),n,t);return r.setURI(i),r})}).then(function(t){js(e,t.toJson())})},As.setActionFlags=function(e,t){var n=t.docId,r=t.objNum,i=t.flags;return zs(n).then(function(e){return e.getIndirectObject(r)}).then(function(e){return fs.then(function(t){var n=e.pdfDoc,r=t.actionManager.get(t.actionManager.getActionByDict(n,e.getDict()),n,t);return r.setFlags(i),r})}).then(function(t){js(e,t.toJson())})},As.insertSubAction=function(e,t){var n=t.docId,r=t.objNum,i=t.index,a=t.type;return zs(n).then(function(e){return e.getIndirectObject(r)}).then(function(e){return fs.then(function(t){var n=e.pdfDoc,r=t.actionManager.get(t.actionManager.getActionByDict(n,e.getDict()),n,t);return r.insertSubAction(i,a),r})}).then(function(t){js(e,t.toJson())})},As.setSubAction=function(e,t){var n=t.docId,r=t.objNum,i=t.index,a=t.type;return zs(n).then(function(e){return e.getIndirectObject(r)}).then(function(e){return fs.then(function(t){var n=e.pdfDoc,r=t.actionManager.get(t.actionManager.getActionByDict(n,e.getDict()),n,t);return r.setSubAction(i,a),r})}).then(function(t){js(e,t.toJson())})},As.removeAllSubActions=function(e,t){var n=t.docId,r=t.objNum;return zs(n).then(function(e){return e.getIndirectObject(r)}).then(function(e){return fs.then(function(t){var n=e.pdfDoc,r=t.actionManager.get(t.actionManager.getActionByDict(n,e.getDict()),n,t);return r.removeAllSubActions(),r})}).then(function(t){js(e,t.toJson())})},As.removeSubAction=function(e,t){var n=t.docId,r=t.objNum,i=t.index;return zs(n).then(function(e){return e.getIndirectObject(r)}).then(function(e){return fs.then(function(t){var n=e.pdfDoc,r=t.actionManager.get(t.actionManager.getActionByDict(n,e.getDict()),n,t);return r.removeSubAction(i),r})}).then(function(t){js(e,t.toJson())})},As.setActionData=function(e,t){var n=t.docId,r=t.objNum,i=t.data;return zs(n).then(function(e){return e.getIndirectObject(r)}).then(function(e){return fs.then(function(t){var n=e.pdfDoc,r=t.actionManager.get(t.actionManager.getActionByDict(n,e.getDict()),n,t);return r.setActionData(i),r})}).then(function(t){js(e,t.toJson())})},As.moveAction=function(e,t){var n=t.docId,r=t.pageId,i=t.objNum,a=t.moveInfo;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(t){var n=t.moveAction(a);js(e,n)})},As.getActionFileStream=function(e,t){var n=t.docId,r=t.objNum,i=t.writeStream;return zs(n).then(function(e){return e.getIndirectObject(r)}).then(function(e){return fs.then(function(t){var n=e.pdfDoc;return t.actionManager.get(t.actionManager.getActionByDict(n,e.getDict()),n,t).getFileSpec().getStream(function(e,t,n){Us(i,{arrayBuffer:e,offset:t,size:n},[e])})})}).then(function(t){js(e,t)})};var ic=function(e){var t=new Error("request error: ".concat(e.statusText));return t.error=e.status,t};function ac(e,t,n,r){var i=new XMLHttpRequest;if(i.open(e.type||"GET",e.url||e.url,!1,e.user,e.password),i.responseType="arraybuffer",e.headers){var a=e.headers;for(var o in a)i.setRequestHeader(o,a[o])}var s=Math.min(t+n-1,r-1);if(t>s&&(t=s),i.setRequestHeader("Range","bytes="+t+"-"+s),i.send(e.data),!(i.status>=200&&i.status<300||304===i.status))throw new Error("request error: "+i.status);return new Blob([i.response])}function oc(e,t,n){setTimeout(function(){try{var r=e.next();if(r.done)return void n(r.value);Ws(t,r.value),oc(e,t,n)}catch(e){Ws(t,-1),n(e.status)}})}function sc(e,t){zs(t.docId).then(function(e){return e.getPDFDictInfo()}).then(function(t){return js(e,t)})}function cc(e,t){var n=t.docId,r=t.pageId,i=t.objects;Js(n,r).then(function(e){return e.addAnnotObjects(i)}).then(function(t){return js(e,t.map(function(e){return e.toJson()}))})}function uc(e,t){var n=e.page;if(!e.isVirtual&&(!n||!n.IsParsed()||e.needReParse)&&-1!==["highlight","squiggly","strikeout","underline"].indexOf(t.getType())){n=t.annot.GetPage();var r=function(e,t,n){var r=t.StartParse(0,null,n),i=e.ProgressiveState.e_ToBeContinued,a=e.ProgressiveState.e_Finished;if((0,ss.Z)(r,i,a))return t;t.delete()}(t.engine,n,e.needReParse);if(r)return n}}As.getPDFDocIdByHttpRangeRequest=function(e,t){var n,r,i,o=t.size,c=t.range,u=void 0===c?{}:c;if(o)r=Promise.resolve(o),n=Promise.resolve({});else{var l=(0,d.dD)();r=l.promise;var h=(0,d.dD)();n=h.promise;var f=function(){var e=new XMLHttpRequest;if(e.open(u.type||"GET",u.url||u.url,!0,u.user,u.password),e.responseType="arraybuffer",u.headers){var t=u.headers;for(var n in t)e.setRequestHeader(n,t[n])}void 0===u.firstRequestStatus&&e.setRequestHeader("Range","bytes=0-1"),e.onreadystatechange=function(){if(4===e.readyState)if(e.status>=200&&e.status<300||304===e.status){try{var t;u.extendOptions&&(t=e.getResponseHeader(u.extendOptions))?h.resolve(JSON.parse(atob(t))):h.resolve({})}catch(e){h.resolve({})}var n=e.getAllResponseHeaders();if(n){var r=n.trim().split(/[\r\n]+/),o={};r.forEach(function(e){var t=e.split(": "),n=t.shift(),r=t.join(": ");o[n]=r});var s,c=o["content-range"]||o["Content-Range"];c&&-1!==(s=c.lastIndexOf("/"))?l.resolve(+c.slice(s+1)):(0,a._)(e.response,ArrayBuffer)?(i=e.response,l.resolve(i.byteLength)):(d.mA.getLogger("[JR-Worker]").error("The response header which names 'Content-Range' cannot be obtained. Please confirm whether the HTTP server response is correct. If it is a cross-domain request, please check whether the value of 'Access-Control-Expose-Headers' contains 'Content-Range'"),l.reject(ic(e)))}else l.reject(ic(e))}else 0===e.status&&void 0===u.firstRequestStatus?(u.firstRequestStatus=e.status,f()):l.reject(ic(e))},e.send(u.data)};f()}return Promise.all([r,fs,n]).then(function(e){var t=(0,s._)(e,3),n=t[0],r=t[1],o=t[2],c=n;if(o.isHttp=!0,i){if((0,a._)(i,ArrayBuffer))return r.getPDFDoc({buffer:i,docId:u.docId});var l=nc(i);return l.size<20971520?r.getPDFDoc({buffer:l.read(0,l.size)}):r.getPDFDoc({size:c,getBuffer:function(e,t){return l.read(e,t)},initOpenOptions:o,destroyCallback:function(){l.destroy()},docId:u.docId})}return r.getPDFDoc({size:n,getBuffer:function(e,t){return function(e,t,n,r){for(var i=e.url,a=e.id||i,o=Ts[a]=Ts[a]||{buffers:[]},s=+(e.chunkSize||131072),c=Math.floor(t/s),u=Math.floor((t+n)/s),l=o.buffers,d=c,h=u;d<=h;d++)l[d]||(l[d]=ac(e,d*s,s,r));if(c===u){var f=l[c],g=t-c*s;return(new FileReaderSync).readAsArrayBuffer(f.slice(g,g+n))}for(var p=l[c],v=t-c*s,m=[p.slice(v)],_=c+1,y=u-1;_<=y;_++)m.push(l[_]);return p=l[u],m.push(p.slice(0,(t+n)%s)),(new FileReaderSync).readAsArrayBuffer(new Blob(m))}(u,e,t,c)},initOpenOptions:o,docId:u.docId})}).then(function(e){return i?e.setOriginalStream(i):e.setOriginalStream(u),Fs[e.id]=u.id||u.url,e.id}).then(function(t){js(e,t)})},As.setPopupOpenStatus=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.status;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setOpenStatus(a)}).then(function(t){js(e,t)})},As.removePageAllAnnot=function(e,t){return Js(t.docId,t.pageId).then(function(e){return e.removeAllAnnot()}).then(function(){js(e)})},As.getAnnotWoff=function(e,t){var n=t.docId,r=t.pageId,i=t.id;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.getWoff()}).then(function(t){js(e,t)})},As.drmEncrypt=function(e,t){var n=t.docId,r=t.options;return zs(n).then(function(e){return e.drmEncrypt(r)}).then(function(t){return t?js(e):Ls(e,{error:-1})})},As.getTemplates=function(e,t){return zs(t.docId).then(function(e){return e.getTemplates()}).then(function(t){return js(e,t)})},As.hideTemplate=function(e,t){var n=t.docId,r=t.templateObj,i=t.isHidden;return zs(n).then(function(e){return e.hideTemplate(r,i)}).then(function(t){return js(e,t)})},As.spawnPage=function(e,t){var n=t.docId,r=t.templateObj,i=t.nPage,a=t.bRename,o=t.bOverlay;return zs(n).then(function(e){return e.spawnPage(n,r,i,a,o)}).then(function(t){return js(e,t)})},As.removeTemplate=function(e,t){var n=t.docId,r=t.name;return zs(n).then(function(e){return e.removeTemplate(r)}).then(function(t){return js(e,t)})},As.getFontBufferByName=function(e,t){var n=t.docId,r=t.fontName;return zs(n).then(function(e){return e.getFontBufferByName(r)}).then(function(t){return js(e,t)})},As.getPageSizes=function(e,t){var n=t.docId,r=t.index,i=t.count;return zs(n).then(function(e){return e.getPageSizes(r,i)}).then(function(t){return js(e,t)})},As.setMeasureRatio=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.ratioInfo;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){e.setMeasureRatio(a)}).then(function(){js(e)})},As.setMeasureUnit=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.unit,o=t.measureType;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setMeasureUnit(a,o)}).then(function(){js(e)})},As.setMeasureConversionFactor=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.factor;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){e.setMeasureConversionFactor(a)}).then(function(){js(e)})},As.startImportPages=function(e,t){var n=t.docId,r=t.destIndex,i=t.file,a=t.password,o=t.flags,s=t.layerName,c=t.startIndex,u=t.endIndex;return zs(n).then(function(e){var t=Xs(i),n=Qs(i);return e.startImportPages(r,{size:t,getBuffer:function(e,t){return n(e,t)}},a,o,s,c,u)}).then(function(t){return js(e,t)})},As.importPagesFromPDFDocs=function(e,t){var n=t.docId,r=t.destIndex,i=t.srcDocs,a=t.layerName;return zs(n).then(function(e){return Promise.all(i.map(function(e){var t=e.srcDocId,n=e.srcPages;return zs(t).then(function(e){return{srcDoc:e,srcPages:n}})})).then(function(t){return e.importPagesFromPDFDocs(r,t,a)})}).then(function(t){return js(e,t)})},As.exportPagesToPDFDocs=function(e,t){var n=t.docId,r=t.srcPages,i=t.destDocs,a=t.layerName,o=t.bookmarkTitle;return zs(n).then(function(e){return Promise.all(i.map(function(e){var t=e.destDocId,n=e.destIndex;return zs(t).then(function(e){return{destDoc:e,destIndex:n}})})).then(function(t){return e.exportPagesToPDFDocs(r,t,a,o)})}).then(function(t){return js(e,t.map(function(e){var t=e.doc,n=e.name;return{docId:t?t.id:null,name:n}}))})},As.extractPages=function(e,t){var n=t.docId,r=t.pageRange,i=t.writeStream,a=t.file,o=t.password;return Ga.ZP.loadWasmModule(Ga.LQ).then(function(){return zs(n)}).then(function(e){var t;if(a){var n=Xs(a),s=Qs(a);t={size:n,getBuffer:function(e,t){return s(e,t)}}}return e.extractPages(r,{writeStream:function(e,t,n){Us(i,{arrayBuffer:e,offset:t,size:n},[e])}},t,o)}).then(function(t){return ws.push(n,i),js(e,t)})},As.copyPages=function(e,t){var n=t.docId,r=t.pageRange,i=t.destIndex;return zs(n).then(function(e){return e.copyPages(r,i)}).then(function(t){return js(e,t)})},As.saveCopyPagesData=function(e,t){var n=t.docId,r=t.pageRange;return zs(n).then(function(e){return e.saveCopyPagesData(r)}).then(function(t){js(e,t)})},As.pastePages=function(e,t){var n=t.docId,r=t.destIndex;return zs(n).then(function(e){return e.pastePages(r)}).then(function(t){js(e,t)}).catch(function(t){return Ls(e,t)})},As.embedAllPageThumbnail=function(e,t){return zs(t.docId).then(function(t){oc(t.embedAllPageThumbnail(),"embeddingProgress",js.bind(null,e))})},As.removeEmbeddedPageThumbnail=function(e,t){return zs(t.docId).then(function(t){oc(t.removeEmbeddedPageThumbnail(),"removingProgress",js.bind(null,e))})},As.cancelEmbedAllPageThumbnail=function(e,t){return zs(t.docId).then(function(e){return e.cancelEmbedAllPageThumbnail()}).then(function(t){js(e,t)})},As.cancelRemoveEmbeddedPageThumbnail=function(e,t){return zs(t.docId).then(function(e){return e.cancelRemoveEmbeddedPageThumbnail()}).then(function(t){js(e,t)})},As.getAllBoxes=function(e,t){var n=t.docId,r=t.index;return zs(n).then(function(e){return e.getAllBoxes(r)}).then(function(t){return js(e,t)})},As.setAllBoxesByIndexes=function(e,t){var n=t.docId,r=t.indexes,i=t.width,a=t.height,o=t.xOffset,s=t.yOffset,c=t.boxes,u=t.isMoveWhite;return zs(n).then(function(e){return e.setAllBoxesByIndexes(r,i,a,o,s,c,u)}).then(function(t){return js(e,t)})},As.getPageFormat=function(t,n){var r=n.docId,i=n.type,a=n.previewWidth,o=n.previewHeight,s=n.fileName,c=void 0===s?"":s,u=n.newDocId,d=void 0===u?"":u,h=n.localFormat,f=void 0===h?void 0:h;return Ga.ZP.loadWasmModule(Ga.LQ).then(function(){return zs(r)}).then(function(t){return(0,e._)(function(){var e;return(0,l.Jh)(this,function(n){switch(n.label){case 0:return d.length>1?[4,zs(d)]:[3,2];case 1:e=(e=n.sent()).doc,n.label=2;case 2:return[2,t.getPageFormat(i,a,o,c,e,f)]}})})()}).then(function(e){return js(t,e)})},As.addPageFormat=function(t,n){var r=n.docId,i=n.type,a=n.data,o=n.isUpdate;return zs(r).then(function(t){return(0,e._)(function(){var e,n,r,s;return(0,l.Jh)(this,function(c){switch(c.label){case 0:return a&&a.sourceDoc&&a.sourceDoc.docId&&"currentDoc"!==a.sourceDoc.docId?[4,zs(a.sourceDoc.docId)]:[3,2];case 1:e=c.sent(),a.sourceDoc.newDoc=e.doc,c.label=2;case 2:return a&&2===a.sourceType?a.file?(n=Xs(a.file),r=Qs(a.file),a.file={size:n,getBuffer:function(e,t){return r(e,t)}},a.doc=null,[3,5]):[3,3]:[3,5];case 3:return a.docId?[4,zs(a.docId)]:[3,5];case 4:s=c.sent(),a.doc=s,a.file=null,c.label=5;case 5:return[2,t.addPageFormat(i,a,o)]}})})()}).then(function(e){return js(t,e)})},As.getPageFormatThumb=function(t,n){var r=n.docId,i=n.type,a=n.pageIndex,o=n.data,s=n.isUpdate,c=n.bitmapWidth,u=n.bitmapHeight,d=n.rotate;return zs(r).then(function(t){return(0,e._)(function(){var e,n,r;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return o&&2===o.sourceType?o.file?(e=Xs(o.file),n=Qs(o.file),o.file={size:e,getBuffer:function(e,t){return n(e,t)}},o.doc=null,[3,3]):[3,1]:[3,3];case 1:return o.docId?[4,zs(o.docId)]:[3,3];case 2:r=l.sent(),o.doc=r,o.file=null,l.label=3;case 3:return[2,t.getPageFormatThumb(i,a,o,s,c,u,d)]}})})()}).then(function(e){return js(t,e)})},As.removeAllPageFormat=function(e,t){var n=t.docId,r=t.type;return Ga.ZP.loadWasmModule(Ga.LQ).then(function(){return zs(n)}).then(function(e){return e.removeAllPageFormat(r)}).then(function(t){return js(e,t)})},As.extractPrintPages=function(e,t){var n=t.docId,r=t.data;return Ga.ZP.loadWasmModuleSync(Ga.LQ),Hs(e,n,function(e){if("selectedPDF"===r.rangeType||"allPDF"===r.rangeType){var t=[];"allPDF"===r.rangeType?t=e.pdfPortfolio.getFolioNodePDFDoc():"selectedPDF"===r.rangeType&&(t=r.selectedIds);for(var n=[],i=0;i<t.length;i++){var a=Ks(t[i]);n.push(a)}r.docs=n}return e.extractPrintPages(r)})},As.encryptLicense=function(e,t){return fs.then(function(n){return t=n.encryptLicense(t),js(e,t)})},As.getHeaderFooter=function(e,t){return zs(t).then(function(e){return e.getHeaderFooter()}).then(function(t){return js(e,t)})},As.addHeaderFooter=function(e,t){var n=t.docId,r=t.headerFooter;return zs(n).then(function(e){return e.addHeaderFooter(r)}).then(function(t){return js(e,t)},function(t){return Ls(e,t,[],t)})},As.updateHeaderFooter=function(e,t){var n=t.docId,r=t.headerFooter;return zs(n).then(function(e){return e.updateHeaderFooter(r)}).then(function(t){return js(e,t)},function(t){return Ls(e,t,[],t)})},As.removeHeaderFooter=function(e,t){return zs(t).then(function(e){return e.removeHeaderFooter()}).then(function(t){return js(e,t)})},As.setFontMap=function(e,t){return fs.then(function(n){return n.setFontMap(t),js(e)},function(){return Ls(e)})},As.addFontMap=function(e,t){return fs.then(function(n){return n.addFontMap(t),js(e)},function(){return Ls(e)})},As.setWatermarkFontMap=function(e,t){return fs.then(function(n){return n.setWatermarkFontMap(t),js(e)})},As.getCharBBox=function(e,t){var n=t.fontId,r=t.unicode;return fs.then(function(e){return e.getCharBBox(n,r)}).then(function(t){return js(e,t)})},As.getCharWidthByFontID=function(e,t){var n=t.fontId,r=t.unicode;return fs.then(function(e){return e.getCharWidthByFontID(n,r)}).then(function(t){return js(e,t)})},As.getFontToneByFontID=function(e,t){var n=t.fontId;return fs.then(function(e){return e.getFontToneByFontID(n)}).then(function(t){return js(e,t)})},As.paste=function(e,t){var n=t.docId,r=t.pageId,i=t.srcPageId,a=t.type,o=t.objectId,c=t.position;switch(a){case"annot":return Promise.all([Js(n,r),Js(n,i)]).then(function(e){var t=(0,s._)(e,2),n=t[0],r=t[1],i=r._getAnnotIndexById(o),a=r.page.GetAnnot(i);return n.pasteAnnot(a,c)}).then(function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];i?t[n]=i.toJson():t[n]=null}return t}).then(function(t){return js(e,t)});case"graphicObject":return Promise.all([Js(n,r),Js(n,i)]).then(function(t){var r=(0,s._)(t,2),i=r[0],a=r[1];return As.pasteGraphicObject(e,n,i,a,o,c)}).then(function(e){})}},As.getAnnotsRawData=function(e,t){var n=t.docId,r=t.rawAnnots;return zs(n).then(function(e){return e.getAnnotsRawData(r)}).then(function(t){return js(e,t)})},As.attachFile=function(e,t){var n=t.docId,r=t.blob;return zs(n).then(function(e){return e.attachFile(r)}).then(function(t){return js(e,t)})},As.signDoc=function(e,t){var n=t.docId,r=t.signInfo,i=t.ap;zs(n).then(function(e){return e.sign(r,i)}).then(function(t){if(r.native)return js(e,t,[t]);t?js(e,t,[t.buffer]):js(e)})},As.signDocForESignCN=function(e,t){var n=t.docId,r=t.signInfo;zs(n).then(function(e){return e.signForESignCN(r)}).then(function(t){return js(e,t,[t.buffer])})},As.isESignCNSignature=function(e,t){var n=t.docId,r=t.fieldId,i=t.pageIndex;zs(n).then(function(e){return e.isESignCNSignature(r,i)}).then(function(t){return js(e,t)})},As.addPagingSealSignature=function(e,t){var n=t.docId,r=t.pagingSigConfig;zs(n).then(function(e){return e.addPagingSealSignature(r)}).then(function(t){return js(e,t)})},As.updatePagingSealSignature=function(e,t){var n=t.docId,r=t.pagingSigConfig,i=t.pagingSigObjNum;zs(n).then(function(e){return e.updatePagingSealSignature(r,i)}).then(function(t){return js(e,t)})},As.getAllPagingSealSignatures=function(e,t){var n=t.docId,r=t.pagingSigObjNum;zs(n).then(function(e){return e.getAllPagingSealSignatures(r)}).then(function(t){return js(e,t)})},As.getAllPagingSigsInfo=function(e,t){var n=t.docId,r=t.pagingSigObjNum;zs(n).then(function(e){return e.getAllPagingSigsInfo(r)}).then(function(t){return js(e,t)})},As.removePagingSealSignature=function(e,t){var n=t.docId,r=t.pagingSigObjNum;zs(n).then(function(e){return e.removePagingSealSignature(r)}).then(function(t){return js(e,t)})},As.getFontsInfo=function(e,t){zs(t.docId).then(function(e){return e.getFontsInfo()}).then(function(t){return js(e,t)})},As.getDocAdditionalActions=function(e,t){return Hs(e,t.docId,function(e){return e.getAdditionalActions()})},As.calcPageContentBBox=function(e,t){var n=t.docId,r=t.pageIndex,i=t.mode;Vs(n,r).then(function(e){return e.calcContentBBox(i)}).then(function(t){js(e,t)})},As.getPageBox=function(e,t){var n=t.docId,r=t.pageIndex,i=t.boxType;Vs(n,r).then(function(t){return js(e,t.getBox(i))})},As.setPageBox=function(e,t){var n=t.docId,r=t.pageIndex,i=t.boxType,a=t.rect;Vs(n,r).then(function(t){return js(e,t.setBox(i,a))})},As.setPageSize=function(e,t){var n=t.docId,r=t.pageIndex,i=t.width,a=t.height;Vs(n,r).then(function(t){return js(e,t.setSize(i,a))})},As.getPageAction=function(e,t){var n=t.docId,r=t.pageId,i=t.trigger;return Js(n,r).then(function(e){return e.getAction(i)}).then(function(t){js(e,t)})},As.removePageAction=function(e,t){var n=t.docId,r=t.pageId,i=t.trigger,a=t.action;return Js(n,r).then(function(e){return e.removeAction(i,a)}).then(function(t){js(e,t)})},As.movePageAction=function(e,t){var n=t.docId,r=t.pageId,i=t.moveInfo;return Js(n,r).then(function(e){return e.moveAction(i)}).then(function(t){js(e,t)})},As.setPageAction=function(e,t){var n=t.docId,r=t.pageId,i=t.trigger,a=t.action;Js(n,r).then(function(e){return e.setAction(i,a)}).then(function(){js(e,a)})},As.syncDataCache=function(e,t){var n=t.docId,r=t.pageIdMap;zs(n).then(function(e){return e.syncDataCache(r)}).then(function(){return js(e)})},As.moveAnnotsToPage=function(e,t){var n=t.docId,r=t.srcPageId,i=t.dstPageId,a=t.annotInfos;return zs(n).then(function(e){return e.moveAnnotsToPage(r,i,a)}).then(function(e){return Promise.all(e.map(function(e){return e&&e.toJson()}))}).then(function(t){js(e,t)})},As.getOriginalStream=function(e,t){zs(t.docId).then(function(e){return e.getOriginalStream()}).then(function(t){return js(e,t,[t])})},As.setDocColors=function(e,t){var n=t.docId,r=t.colors;zs(n).then(function(t){return t.setColors(r),js(e)})},As.setPageDisplayPreferences=function(e,t){var n=t.docId,r=t.pageDisplayPreferences;zs(n).then(function(t){return t.setPageDisplayPreferences(r),js(e)})},As.getWidgetMkOption=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(t){var n=t.getWidgetMkOption();js(e,n)})},As.setWidgetIconCaptionRelation=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.relation;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(t){t.setWidgetIconCaptionRelation(a),js(e)})},As.setWidgetHighlighting=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.mode;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(t){t.setWidgetHighlighting(a),js(e)})},As.setWidgetMkCaption=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.position,o=t.caption;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(t){var n=t.setWidgetMkCaption(a,o);js(e,n)})},As.setWidgetMkIcon=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.position,o=t.buffer;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(t){var n=t.setWidgetMkIcon(a,o);js(e,n)})},As.getWidgetIconFitOption=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(t){var n=t.getWidgetIconFitOption();js(e,n)})},As.setWidgetIconFitOption=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.option;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(t){var n=t.setWidgetIconFitOption(a);js(e,n)})},As.setTabOrder=function(e,t){var n=t.docId,r=t.pageIndex,i=t.type;zs(n).then(function(e){return e.setTabOrder(r,i)}).then(function(t){return js(e,t)})},As.getTabOrder=function(e,t){var n=t.docId,r=t.pageIndex;zs(n).then(function(e){return e.getTabOrder(r)}).then(function(t){return js(e,t)})},As.setStructureOrder=function(e,t){var n=t.docId,r=t.pageIndex,i=t.idList;zs(n).then(function(e){return e.setStructureOrder(r,i)}).then(function(){return js(e)})},As.getAnnotIdArrayByOrder=function(e,t){return Js(t.docId,t.pageId).then(function(e){return e.getAnnotIdArrayByOrder()}).then(function(t){return js(e,t)})},As.renderTemplatesByObjNum=function(e,t){var n=t.docId,r=t.objNum;return zs(n).then(function(t){js(e,t.renderTemplatesByObjNum(r))})},As.getNameTree=function(e,t){var n=t.docId,r=t.type;return zs(n).then(function(t){js(e,t.getNameTree(r))})},As.addNameTreeObj=function(e,t){var n=t.docId,r=t.type,i=t.name,a=t.objNum;return zs(n).then(function(t){js(e,t.addNameTreeObj(r,i,a))})},As.removeNameTreeObj=function(e,t){var n=t.docId,r=t.type,i=t.name;return zs(n).then(function(t){js(e,t.removeNameTreeObj(r,i))})},As.replaceNameTreeObj=function(e,t){var n=t.docId,r=t.type,i=t.name,a=t.objNum;return zs(n).then(function(t){js(e,t.replaceNameTreeObj(r,i,a))})},As.renameNameTreeObj=function(e,t){var n=t.docId,r=t.type,i=t.oldName,a=t.newName;return zs(n).then(function(t){js(e,t.renameNameTreeObj(r,i,a))})},As.getPageIndexByObjNum=function(e,t){var n=t.docId,r=t.objNum;return zs(n).then(function(t){js(e,t.getPageIndexByObjNum(r))})},As.nameTreeTemplatesToPages=function(e,t){var n=t.docId,r=t.name;return zs(n).then(function(t){js(e,t.nameTreeTemplatesToPages(r))})},As.nameTreePagesToTemplates=function(e,t){var n=t.docId,r=t.name;return zs(n).then(function(t){js(e,t.nameTreePagesToTemplates(r))})},As.showNameTreePageAtTheEnd=function(e,t){return zs(t.docId).then(function(e){return e.showNameTreePageAtTheEnd()}).then(function(t){js(e,t)})},As.hideNameTreePage=function(e,t){var n=t.docId,r=t.pageIndex;return zs(n).then(function(t){js(e,t.hideNameTreePage(r))})},As.addFileSpec=function(e,t){var n=t.docId,r=t.fileName,i=t.fileBuffer,a=t.modifiedDateTime;return zs(n).then(function(t){js(e,t.addFileSpec(r,i,a))})},As.setFileSpecDesc=function(e,t){var n=t.docId,r=t.desc,i=t.objNum;return zs(n).then(function(t){js(e,t.setFileSpecDesc(r,i))})},As.getFileSpecStream=function(e,t){var n=t.docId,r=t.fileSpecObjNum,i=t.writeStreamCall;return zs(n).then(function(e){return e.getFileSpecStream(r,function(e,t,n){Us(i,{arrayBuffer:e,offset:t,size:n},[e])})}).then(function(t){js(e,t)})},As.getFileSpecStreamByName=function(e,t){var n=t.docId,r=t.name,i=t.writeStreamCall;return zs(n).then(function(e){return e.getFileSpecStreamByName(r,function(e,t,n){Us(i,{arrayBuffer:e,offset:t,size:n},[e])})}).then(function(t){js(e,t)})},As.addEmbeddedFileByAttachments=function(e,t){var n=t.docId,r=t.name,i=t.objNum;return zs(n).then(function(t){js(e,t.attachments.addEmbeddedFile(r,i))})},As.setEmbeddedFileByAttachments=function(e,t){var n=t.docId,r=t.name,i=t.objNum;return zs(n).then(function(t){js(e,t.attachments.setEmbeddedFile(r,i))})},As.removeEmbeddedFileByAttachments=function(e,t){var n=t.docId,r=t.name;return zs(n).then(function(t){js(e,t.attachments.removeEmbeddedFile(r))})},As.getPageDictionary=function(e,t){return Js(t.docId,t.pageId).then(function(e){return e.getPageDictionary()}).then(function(t){return js(e,t)})},As.getSuggestedFormDesignerRect=function(e,t){var n=t.docId,r=t.pageId,i=t.point;return Js(n,r).then(function(e){return e.getSuggestedFormDesignerRect(i)}).then(function(t){return js(e,t)})},As.clearDesignerAssitCache=function(e,t){return Js(t.docId,t.pageId).then(function(e){return e&&e.clearDesignerAssitCache()}).then(function(t){return js(e)})},As.getPDFDictInfo=sc,As.startFormDesignerAssit=function(e,t){zs(t.docId).then(function(e){return e.startFormDesignerAssit()}).then(function(t){return js(e)})},As.stopFormDesignerAssit=function(e,t){zs(t.docId).then(function(e){return e.stopFormDesignerAssit()}).then(function(t){return js(e)})},As.getPDFDictInfo=sc,As.getPageLabels=function(e,t){var n=t.docId,r=t.indexes;zs(n).then(function(e){return e.getPageLabels(r)}).then(function(t){return js(e,t)})},As.hasKey=function(e,t){var n=t.docId,r=t.id,i=t.key;zs(n).then(function(e){return e.hasKey(r,i)}).then(function(t){return js(e,t)})},As.setAt=function(e,t){var n=t.docId,r=t.id,i=t.key,a=t.value;zs(n).then(function(e){return e.setAt(r,i,a)}).then(function(t){return js(e,t)})},As.getAt=function(e,t){var n=t.docId,r=t.id,i=t.key;zs(n).then(function(e){return e.getAt(r,i)}).then(function(t){return js(e,t)})},As.setJPXDownSample=function(e,t){return fs.then(function(n){return n.setJPXDownSample(t),js(e)},function(){return Ls(e)})},As.autoRecognitionForm=function(e,t){var n=t.docId,r=t.options;Ga.ZP.loadWasmModule(Ga.ed).then(function(e){return zs(n)}).then(function(e){return e.autoRecognitionForm(r)}).then(function(t){return js(e,t)})},As.isStaticXFA=function(e,t){return zs(t.docId).then(function(e){return e.isStaticXFA()}).then(function(t){return js(e,t)})},As.isXFA=function(e,t){return zs(t.docId).then(function(e){return e.isXFA()}).then(function(t){js(e,t)})},As.removeXFA=function(e,t){return zs(t.docId).then(function(e){return e.removeXFA()}).then(function(t){return js(e,t)})},As.getAllXFAWidgetsByPageIndex=function(e,t){return Vs(t.docId,t.pageIndex).then(function(e){var t;return null===(t=e.xfaWidgetHandler)||void 0===t?void 0:t.getAllXFAWidgets()}).then(function(t){return js(e,t)})},As.triggerXFAWidgetEvent=function(e,t){var n=t.docId,r=t.pageIndex,i=t.info;return Vs(n,r).then(function(e){var t;return null===(t=e.xfaWidgetHandler)||void 0===t?void 0:t.triggerXFAWidgetEvent(i)}).then(function(t){return js(e,t)})},As.createWebLinks=function(e,t){var n=t.docId,r=t.pageId,i=t.paramPages;return Ga.ZP.loadWasmModule(Ga.ed).then(function(){return Js(n,r)}).then(function(e){return e.createWebLinks(i)}).then(function(t){return js(e,t)})},As.removeWebLinks=function(e,t){var n=t.docId,r=t.pageId,i=t.paramPages;return Ga.ZP.loadWasmModule(Ga.ed).then(function(){return Js(n,r)}).then(function(e){return e.removeWebLinks(i)}).then(function(t){js(e,t)})},As.linkHasPA=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(t){js(e,t.hasPA())})},As.linkResetAByPA=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(t){js(e,t.resetAByPA())})},As.getDestinationsArray=function(e,t){return zs(t.docId).then(function(e){return e.getDestinationsArray()}).then(function(t){js(e,t)})},As.deleteDestination=function(e,t){var n=t.docId,r=t.pageId,i=t.name;return Js(n,r).then(function(e){return e.deleteDestination(i)}).then(function(t){js(e,t)})},As.renameDestination=function(e,t){var n=t.docId,r=t.pageId,i=t.oldName,a=t.newName;return Js(n,r).then(function(t){var n=t.renameDestination(i,a);js(e,n)})},As.createDestination=function(e,t){var n=t.docId,r=t.pageId,i=t.title,a=t.pageNum;return Js(n,r).then(function(t){var n=t.createDestination(i,a);js(e,n)})},As.resetDestination=function(e,t){var n=t.docId,r=t.pageId,i=t.title,a=t.pageNum;return Js(n,r).then(function(e){return e.resetDestination(i,a)}).then(function(t){js(e,t)})},As.moveBookmark=function(e,t){var n=t.docId,r=t.targetBookmarkId,i=t.destBookmarkId,a=t.position,o=t.isOldVersion;return zs(n).then(function(e){return e.moveBookmark(r,i,a,o)}).then(function(t){return js(e,t)})},As.combineFormsToCSV=function(e,t){var n=t.filesArray,r=t.writeStreamCall;return fs.then(function(e){var t=e.engine,i=0,a=(0,d.dD)(),o=new t.FormFileInfoArray;n.forEach(function(e){var n=e.file,r=e.name,i=nc(n),a=t.ReaderCallback.implement({Release:function(){},GetSize:function(){return i.size},ReadBlock:function(e,n,r){var a=new Uint8Array(function(e,t){return i.read(e,t)}(n,r));return t.HEAPU8.set(a,e),!0}}),s=new t.FormFileInfo(a,(0,$.Dp)(t,""),(0,$.Dp)(t,r));o.Add(s)});var s=t.StreamCallback.implement({Release:function(){s.delete()},Flush:function(){return a.resolve(i),!0},IsEOF:function(){return!1},GetPosition:function(){return i},GetSize:function(){return i},WriteBlock:function(e,n,a){i+=a;var o=t.HEAPU8.buffer;return function(e,t,n){Us(r,{arrayBuffer:e,offset:t,size:n},[e])}(o.slice?o.slice(e,e+a):new Uint8Array(o,e,a).buffer,n,a),!0},ReadBlock:function(e,t,n){return!0}});return t.FormCombination.CombineFormsToCSV(o,s,!1),o.delete(),a.promise}).then(function(t){js(e,t)})},As.reversePages=function(e,t){var n=t.docId,r=t.pageRanges;return zs(n).then(function(e){return e.reversePages(r)}).then(function(t){return js(e,t)})},As.movePagesTo=function(e,t){var n=t.docId,r=t.pageRange,i=t.destIndex;return zs(n).then(function(e){return e.movePagesTo(r,i)}).then(function(t){js(e,t)})},As.removePages=function(e,t){var n,r=t.docId,i=t.pageRange;return zs(r).then(function(e){try{var t=function(e){return JSON.parse(JSON.stringify(e)).reduce(function(e,t){if(2===t.length){for(var n=[],r=t[0];r<t[1];r++)n.push(r);t=n}return e.concat(t)},[])}(i).sort(function(e,t){return t-e});n=t.map(function(t){return e.pageIndexMap[t]&&e.pageIndexMap[t].id})}catch(e){}return e.removePages(i)}).then(function(t){try{n&&t&&n.forEach(function(e){Es.clearObjectFromCache(r,e)})}catch(e){}js(e,t)})},As.insertBlankPages=function(e,t){var n=t.docId,r=t.pageRange,i=t.width,a=t.height;return zs(n).then(function(e){return e.insertBlankPages(r,i,a)}).then(function(t){js(e,t)})},As.insertBlankPages2=function(e,t){var n=t.docId,r=t.pageRange,i=t.width,a=t.height;return zs(n).then(function(e){return e.insertBlankPages2(r,i,a)}).then(function(t){js(e,t)})},As.rotatePages=function(e,t){var n=t.docId,r=t.pageRange,i=t.rotation;return zs(n).then(function(e){return e.rotatePages(r,i)}).then(function(t){js(e,t)})},As.getPageIndexByLabelText=function(e,t){var n=t.docId,r=t.text;return zs(n).then(function(e){return function(e,t){for(var n=e.doc,r=new e.engine.PageLabels(n),i=n.GetPageCount(),a=0;a<i;a++)if(r.GetPageLabelTitle(a).toString()===t)return a;return-1}(e,r)}).then(function(t){js(e,t)})},As.getCurrentPageLabelInfo=function(e,t){var n=t.docId,r=t.pageIndex;return zs(n).then(function(e){return function(e,t){for(var n=new e.engine.PageLabels(e.doc),r=n.GetPageLabelPrefix(t),i=n.GetPageLabelTitle(t);!n.HasPageLabel(t)&&t>0;)t--;var a=n.GetPageLabelStyle(t),o=n.GetPageLabelStart(t);return{hasLabel:n.HasPageLabel(t),style:jo(e,a),firstNumber:o,prefix:r.toString(),title:i.toString()}}(e,r)}).then(function(t){js(e,t)})},As.checkDocIsUseLogicPage=function(e,t){return zs(t.docId).then(function(e){return function(e){var t=e.engine,n=e.doc,r=new t.PageLabels(n);if(!r.HasPageLabel(0))return!1;for(var i=n.GetPageCount(),a=0;a<i;a++)if(r.HasPageLabel(a)&&(r.GetPageLabelStyle(a)!==t.PageLabelsStyle.e_DecimalNums||""!==r.GetPageLabelPrefix(a).toString()))return!0;return!1}(e)}).then(function(t){js(e,t)})},As.formatPageNumbers=function(e,t){var n=t.docId,r=t.isExtendNumbering,i=t.pageRange,a=t.numberingInfo;return zs(n).then(function(e){return Uo(e,r,i,a)}).then(function(t){js(e,t)})},As.updatePageLabelsByAction=function(e,t){var n=t.docId,r=t.action,i=t.args;return zs(n).then(function(e){var t;return(t=Wo)[r].apply(t,[e].concat((0,c._)(i)))}).then(function(t){js(e,t)})},As.getPortfolioTreeNode=function(e,t){return zs(t.docId).then(function(e){return e.pdfPortfolio&&e.pdfPortfolio.getTreeNode()}).then(function(t){return js(e,t)})},As.getPortfolioInitialNodePath=function(e,t){return zs(t.docId).then(function(e){return e.pdfPortfolio&&e.pdfPortfolio.getInitialNodePath()}).then(function(t){return js(e,t)})},As.sendSortFolioParam=function(e,t){var n=t.docId,r=t.target,i=t.order;return zs(n).then(function(e){return e.pdfPortfolio&&e.pdfPortfolio.sendSortFolioParam(r,i)}).then(function(t){return js(e,t)})},As.recordPDFFileByPortFolioNode=function(e,t){var n=t.docId,r=t.handle;return zs(n).then(function(e){return e.pdfPortfolio&&e.pdfPortfolio.recordPDFFileByPortFolioNode(r)}).then(function(t){return js(e,t)})},As.getFolioNodePDFDoc=function(e,t){return zs(t.docId).then(function(e){return e.pdfPortfolio&&e.pdfPortfolio.getFolioNodePDFDoc()}).then(function(t){return js(e,t)})},As.getPortfolioFileStream=function(e,t){var n=t.docId,r=t.nodeHandle,i=t.writeStream;return zs(n).then(function(e){return e.pdfPortfolio&&e.pdfPortfolio.getFileStream(r,{writeStream:function(e,t,n){Us(i,{arrayBuffer:e,offset:t,size:n},[e])}})}).then(function(t){js(e,t)})},As.getPortfolioStream=function(e,t){var n=t.docId,r=t.nodeHandles;return zs(n).then(function(e){return e.pdfPortfolio&&e.pdfPortfolio.getStream(r)}).then(function(t){js(e,t)})},As.getPortfolioSubNodes=function(e,t){var n=t.docId,r=t.nodeHandle;return zs(n).then(function(e){return e.pdfPortfolio&&e.pdfPortfolio.getPortfolioSubNodes(r)}).then(function(t){js(e,t)})},As.changePortfolioSubNodesOrder=function(e,t){var n=t.docId,r=t.nodeHandle,i=t.sourceIndexes,a=t.targetIndex;return zs(n).then(function(e){e.pdfPortfolio&&e.pdfPortfolio.changeSubNodesOrder(r,i,a)}).then(function(){js(e)})},As.portfolioMoveSubNodeToSubFolderNode=function(e,t){var n=t.docId,r=t.nodeHandle,i=t.sourceHandles,a=t.targetHandle;return zs(n).then(function(e){e.pdfPortfolio&&e.pdfPortfolio.moveSubNodeToSubFolderNode(r,i,a)}).then(function(){js(e)})},As.portfolioHasSameNameSubNode=function(e,t){var n=t.docId,r=t.name,i=t.type,a=t.targetHandle;return zs(n).then(function(e){return e.pdfPortfolio&&e.pdfPortfolio.hasSameNameSubNode(r,i,a)}).then(function(t){js(e,t)})},As.getPortfolioInfo=function(e,t){return zs(t.docId).then(function(t){var n=t.pdfPortfolio?t.pdfPortfolio.getInfo():{};js(e,n)})},As.setPortfolioInfo=function(e,t){var n=t.docId,r=t.info;return zs(n).then(function(t){t.pdfPortfolio&&t.pdfPortfolio.setInfo(r),js(e)})},As.portfolioAddFiles=function(e,t){var n=t.docId,r=t.files,i=t.targetIndex,a=t.folderNodeHandle;return zs(n).then(function(t){t.pdfPortfolio&&t.pdfPortfolio.addFiles(r,i,a),js(e)})},As.portfolioCreateFolder=function(e,t){var n=t.docId,r=t.name,i=t.folderNodeHandle;return zs(n).then(function(t){var n=t.pdfPortfolio?t.pdfPortfolio.createFolder(r,i):{};js(e,n)})},As.portfolioRemoveSubNodes=function(e,t){var n=t.docId,r=t.folderNodeHandle,i=t.subNodeHandles;return zs(n).then(function(t){t.pdfPortfolio&&t.pdfPortfolio.removeSubNodes(r,i),js(e)})},As.portfolioRegenerateTOC=function(e,t){var n=t.docId,r=t.title;return zs(n).then(function(e){return e.pdfPortfolio&&e.pdfPortfolio.regenerateTOC(r)}).then(function(t){js(e,t)})},As.getSnappedPoint=function(e,t){var n=t.docId,r=t.pageId,i=t.point,a=t.mode;return Js(n,r).then(function(e){return e.getSnappedPoint(i,a)}).then(function(t){js(e,t)})},As.getPageTextRectCount=function(e,t){return Js(t.docId,t.pageId).then(function(e){return e.getTextRectCount()}).then(function(t){return js(e,t),t})},As.getPageTextByRectIndex=function(e,t){var n=t.docId,r=t.pageId,i=t.rectIndex;return Js(n,r).then(function(e){return e.getTextByRectIndex(i)}).then(function(t){return js(e,t),t})},As.updateEncryptedEngineDocForMIP=function(e,t){var n=t.docId,r=t.isSave;return zs(n).then(function(t){js(e,t.updateEncryptedEngineDocForMIP(r))})},As.GetUnprotectedPDFDoc=function(e,t){var n=t.docId,r=t.decryptedDataFile,i=t.permissions,a=t.isFullControl;return zs(n).then(function(t){js(e,t.GetUnprotectedPDFDoc(r,i,a))})},As.StartSaveRawDataTobeEncrypted=function(e,t){var n=t.docId,r=t.isSavingByMipLabel;return zs(n).then(function(t){js(e,t.StartSaveRawDataTobeEncrypted(r))})},As.StartSaveasFromMIPEncryptedPDF=function(e,t){var n=t.docId,r=t.encryptedArrayBuffer,i=t.fileName;return zs(n).then(function(t){js(e,t.StartSaveasFromMIPEncryptedPDF(r,i))})},As.StartSaveasFromMIPLabel=function(e,t){var n=t.docId,r=t.fileBuffer,i=t.wrapperBuffer,a=t.metaDataInfo,o=t.have_print_permission,s=t.have_copy_permission,c=t.fileName;return zs(n).then(function(t){js(e,t.StartSaveasFromMIPLabel(r,i,a,o,s,c))})},As.getAppliedMIPLabelID=function(e,t){return zs(t.docId).then(function(t){js(e,t.getAppliedMIPLabelID())})},As.removeAppliedMIPLabel=function(e,t){return zs(t.docId).then(function(t){t.removeAppliedMIPLabel().then(function(){return js(e)})})},As.checkIsMIPProtected=function(e,t){return zs(t.docId).then(function(t){js(e,t.checkIsMIPProtected())})},As.isCPDF=function(e,t){return zs(t.docId).then(function(t){return js(e,t.isCPDF())})},As.getDocURI=function(e,t){return zs(t.docId).then(function(t){return js(e,t.getDocURI())})},As.convertToCPDF=function(e,t){var n=t.docId,r=t.cPDFFileName,i=t.cPDFEndPoint,a=t.cPDFUserToken,o=t.cPDFUserIDFromToken;return zs(n).then(function(t){return t.convertToCPDF(r,i,a,o).then(function(){return js(e)})})},As.removeCDocId=function(e,t){var n=t.docId,r=t.cPDFFileName,i=t.cPDFEndPoint,a=t.cPDFUserToken,o=t.cPDFUserIDFromToken;return console.log(e),zs(n).then(function(t){return t.removeCDocId(r,i,a,o).then(function(){return js(e)})})},As.removeLayerNode=function(e,t){var n=t.docId,r=t.layerId;return zs(n).then(function(e){return!!e.pdfLayer&&e.pdfLayer.removeLayerNode(r,e)}).then(function(t){return js(e,t)})},As.getLayersByPage=function(e,t){return Js(t.docId,t.pageId).then(function(e){return e.pdfDoc.pdfLayer.getLayersByPage(e)}).then(function(t){return js(e,t)})},As.updateLayerInfo=function(e,t){var n=t.docId,r=t.layerInfo;return zs(n).then(function(t){var n=r.id;if(!n&&0!==n)return js(e,!1);for(var i in r){var a=r[i];switch(i){case"name":t.pdfLayer.setLayerName(n,a);break;case"intent":t.pdfLayer.setLayerIntent(n,a,r.isSingle);break;case"state":t.pdfLayer.setLayerDefaultState(n,a);break;case"isLocked":t.pdfLayer.setLayerLocked(n,a);break;case"viewUsage":t.pdfLayer.setLayerViewUsage(n,a);break;case"printUsage":t.pdfLayer.setLayerPrintUsage(n,a);break;case"exportUsage":t.pdfLayer.setLayerExportUsage(n,a)}}return js(e,!0)})},As.flattenLayers=function(e,t){return zs(t.docId).then(function(e){return!!e.pdfLayer&&e.pdfLayer.flattenLayers(e)}).then(function(t){return js(e,t)})},As.mergeLayers=function(e,t){var n=t.docId,r=t.layerIds,i=t.mergeTo;return zs(n).then(function(e){return!!e.pdfLayer&&e.pdfLayer.mergeLayers(e,r,i)}).then(function(t){return js(e,t)})},As.getLayerRelatedAnnots=function(e,t){var n=t.docId,r=t.layerId;return zs(n).then(function(e){return!!e.pdfLayer&&e.pdfLayer.getLayerNodeById(r).getRelatedAnnots().map(function(e){return e.GetDict().GetObjNum()})}).then(function(t){return js(e,t)})},As.layerMoveTo=function(e,t){var n=t.docId,r=t.layerId,i=t.parentLayerId,a=t.index;return zs(n).then(function(e){return!!e.pdfLayer&&e.pdfLayer.moveTo(r,i,a)}).then(function(t){return js(e,t)})},As.getInfos=function(e,t){return zs(t.docId).then(function(t){js(e,t.getInfos())})},As.hasDocIsWrapped=function(e,t){return zs(t.docId).then(function(t){js(e,t.doc.IsWrapper())})},As.removeMetadata=function(e,t){var n=t.id,r=t.key;return zs(n).then(function(t){return js(e,t.removeMetadata(r))})},As.addAnnotObjects=cc,As.normalizePage=function(e,t){return Js(t.docId,t.pageId).then(function(e){return e.normalize()}).then(function(t){return js(e,t),t})},As.addAnnotObjects=cc,As.getViewerPreference=function(e,t){return zs(t.docId).then(function(t){return js(e,t.getViewerPreference())})},As.setViewPreference=function(e,t){var n=t.docId,r=t.key,i=t.value;return zs(n).then(function(t){return js(e,t.setViewPreference(r,i))})},As.getEmbeddedFontData=function(e,t){return zs(t.docId).then(function(t){return js(e,t.getEmbeddedFontData())})},As.computeAuditSpace=function(e,t){return zs(t.docId).then(function(e){return e.computeAuditSpace()}).then(function(t){return js(e,t)})},As.optimizer=function(e,t){var n=t.docId,r=t.option,i=t.portfolioNodeHandle;return Ga.ZP.loadWasmModule(Ga.sg).then(function(){return zs(n)}).then(function(e){return e.optimizer(r,i)}).then(function(t){return js(e,t)})},As.optimizeScannedPDF=function(e,t){var n=t.docId,r=t.option,i=t.callback;return Ga.ZP.loadWasmModule(Ga.sg).then(function(){return zs(n)}).then(function(e){return e.optimizeScannedPDF(r,function(e){Us(i,e)})}).then(function(t){return js(e,t)})},As.startReplacePages=function(e,t){var n=t.docId,r=t.startIndex,i=t.count,a=t.srcPdfDocId,o=t.srcPageindexRange;return zs(n).then(function(t){return zs(a).then(function(n){return js(e,t.startReplacePages(r,i,n,o))})})},As.importAsLayer=function(e,t){var n=t.docId,r=t.args;return zs(n).then(function(t){return zs(r.sourcePdfDocId).then(function(e){return r.sourcePdfDoc=e.doc,t.importAsLayer(r)}).then(function(t){return js(e,t)})})},As.previewImportLayer=function(e,t){var n=t.docId,r=t.args;return zs(n).then(function(t){return r.sourcePdfDocId?zs(r.sourcePdfDocId).then(function(n){return r.sourcePdfDoc=n.doc,js(e,t.previewImportLayer(r))}):js(e,t.previewImportLayer(r))})},As.comparePDFDocuments=function(e,t){var n=t.docId,r=t.otherDocId,i=t.params,a=t.progressId;return Ga.ZP.loadWasmModule(Ga.oJ).then(function(){return Promise.all([Ga.ZP.loadWasmModule(Ga.sg),zs(n),zs(r),fs])}).then(function(e){var t=(0,s._)(e,4),n=(t[0],t[1]),r=t[2],o=t[3],c=o.engine,u=a?c.ComparisonProgresssCallback.implement({Release:function(){},UpdateCurrentStateData:function(e,t){Ws(a,e)},ShouldCancel:function(){}}):null;return a&&Ws(a,0),n.compareWith(r,i,u).then(function(e){var t=o.getPDFDoc({doc:e});return t.setMetadataValue("CreationDate",Date.now()),t.setMetadataValue("Author",o.getUserName()),{docId:t.id,parameters:{}}})}).then(function(t){js(e,t)})},As.reloadLayer=function(e,t){return zs(t.docId).then(function(t){js(e,t.reloadLayer())})},As.getViewportRect=function(e,t){return Js(t.docId,t.pageId).then(function(e){return e.getViewportRect()}).then(function(t){return js(e,t),t})},As.getMeasureScaleRatio=function(e,t){return Js(t.docId,t.pageId).then(function(e){return e.getMeasureScaleRatio()}).then(function(t){return js(e,t),t})},As.exportMeasureData=function(e,t){var n=t.docId,r=t.columnNames;return zs(n).then(function(e){return e.exportMeasureData(r)}).then(function(t){return js(e,t)})},As.setMeasureScaleRatio=function(e,t){var n=t.docId,r=t.pageId,i=t.storeInPage,a=t.measureInfo;return Js(n,r).then(function(e){return e.setMeasureRatio(i,a)}).then(function(t){return js(e,t),t})},As.searchDoc=function(e,t){var n=t.docId,r=t.type,i=t.words,a=t.flag,o=t.isForRedact;return zs(n).then(function(e){return e.searchDoc(r,i,a,o)}).then(function(t){return js(e,t)})},As.generateDocHash=function(e,t){var n=t.docId,r=t.buffer;return zs(n).then(function(e){return e.generateDocHash(r)}).then(function(t){return js(e,t)})},As.getSignIdForEvidence=function(e,t){return zs(t.docId).then(function(e){return e.getSignIdForEvidence()}).then(function(t){return js(e,t)})},As.assignSignerForESignCN=function(e,t){var n=t.docId,r=t.data;return zs(n).then(function(e){return e.assignSignerForESignCN(r)}).then(function(t){return js(e,t)})},As.setESignCNFlowSignMode=function(e,t){var n=t.docId,r=t.type;return zs(n).then(function(e){return e.setESignCNFlowSignMode(r)}).then(function(t){return js(e,t)})},As.getESignCNFlowSignMode=function(e,t){return zs(t.docId).then(function(e){return e.getESignCNFlowSignMode()}).then(function(t){return js(e,t)})},As.isESignCNFile=function(e,t){return zs(t.docId).then(function(e){return e.isESignCNFile()}).then(function(t){return js(e,t)})},As.getESignCNMode=function(e,t){var n=t.docId,r=t.fieldName;return zs(n).then(function(e){var t=e.loadForm().getField(r);return e.getESignCNMode(t.engineField)}).then(function(t){return js(e,t)})},As.addAuditTrail=function(e,t){return zs(t.docId).then(function(e){return e.addAuditTrail()}).then(function(t){return js(e,t)})},As.getDocAuditTrail=function(e,t){var n=t.docId,r=t.buffer,i=t.flowSignAnnots;return zs(n).then(function(e){return e.getDocAuditTrail(r,i)}).then(function(t){return js(e,t)})},As.updatePropAuthDictForESignCN=function(e,t){var n=t.docId,r=t.fieldName,i=t.willingnessInfo;return zs(n).then(function(e){return e.updatePropAuthDictForESignCN({fieldName:r,willingnessInfo:i})}).then(function(t){return js(e,t)})},As.getAssignInfoForESignCN=function(e,t){return zs(t.docId).then(function(e){return e.getAssignInfoForESignCN()}).then(function(t){return js(e,t)})},As.getOrderOfSignFlowFile=function(e,t){return zs(t.docId).then(function(e){return e.getOrderOfSignFlowFile()}).then(function(t){return js(e,t)})},As.checkFieldWhetherFill=function(e,t){var n=t.docId,r=t.emailValue;return zs(n).then(function(e){return e.checkFieldWhetherFill(r)}).then(function(t){return js(e,t)})},As.setSignatureAP=function(e,t){var n=t.docId,r=t.pageIndex,i=t.annotId,a=t.inkSignBuffer,o=t.pagingSigObjNum;return zs(n).then(function(e){return e.setSignatureAP({pageIndex:r,annotId:i,inkSignBuffer:a,pagingSigObjNum:o})}).then(function(t){return js(e,t)})},As.getFlowSignInfo=function(e,t){return zs(t.docId).then(function(e){return e.getFlowSignInfo()}).then(function(t){return js(e,t)})},As.convertToTextMarkup=function(e,t){var n=t.docId,r=t.findResults;return zs(n).then(function(e){return e.convertToTextMarkup(r)}).then(function(t){return js(e,t)})},As.redactSearch=function(e,t){var n=t.docId,r=t.findResults,i=t.start,a=t.count,o=t.overlayTexts,s=t.opts;return zs(n).then(function(e){return e.redactSearch(r,i,a,o,s)}).then(function(t){return js(e,t)})},As.setRenderConfigLineWeight=function(e,t){var n=t.docId,r=t.lineWeight;return zs(n).then(function(t){return t.setRenderConfigLineWeight(r),js(e)})},As.isScannedDoc=function(e,t){return zs(t.docId).then(function(e){return e.isScannedDoc()}).then(function(t){return js(e,t)})},As.getCompareFileFilterNums=function(e,t){return zs(t.docId).then(function(t){var n=t.getCompareFileFilterNums();return js(e,n)})},As.removePDFAID=function(e,t){return zs(t.docId).then(function(t){return t.removePDFAID(),js(e)})},As.setPageTransition=function(e,t){var n=t.docId,r=t.transName,i=t.direction,a=t.speed,o=t.range;return zs(n).then(function(t){return js(e,t.setPageTransition(r,i,a,o))})},As.getPageTransitionByIndex=function(e,t){var n=t.docId,r=t.pageIndex;return zs(n).then(function(t){return js(e,t.getPageTransitionByIndex(r))})},As.getStampTypeByPageIndex=function(e,t){var n=t.docId,r=t.pageIndex;return zs(n).then(function(t){return js(e,t.getStampTypeByPageIndex(r))})},As.getPageTransition=function(e,t){var n=t.docId,r=t.pageId;return Js(n,r).then(function(t){return js(e,t.getPageTransition(r))})},As.isScannedPage=function(e,t){return Js(t.docId,t.pageId).then(function(e){return e.isScannedPage()}).then(function(t){return js(e,t)})},As.getPureTexts=function(e,t){var n=t.docId,r=t.pageId,i=t.order;return Js(n,r).then(function(t){t.getPureTexts(i).then(function(t){js(e,t)})})},As.getLRContentForChatWithDoc=function(t,n){var r=n.docId,i=n.options;return zs(r).then(function(n){return(0,e._)(function(){var e;return(0,l.Jh)(this,function(r){switch(r.label){case 0:return[4,(0,is.yz)(n,i)];case 1:return e=r.sent(),[2,js(t,e)]}})})()})},As.fetchContentByType=function(t,n){var r=n.docId,i=n.options;return zs(r).then(function(n){return(0,e._)(function(){var e,r;return(0,l.Jh)(this,function(a){switch(a.label){case 0:return[4,fs];case 1:return e=a.sent().engine,[4,(0,is.zf)(e,n,i)];case 2:return r=a.sent(),[2,js(t,r)]}})})()})},As.getDocPurText=function(e,t){return zs(t.docId).then(function(t){return(0,is.aZ)(t).then(function(t){return js(e,t)})})},As.docCanDoOcr=function(e,t){var n=t.docId,r=t.checkImage;return zs(n).then(function(t){return(0,is.Is)(t,r).then(function(t){return js(e,t)})})},As.hiddenDataSanitizeDocument=function(t,n){var r=n.docId;return Ga.ZP.loadWasmModule(Ga.sg).then(function(e){return zs(r)}).then(function(n){return function(t){return(0,e._)(function(){return(0,l.Jh)(this,function(e){switch(e.label){case 0:return[4,t.doc.Sanitize()];case 1:return[2,e.sent()]}})})()}(n).then(function(e){return js(t,e)})})},As.hiddenDataRemoveHiddenInfo=function(t,n){var r=n.docId,i=n.options;return Ga.ZP.loadWasmModule(Ga.sg).then(function(e){return zs(r)}).then(function(n){return function(t,n){return(0,e._)(function(){var e,r,i,a,o,s,c,u,d;return(0,l.Jh)(this,function(l){switch(l.label){case 0:e=t.doc,r=t.engine,i=new r.RemoveInfo,a=!0,o=!1,s=void 0;try{for(c=Ho[Symbol.iterator]();!(a=(u=c.next()).done);a=!0)d=u.value,i[d]=!!n[d]}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return[4,e.RemoveHiddenInfo(i)];case 1:return[2,l.sent()]}})})()}(n,i).then(function(e){return js(t,e)})})},As.handleGroupMarkup=function(e,t){var n=t.docId,r=t.pageId,i=t.annotIds,a=t.isGroup;return Js(n,r).then(function(e){return e.handleGroupMarkup(i,a)}).then(function(t){return js(e,t)})},As.setRedactAppearance=function(e,t){var n=t.docId,r=t.pageId,i=t.annotId,a=t.option;return Js(n,r).then(function(e){return e.getAnnotById(i)}).then(function(e){return e.setRedactAppearance(a)}).then(function(t){js(e,t)})},As.getText=function(e,t){var n=t.docId,r=t.pageRange,i=t.taskId,a=t.taskProgress;return Ga.ZP.loadWasmModule(Ga.sg).then(function(){return zs(n)}).then(function(e){return e.getText(r,i,{taskProgress:function(e){Us(a,e,[])}})}).then(function(t){js(e,t)})},As.cancelTaskProgress=function(e,t){var n=t.docId,r=t.taskId;return zs(n).then(function(e){return e.cancelTaskProgress(r)}).then(function(t){js(e,t)})},As.getPageTexts=function(e,t){var n=t.docId,r=t.pageId,i=t.settings,a=t.minWidth,o=t.eol;return Js(n,r).then(function(t){var n=t.getPageTexts(i,a,o);return js(e,n)})},As.cacheFontConfig=function(e,t){fs.then(function(e){return e.cacheFontConfig(t)}).then(function(){js(e)})},As.getFxcoreFontList=function(e,t){fs.then(function(e){return e.getFxcoreFontList(t)}).then(function(t){js(e,t)})},As.getFATLAndEUTLList=function(e,t){var n=t.urls,r=t.isUpdate;Is&&!(void 0!==r&&r)?bs.then(function(t){js(e,t)}):(Is=!1,Ga.ZP.loadWasmModule(Ga.v6).then(function(){return fs}).then(function(e){return e.getFATLAndEUTLList(n)}).then(function(t){Ss.resolve(t),Is=!0,js(e,t)}))},As.getTextInRect=function(e,t){var n=t.docId,r=t.pageId,i=t.rect,a=t.type;return Js(n,r).then(function(e){return e.getTextInRect(i,a)}).then(function(t){return js(e,t)})},As.getAnnotRects=function(e,t){return Js(t.docId,t.pageId).then(function(e){return e.getAnnots()}).then(function(e){return e.map(function(e){return e.getRectJson()})}).then(function(t){js(e,t)})},As.transformPage=function(e,t){var n=t.docId,r=t.pageId,i=t.options;return Js(n,r).then(function(t){var n=t.transform(i.scaleX,i.scaleY,i.translateX,i.translateY);js(e,n)})},As.clearAllDesignerAssistCache=function(e,t){return zs(t.docId).then(function(t){t.clearAllDesignerAssistCache(),js(e)})},As.removeAllEmbeddedFiles=function(e,t){return zs(t.docId).then(function(t){var n=t.attachments.removeAllEmbeddedFiles();js(e,n)})},As.getEmbeddedFileNames=function(e,t){return zs(t.docId).then(function(t){var n=t.attachments.getEmbeddedFileNames();js(e,n)})},As.hasFixedPageFields=function(e,t){var n=t.docId,r=t.pageIndex;return zs(n).then(function(t){var n=!0==!!t.fixPages[r];js(e,n)})},As.drawTextString=function(e,t){var n=t.docId,r=t.font;return zs(n).then(function(e){return e.drawTextString(r)}).then(function(t){return js(e,t)})},As.clearPageRenderCache=function(e,t){Js(t.docId,t.pageId).then(function(e){e&&!e.isVirtual&&e.clearRenderCache()}),js(e)},As.addAnnots=function(e,t){var n=t.docId,r=t.annotJsonArray,i=t.progress;return zs(n).then(function(t){return t.addAnnots(r,function(e){Us(i,e)}).then(function(t){js(e,t)})})},As[d.KQ]=function(e){d.mA.getLogger("message-channel").info(e)}})(),__webpack_exports__})());